(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var k1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sm={exports:{}},qd={};var p5;function J_(){if(p5)return qd;p5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:o}}return qd.Fragment=e,qd.jsx=t,qd.jsxs=t,qd}var m5;function eS(){return m5||(m5=1,Sm.exports=J_()),Sm.exports}var g=eS(),Nm={exports:{}},bn={};var g5;function tS(){if(g5)return bn;g5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function T(z,E,$){this.props=z,this.context=E,this.refs=k,this.updater=$||A}T.prototype.isReactComponent={},T.prototype.setState=function(z,E){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,E,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function R(){}R.prototype=T.prototype;function D(z,E,$){this.props=z,this.context=E,this.refs=k,this.updater=$||A}var V=D.prototype=new R;V.constructor=D,N(V,T.prototype),V.isPureReactComponent=!0;var B=Array.isArray;function W(){}var H={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function F(z,E,$){var G=$.ref;return{$$typeof:n,type:z,key:E,ref:G!==void 0?G:null,props:$}}function te(z,E){return F(z.type,E,z.props)}function j(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function I(z){var E={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function($){return E[$]})}var X=/\/+/g;function P(z,E){return typeof z=="object"&&z!==null&&z.key!=null?I(""+z.key):E.toString(36)}function ae(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(W,W):(z.status="pending",z.then(function(E){z.status==="pending"&&(z.status="fulfilled",z.value=E)},function(E){z.status==="pending"&&(z.status="rejected",z.reason=E)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Z(z,E,$,G,Q){var ie=typeof z;(ie==="undefined"||ie==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(ie){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case n:case e:pe=!0;break;case p:return pe=z._init,Z(pe(z._payload),E,$,G,Q)}}if(pe)return Q=Q(z),pe=G===""?"."+P(z,0):G,B(Q)?($="",pe!=null&&($=pe.replace(X,"$&/")+"/"),Z(Q,E,$,"",function(Se){return Se})):Q!=null&&(j(Q)&&(Q=te(Q,$+(Q.key==null||z&&z.key===Q.key?"":(""+Q.key).replace(X,"$&/")+"/")+pe)),E.push(Q)),1;pe=0;var de=G===""?".":G+":";if(B(z))for(var ye=0;ye<z.length;ye++)G=z[ye],ie=de+P(G,ye),pe+=Z(G,E,$,ie,Q);else if(ye=b(z),typeof ye=="function")for(z=ye.call(z),ye=0;!(G=z.next()).done;)G=G.value,ie=de+P(G,ye++),pe+=Z(G,E,$,ie,Q);else if(ie==="object"){if(typeof z.then=="function")return Z(ae(z),E,$,G,Q);throw E=String(z),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return pe}function re(z,E,$){if(z==null)return z;var G=[],Q=0;return Z(z,G,"","",function(ie){return E.call($,ie,Q++)}),G}function le(z){if(z._status===-1){var E=z._result;E=E(),E.then(function($){(z._status===0||z._status===-1)&&(z._status=1,z._result=$)},function($){(z._status===0||z._status===-1)&&(z._status=2,z._result=$)}),z._status===-1&&(z._status=0,z._result=E)}if(z._status===1)return z._result.default;throw z._result}var fe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},_e={map:re,forEach:function(z,E,$){re(z,function(){E.apply(this,arguments)},$)},count:function(z){var E=0;return re(z,function(){E++}),E},toArray:function(z){return re(z,function(E){return E})||[]},only:function(z){if(!j(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return bn.Activity=y,bn.Children=_e,bn.Component=T,bn.Fragment=t,bn.Profiler=a,bn.PureComponent=D,bn.StrictMode=s,bn.Suspense=h,bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,bn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return H.H.useMemoCache(z)}},bn.cache=function(z){return function(){return z.apply(null,arguments)}},bn.cacheSignal=function(){return null},bn.cloneElement=function(z,E,$){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var G=N({},z.props),Q=z.key;if(E!=null)for(ie in E.key!==void 0&&(Q=""+E.key),E)!L.call(E,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&E.ref===void 0||(G[ie]=E[ie]);var ie=arguments.length-2;if(ie===1)G.children=$;else if(1<ie){for(var pe=Array(ie),de=0;de<ie;de++)pe[de]=arguments[de+2];G.children=pe}return F(z.type,Q,G)},bn.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},bn.createElement=function(z,E,$){var G,Q={},ie=null;if(E!=null)for(G in E.key!==void 0&&(ie=""+E.key),E)L.call(E,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(Q[G]=E[G]);var pe=arguments.length-2;if(pe===1)Q.children=$;else if(1<pe){for(var de=Array(pe),ye=0;ye<pe;ye++)de[ye]=arguments[ye+2];Q.children=de}if(z&&z.defaultProps)for(G in pe=z.defaultProps,pe)Q[G]===void 0&&(Q[G]=pe[G]);return F(z,ie,Q)},bn.createRef=function(){return{current:null}},bn.forwardRef=function(z){return{$$typeof:c,render:z}},bn.isValidElement=j,bn.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:le}},bn.memo=function(z,E){return{$$typeof:f,type:z,compare:E===void 0?null:E}},bn.startTransition=function(z){var E=H.T,$={};H.T=$;try{var G=z(),Q=H.S;Q!==null&&Q($,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(W,fe)}catch(ie){fe(ie)}finally{E!==null&&$.types!==null&&(E.types=$.types),H.T=E}},bn.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},bn.use=function(z){return H.H.use(z)},bn.useActionState=function(z,E,$){return H.H.useActionState(z,E,$)},bn.useCallback=function(z,E){return H.H.useCallback(z,E)},bn.useContext=function(z){return H.H.useContext(z)},bn.useDebugValue=function(){},bn.useDeferredValue=function(z,E){return H.H.useDeferredValue(z,E)},bn.useEffect=function(z,E){return H.H.useEffect(z,E)},bn.useEffectEvent=function(z){return H.H.useEffectEvent(z)},bn.useId=function(){return H.H.useId()},bn.useImperativeHandle=function(z,E,$){return H.H.useImperativeHandle(z,E,$)},bn.useInsertionEffect=function(z,E){return H.H.useInsertionEffect(z,E)},bn.useLayoutEffect=function(z,E){return H.H.useLayoutEffect(z,E)},bn.useMemo=function(z,E){return H.H.useMemo(z,E)},bn.useOptimistic=function(z,E){return H.H.useOptimistic(z,E)},bn.useReducer=function(z,E,$){return H.H.useReducer(z,E,$)},bn.useRef=function(z){return H.H.useRef(z)},bn.useState=function(z){return H.H.useState(z)},bn.useSyncExternalStore=function(z,E,$){return H.H.useSyncExternalStore(z,E,$)},bn.useTransition=function(){return H.H.useTransition()},bn.version="19.2.0",bn}var b5;function zg(){return b5||(b5=1,Nm.exports=tS()),Nm.exports}var ee=zg();const Cn=Q_(ee);var Am={exports:{}},Ud={},Cm={exports:{}},Tm={};var v5;function nS(){return v5||(v5=1,(function(n){function e(Z,re){var le=Z.length;Z.push(re);e:for(;0<le;){var fe=le-1>>>1,_e=Z[fe];if(0<a(_e,re))Z[fe]=re,Z[le]=_e,le=fe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var re=Z[0],le=Z.pop();if(le!==re){Z[0]=le;e:for(var fe=0,_e=Z.length,z=_e>>>1;fe<z;){var E=2*(fe+1)-1,$=Z[E],G=E+1,Q=Z[G];if(0>a($,le))G<_e&&0>a(Q,$)?(Z[fe]=Q,Z[G]=le,fe=G):(Z[fe]=$,Z[E]=le,fe=E);else if(G<_e&&0>a(Q,le))Z[fe]=Q,Z[G]=le,fe=G;else break e}}return re}function a(Z,re){var le=Z.sortIndex-re.sortIndex;return le!==0?le:Z.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();n.unstable_now=function(){return u.now()-c}}var h=[],f=[],p=1,y=null,_=3,b=!1,A=!1,N=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function V(Z){for(var re=t(f);re!==null;){if(re.callback===null)s(f);else if(re.startTime<=Z)s(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function B(Z){if(N=!1,V(Z),!A)if(t(h)!==null)A=!0,W||(W=!0,I());else{var re=t(f);re!==null&&ae(B,re.startTime-Z)}}var W=!1,H=-1,L=5,F=-1;function te(){return k?!0:!(n.unstable_now()-F<L)}function j(){if(k=!1,W){var Z=n.unstable_now();F=Z;var re=!0;try{e:{A=!1,N&&(N=!1,R(H),H=-1),b=!0;var le=_;try{t:{for(V(Z),y=t(h);y!==null&&!(y.expirationTime>Z&&te());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,_=y.priorityLevel;var _e=fe(y.expirationTime<=Z);if(Z=n.unstable_now(),typeof _e=="function"){y.callback=_e,V(Z),re=!0;break t}y===t(h)&&s(h),V(Z)}else s(h);y=t(h)}if(y!==null)re=!0;else{var z=t(f);z!==null&&ae(B,z.startTime-Z),re=!1}}break e}finally{y=null,_=le,b=!1}re=void 0}}finally{re?I():W=!1}}}var I;if(typeof D=="function")I=function(){D(j)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,P=X.port2;X.port1.onmessage=j,I=function(){P.postMessage(null)}}else I=function(){T(j,0)};function ae(Z,re){H=T(function(){Z(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var le=_;_=re;try{return Z()}finally{_=le}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(Z,re){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var le=_;_=Z;try{return re()}finally{_=le}},n.unstable_scheduleCallback=function(Z,re,le){var fe=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?fe+le:fe):le=fe,Z){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=le+_e,Z={id:p++,callback:re,priorityLevel:Z,startTime:le,expirationTime:_e,sortIndex:-1},le>fe?(Z.sortIndex=le,e(f,Z),t(h)===null&&Z===t(f)&&(N?(R(H),H=-1):N=!0,ae(B,le-fe))):(Z.sortIndex=_e,e(h,Z),A||b||(A=!0,W||(W=!0,I()))),Z},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(Z){var re=_;return function(){var le=_;_=re;try{return Z.apply(this,arguments)}finally{_=le}}}})(Tm)),Tm}var y5;function rS(){return y5||(y5=1,Cm.exports=nS()),Cm.exports}var km={exports:{}},ai={};var x5;function sS(){if(x5)return ai;x5=1;var n=zg();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ai.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ai.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},ai.flushSync=function(h){var f=u.T,p=s.p;try{if(u.T=null,s.p=2,h)return h()}finally{u.T=f,s.p=p,s.d.f()}},ai.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},ai.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},ai.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&s.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ai.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},ai.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);s.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ai.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},ai.requestFormReset=function(h){s.d.r(h)},ai.unstable_batchedUpdates=function(h,f){return h(f)},ai.useFormState=function(h,f,p){return u.H.useFormState(h,f,p)},ai.useFormStatus=function(){return u.H.useHostTransitionStatus()},ai.version="19.2.0",ai}var w5;function Px(){if(w5)return km.exports;w5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),km.exports=sS(),km.exports}var _5;function iS(){if(_5)return Ud;_5=1;var n=rS(),e=zg(),t=Px();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function c(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(s(188))}function f(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,d=i;;){var v=l.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===l)return h(v),r;if(w===d)return h(v),i;w=w.sibling}throw Error(s(188))}if(l.return!==d.return)l=v,d=w;else{for(var O=!1,ne=v.child;ne;){if(ne===l){O=!0,l=v,d=w;break}if(ne===d){O=!0,d=v,l=w;break}ne=ne.sibling}if(!O){for(ne=w.child;ne;){if(ne===l){O=!0,l=w,d=v;break}if(ne===d){O=!0,d=w,l=v;break}ne=ne.sibling}if(!O)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function I(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case D:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case V:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return i=r.displayName||null,i!==null?i:P(r.type)||"Memo";case L:i=r._payload,r=r._init;try{return P(r(i))}catch{}}return null}var ae=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},fe=[],_e=-1;function z(r){return{current:r}}function E(r){0>_e||(r.current=fe[_e],fe[_e]=null,_e--)}function $(r,i){_e++,fe[_e]=r.current,r.current=i}var G=z(null),Q=z(null),ie=z(null),pe=z(null);function de(r,i){switch($(ie,i),$(Q,r),$(G,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Vv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Vv(i),r=Fv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}E(G),$(G,r)}function ye(){E(G),E(Q),E(ie)}function Se(r){r.memoizedState!==null&&$(pe,r);var i=G.current,l=Fv(i,r.type);i!==l&&($(Q,r),$(G,l))}function Be(r){Q.current===r&&(E(G),E(Q)),pe.current===r&&(E(pe),Fd._currentValue=le)}var Qe,Xe;function ot(r){if(Qe===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Qe=i&&i[1]||"",Xe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+r+Xe}var Y=!1;function Ie(r,i){if(!r||Y)return"";Y=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(ze){var Fe=ze}Reflect.construct(r,[],Je)}else{try{Je.call()}catch(ze){Fe=ze}r.call(Je.prototype)}}else{try{throw Error()}catch(ze){Fe=ze}(Je=r())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(ze){if(ze&&Fe&&typeof ze.stack=="string")return[ze.stack,Fe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),O=w[0],ne=w[1];if(O&&ne){var me=O.split(`
`),De=ne.split(`
`);for(v=d=0;d<me.length&&!me[d].includes("DetermineComponentFrameRoot");)d++;for(;v<De.length&&!De[v].includes("DetermineComponentFrameRoot");)v++;if(d===me.length||v===De.length)for(d=me.length-1,v=De.length-1;1<=d&&0<=v&&me[d]!==De[v];)v--;for(;1<=d&&0<=v;d--,v--)if(me[d]!==De[v]){if(d!==1||v!==1)do if(d--,v--,0>v||me[d]!==De[v]){var Ge=`
`+me[d].replace(" at new "," at ");return r.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",r.displayName)),Ge}while(1<=d&&0<=v);break}}}finally{Y=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?ot(l):""}function vt(r,i){switch(r.tag){case 26:case 27:case 5:return ot(r.type);case 16:return ot("Lazy");case 13:return r.child!==i&&i!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return Ie(r.type,!1);case 11:return Ie(r.type.render,!1);case 1:return Ie(r.type,!0);case 31:return ot("Activity");default:return""}}function et(r){try{var i="",l=null;do i+=vt(r,l),l=r,r=r.return;while(r);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Re=Object.prototype.hasOwnProperty,it=n.unstable_scheduleCallback,qe=n.unstable_cancelCallback,ht=n.unstable_shouldYield,Te=n.unstable_requestPaint,tt=n.unstable_now,bt=n.unstable_getCurrentPriorityLevel,mt=n.unstable_ImmediatePriority,st=n.unstable_UserBlockingPriority,dt=n.unstable_NormalPriority,gt=n.unstable_LowPriority,Nt=n.unstable_IdlePriority,Ee=n.log,ft=n.unstable_setDisableYieldValue,ut=null,We=null;function at(r){if(typeof Ee=="function"&&ft(r),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(ut,r)}catch{}}var xt=Math.clz32?Math.clz32:jt,ct=Math.log,nn=Math.LN2;function jt(r){return r>>>=0,r===0?32:31-(ct(r)/nn|0)|0}var Ft=256,en=262144,At=4194304;function wt(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qt(r,i,l){var d=r.pendingLanes;if(d===0)return 0;var v=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var ne=d&134217727;return ne!==0?(d=ne&~w,d!==0?v=wt(d):(O&=ne,O!==0?v=wt(O):l||(l=ne&~r,l!==0&&(v=wt(l))))):(ne=d&~w,ne!==0?v=wt(ne):O!==0?v=wt(O):l||(l=d&~r,l!==0&&(v=wt(l)))),v===0?0:i!==0&&i!==v&&(i&w)===0&&(w=v&-v,l=i&-i,w>=l||w===32&&(l&4194048)!==0)?i:v}function wn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Me(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var r=At;return At<<=1,(At&62914560)===0&&(At=4194304),r}function we(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Ve(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function pt(r,i,l,d,v,w){var O=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var ne=r.entanglements,me=r.expirationTimes,De=r.hiddenUpdates;for(l=O&~l;0<l;){var Ge=31-xt(l),Je=1<<Ge;ne[Ge]=0,me[Ge]=-1;var Fe=De[Ge];if(Fe!==null)for(De[Ge]=null,Ge=0;Ge<Fe.length;Ge++){var ze=Fe[Ge];ze!==null&&(ze.lane&=-536870913)}l&=~Je}d!==0&&Et(r,d,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~i))}function Et(r,i,l){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-xt(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|l&261930}function Bt(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var d=31-xt(l),v=1<<d;v&i|r[d]&i&&(r[d]|=i),l&=~v}}function sn(r,i){var l=i&-i;return l=(l&42)!==0?1:Yt(l),(l&(r.suspendedLanes|i))!==0?0:l}function Yt(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function dn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fn(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:o5(r.type))}function Jn(r,i){var l=re.p;try{return re.p=r,i()}finally{re.p=l}}var Gn=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Gn,an="__reactProps$"+Gn,$n="__reactContainer$"+Gn,Er="__reactEvents$"+Gn,us="__reactListeners$"+Gn,je="__reactHandles$"+Gn,Pe="__reactResources$"+Gn,Ze="__reactMarker$"+Gn;function Ct(r){delete r[Sn],delete r[an],delete r[Er],delete r[us],delete r[je]}function St(r){var i=r[Sn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[$n]||l[Sn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Wv(r);r!==null;){if(l=r[Sn])return l;r=Wv(r)}return i}r=l,l=r.parentNode}return null}function Mt(r){if(r=r[Sn]||r[$n]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function pn(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function un(r){var i=r[Pe];return i||(i=r[Pe]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function on(r){r[Ze]=!0}var xn=new Set,Pn={};function Tn(r,i){sr(r,i),sr(r+"Capture",i)}function sr(r,i){for(Pn[r]=i,r=0;r<i.length;r++)xn.add(i[r])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mr={},_s={};function Yi(r){return Re.call(_s,r)?!0:Re.call(Mr,r)?!1:$r.test(r)?_s[r]=!0:(Mr[r]=!0,!1)}function Pr(r,i,l){if(Yi(i))if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+l)}}function ni(r,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+l)}}function Gs(r,i,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(i,l,""+d)}}function Nn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Xi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ds(r,i,l){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return v.call(this)},set:function(O){l=""+O,w.call(this,O)}}),Object.defineProperty(r,i,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(O){l=""+O},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Si(r){if(!r._valueTracker){var i=Xi(r)?"checked":"value";r._valueTracker=Ds(r,i,""+r[i])}}function _o(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return r&&(d=Xi(r)?r.checked?"true":"false":r.value),r=d,r!==l?(i.setValue(r),!0):!1}function hs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var zr=/[\n"\\]/g;function Lr(r){return r.replace(zr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function So(r,i,l,d,v,w,O,ne){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),i!=null?O==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Nn(i)):r.value!==""+Nn(i)&&(r.value=""+Nn(i)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),i!=null?Qo(r,O,Nn(i)):l!=null?Qo(r,O,Nn(l)):d!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?r.name=""+Nn(ne):r.removeAttribute("name")}function Bl(r,i,l,d,v,w,O,ne){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),i!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){Si(r);return}l=l!=null?""+Nn(l):"",i=i!=null?""+Nn(i):l,ne||i===r.value||(r.value=i),r.defaultValue=i}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=ne?r.checked:!!d,r.defaultChecked=!!d,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),Si(r)}function Qo(r,i,l){i==="number"&&hs(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function $s(r,i,l,d){if(r=r.options,i){i={};for(var v=0;v<l.length;v++)i["$"+l[v]]=!0;for(l=0;l<r.length;l++)v=i.hasOwnProperty("$"+r[l].value),r[l].selected!==v&&(r[l].selected=v),v&&d&&(r[l].defaultSelected=!0)}else{for(l=""+Nn(l),i=null,v=0;v<r.length;v++){if(r[v].value===l){r[v].selected=!0,d&&(r[v].defaultSelected=!0);return}i!==null||r[v].disabled||(i=r[v])}i!==null&&(i.selected=!0)}}function Vc(r,i,l){if(i!=null&&(i=""+Nn(i),i!==r.value&&(r.value=i),l==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=l!=null?""+Nn(l):""}function Fc(r,i,l,d){if(i==null){if(d!=null){if(l!=null)throw Error(s(92));if(ae(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),i=l}l=Nn(i),r.defaultValue=l,d=r.textContent,d===l&&d!==""&&d!==null&&(r.value=d),Si(r)}function Zi(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lu(r,i,l){var d=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,l):typeof l!="number"||l===0||Jo.has(i)?i==="float"?r.cssFloat=l:r[i]=(""+l).trim():r[i]=l+"px"}function Ou(r,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var v in i)d=i[v],i.hasOwnProperty(v)&&l[v]!==d&&Lu(r,v,d)}else for(var w in i)i.hasOwnProperty(w)&&Lu(r,w,i[w])}function Bc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(r){return Du.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ki(){}var Da=null;function el(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var No=null,Xt=null;function Ru(r){var i=Mt(r);if(i&&(r=i.stateNode)){var l=r[an]||null;e:switch(r=i.stateNode,i.type){case"input":if(So(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Lr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==r&&d.form===r.form){var v=d[an]||null;if(!v)throw Error(s(90));So(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(i=0;i<l.length;i++)d=l[i],d.form===r.form&&_o(d)}break e;case"textarea":Vc(r,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&$s(r,!!l.multiple,i,!1)}}}var zc=!1;function Iu(r,i,l){if(zc)return r(i,l);zc=!0;try{var d=r(i);return d}finally{if(zc=!1,(No!==null||Xt!==null)&&(a1(),No&&(i=No,r=Xt,Xt=No=null,Ru(i),r)))for(i=0;i<r.length;i++)Ru(r[i])}}function fi(r,i){var l=r.stateNode;if(l===null)return null;var d=l[an]||null;if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(Ss)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){qc=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{qc=!1}var pi=null,nl=null,pa=null;function Vu(){if(pa)return pa;var r,i=nl,l=i.length,d,v="value"in pi?pi.value:pi.textContent,w=v.length;for(r=0;r<l&&i[r]===v[r];r++);var O=l-r;for(d=1;d<=O&&i[l-d]===v[w-d];d++);return pa=v.slice(r,1<d?1-d:void 0)}function Ni(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Pl(){return!0}function zl(){return!1}function ds(r){function i(l,d,v,w,O){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var ne in r)r.hasOwnProperty(ne)&&(l=r[ne],this[ne]=l?l(w):w[ne]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Pl:zl,this.isPropagationStopped=zl,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),i}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=ds(ma),Ra=y({},ma,{view:0,detail:0}),ql=ds(Ra),rl,Ia,Va,sl=y({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jt,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Va&&(Va&&r.type==="mousemove"?(rl=r.screenX-Va.screenX,Ia=r.screenY-Va.screenY):Ia=rl=0,Va=r),rl)},movementY:function(r){return"movementY"in r?r.movementY:Ia}}),Uc=ds(sl),Fa=y({},sl,{dataTransfer:0}),Ba=ds(Fa),Fu=y({},Ra,{relatedTarget:0}),Pa=ds(Fu),Bu=y({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),S=ds(Bu),q=y({},ma,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),he=ds(q),ge=y({},ma,{data:0}),Ne=ds(ge),$e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ot={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pt(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Ot[r])?!!i[r]:!1}function Jt(){return Pt}var mn=y({},Ra,{key:function(r){if(r.key){var i=$e[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?rt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jt,charCode:function(r){return r.type==="keypress"?Ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),In=ds(mn),xr=y({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=ds(xr),ir=y({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jt}),rs=ds(ir),Yr=y({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ns=ds(Yr),za=y({},sl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Qi=ds(za),qa=y({},ma,{newState:0,oldState:0}),Hc=ds(qa),Ul=[9,13,27,32],ga=Ss&&"CompositionEvent"in window,Ji=null;Ss&&"documentMode"in document&&(Ji=document.documentMode);var il=Ss&&"TextEvent"in window&&!Ji,Ua=Ss&&(!ga||Ji&&8<Ji&&11>=Ji),fs=" ",Ao=!1;function Co(r,i){switch(r){case"keyup":return Ul.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ba=!1;function Ys(r,i){switch(r){case"compositionend":return Hl(i);case"keypress":return i.which!==32?null:(Ao=!0,fs);case"textInput":return r=i.data,r===fs&&Ao?null:r;default:return null}}function Ha(r,i){if(ba)return r==="compositionend"||!ga&&Co(r,i)?(r=Vu(),pa=nl=pi=null,ba=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ua&&i.locale!=="ko"?null:i.data;default:return null}}var Wl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Wl[r.type]:i==="textarea"}function mi(r,i,l,d){No?Xt?Xt.push(d):Xt=[d]:No=d,i=f1(i,"onChange"),0<i.length&&(l=new Ai("onChange","change",null,l,d),r.push({event:l,listeners:i}))}var ea=null,Wa=null;function Gc(r){Mv(r,0)}function ta(r){var i=pn(r);if(_o(i))return r}function To(r,i){if(r==="change")return i}var si=!1;if(Ss){var Xs;if(Ss){var va="oninput"in document;if(!va){var ya=document.createElement("div");ya.setAttribute("oninput","return;"),va=typeof ya.oninput=="function"}Xs=va}else Xs=!1;si=Xs&&(!document.documentMode||9<document.documentMode)}function Ga(){ea&&(ea.detachEvent("onpropertychange",Gl),Wa=ea=null)}function Gl(r){if(r.propertyName==="value"&&ta(Wa)){var i=[];mi(i,Wa,r,el(r)),Iu(Gc,i)}}function $l(r,i,l){r==="focusin"?(Ga(),ea=i,Wa=l,ea.attachEvent("onpropertychange",Gl)):r==="focusout"&&Ga()}function Ur(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ta(Wa)}function Pu(r,i){if(r==="click")return ta(i)}function xa(r,i){if(r==="input"||r==="change")return ta(i)}function wa(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var As=typeof Object.is=="function"?Object.is:wa;function $a(r,i){if(As(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!Re.call(i,v)||!As(r[v],i[v]))return!1}return!0}function Yl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xl(r,i){var l=Yl(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=i&&d>=i)return{node:l,offset:i-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yl(l)}}function Ya(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Ya(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Xa(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=hs(r.document);i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=hs(r.document)}return i}function _a(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var al=Ss&&"documentMode"in document&&11>=document.documentMode,gi=null,Za=null,Rs=null,Ci=!1;function Hn(r,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ci||gi==null||gi!==hs(d)||(d=gi,"selectionStart"in d&&_a(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Rs&&$a(Rs,d)||(Rs=d,d=f1(Za,"onSelect"),0<d.length&&(i=new Ai("onSelect","select",null,i,l),r.push({event:i,listeners:d}),i.target=gi)))}function Vn(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var ar={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionrun:Vn("Transition","TransitionRun"),transitionstart:Vn("Transition","TransitionStart"),transitioncancel:Vn("Transition","TransitionCancel"),transitionend:Vn("Transition","TransitionEnd")},Hr={},Sa={};Ss&&(Sa=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function na(r){if(Hr[r])return Hr[r];if(!ar[r])return r;var i=ar[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Sa)return Hr[r]=i[l];return r}var ol=na("animationend"),$c=na("animationiteration"),od=na("animationstart"),If=na("transitionrun"),Vf=na("transitionstart"),Ff=na("transitioncancel"),ld=na("transitionend"),cd=new Map,ll="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ll.push("scrollEnd");function Ti(r,i){cd.set(r,i),Tn(i,[r])}var Yc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},bi=[],cl=0,zu=0;function Xc(){for(var r=cl,i=zu=cl=0;i<r;){var l=bi[i];bi[i++]=null;var d=bi[i];bi[i++]=null;var v=bi[i];bi[i++]=null;var w=bi[i];if(bi[i++]=null,d!==null&&v!==null){var O=d.pending;O===null?v.next=v:(v.next=O.next,O.next=v),d.pending=v}w!==0&&Kc(l,v,w)}}function Zc(r,i,l,d){bi[cl++]=r,bi[cl++]=i,bi[cl++]=l,bi[cl++]=d,zu|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function qu(r,i,l,d){return Zc(r,i,l,d),Is(r)}function Ka(r,i){return Zc(r,null,null,i),Is(r)}function Kc(r,i,l){r.lanes|=l;var d=r.alternate;d!==null&&(d.lanes|=l);for(var v=!1,w=r.return;w!==null;)w.childLanes|=l,d=w.alternate,d!==null&&(d.childLanes|=l),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&i!==null&&(v=31-xt(l),r=w.hiddenUpdates,d=r[v],d===null?r[v]=[i]:d.push(i),i.lane=l|536870912),w):null}function Is(r){if(50<Md)throw Md=0,$0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Cs={};function Uu(r,i,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(r,i,l,d){return new Uu(r,i,l,d)}function Hu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ki(r,i){var l=r.alternate;return l===null?(l=Vs(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Qc(r,i){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Zl(r,i,l,d,v,w){var O=0;if(d=r,typeof r=="function")Hu(r)&&(O=1);else if(typeof r=="string")O=P_(r,l,G.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case F:return r=Vs(31,l,i,v),r.elementType=F,r.lanes=w,r;case N:return ko(l.children,v,w,i);case k:O=8,v|=24;break;case T:return r=Vs(12,l,i,v|2),r.elementType=T,r.lanes=w,r;case B:return r=Vs(13,l,i,v),r.elementType=B,r.lanes=w,r;case W:return r=Vs(19,l,i,v),r.elementType=W,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:O=10;break e;case R:O=9;break e;case V:O=11;break e;case H:O=14;break e;case L:O=16,d=null;break e}O=29,l=Error(s(130,r===null?"null":typeof r,"")),d=null}return i=Vs(O,l,i,v),i.elementType=r,i.type=d,i.lanes=w,i}function ko(r,i,l,d){return r=Vs(7,r,d,i),r.lanes=l,r}function Jc(r,i,l){return r=Vs(6,r,null,i),r.lanes=l,r}function Wu(r){var i=Vs(18,null,null,0);return i.stateNode=r,i}function Kl(r,i,l){return i=Vs(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Gu=new WeakMap;function ji(r,i){if(typeof r=="object"&&r!==null){var l=Gu.get(r);return l!==void 0?l:(i={value:r,source:i,stack:et(i)},Gu.set(r,i),i)}return{value:r,source:i,stack:et(i)}}var Ql=[],ul=0,$u=null,eu=0,Ei=[],Mi=0,jo=null,Li=1,Oi="";function vi(r,i){Ql[ul++]=eu,Ql[ul++]=$u,$u=r,eu=i}function Bf(r,i,l){Ei[Mi++]=Li,Ei[Mi++]=Oi,Ei[Mi++]=jo,jo=r;var d=Li;r=Oi;var v=32-xt(d)-1;d&=~(1<<v),l+=1;var w=32-xt(i)+v;if(30<w){var O=v-v%5;w=(d&(1<<O)-1).toString(32),d>>=O,v-=O,Li=1<<32-xt(i)+v|l<<v|d,Oi=w+r}else Li=1<<w|l<<v|d,Oi=r}function ud(r){r.return!==null&&(vi(r,1),Bf(r,1,0))}function Yu(r){for(;r===$u;)$u=Ql[--ul],Ql[ul]=null,eu=Ql[--ul],Ql[ul]=null;for(;r===jo;)jo=Ei[--Mi],Ei[Mi]=null,Oi=Ei[--Mi],Ei[Mi]=null,Li=Ei[--Mi],Ei[Mi]=null}function Pf(r,i){Ei[Mi++]=Li,Ei[Mi++]=Oi,Ei[Mi++]=jo,Li=i.id,Oi=i.overflow,jo=r}var Ts=null,fr=null,jn=!1,Zs=null,Or=!1,ra=Error(s(519));function Eo(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(ji(i,r)),ra}function hd(r){var i=r.stateNode,l=r.type,d=r.memoizedProps;switch(i[Sn]=r,i[an]=d,l){case"dialog":Mn("cancel",i),Mn("close",i);break;case"iframe":case"object":case"embed":Mn("load",i);break;case"video":case"audio":for(l=0;l<Od.length;l++)Mn(Od[l],i);break;case"source":Mn("error",i);break;case"img":case"image":case"link":Mn("error",i),Mn("load",i);break;case"details":Mn("toggle",i);break;case"input":Mn("invalid",i),Bl(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Mn("invalid",i);break;case"textarea":Mn("invalid",i),Fc(i,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||d.suppressHydrationWarning===!0||Rv(i.textContent,l)?(d.popover!=null&&(Mn("beforetoggle",i),Mn("toggle",i)),d.onScroll!=null&&Mn("scroll",i),d.onScrollEnd!=null&&Mn("scrollend",i),d.onClick!=null&&(i.onclick=Ki),i=!0):i=!1,i||Eo(r,!0)}function Qa(r){for(Ts=r.return;Ts;)switch(Ts.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Ts=Ts.return}}function ks(r){if(r!==Ts)return!1;if(!jn)return Qa(r),jn=!0,!1;var i=r.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||lm(r.type,r.memoizedProps)),l=!l),l&&fr&&Eo(r),Qa(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));fr=Hv(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));fr=Hv(r)}else i===27?(i=fr,fc(r.type)?(r=fm,fm=null,fr=r):fr=i):fr=Ts?Ta(r.stateNode.nextSibling):null;return!0}function hl(){fr=Ts=null,jn=!1}function dd(){var r=Zs;return r!==null&&(Bi===null?Bi=r:Bi.push.apply(Bi,r),Zs=null),r}function Jl(r){Zs===null?Zs=[r]:Zs.push(r)}var Xu=z(null),Mo=null,Na=null;function Lo(r,i,l){$(Xu,i._currentValue),i._currentValue=l}function Di(r){r._currentValue=Xu.current,E(Xu)}function ec(r,i,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===l)break;r=r.return}}function dl(r,i,l,d){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var ne=w;w=v;for(var me=0;me<i.length;me++)if(ne.context===i[me]){w.lanes|=l,ne=w.alternate,ne!==null&&(ne.lanes|=l),ec(w.return,l,r),d||(O=null);break e}w=ne.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(s(341));O.lanes|=l,w=O.alternate,w!==null&&(w.lanes|=l),ec(O,l,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Oo(r,i,l,d){r=null;for(var v=i,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var ne=v.type;As(v.pendingProps.value,O.value)||(r!==null?r.push(ne):r=[ne])}}else if(v===pe.current){if(O=v.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Fd):r=[Fd])}v=v.return}r!==null&&dl(i,r,l,d),i.flags|=262144}function Zu(r){for(r=r.firstContext;r!==null;){if(!As(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Do(r){Mo=r,Na=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function js(r){return zf(Mo,r)}function Ku(r,i){return Mo===null&&Do(r),zf(r,i)}function zf(r,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Na===null){if(r===null)throw Error(s(308));Na=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Na=Na.next=i;return l}var d0=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(l,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(l){return l()})}},f0=n.unstable_scheduleCallback,p0=n.unstable_NormalPriority,Wr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tc(){return{controller:new d0,data:new Map,refCount:0}}function tu(r){r.refCount--,r.refCount===0&&f0(p0,function(){r.controller.abort()})}var nu=null,Qu=0,m=0,x=null;function C(r,i){if(nu===null){var l=nu=[];Qu=0,m=J0(),x={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Qu++,i.then(M,M),i}function M(){if(--Qu===0&&nu!==null){x!==null&&(x.status="fulfilled");var r=nu;nu=null,m=0,x=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function U(r,i){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var v=0;v<l.length;v++)(0,l[v])(i)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var K=Z.S;Z.S=function(r,i){iv=tt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&C(r,i),K!==null&&K(r,i)};var J=z(null);function se(){var r=J.current;return r!==null?r:mr.pooledCache}function oe(r,i){i===null?$(J,J.current):$(J,i.pool)}function ue(){var r=se();return r===null?null:{parent:Wr._currentValue,pool:r}}var be=Error(s(460)),Le=Error(s(474)),ce=Error(s(542)),xe={then:function(){}};function Ce(r){return r=r.status,r==="fulfilled"||r==="rejected"}function He(r,i,l){switch(l=r[l],l===void 0?r.push(i):l!==i&&(i.then(Ki,Ki),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lt(r),r;default:if(typeof i.status=="string")i.then(Ki,Ki);else{if(r=mr,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var v=i;v.status="fulfilled",v.value=d}},function(d){if(i.status==="pending"){var v=i;v.status="rejected",v.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lt(r),r}throw Ue=i,be}}function ke(r){try{var i=r._init;return i(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ue=l,be):l}}var Ue=null;function Ye(){if(Ue===null)throw Error(s(459));var r=Ue;return Ue=null,r}function lt(r){if(r===be||r===ce)throw Error(s(483))}var nt=null,Rt=0;function Tt(r){var i=Rt;return Rt+=1,nt===null&&(nt=[]),He(nt,r,i)}function ln(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Lt(r,i){throw i.$$typeof===_?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function kn(r){function i(Ae,ve){if(r){var Oe=Ae.deletions;Oe===null?(Ae.deletions=[ve],Ae.flags|=16):Oe.push(ve)}}function l(Ae,ve){if(!r)return null;for(;ve!==null;)i(Ae,ve),ve=ve.sibling;return null}function d(Ae){for(var ve=new Map;Ae!==null;)Ae.key!==null?ve.set(Ae.key,Ae):ve.set(Ae.index,Ae),Ae=Ae.sibling;return ve}function v(Ae,ve){return Ae=ki(Ae,ve),Ae.index=0,Ae.sibling=null,Ae}function w(Ae,ve,Oe){return Ae.index=Oe,r?(Oe=Ae.alternate,Oe!==null?(Oe=Oe.index,Oe<ve?(Ae.flags|=67108866,ve):Oe):(Ae.flags|=67108866,ve)):(Ae.flags|=1048576,ve)}function O(Ae){return r&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function ne(Ae,ve,Oe,Ke){return ve===null||ve.tag!==6?(ve=Jc(Oe,Ae.mode,Ke),ve.return=Ae,ve):(ve=v(ve,Oe),ve.return=Ae,ve)}function me(Ae,ve,Oe,Ke){var $t=Oe.type;return $t===N?Ge(Ae,ve,Oe.props.children,Ke,Oe.key):ve!==null&&(ve.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===L&&ke($t)===ve.type)?(ve=v(ve,Oe.props),ln(ve,Oe),ve.return=Ae,ve):(ve=Zl(Oe.type,Oe.key,Oe.props,null,Ae.mode,Ke),ln(ve,Oe),ve.return=Ae,ve)}function De(Ae,ve,Oe,Ke){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Oe.containerInfo||ve.stateNode.implementation!==Oe.implementation?(ve=Kl(Oe,Ae.mode,Ke),ve.return=Ae,ve):(ve=v(ve,Oe.children||[]),ve.return=Ae,ve)}function Ge(Ae,ve,Oe,Ke,$t){return ve===null||ve.tag!==7?(ve=ko(Oe,Ae.mode,Ke,$t),ve.return=Ae,ve):(ve=v(ve,Oe),ve.return=Ae,ve)}function Je(Ae,ve,Oe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Jc(""+ve,Ae.mode,Oe),ve.return=Ae,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return Oe=Zl(ve.type,ve.key,ve.props,null,Ae.mode,Oe),ln(Oe,ve),Oe.return=Ae,Oe;case A:return ve=Kl(ve,Ae.mode,Oe),ve.return=Ae,ve;case L:return ve=ke(ve),Je(Ae,ve,Oe)}if(ae(ve)||I(ve))return ve=ko(ve,Ae.mode,Oe,null),ve.return=Ae,ve;if(typeof ve.then=="function")return Je(Ae,Tt(ve),Oe);if(ve.$$typeof===D)return Je(Ae,Ku(Ae,ve),Oe);Lt(Ae,ve)}return null}function Fe(Ae,ve,Oe,Ke){var $t=ve!==null?ve.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return $t!==null?null:ne(Ae,ve,""+Oe,Ke);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case b:return Oe.key===$t?me(Ae,ve,Oe,Ke):null;case A:return Oe.key===$t?De(Ae,ve,Oe,Ke):null;case L:return Oe=ke(Oe),Fe(Ae,ve,Oe,Ke)}if(ae(Oe)||I(Oe))return $t!==null?null:Ge(Ae,ve,Oe,Ke,null);if(typeof Oe.then=="function")return Fe(Ae,ve,Tt(Oe),Ke);if(Oe.$$typeof===D)return Fe(Ae,ve,Ku(Ae,Oe),Ke);Lt(Ae,Oe)}return null}function ze(Ae,ve,Oe,Ke,$t){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ae=Ae.get(Oe)||null,ne(ve,Ae,""+Ke,$t);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:return Ae=Ae.get(Ke.key===null?Oe:Ke.key)||null,me(ve,Ae,Ke,$t);case A:return Ae=Ae.get(Ke.key===null?Oe:Ke.key)||null,De(ve,Ae,Ke,$t);case L:return Ke=ke(Ke),ze(Ae,ve,Oe,Ke,$t)}if(ae(Ke)||I(Ke))return Ae=Ae.get(Oe)||null,Ge(ve,Ae,Ke,$t,null);if(typeof Ke.then=="function")return ze(Ae,ve,Oe,Tt(Ke),$t);if(Ke.$$typeof===D)return ze(Ae,ve,Oe,Ku(ve,Ke),$t);Lt(ve,Ke)}return null}function Dt(Ae,ve,Oe,Ke){for(var $t=null,Yn=null,zt=ve,_n=ve=0,Dn=null;zt!==null&&_n<Oe.length;_n++){zt.index>_n?(Dn=zt,zt=null):Dn=zt.sibling;var Xn=Fe(Ae,zt,Oe[_n],Ke);if(Xn===null){zt===null&&(zt=Dn);break}r&&zt&&Xn.alternate===null&&i(Ae,zt),ve=w(Xn,ve,_n),Yn===null?$t=Xn:Yn.sibling=Xn,Yn=Xn,zt=Dn}if(_n===Oe.length)return l(Ae,zt),jn&&vi(Ae,_n),$t;if(zt===null){for(;_n<Oe.length;_n++)zt=Je(Ae,Oe[_n],Ke),zt!==null&&(ve=w(zt,ve,_n),Yn===null?$t=zt:Yn.sibling=zt,Yn=zt);return jn&&vi(Ae,_n),$t}for(zt=d(zt);_n<Oe.length;_n++)Dn=ze(zt,Ae,_n,Oe[_n],Ke),Dn!==null&&(r&&Dn.alternate!==null&&zt.delete(Dn.key===null?_n:Dn.key),ve=w(Dn,ve,_n),Yn===null?$t=Dn:Yn.sibling=Dn,Yn=Dn);return r&&zt.forEach(function(vc){return i(Ae,vc)}),jn&&vi(Ae,_n),$t}function Kt(Ae,ve,Oe,Ke){if(Oe==null)throw Error(s(151));for(var $t=null,Yn=null,zt=ve,_n=ve=0,Dn=null,Xn=Oe.next();zt!==null&&!Xn.done;_n++,Xn=Oe.next()){zt.index>_n?(Dn=zt,zt=null):Dn=zt.sibling;var vc=Fe(Ae,zt,Xn.value,Ke);if(vc===null){zt===null&&(zt=Dn);break}r&&zt&&vc.alternate===null&&i(Ae,zt),ve=w(vc,ve,_n),Yn===null?$t=vc:Yn.sibling=vc,Yn=vc,zt=Dn}if(Xn.done)return l(Ae,zt),jn&&vi(Ae,_n),$t;if(zt===null){for(;!Xn.done;_n++,Xn=Oe.next())Xn=Je(Ae,Xn.value,Ke),Xn!==null&&(ve=w(Xn,ve,_n),Yn===null?$t=Xn:Yn.sibling=Xn,Yn=Xn);return jn&&vi(Ae,_n),$t}for(zt=d(zt);!Xn.done;_n++,Xn=Oe.next())Xn=ze(zt,Ae,_n,Xn.value,Ke),Xn!==null&&(r&&Xn.alternate!==null&&zt.delete(Xn.key===null?_n:Xn.key),ve=w(Xn,ve,_n),Yn===null?$t=Xn:Yn.sibling=Xn,Yn=Xn);return r&&zt.forEach(function(K_){return i(Ae,K_)}),jn&&vi(Ae,_n),$t}function ur(Ae,ve,Oe,Ke){if(typeof Oe=="object"&&Oe!==null&&Oe.type===N&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case b:e:{for(var $t=Oe.key;ve!==null;){if(ve.key===$t){if($t=Oe.type,$t===N){if(ve.tag===7){l(Ae,ve.sibling),Ke=v(ve,Oe.props.children),Ke.return=Ae,Ae=Ke;break e}}else if(ve.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===L&&ke($t)===ve.type){l(Ae,ve.sibling),Ke=v(ve,Oe.props),ln(Ke,Oe),Ke.return=Ae,Ae=Ke;break e}l(Ae,ve);break}else i(Ae,ve);ve=ve.sibling}Oe.type===N?(Ke=ko(Oe.props.children,Ae.mode,Ke,Oe.key),Ke.return=Ae,Ae=Ke):(Ke=Zl(Oe.type,Oe.key,Oe.props,null,Ae.mode,Ke),ln(Ke,Oe),Ke.return=Ae,Ae=Ke)}return O(Ae);case A:e:{for($t=Oe.key;ve!==null;){if(ve.key===$t)if(ve.tag===4&&ve.stateNode.containerInfo===Oe.containerInfo&&ve.stateNode.implementation===Oe.implementation){l(Ae,ve.sibling),Ke=v(ve,Oe.children||[]),Ke.return=Ae,Ae=Ke;break e}else{l(Ae,ve);break}else i(Ae,ve);ve=ve.sibling}Ke=Kl(Oe,Ae.mode,Ke),Ke.return=Ae,Ae=Ke}return O(Ae);case L:return Oe=ke(Oe),ur(Ae,ve,Oe,Ke)}if(ae(Oe))return Dt(Ae,ve,Oe,Ke);if(I(Oe)){if($t=I(Oe),typeof $t!="function")throw Error(s(150));return Oe=$t.call(Oe),Kt(Ae,ve,Oe,Ke)}if(typeof Oe.then=="function")return ur(Ae,ve,Tt(Oe),Ke);if(Oe.$$typeof===D)return ur(Ae,ve,Ku(Ae,Oe),Ke);Lt(Ae,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,ve!==null&&ve.tag===6?(l(Ae,ve.sibling),Ke=v(ve,Oe),Ke.return=Ae,Ae=Ke):(l(Ae,ve),Ke=Jc(Oe,Ae.mode,Ke),Ke.return=Ae,Ae=Ke),O(Ae)):l(Ae,ve)}return function(Ae,ve,Oe,Ke){try{Rt=0;var $t=ur(Ae,ve,Oe,Ke);return nt=null,$t}catch(zt){if(zt===be||zt===ce)throw zt;var Yn=Vs(29,zt,null,Ae.mode);return Yn.lanes=Ke,Yn.return=Ae,Yn}finally{}}}var pr=kn(!0),gn=kn(!1),kt=!1;function _t(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wr(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Zt(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function yn(r,i,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Qn&2)!==0){var v=d.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),d.pending=i,i=Is(r),Kc(r,null,l),i}return Zc(r,d,i,l),Is(r)}function Zn(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,l|=d,i.lanes=l,Bt(r,l)}}function ss(r,i){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var O={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,l=l.next}while(l!==null);w===null?v=w=i:w=w.next=i}else v=w=i;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}var Es=!1;function or(){if(Es){var r=x;if(r!==null)throw r}}function Xr(r,i,l,d){Es=!1;var v=r.updateQueue;kt=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,ne=v.shared.pending;if(ne!==null){v.shared.pending=null;var me=ne,De=me.next;me.next=null,O===null?w=De:O.next=De,O=me;var Ge=r.alternate;Ge!==null&&(Ge=Ge.updateQueue,ne=Ge.lastBaseUpdate,ne!==O&&(ne===null?Ge.firstBaseUpdate=De:ne.next=De,Ge.lastBaseUpdate=me))}if(w!==null){var Je=v.baseState;O=0,Ge=De=me=null,ne=w;do{var Fe=ne.lane&-536870913,ze=Fe!==ne.lane;if(ze?(On&Fe)===Fe:(d&Fe)===Fe){Fe!==0&&Fe===m&&(Es=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var Dt=r,Kt=ne;Fe=i;var ur=l;switch(Kt.tag){case 1:if(Dt=Kt.payload,typeof Dt=="function"){Je=Dt.call(ur,Je,Fe);break e}Je=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Kt.payload,Fe=typeof Dt=="function"?Dt.call(ur,Je,Fe):Dt,Fe==null)break e;Je=y({},Je,Fe);break e;case 2:kt=!0}}Fe=ne.callback,Fe!==null&&(r.flags|=64,ze&&(r.flags|=8192),ze=v.callbacks,ze===null?v.callbacks=[Fe]:ze.push(Fe))}else ze={lane:Fe,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ge===null?(De=Ge=ze,me=Je):Ge=Ge.next=ze,O|=Fe;if(ne=ne.next,ne===null){if(ne=v.shared.pending,ne===null)break;ze=ne,ne=ze.next,ze.next=null,v.lastBaseUpdate=ze,v.shared.pending=null}}while(!0);Ge===null&&(me=Je),v.baseState=me,v.firstBaseUpdate=De,v.lastBaseUpdate=Ge,w===null&&(v.shared.lanes=0),lc|=O,r.lanes=O,r.memoizedState=Je}}function Fs(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Zr(r,i){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Fs(l[r],i)}var An=z(null),zn=z(0);function _r(r,i){r=_l,$(zn,r),$(An,i),_l=r|i.baseLanes}function Wn(){$(zn,_l),$(An,An.current)}function is(){_l=zn.current,E(An),E(zn)}var Sr=z(null),qn=null;function Gr(r){var i=r.alternate;$(Fn,Fn.current&1),$(Sr,r),qn===null&&(i===null||An.current!==null||i.memoizedState!==null)&&(qn=r)}function Kn(r){$(Fn,Fn.current),$(Sr,r),qn===null&&(qn=r)}function Kr(r){r.tag===22?($(Fn,Fn.current),$(Sr,r),qn===null&&(qn=r)):Qr()}function Qr(){$(Fn,Fn.current),$(Sr,Sr.current)}function er(r){E(Sr),qn===r&&(qn=null),E(Fn)}var Fn=z(0);function Bs(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||hm(l)||dm(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Dr=0,Wt=null,Gt=null,Un=null,ii=!1,Ri=!1,Ks=!1,Jr=0,Ro=0,Io=null,Ju=0;function lr(){throw Error(s(321))}function fd(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!As(r[l],i[l]))return!1;return!0}function pd(r,i,l,d,v,w){return Dr=w,Wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=r===null||r.memoizedState===null?gb:_0,Ks=!1,w=l(d,v),Ks=!1,Ri&&(w=Ja(i,l,d,v)),eh(r),w}function eh(r){Z.H=_d;var i=Gt!==null&&Gt.next!==null;if(Dr=0,Un=Gt=Wt=null,ii=!1,Ro=0,Io=null,i)throw Error(s(300));r===null||ms||(r=r.dependencies,r!==null&&Zu(r)&&(ms=!0))}function Ja(r,i,l,d){Wt=r;var v=0;do{if(Ri&&(Io=null),Ro=0,Ri=!1,25<=v)throw Error(s(301));if(v+=1,Un=Gt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Z.H=bb,w=i(l,d)}while(Ri);return w}function m0(){var r=Z.H,i=r.useState()[0];return i=typeof i.then=="function"?Vo(i):i,r=r.useState()[0],(Gt!==null?Gt.memoizedState:null)!==r&&(Wt.flags|=1024),i}function md(){var r=Jr!==0;return Jr=0,r}function gd(r,i,l){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~l}function th(r){if(ii){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ii=!1}Dr=0,Un=Gt=Wt=null,Ri=!1,Ro=Jr=0,Io=null}function ps(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Wt.memoizedState=Un=r:Un=Un.next=r,Un}function Rr(){if(Gt===null){var r=Wt.alternate;r=r!==null?r.memoizedState:null}else r=Gt.next;var i=Un===null?Wt.memoizedState:Un.next;if(i!==null)Un=i,Gt=r;else{if(r===null)throw Wt.alternate===null?Error(s(467)):Error(s(310));Gt=r,r={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Un===null?Wt.memoizedState=Un=r:Un=Un.next=r}return Un}function ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(r){var i=Ro;return Ro+=1,Io===null&&(Io=[]),r=He(Io,r,i),i=Wt,(Un===null?i.memoizedState:Un.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?gb:_0),r}function nc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Vo(r);if(r.$$typeof===D)return js(r)}throw Error(s(438,String(r)))}function fl(r){var i=null,l=Wt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=Wt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(v){return v.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ru(),Wt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(r),d=0;d<r;d++)l[d]=te;return i.index++,l}function Aa(r,i){return typeof i=="function"?i(r):i}function nh(r){var i=Rr();return rc(i,Gt,r)}function rc(r,i,l){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var v=r.baseQueue,w=d.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}i.baseQueue=v=w,d.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{i=v.next;var ne=O=null,me=null,De=i,Ge=!1;do{var Je=De.lane&-536870913;if(Je!==De.lane?(On&Je)===Je:(Dr&Je)===Je){var Fe=De.revertLane;if(Fe===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Je===m&&(Ge=!0);else if((Dr&Fe)===Fe){De=De.next,Fe===m&&(Ge=!0);continue}else Je={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},me===null?(ne=me=Je,O=w):me=me.next=Je,Wt.lanes|=Fe,lc|=Fe;Je=De.action,Ks&&l(w,Je),w=De.hasEagerState?De.eagerState:l(w,Je)}else Fe={lane:Je,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},me===null?(ne=me=Fe,O=w):me=me.next=Fe,Wt.lanes|=Je,lc|=Je;De=De.next}while(De!==null&&De!==i);if(me===null?O=w:me.next=ne,!As(w,r.memoizedState)&&(ms=!0,Ge&&(l=x,l!==null)))throw l;r.memoizedState=w,r.baseState=O,r.baseQueue=me,d.lastRenderedState=w}return v===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function rh(r){var i=Rr(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var d=l.dispatch,v=l.pending,w=i.memoizedState;if(v!==null){l.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);As(w,i.memoizedState)||(ms=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,d]}function sh(r,i,l){var d=Wt,v=Rr(),w=jn;if(w){if(l===void 0)throw Error(s(407));l=l()}else l=i();var O=!As((Gt||v).memoizedState,l);if(O&&(v.memoizedState=l,ms=!0),v=v.queue,g0(vd.bind(null,d,v,r),[r]),v.getSnapshot!==i||O||Un!==null&&Un.memoizedState.tag&1){if(d.flags|=2048,ml(9,{destroy:void 0},bd.bind(null,d,v,l,i),null),mr===null)throw Error(s(349));w||(Dr&127)!==0||eo(d,i,l)}return l}function eo(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Wt.updateQueue,i===null?(i=ru(),Wt.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function bd(r,i,l,d){i.value=l,i.getSnapshot=d,qf(i)&&yd(r)}function vd(r,i,l){return l(function(){qf(i)&&yd(r)})}function qf(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!As(r,l)}catch{return!0}}function yd(r){var i=Ka(r,2);i!==null&&Pi(i,r,2)}function Fo(r){var i=ps();if(typeof r=="function"){var l=r;if(r=l(),Ks){at(!0);try{l()}finally{at(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:r},i}function Uf(r,i,l,d){return r.baseState=l,rc(r,Gt,typeof d=="function"?d:Aa)}function Hf(r,i,l,d,v){if(Yf(r))throw Error(s(485));if(r=i.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};Z.T!==null?l(!0):w.isTransition=!1,d(w),l=i.pending,l===null?(w.next=i.pending=w,Wf(i,w)):(w.next=l.next,i.pending=l.next=w)}}function Wf(r,i){var l=i.action,d=i.payload,v=r.state;if(i.isTransition){var w=Z.T,O={};Z.T=O;try{var ne=l(v,d),me=Z.S;me!==null&&me(O,ne),xd(r,i,ne)}catch(De){pl(r,i,De)}finally{w!==null&&O.types!==null&&(w.types=O.types),Z.T=w}}else try{w=l(v,d),xd(r,i,w)}catch(De){pl(r,i,De)}}function xd(r,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Gf(r,i,d)},function(d){return pl(r,i,d)}):Gf(r,i,l)}function Gf(r,i,l){i.status="fulfilled",i.value=l,ih(i),r.state=l,i=r.pending,i!==null&&(l=i.next,l===i?r.pending=null:(l=l.next,i.next=l,Wf(r,l)))}function pl(r,i,l){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,ih(i),i=i.next;while(i!==d)}r.action=null}function ih(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function su(r,i){return i}function Ca(r,i){if(jn){var l=mr.formState;if(l!==null){e:{var d=Wt;if(jn){if(fr){t:{for(var v=fr,w=Or;v.nodeType!==8;){if(!w){v=null;break t}if(v=Ta(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){fr=Ta(v.nextSibling),d=v.data==="F!";break e}}Eo(d)}d=!1}d&&(i=l[0])}}return l=ps(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:i},l.queue=d,l=fb.bind(null,Wt,d),d.dispatch=l,d=Fo(!1),w=w0.bind(null,Wt,!1,d.queue),d=ps(),v={state:i,dispatch:null,action:r,pending:null},d.queue=v,l=Hf.bind(null,Wt,v,w,l),v.dispatch=l,d.memoizedState=r,[i,l,!1]}function to(r){var i=Rr();return no(i,Gt,r)}function no(r,i,l){if(i=rc(r,i,su)[0],r=nh(Aa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Vo(i)}catch(O){throw O===be?ce:O}else d=i;i=Rr();var v=i.queue,w=v.dispatch;return l!==i.memoizedState&&(Wt.flags|=2048,ml(9,{destroy:void 0},ah.bind(null,v,l),null)),[d,w,r]}function ah(r,i){r.action=i}function oh(r){var i=Rr(),l=Gt;if(l!==null)return no(i,l,r);Rr(),i=i.memoizedState,l=Rr();var d=l.queue.dispatch;return l.memoizedState=r,[i,d,!1]}function ml(r,i,l,d){return r={tag:r,create:l,deps:d,inst:i,next:null},i=Wt.updateQueue,i===null&&(i=ru(),Wt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,i.lastEffect=r),r}function $f(){return Rr().memoizedState}function sc(r,i,l,d){var v=ps();Wt.flags|=r,v.memoizedState=ml(1|i,{destroy:void 0},l,d===void 0?null:d)}function ic(r,i,l,d){var v=Rr();d=d===void 0?null:d;var w=v.memoizedState.inst;Gt!==null&&d!==null&&fd(d,Gt.memoizedState.deps)?v.memoizedState=ml(i,w,l,d):(Wt.flags|=r,v.memoizedState=ml(1|i,w,l,d))}function J2(r,i){sc(8390656,8,r,i)}function g0(r,i){ic(2048,8,r,i)}function W4(r){Wt.flags|=4;var i=Wt.updateQueue;if(i===null)i=ru(),Wt.updateQueue=i,i.events=[r];else{var l=i.events;l===null?i.events=[r]:l.push(r)}}function eb(r){var i=Rr().memoizedState;return W4({ref:i,nextImpl:r}),function(){if((Qn&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function tb(r,i){return ic(4,2,r,i)}function nb(r,i){return ic(4,4,r,i)}function rb(r,i){if(typeof i=="function"){r=r();var l=i(r);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function sb(r,i,l){l=l!=null?l.concat([r]):null,ic(4,4,rb.bind(null,i,r),l)}function b0(){}function ib(r,i){var l=Rr();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&fd(i,d[1])?d[0]:(l.memoizedState=[r,i],r)}function ab(r,i){var l=Rr();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&fd(i,d[1]))return d[0];if(d=r(),Ks){at(!0);try{r()}finally{at(!1)}}return l.memoizedState=[d,i],d}function v0(r,i,l){return l===void 0||(Dr&1073741824)!==0&&(On&261930)===0?r.memoizedState=i:(r.memoizedState=l,r=ov(),Wt.lanes|=r,lc|=r,l)}function ob(r,i,l,d){return As(l,i)?l:An.current!==null?(r=v0(r,l,d),As(r,i)||(ms=!0),r):(Dr&42)===0||(Dr&1073741824)!==0&&(On&261930)===0?(ms=!0,r.memoizedState=l):(r=ov(),Wt.lanes|=r,lc|=r,i)}function lb(r,i,l,d,v){var w=re.p;re.p=w!==0&&8>w?w:8;var O=Z.T,ne={};Z.T=ne,w0(r,!1,i,l);try{var me=v(),De=Z.S;if(De!==null&&De(ne,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ge=U(me,d);wd(r,i,Ge,aa(r))}else wd(r,i,d,aa(r))}catch(Je){wd(r,i,{then:function(){},status:"rejected",reason:Je},aa())}finally{re.p=w,O!==null&&ne.types!==null&&(O.types=ne.types),Z.T=O}}function G4(){}function y0(r,i,l,d){if(r.tag!==5)throw Error(s(476));var v=cb(r).queue;lb(r,v,i,le,l===null?G4:function(){return ub(r),l(d)})}function cb(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:le},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:l},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function ub(r){var i=cb(r);i.next===null&&(i=r.alternate.memoizedState),wd(r,i.next.queue,{},aa())}function x0(){return js(Fd)}function hb(){return Rr().memoizedState}function db(){return Rr().memoizedState}function $4(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var l=aa();r=Zt(l);var d=yn(i,r,l);d!==null&&(Pi(d,i,l),Zn(d,i,l)),i={cache:tc()},r.payload=i;return}i=i.return}}function Y4(r,i,l){var d=aa();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yf(r)?pb(i,l):(l=qu(r,i,l,d),l!==null&&(Pi(l,r,d),mb(l,i,d)))}function fb(r,i,l){var d=aa();wd(r,i,l,d)}function wd(r,i,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yf(r))pb(i,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var O=i.lastRenderedState,ne=w(O,l);if(v.hasEagerState=!0,v.eagerState=ne,As(ne,O))return Zc(r,i,v,0),mr===null&&Xc(),!1}catch{}finally{}if(l=qu(r,i,v,d),l!==null)return Pi(l,r,d),mb(l,i,d),!0}return!1}function w0(r,i,l,d){if(d={lane:2,revertLane:J0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Yf(r)){if(i)throw Error(s(479))}else i=qu(r,l,d,2),i!==null&&Pi(i,r,2)}function Yf(r){var i=r.alternate;return r===Wt||i!==null&&i===Wt}function pb(r,i){Ri=ii=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function mb(r,i,l){if((l&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,l|=d,i.lanes=l,Bt(r,l)}}var _d={readContext:js,use:nc,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr,useHostTransitionStatus:lr,useFormState:lr,useActionState:lr,useOptimistic:lr,useMemoCache:lr,useCacheRefresh:lr};_d.useEffectEvent=lr;var gb={readContext:js,use:nc,useCallback:function(r,i){return ps().memoizedState=[r,i===void 0?null:i],r},useContext:js,useEffect:J2,useImperativeHandle:function(r,i,l){l=l!=null?l.concat([r]):null,sc(4194308,4,rb.bind(null,i,r),l)},useLayoutEffect:function(r,i){return sc(4194308,4,r,i)},useInsertionEffect:function(r,i){sc(4,2,r,i)},useMemo:function(r,i){var l=ps();i=i===void 0?null:i;var d=r();if(Ks){at(!0);try{r()}finally{at(!1)}}return l.memoizedState=[d,i],d},useReducer:function(r,i,l){var d=ps();if(l!==void 0){var v=l(i);if(Ks){at(!0);try{l(i)}finally{at(!1)}}}else v=i;return d.memoizedState=d.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},d.queue=r,r=r.dispatch=Y4.bind(null,Wt,r),[d.memoizedState,r]},useRef:function(r){var i=ps();return r={current:r},i.memoizedState=r},useState:function(r){r=Fo(r);var i=r.queue,l=fb.bind(null,Wt,i);return i.dispatch=l,[r.memoizedState,l]},useDebugValue:b0,useDeferredValue:function(r,i){var l=ps();return v0(l,r,i)},useTransition:function(){var r=Fo(!1);return r=lb.bind(null,Wt,r.queue,!0,!1),ps().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,l){var d=Wt,v=ps();if(jn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),mr===null)throw Error(s(349));(On&127)!==0||eo(d,i,l)}v.memoizedState=l;var w={value:l,getSnapshot:i};return v.queue=w,J2(vd.bind(null,d,w,r),[r]),d.flags|=2048,ml(9,{destroy:void 0},bd.bind(null,d,w,l,i),null),l},useId:function(){var r=ps(),i=mr.identifierPrefix;if(jn){var l=Oi,d=Li;l=(d&~(1<<32-xt(d)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Jr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Ju++,i="_"+i+"r_"+l.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:x0,useFormState:Ca,useActionState:Ca,useOptimistic:function(r){var i=ps();i.memoizedState=i.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=w0.bind(null,Wt,!0,l),l.dispatch=i,[r,i]},useMemoCache:fl,useCacheRefresh:function(){return ps().memoizedState=$4.bind(null,Wt)},useEffectEvent:function(r){var i=ps(),l={impl:r};return i.memoizedState=l,function(){if((Qn&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},_0={readContext:js,use:nc,useCallback:ib,useContext:js,useEffect:g0,useImperativeHandle:sb,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:ab,useReducer:nh,useRef:$f,useState:function(){return nh(Aa)},useDebugValue:b0,useDeferredValue:function(r,i){var l=Rr();return ob(l,Gt.memoizedState,r,i)},useTransition:function(){var r=nh(Aa)[0],i=Rr().memoizedState;return[typeof r=="boolean"?r:Vo(r),i]},useSyncExternalStore:sh,useId:hb,useHostTransitionStatus:x0,useFormState:to,useActionState:to,useOptimistic:function(r,i){var l=Rr();return Uf(l,Gt,r,i)},useMemoCache:fl,useCacheRefresh:db};_0.useEffectEvent=eb;var bb={readContext:js,use:nc,useCallback:ib,useContext:js,useEffect:g0,useImperativeHandle:sb,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:ab,useReducer:rh,useRef:$f,useState:function(){return rh(Aa)},useDebugValue:b0,useDeferredValue:function(r,i){var l=Rr();return Gt===null?v0(l,r,i):ob(l,Gt.memoizedState,r,i)},useTransition:function(){var r=rh(Aa)[0],i=Rr().memoizedState;return[typeof r=="boolean"?r:Vo(r),i]},useSyncExternalStore:sh,useId:hb,useHostTransitionStatus:x0,useFormState:oh,useActionState:oh,useOptimistic:function(r,i){var l=Rr();return Gt!==null?Uf(l,Gt,r,i):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:fl,useCacheRefresh:db};bb.useEffectEvent=eb;function S0(r,i,l,d){i=r.memoizedState,l=l(d,i),l=l==null?i:y({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var N0={enqueueSetState:function(r,i,l){r=r._reactInternals;var d=aa(),v=Zt(d);v.payload=i,l!=null&&(v.callback=l),i=yn(r,v,d),i!==null&&(Pi(i,r,d),Zn(i,r,d))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var d=aa(),v=Zt(d);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=yn(r,v,d),i!==null&&(Pi(i,r,d),Zn(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=aa(),d=Zt(l);d.tag=2,i!=null&&(d.callback=i),i=yn(r,d,l),i!==null&&(Pi(i,r,l),Zn(i,r,l))}};function vb(r,i,l,d,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,w,O):i.prototype&&i.prototype.isPureReactComponent?!$a(l,d)||!$a(v,w):!0}function yb(r,i,l,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==r&&N0.enqueueReplaceState(i,i.state,null)}function iu(r,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(r=r.defaultProps){l===i&&(l=y({},l));for(var v in r)l[v]===void 0&&(l[v]=r[v])}return l}function xb(r){Yc(r)}function wb(r){console.error(r)}function _b(r){Yc(r)}function Xf(r,i){try{var l=r.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Sb(r,i,l){try{var d=r.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function A0(r,i,l){return l=Zt(l),l.tag=3,l.payload={element:null},l.callback=function(){Xf(r,i)},l}function Nb(r){return r=Zt(r),r.tag=3,r}function Ab(r,i,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;r.payload=function(){return v(w)},r.callback=function(){Sb(i,l,d)}}var O=l.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){Sb(i,l,d),typeof v!="function"&&(cc===null?cc=new Set([this]):cc.add(this));var ne=d.stack;this.componentDidCatch(d.value,{componentStack:ne!==null?ne:""})})}function X4(r,i,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&Oo(i,l,v,!0),l=Sr.current,l!==null){switch(l.tag){case 31:case 13:return qn===null?o1():l.alternate===null&&es===0&&(es=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===xe?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),Z0(r,d,v)),!1;case 22:return l.flags|=65536,d===xe?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),Z0(r,d,v)),!1}throw Error(s(435,l.tag))}return Z0(r,d,v),o1(),!1}if(jn)return i=Sr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=v,d!==ra&&(r=Error(s(422),{cause:d}),Jl(ji(r,l)))):(d!==ra&&(i=Error(s(423),{cause:d}),Jl(ji(i,l))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,d=ji(d,l),v=A0(r.stateNode,d,v),ss(r,v),es!==4&&(es=2)),!1;var w=Error(s(520),{cause:d});if(w=ji(w,l),Ed===null?Ed=[w]:Ed.push(w),es!==4&&(es=2),i===null)return!0;d=ji(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,r=v&-v,l.lanes|=r,r=A0(l.stateNode,d,r),ss(l,r),!1;case 1:if(i=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cc===null||!cc.has(w))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Nb(v),Ab(v,r,l,d),ss(l,v),!1}l=l.return}while(l!==null);return!1}var C0=Error(s(461)),ms=!1;function Qs(r,i,l,d){i.child=r===null?gn(i,null,l,d):pr(i,r.child,l,d)}function Cb(r,i,l,d,v){l=l.render;var w=i.ref;if("ref"in d){var O={};for(var ne in d)ne!=="ref"&&(O[ne]=d[ne])}else O=d;return Do(i),d=pd(r,i,l,O,w,v),ne=md(),r!==null&&!ms?(gd(r,i,v),gl(r,i,v)):(jn&&ne&&ud(i),i.flags|=1,Qs(r,i,d,v),i.child)}function Tb(r,i,l,d,v){if(r===null){var w=l.type;return typeof w=="function"&&!Hu(w)&&w.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=w,kb(r,i,w,d,v)):(r=Zl(l.type,null,d,i,i.mode,v),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!D0(r,v)){var O=w.memoizedProps;if(l=l.compare,l=l!==null?l:$a,l(O,d)&&r.ref===i.ref)return gl(r,i,v)}return i.flags|=1,r=ki(w,d),r.ref=i.ref,r.return=i,i.child=r}function kb(r,i,l,d,v){if(r!==null){var w=r.memoizedProps;if($a(w,d)&&r.ref===i.ref)if(ms=!1,i.pendingProps=d=w,D0(r,v))(r.flags&131072)!==0&&(ms=!0);else return i.lanes=r.lanes,gl(r,i,v)}return T0(r,i,l,d,v)}function jb(r,i,l,d){var v=d.children,w=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,r!==null){for(d=i.child=r.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,i.child=null;return Eb(r,i,w,l,d)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oe(i,w!==null?w.cachePool:null),w!==null?_r(i,w):Wn(),Kr(i);else return d=i.lanes=536870912,Eb(r,i,w!==null?w.baseLanes|l:l,l,d)}else w!==null?(oe(i,w.cachePool),_r(i,w),Qr(),i.memoizedState=null):(r!==null&&oe(i,null),Wn(),Qr());return Qs(r,i,v,l),i.child}function Sd(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Eb(r,i,l,d,v){var w=se();return w=w===null?null:{parent:Wr._currentValue,pool:w},i.memoizedState={baseLanes:l,cachePool:w},r!==null&&oe(i,null),Wn(),Kr(i),r!==null&&Oo(r,i,d,!0),i.childLanes=v,null}function Zf(r,i){return i=Qf({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Mb(r,i,l){return pr(i,r.child,null,l),r=Zf(i,i.pendingProps),r.flags|=2,er(i),i.memoizedState=null,r}function Z4(r,i,l){var d=i.pendingProps,v=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(jn){if(d.mode==="hidden")return r=Zf(i,d),i.lanes=536870912,Sd(null,r);if(Kn(i),(r=fr)?(r=Uv(r,Or),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:jo!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Wu(r),l.return=i,i.child=l,Ts=i,fr=null)):r=null,r===null)throw Eo(i);return i.lanes=536870912,null}return Zf(i,d)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(Kn(i),v)if(i.flags&256)i.flags&=-257,i=Mb(r,i,l);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(ms||Oo(r,i,l,!1),v=(l&r.childLanes)!==0,ms||v){if(d=mr,d!==null&&(O=sn(d,l),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ka(r,O),Pi(d,r,O),C0;o1(),i=Mb(r,i,l)}else r=w.treeContext,fr=Ta(O.nextSibling),Ts=i,jn=!0,Zs=null,Or=!1,r!==null&&Pf(i,r),i=Zf(i,d),i.flags|=4096;return i}return r=ki(r.child,{mode:d.mode,children:d.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Kf(r,i){var l=i.ref;if(l===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(i.flags|=4194816)}}function T0(r,i,l,d,v){return Do(i),l=pd(r,i,l,d,void 0,v),d=md(),r!==null&&!ms?(gd(r,i,v),gl(r,i,v)):(jn&&d&&ud(i),i.flags|=1,Qs(r,i,l,v),i.child)}function Lb(r,i,l,d,v,w){return Do(i),i.updateQueue=null,l=Ja(i,d,l,v),eh(r),d=md(),r!==null&&!ms?(gd(r,i,w),gl(r,i,w)):(jn&&d&&ud(i),i.flags|=1,Qs(r,i,l,w),i.child)}function Ob(r,i,l,d,v){if(Do(i),i.stateNode===null){var w=Cs,O=l.contextType;typeof O=="object"&&O!==null&&(w=js(O)),w=new l(d,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=N0,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=d,w.state=i.memoizedState,w.refs={},_t(i),O=l.contextType,w.context=typeof O=="object"&&O!==null?js(O):Cs,w.state=i.memoizedState,O=l.getDerivedStateFromProps,typeof O=="function"&&(S0(i,l,O,d),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&N0.enqueueReplaceState(w,w.state,null),Xr(i,d,w,v),or(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){w=i.stateNode;var ne=i.memoizedProps,me=iu(l,ne);w.props=me;var De=w.context,Ge=l.contextType;O=Cs,typeof Ge=="object"&&Ge!==null&&(O=js(Ge));var Je=l.getDerivedStateFromProps;Ge=typeof Je=="function"||typeof w.getSnapshotBeforeUpdate=="function",ne=i.pendingProps!==ne,Ge||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ne||De!==O)&&yb(i,w,d,O),kt=!1;var Fe=i.memoizedState;w.state=Fe,Xr(i,d,w,v),or(),De=i.memoizedState,ne||Fe!==De||kt?(typeof Je=="function"&&(S0(i,l,Je,d),De=i.memoizedState),(me=kt||vb(i,l,me,d,Fe,De,O))?(Ge||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=De),w.props=d,w.state=De,w.context=O,d=me):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,wr(r,i),O=i.memoizedProps,Ge=iu(l,O),w.props=Ge,Je=i.pendingProps,Fe=w.context,De=l.contextType,me=Cs,typeof De=="object"&&De!==null&&(me=js(De)),ne=l.getDerivedStateFromProps,(De=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Je||Fe!==me)&&yb(i,w,d,me),kt=!1,Fe=i.memoizedState,w.state=Fe,Xr(i,d,w,v),or();var ze=i.memoizedState;O!==Je||Fe!==ze||kt||r!==null&&r.dependencies!==null&&Zu(r.dependencies)?(typeof ne=="function"&&(S0(i,l,ne,d),ze=i.memoizedState),(Ge=kt||vb(i,l,Ge,d,Fe,ze,me)||r!==null&&r.dependencies!==null&&Zu(r.dependencies))?(De||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,ze,me),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,ze,me)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ze),w.props=d,w.state=ze,w.context=me,d=Ge):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=1024),d=!1)}return w=d,Kf(r,i),d=(i.flags&128)!==0,w||d?(w=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,r!==null&&d?(i.child=pr(i,r.child,null,v),i.child=pr(i,null,l,v)):Qs(r,i,l,v),i.memoizedState=w.state,r=i.child):r=gl(r,i,v),r}function Db(r,i,l,d){return hl(),i.flags|=256,Qs(r,i,l,d),i.child}var k0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function j0(r){return{baseLanes:r,cachePool:ue()}}function E0(r,i,l){return r=r!==null?r.childLanes&~l:0,i&&(r|=ia),r}function Rb(r,i,l){var d=i.pendingProps,v=!1,w=(i.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(Fn.current&2)!==0),O&&(v=!0,i.flags&=-129),O=(i.flags&32)!==0,i.flags&=-33,r===null){if(jn){if(v?Gr(i):Qr(),(r=fr)?(r=Uv(r,Or),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:jo!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Wu(r),l.return=i,i.child=l,Ts=i,fr=null)):r=null,r===null)throw Eo(i);return dm(r)?i.lanes=32:i.lanes=536870912,null}var ne=d.children;return d=d.fallback,v?(Qr(),v=i.mode,ne=Qf({mode:"hidden",children:ne},v),d=ko(d,v,l,null),ne.return=i,d.return=i,ne.sibling=d,i.child=ne,d=i.child,d.memoizedState=j0(l),d.childLanes=E0(r,O,l),i.memoizedState=k0,Sd(null,d)):(Gr(i),M0(i,ne))}var me=r.memoizedState;if(me!==null&&(ne=me.dehydrated,ne!==null)){if(w)i.flags&256?(Gr(i),i.flags&=-257,i=L0(r,i,l)):i.memoizedState!==null?(Qr(),i.child=r.child,i.flags|=128,i=null):(Qr(),ne=d.fallback,v=i.mode,d=Qf({mode:"visible",children:d.children},v),ne=ko(ne,v,l,null),ne.flags|=2,d.return=i,ne.return=i,d.sibling=ne,i.child=d,pr(i,r.child,null,l),d=i.child,d.memoizedState=j0(l),d.childLanes=E0(r,O,l),i.memoizedState=k0,i=Sd(null,d));else if(Gr(i),dm(ne)){if(O=ne.nextSibling&&ne.nextSibling.dataset,O)var De=O.dgst;O=De,d=Error(s(419)),d.stack="",d.digest=O,Jl({value:d,source:null,stack:null}),i=L0(r,i,l)}else if(ms||Oo(r,i,l,!1),O=(l&r.childLanes)!==0,ms||O){if(O=mr,O!==null&&(d=sn(O,l),d!==0&&d!==me.retryLane))throw me.retryLane=d,Ka(r,d),Pi(O,r,d),C0;hm(ne)||o1(),i=L0(r,i,l)}else hm(ne)?(i.flags|=192,i.child=r.child,i=null):(r=me.treeContext,fr=Ta(ne.nextSibling),Ts=i,jn=!0,Zs=null,Or=!1,r!==null&&Pf(i,r),i=M0(i,d.children),i.flags|=4096);return i}return v?(Qr(),ne=d.fallback,v=i.mode,me=r.child,De=me.sibling,d=ki(me,{mode:"hidden",children:d.children}),d.subtreeFlags=me.subtreeFlags&65011712,De!==null?ne=ki(De,ne):(ne=ko(ne,v,l,null),ne.flags|=2),ne.return=i,d.return=i,d.sibling=ne,i.child=d,Sd(null,d),d=i.child,ne=r.child.memoizedState,ne===null?ne=j0(l):(v=ne.cachePool,v!==null?(me=Wr._currentValue,v=v.parent!==me?{parent:me,pool:me}:v):v=ue(),ne={baseLanes:ne.baseLanes|l,cachePool:v}),d.memoizedState=ne,d.childLanes=E0(r,O,l),i.memoizedState=k0,Sd(r.child,d)):(Gr(i),l=r.child,r=l.sibling,l=ki(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,r!==null&&(O=i.deletions,O===null?(i.deletions=[r],i.flags|=16):O.push(r)),i.child=l,i.memoizedState=null,l)}function M0(r,i){return i=Qf({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Qf(r,i){return r=Vs(22,r,null,i),r.lanes=0,r}function L0(r,i,l){return pr(i,r.child,null,l),r=M0(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Ib(r,i,l){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),ec(r.return,i,l)}function O0(r,i,l,d,v,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:w}:(O.isBackwards=i,O.rendering=null,O.renderingStartTime=0,O.last=d,O.tail=l,O.tailMode=v,O.treeForkCount=w)}function Vb(r,i,l){var d=i.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var O=Fn.current,ne=(O&2)!==0;if(ne?(O=O&1|2,i.flags|=128):O&=1,$(Fn,O),Qs(r,i,d,l),d=jn?eu:0,!ne&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ib(r,l,i);else if(r.tag===19)Ib(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(l=i.child,v=null;l!==null;)r=l.alternate,r!==null&&Bs(r)===null&&(v=l),l=l.sibling;l=v,l===null?(v=i.child,i.child=null):(v=l.sibling,l.sibling=null),O0(i,!1,v,l,w,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=i.child,i.child=null;v!==null;){if(r=v.alternate,r!==null&&Bs(r)===null){i.child=v;break}r=v.sibling,v.sibling=l,l=v,v=r}O0(i,!0,l,null,w,d);break;case"together":O0(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function gl(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),lc|=i.lanes,(l&i.childLanes)===0)if(r!==null){if(Oo(r,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=ki(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=ki(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function D0(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Zu(r)))}function K4(r,i,l){switch(i.tag){case 3:de(i,i.stateNode.containerInfo),Lo(i,Wr,r.memoizedState.cache),hl();break;case 27:case 5:Se(i);break;case 4:de(i,i.stateNode.containerInfo);break;case 10:Lo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kn(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Gr(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Rb(r,i,l):(Gr(i),r=gl(r,i,l),r!==null?r.sibling:null);Gr(i);break;case 19:var v=(r.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(Oo(r,i,l,!1),d=(l&i.childLanes)!==0),v){if(d)return Vb(r,i,l);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),$(Fn,Fn.current),d)break;return null;case 22:return i.lanes=0,jb(r,i,l,i.pendingProps);case 24:Lo(i,Wr,r.memoizedState.cache)}return gl(r,i,l)}function Fb(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps)ms=!0;else{if(!D0(r,l)&&(i.flags&128)===0)return ms=!1,K4(r,i,l);ms=(r.flags&131072)!==0}else ms=!1,jn&&(i.flags&1048576)!==0&&Bf(i,eu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(r=ke(i.elementType),i.type=r,typeof r=="function")Hu(r)?(d=iu(r,d),i.tag=1,i=Ob(null,i,r,d,l)):(i.tag=0,i=T0(null,i,r,d,l));else{if(r!=null){var v=r.$$typeof;if(v===V){i.tag=11,i=Cb(null,i,r,d,l);break e}else if(v===H){i.tag=14,i=Tb(null,i,r,d,l);break e}}throw i=P(r)||r,Error(s(306,i,""))}}return i;case 0:return T0(r,i,i.type,i.pendingProps,l);case 1:return d=i.type,v=iu(d,i.pendingProps),Ob(r,i,d,v,l);case 3:e:{if(de(i,i.stateNode.containerInfo),r===null)throw Error(s(387));d=i.pendingProps;var w=i.memoizedState;v=w.element,wr(r,i),Xr(i,d,null,l);var O=i.memoizedState;if(d=O.cache,Lo(i,Wr,d),d!==w.cache&&dl(i,[Wr],l,!0),or(),d=O.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:O.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=Db(r,i,d,l);break e}else if(d!==v){v=ji(Error(s(424)),i),Jl(v),i=Db(r,i,d,l);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(fr=Ta(r.firstChild),Ts=i,jn=!0,Zs=null,Or=!0,l=gn(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(hl(),d===v){i=gl(r,i,l);break e}Qs(r,i,d,l)}i=i.child}return i;case 26:return Kf(r,i),r===null?(l=Xv(i.type,null,i.pendingProps,null))?i.memoizedState=l:jn||(l=i.type,r=i.pendingProps,d=p1(ie.current).createElement(l),d[Sn]=i,d[an]=r,Js(d,l,r),on(d),i.stateNode=d):i.memoizedState=Xv(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Se(i),r===null&&jn&&(d=i.stateNode=Gv(i.type,i.pendingProps,ie.current),Ts=i,Or=!0,v=fr,fc(i.type)?(fm=v,fr=Ta(d.firstChild)):fr=v),Qs(r,i,i.pendingProps.children,l),Kf(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&jn&&((v=d=fr)&&(d=T_(d,i.type,i.pendingProps,Or),d!==null?(i.stateNode=d,Ts=i,fr=Ta(d.firstChild),Or=!1,v=!0):v=!1),v||Eo(i)),Se(i),v=i.type,w=i.pendingProps,O=r!==null?r.memoizedProps:null,d=w.children,lm(v,w)?d=null:O!==null&&lm(v,O)&&(i.flags|=32),i.memoizedState!==null&&(v=pd(r,i,m0,null,null,l),Fd._currentValue=v),Kf(r,i),Qs(r,i,d,l),i.child;case 6:return r===null&&jn&&((r=l=fr)&&(l=k_(l,i.pendingProps,Or),l!==null?(i.stateNode=l,Ts=i,fr=null,r=!0):r=!1),r||Eo(i)),null;case 13:return Rb(r,i,l);case 4:return de(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=pr(i,null,d,l):Qs(r,i,d,l),i.child;case 11:return Cb(r,i,i.type,i.pendingProps,l);case 7:return Qs(r,i,i.pendingProps,l),i.child;case 8:return Qs(r,i,i.pendingProps.children,l),i.child;case 12:return Qs(r,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,Lo(i,i.type,d.value),Qs(r,i,d.children,l),i.child;case 9:return v=i.type._context,d=i.pendingProps.children,Do(i),v=js(v),d=d(v),i.flags|=1,Qs(r,i,d,l),i.child;case 14:return Tb(r,i,i.type,i.pendingProps,l);case 15:return kb(r,i,i.type,i.pendingProps,l);case 19:return Vb(r,i,l);case 31:return Z4(r,i,l);case 22:return jb(r,i,l,i.pendingProps);case 24:return Do(i),d=js(Wr),r===null?(v=se(),v===null&&(v=mr,w=tc(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=l),v=w),i.memoizedState={parent:d,cache:v},_t(i),Lo(i,Wr,v)):((r.lanes&l)!==0&&(wr(r,i),Xr(i,null,null,l),or()),v=r.memoizedState,w=i.memoizedState,v.parent!==d?(v={parent:d,cache:d},i.memoizedState=v,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=v),Lo(i,Wr,d)):(d=w.cache,Lo(i,Wr,d),d!==v.cache&&dl(i,[Wr],l,!0))),Qs(r,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function bl(r){r.flags|=4}function R0(r,i,l,d,v){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(hv())r.flags|=8192;else throw Ue=xe,Le}else r.flags&=-16777217}function Bb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!e5(i))if(hv())r.flags|=8192;else throw Ue=xe,Le}function Jf(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?yt():536870912,r.lanes|=i,hh|=i)}function Nd(r,i){if(!jn)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Nr(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(i)for(var v=r.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=d,r.childLanes=l,i}function Q4(r,i,l){var d=i.pendingProps;switch(Yu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(i),null;case 1:return Nr(i),null;case 3:return l=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Di(Wr),ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(ks(i)?bl(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dd())),Nr(i),null;case 26:var v=i.type,w=i.memoizedState;return r===null?(bl(i),w!==null?(Nr(i),Bb(i,w)):(Nr(i),R0(i,v,null,d,l))):w?w!==r.memoizedState?(bl(i),Nr(i),Bb(i,w)):(Nr(i),i.flags&=-16777217):(r=r.memoizedProps,r!==d&&bl(i),Nr(i),R0(i,v,r,d,l)),null;case 27:if(Be(i),l=ie.current,v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&bl(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return Nr(i),null}r=G.current,ks(i)?hd(i):(r=Gv(v,d,l),i.stateNode=r,bl(i))}return Nr(i),null;case 5:if(Be(i),v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&bl(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return Nr(i),null}if(w=G.current,ks(i))hd(i);else{var O=p1(ie.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?O.createElement("select",{is:d.is}):O.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?O.createElement(v,{is:d.is}):O.createElement(v)}}w[Sn]=i,w[an]=d;e:for(O=i.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===i)break e;for(;O.sibling===null;){if(O.return===null||O.return===i)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}i.stateNode=w;e:switch(Js(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&bl(i)}}return Nr(i),R0(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,l),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&bl(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(r=ie.current,ks(i)){if(r=i.stateNode,l=i.memoizedProps,d=null,v=Ts,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}r[Sn]=i,r=!!(r.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Rv(r.nodeValue,l)),r||Eo(i,!0)}else r=p1(r).createTextNode(d),r[Sn]=i,i.stateNode=r}return Nr(i),null;case 31:if(l=i.memoizedState,r===null||r.memoizedState!==null){if(d=ks(i),l!==null){if(r===null){if(!d)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Sn]=i}else hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),r=!1}else l=dd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return i.flags&256?(er(i),i):(er(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Nr(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=ks(i),d!==null&&d.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Sn]=i}else hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),v=!1}else v=dd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return i.flags&256?(er(i),i):(er(i),null)}return er(i),(i.flags&128)!==0?(i.lanes=l,i):(l=d!==null,r=r!==null&&r.memoizedState!==null,l&&(d=i.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),l!==r&&l&&(i.child.flags|=8192),Jf(i,i.updateQueue),Nr(i),null);case 4:return ye(),r===null&&rm(i.stateNode.containerInfo),Nr(i),null;case 10:return Di(i.type),Nr(i),null;case 19:if(E(Fn),d=i.memoizedState,d===null)return Nr(i),null;if(v=(i.flags&128)!==0,w=d.rendering,w===null)if(v)Nd(d,!1);else{if(es!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=Bs(r),w!==null){for(i.flags|=128,Nd(d,!1),r=w.updateQueue,i.updateQueue=r,Jf(i,r),i.subtreeFlags=0,r=l,l=i.child;l!==null;)Qc(l,r),l=l.sibling;return $(Fn,Fn.current&1|2),jn&&vi(i,d.treeForkCount),i.child}r=r.sibling}d.tail!==null&&tt()>s1&&(i.flags|=128,v=!0,Nd(d,!1),i.lanes=4194304)}else{if(!v)if(r=Bs(w),r!==null){if(i.flags|=128,v=!0,r=r.updateQueue,i.updateQueue=r,Jf(i,r),Nd(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!jn)return Nr(i),null}else 2*tt()-d.renderingStartTime>s1&&l!==536870912&&(i.flags|=128,v=!0,Nd(d,!1),i.lanes=4194304);d.isBackwards?(w.sibling=i.child,i.child=w):(r=d.last,r!==null?r.sibling=w:i.child=w,d.last=w)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=tt(),r.sibling=null,l=Fn.current,$(Fn,v?l&1|2:l&1),jn&&vi(i,d.treeForkCount),r):(Nr(i),null);case 22:case 23:return er(i),is(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(Nr(i),i.subtreeFlags&6&&(i.flags|=8192)):Nr(i),l=i.updateQueue,l!==null&&Jf(i,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),r!==null&&E(J),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Di(Wr),Nr(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function J4(r,i){switch(Yu(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Di(Wr),ye(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Be(i),null;case 31:if(i.memoizedState!==null){if(er(i),i.alternate===null)throw Error(s(340));hl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(er(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));hl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return E(Fn),null;case 4:return ye(),null;case 10:return Di(i.type),null;case 22:case 23:return er(i),is(),r!==null&&E(J),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Di(Wr),null;case 25:return null;default:return null}}function Pb(r,i){switch(Yu(i),i.tag){case 3:Di(Wr),ye();break;case 26:case 27:case 5:Be(i);break;case 4:ye();break;case 31:i.memoizedState!==null&&er(i);break;case 13:er(i);break;case 19:E(Fn);break;case 10:Di(i.type);break;case 22:case 23:er(i),is(),r!==null&&E(J);break;case 24:Di(Wr)}}function Ad(r,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&r)===r){d=void 0;var w=l.create,O=l.inst;d=w(),O.destroy=d}l=l.next}while(l!==v)}}catch(ne){nr(i,i.return,ne)}}function ac(r,i,l){try{var d=i.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&r)===r){var O=d.inst,ne=O.destroy;if(ne!==void 0){O.destroy=void 0,v=i;var me=l,De=ne;try{De()}catch(Ge){nr(v,me,Ge)}}}d=d.next}while(d!==w)}}catch(Ge){nr(i,i.return,Ge)}}function zb(r){var i=r.updateQueue;if(i!==null){var l=r.stateNode;try{Zr(i,l)}catch(d){nr(r,r.return,d)}}}function qb(r,i,l){l.props=iu(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(d){nr(r,i,d)}}function Cd(r,i){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(v){nr(r,i,v)}}function Bo(r,i){var l=r.ref,d=r.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){nr(r,i,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){nr(r,i,v)}else l.current=null}function Ub(r){var i=r.type,l=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){nr(r,r.return,v)}}function I0(r,i,l){try{var d=r.stateNode;w_(d,r.type,l,i),d[an]=i}catch(v){nr(r,r.return,v)}}function Hb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&fc(r.type)||r.tag===4}function V0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Hb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&fc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function F0(r,i,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(r),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Ki));else if(d!==4&&(d===27&&fc(r.type)&&(l=r.stateNode,i=null),r=r.child,r!==null))for(F0(r,i,l),r=r.sibling;r!==null;)F0(r,i,l),r=r.sibling}function e1(r,i,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(d!==4&&(d===27&&fc(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(e1(r,i,l),r=r.sibling;r!==null;)e1(r,i,l),r=r.sibling}function Wb(r){var i=r.stateNode,l=r.memoizedProps;try{for(var d=r.type,v=i.attributes;v.length;)i.removeAttributeNode(v[0]);Js(i,d,l),i[Sn]=r,i[an]=l}catch(w){nr(r,r.return,w)}}var vl=!1,gs=!1,B0=!1,Gb=typeof WeakSet=="function"?WeakSet:Set,Ps=null;function e_(r,i){if(r=r.containerInfo,am=w1,r=Xa(r),_a(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var O=0,ne=-1,me=-1,De=0,Ge=0,Je=r,Fe=null;t:for(;;){for(var ze;Je!==l||v!==0&&Je.nodeType!==3||(ne=O+v),Je!==w||d!==0&&Je.nodeType!==3||(me=O+d),Je.nodeType===3&&(O+=Je.nodeValue.length),(ze=Je.firstChild)!==null;)Fe=Je,Je=ze;for(;;){if(Je===r)break t;if(Fe===l&&++De===v&&(ne=O),Fe===w&&++Ge===d&&(me=O),(ze=Je.nextSibling)!==null)break;Je=Fe,Fe=Je.parentNode}Je=ze}l=ne===-1||me===-1?null:{start:ne,end:me}}else l=null}l=l||{start:0,end:0}}else l=null;for(om={focusedElem:r,selectionRange:l},w1=!1,Ps=i;Ps!==null;)if(i=Ps,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ps=r;else for(;Ps!==null;){switch(i=Ps,w=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)v=r[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,l=i,v=w.memoizedProps,w=w.memoizedState,d=l.stateNode;try{var Dt=iu(l.type,v);r=d.getSnapshotBeforeUpdate(Dt,w),d.__reactInternalSnapshotBeforeUpdate=r}catch(Kt){nr(l,l.return,Kt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,l=r.nodeType,l===9)um(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":um(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Ps=r;break}Ps=i.return}}function $b(r,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:xl(r,l),d&4&&Ad(5,l);break;case 1:if(xl(r,l),d&4)if(r=l.stateNode,i===null)try{r.componentDidMount()}catch(O){nr(l,l.return,O)}else{var v=iu(l.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(v,i,r.__reactInternalSnapshotBeforeUpdate)}catch(O){nr(l,l.return,O)}}d&64&&zb(l),d&512&&Cd(l,l.return);break;case 3:if(xl(r,l),d&64&&(r=l.updateQueue,r!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Zr(r,i)}catch(O){nr(l,l.return,O)}}break;case 27:i===null&&d&4&&Wb(l);case 26:case 5:xl(r,l),i===null&&d&4&&Ub(l),d&512&&Cd(l,l.return);break;case 12:xl(r,l);break;case 31:xl(r,l),d&4&&Zb(r,l);break;case 13:xl(r,l),d&4&&Kb(r,l),d&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=c_.bind(null,l),j_(r,l))));break;case 22:if(d=l.memoizedState!==null||vl,!d){i=i!==null&&i.memoizedState!==null||gs,v=vl;var w=gs;vl=d,(gs=i)&&!w?wl(r,l,(l.subtreeFlags&8772)!==0):xl(r,l),vl=v,gs=w}break;case 30:break;default:xl(r,l)}}function Yb(r){var i=r.alternate;i!==null&&(r.alternate=null,Yb(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ct(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ir=null,Ii=!1;function yl(r,i,l){for(l=l.child;l!==null;)Xb(r,i,l),l=l.sibling}function Xb(r,i,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ut,l)}catch{}switch(l.tag){case 26:gs||Bo(l,i),yl(r,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:gs||Bo(l,i);var d=Ir,v=Ii;fc(l.type)&&(Ir=l.stateNode,Ii=!1),yl(r,i,l),Rd(l.stateNode),Ir=d,Ii=v;break;case 5:gs||Bo(l,i);case 6:if(d=Ir,v=Ii,Ir=null,yl(r,i,l),Ir=d,Ii=v,Ir!==null)if(Ii)try{(Ir.nodeType===9?Ir.body:Ir.nodeName==="HTML"?Ir.ownerDocument.body:Ir).removeChild(l.stateNode)}catch(w){nr(l,i,w)}else try{Ir.removeChild(l.stateNode)}catch(w){nr(l,i,w)}break;case 18:Ir!==null&&(Ii?(r=Ir,zv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),yh(r)):zv(Ir,l.stateNode));break;case 4:d=Ir,v=Ii,Ir=l.stateNode.containerInfo,Ii=!0,yl(r,i,l),Ir=d,Ii=v;break;case 0:case 11:case 14:case 15:ac(2,l,i),gs||ac(4,l,i),yl(r,i,l);break;case 1:gs||(Bo(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&qb(l,i,d)),yl(r,i,l);break;case 21:yl(r,i,l);break;case 22:gs=(d=gs)||l.memoizedState!==null,yl(r,i,l),gs=d;break;default:yl(r,i,l)}}function Zb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{yh(r)}catch(l){nr(i,i.return,l)}}}function Kb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{yh(r)}catch(l){nr(i,i.return,l)}}function t_(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Gb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Gb),i;default:throw Error(s(435,r.tag))}}function t1(r,i){var l=t_(r);i.forEach(function(d){if(!l.has(d)){l.add(d);var v=u_.bind(null,r,d);d.then(v,v)}})}function Vi(r,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],w=r,O=i,ne=O;e:for(;ne!==null;){switch(ne.tag){case 27:if(fc(ne.type)){Ir=ne.stateNode,Ii=!1;break e}break;case 5:Ir=ne.stateNode,Ii=!1;break e;case 3:case 4:Ir=ne.stateNode.containerInfo,Ii=!0;break e}ne=ne.return}if(Ir===null)throw Error(s(160));Xb(w,O,v),Ir=null,Ii=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Qb(i,r),i=i.sibling}var ro=null;function Qb(r,i){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Vi(i,r),Fi(r),d&4&&(ac(3,r,r.return),Ad(3,r),ac(5,r,r.return));break;case 1:Vi(i,r),Fi(r),d&512&&(gs||l===null||Bo(l,l.return)),d&64&&vl&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=ro;if(Vi(i,r),Fi(r),d&512&&(gs||l===null||Bo(l,l.return)),d&4){var w=l!==null?l.memoizedState:null;if(d=r.memoizedState,l===null)if(d===null)if(r.stateNode===null){e:{d=r.type,l=r.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Ze]||w[Sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),Js(w,d,l),w[Sn]=r,on(w),d=w;break e;case"link":var O=Qv("link","href",v).get(d+(l.href||""));if(O){for(var ne=0;ne<O.length;ne++)if(w=O[ne],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){O.splice(ne,1);break t}}w=v.createElement(d),Js(w,d,l),v.head.appendChild(w);break;case"meta":if(O=Qv("meta","content",v).get(d+(l.content||""))){for(ne=0;ne<O.length;ne++)if(w=O[ne],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){O.splice(ne,1);break t}}w=v.createElement(d),Js(w,d,l),v.head.appendChild(w);break;default:throw Error(s(468,d))}w[Sn]=r,on(w),d=w}r.stateNode=d}else Jv(v,r.type,r.stateNode);else r.stateNode=Kv(v,d,r.memoizedProps);else w!==d?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,d===null?Jv(v,r.type,r.stateNode):Kv(v,d,r.memoizedProps)):d===null&&r.stateNode!==null&&I0(r,r.memoizedProps,l.memoizedProps)}break;case 27:Vi(i,r),Fi(r),d&512&&(gs||l===null||Bo(l,l.return)),l!==null&&d&4&&I0(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Vi(i,r),Fi(r),d&512&&(gs||l===null||Bo(l,l.return)),r.flags&32){v=r.stateNode;try{Zi(v,"")}catch(Dt){nr(r,r.return,Dt)}}d&4&&r.stateNode!=null&&(v=r.memoizedProps,I0(r,v,l!==null?l.memoizedProps:v)),d&1024&&(B0=!0);break;case 6:if(Vi(i,r),Fi(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,l=r.stateNode;try{l.nodeValue=d}catch(Dt){nr(r,r.return,Dt)}}break;case 3:if(b1=null,v=ro,ro=m1(i.containerInfo),Vi(i,r),ro=v,Fi(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{yh(i.containerInfo)}catch(Dt){nr(r,r.return,Dt)}B0&&(B0=!1,Jb(r));break;case 4:d=ro,ro=m1(r.stateNode.containerInfo),Vi(i,r),Fi(r),ro=d;break;case 12:Vi(i,r),Fi(r);break;case 31:Vi(i,r),Fi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,t1(r,d)));break;case 13:Vi(i,r),Fi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(r1=tt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,t1(r,d)));break;case 22:v=r.memoizedState!==null;var me=l!==null&&l.memoizedState!==null,De=vl,Ge=gs;if(vl=De||v,gs=Ge||me,Vi(i,r),gs=Ge,vl=De,Fi(r),d&8192)e:for(i=r.stateNode,i._visibility=v?i._visibility&-2:i._visibility|1,v&&(l===null||me||vl||gs||au(r)),l=null,i=r;;){if(i.tag===5||i.tag===26){if(l===null){me=l=i;try{if(w=me.stateNode,v)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{ne=me.stateNode;var Je=me.memoizedProps.style,Fe=Je!=null&&Je.hasOwnProperty("display")?Je.display:null;ne.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Dt){nr(me,me.return,Dt)}}}else if(i.tag===6){if(l===null){me=i;try{me.stateNode.nodeValue=v?"":me.memoizedProps}catch(Dt){nr(me,me.return,Dt)}}}else if(i.tag===18){if(l===null){me=i;try{var ze=me.stateNode;v?qv(ze,!0):qv(me.stateNode,!1)}catch(Dt){nr(me,me.return,Dt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,t1(r,l))));break;case 19:Vi(i,r),Fi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,t1(r,d)));break;case 30:break;case 21:break;default:Vi(i,r),Fi(r)}}function Fi(r){var i=r.flags;if(i&2){try{for(var l,d=r.return;d!==null;){if(Hb(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var v=l.stateNode,w=V0(r);e1(r,w,v);break;case 5:var O=l.stateNode;l.flags&32&&(Zi(O,""),l.flags&=-33);var ne=V0(r);e1(r,ne,O);break;case 3:case 4:var me=l.stateNode.containerInfo,De=V0(r);F0(r,De,me);break;default:throw Error(s(161))}}catch(Ge){nr(r,r.return,Ge)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Jb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Jb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function xl(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$b(r,i.alternate,i),i=i.sibling}function au(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:ac(4,i,i.return),au(i);break;case 1:Bo(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&qb(i,i.return,l),au(i);break;case 27:Rd(i.stateNode);case 26:case 5:Bo(i,i.return),au(i);break;case 22:i.memoizedState===null&&au(i);break;case 30:au(i);break;default:au(i)}r=r.sibling}}function wl(r,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,v=r,w=i,O=w.flags;switch(w.tag){case 0:case 11:case 15:wl(v,w,l),Ad(4,w);break;case 1:if(wl(v,w,l),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(De){nr(d,d.return,De)}if(d=w,v=d.updateQueue,v!==null){var ne=d.stateNode;try{var me=v.shared.hiddenCallbacks;if(me!==null)for(v.shared.hiddenCallbacks=null,v=0;v<me.length;v++)Fs(me[v],ne)}catch(De){nr(d,d.return,De)}}l&&O&64&&zb(w),Cd(w,w.return);break;case 27:Wb(w);case 26:case 5:wl(v,w,l),l&&d===null&&O&4&&Ub(w),Cd(w,w.return);break;case 12:wl(v,w,l);break;case 31:wl(v,w,l),l&&O&4&&Zb(v,w);break;case 13:wl(v,w,l),l&&O&4&&Kb(v,w);break;case 22:w.memoizedState===null&&wl(v,w,l),Cd(w,w.return);break;case 30:break;default:wl(v,w,l)}i=i.sibling}}function P0(r,i){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&tu(l))}function z0(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&tu(r))}function so(r,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ev(r,i,l,d),i=i.sibling}function ev(r,i,l,d){var v=i.flags;switch(i.tag){case 0:case 11:case 15:so(r,i,l,d),v&2048&&Ad(9,i);break;case 1:so(r,i,l,d);break;case 3:so(r,i,l,d),v&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&tu(r)));break;case 12:if(v&2048){so(r,i,l,d),r=i.stateNode;try{var w=i.memoizedProps,O=w.id,ne=w.onPostCommit;typeof ne=="function"&&ne(O,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(me){nr(i,i.return,me)}}else so(r,i,l,d);break;case 31:so(r,i,l,d);break;case 13:so(r,i,l,d);break;case 23:break;case 22:w=i.stateNode,O=i.alternate,i.memoizedState!==null?w._visibility&2?so(r,i,l,d):Td(r,i):w._visibility&2?so(r,i,l,d):(w._visibility|=2,lh(r,i,l,d,(i.subtreeFlags&10256)!==0||!1)),v&2048&&P0(O,i);break;case 24:so(r,i,l,d),v&2048&&z0(i.alternate,i);break;default:so(r,i,l,d)}}function lh(r,i,l,d,v){for(v=v&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=r,O=i,ne=l,me=d,De=O.flags;switch(O.tag){case 0:case 11:case 15:lh(w,O,ne,me,v),Ad(8,O);break;case 23:break;case 22:var Ge=O.stateNode;O.memoizedState!==null?Ge._visibility&2?lh(w,O,ne,me,v):Td(w,O):(Ge._visibility|=2,lh(w,O,ne,me,v)),v&&De&2048&&P0(O.alternate,O);break;case 24:lh(w,O,ne,me,v),v&&De&2048&&z0(O.alternate,O);break;default:lh(w,O,ne,me,v)}i=i.sibling}}function Td(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=r,d=i,v=d.flags;switch(d.tag){case 22:Td(l,d),v&2048&&P0(d.alternate,d);break;case 24:Td(l,d),v&2048&&z0(d.alternate,d);break;default:Td(l,d)}i=i.sibling}}var kd=8192;function ch(r,i,l){if(r.subtreeFlags&kd)for(r=r.child;r!==null;)tv(r,i,l),r=r.sibling}function tv(r,i,l){switch(r.tag){case 26:ch(r,i,l),r.flags&kd&&r.memoizedState!==null&&z_(l,ro,r.memoizedState,r.memoizedProps);break;case 5:ch(r,i,l);break;case 3:case 4:var d=ro;ro=m1(r.stateNode.containerInfo),ch(r,i,l),ro=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=kd,kd=16777216,ch(r,i,l),kd=d):ch(r,i,l));break;default:ch(r,i,l)}}function nv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function jd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Ps=d,sv(d,r)}nv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)rv(r),r=r.sibling}function rv(r){switch(r.tag){case 0:case 11:case 15:jd(r),r.flags&2048&&ac(9,r,r.return);break;case 3:jd(r);break;case 12:jd(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,n1(r)):jd(r);break;default:jd(r)}}function n1(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Ps=d,sv(d,r)}nv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:ac(8,i,i.return),n1(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,n1(i));break;default:n1(i)}r=r.sibling}}function sv(r,i){for(;Ps!==null;){var l=Ps;switch(l.tag){case 0:case 11:case 15:ac(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:tu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Ps=d;else e:for(l=r;Ps!==null;){d=Ps;var v=d.sibling,w=d.return;if(Yb(d),d===l){Ps=null;break e}if(v!==null){v.return=w,Ps=v;break e}Ps=w}}}var n_={getCacheForType:function(r){var i=js(Wr),l=i.data.get(r);return l===void 0&&(l=r(),i.data.set(r,l)),l},cacheSignal:function(){return js(Wr).controller.signal}},r_=typeof WeakMap=="function"?WeakMap:Map,Qn=0,mr=null,En=null,On=0,tr=0,sa=null,oc=!1,uh=!1,q0=!1,_l=0,es=0,lc=0,ou=0,U0=0,ia=0,hh=0,Ed=null,Bi=null,H0=!1,r1=0,iv=0,s1=1/0,i1=null,cc=null,Ms=0,uc=null,dh=null,Sl=0,W0=0,G0=null,av=null,Md=0,$0=null;function aa(){return(Qn&2)!==0&&On!==0?On&-On:Z.T!==null?J0():fn()}function ov(){if(ia===0)if((On&536870912)===0||jn){var r=en;en<<=1,(en&3932160)===0&&(en=262144),ia=r}else ia=536870912;return r=Sr.current,r!==null&&(r.flags|=32),ia}function Pi(r,i,l){(r===mr&&(tr===2||tr===9)||r.cancelPendingCommit!==null)&&(fh(r,0),hc(r,On,ia,!1)),Ve(r,l),((Qn&2)===0||r!==mr)&&(r===mr&&((Qn&2)===0&&(ou|=l),es===4&&hc(r,On,ia,!1)),Po(r))}function lv(r,i,l){if((Qn&6)!==0)throw Error(s(327));var d=!l&&(i&127)===0&&(i&r.expiredLanes)===0||wn(r,i),v=d?a_(r,i):X0(r,i,!0),w=d;do{if(v===0){uh&&!d&&hc(r,i,0,!1);break}else{if(l=r.current.alternate,w&&!s_(l)){v=X0(r,i,!1),w=!1;continue}if(v===2){if(w=i,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){i=O;e:{var ne=r;v=Ed;var me=ne.current.memoizedState.isDehydrated;if(me&&(fh(ne,O).flags|=256),O=X0(ne,O,!1),O!==2){if(q0&&!me){ne.errorRecoveryDisabledLanes|=w,ou|=w,v=4;break e}w=Bi,Bi=v,w!==null&&(Bi===null?Bi=w:Bi.push.apply(Bi,w))}v=O}if(w=!1,v!==2)continue}}if(v===1){fh(r,0),hc(r,i,0,!0);break}e:{switch(d=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:hc(d,i,ia,!oc);break e;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(v=r1+300-tt(),10<v)){if(hc(d,i,ia,!oc),qt(d,0,!0)!==0)break e;Sl=i,d.timeoutHandle=Bv(cv.bind(null,d,l,Bi,i1,H0,i,ia,ou,hh,oc,w,"Throttled",-0,0),v);break e}cv(d,l,Bi,i1,H0,i,ia,ou,hh,oc,w,null,-0,0)}}break}while(!0);Po(r)}function cv(r,i,l,d,v,w,O,ne,me,De,Ge,Je,Fe,ze){if(r.timeoutHandle=-1,Je=i.subtreeFlags,Je&8192||(Je&16785408)===16785408){Je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ki},tv(i,w,Je);var Dt=(w&62914560)===w?r1-tt():(w&4194048)===w?iv-tt():0;if(Dt=q_(Je,Dt),Dt!==null){Sl=w,r.cancelPendingCommit=Dt(bv.bind(null,r,i,w,l,d,v,O,ne,me,Ge,Je,null,Fe,ze)),hc(r,w,O,!De);return}}bv(r,i,w,l,d,v,O,ne,me)}function s_(r){for(var i=r;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],w=v.getSnapshot;v=v.value;try{if(!As(w(),v))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hc(r,i,l,d){i&=~U0,i&=~ou,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var v=i;0<v;){var w=31-xt(v),O=1<<w;d[w]=-1,v&=~O}l!==0&&Et(r,l,i)}function a1(){return(Qn&6)===0?(Ld(0),!1):!0}function Y0(){if(En!==null){if(tr===0)var r=En.return;else r=En,Na=Mo=null,th(r),nt=null,Rt=0,r=En;for(;r!==null;)Pb(r.alternate,r),r=r.return;En=null}}function fh(r,i){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,N_(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Sl=0,Y0(),mr=r,En=l=ki(r.current,null),On=i,tr=0,sa=null,oc=!1,uh=wn(r,i),q0=!1,hh=ia=U0=ou=lc=es=0,Bi=Ed=null,H0=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var v=31-xt(d),w=1<<v;i|=r[v],d&=~w}return _l=i,Xc(),l}function uv(r,i){Wt=null,Z.H=_d,i===be||i===ce?(i=Ye(),tr=3):i===Le?(i=Ye(),tr=4):tr=i===C0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,sa=i,En===null&&(es=1,Xf(r,ji(i,r.current)))}function hv(){var r=Sr.current;return r===null?!0:(On&4194048)===On?qn===null:(On&62914560)===On||(On&536870912)!==0?r===qn:!1}function dv(){var r=Z.H;return Z.H=_d,r===null?_d:r}function fv(){var r=Z.A;return Z.A=n_,r}function o1(){es=4,oc||(On&4194048)!==On&&Sr.current!==null||(uh=!0),(lc&134217727)===0&&(ou&134217727)===0||mr===null||hc(mr,On,ia,!1)}function X0(r,i,l){var d=Qn;Qn|=2;var v=dv(),w=fv();(mr!==r||On!==i)&&(i1=null,fh(r,i)),i=!1;var O=es;e:do try{if(tr!==0&&En!==null){var ne=En,me=sa;switch(tr){case 8:Y0(),O=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(i=!0);var De=tr;if(tr=0,sa=null,ph(r,ne,me,De),l&&uh){O=0;break e}break;default:De=tr,tr=0,sa=null,ph(r,ne,me,De)}}i_(),O=es;break}catch(Ge){uv(r,Ge)}while(!0);return i&&r.shellSuspendCounter++,Na=Mo=null,Qn=d,Z.H=v,Z.A=w,En===null&&(mr=null,On=0,Xc()),O}function i_(){for(;En!==null;)pv(En)}function a_(r,i){var l=Qn;Qn|=2;var d=dv(),v=fv();mr!==r||On!==i?(i1=null,s1=tt()+500,fh(r,i)):uh=wn(r,i);e:do try{if(tr!==0&&En!==null){i=En;var w=sa;t:switch(tr){case 1:tr=0,sa=null,ph(r,i,w,1);break;case 2:case 9:if(Ce(w)){tr=0,sa=null,mv(i);break}i=function(){tr!==2&&tr!==9||mr!==r||(tr=7),Po(r)},w.then(i,i);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:Ce(w)?(tr=0,sa=null,mv(i)):(tr=0,sa=null,ph(r,i,w,7));break;case 5:var O=null;switch(En.tag){case 26:O=En.memoizedState;case 5:case 27:var ne=En;if(O?e5(O):ne.stateNode.complete){tr=0,sa=null;var me=ne.sibling;if(me!==null)En=me;else{var De=ne.return;De!==null?(En=De,l1(De)):En=null}break t}}tr=0,sa=null,ph(r,i,w,5);break;case 6:tr=0,sa=null,ph(r,i,w,6);break;case 8:Y0(),es=6;break e;default:throw Error(s(462))}}o_();break}catch(Ge){uv(r,Ge)}while(!0);return Na=Mo=null,Z.H=d,Z.A=v,Qn=l,En!==null?0:(mr=null,On=0,Xc(),es)}function o_(){for(;En!==null&&!ht();)pv(En)}function pv(r){var i=Fb(r.alternate,r,_l);r.memoizedProps=r.pendingProps,i===null?l1(r):En=i}function mv(r){var i=r,l=i.alternate;switch(i.tag){case 15:case 0:i=Lb(l,i,i.pendingProps,i.type,void 0,On);break;case 11:i=Lb(l,i,i.pendingProps,i.type.render,i.ref,On);break;case 5:th(i);default:Pb(l,i),i=En=Qc(i,_l),i=Fb(l,i,_l)}r.memoizedProps=r.pendingProps,i===null?l1(r):En=i}function ph(r,i,l,d){Na=Mo=null,th(i),nt=null,Rt=0;var v=i.return;try{if(X4(r,v,i,l,On)){es=1,Xf(r,ji(l,r.current)),En=null;return}}catch(w){if(v!==null)throw En=v,w;es=1,Xf(r,ji(l,r.current)),En=null;return}i.flags&32768?(jn||d===1?r=!0:uh||(On&536870912)!==0?r=!1:(oc=r=!0,(d===2||d===9||d===3||d===6)&&(d=Sr.current,d!==null&&d.tag===13&&(d.flags|=16384))),gv(i,r)):l1(i)}function l1(r){var i=r;do{if((i.flags&32768)!==0){gv(i,oc);return}r=i.return;var l=Q4(i.alternate,i,_l);if(l!==null){En=l;return}if(i=i.sibling,i!==null){En=i;return}En=i=r}while(i!==null);es===0&&(es=5)}function gv(r,i){do{var l=J4(r.alternate,r);if(l!==null){l.flags&=32767,En=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(r=r.sibling,r!==null)){En=r;return}En=r=l}while(r!==null);es=6,En=null}function bv(r,i,l,d,v,w,O,ne,me){r.cancelPendingCommit=null;do c1();while(Ms!==0);if((Qn&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=zu,pt(r,l,w,O,ne,me),r===mr&&(En=mr=null,On=0),dh=i,uc=r,Sl=l,W0=w,G0=v,av=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,h_(dt,function(){return _v(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null,v=re.p,re.p=2,O=Qn,Qn|=4;try{e_(r,i,l)}finally{Qn=O,re.p=v,Z.T=d}}Ms=1,vv(),yv(),xv()}}function vv(){if(Ms===1){Ms=0;var r=uc,i=dh,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var d=re.p;re.p=2;var v=Qn;Qn|=4;try{Qb(i,r);var w=om,O=Xa(r.containerInfo),ne=w.focusedElem,me=w.selectionRange;if(O!==ne&&ne&&ne.ownerDocument&&Ya(ne.ownerDocument.documentElement,ne)){if(me!==null&&_a(ne)){var De=me.start,Ge=me.end;if(Ge===void 0&&(Ge=De),"selectionStart"in ne)ne.selectionStart=De,ne.selectionEnd=Math.min(Ge,ne.value.length);else{var Je=ne.ownerDocument||document,Fe=Je&&Je.defaultView||window;if(Fe.getSelection){var ze=Fe.getSelection(),Dt=ne.textContent.length,Kt=Math.min(me.start,Dt),ur=me.end===void 0?Kt:Math.min(me.end,Dt);!ze.extend&&Kt>ur&&(O=ur,ur=Kt,Kt=O);var Ae=Xl(ne,Kt),ve=Xl(ne,ur);if(Ae&&ve&&(ze.rangeCount!==1||ze.anchorNode!==Ae.node||ze.anchorOffset!==Ae.offset||ze.focusNode!==ve.node||ze.focusOffset!==ve.offset)){var Oe=Je.createRange();Oe.setStart(Ae.node,Ae.offset),ze.removeAllRanges(),Kt>ur?(ze.addRange(Oe),ze.extend(ve.node,ve.offset)):(Oe.setEnd(ve.node,ve.offset),ze.addRange(Oe))}}}}for(Je=[],ze=ne;ze=ze.parentNode;)ze.nodeType===1&&Je.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<Je.length;ne++){var Ke=Je[ne];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}w1=!!am,om=am=null}finally{Qn=v,re.p=d,Z.T=l}}r.current=i,Ms=2}}function yv(){if(Ms===2){Ms=0;var r=uc,i=dh,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var d=re.p;re.p=2;var v=Qn;Qn|=4;try{$b(r,i.alternate,i)}finally{Qn=v,re.p=d,Z.T=l}}Ms=3}}function xv(){if(Ms===4||Ms===3){Ms=0,Te();var r=uc,i=dh,l=Sl,d=av;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ms=5:(Ms=0,dh=uc=null,wv(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(cc=null),dn(l),i=i.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Z.T,v=re.p,re.p=2,Z.T=null;try{for(var w=r.onRecoverableError,O=0;O<d.length;O++){var ne=d[O];w(ne.value,{componentStack:ne.stack})}}finally{Z.T=i,re.p=v}}(Sl&3)!==0&&c1(),Po(r),v=r.pendingLanes,(l&261930)!==0&&(v&42)!==0?r===$0?Md++:(Md=0,$0=r):Md=0,Ld(0)}}function wv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,tu(i)))}function c1(){return vv(),yv(),xv(),_v()}function _v(){if(Ms!==5)return!1;var r=uc,i=W0;W0=0;var l=dn(Sl),d=Z.T,v=re.p;try{re.p=32>l?32:l,Z.T=null,l=G0,G0=null;var w=uc,O=Sl;if(Ms=0,dh=uc=null,Sl=0,(Qn&6)!==0)throw Error(s(331));var ne=Qn;if(Qn|=4,rv(w.current),ev(w,w.current,O,l),Qn=ne,Ld(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ut,w)}catch{}return!0}finally{re.p=v,Z.T=d,wv(r,i)}}function Sv(r,i,l){i=ji(l,i),i=A0(r.stateNode,i,2),r=yn(r,i,2),r!==null&&(Ve(r,2),Po(r))}function nr(r,i,l){if(r.tag===3)Sv(r,r,l);else for(;i!==null;){if(i.tag===3){Sv(i,r,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cc===null||!cc.has(d))){r=ji(l,r),l=Nb(2),d=yn(i,l,2),d!==null&&(Ab(l,d,i,r),Ve(d,2),Po(d));break}}i=i.return}}function Z0(r,i,l){var d=r.pingCache;if(d===null){d=r.pingCache=new r_;var v=new Set;d.set(i,v)}else v=d.get(i),v===void 0&&(v=new Set,d.set(i,v));v.has(l)||(q0=!0,v.add(l),r=l_.bind(null,r,i,l),i.then(r,r))}function l_(r,i,l){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,mr===r&&(On&l)===l&&(es===4||es===3&&(On&62914560)===On&&300>tt()-r1?(Qn&2)===0&&fh(r,0):U0|=l,hh===On&&(hh=0)),Po(r)}function Nv(r,i){i===0&&(i=yt()),r=Ka(r,i),r!==null&&(Ve(r,i),Po(r))}function c_(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Nv(r,l)}function u_(r,i){var l=0;switch(r.tag){case 31:case 13:var d=r.stateNode,v=r.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Nv(r,l)}function h_(r,i){return it(r,i)}var u1=null,mh=null,K0=!1,h1=!1,Q0=!1,dc=0;function Po(r){r!==mh&&r.next===null&&(mh===null?u1=mh=r:mh=mh.next=r),h1=!0,K0||(K0=!0,f_())}function Ld(r,i){if(!Q0&&h1){Q0=!0;do for(var l=!1,d=u1;d!==null;){if(r!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var O=d.suspendedLanes,ne=d.pingedLanes;w=(1<<31-xt(42|r)+1)-1,w&=v&~(O&~ne),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,kv(d,w))}else w=On,w=qt(d,d===mr?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||wn(d,w)||(l=!0,kv(d,w));d=d.next}while(l);Q0=!1}}function d_(){Av()}function Av(){h1=K0=!1;var r=0;dc!==0&&S_()&&(r=dc);for(var i=tt(),l=null,d=u1;d!==null;){var v=d.next,w=Cv(d,i);w===0?(d.next=null,l===null?u1=v:l.next=v,v===null&&(mh=l)):(l=d,(r!==0||(w&3)!==0)&&(h1=!0)),d=v}Ms!==0&&Ms!==5||Ld(r),dc!==0&&(dc=0)}function Cv(r,i){for(var l=r.suspendedLanes,d=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-xt(w),ne=1<<O,me=v[O];me===-1?((ne&l)===0||(ne&d)!==0)&&(v[O]=Me(ne,i)):me<=i&&(r.expiredLanes|=ne),w&=~ne}if(i=mr,l=On,l=qt(r,r===i?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,l===0||r===i&&(tr===2||tr===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&qe(d),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||wn(r,l)){if(i=l&-l,i===r.callbackPriority)return i;switch(d!==null&&qe(d),dn(l)){case 2:case 8:l=st;break;case 32:l=dt;break;case 268435456:l=Nt;break;default:l=dt}return d=Tv.bind(null,r),l=it(l,d),r.callbackPriority=i,r.callbackNode=l,i}return d!==null&&d!==null&&qe(d),r.callbackPriority=2,r.callbackNode=null,2}function Tv(r,i){if(Ms!==0&&Ms!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(c1()&&r.callbackNode!==l)return null;var d=On;return d=qt(r,r===mr?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(lv(r,d,i),Cv(r,tt()),r.callbackNode!=null&&r.callbackNode===l?Tv.bind(null,r):null)}function kv(r,i){if(c1())return null;lv(r,i,!0)}function f_(){A_(function(){(Qn&6)!==0?it(mt,d_):Av()})}function J0(){if(dc===0){var r=m;r===0&&(r=Ft,Ft<<=1,(Ft&261888)===0&&(Ft=256)),dc=r}return dc}function jv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ri(""+r)}function Ev(r,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,r.id&&l.setAttribute("form",r.id),i.parentNode.insertBefore(l,i),r=new FormData(r),l.parentNode.removeChild(l),r}function p_(r,i,l,d,v){if(i==="submit"&&l&&l.stateNode===v){var w=jv((v[an]||null).action),O=d.submitter;O&&(i=(i=O[an]||null)?jv(i.formAction):O.getAttribute("formAction"),i!==null&&(w=i,O=null));var ne=new Ai("action","action",null,d,v);r.push({event:ne,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(dc!==0){var me=O?Ev(v,O):new FormData(v);y0(l,{pending:!0,data:me,method:v.method,action:w},null,me)}}else typeof w=="function"&&(ne.preventDefault(),me=O?Ev(v,O):new FormData(v),y0(l,{pending:!0,data:me,method:v.method,action:w},w,me))},currentTarget:v}]})}}for(var em=0;em<ll.length;em++){var tm=ll[em],m_=tm.toLowerCase(),g_=tm[0].toUpperCase()+tm.slice(1);Ti(m_,"on"+g_)}Ti(ol,"onAnimationEnd"),Ti($c,"onAnimationIteration"),Ti(od,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(If,"onTransitionRun"),Ti(Vf,"onTransitionStart"),Ti(Ff,"onTransitionCancel"),Ti(ld,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Od));function Mv(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],v=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var O=d.length-1;0<=O;O--){var ne=d[O],me=ne.instance,De=ne.currentTarget;if(ne=ne.listener,me!==w&&v.isPropagationStopped())break e;w=ne,v.currentTarget=De;try{w(v)}catch(Ge){Yc(Ge)}v.currentTarget=null,w=me}else for(O=0;O<d.length;O++){if(ne=d[O],me=ne.instance,De=ne.currentTarget,ne=ne.listener,me!==w&&v.isPropagationStopped())break e;w=ne,v.currentTarget=De;try{w(v)}catch(Ge){Yc(Ge)}v.currentTarget=null,w=me}}}}function Mn(r,i){var l=i[Er];l===void 0&&(l=i[Er]=new Set);var d=r+"__bubble";l.has(d)||(Lv(i,r,2,!1),l.add(d))}function nm(r,i,l){var d=0;i&&(d|=4),Lv(l,r,d,i)}var d1="_reactListening"+Math.random().toString(36).slice(2);function rm(r){if(!r[d1]){r[d1]=!0,xn.forEach(function(l){l!=="selectionchange"&&(b_.has(l)||nm(l,!1,r),nm(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[d1]||(i[d1]=!0,nm("selectionchange",!1,i))}}function Lv(r,i,l,d){switch(o5(i)){case 2:var v=W_;break;case 8:v=G_;break;default:v=vm}l=v.bind(null,i,l,r),v=void 0,!qc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),d?v!==void 0?r.addEventListener(i,l,{capture:!0,passive:v}):r.addEventListener(i,l,!0):v!==void 0?r.addEventListener(i,l,{passive:v}):r.addEventListener(i,l,!1)}function sm(r,i,l,d,v){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var O=d.tag;if(O===3||O===4){var ne=d.stateNode.containerInfo;if(ne===v)break;if(O===4)for(O=d.return;O!==null;){var me=O.tag;if((me===3||me===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;ne!==null;){if(O=St(ne),O===null)return;if(me=O.tag,me===5||me===6||me===26||me===27){d=w=O;continue e}ne=ne.parentNode}}d=d.return}Iu(function(){var De=w,Ge=el(l),Je=[];e:{var Fe=cd.get(r);if(Fe!==void 0){var ze=Ai,Dt=r;switch(r){case"keypress":if(Ni(l)===0)break e;case"keydown":case"keyup":ze=In;break;case"focusin":Dt="focus",ze=Pa;break;case"focusout":Dt="blur",ze=Pa;break;case"beforeblur":case"afterblur":ze=Pa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=Ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=rs;break;case ol:case $c:case od:ze=S;break;case ld:ze=Ns;break;case"scroll":case"scrollend":ze=ql;break;case"wheel":ze=Qi;break;case"copy":case"cut":case"paste":ze=he;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=qr;break;case"toggle":case"beforetoggle":ze=Hc}var Kt=(i&4)!==0,ur=!Kt&&(r==="scroll"||r==="scrollend"),Ae=Kt?Fe!==null?Fe+"Capture":null:Fe;Kt=[];for(var ve=De,Oe;ve!==null;){var Ke=ve;if(Oe=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Oe===null||Ae===null||(Ke=fi(ve,Ae),Ke!=null&&Kt.push(Dd(ve,Ke,Oe))),ur)break;ve=ve.return}0<Kt.length&&(Fe=new ze(Fe,Dt,null,l,Ge),Je.push({event:Fe,listeners:Kt}))}}if((i&7)===0){e:{if(Fe=r==="mouseover"||r==="pointerover",ze=r==="mouseout"||r==="pointerout",Fe&&l!==Da&&(Dt=l.relatedTarget||l.fromElement)&&(St(Dt)||Dt[$n]))break e;if((ze||Fe)&&(Fe=Ge.window===Ge?Ge:(Fe=Ge.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,ze?(Dt=l.relatedTarget||l.toElement,ze=De,Dt=Dt?St(Dt):null,Dt!==null&&(ur=o(Dt),Kt=Dt.tag,Dt!==ur||Kt!==5&&Kt!==27&&Kt!==6)&&(Dt=null)):(ze=null,Dt=De),ze!==Dt)){if(Kt=Uc,Ke="onMouseLeave",Ae="onMouseEnter",ve="mouse",(r==="pointerout"||r==="pointerover")&&(Kt=qr,Ke="onPointerLeave",Ae="onPointerEnter",ve="pointer"),ur=ze==null?Fe:pn(ze),Oe=Dt==null?Fe:pn(Dt),Fe=new Kt(Ke,ve+"leave",ze,l,Ge),Fe.target=ur,Fe.relatedTarget=Oe,Ke=null,St(Ge)===De&&(Kt=new Kt(Ae,ve+"enter",Dt,l,Ge),Kt.target=Oe,Kt.relatedTarget=ur,Ke=Kt),ur=Ke,ze&&Dt)t:{for(Kt=v_,Ae=ze,ve=Dt,Oe=0,Ke=Ae;Ke;Ke=Kt(Ke))Oe++;Ke=0;for(var $t=ve;$t;$t=Kt($t))Ke++;for(;0<Oe-Ke;)Ae=Kt(Ae),Oe--;for(;0<Ke-Oe;)ve=Kt(ve),Ke--;for(;Oe--;){if(Ae===ve||ve!==null&&Ae===ve.alternate){Kt=Ae;break t}Ae=Kt(Ae),ve=Kt(ve)}Kt=null}else Kt=null;ze!==null&&Ov(Je,Fe,ze,Kt,!1),Dt!==null&&ur!==null&&Ov(Je,ur,Dt,Kt,!0)}}e:{if(Fe=De?pn(De):window,ze=Fe.nodeName&&Fe.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Fe.type==="file")var Yn=To;else if(Wc(Fe))if(si)Yn=xa;else{Yn=Ur;var zt=$l}else ze=Fe.nodeName,!ze||ze.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?De&&Bc(De.elementType)&&(Yn=To):Yn=Pu;if(Yn&&(Yn=Yn(r,De))){mi(Je,Yn,l,Ge);break e}zt&&zt(r,Fe,De),r==="focusout"&&De&&Fe.type==="number"&&De.memoizedProps.value!=null&&Qo(Fe,"number",Fe.value)}switch(zt=De?pn(De):window,r){case"focusin":(Wc(zt)||zt.contentEditable==="true")&&(gi=zt,Za=De,Rs=null);break;case"focusout":Rs=Za=gi=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,Hn(Je,l,Ge);break;case"selectionchange":if(al)break;case"keydown":case"keyup":Hn(Je,l,Ge)}var _n;if(ga)e:{switch(r){case"compositionstart":var Dn="onCompositionStart";break e;case"compositionend":Dn="onCompositionEnd";break e;case"compositionupdate":Dn="onCompositionUpdate";break e}Dn=void 0}else ba?Co(r,l)&&(Dn="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Dn="onCompositionStart");Dn&&(Ua&&l.locale!=="ko"&&(ba||Dn!=="onCompositionStart"?Dn==="onCompositionEnd"&&ba&&(_n=Vu()):(pi=Ge,nl="value"in pi?pi.value:pi.textContent,ba=!0)),zt=f1(De,Dn),0<zt.length&&(Dn=new Ne(Dn,r,null,l,Ge),Je.push({event:Dn,listeners:zt}),_n?Dn.data=_n:(_n=Hl(l),_n!==null&&(Dn.data=_n)))),(_n=il?Ys(r,l):Ha(r,l))&&(Dn=f1(De,"onBeforeInput"),0<Dn.length&&(zt=new Ne("onBeforeInput","beforeinput",null,l,Ge),Je.push({event:zt,listeners:Dn}),zt.data=_n)),p_(Je,r,De,l,Ge)}Mv(Je,i)})}function Dd(r,i,l){return{instance:r,listener:i,currentTarget:l}}function f1(r,i){for(var l=i+"Capture",d=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=fi(r,l),v!=null&&d.unshift(Dd(r,v,w)),v=fi(r,i),v!=null&&d.push(Dd(r,v,w))),r.tag===3)return d;r=r.return}return[]}function v_(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ov(r,i,l,d,v){for(var w=i._reactName,O=[];l!==null&&l!==d;){var ne=l,me=ne.alternate,De=ne.stateNode;if(ne=ne.tag,me!==null&&me===d)break;ne!==5&&ne!==26&&ne!==27||De===null||(me=De,v?(De=fi(l,w),De!=null&&O.unshift(Dd(l,De,me))):v||(De=fi(l,w),De!=null&&O.push(Dd(l,De,me)))),l=l.return}O.length!==0&&r.push({event:i,listeners:O})}var y_=/\r\n?/g,x_=/\u0000|\uFFFD/g;function Dv(r){return(typeof r=="string"?r:""+r).replace(y_,`
`).replace(x_,"")}function Rv(r,i){return i=Dv(i),Dv(r)===i}function cr(r,i,l,d,v,w){switch(l){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Zi(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Zi(r,""+d);break;case"className":ni(r,"class",d);break;case"tabIndex":ni(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(r,l,d);break;case"style":Ou(r,d,w);break;case"data":if(i!=="object"){ni(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||l!=="href")){r.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=ri(""+d),r.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(i!=="input"&&cr(r,i,"name",v.name,v,null),cr(r,i,"formEncType",v.formEncType,v,null),cr(r,i,"formMethod",v.formMethod,v,null),cr(r,i,"formTarget",v.formTarget,v,null)):(cr(r,i,"encType",v.encType,v,null),cr(r,i,"method",v.method,v,null),cr(r,i,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=ri(""+d),r.setAttribute(l,d);break;case"onClick":d!=null&&(r.onclick=Ki);break;case"onScroll":d!=null&&Mn("scroll",r);break;case"onScrollEnd":d!=null&&Mn("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}l=ri(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""+d):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":d===!0?r.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,d):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(l,d):r.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(l):r.setAttribute(l,d);break;case"popover":Mn("beforetoggle",r),Mn("toggle",r),Pr(r,"popover",d);break;case"xlinkActuate":Gs(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Gs(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Gs(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Gs(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Gs(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Gs(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Gs(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Gs(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Gs(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Pr(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Pc.get(l)||l,Pr(r,l,d))}}function im(r,i,l,d,v,w){switch(l){case"style":Ou(r,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof d=="string"?Zi(r,d):(typeof d=="number"||typeof d=="bigint")&&Zi(r,""+d);break;case"onScroll":d!=null&&Mn("scroll",r);break;case"onScrollEnd":d!=null&&Mn("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pn.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),i=l.slice(2,v?l.length-7:void 0),w=r[an]||null,w=w!=null?w[l]:null,typeof w=="function"&&r.removeEventListener(i,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(i,d,v);break e}l in r?r[l]=d:d===!0?r.setAttribute(l,""):Pr(r,l,d)}}}function Js(r,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mn("error",r),Mn("load",r);var d=!1,v=!1,w;for(w in l)if(l.hasOwnProperty(w)){var O=l[w];if(O!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:cr(r,i,w,O,l,null)}}v&&cr(r,i,"srcSet",l.srcSet,l,null),d&&cr(r,i,"src",l.src,l,null);return;case"input":Mn("invalid",r);var ne=w=O=v=null,me=null,De=null;for(d in l)if(l.hasOwnProperty(d)){var Ge=l[d];if(Ge!=null)switch(d){case"name":v=Ge;break;case"type":O=Ge;break;case"checked":me=Ge;break;case"defaultChecked":De=Ge;break;case"value":w=Ge;break;case"defaultValue":ne=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(s(137,i));break;default:cr(r,i,d,Ge,l,null)}}Bl(r,w,ne,me,De,O,v,!1);return;case"select":Mn("invalid",r),d=O=w=null;for(v in l)if(l.hasOwnProperty(v)&&(ne=l[v],ne!=null))switch(v){case"value":w=ne;break;case"defaultValue":O=ne;break;case"multiple":d=ne;default:cr(r,i,v,ne,l,null)}i=w,l=O,r.multiple=!!d,i!=null?$s(r,!!d,i,!1):l!=null&&$s(r,!!d,l,!0);return;case"textarea":Mn("invalid",r),w=v=d=null;for(O in l)if(l.hasOwnProperty(O)&&(ne=l[O],ne!=null))switch(O){case"value":d=ne;break;case"defaultValue":v=ne;break;case"children":w=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(91));break;default:cr(r,i,O,ne,l,null)}Fc(r,d,v,w);return;case"option":for(me in l)if(l.hasOwnProperty(me)&&(d=l[me],d!=null))switch(me){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:cr(r,i,me,d,l,null)}return;case"dialog":Mn("beforetoggle",r),Mn("toggle",r),Mn("cancel",r),Mn("close",r);break;case"iframe":case"object":Mn("load",r);break;case"video":case"audio":for(d=0;d<Od.length;d++)Mn(Od[d],r);break;case"image":Mn("error",r),Mn("load",r);break;case"details":Mn("toggle",r);break;case"embed":case"source":case"link":Mn("error",r),Mn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in l)if(l.hasOwnProperty(De)&&(d=l[De],d!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:cr(r,i,De,d,l,null)}return;default:if(Bc(i)){for(Ge in l)l.hasOwnProperty(Ge)&&(d=l[Ge],d!==void 0&&im(r,i,Ge,d,l,void 0));return}}for(ne in l)l.hasOwnProperty(ne)&&(d=l[ne],d!=null&&cr(r,i,ne,d,l,null))}function w_(r,i,l,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,ne=null,me=null,De=null,Ge=null;for(ze in l){var Je=l[ze];if(l.hasOwnProperty(ze)&&Je!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":me=Je;default:d.hasOwnProperty(ze)||cr(r,i,ze,null,d,Je)}}for(var Fe in d){var ze=d[Fe];if(Je=l[Fe],d.hasOwnProperty(Fe)&&(ze!=null||Je!=null))switch(Fe){case"type":w=ze;break;case"name":v=ze;break;case"checked":De=ze;break;case"defaultChecked":Ge=ze;break;case"value":O=ze;break;case"defaultValue":ne=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(s(137,i));break;default:ze!==Je&&cr(r,i,Fe,ze,d,Je)}}So(r,O,ne,me,De,Ge,w,v);return;case"select":ze=O=ne=Fe=null;for(w in l)if(me=l[w],l.hasOwnProperty(w)&&me!=null)switch(w){case"value":break;case"multiple":ze=me;default:d.hasOwnProperty(w)||cr(r,i,w,null,d,me)}for(v in d)if(w=d[v],me=l[v],d.hasOwnProperty(v)&&(w!=null||me!=null))switch(v){case"value":Fe=w;break;case"defaultValue":ne=w;break;case"multiple":O=w;default:w!==me&&cr(r,i,v,w,d,me)}i=ne,l=O,d=ze,Fe!=null?$s(r,!!l,Fe,!1):!!d!=!!l&&(i!=null?$s(r,!!l,i,!0):$s(r,!!l,l?[]:"",!1));return;case"textarea":ze=Fe=null;for(ne in l)if(v=l[ne],l.hasOwnProperty(ne)&&v!=null&&!d.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:cr(r,i,ne,null,d,v)}for(O in d)if(v=d[O],w=l[O],d.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":Fe=v;break;case"defaultValue":ze=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&cr(r,i,O,v,d,w)}Vc(r,Fe,ze);return;case"option":for(var Dt in l)if(Fe=l[Dt],l.hasOwnProperty(Dt)&&Fe!=null&&!d.hasOwnProperty(Dt))switch(Dt){case"selected":r.selected=!1;break;default:cr(r,i,Dt,null,d,Fe)}for(me in d)if(Fe=d[me],ze=l[me],d.hasOwnProperty(me)&&Fe!==ze&&(Fe!=null||ze!=null))switch(me){case"selected":r.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:cr(r,i,me,Fe,d,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in l)Fe=l[Kt],l.hasOwnProperty(Kt)&&Fe!=null&&!d.hasOwnProperty(Kt)&&cr(r,i,Kt,null,d,Fe);for(De in d)if(Fe=d[De],ze=l[De],d.hasOwnProperty(De)&&Fe!==ze&&(Fe!=null||ze!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(s(137,i));break;default:cr(r,i,De,Fe,d,ze)}return;default:if(Bc(i)){for(var ur in l)Fe=l[ur],l.hasOwnProperty(ur)&&Fe!==void 0&&!d.hasOwnProperty(ur)&&im(r,i,ur,void 0,d,Fe);for(Ge in d)Fe=d[Ge],ze=l[Ge],!d.hasOwnProperty(Ge)||Fe===ze||Fe===void 0&&ze===void 0||im(r,i,Ge,Fe,d,ze);return}}for(var Ae in l)Fe=l[Ae],l.hasOwnProperty(Ae)&&Fe!=null&&!d.hasOwnProperty(Ae)&&cr(r,i,Ae,null,d,Fe);for(Je in d)Fe=d[Je],ze=l[Je],!d.hasOwnProperty(Je)||Fe===ze||Fe==null&&ze==null||cr(r,i,Je,Fe,d,ze)}function Iv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function __(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],w=v.transferSize,O=v.initiatorType,ne=v.duration;if(w&&ne&&Iv(O)){for(O=0,ne=v.responseEnd,d+=1;d<l.length;d++){var me=l[d],De=me.startTime;if(De>ne)break;var Ge=me.transferSize,Je=me.initiatorType;Ge&&Iv(Je)&&(me=me.responseEnd,O+=Ge*(me<ne?1:(ne-De)/(me-De)))}if(--d,i+=8*(w+O)/(v.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var am=null,om=null;function p1(r){return r.nodeType===9?r:r.ownerDocument}function Vv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function lm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var cm=null;function S_(){var r=window.event;return r&&r.type==="popstate"?r===cm?!1:(cm=r,!0):(cm=null,!1)}var Bv=typeof setTimeout=="function"?setTimeout:void 0,N_=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,A_=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(r){return Pv.resolve(null).then(r).catch(C_)}:Bv;function C_(r){setTimeout(function(){throw r})}function fc(r){return r==="head"}function zv(r,i){var l=i,d=0;do{var v=l.nextSibling;if(r.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){r.removeChild(v),yh(i);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Rd(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Rd(l);for(var w=l.firstChild;w;){var O=w.nextSibling,ne=w.nodeName;w[Ze]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=O}}else l==="body"&&Rd(r.ownerDocument.body);l=v}while(l);yh(i)}function qv(r,i){var l=r;r=0;do{var d=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=d}while(l)}function um(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":um(l),Ct(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function T_(r,i,l,d){for(;r.nodeType===1;){var v=l;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Ze])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Ta(r.nextSibling),r===null)break}return null}function k_(r,i,l){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ta(r.nextSibling),r===null))return null;return r}function Uv(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Ta(r.nextSibling),r===null))return null;return r}function hm(r){return r.data==="$?"||r.data==="$~"}function dm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function j_(r,i){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||l.readyState!=="loading")i();else{var d=function(){i(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Ta(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var fm=null;function Hv(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(i===0)return Ta(r.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}r=r.nextSibling}return null}function Wv(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return r;i--}else l!=="/$"&&l!=="/&"||i++}r=r.previousSibling}return null}function Gv(r,i,l){switch(i=p1(l),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Rd(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ct(r)}var ka=new Map,$v=new Set;function m1(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Nl=re.d;re.d={f:E_,r:M_,D:L_,C:O_,L:D_,m:R_,X:V_,S:I_,M:F_};function E_(){var r=Nl.f(),i=a1();return r||i}function M_(r){var i=Mt(r);i!==null&&i.tag===5&&i.type==="form"?ub(i):Nl.r(r)}var gh=typeof document>"u"?null:document;function Yv(r,i,l){var d=gh;if(d&&typeof i=="string"&&i){var v=Lr(i);v='link[rel="'+r+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),$v.has(v)||($v.add(v),r={rel:r,crossOrigin:l,href:i},d.querySelector(v)===null&&(i=d.createElement("link"),Js(i,"link",r),on(i),d.head.appendChild(i)))}}function L_(r){Nl.D(r),Yv("dns-prefetch",r,null)}function O_(r,i){Nl.C(r,i),Yv("preconnect",r,i)}function D_(r,i,l){Nl.L(r,i,l);var d=gh;if(d&&r&&i){var v='link[rel="preload"][as="'+Lr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Lr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Lr(l.imageSizes)+'"]')):v+='[href="'+Lr(r)+'"]';var w=v;switch(i){case"style":w=bh(r);break;case"script":w=vh(r)}ka.has(w)||(r=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:r,as:i},l),ka.set(w,r),d.querySelector(v)!==null||i==="style"&&d.querySelector(Id(w))||i==="script"&&d.querySelector(Vd(w))||(i=d.createElement("link"),Js(i,"link",r),on(i),d.head.appendChild(i)))}}function R_(r,i){Nl.m(r,i);var l=gh;if(l&&r){var d=i&&typeof i.as=="string"?i.as:"script",v='link[rel="modulepreload"][as="'+Lr(d)+'"][href="'+Lr(r)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=vh(r)}if(!ka.has(w)&&(r=y({rel:"modulepreload",href:r},i),ka.set(w,r),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Vd(w)))return}d=l.createElement("link"),Js(d,"link",r),on(d),l.head.appendChild(d)}}}function I_(r,i,l){Nl.S(r,i,l);var d=gh;if(d&&r){var v=un(d).hoistableStyles,w=bh(r);i=i||"default";var O=v.get(w);if(!O){var ne={loading:0,preload:null};if(O=d.querySelector(Id(w)))ne.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},l),(l=ka.get(w))&&pm(r,l);var me=O=d.createElement("link");on(me),Js(me,"link",r),me._p=new Promise(function(De,Ge){me.onload=De,me.onerror=Ge}),me.addEventListener("load",function(){ne.loading|=1}),me.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,g1(O,i,d)}O={type:"stylesheet",instance:O,count:1,state:ne},v.set(w,O)}}}function V_(r,i){Nl.X(r,i);var l=gh;if(l&&r){var d=un(l).hoistableScripts,v=vh(r),w=d.get(v);w||(w=l.querySelector(Vd(v)),w||(r=y({src:r,async:!0},i),(i=ka.get(v))&&mm(r,i),w=l.createElement("script"),on(w),Js(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function F_(r,i){Nl.M(r,i);var l=gh;if(l&&r){var d=un(l).hoistableScripts,v=vh(r),w=d.get(v);w||(w=l.querySelector(Vd(v)),w||(r=y({src:r,async:!0,type:"module"},i),(i=ka.get(v))&&mm(r,i),w=l.createElement("script"),on(w),Js(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function Xv(r,i,l,d){var v=(v=ie.current)?m1(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=bh(l.href),l=un(v).hoistableStyles,d=l.get(i),d||(d={type:"style",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=bh(l.href);var w=un(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(Id(r)))&&!w._p&&(O.instance=w,O.state.loading=5),ka.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ka.set(r,l),w||B_(v,r,l,O.state))),i&&d===null)throw Error(s(528,""));return O}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vh(l),l=un(v).hoistableScripts,d=l.get(i),d||(d={type:"script",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function bh(r){return'href="'+Lr(r)+'"'}function Id(r){return'link[rel="stylesheet"]['+r+"]"}function Zv(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function B_(r,i,l,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Js(i,"link",l),on(i),r.head.appendChild(i))}function vh(r){return'[src="'+Lr(r)+'"]'}function Vd(r){return"script[async]"+r}function Kv(r,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+Lr(l.href)+'"]');if(d)return i.instance=d,on(d),d;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),on(d),Js(d,"style",v),g1(d,l.precedence,r),i.instance=d;case"stylesheet":v=bh(l.href);var w=r.querySelector(Id(v));if(w)return i.state.loading|=4,i.instance=w,on(w),w;d=Zv(l),(v=ka.get(v))&&pm(d,v),w=(r.ownerDocument||r).createElement("link"),on(w);var O=w;return O._p=new Promise(function(ne,me){O.onload=ne,O.onerror=me}),Js(w,"link",d),i.state.loading|=4,g1(w,l.precedence,r),i.instance=w;case"script":return w=vh(l.src),(v=r.querySelector(Vd(w)))?(i.instance=v,on(v),v):(d=l,(v=ka.get(w))&&(d=y({},l),mm(d,v)),r=r.ownerDocument||r,v=r.createElement("script"),on(v),Js(v,"link",d),r.head.appendChild(v),i.instance=v);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,g1(d,l.precedence,r));return i.instance}function g1(r,i,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,O=0;O<d.length;O++){var ne=d[O];if(ne.dataset.precedence===i)w=ne;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(r,i.firstChild))}function pm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function mm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var b1=null;function Qv(r,i,l){if(b1===null){var d=new Map,v=b1=new Map;v.set(l,d)}else v=b1,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(r))return d;for(d.set(r,null),l=l.getElementsByTagName(r),v=0;v<l.length;v++){var w=l[v];if(!(w[Ze]||w[Sn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(i)||"";O=r+O;var ne=d.get(O);ne?ne.push(w):d.set(O,[w])}}return d}function Jv(r,i,l){r=r.ownerDocument||r,r.head.insertBefore(l,i==="title"?r.querySelector("head > title"):null)}function P_(r,i,l){if(l===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function e5(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function z_(r,i,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=bh(d.href),w=i.querySelector(Id(v));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=v1.bind(r),i.then(r,r)),l.state.loading|=4,l.instance=w,on(w);return}w=i.ownerDocument||i,d=Zv(d),(v=ka.get(v))&&pm(d,v),w=w.createElement("link"),on(w);var O=w;O._p=new Promise(function(ne,me){O.onload=ne,O.onerror=me}),Js(w,"link",d),l.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=v1.bind(r),i.addEventListener("load",l),i.addEventListener("error",l))}}var gm=0;function q_(r,i){return r.stylesheets&&r.count===0&&x1(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var d=setTimeout(function(){if(r.stylesheets&&x1(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+i);0<r.imgBytes&&gm===0&&(gm=62500*__());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&x1(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>gm?50:800)+i);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function v1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)x1(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var y1=null;function x1(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,y1=new Map,i.forEach(U_,r),y1=null,v1.call(r))}function U_(r,i){if(!(i.state.loading&4)){var l=y1.get(r);if(l)var d=l.get(null);else{l=new Map,y1.set(r,l);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(l.set(O.dataset.precedence,O),d=O)}d&&l.set(null,d)}v=i.instance,O=v.getAttribute("data-precedence"),w=l.get(O)||d,w===d&&l.set(null,v),l.set(O,v),this.count++,d=v1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),i.state.loading|=4}}var Fd={$$typeof:D,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function H_(r,i,l,d,v,w,O,ne,me){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=we(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=we(0),this.hiddenUpdates=we(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function t5(r,i,l,d,v,w,O,ne,me,De,Ge,Je){return r=new H_(r,i,l,O,me,De,Ge,Je,ne),i=1,w===!0&&(i|=24),w=Vs(3,null,null,i),r.current=w,w.stateNode=r,i=tc(),i.refCount++,r.pooledCache=i,i.refCount++,w.memoizedState={element:d,isDehydrated:l,cache:i},_t(w),r}function n5(r){return r?(r=Cs,r):Cs}function r5(r,i,l,d,v,w){v=n5(v),d.context===null?d.context=v:d.pendingContext=v,d=Zt(i),d.payload={element:l},w=w===void 0?null:w,w!==null&&(d.callback=w),l=yn(r,d,i),l!==null&&(Pi(l,r,i),Zn(l,r,i))}function s5(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function bm(r,i){s5(r,i),(r=r.alternate)&&s5(r,i)}function i5(r){if(r.tag===13||r.tag===31){var i=Ka(r,67108864);i!==null&&Pi(i,r,67108864),bm(r,67108864)}}function a5(r){if(r.tag===13||r.tag===31){var i=aa();i=Yt(i);var l=Ka(r,i);l!==null&&Pi(l,r,i),bm(r,i)}}var w1=!0;function W_(r,i,l,d){var v=Z.T;Z.T=null;var w=re.p;try{re.p=2,vm(r,i,l,d)}finally{re.p=w,Z.T=v}}function G_(r,i,l,d){var v=Z.T;Z.T=null;var w=re.p;try{re.p=8,vm(r,i,l,d)}finally{re.p=w,Z.T=v}}function vm(r,i,l,d){if(w1){var v=ym(d);if(v===null)sm(r,i,d,_1,l),l5(r,d);else if(Y_(v,r,i,l,d))d.stopPropagation();else if(l5(r,d),i&4&&-1<$_.indexOf(r)){for(;v!==null;){var w=Mt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=wt(w.pendingLanes);if(O!==0){var ne=w;for(ne.pendingLanes|=2,ne.entangledLanes|=2;O;){var me=1<<31-xt(O);ne.entanglements[1]|=me,O&=~me}Po(w),(Qn&6)===0&&(s1=tt()+500,Ld(0))}}break;case 31:case 13:ne=Ka(w,2),ne!==null&&Pi(ne,w,2),a1(),bm(w,2)}if(w=ym(d),w===null&&sm(r,i,d,_1,l),w===v)break;v=w}v!==null&&d.stopPropagation()}else sm(r,i,d,null,l)}}function ym(r){return r=el(r),xm(r)}var _1=null;function xm(r){if(_1=null,r=St(r),r!==null){var i=o(r);if(i===null)r=null;else{var l=i.tag;if(l===13){if(r=u(i),r!==null)return r;r=null}else if(l===31){if(r=c(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return _1=r,null}function o5(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bt()){case mt:return 2;case st:return 8;case dt:case gt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var wm=!1,pc=null,mc=null,gc=null,Bd=new Map,Pd=new Map,bc=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l5(r,i){switch(r){case"focusin":case"focusout":pc=null;break;case"dragenter":case"dragleave":mc=null;break;case"mouseover":case"mouseout":gc=null;break;case"pointerover":case"pointerout":Bd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(i.pointerId)}}function zd(r,i,l,d,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},i!==null&&(i=Mt(i),i!==null&&i5(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),r)}function Y_(r,i,l,d,v){switch(i){case"focusin":return pc=zd(pc,r,i,l,d,v),!0;case"dragenter":return mc=zd(mc,r,i,l,d,v),!0;case"mouseover":return gc=zd(gc,r,i,l,d,v),!0;case"pointerover":var w=v.pointerId;return Bd.set(w,zd(Bd.get(w)||null,r,i,l,d,v)),!0;case"gotpointercapture":return w=v.pointerId,Pd.set(w,zd(Pd.get(w)||null,r,i,l,d,v)),!0}return!1}function c5(r){var i=St(r.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){r.blockedOn=i,Jn(r.priority,function(){a5(l)});return}}else if(i===31){if(i=c(l),i!==null){r.blockedOn=i,Jn(r.priority,function(){a5(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function S1(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=ym(r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);Da=d,l.target.dispatchEvent(d),Da=null}else return i=Mt(l),i!==null&&i5(i),r.blockedOn=l,!1;i.shift()}return!0}function u5(r,i,l){S1(r)&&l.delete(i)}function X_(){wm=!1,pc!==null&&S1(pc)&&(pc=null),mc!==null&&S1(mc)&&(mc=null),gc!==null&&S1(gc)&&(gc=null),Bd.forEach(u5),Pd.forEach(u5)}function N1(r,i){r.blockedOn===i&&(r.blockedOn=null,wm||(wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,X_)))}var A1=null;function h5(r){A1!==r&&(A1=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){A1===r&&(A1=null);for(var i=0;i<r.length;i+=3){var l=r[i],d=r[i+1],v=r[i+2];if(typeof d!="function"){if(xm(d||l)===null)continue;break}var w=Mt(l);w!==null&&(r.splice(i,3),i-=3,y0(w,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function yh(r){function i(me){return N1(me,r)}pc!==null&&N1(pc,r),mc!==null&&N1(mc,r),gc!==null&&N1(gc,r),Bd.forEach(i),Pd.forEach(i);for(var l=0;l<bc.length;l++){var d=bc[l];d.blockedOn===r&&(d.blockedOn=null)}for(;0<bc.length&&(l=bc[0],l.blockedOn===null);)c5(l),l.blockedOn===null&&bc.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],w=l[d+1],O=v[an]||null;if(typeof w=="function")O||h5(l);else if(O){var ne=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[an]||null)ne=O.formAction;else if(xm(v)!==null)continue}else ne=O.action;typeof ne=="function"?l[d+1]=ne:(l.splice(d,3),d-=3),h5(l)}}}function d5(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function i(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),v!==null&&(v(),v=null)}}}function _m(r){this._internalRoot=r}C1.prototype.render=_m.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,d=aa();r5(l,d,r,i,null,null)},C1.prototype.unmount=_m.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;r5(r.current,2,null,r,null,null),a1(),i[$n]=null}};function C1(r){this._internalRoot=r}C1.prototype.unstable_scheduleHydration=function(r){if(r){var i=fn();r={blockedOn:null,target:r,priority:i};for(var l=0;l<bc.length&&i!==0&&i<bc[l].priority;l++);bc.splice(l,0,r),l===0&&c5(r)}};var f5=e.version;if(f5!=="19.2.0")throw Error(s(527,f5,"19.2.0"));re.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=f(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var Z_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T1.isDisabled&&T1.supportsFiber)try{ut=T1.inject(Z_),We=T1}catch{}}return Ud.createRoot=function(r,i){if(!a(r))throw Error(s(299));var l=!1,d="",v=xb,w=wb,O=_b;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError)),i=t5(r,1,!1,null,null,l,d,null,v,w,O,d5),r[$n]=i.current,rm(r),new _m(i)},Ud.hydrateRoot=function(r,i,l){if(!a(r))throw Error(s(299));var d=!1,v="",w=xb,O=wb,ne=_b,me=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(ne=l.onRecoverableError),l.formState!==void 0&&(me=l.formState)),i=t5(r,1,!0,i,l??null,d,v,me,w,O,ne,d5),i.context=n5(null),l=i.current,d=aa(),d=Yt(d),v=Zt(d),v.callback=null,yn(l,v,d),l=d,i.current.lanes=l,Ve(i,l),Po(i),r[$n]=i.current,rm(r),new C1(i)},Ud.version="19.2.0",Ud}var S5;function aS(){if(S5)return Am.exports;S5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Am.exports=iS(),Am.exports}var oS=aS(),N5={},lS="@vercel/speed-insights",cS="1.3.1",uS=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function hS(){return typeof window<"u"}function dS(){try{const n="production"}catch{}return"production"}function zx(){return dS()==="development"}function fS(n){return n.scriptSrc?n.scriptSrc:zx()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function pS(n={}){var e;if(!hS()||n.route===null)return null;uS();const t=fS(n);if(document.head.querySelector(`script[src*="${t}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const s=document.createElement("script");return s.src=t,s.defer=!0,s.dataset.sdkn=lS+(n.framework?`/${n.framework}`:""),s.dataset.sdkv=cS,n.sampleRate&&(s.dataset.sampleRate=n.sampleRate.toString()),n.route&&(s.dataset.route=n.route),n.endpoint?s.dataset.endpoint=n.endpoint:n.basePath&&(s.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(s.dataset.dsn=n.dsn),zx()&&n.debug===!1&&(s.dataset.debug="false"),s.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(s),{setRoute:a=>{s.dataset.route=a??void 0}}}function mS(){if(!(typeof process>"u"||typeof N5>"u"))return N5.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function gS(n){ee.useEffect(()=>{var t;n.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=ee.useRef(null);return ee.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const t=pS({framework:n.framework??"react",basePath:n.basePath??mS(),...n});t&&(e.current=t.setRoute)}},[n.route]),null}const A5=n=>{let e;const t=new Set,s=(f,p)=>{const y=typeof f=="function"?f(e):f;if(!Object.is(y,e)){const _=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f))},h=e=n(s,a,c);return c},bS=(n=>n?A5(n):A5),vS=n=>n;function yS(n,e=vS){const t=Cn.useSyncExternalStore(n.subscribe,Cn.useCallback(()=>e(n.getState()),[n,e]),Cn.useCallback(()=>e(n.getInitialState()),[n,e]));return Cn.useDebugValue(t),t}const xS=n=>{const e=bS(n),t=s=>yS(e,s);return Object.assign(t,e),t},wS=(n=>xS);function _S(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var o;const u=h=>h===null?null:JSON.parse(h,void 0),c=(o=t.getItem(a))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const rg=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return rg(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return rg(s)(t)}}}},SS=(n,e)=>(t,s,a)=>{let o={storage:_S(()=>localStorage),partialize:N=>N,version:0,merge:(N,k)=>({...k,...N}),...e},u=!1;const c=new Set,h=new Set;let f=o.storage;if(!f)return n((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...N)},s,a);const p=()=>{const N=o.partialize({...s()});return f.setItem(o.name,{state:N,version:o.version})},y=a.setState;a.setState=(N,k)=>(y(N,k),p());const _=n((...N)=>(t(...N),p()),s,a);a.getInitialState=()=>_;let b;const A=()=>{var N,k;if(!f)return;u=!1,c.forEach(R=>{var D;return R((D=s())!=null?D:_)});const T=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(N=s())!=null?N:_))||void 0;return rg(f.getItem.bind(f))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const D=o.migrate(R.state,R.version);return D instanceof Promise?D.then(V=>[!0,V]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var D;const[V,B]=R;if(b=o.merge(B,(D=s())!=null?D:_),t(b,!0),V)return p()}).then(()=>{T?.(b,void 0),b=s(),u=!0,h.forEach(R=>R(b))}).catch(R=>{T?.(void 0,R)})};return a.persist={setOptions:N=>{o={...o,...N},N.storage&&(f=N.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>A(),hasHydrated:()=>u,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(h.add(N),()=>{h.delete(N)})},o.skipHydration||A(),b||_},NS=SS,oo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],gu=["C","G","D","A","E","B","F#","Db","Ab","Eb","Bb","F"],C5={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#","C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},AS=[{major:"C",ii:"Dm",iii:"Em",diminished:"B"},{major:"G",ii:"Am",iii:"Bm",diminished:"F#"},{major:"D",ii:"Em",iii:"F#m",diminished:"C#"},{major:"A",ii:"Bm",iii:"C#m",diminished:"G#"},{major:"E",ii:"F#m",iii:"G#m",diminished:"D#"},{major:"B",ii:"C#m",iii:"D#m",diminished:"A#"},{major:"F#",ii:"G#m",iii:"A#m",diminished:"E#"},{major:"Db",ii:"Ebm",iii:"Fm",diminished:"C"},{major:"Ab",ii:"Bbm",iii:"Cm",diminished:"G"},{major:"Eb",ii:"Fm",iii:"Gm",diminished:"D"},{major:"Bb",ii:"Cm",iii:"Dm",diminished:"A"},{major:"F",ii:"Gm",iii:"Am",diminished:"E"}],CS={major:"",maj:"",minor:"m",diminished:"",dim:"",augmented:"+",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m75",sus2:"sus2",sus4:"sus4",dominant9:"9",dominant11:"11",dominant13:"13",major9:"maj9",minor9:"m9",add9:"add9",6:"6",m6:"m6","7sus4":"7sus4",dominant7sus4:"7sus4"};function Mh(n){return CS[n]??n}function xu(n){return n.includes("b")&&{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E"}[n]||n}const TS={7:"dominant7",9:"dominant9",11:"dominant11",13:"dominant13",maj7:"major7",maj9:"major9",maj11:"major11",maj13:"major13",6:"major6",add9:"add9",m7:"minor7",m9:"minor9",m11:"minor11",m13:"minor13",m6:"minor6",dim:"diminished",dim7:"diminished7",m7b5:"halfDiminished7","m75":"halfDiminished7",7:"halfDiminished7",sus2:"sus2",sus4:"sus4","7sus4":"dominant7sus4"},kS={major:[0,4,7],minor:[0,3,7],diminished:[0,3,6],augmented:[0,4,8],sus2:[0,2,7],sus4:[0,5,7],major6:[0,4,7,9],minor6:[0,3,7,9],major7:[0,4,7,11],minor7:[0,3,7,10],dominant7:[0,4,7,10],diminished7:[0,3,6,9],halfDiminished7:[0,3,6,10],dominant7sus4:[0,5,7,10],add9:[0,4,7,14],major9:[0,4,7,11,14],minor9:[0,3,7,10,14],dominant9:[0,4,7,10,14],major11:[0,4,7,11,14,17],minor11:[0,3,7,10,14,17],dominant11:[0,4,7,10,14,17],major13:[0,4,7,11,14,21],minor13:[0,3,7,10,14,21],dominant13:[0,4,7,10,14,21]};function la(n,e){const t=xu(n),s=oo.indexOf(t);if(s===-1)return[];const a=TS[e]||e,o=kS[a];return o?o.map(u=>oo[(s+u)%12]):(console.warn(`Unknown chord quality: ${e} (resolved to ${a})`),oo.slice(s,s+1).concat([oo[(s+4)%12],oo[(s+7)%12]]))}function lu(n,e){if(!n||n.length===0)return n;const t=n.length-1,s=Math.max(0,Math.min(e,t));return s===0?n:[...n.slice(s),...n.slice(0,s)]}function jS(n){return Math.max(0,(n?.length||1)-1)}function ES(n){return["Root","1st","2nd","3rd","4th","5th","6th"][n]||`${n}th`}function T5(n,e,t,s){const o=`${n}${e==="major"||e==="maj"?"":e}`;if(!s||s===0||!t||t.length===0)return o;const u=t[s%t.length];return`${o}/${u}`}function sg(n){const e=[0,2,4,5,7,9,11],t=xu(n),s=oo.indexOf(t),a=["F","Bb","Eb","Ab","Db","Gb","Cb"].includes(n);return e.map(o=>{const u=oo[(s+o)%12];return a&&C5[u]&&u.includes("#")?C5[u]:n==="F"&&u==="A#"?"Bb":u})}function qx(n){const e=["G","D","A","E","B","F#","C#"],t=["F","Bb","Eb","Ab","Db","Gb","Cb"],s=e.indexOf(n),a=t.indexOf(n);return s>=0?{sharps:s+1,flats:0}:a>=0?{sharps:0,flats:a+1}:{sharps:0,flats:0}}function Yh(){return{C:"hsl(48, 95%, 58%)",G:"hsl(72, 75%, 50%)",D:"hsl(95, 65%, 48%)",A:"hsl(160, 60%, 45%)",E:"hsl(185, 70%, 50%)",B:"hsl(205, 75%, 55%)","F#":"hsl(235, 60%, 58%)",Gb:"hsl(235, 60%, 58%)",Db:"hsl(265, 55%, 55%)",Ab:"hsl(285, 50%, 52%)",Eb:"hsl(315, 60%, 55%)",Bb:"hsl(350, 70%, 58%)",F:"hsl(28, 85%, 55%)"}}function MS(n,e){const t=xu(n),s=xu(e),a=oo.indexOf(t),o=oo.indexOf(s);if(a===-1||o===-1)return"?";let u=(o-a+12)%12;return{0:"1",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[u]||"?"}function Ln(n){return n&&n.replace(/([A-G])b/g,"$1")}const ei=[];for(let n=0;n<256;++n)ei.push((n+256).toString(16).slice(1));function LS(n,e=0){return(ei[n[e+0]]+ei[n[e+1]]+ei[n[e+2]]+ei[n[e+3]]+"-"+ei[n[e+4]]+ei[n[e+5]]+"-"+ei[n[e+6]]+ei[n[e+7]]+"-"+ei[n[e+8]]+ei[n[e+9]]+"-"+ei[n[e+10]]+ei[n[e+11]]+ei[n[e+12]]+ei[n[e+13]]+ei[n[e+14]]+ei[n[e+15]]).toLowerCase()}let jm;const OS=new Uint8Array(16);function DS(){if(!jm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jm=crypto.getRandomValues.bind(crypto)}return jm(OS)}const RS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),k5={randomUUID:RS};function IS(n,e,t){n=n||{};const s=n.random??n.rng?.()??DS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,LS(s)}function zs(n,e,t){return k5.randomUUID&&!n?k5.randomUUID():IS(n)}function j5(n){if(n.length===0)return"intro";const e=n.map(o=>o.type),t=e[e.length-1],s=e.slice(-4),a=e.reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{});if(t==="intro")return"verse";if(s.length>=4){const[o,u,c,h]=s;if(o==="verse"&&u==="chorus"&&c==="verse"&&h==="chorus"||o==="chorus"&&u==="verse"&&c==="chorus"&&h==="verse")return"bridge"}if(t==="bridge"||t==="verse")return"chorus";if(t==="chorus"){const o=e.includes("bridge"),u=a.chorus||0;return o&&u>=3?"outro":"verse"}return t==="outro"?"verse":t==="pre-chorus"||t==="interlude"||t==="solo"||t==="breakdown"?"chorus":"verse"}const qs=[4,4],Yd=(n=qs)=>{const[e,t]=n;return!e||!t?4:e*(4/t)},du=n=>{const e=Yd(n);return{id:zs(),beats:[{id:zs(),chord:null,duration:e}]}},zo=n=>n?`${n.sectionId}:${n.slotId}`:"",qg=n=>{const e=[];return n.forEach(t=>{t.measures.forEach(s=>{s.beats.forEach(a=>{e.push({sectionId:t.id,slotId:a.id,chord:a.chord??null})})})}),e},cu=(n,e)=>{if(!e)return null;for(const t of n)if(t.id===e.sectionId){for(const s of t.measures)for(const a of s.beats)if(a.id===e.slotId)return a.chord??null}return null},E5=(n,e)=>e?qg(n).findIndex(s=>s.sectionId===e.sectionId&&s.slotId===e.slotId):-1,VS=(n,e,t)=>{const s=qg(n),a=s.findIndex(h=>h.sectionId===e.sectionId&&h.slotId===e.slotId),o=s.findIndex(h=>h.sectionId===t.sectionId&&h.slotId===t.slotId);if(a===-1||o===-1)return[];const[u,c]=a<=o?[a,o]:[o,a];return s.slice(u,c+1).map(({sectionId:h,slotId:f})=>({sectionId:h,slotId:f}))},W1=(n,e)=>e?n.some(t=>t.id===e.sectionId&&t.measures.some(s=>s.beats.some(a=>a.id===e.slotId))):!1,uu=(n,e,t,s,a)=>{const o=e&&t?{sectionId:e,slotId:t}:null,u=s.filter(p=>W1(n,p)),c=W1(n,o),h=u[u.length-1]||(c?o:null),f=a&&W1(n,a);return{selectedSectionId:h?.sectionId??null,selectedSlotId:h?.slotId??null,selectedSlots:u,selectionAnchor:f?a:u[0]??h??null}},ig=100,Xd=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),Ar=n=>{const e=Xd(n.currentSong),t=[...n.historyPast,e].slice(-ig);return{historyPast:t,historyFuture:[],canUndo:t.length>0,canRedo:!1}},M5=(n,e,t,s,a)=>{const o=uu(n.sections,e,t,s,a),u=o.selectedSectionId&&o.selectedSlotId?{sectionId:o.selectedSectionId,slotId:o.selectedSlotId}:null,c=u?cu(n.sections,u):null;return{...o,selectedChord:c}},FS=(n,e,t)=>{let s=!1;for(const a of n)for(const o of a.measures)for(const u of o.beats){if(s)return{sectionId:a.id,slotId:u.id};a.id===e&&u.id===t&&(s=!0)}return null},Hd={id:"default",title:"Untitled Song",artist:"",key:"C",tempo:120,timeSignature:[4,4],sections:[{id:"verse-1",name:"Verse 1",type:"verse",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))},{id:"chorus-1",name:"Chorus",type:"chorus",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))}],notes:"",createdAt:new Date,updatedAt:new Date},Em={root:"C",quality:"major",numeral:"I",notes:["C","E","G"],symbol:"C"},Ht=wS()(NS(n=>({currentSong:Hd,historyPast:[],historyFuture:[],canUndo:!1,canRedo:!1,selectedKey:"C",wheelRotation:0,wheelMode:"fixed",chordPanelVisible:!0,timelineVisible:!0,songMapVisible:!1,songInfoModalVisible:!1,collapsedSections:{},chordPanelGuitarExpanded:!1,chordPanelVoicingsExpanded:!1,chordPanelAttention:!1,selectedChord:Em,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,isPlaying:!1,playingSectionId:null,playingSlotId:null,isLooping:!1,tempo:120,volume:.8,instrument:"piano",isMuted:!1,setKey:(e,t)=>n(s=>{if(s.wheelMode==="rotating"&&!t?.skipRotation){const a=gu.indexOf(e);if(a!==-1){const o=s.wheelRotation,c=-(a*30)-o,h=c-360*Math.round(c/360);return{selectedKey:e,wheelRotation:o+h}}}return{selectedKey:e}}),rotateWheel:e=>n(t=>({wheelRotation:t.wheelMode==="rotating"?t.wheelRotation+(e==="cw"?-30:30):0})),toggleWheelMode:()=>n(e=>{const t=e.wheelMode==="rotating"?"fixed":"rotating";let s=0;if(t==="rotating"){const a=gu.indexOf(e.selectedKey);a!==-1&&(s=-(a*30))}return{wheelMode:t,wheelRotation:s}}),toggleChordPanel:()=>n(e=>({chordPanelVisible:!e.chordPanelVisible})),toggleTimeline:()=>n(e=>({timelineVisible:!e.timelineVisible})),openTimeline:()=>n(e=>{if(typeof window<"u"&&window.dispatchEvent(new CustomEvent("openMobileTimeline")),!e.selectedSectionId||!e.selectedSlotId){const t=e.currentSong.sections;if(t.length>0){const s=e.selectedSectionId&&t.find(a=>a.id===e.selectedSectionId)||t[0];if(s.measures.length>0&&s.measures[0].beats.length>0){const a=s.measures[0].beats[0],o={sectionId:s.id,slotId:a.id},u=a.chord??null;return{timelineVisible:!0,selectedSectionId:s.id,selectedSlotId:a.id,selectedSlots:[o],selectionAnchor:o,selectedChord:u}}}}return{timelineVisible:!0}}),toggleSongMap:e=>n(t=>({songMapVisible:e!==void 0?e:!t.songMapVisible})),toggleSongInfoModal:e=>n(t=>({songInfoModalVisible:e!==void 0?e:!t.songInfoModalVisible})),toggleSectionCollapsed:e=>n(t=>{const s={...t.collapsedSections,[e]:!t.collapsedSections?.[e]};return s[e]||delete s[e],{collapsedSections:s}}),setChordPanelGuitarExpanded:e=>n({chordPanelGuitarExpanded:e}),setChordPanelVoicingsExpanded:e=>n({chordPanelVoicingsExpanded:e}),pulseChordPanel:()=>{n({chordPanelAttention:!0}),setTimeout(()=>n({chordPanelAttention:!1}),600)},setSelectedChord:e=>n({selectedChord:e}),setSelectedSlot:(e,t)=>n(s=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,selectedChord:null};const a={sectionId:e,slotId:t},o=cu(s.currentSong.sections,a);return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[a],selectionAnchor:a,selectedChord:o??null}}),selectSlotOnly:(e,t)=>n(()=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null};const s={sectionId:e,slotId:t};return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[s],selectionAnchor:s}}),setSelectedSlots:e=>n(t=>{const s=e.filter(Boolean),a=s[s.length-1]??null,o=cu(t.currentSong.sections,a);return{selectedSlots:s,selectedSectionId:a?.sectionId??null,selectedSlotId:a?.slotId??null,selectionAnchor:s[0]??a??null,selectedChord:o??null}}),toggleSlotSelection:(e,t)=>n(s=>{const a=s.selectedSlots.some(f=>f.sectionId===e&&f.slotId===t),o=a?s.selectedSlots.filter(f=>!(f.sectionId===e&&f.slotId===t)):[...s.selectedSlots,{sectionId:e,slotId:t}],u=o[o.length-1]??null,c=cu(s.currentSong.sections,u),h=a&&s.selectionAnchor&&zo(s.selectionAnchor)===zo({sectionId:e,slotId:t});return{selectedSlots:o,selectedSectionId:u?.sectionId??null,selectedSlotId:u?.slotId??null,selectionAnchor:h?o[0]??u??null:s.selectionAnchor??u??null,selectedChord:c??null}}),selectRangeTo:(e,t)=>n(s=>{const a={sectionId:e,slotId:t},o=s.selectionAnchor||s.selectedSlots[s.selectedSlots.length-1]||(s.selectedSectionId&&s.selectedSlotId?{sectionId:s.selectedSectionId,slotId:s.selectedSlotId}:a),c=W1(s.currentSong.sections,o)?o:a,h=VS(s.currentSong.sections,c,a),f=h.length?h:[a],p=cu(s.currentSong.sections,a);return{selectedSlots:f,selectedSectionId:a.sectionId,selectedSlotId:a.slotId,selectionAnchor:c,selectedChord:p??null}}),moveSelection:(e,t,s="move")=>{let a=!1;return n(o=>{const u=qg(o.currentSong.sections),c=E5(o.currentSong.sections,e),h=E5(o.currentSong.sections,t);if(c===-1||h===-1)return{};const p=(o.selectedSlots.length?o.selectedSlots:[e]).map(L=>{const F=u.findIndex(te=>te.sectionId===L.sectionId&&te.slotId===L.slotId);return F>=0?{idx:F,slot:u[F]}:null}).filter(L=>!!L).sort((L,F)=>L.idx-F.idx);if(!p.length)return{};const y=h-c,_=p.map(({idx:L})=>L+y);if(_.some(L=>L<0||L>=u.length))return{};const b=_.map(L=>u[L]);if(p.length===1&&s==="move"){const L=p[0].slot,F=b[0],te=Ar(o),j=o.currentSong.sections.map(Z=>({...Z,measures:Z.measures.map(re=>({...re,beats:re.beats.map(le=>le.id===L.slotId&&Z.id===L.sectionId?{...le,chord:F.chord}:le.id===F.slotId&&Z.id===F.sectionId?{...le,chord:L.chord}:le)}))}));a=!0;const I=o.selectionAnchor&&zo(o.selectionAnchor)===zo(e),X=uu(j,t.sectionId,t.slotId,[{sectionId:F.sectionId,slotId:F.slotId}],I?{sectionId:F.sectionId,slotId:F.slotId}:o.selectionAnchor),P=X.selectedSectionId&&X.selectedSlotId?{sectionId:X.selectedSectionId,slotId:X.selectedSlotId}:null,ae=cu(j,P);return{...te,currentSong:{...o.currentSong,sections:j},selectedSectionId:X.selectedSectionId,selectedSlotId:X.selectedSlotId,selectedSlots:X.selectedSlots,selectionAnchor:X.selectionAnchor,selectedChord:ae??null}}const A=new Map;p.forEach((L,F)=>{A.set(zo(b[F]),L.slot.chord??null)});const N=new Set;s==="move"&&p.forEach((L,F)=>{const te=zo(L.slot),j=zo(b[F]);te!==j&&N.add(te)});const k=Ar(o),T=o.currentSong.sections.map(L=>({...L,measures:L.measures.map(F=>({...F,beats:F.beats.map(te=>{const j=zo({sectionId:L.id,slotId:te.id});return A.has(j)?{...te,chord:A.get(j)??null}:N.has(j)?{...te,chord:null}:te})}))}));a=!0;const R=zo(o.selectionAnchor),D=p.find(L=>zo(L.slot)===R),V=D?{sectionId:b[p.indexOf(D)].sectionId,slotId:b[p.indexOf(D)].slotId}:o.selectionAnchor,B=uu(T,t.sectionId,t.slotId,b.map(L=>({sectionId:L.sectionId,slotId:L.slotId})),V??null),W=B.selectedSectionId&&B.selectedSlotId?{sectionId:B.selectedSectionId,slotId:B.selectedSlotId}:null,H=cu(T,W);return{...k,currentSong:{...o.currentSong,sections:T},selectedSectionId:B.selectedSectionId,selectedSlotId:B.selectedSlotId,selectedSlots:B.selectedSlots,selectionAnchor:B.selectionAnchor,selectedChord:H??null}}),a},selectNextSlotAfter:(e,t)=>{let s=!1;return n(a=>{const o=FS(a.currentSong.sections,e,t);if(!o)return{};const u=a.currentSong.sections.find(c=>c.id===o.sectionId)?.measures.flatMap(c=>c.beats).find(c=>c.id===o.slotId)?.chord??null;return s=!0,{selectedSectionId:o.sectionId,selectedSlotId:o.slotId,selectedChord:u,selectedSlots:[{sectionId:o.sectionId,slotId:o.slotId}],selectionAnchor:{sectionId:o.sectionId,slotId:o.slotId}}}),s},setTempo:e=>n(t=>({...Ar(t),tempo:e,currentSong:{...t.currentSong,tempo:e}})),setVolume:e=>n({volume:e}),setInstrument:e=>n({instrument:e}),setIsPlaying:e=>n({isPlaying:e}),setPlayingSlot:(e,t)=>n({playingSectionId:e,playingSlotId:t}),toggleLoop:()=>n(e=>({isLooping:!e.isLooping})),toggleMute:()=>n(e=>({isMuted:!e.isMuted})),setTitle:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,title:e}})),setArtist:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,artist:e}})),setTags:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,tags:e}})),setSongTimeSignature:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,timeSignature:e}})),loadSong:e=>n(t=>{const s=e.key||"C",a=e.tempo??Hd.tempo;let o=0;if(t.wheelMode==="rotating"){const c=gu.indexOf(s);c!==-1&&(o=-(c*30))}return{...Ar(t),currentSong:{...e,tempo:a},selectedKey:s,wheelRotation:o,selectedChord:Em,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:a}}),newSong:()=>n(e=>({...Ar(e),currentSong:{...Hd,id:zs(),title:"Untitled Song",createdAt:new Date,updatedAt:new Date,tempo:Hd.tempo,sections:[{id:zs(),name:"Verse 1",type:"verse",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))},{id:zs(),name:"Chorus",type:"chorus",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))}]},selectedKey:"C",wheelRotation:0,selectedChord:Em,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:Hd.tempo})),addSection:e=>n(t=>{const s={id:zs(),name:e.charAt(0).toUpperCase()+e.slice(1),type:e,timeSignature:t.currentSong.timeSignature||qs,measures:Array(4).fill(null).map(()=>du(t.currentSong.timeSignature||qs))};return{...Ar(t),currentSong:{...t.currentSong,sections:[...t.currentSong.sections,s]}}}),addSuggestedSection:()=>n(e=>{const t=j5(e.currentSong.sections),s={id:zs(),name:t.charAt(0).toUpperCase()+t.slice(1),type:t,timeSignature:e.currentSong.timeSignature||qs,measures:Array(4).fill(null).map(()=>du(e.currentSong.timeSignature||qs))};return{...Ar(e),currentSong:{...e.currentSong,sections:[...e.currentSong.sections,s]}}}),addCustomSection:(e,t,s,a)=>n(o=>{const u=o.currentSong.timeSignature||qs,c=Yd(u),h=a?.beatsPerChord??4,f=c/h;let p;a?.totalBars?p=a.totalBars:f>=1?p=Math.ceil(s.length/f):p=s.length*Math.ceil(1/f);const y=[];if(f>=1)for(let k=0;k<p;k++){const T=[];for(let R=0;R<f;R++){const D=Math.floor(k*f+R);T.push({id:zs(),chord:s[D]||null,duration:h})}y.push({id:zs(),beats:T})}else for(let k=0;k<p;k++)y.push({id:zs(),beats:[{id:zs(),chord:s[k]||null,duration:c}]});const _={id:zs(),name:e,type:t,timeSignature:u,measures:y},b=Ar(o),A=y[0]?.beats[0]?.id,N=y[0]?.beats[0]?.chord??null;return{...b,currentSong:{...o.currentSong,sections:[...o.currentSong.sections,_]},selectedSectionId:_.id,selectedSlotId:A??null,selectedSlots:A?[{sectionId:_.id,slotId:A}]:[],selectionAnchor:A?{sectionId:_.id,slotId:A}:null,selectedChord:N}}),getSuggestedSectionType:()=>{const e=Ht.getState();return j5(e.currentSong.sections)},updateSection:(e,t)=>n(s=>({...Ar(s),currentSong:{...s.currentSong,sections:s.currentSong.sections.map(o=>o.id===e?{...o,...t}:o)}})),removeSection:e=>n(t=>{const s=Ar(t),{[e]:a,...o}=t.collapsedSections||{};return{...s,currentSong:{...t.currentSong,sections:t.currentSong.sections.filter(u=>u.id!==e)},collapsedSections:o}}),clearSection:e=>n(t=>{const s=t.currentSong.sections.find(c=>c.id===e);if(!s)return{};if(!s.measures.some(c=>c.beats.some(h=>h.chord!==null)))return{};const o=Ar(t),u=t.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>({...f,chord:null}))}))});return{...o,currentSong:{...t.currentSong,sections:u}}}),duplicateSection:e=>n(t=>{const s=t.currentSong.sections.find(p=>p.id===e);if(!s)return{};const a=Ar(t),o={...s,id:zs(),name:`${s.name} (Copy)`,timeSignature:s.timeSignature||t.currentSong.timeSignature||qs,measures:s.measures.map(p=>({...p,id:zs(),beats:p.beats.map(y=>({...y,id:zs()}))}))},u=t.currentSong.sections.findIndex(p=>p.id===e),c=[...t.currentSong.sections];c.splice(u+1,0,o);const h=o.measures[0]?.beats[0]?.id,f=o.measures[0]?.beats[0]?.chord??null;return{...a,currentSong:{...t.currentSong,sections:c},selectedSectionId:o.id,selectedSlotId:h??null,selectedSlots:h?[{sectionId:o.id,slotId:h}]:[],selectionAnchor:h?{sectionId:o.id,slotId:h}:null,selectedChord:f}}),reorderSections:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,sections:e}})),setSectionMeasures:(e,t)=>n(s=>{const a=Math.max(1,Math.min(32,Math.round(t))),o=s.currentSong.sections.map(h=>{if(h.id!==e)return h;const f=h.timeSignature||s.currentSong.timeSignature||qs;let p=[...h.measures];if(p.length<a)for(;p.length<a;)p.push(du(f));else p.length>a&&(p=p.slice(0,a));return{...h,measures:p}}),u=uu(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Ar(s),currentSong:{...s.currentSong,sections:o},...u}}),setSectionTimeSignature:(e,t)=>n(s=>{const a=s.currentSong.sections.map(c=>{if(c.id!==e)return c;const h=Yd(t);return{...c,timeSignature:t,measures:c.measures.map(f=>({...f,beats:[{id:zs(),chord:null,duration:h}]}))}}),o=uu(a,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Ar(s),currentSong:{...s.currentSong,sections:a},...o}}),setMeasureSubdivision:(e,t,s)=>n(a=>{const o=Math.max(1,Math.min(32,Math.round(s))),u=a.currentSong.sections.map(f=>{if(f.id!==e)return f;const p=f.timeSignature||a.currentSong.timeSignature||qs,y=Yd(p);return{...f,measures:f.measures.map(_=>{if(_.id!==t)return _;const b=y/o,A=Array.from({length:o}).map((N,k)=>{const T=_.beats[k];return{id:T?.id??zs(),chord:T?.chord??null,duration:b}});return{..._,beats:A}})}}),c=uu(u,a.selectedSectionId,a.selectedSlotId,a.selectedSlots,a.selectionAnchor);return{...Ar(a),currentSong:{...a.currentSong,sections:u},...c}}),setSectionSubdivision:(e,t)=>n(s=>{const a=Math.max(1,Math.min(32,Math.round(t))),o=s.currentSong.sections.map(h=>{if(h.id!==e)return h;const f=h.timeSignature||s.currentSong.timeSignature||qs,y=Yd(f)/a;return{...h,measures:h.measures.map(_=>{const b=Array.from({length:a}).map((A,N)=>{const k=_.beats[N];return{id:k?.id??zs(),chord:k?.chord??null,duration:y}});return{..._,beats:b}})}}),u=uu(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Ar(s),currentSong:{...s.currentSong,sections:o},...u}}),addChordToSlot:(e,t,s)=>n(a=>{const o=Ar(a),u=a.currentSong.sections.map(c=>c.id!==t?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>f.id!==s?f:{...f,chord:e})}))});return{...o,currentSong:{...a.currentSong,sections:u}}}),clearSlot:(e,t)=>n(s=>{if(!s.currentSong.sections.some(c=>c.id===e&&c.measures.some(h=>h.beats.some(f=>f.id===t&&f.chord))))return{};const o=Ar(s),u=s.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>f.id!==t?f:{...f,chord:null})}))});return{...o,currentSong:{...s.currentSong,sections:u}}}),clearTimeline:()=>n(e=>{if(!e.currentSong.sections.some(o=>o.measures.some(u=>u.beats.some(c=>c.chord!==null))))return{};const s=Ar(e),a=e.currentSong.sections.map(o=>({...o,measures:o.measures.map(u=>({...u,beats:u.beats.map(c=>({...c,chord:null}))}))}));return{...s,currentSong:{...e.currentSong,sections:a},selectedChord:null}}),moveChord:(e,t,s,a)=>n(o=>{let u=null,c=null;if(o.currentSong.sections.forEach(p=>{p.measures.forEach(y=>{y.beats.forEach(_=>{_.id===t&&(u=_.chord),_.id===a&&(c=_.chord)})})}),!u&&!c)return{};const h=Ar(o),f=o.currentSong.sections.map(p=>({...p,measures:p.measures.map(y=>({...y,beats:y.beats.map(_=>_.id===t?{..._,chord:c}:_.id===a?{..._,chord:u}:_)}))}));return{...h,currentSong:{...o.currentSong,sections:f}}}),undo:()=>n(e=>{if(!e.historyPast.length)return{};const t=e.historyPast[e.historyPast.length-1],s=e.historyPast.slice(0,-1),a=[Xd(e.currentSong),...e.historyFuture].slice(0,ig),o=M5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Xd(t),historyPast:s,historyFuture:a,canUndo:s.length>0,canRedo:a.length>0,tempo:t.tempo??e.tempo,...o}}),redo:()=>n(e=>{if(!e.historyFuture.length)return{};const t=e.historyFuture[0],s=e.historyFuture.slice(1),a=[...e.historyPast,Xd(e.currentSong)].slice(-ig),o=M5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Xd(t),historyPast:a,historyFuture:s,canUndo:a.length>0,canRedo:s.length>0,tempo:t.tempo??e.tempo,...o}})}),{name:"songwriter-wheel-storage",partialize:n=>({currentSong:n.currentSong,tempo:n.tempo,volume:n.volume,instrument:n.instrument,isMuted:n.isMuted})}));function Nc(n,e,t,s){const a=(s-90)*Math.PI/180;return{x:n+t*Math.cos(a),y:e+t*Math.sin(a)}}function BS(n,e,t,s,a){const o=Nc(n,e,t,s),u=Nc(n,e,t,a),c=a-s<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,c,1,u.x,u.y].join(" ")}function PS(n,e,t,s,a,o){const u=Nc(n,e,s,o),c=Nc(n,e,s,a),h=Nc(n,e,t,o),f=Nc(n,e,t,a),p=o-a<=180?"0":"1";return["M",u.x,u.y,"A",s,s,0,p,0,c.x,c.y,"L",f.x,f.y,"A",t,t,0,p,1,h.x,h.y,"Z"].join(" ")}function Ux(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=Ux(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Vt(){for(var n,e,t=0,s="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=Ux(n))&&(s&&(s+=" "),s+=e);return s}const Hx="15.1.22",L5=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),O5=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),ag=(n,e)=>({startTime:e,type:"setValue",value:n}),Wx=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Gx=(n,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-n)/a),Ch=n=>n.type==="exponentialRampToValue",sp=n=>n.type==="linearRampToValue",_c=n=>Ch(n)||sp(n),Ug=n=>n.type==="setValue",Tl=n=>n.type==="setValueCurve",ip=(n,e,t,s)=>{const a=n[e];return a===void 0?s:_c(a)||Ug(a)?a.value:Tl(a)?a.values[a.values.length-1]:Gx(t,ip(n,e-1,a.startTime,s),a)},D5=(n,e,t,s,a)=>t===void 0?[s.insertTime,a]:_c(t)?[t.endTime,t.value]:Ug(t)?[t.startTime,t.value]:Tl(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,ip(n,e-1,t.startTime,a)],og=n=>n.type==="cancelAndHold",lg=n=>n.type==="cancelScheduledValues",yc=n=>og(n)||lg(n)?n.cancelTime:Ch(n)||sp(n)?n.endTime:n.startTime,R5=(n,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((n-e)/(s-e)):0,I5=(n,e,t,{endTime:s,value:a})=>t+(n-e)/(s-e)*(a-t),zS=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},qS=(n,{duration:e,startTime:t,values:s})=>{const a=(n-t)/e*(s.length-1);return zS(s,a)},j1=n=>n.type==="setTarget";class US{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=yc(e);if(og(e)||lg(e)){const s=this._automationEvents.findIndex(o=>lg(e)&&Tl(o)?o.startTime+o.duration>=t:yc(o)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),og(e)){const o=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&_c(a)){if(o!==void 0&&j1(o))throw new Error("The internal list is malformed.");const u=o===void 0?a.insertTime:Tl(o)?o.startTime+o.duration:yc(o),c=o===void 0?this._defaultValue:Tl(o)?o.values[o.values.length-1]:o.value,h=Ch(a)?R5(t,u,c,a):I5(t,u,c,a),f=Ch(a)?L5(h,t,this._currenTime):O5(h,t,this._currenTime);this._automationEvents.push(f)}if(o!==void 0&&j1(o)&&this._automationEvents.push(ag(this.getValue(t),t)),o!==void 0&&Tl(o)&&o.startTime+o.duration>t){const u=t-o.startTime,c=(o.values.length-1)/o.duration,h=Math.max(2,1+Math.ceil(u*c)),f=u/(h-1)*c,p=o.values.slice(0,h);if(f<1)for(let y=1;y<h;y+=1){const _=f*y%1;p[y]=o.values[y-1]*(1-_)+o.values[y]*_}this._automationEvents[this._automationEvents.length-1]=Wx(p,o.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>yc(u)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&Tl(a)&&yc(a)+a.duration>t)return!1;const o=Ch(e)?L5(e.value,e.endTime,this._currenTime):sp(e)?O5(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(o);else{if(Tl(e)&&t+e.duration>yc(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,o)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>yc(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];j1(a)&&s.unshift(ag(ip(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>yc(u)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,o=this._automationEvents[a];if(o!==void 0&&j1(o)&&(s===void 0||!_c(s)||s.insertTime>e))return Gx(e,ip(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(o!==void 0&&Ug(o)&&(s===void 0||!_c(s)))return o.value;if(o!==void 0&&Tl(o)&&(s===void 0||!_c(s)||o.startTime+o.duration>e))return e<o.startTime+o.duration?qS(e,o):o.values[o.values.length-1];if(o!==void 0&&_c(o)&&(s===void 0||!_c(s)))return o.value;if(s!==void 0&&Ch(s)){const[u,c]=D5(this._automationEvents,a,o,s,this._defaultValue);return R5(e,u,c,s)}if(s!==void 0&&sp(s)){const[u,c]=D5(this._automationEvents,a,o,s,this._defaultValue);return I5(e,u,c,s)}return this._defaultValue}}const HS=n=>({cancelTime:n,type:"cancelAndHold"}),WS=n=>({cancelTime:n,type:"cancelScheduledValues"}),GS=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),$S=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),YS=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),XS=()=>new DOMException("","AbortError"),ZS=n=>(e,t,[s,a,o],u)=>{n(e[a],[t,s,o],c=>c[0]===t&&c[1]===s,u)},KS=n=>(e,t,s)=>{const a=[];for(let o=0;o<s.numberOfInputs;o+=1)a.push(new Set);n.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},QS=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},zh=new WeakSet,$x=new WeakMap,Hg=new WeakMap,Yx=new WeakMap,Wg=new WeakMap,Ip=new WeakMap,Xx=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,Zx={construct(){return Zx}},JS=n=>{try{const e=new Proxy(n,Zx);new e}catch{return!1}return!0},V5=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,F5=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),a=s.match(V5);for(;a!==null;){const o=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());t.push(u),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(V5)}return[t.join(";"),s]},B5=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},P5=n=>{if(!JS(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},e6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>{let b=0;return(A,N,k={credentials:"omit"})=>{const T=p.get(A);if(T!==void 0&&T.has(N))return Promise.resolve();const R=f.get(A);if(R!==void 0){const B=R.get(N);if(B!==void 0)return B}const D=o(A),V=D.audioWorklet===void 0?a(N).then(([B,W])=>{const[H,L]=F5(B,W),F=`${H};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${L}
})})(window,'_AWGS')`;return t(F)}).then(()=>{const B=_._AWGS.pop();if(B===void 0)throw new SyntaxError;s(D.currentTime,D.sampleRate,()=>B(class{},void 0,(W,H)=>{if(W.trim()==="")throw e();const L=ug.get(D);if(L!==void 0){if(L.has(W))throw e();P5(H),B5(H.parameterDescriptors),L.set(W,H)}else P5(H),B5(H.parameterDescriptors),ug.set(D,new Map([[W,H]]))},D.sampleRate,void 0,void 0))}):Promise.all([a(N),Promise.resolve(n(y,y))]).then(([[B,W],H])=>{const L=b+1;b=L;const[F,te]=F5(B,W),P=`${F};((AudioWorkletProcessor,registerProcessor)=>{${te}
})(${H?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${H?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${H?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${L}',class extends AudioWorkletProcessor{process(){return !1}})`,ae=new Blob([P],{type:"application/javascript; charset=utf-8"}),Z=URL.createObjectURL(ae);return D.audioWorklet.addModule(Z,k).then(()=>{if(c(D))return D;const re=u(D);return re.audioWorklet.addModule(Z,k).then(()=>re)}).then(re=>{if(h===null)throw new SyntaxError;try{new h(re,`__sac${L}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Z))});return R===void 0?f.set(A,new Map([[N,V]])):R.set(N,V),V.then(()=>{const B=p.get(A);B===void 0?p.set(A,new Set([N])):B.add(N)}).finally(()=>{const B=f.get(A);B!==void 0&&B.delete(N)}),V}},ho=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Vp=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},Kx=(n,e,t,s)=>{const a=ho(n,e),o=Vp(a,u=>u[0]===t&&u[1]===s);return a.size===0&&n.delete(e),o},gf=n=>ho(Xx,n),qh=n=>{if(zh.has(n))throw new Error("The AudioNode is already stored.");zh.add(n),gf(n).forEach(e=>e(!0))},Qx=n=>"port"in n,bf=n=>{if(!zh.has(n))throw new Error("The AudioNode is not stored.");zh.delete(n),gf(n).forEach(e=>e(!1))},dg=(n,e)=>{!Qx(n)&&e.every(t=>t.size===0)&&bf(n)},t6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>{const b=new WeakMap;return(A,N,k,T,R)=>{const{activeInputs:D,passiveInputs:V}=o(N),{outputs:B}=o(A),W=c(A),H=L=>{const F=h(N),te=h(A);if(L){const j=Kx(V,A,k,T);n(D,A,j,!1),!R&&!y(A)&&t(te,F,k,T),_(N)&&qh(N)}else{const j=s(D,A,k,T);e(V,T,j,!1),!R&&!y(A)&&a(te,F,k,T);const I=u(N);if(I===0)p(N)&&dg(N,D);else{const X=b.get(N);X!==void 0&&clearTimeout(X),b.set(N,setTimeout(()=>{p(N)&&dg(N,D)},I*1e3))}}};return f(B,[N,k,T],L=>L[0]===N&&L[1]===k&&L[2]===T,!0)?(W.add(H),p(A)?n(D,A,[k,T,H],!0):e(V,T,[A,k,H],!0),!0):!1}},n6=n=>(e,t,[s,a,o],u)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[a,t,o]])):n(c,[a,t,o],h=>h[0]===a&&h[1]===t,u)},r6=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},s6=n=>(e,t)=>{n(e).add(t)},i6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},a6=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...i6,...h},y=s(f,p),_=o(f)?e():null;super(c,!1,y,_),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=h,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},di=(n,e)=>n.context===e,o6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},ap=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Yo=()=>new DOMException("","IndexSizeError"),Gg=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Yo():s}})(n.getChannelData)},l6={numberOfChannels:1},c6=(n,e,t,s,a,o,u,c)=>{let h=null;return class Jx{constructor(p){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:_,sampleRate:b}={...l6,...p};h===null&&(h=new a(1,1,44100));const A=s!==null&&e(o,o)?new s({length:y,numberOfChannels:_,sampleRate:b}):h.createBuffer(_,y,b);if(A.numberOfChannels===0)throw t();return typeof A.copyFromChannel!="function"?(u(A),Gg(A)):e(ap,()=>ap(A))||c(A),n.add(A),A}static[Symbol.hasInstance](p){return p!==null&&typeof p=="object"&&Object.getPrototypeOf(p)===Jx.prototype||n.has(p)}}},Ui=-34028234663852886e22,yi=-Ui,jl=n=>zh.has(n),u6={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},h6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...u6,...p},b=a(y,_),A=u(y),N=A?e():null;super(f,!1,b,N),this._audioBufferSourceNodeRenderer=N,this._isBufferNullified=!1,this._isBufferSet=_.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,A,b.playbackRate,yi,Ui)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const p=typeof f=="function"?c(this,f):null;this._nativeAudioBufferSourceNode.onended=p;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===p?f:y}get playbackRate(){return this._playbackRate}start(f=0,p=0,y){if(this._nativeAudioBufferSourceNode.start(f,p,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[f,p]:[f,p,y]),this.context.state!=="closed"){qh(this);const _=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",_),jl(this)&&bf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",_)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},d6=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const h=async(f,p)=>{let y=t(f);const _=di(y,p);if(!_){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=e(p,b),u!==null&&y.start(...u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,f.playbackRate,y.playbackRate):await s(p,f.playbackRate,y.playbackRate),await a(f,p,y),y};return{set start(f){u=f},set stop(f){c=f},render(f,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):h(f,p)}}},f6=n=>"playbackRate"in n,p6=n=>"frequency"in n&&"gain"in n,m6=n=>"offset"in n,g6=n=>!("frequency"in n)&&"gain"in n,b6=n=>"detune"in n&&"frequency"in n&&!("gain"in n),v6=n=>"pan"in n,xi=n=>ho($x,n),vf=n=>ho(Yx,n),fg=(n,e)=>{const{activeInputs:t}=xi(n);t.forEach(a=>a.forEach(([o])=>{e.includes(n)||fg(o,[...e,n])}));const s=f6(n)?[n.playbackRate]:Qx(n)?Array.from(n.parameters.values()):p6(n)?[n.Q,n.detune,n.frequency,n.gain]:m6(n)?[n.offset]:g6(n)?[n.gain]:b6(n)?[n.detune,n.frequency]:v6(n)?[n.pan]:[];for(const a of s){const o=vf(a);o!==void 0&&o.activeInputs.forEach(([u])=>fg(u,e))}jl(n)&&bf(n)},e3=n=>{fg(n.destination,[])},y6=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),x6=(n,e,t,s,a,o,u,c,h)=>class extends n{constructor(p={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new h(p)}catch(A){throw A.code===12&&A.message==="sampleRate is not in range"?t():A}if(y===null)throw s();if(!y6(p.latencyHint))throw new TypeError(`The provided value '${p.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(p.sampleRate!==void 0&&y.sampleRate!==p.sampleRate)throw t();super(y,2);const{latencyHint:_}=p,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:_==="balanced"?512/b:_==="interactive"||_===void 0?256/b:_==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(_*b/128)))*128/b,this._nativeAudioContext=y,h.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const A=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",A)};y.addEventListener("statechange",A)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),e3(this)}))}createMediaElementSource(p){return new a(this,{mediaElement:p})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(p){return new u(this,{mediaStream:p})}createMediaStreamTrackSource(p){return new c(this,{mediaStreamTrack:p})}resume(){return this._state==="suspended"?new Promise((p,y)=>{const _=()=>{this._nativeAudioContext.removeEventListener("statechange",_),this._nativeAudioContext.state==="running"?p():this.resume().then(p,y)};this._nativeAudioContext.addEventListener("statechange",_)}):this._nativeAudioContext.resume().catch(p=>{throw p===void 0||p.code===15?e():p})}suspend(){return this._nativeAudioContext.suspend().catch(p=>{throw p===void 0?e():p})}},w6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_=u(y),b=a(y,p,_),A=_?e(c):null;super(f,!1,b,A),this._isNodeOfNativeOfflineAudioContext=_,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},_6=n=>{const e=new WeakMap,t=async(s,a)=>{const o=a.destination;return e.set(a,o),await n(s,a,o),o};return{render(s,a){const o=e.get(a);return o!==void 0?Promise.resolve(o):t(s,a)}}},S6=(n,e,t,s,a,o,u,c)=>(h,f)=>{const p=f.listener,y=()=>{const B=new Float32Array(1),W=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),H=u(f);let L=!1,F=[0,0,-1,0,1,0],te=[0,0,0];const j=()=>{if(L)return;L=!0;const ae=s(f,256,9,0);ae.onaudioprocess=({inputBuffer:Z})=>{const re=[o(Z,B,0),o(Z,B,1),o(Z,B,2),o(Z,B,3),o(Z,B,4),o(Z,B,5)];re.some((fe,_e)=>fe!==F[_e])&&(p.setOrientation(...re),F=re);const le=[o(Z,B,6),o(Z,B,7),o(Z,B,8)];le.some((fe,_e)=>fe!==te[_e])&&(p.setPosition(...le),te=le)},W.connect(ae)},I=ae=>Z=>{Z!==F[ae]&&(F[ae]=Z,p.setOrientation(...F))},X=ae=>Z=>{Z!==te[ae]&&(te[ae]=Z,p.setPosition(...te))},P=(ae,Z,re)=>{const le=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z});le.connect(W,0,ae),le.start(),Object.defineProperty(le.offset,"defaultValue",{get(){return Z}});const fe=n({context:h},H,le.offset,yi,Ui);return c(fe,"value",_e=>()=>_e.call(fe),_e=>z=>{try{_e.call(fe,z)}catch(E){if(E.code!==9)throw E}j(),H&&re(z)}),fe.cancelAndHoldAtTime=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.cancelAndHoldAtTime),fe.cancelScheduledValues=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.cancelScheduledValues),fe.exponentialRampToValueAtTime=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.exponentialRampToValueAtTime),fe.linearRampToValueAtTime=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.linearRampToValueAtTime),fe.setTargetAtTime=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.setTargetAtTime),fe.setValueAtTime=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.setValueAtTime),fe.setValueCurveAtTime=(_e=>H?()=>{throw a()}:(...z)=>{const E=_e.apply(fe,z);return j(),E})(fe.setValueCurveAtTime),fe};return{forwardX:P(0,0,I(0)),forwardY:P(1,0,I(1)),forwardZ:P(2,-1,I(2)),positionX:P(6,0,X(0)),positionY:P(7,0,X(1)),positionZ:P(8,0,X(2)),upX:P(3,0,I(3)),upY:P(4,1,I(4)),upZ:P(5,0,I(5))}},{forwardX:_,forwardY:b,forwardZ:A,positionX:N,positionY:k,positionZ:T,upX:R,upY:D,upZ:V}=p.forwardX===void 0?y():p;return{get forwardX(){return _},get forwardY(){return b},get forwardZ(){return A},get positionX(){return N},get positionY(){return k},get positionZ(){return T},get upX(){return R},get upY(){return D},get upZ(){return V}}},op=n=>"context"in n,yf=n=>op(n[0]),Au=(n,e,t,s)=>{for(const a of n)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},z5=(n,e,[t,s],a)=>{Au(n,[e,t,s],o=>o[0]===e&&o[1]===t,a)},q5=(n,[e,t,s],a)=>{const o=n.get(e);o===void 0?n.set(e,new Set([[t,s]])):Au(o,[t,s],u=>u[0]===t,a)},Xh=n=>"inputs"in n,lp=(n,e,t,s)=>{if(Xh(e)){const a=e.inputs[s];return n.connect(a,t,0),[a,t,0]}return n.connect(e,t,s),[e,t,s]},t3=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},N6=(n,e,t)=>Vp(n,s=>s[0]===e&&s[1]===t),n3=(n,e)=>{if(!gf(n).delete(e))throw new Error("Missing the expected event listener.")},r3=(n,e,t)=>{const s=ho(n,e),a=Vp(s,o=>o[0]===t);return s.size===0&&n.delete(e),a},cp=(n,e,t,s)=>{Xh(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},kr=n=>ho(Hg,n),sf=n=>ho(Wg,n),wu=n=>cg.has(n),G1=n=>!zh.has(n),U5=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),a=n.createGain(),o=n.createBuffer(1,2,44100),u=o.getChannelData(0);u[0]=1,u[1]=1;const c=n.createBufferSource();c.buffer=o,c.loop=!0,c.connect(s).connect(n.destination),c.connect(a),c.disconnect(a),s.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,p=>p===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(n.destination)},c.start()}}),Mm=(n,e)=>{const t=new Map;for(const s of n)for(const a of s){const o=t.get(a);t.set(a,o===void 0?1:o+1)}t.forEach((s,a)=>e(a,s))},up=n=>"context"in n,A6=n=>{const e=new Map;n.connect=(t=>(s,a=0,o=0)=>{const u=up(s)?t(s,a,o):t(s,a),c=e.get(s);return c===void 0?e.set(s,[{input:o,output:a}]):c.every(h=>h.input!==o||h.output!==a)&&c.push({input:o,output:a}),u})(n.connect.bind(n)),n.disconnect=(t=>(s,a,o)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[u,c]of e){const h=c.filter(f=>f.output!==s);h.length===0?e.delete(u):e.set(u,h)}else if(e.has(s))if(a===void 0)e.delete(s);else{const u=e.get(s);if(u!==void 0){const c=u.filter(h=>h.output!==a&&(h.input!==o||o===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[u,c]of e)c.forEach(h=>{up(u)?n.connect(u,h.output,h.input):n.connect(u,h.output)})})(n.disconnect)},C6=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=vf(e),{outputs:u}=xi(n),c=gf(n),h=f=>{const p=kr(n),y=sf(e);if(f){const _=r3(o,n,t);z5(a,n,_,!1),!s&&!wu(n)&&p.connect(y,t)}else{const _=N6(a,n,t);q5(o,_,!1),!s&&!wu(n)&&p.disconnect(y,t)}};return Au(u,[e,t],f=>f[0]===e&&f[1]===t,!0)?(c.add(h),jl(n)?z5(a,n,[t,h],!0):q5(o,[n,t,h],!0),!0):!1},T6=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=xi(e),u=t3(a[s],n,t);return u===null?[Kx(o,n,t,s)[2],!1]:[u[2],!0]},k6=(n,e,t)=>{const{activeInputs:s,passiveInputs:a}=vf(e),o=t3(s,n,t);return o===null?[r3(a,n,t)[1],!1]:[o[2],!0]},$g=(n,e,t,s,a)=>{const[o,u]=T6(n,t,s,a);if(o!==null&&(n3(n,o),u&&!e&&!wu(n)&&cp(kr(n),kr(t),s,a)),jl(t)){const{activeInputs:c}=xi(t);dg(t,c)}},Yg=(n,e,t,s)=>{const[a,o]=k6(n,t,s);a!==null&&(n3(n,a),o&&!e&&!wu(n)&&kr(n).disconnect(sf(t),s))},j6=(n,e)=>{const t=xi(n),s=[];for(const a of t.outputs)yf(a)?$g(n,e,...a):Yg(n,e,...a),s.push(a[0]);return t.outputs.clear(),s},E6=(n,e,t)=>{const s=xi(n),a=[];for(const o of s.outputs)o[1]===t&&(yf(o)?$g(n,e,...o):Yg(n,e,...o),a.push(o[0]),s.outputs.delete(o));return a},M6=(n,e,t,s,a)=>{const o=xi(n);return Array.from(o.outputs).filter(u=>u[0]===t&&(s===void 0||u[1]===s)&&(a===void 0||u[2]===a)).map(u=>(yf(u)?$g(n,e,...u):Yg(n,e,...u),o.outputs.delete(u),u[0]))},L6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,A,N)=>class extends f{constructor(T,R,D,V){super(D),this._context=T,this._nativeAudioNode=D;const B=p(T);y(B)&&t(U5,()=>U5(B,N))!==!0&&A6(D),Hg.set(this,D),Xx.set(this,new Set),T.state!=="closed"&&R&&qh(this),n(this,V,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,R=0,D=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw a();const V=p(this._context),B=A(V);if(_(T)||b(T))throw o();if(op(T)){const L=kr(T);try{const te=lp(this._nativeAudioNode,L,R,D),j=G1(this);(B||j)&&this._nativeAudioNode.disconnect(...te),this.context.state!=="closed"&&!j&&G1(T)&&qh(T)}catch(te){throw te.code===12?o():te}if(e(this,T,R,D,B)){const te=h([this],T);Mm(te,s(B))}return T}const W=sf(T);if(W.name==="playbackRate"&&W.maxValue===1024)throw u();try{this._nativeAudioNode.connect(W,R),(B||G1(this))&&this._nativeAudioNode.disconnect(W,R)}catch(L){throw L.code===12?o():L}if(C6(this,T,R,B)){const L=h([this],T);Mm(L,s(B))}}disconnect(T,R,D){let V;const B=p(this._context),W=A(B);if(T===void 0)V=j6(this,W);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw a();V=E6(this,W,T)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||op(T)&&D!==void 0&&(D<0||D>=T.numberOfInputs))throw a();if(V=M6(this,W,T,R,D),V.length===0)throw o()}for(const H of V){const L=h([this],H);Mm(L,c)}}},O6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>(b,A,N,k=null,T=null)=>{const R=N.value,D=new US(R),V=A?s(D):null,B={get defaultValue(){return R},get maxValue(){return k===null?N.maxValue:k},get minValue(){return T===null?N.minValue:T},get value(){return N.value},set value(W){N.value=W,B.setValueAtTime(W,b.context.currentTime)},cancelAndHoldAtTime(W){if(typeof N.cancelAndHoldAtTime=="function")V===null&&D.flush(b.context.currentTime),D.add(a(W)),N.cancelAndHoldAtTime(W);else{const H=Array.from(D).pop();V===null&&D.flush(b.context.currentTime),D.add(a(W));const L=Array.from(D).pop();N.cancelScheduledValues(W),H!==L&&L!==void 0&&(L.type==="exponentialRampToValue"?N.exponentialRampToValueAtTime(L.value,L.endTime):L.type==="linearRampToValue"?N.linearRampToValueAtTime(L.value,L.endTime):L.type==="setValue"?N.setValueAtTime(L.value,L.startTime):L.type==="setValueCurve"&&N.setValueCurveAtTime(L.values,L.startTime,L.duration))}return B},cancelScheduledValues(W){return V===null&&D.flush(b.context.currentTime),D.add(o(W)),N.cancelScheduledValues(W),B},exponentialRampToValueAtTime(W,H){if(W===0)throw new RangeError;if(!Number.isFinite(H)||H<0)throw new RangeError;const L=b.context.currentTime;return V===null&&D.flush(L),Array.from(D).length===0&&(D.add(f(R,L)),N.setValueAtTime(R,L)),D.add(u(W,H)),N.exponentialRampToValueAtTime(W,H),B},linearRampToValueAtTime(W,H){const L=b.context.currentTime;return V===null&&D.flush(L),Array.from(D).length===0&&(D.add(f(R,L)),N.setValueAtTime(R,L)),D.add(c(W,H)),N.linearRampToValueAtTime(W,H),B},setTargetAtTime(W,H,L){return V===null&&D.flush(b.context.currentTime),D.add(h(W,H,L)),N.setTargetAtTime(W,H,L),B},setValueAtTime(W,H){return V===null&&D.flush(b.context.currentTime),D.add(f(W,H)),N.setValueAtTime(W,H),B},setValueCurveAtTime(W,H,L){const F=W instanceof Float32Array?W:new Float32Array(W);if(y!==null&&y.name==="webkitAudioContext"){const te=H+L,j=b.context.sampleRate,I=Math.ceil(H*j),X=Math.floor(te*j),P=X-I,ae=new Float32Array(P);for(let re=0;re<P;re+=1){const le=(F.length-1)/L*((I+re)/j-H),fe=Math.floor(le),_e=Math.ceil(le);ae[re]=fe===_e?F[fe]:(1-(le-fe))*F[fe]+(1-(_e-le))*F[_e]}V===null&&D.flush(b.context.currentTime),D.add(p(ae,H,L)),N.setValueCurveAtTime(ae,H,L);const Z=X/j;Z<te&&_(B,ae[ae.length-1],Z),_(B,F[F.length-1],te)}else V===null&&D.flush(b.context.currentTime),D.add(p(F,H,L)),N.setValueCurveAtTime(F,H,L);return B}};return t.set(B,N),e.set(B,b),n(B,V),B},D6=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:o}=t;e.setTargetAtTime(a,s,o)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:o}=t;e.setValueCurveAtTime(o,a,s)}else throw new Error("Can't apply an unknown automation.")}});class s3{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const R6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},I6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b)=>class extends e{constructor(N,k,T){var R;const D=c(N),V=h(D),B=p({...R6,...T});_(B);const W=ug.get(D),H=W?.get(k),L=V||D.state!=="closed"?D:(R=u(D))!==null&&R!==void 0?R:D,F=a(L,V?null:N.baseLatency,f,k,H,B),te=V?s(k,B,H):null;super(N,!0,F,te);const j=[];F.parameters.forEach((X,P)=>{const ae=t(this,V,X);j.push([P,ae])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new s3(j),V&&n(D,this);const{activeInputs:I}=o(this);y(F,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(N){const k=typeof N=="function"?b(this,N):null;this._nativeAudioWorkletNode.onprocessorerror=k;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===k?N:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function hp(n,e,t,s,a){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,a);else{const o=n.getChannelData(s);if(e[t].byteLength===0)e[t]=o.slice(a,a+128);else{const u=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const i3=(n,e,t,s,a)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,a):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],a)},dp=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const a=[],o=typeof e=="number"?e:e[s];for(let u=0;u<o;u+=1)a.push(new Float32Array(128));t.push(a)}return t},V6=(n,e)=>{const t=ho(hg,n),s=kr(e);return ho(t,s)},F6=async(n,e,t,s,a,o,u)=>{const c=e===null?Math.ceil(n.context.length/128)*128:e.length,h=s.channelCount*s.numberOfInputs,f=a.reduce((k,T)=>k+T,0),p=f===0?null:t.createBuffer(f,c,t.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const y=xi(n),_=await V6(t,n),b=dp(s.numberOfInputs,s.channelCount),A=dp(s.numberOfOutputs,a),N=Array.from(n.parameters.keys()).reduce((k,T)=>({...k,[T]:new Float32Array(128)}),{});for(let k=0;k<c;k+=128){if(s.numberOfInputs>0&&e!==null)for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<s.channelCount;R+=1)hp(e,b[T],R,R,k);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:T},R)=>{hp(e,N,T,h+R,k)});for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<a[T];R+=1)A[T][R].byteLength===0&&(A[T][R]=new Float32Array(128));try{const T=b.map((D,V)=>y.activeInputs[V].size===0?[]:D),R=u(k/t.sampleRate,t.sampleRate,()=>_.process(T,A,N));if(p!==null)for(let D=0,V=0;D<s.numberOfOutputs;D+=1){for(let B=0;B<a[D];B+=1)i3(p,A[D],B,V+B,k);V+=a[D]}if(!R)break}catch(T){n.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return p},B6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,A,N)=>(k,T,R)=>{const D=new WeakMap;let V=null;const B=async(W,H)=>{let L=p(W),F=null;const te=di(L,H),j=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(y===null){const I=j.reduce((Z,re)=>Z+re,0),X=a(H,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),P=[];for(let Z=0;Z<W.numberOfOutputs;Z+=1)P.push(s(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:j[Z]}));const ae=u(H,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});ae.connect=e.bind(null,P),ae.disconnect=h.bind(null,P),F=[X,P,ae]}else te||(L=new y(H,k));if(D.set(H,F===null?L:F[2]),F!==null){if(V===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=W.channelCount*W.numberOfInputs,le=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,fe=re+le;V=F6(W,fe===0?null:await(async()=>{const z=new _(fe,Math.ceil(W.context.length/128)*128,H.sampleRate),E=[],$=[];for(let ie=0;ie<T.numberOfInputs;ie+=1)E.push(u(z,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),$.push(a(z,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const G=await Promise.all(Array.from(W.parameters.values()).map(async ie=>{const pe=o(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ie.value});return await b(z,ie,pe.offset),pe})),Q=s(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+le)});for(let ie=0;ie<T.numberOfInputs;ie+=1){E[ie].connect($[ie]);for(let pe=0;pe<T.channelCount;pe+=1)$[ie].connect(Q,pe,ie*T.channelCount+pe)}for(const[ie,pe]of G.entries())pe.connect(Q,0,re+ie),pe.start(0);return Q.connect(z.destination),await Promise.all(E.map(ie=>A(W,z,ie))),N(z)})(),H,T,j,R,f)}const I=await V,X=t(H,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[P,ae,Z]=F;I!==null&&(X.buffer=I,X.start(0)),X.connect(P);for(let re=0,le=0;re<W.numberOfOutputs;re+=1){const fe=ae[re];for(let _e=0;_e<j[re];_e+=1)P.connect(fe,le+_e,_e);le+=j[re]}return Z}if(te)for(const[I,X]of W.parameters.entries())await n(H,X,L.parameters.get(I));else for(const[I,X]of W.parameters.entries())await b(H,X,L.parameters.get(I));return await A(W,H,L),L};return{render(W,H){c(H,W);const L=D.get(H);return L!==void 0?Promise.resolve(L):B(W,H)}}},P6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D)=>class extends A{constructor(B,W){super(B,W),this._nativeContext=B,this._audioWorklet=n===void 0?void 0:{addModule:(H,L)=>n(this,H,L)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(B,W,H){return new t({length:W,numberOfChannels:B,sampleRate:H})}createBufferSource(){return new s(this)}createChannelMerger(B=6){return new o(this,{numberOfInputs:B})}createChannelSplitter(B=6){return new u(this,{numberOfOutputs:B})}createConstantSource(){return new c(this)}createConvolver(){return new h(this)}createDelay(B=1){return new p(this,{maxDelayTime:B})}createDynamicsCompressor(){return new y(this)}createGain(){return new _(this)}createIIRFilter(B,W){return new b(this,{feedback:W,feedforward:B})}createOscillator(){return new N(this)}createPanner(){return new k(this)}createPeriodicWave(B,W,H={disableNormalization:!1}){return new T(this,{...H,imag:W,real:B})}createStereoPanner(){return new R(this)}createWaveShaper(){return new D(this)}decodeAudioData(B,W,H){return f(this._nativeContext,B).then(L=>(typeof W=="function"&&W(L),L),L=>{throw typeof H=="function"&&H(L),L})}},z6={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},q6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...z6,...p},b=a(y,_),A=u(y),N=A?t():null;super(f,!1,b,N),this._Q=e(this,A,b.Q,yi,Ui),this._detune=e(this,A,b.detune,1200*Math.log2(yi),-1200*Math.log2(yi)),this._frequency=e(this,A,b.frequency,f.sampleRate/2,0),this._gain=e(this,A,b.gain,40*Math.log10(yi),Ui),this._nativeBiquadFilterNode=b,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,p,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,p,y)}catch(_){throw _.code===11?s():_}if(f.length!==p.length||p.length!==y.length)throw s()}},U6=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(h,y)}return o.set(h,f),p?(await n(h,c.Q,f.Q),await n(h,c.detune,f.detune),await n(h,c.frequency,f.frequency),await n(h,c.gain,f.gain)):(await s(h,c.Q,f.Q),await s(h,c.detune,f.detune),await s(h,c.frequency,f.frequency),await s(h,c.gain,f.gain)),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},H6=(n,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const o=n.get(t);if(o!==void 0)return o;try{const u=s();return u instanceof Promise?(n.set(t,u),u.catch(()=>!1).then(c=>(n.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},W6={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},G6=(n,e,t,s,a)=>class extends n{constructor(u,c){const h=s(u),f={...W6,...c},p=t(h,f),y=a(h)?e():null;super(u,!1,p,y)}},$6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},Y6={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},X6=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p=o({...Y6,...h}),y=t(f,p),_=a(f)?e():null;super(c,!1,y,_)}},Z6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},K6=n=>(e,t,s)=>n(t,e,s),Q6=n=>(e,t,s=0,a=0)=>{const o=e[s];if(o===void 0)throw n();return up(t)?o.connect(t,0,a):o.connect(t,0)},J6=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},eN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},tN=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...eN,...f},_=s(p,y),b=o(p),A=b?t():null;super(h,!1,_,A),this._constantSourceNodeRenderer=A,this._nativeConstantSourceNode=_,this._offset=e(this,b,_.offset,yi,Ui),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeConstantSourceNode.onended=f;const p=this._nativeConstantSourceNode.onended;this._onended=p!==null&&p===f?h:p}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){qh(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),jl(this)&&bf(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},nN=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const h=async(f,p)=>{let y=t(f);const _=di(y,p);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=e(p,b),u!==null&&y.start(u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,f.offset,y.offset):await s(p,f.offset,y.offset),await a(f,p,y),y};return{set start(f){u=f},set stop(f){c=f},render(f,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):h(f,p)}}},rN=n=>e=>(n[0]=e,n[0]),sN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},iN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p={...sN,...h},y=t(f,p),b=a(f)?e():null;super(c,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,p.buffer!==null&&o(this,p.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},aN=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=n(u,f)}return s.set(u,c),Xh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},oN=(n,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(o){throw o.name==="SyntaxError"?n():o}},lN=()=>new DOMException("","DataCloneError"),H5=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(n,[n])}catch{}finally{a()}})},cN=(n,e,t,s,a,o,u,c,h,f,p)=>(y,_)=>{const b=u(y)?y:o(y);if(a.has(_)){const A=t();return Promise.reject(A)}try{a.add(_)}catch{}return e(h,()=>h(b))?b.decodeAudioData(_).then(A=>(H5(_).catch(()=>{}),e(c,()=>c(A))||p(A),n.add(A),A)):new Promise((A,N)=>{const k=async()=>{try{await H5(_)}catch{}},T=R=>{N(R),k()};try{b.decodeAudioData(_,R=>{typeof R.copyFromChannel!="function"&&(f(R),Gg(R)),n.add(R),k().then(()=>A(R))},R=>{T(R===null?s():R)})}catch(R){T(R)}})},uN=(n,e,t,s,a,o,u,c)=>(h,f)=>{const p=e.get(h);if(p===void 0)throw new Error("Missing the expected cycle count.");const y=o(h.context),_=c(y);if(p===f){if(e.delete(h),!_&&u(h)){const b=s(h),{outputs:A}=t(h);for(const N of A)if(yf(N)){const k=s(N[0]);n(b,k,N[1],N[2])}else{const k=a(N[0]);b.connect(k,N[1])}}}else e.set(h,p-f)},hN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},dN=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...hN,...f},_=s(p,y),b=o(p),A=b?t(y.maxDelayTime):null;super(h,!1,_,A),this._delayTime=e(this,b,_.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},fN=(n,e,t,s,a)=>o=>{const u=new WeakMap,c=async(h,f)=>{let p=t(h);const y=di(p,f);if(!y){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,delayTime:p.delayTime.value,maxDelayTime:o};p=e(f,_)}return u.set(f,p),y?await n(f,h.delayTime,p.delayTime):await s(f,h.delayTime,p.delayTime),await a(h,f,p),p};return{render(h,f){const p=u.get(f);return p!==void 0?Promise.resolve(p):c(h,f)}}},pN=n=>(e,t,s,a)=>n(e[a],o=>o[0]===t&&o[1]===s),mN=n=>(e,t)=>{n(e).delete(t)},gN=n=>"delayTime"in n,bN=(n,e,t)=>function s(a,o){const u=op(o)?o:t(n,o);if(gN(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(h=>s([...a,u],h[0])).reduce((h,f)=>h.concat(f),[])},E1=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},vN=n=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(o=>o.disconnect()):typeof t=="number"?E1(n,e,t).disconnect():up(t)?s===void 0?e.forEach(o=>o.disconnect(t)):a===void 0?E1(n,e,s).disconnect(t,0):E1(n,e,s).disconnect(t,0,a):s===void 0?e.forEach(o=>o.disconnect(t)):E1(n,e,s).disconnect(t,0),yN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},xN=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...yN,...p},b=s(y,_),A=u(y),N=A?t():null;super(f,!1,b,N),this._attack=e(this,A,b.attack),this._knee=e(this,A,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,A,b.ratio),this._release=e(this,A,b.release),this._threshold=e(this,A,b.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const p=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=p,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const p=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=p,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},wN=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(h,y)}return o.set(h,f),p?(await n(h,c.attack,f.attack),await n(h,c.knee,f.knee),await n(h,c.ratio,f.ratio),await n(h,c.release,f.release),await n(h,c.threshold,f.threshold)):(await s(h,c.attack,f.attack),await s(h,c.knee,f.knee),await s(h,c.ratio,f.ratio),await s(h,c.release,f.release),await s(h,c.threshold,f.threshold)),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},_N=()=>new DOMException("","EncodingError"),SN=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const a=n.document.head;if(a===null)s(new SyntaxError);else{const o=n.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),h=n.onerror,f=()=>{n.onerror=h,URL.revokeObjectURL(c)};n.onerror=(p,y,_,b,A)=>{if(y===c||y===n.location.href&&_===1&&b===1)return f(),s(A),!1;if(h!==null)return h(p,y,_,b,A)},o.onerror=()=>{f(),s(new SyntaxError)},o.onload=()=>{f(),t()},o.src=c,o.type="module",a.appendChild(o)}}),NN=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let o=this._listeners.get(s);o===void 0&&(o=n(this,s),typeof s=="function"&&this._listeners.set(s,o)),this._nativeEventTarget.addEventListener(t,o,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const o=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,o===void 0?null:o,a)}},AN=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},CN=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},TN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},kN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...TN,...h},y=s(f,p),_=o(f),b=_?t():null;super(c,!1,y,b),this._gain=e(this,_,y.gain,yi,Ui)}get gain(){return this._gain}},jN=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(h,y)}return o.set(h,f),p?await n(h,c.gain,f.gain):await s(h,c.gain,f.gain),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},EN=(n,e)=>t=>e(n,t),MN=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},LN=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},ON=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},DN=n=>e=>n.get(e),Ws=()=>new DOMException("","InvalidStateError"),RN=n=>e=>{const t=n.get(e);if(t===void 0)throw Ws();return t},IN=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},VN=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Fp=()=>new DOMException("","InvalidAccessError"),FN=n=>{n.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw Fp();return e.call(n,t,s,a)})(n.getFrequencyResponse)},BN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},PN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p=a(f),y={...BN,...h},_=e(f,p?null:c.baseLatency,y),b=p?t(y.feedback,y.feedforward):null;super(c,!1,_,b),FN(_),this._nativeIIRFilterNode=_,o(this,1)}getFrequencyResponse(c,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(c,h,f)}},a3=(n,e,t,s,a,o,u,c,h,f,p)=>{const y=f.length;let _=c;for(let b=0;b<y;b+=1){let A=t[0]*f[b];for(let N=1;N<a;N+=1){const k=_-N&h-1;A+=t[N]*o[k],A-=n[N]*u[k]}for(let N=a;N<s;N+=1)A+=t[N]*o[_-N&h-1];for(let N=a;N<e;N+=1)A-=n[N]*u[_-N&h-1];o[_]=f[b],u[_]=A,_=_+1&h-1,p[b]=A}return _},zN=(n,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),o=s instanceof Float64Array?s:new Float64Array(s),u=a.length,c=o.length,h=Math.min(u,c);if(a[0]!==1){for(let A=0;A<u;A+=1)o[A]/=a[0];for(let A=1;A<c;A+=1)a[A]/=a[0]}const f=32,p=new Float32Array(f),y=new Float32Array(f),_=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),b=n.numberOfChannels;for(let A=0;A<b;A+=1){const N=n.getChannelData(A),k=_.getChannelData(A);p.fill(0),y.fill(0),a3(a,u,o,c,h,p,y,0,f,N,k)}return _},qN=(n,e,t,s,a)=>(o,u)=>{const c=new WeakMap;let h=null;const f=async(p,y)=>{let _=null,b=e(p);const A=di(b,y);if(y.createIIRFilter===void 0?_=n(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):A||(b=y.createIIRFilter(u,o)),c.set(y,_===null?b:_),_!==null){if(h===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new t(p.context.destination.channelCount,p.context.length,y.sampleRate);h=(async()=>{await s(p,k,k.destination);const T=await a(k);return zN(T,y,o,u)})()}const N=await h;return _.buffer=N,_.start(0),_}return await s(p,y,b),b};return{render(p,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):f(p,y)}}},UN=(n,e,t,s,a,o)=>u=>(c,h)=>{const f=n.get(c);if(f===void 0){if(!u&&o(c)){const p=s(c),{outputs:y}=t(c);for(const _ of y)if(yf(_)){const b=s(_[0]);e(p,b,_[1],_[2])}else{const b=a(_[0]);p.disconnect(b,_[1])}}n.set(c,h)}else n.set(c,f+h)},HN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},WN=(n,e)=>t=>n.has(t)||e(t),GN=(n,e)=>t=>n.has(t)||e(t),$N=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},YN=n=>e=>n!==null&&e instanceof n,XN=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,ZN=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,KN=(n,e)=>t=>n(t)||e(t),QN=n=>e=>n!==null&&e instanceof n,JN=n=>n!==null&&n.isSecureContext,eA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),h=e(c,u);if(s(c))throw TypeError();super(o,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},tA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},nA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o);if(s(c))throw new TypeError;const h={...tA,...u},f=e(c,h);super(o,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},rA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),h=e(c,u);if(s(c))throw new TypeError;super(o,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},sA=(n,e,t)=>class extends n{constructor(a,o){const u=t(a),c=e(u,o);super(a,!0,c,null)}},iA=(n,e,t,s,a,o)=>class extends t{constructor(c,h){super(c),this._nativeContext=c,Ip.set(this,c),s(c)&&a.set(c,new Set),this._destination=new n(this,h),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const h=typeof c=="function"?o(this,c):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===h?c:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},af=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},aA=(n,e)=>(t,s,a)=>{const o=new Set;return t.connect=(u=>(c,h=0,f=0)=>{const p=o.size===0;if(e(c))return u.call(t,c,h,f),n(o,[c,h,f],y=>y[0]===c&&y[1]===h&&y[2]===f,!0),p&&s(),c;u.call(t,c,h),n(o,[c,h],y=>y[0]===c&&y[1]===h,!0),p&&s()})(t.connect),t.disconnect=(u=>(c,h,f)=>{const p=o.size>0;if(c===void 0)u.apply(t),o.clear();else if(typeof c=="number"){u.call(t,c);for(const _ of o)_[1]===c&&o.delete(_)}else{e(c)?u.call(t,c,h,f):u.call(t,c,h);for(const _ of o)_[0]===c&&(h===void 0||_[1]===h)&&(f===void 0||_[2]===f)&&o.delete(_)}const y=o.size===0;p&&y&&a()})(t.disconnect),t},Fr=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},Os=(n,e)=>{Fr(n,e,"channelCount"),Fr(n,e,"channelCountMode"),Fr(n,e,"channelInterpretation")},W5=n=>typeof n.getFloatTimeDomainData=="function",oA=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},lA=(n,e)=>(t,s)=>{const a=t.createAnalyser();if(Os(a,s),!(s.maxDecibels>s.minDecibels))throw e();return Fr(a,s,"fftSize"),Fr(a,s,"maxDecibels"),Fr(a,s,"minDecibels"),Fr(a,s,"smoothingTimeConstant"),n(W5,()=>W5(a))||oA(a),a},cA=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,ns=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},uA=n=>{n.start=(e=>{let t=!1;return(s=0,a=0,o)=>{if(t)throw Ws();e.call(n,s,a,o),t=!0}})(n.start)},Xg=n=>{n.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,a)})(n.start)},Zg=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},hA=(n,e,t,s,a,o,u,c,h,f,p)=>(y,_)=>{const b=y.createBufferSource();return Os(b,_),ns(b,_,"playbackRate"),Fr(b,_,"buffer"),Fr(b,_,"loop"),Fr(b,_,"loopEnd"),Fr(b,_,"loopStart"),e(t,()=>t(y))||uA(b),e(s,()=>s(y))||h(b),e(a,()=>a(y))||f(b,y),e(o,()=>o(y))||Xg(b),e(u,()=>u(y))||p(b,y),e(c,()=>c(y))||Zg(b),n(y,b),b},dA=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,fA=(n,e)=>(t,s,a)=>{const o=t.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}a&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:s});const u=n(t,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>h=>{c.call(u,h);try{o.channelCount=h}catch(f){if(h>o.maxChannelCount)throw f}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>h=>{c.call(u,h),o.channelCountMode=h}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>h=>{c.call(u,h),o.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>o.maxChannelCount}),u.connect(o),u},pA=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,mA=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},gA=(n,e,t,s,a)=>(o,u,c,h,f,p)=>{if(c!==null)try{const y=new c(o,h,p),_=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>p.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>b,set:A=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof A=="function"?A:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(A=>(...N)=>{if(N[0]==="processorerror"){const k=typeof N[1]=="function"?N[1]:typeof N[1]=="object"&&N[1]!==null&&typeof N[1].handleEvent=="function"?N[1].handleEvent:null;if(k!==null){const T=_.get(N[1]);T!==void 0?N[1]=T:(N[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),k(R)):k(new ErrorEvent(N[0],{...R}))},_.set(k,N[1]))}}return A.call(y,"error",N[1],N[2]),A.call(y,...N)})(y.addEventListener),y.removeEventListener=(A=>(...N)=>{if(N[0]==="processorerror"){const k=_.get(N[1]);k!==void 0&&(_.delete(N[1]),N[1]=k)}return A.call(y,"error",N[1],N[2]),A.call(y,N[0],N[1],N[2])})(y.removeEventListener),p.numberOfOutputs!==0){const A=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(A).connect(o.destination),a(y,()=>A.disconnect(),()=>A.connect(o.destination))}return y}catch(y){throw y.code===11?s():y}if(f===void 0)throw s();return mA(p),e(o,u,f,p)},o3=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),bA=n=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:o})=>{s.close(),a.close(),e(o)},s.onmessageerror=({data:o})=>{s.close(),a.close(),t(o)},a.postMessage(n)}),vA=async(n,e)=>{const t=await bA(e);return new n(t)},yA=(n,e,t,s)=>{let a=hg.get(n);a===void 0&&(a=new WeakMap,hg.set(n,a));const o=vA(t,s);return a.set(e,o),o},xA=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>(b,A,N,k)=>{if(k.numberOfInputs===0&&k.numberOfOutputs===0)throw h();const T=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(T.some(Y=>Y<1))throw h();if(T.length!==k.numberOfOutputs)throw e();if(k.channelCountMode!=="explicit")throw h();const R=k.channelCount*k.numberOfInputs,D=T.reduce((Y,Ie)=>Y+Ie,0),V=N.parameterDescriptors===void 0?0:N.parameterDescriptors.length;if(R+V>6||D>6)throw h();const B=new MessageChannel,W=[],H=[];for(let Y=0;Y<k.numberOfInputs;Y+=1)W.push(u(b,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),H.push(a(b,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const L=[];if(N.parameterDescriptors!==void 0)for(const{defaultValue:Y,maxValue:Ie,minValue:vt,name:et}of N.parameterDescriptors){const Re=o(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k.parameterData[et]!==void 0?k.parameterData[et]:Y===void 0?0:Y});Object.defineProperties(Re.offset,{defaultValue:{get:()=>Y===void 0?0:Y},maxValue:{get:()=>Ie===void 0?yi:Ie},minValue:{get:()=>vt===void 0?Ui:vt}}),L.push(Re)}const F=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+V)}),te=o3(A,b.sampleRate),j=c(b,te,R+V,Math.max(1,D)),I=a(b,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),X=[];for(let Y=0;Y<k.numberOfOutputs;Y+=1)X.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[Y]}));for(let Y=0;Y<k.numberOfInputs;Y+=1){W[Y].connect(H[Y]);for(let Ie=0;Ie<k.channelCount;Ie+=1)H[Y].connect(F,Ie,Y*k.channelCount+Ie)}const P=new s3(N.parameterDescriptors===void 0?[]:N.parameterDescriptors.map(({name:Y},Ie)=>{const vt=L[Ie];return vt.connect(F,0,R+Ie),vt.start(0),[Y,vt.offset]}));F.connect(j);let ae=k.channelInterpretation,Z=null;const re=k.numberOfOutputs===0?[j]:X,le={get bufferSize(){return te},get channelCount(){return k.channelCount},set channelCount(Y){throw t()},get channelCountMode(){return k.channelCountMode},set channelCountMode(Y){throw t()},get channelInterpretation(){return ae},set channelInterpretation(Y){for(const Ie of W)Ie.channelInterpretation=Y;ae=Y},get context(){return j.context},get inputs(){return W},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get onprocessorerror(){return Z},set onprocessorerror(Y){typeof Z=="function"&&le.removeEventListener("processorerror",Z),Z=typeof Y=="function"?Y:null,typeof Z=="function"&&le.addEventListener("processorerror",Z)},get parameters(){return P},get port(){return B.port2},addEventListener(...Y){return j.addEventListener(Y[0],Y[1],Y[2])},connect:n.bind(null,re),disconnect:f.bind(null,re),dispatchEvent(...Y){return j.dispatchEvent(Y[0])},removeEventListener(...Y){return j.removeEventListener(Y[0],Y[1],Y[2])}},fe=new Map;B.port1.addEventListener=(Y=>(...Ie)=>{if(Ie[0]==="message"){const vt=typeof Ie[1]=="function"?Ie[1]:typeof Ie[1]=="object"&&Ie[1]!==null&&typeof Ie[1].handleEvent=="function"?Ie[1].handleEvent:null;if(vt!==null){const et=fe.get(Ie[1]);et!==void 0?Ie[1]=et:(Ie[1]=Re=>{p(b.currentTime,b.sampleRate,()=>vt(Re))},fe.set(vt,Ie[1]))}}return Y.call(B.port1,Ie[0],Ie[1],Ie[2])})(B.port1.addEventListener),B.port1.removeEventListener=(Y=>(...Ie)=>{if(Ie[0]==="message"){const vt=fe.get(Ie[1]);vt!==void 0&&(fe.delete(Ie[1]),Ie[1]=vt)}return Y.call(B.port1,Ie[0],Ie[1],Ie[2])})(B.port1.removeEventListener);let _e=null;Object.defineProperty(B.port1,"onmessage",{get:()=>_e,set:Y=>{typeof _e=="function"&&B.port1.removeEventListener("message",_e),_e=typeof Y=="function"?Y:null,typeof _e=="function"&&(B.port1.addEventListener("message",_e),B.port1.start())}}),N.prototype.port=B.port1;let z=null;yA(b,le,N,k).then(Y=>z=Y);const $=dp(k.numberOfInputs,k.channelCount),G=dp(k.numberOfOutputs,T),Q=N.parameterDescriptors===void 0?[]:N.parameterDescriptors.reduce((Y,{name:Ie})=>({...Y,[Ie]:new Float32Array(128)}),{});let ie=!0;const pe=()=>{k.numberOfOutputs>0&&j.disconnect(I);for(let Y=0,Ie=0;Y<k.numberOfOutputs;Y+=1){const vt=X[Y];for(let et=0;et<T[Y];et+=1)I.disconnect(vt,Ie+et,et);Ie+=T[Y]}},de=new Map;j.onaudioprocess=({inputBuffer:Y,outputBuffer:Ie})=>{if(z!==null){const vt=y(le);for(let et=0;et<te;et+=128){for(let Re=0;Re<k.numberOfInputs;Re+=1)for(let it=0;it<k.channelCount;it+=1)hp(Y,$[Re],it,it,et);N.parameterDescriptors!==void 0&&N.parameterDescriptors.forEach(({name:Re},it)=>{hp(Y,Q,Re,R+it,et)});for(let Re=0;Re<k.numberOfInputs;Re+=1)for(let it=0;it<T[Re];it+=1)G[Re][it].byteLength===0&&(G[Re][it]=new Float32Array(128));try{const Re=$.map((qe,ht)=>{if(vt[ht].size>0)return de.set(ht,te/128),qe;const tt=de.get(ht);return tt===void 0?[]:(qe.every(bt=>bt.every(mt=>mt===0))&&(tt===1?de.delete(ht):de.set(ht,tt-1)),qe)});ie=p(b.currentTime+et/b.sampleRate,b.sampleRate,()=>z.process(Re,G,Q));for(let qe=0,ht=0;qe<k.numberOfOutputs;qe+=1){for(let Te=0;Te<T[qe];Te+=1)i3(Ie,G[qe],Te,ht+Te,et);ht+=T[qe]}}catch(Re){ie=!1,le.dispatchEvent(new ErrorEvent("processorerror",{colno:Re.colno,filename:Re.filename,lineno:Re.lineno,message:Re.message}))}if(!ie){for(let Re=0;Re<k.numberOfInputs;Re+=1){W[Re].disconnect(H[Re]);for(let it=0;it<k.channelCount;it+=1)H[et].disconnect(F,it,Re*k.channelCount+it)}if(N.parameterDescriptors!==void 0){const Re=N.parameterDescriptors.length;for(let it=0;it<Re;it+=1){const qe=L[it];qe.disconnect(F,0,R+it),qe.stop()}}F.disconnect(j),j.onaudioprocess=null,ye?pe():Qe();break}}}};let ye=!1;const Se=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Be=()=>j.connect(Se).connect(b.destination),Qe=()=>{j.disconnect(Se),Se.disconnect()},Xe=()=>{if(ie){Qe(),k.numberOfOutputs>0&&j.connect(I);for(let Y=0,Ie=0;Y<k.numberOfOutputs;Y+=1){const vt=X[Y];for(let et=0;et<T[Y];et+=1)I.connect(vt,Ie+et,et);Ie+=T[Y]}}ye=!0},ot=()=>{ie&&(Be(),pe()),ye=!1};return Be(),_(le,Xe,ot)},l3=(n,e)=>{const t=n.createBiquadFilter();return Os(t,e),ns(t,e,"Q"),ns(t,e,"detune"),ns(t,e,"frequency"),ns(t,e,"gain"),Fr(t,e,"type"),t},wA=(n,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,a),Os(a,s),a},_A=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ws()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Ws()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Ws()}})},xf=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Os(t,e),_A(t),t},SA=(n,e,t,s,a)=>(o,u)=>{if(o.createConstantSource===void 0)return t(o,u);const c=o.createConstantSource();return Os(c,u),ns(c,u,"offset"),e(s,()=>s(o))||Xg(c),e(a,()=>a(o))||Zg(c),n(o,c),c},Zh=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),NA=(n,e,t,s)=>(a,{offset:o,...u})=>{const c=a.createBuffer(1,2,44100),h=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=t(a,{...u,gain:o}),p=c.getChannelData(0);p[0]=1,p[1]=1,h.buffer=c,h.loop=!0;const y={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(A){f.channelCount=A},get channelCountMode(){return f.channelCountMode},set channelCountMode(A){f.channelCountMode=A},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(A){f.channelInterpretation=A},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(A){h.onended=A},addEventListener(...A){return h.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return h.dispatchEvent(A[0])},removeEventListener(...A){return h.removeEventListener(A[0],A[1],A[2])},start(A=0){h.start.call(h,A)},stop(A=0){h.stop.call(h,A)}},_=()=>h.connect(f),b=()=>h.disconnect(f);return n(a,h),s(Zh(y,f),_,b)},AA=(n,e)=>(t,s)=>{const a=t.createConvolver();if(Os(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),Fr(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",o=>()=>o.call(a),o=>u=>{if(u>2)throw n();return o.call(a,u)}),s.channelCountMode==="max"))throw n();return e(a,"channelCountMode",o=>()=>o.call(a),o=>u=>{if(u==="max")throw n();return o.call(a,u)}),a},c3=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Os(t,e),ns(t,e,"delayTime"),t},CA=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(Os(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return ns(s,t,"attack"),ns(s,t,"knee"),ns(s,t,"ratio"),ns(s,t,"release"),ns(s,t,"threshold"),s},Gi=(n,e)=>{const t=n.createGain();return Os(t,e),ns(t,e,"gain"),t},TA=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return Os(a,s),a};function kA(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function jA(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function G5(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=jA(t,e),t[0]+=n[s];return t}const EA=(n,e,t,s)=>(a,o,{channelCount:u,channelCountMode:c,channelInterpretation:h,feedback:f,feedforward:p})=>{const y=o3(o,a.sampleRate),_=f instanceof Float64Array?f:new Float64Array(f),b=p instanceof Float64Array?p:new Float64Array(p),A=_.length,N=b.length,k=Math.min(A,N);if(A===0||A>20)throw s();if(_[0]===0)throw e();if(N===0||N>20)throw s();if(b[0]===0)throw e();if(_[0]!==1){for(let L=0;L<N;L+=1)b[L]/=_[0];for(let L=1;L<A;L+=1)_[L]/=_[0]}const T=t(a,y,u,u);T.channelCount=u,T.channelCountMode=c,T.channelInterpretation=h;const R=32,D=[],V=[],B=[];for(let L=0;L<u;L+=1){D.push(0);const F=new Float32Array(R),te=new Float32Array(R);F.fill(0),te.fill(0),V.push(F),B.push(te)}T.onaudioprocess=L=>{const F=L.inputBuffer,te=L.outputBuffer,j=F.numberOfChannels;for(let I=0;I<j;I+=1){const X=F.getChannelData(I),P=te.getChannelData(I);D[I]=a3(_,A,b,N,k,V[I],B[I],D[I],R,X,P)}};const W=a.sampleRate/2;return Zh({get bufferSize(){return y},get channelCount(){return T.channelCount},set channelCount(L){T.channelCount=L},get channelCountMode(){return T.channelCountMode},set channelCountMode(L){T.channelCountMode=L},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(L){T.channelInterpretation=L},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...L){return T.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return T.dispatchEvent(L[0])},getFrequencyResponse(L,F,te){if(L.length!==F.length||F.length!==te.length)throw n();const j=L.length;for(let I=0;I<j;I+=1){const X=-Math.PI*(L[I]/W),P=[Math.cos(X),Math.sin(X)],ae=G5(b,P),Z=G5(_,P),re=kA(ae,Z);F[I]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),te[I]=Math.atan2(re[1],re[0])}},removeEventListener(...L){return T.removeEventListener(L[0],L[1],L[2])}},T)},MA=(n,e)=>n.createMediaElementSource(e.mediaElement),LA=(n,e)=>{const t=n.createMediaStreamDestination();return Os(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},OA=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((o,u)=>o.id<u.id?-1:o.id>u.id?1:0);const s=t.slice(0,1),a=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},DA=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),o=t.createMediaStreamSource(a);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return o},RA=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,IA=(n,e,t,s,a,o)=>(u,c)=>{const h=u.createOscillator();return Os(h,c),ns(h,c,"detune"),ns(h,c,"frequency"),c.periodicWave!==void 0?h.setPeriodicWave(c.periodicWave):Fr(h,c,"type"),e(t,()=>t(u))||Xg(h),e(s,()=>s(u))||o(h,u),e(a,()=>a(u))||Zg(h),n(u,h),h},VA=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(Os(s,t),ns(s,t,"orientationX"),ns(s,t,"orientationY"),ns(s,t,"orientationZ"),ns(s,t,"positionX"),ns(s,t,"positionY"),ns(s,t,"positionZ"),Fr(s,t,"coneInnerAngle"),Fr(s,t,"coneOuterAngle"),Fr(s,t,"coneOuterGain"),Fr(s,t,"distanceModel"),Fr(s,t,"maxDistance"),Fr(s,t,"panningModel"),Fr(s,t,"refDistance"),Fr(s,t,"rolloffFactor"),s)},FA=(n,e,t,s,a,o,u,c,h,f)=>(p,{coneInnerAngle:y,coneOuterAngle:_,coneOuterGain:b,distanceModel:A,maxDistance:N,orientationX:k,orientationY:T,orientationZ:R,panningModel:D,positionX:V,positionY:B,positionZ:W,refDistance:H,rolloffFactor:L,...F})=>{const te=p.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw u();Os(te,F);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=t(p,{...j,channelInterpretation:"speakers",numberOfInputs:6}),X=s(p,{...F,gain:1}),P=s(p,{...j,gain:1}),ae=s(p,{...j,gain:0}),Z=s(p,{...j,gain:0}),re=s(p,{...j,gain:0}),le=s(p,{...j,gain:0}),fe=s(p,{...j,gain:0}),_e=a(p,256,6,1),z=o(p,{...j,curve:new Float32Array([1,1]),oversample:"none"});let E=[k,T,R],$=[V,B,W];const G=new Float32Array(1);_e.onaudioprocess=({inputBuffer:de})=>{const ye=[h(de,G,0),h(de,G,1),h(de,G,2)];ye.some((Be,Qe)=>Be!==E[Qe])&&(te.setOrientation(...ye),E=ye);const Se=[h(de,G,3),h(de,G,4),h(de,G,5)];Se.some((Be,Qe)=>Be!==$[Qe])&&(te.setPosition(...Se),$=Se)},Object.defineProperty(ae.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(fe.gain,"defaultValue",{get:()=>0});const Q={get bufferSize(){},get channelCount(){return te.channelCount},set channelCount(de){if(de>2)throw u();X.channelCount=de,te.channelCount=de},get channelCountMode(){return te.channelCountMode},set channelCountMode(de){if(de==="max")throw u();X.channelCountMode=de,te.channelCountMode=de},get channelInterpretation(){return te.channelInterpretation},set channelInterpretation(de){X.channelInterpretation=de,te.channelInterpretation=de},get coneInnerAngle(){return te.coneInnerAngle},set coneInnerAngle(de){te.coneInnerAngle=de},get coneOuterAngle(){return te.coneOuterAngle},set coneOuterAngle(de){te.coneOuterAngle=de},get coneOuterGain(){return te.coneOuterGain},set coneOuterGain(de){if(de<0||de>1)throw e();te.coneOuterGain=de},get context(){return te.context},get distanceModel(){return te.distanceModel},set distanceModel(de){te.distanceModel=de},get inputs(){return[X]},get maxDistance(){return te.maxDistance},set maxDistance(de){if(de<0)throw new RangeError;te.maxDistance=de},get numberOfInputs(){return te.numberOfInputs},get numberOfOutputs(){return te.numberOfOutputs},get orientationX(){return P.gain},get orientationY(){return ae.gain},get orientationZ(){return Z.gain},get panningModel(){return te.panningModel},set panningModel(de){te.panningModel=de},get positionX(){return re.gain},get positionY(){return le.gain},get positionZ(){return fe.gain},get refDistance(){return te.refDistance},set refDistance(de){if(de<0)throw new RangeError;te.refDistance=de},get rolloffFactor(){return te.rolloffFactor},set rolloffFactor(de){if(de<0)throw new RangeError;te.rolloffFactor=de},addEventListener(...de){return X.addEventListener(de[0],de[1],de[2])},dispatchEvent(...de){return X.dispatchEvent(de[0])},removeEventListener(...de){return X.removeEventListener(de[0],de[1],de[2])}};y!==Q.coneInnerAngle&&(Q.coneInnerAngle=y),_!==Q.coneOuterAngle&&(Q.coneOuterAngle=_),b!==Q.coneOuterGain&&(Q.coneOuterGain=b),A!==Q.distanceModel&&(Q.distanceModel=A),N!==Q.maxDistance&&(Q.maxDistance=N),k!==Q.orientationX.value&&(Q.orientationX.value=k),T!==Q.orientationY.value&&(Q.orientationY.value=T),R!==Q.orientationZ.value&&(Q.orientationZ.value=R),D!==Q.panningModel&&(Q.panningModel=D),V!==Q.positionX.value&&(Q.positionX.value=V),B!==Q.positionY.value&&(Q.positionY.value=B),W!==Q.positionZ.value&&(Q.positionZ.value=W),H!==Q.refDistance&&(Q.refDistance=H),L!==Q.rolloffFactor&&(Q.rolloffFactor=L),(E[0]!==1||E[1]!==0||E[2]!==0)&&te.setOrientation(...E),($[0]!==0||$[1]!==0||$[2]!==0)&&te.setPosition(...$);const ie=()=>{X.connect(te),n(X,z,0,0),z.connect(P).connect(I,0,0),z.connect(ae).connect(I,0,1),z.connect(Z).connect(I,0,2),z.connect(re).connect(I,0,3),z.connect(le).connect(I,0,4),z.connect(fe).connect(I,0,5),I.connect(_e).connect(p.destination)},pe=()=>{X.disconnect(te),c(X,z,0,0),z.disconnect(P),P.disconnect(I),z.disconnect(ae),ae.disconnect(I),z.disconnect(Z),Z.disconnect(I),z.disconnect(re),re.disconnect(I),z.disconnect(le),le.disconnect(I),z.disconnect(fe),fe.disconnect(I),I.disconnect(_e),_e.disconnect(p.destination)};return f(Zh(Q,te),ie,pe)},BA=n=>(e,{disableNormalization:t,imag:s,real:a})=>{const o=s instanceof Float32Array?s:new Float32Array(s),u=a instanceof Float32Array?a:new Float32Array(a),c=e.createPeriodicWave(u,o,{disableNormalization:t});if(Array.from(s).length<2)throw n();return c},wf=(n,e,t,s)=>n.createScriptProcessor(e,t,s),PA=(n,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const o=t.createStereoPanner();return Os(o,s),ns(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw e()}}),o},zA=(n,e,t,s,a,o)=>{const c=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},p={...f,oversample:"none"},y=(A,N,k,T)=>{const R=new Float32Array(16385),D=new Float32Array(16385);for(let F=0;F<16385;F+=1){const te=F/16384*h;R[F]=Math.cos(te),D[F]=Math.sin(te)}const V=t(A,{...f,gain:0}),B=s(A,{...p,curve:R}),W=s(A,{...p,curve:c}),H=t(A,{...f,gain:0}),L=s(A,{...p,curve:D});return{connectGraph(){N.connect(V),N.connect(W.inputs===void 0?W:W.inputs[0]),N.connect(H),W.connect(k),k.connect(B.inputs===void 0?B:B.inputs[0]),k.connect(L.inputs===void 0?L:L.inputs[0]),B.connect(V.gain),L.connect(H.gain),V.connect(T,0,0),H.connect(T,0,1)},disconnectGraph(){N.disconnect(V),N.disconnect(W.inputs===void 0?W:W.inputs[0]),N.disconnect(H),W.disconnect(k),k.disconnect(B.inputs===void 0?B:B.inputs[0]),k.disconnect(L.inputs===void 0?L:L.inputs[0]),B.disconnect(V.gain),L.disconnect(H.gain),V.disconnect(T,0,0),H.disconnect(T,0,1)}}},_=(A,N,k,T)=>{const R=new Float32Array(16385),D=new Float32Array(16385),V=new Float32Array(16385),B=new Float32Array(16385),W=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>W){const le=(re-W)/(16384-W)*h;R[re]=Math.cos(le),D[re]=Math.sin(le),V[re]=0,B[re]=1}else{const le=re/(16384-W)*h;R[re]=1,D[re]=0,V[re]=Math.cos(le),B[re]=Math.sin(le)}const H=e(A,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),L=t(A,{...f,gain:0}),F=s(A,{...p,curve:R}),te=t(A,{...f,gain:0}),j=s(A,{...p,curve:D}),I=s(A,{...p,curve:c}),X=t(A,{...f,gain:0}),P=s(A,{...p,curve:V}),ae=t(A,{...f,gain:0}),Z=s(A,{...p,curve:B});return{connectGraph(){N.connect(H),N.connect(I.inputs===void 0?I:I.inputs[0]),H.connect(L,0),H.connect(te,0),H.connect(X,1),H.connect(ae,1),I.connect(k),k.connect(F.inputs===void 0?F:F.inputs[0]),k.connect(j.inputs===void 0?j:j.inputs[0]),k.connect(P.inputs===void 0?P:P.inputs[0]),k.connect(Z.inputs===void 0?Z:Z.inputs[0]),F.connect(L.gain),j.connect(te.gain),P.connect(X.gain),Z.connect(ae.gain),L.connect(T,0,0),X.connect(T,0,0),te.connect(T,0,1),ae.connect(T,0,1)},disconnectGraph(){N.disconnect(H),N.disconnect(I.inputs===void 0?I:I.inputs[0]),H.disconnect(L,0),H.disconnect(te,0),H.disconnect(X,1),H.disconnect(ae,1),I.disconnect(k),k.disconnect(F.inputs===void 0?F:F.inputs[0]),k.disconnect(j.inputs===void 0?j:j.inputs[0]),k.disconnect(P.inputs===void 0?P:P.inputs[0]),k.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),F.disconnect(L.gain),j.disconnect(te.gain),P.disconnect(X.gain),Z.disconnect(ae.gain),L.disconnect(T,0,0),X.disconnect(T,0,0),te.disconnect(T,0,1),ae.disconnect(T,0,1)}}},b=(A,N,k,T,R)=>{if(N===1)return y(A,k,T,R);if(N===2)return _(A,k,T,R);throw a()};return(A,{channelCount:N,channelCountMode:k,pan:T,...R})=>{if(k==="max")throw a();const D=n(A,{...R,channelCount:1,channelCountMode:k,numberOfInputs:2}),V=t(A,{...R,channelCount:N,channelCountMode:k,gain:1}),B=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:W,disconnectGraph:H}=b(A,N,V,B,D);Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"maxValue",{get:()=>1}),Object.defineProperty(B.gain,"minValue",{get:()=>-1});const L={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(I){V.channelCount!==I&&(F&&H(),{connectGraph:W,disconnectGraph:H}=b(A,I,V,B,D),F&&W()),V.channelCount=I},get channelCountMode(){return V.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw a();V.channelCountMode=I},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(I){V.channelInterpretation=I},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return B.gain},addEventListener(...I){return V.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return V.dispatchEvent(I[0])},removeEventListener(...I){return V.removeEventListener(I[0],I[1],I[2])}};let F=!1;const te=()=>{W(),F=!0},j=()=>{H(),F=!1};return o(Zh(L,D),te,j)}},qA=(n,e,t,s,a,o,u)=>(c,h)=>{const f=c.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,h);Os(f,h);const p=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(p!==null&&p.length<2)throw e();Fr(f,{curve:p},"curve"),Fr(f,h,"oversample");let y=null,_=!1;return u(f,"curve",N=>()=>N.call(f),N=>k=>(N.call(f,k),_&&(s(k)&&y===null?y=n(c,f):!s(k)&&y!==null&&(y(),y=null)),k)),a(f,()=>{_=!0,s(f.curve)&&(y=n(c,f))},()=>{_=!1,y!==null&&(y(),y=null)})},UA=(n,e,t,s,a)=>(o,{curve:u,oversample:c,...h})=>{const f=o.createWaveShaper(),p=o.createWaveShaper();Os(f,h),Os(p,h);const y=t(o,{...h,gain:1}),_=t(o,{...h,gain:-1}),b=t(o,{...h,gain:1}),A=t(o,{...h,gain:-1});let N=null,k=!1,T=null;const R={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(B){y.channelCount=B,_.channelCount=B,f.channelCount=B,b.channelCount=B,p.channelCount=B,A.channelCount=B},get channelCountMode(){return f.channelCountMode},set channelCountMode(B){y.channelCountMode=B,_.channelCountMode=B,f.channelCountMode=B,b.channelCountMode=B,p.channelCountMode=B,A.channelCountMode=B},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(B){y.channelInterpretation=B,_.channelInterpretation=B,f.channelInterpretation=B,b.channelInterpretation=B,p.channelInterpretation=B,A.channelInterpretation=B},get context(){return f.context},get curve(){return T},set curve(B){if(B!==null&&B.length<2)throw e();if(B===null)f.curve=B,p.curve=B;else{const W=B.length,H=new Float32Array(W+2-W%2),L=new Float32Array(W+2-W%2);H[0]=B[0],L[0]=-B[W-1];const F=Math.ceil((W+1)/2),te=(W+1)/2-1;for(let j=1;j<F;j+=1){const I=j/F*te,X=Math.floor(I),P=Math.ceil(I);H[j]=X===P?B[X]:(1-(I-X))*B[X]+(1-(P-I))*B[P],L[j]=X===P?-B[W-1-X]:-((1-(I-X))*B[W-1-X])-(1-(P-I))*B[W-1-P]}H[F]=W%2===1?B[F-1]:(B[F-2]+B[F-1])/2,f.curve=H,p.curve=L}T=B,k&&(s(T)&&N===null?N=n(o,y):N!==null&&(N(),N=null))},get inputs(){return[y]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(B){f.oversample=B,p.oversample=B},addEventListener(...B){return y.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return y.dispatchEvent(B[0])},removeEventListener(...B){return y.removeEventListener(B[0],B[1],B[2])}};u!==null&&(R.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==R.oversample&&(R.oversample=c);const D=()=>{y.connect(f).connect(b),y.connect(_).connect(p).connect(A).connect(b),k=!0,s(T)&&(N=n(o,y))},V=()=>{y.disconnect(f),f.disconnect(b),y.disconnect(_),_.disconnect(p),p.disconnect(A),A.disconnect(b),k=!1,N!==null&&(N(),N=null)};return a(Zh(R,b),D,V)},wi=()=>new DOMException("","NotSupportedError"),HA={numberOfChannels:1},WA=(n,e,t,s,a)=>class extends n{constructor(u,c,h){let f;if(typeof u=="number"&&c!==void 0&&h!==void 0)f={length:c,numberOfChannels:u,sampleRate:h};else if(typeof u=="object")f=u;else throw new Error("The given parameters are not valid.");const{length:p,numberOfChannels:y,sampleRate:_}={...HA,...f},b=s(y,p,_);e(af,()=>af(b))||b.addEventListener("statechange",(()=>{let A=0;const N=k=>{this._state==="running"&&(A>0?(b.removeEventListener("statechange",N),k.stopImmediatePropagation(),this._waitForThePromiseToSettle(k)):A+=1)};return N})()),super(b,y),this._length=p,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,e3(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},GA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},$A=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...GA,...f},_=t(p,y),b=o(p),A=b?s():null,N=h.sampleRate/2;super(h,!1,_,A),this._detune=e(this,b,_.detune,153600,-153600),this._frequency=e(this,b,_.frequency,N,-N),this._nativeOscillatorNode=_,this._onended=null,this._oscillatorNodeRenderer=A,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeOscillatorNode.onended=f;const p=this._nativeOscillatorNode.onended;this._onended=p!==null&&p===f?h:p}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){qh(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),jl(this)&&bf(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},YA=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null,h=null;const f=async(p,y)=>{let _=t(p);const b=di(_,y);if(!b){const A={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,periodicWave:u===null?void 0:u,type:_.type};_=e(y,A),c!==null&&_.start(c),h!==null&&_.stop(h)}return o.set(y,_),b?(await n(y,p.detune,_.detune),await n(y,p.frequency,_.frequency)):(await s(y,p.detune,_.detune),await s(y,p.frequency,_.frequency)),await a(p,y,_),_};return{set periodicWave(p){u=p},set start(p){c=p},set stop(p){h=p},render(p,y){const _=o.get(y);return _!==void 0?Promise.resolve(_):f(p,y)}}},XA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ZA=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...XA,...f},_=t(p,y),b=o(p),A=b?s():null;super(h,!1,_,A),this._nativePannerNode=_,this._orientationX=e(this,b,_.orientationX,yi,Ui),this._orientationY=e(this,b,_.orientationY,yi,Ui),this._orientationZ=e(this,b,_.orientationZ,yi,Ui),this._positionX=e(this,b,_.positionX,yi,Ui),this._positionY=e(this,b,_.positionY,yi,Ui),this._positionZ=e(this,b,_.positionZ,yi,Ui),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},KA=(n,e,t,s,a,o,u,c,h,f)=>()=>{const p=new WeakMap;let y=null;const _=async(b,A)=>{let N=null,k=o(b);const T={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},R={...T,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},D=di(k,A);if("bufferSize"in k)N=s(A,{...T,gain:1});else if(!D){const V={...R,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=a(A,V)}if(p.set(A,N===null?k:N),N!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=new u(6,b.context.length,A.sampleRate),I=e(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(j.destination),y=(async()=>{const X=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(P,ae)=>{const Z=t(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ae===0?1:0});return await c(j,P,Z.offset),Z}));for(let P=0;P<6;P+=1)X[P].connect(I,0,P),X[P].start(0);return f(j)})()}const V=await y,B=s(A,{...T,gain:1});await h(b,A,B);const W=[];for(let j=0;j<V.numberOfChannels;j+=1)W.push(V.getChannelData(j));let H=[W[0][0],W[1][0],W[2][0]],L=[W[3][0],W[4][0],W[5][0]],F=s(A,{...T,gain:1}),te=a(A,{...R,orientationX:H[0],orientationY:H[1],orientationZ:H[2],positionX:L[0],positionY:L[1],positionZ:L[2]});B.connect(F).connect(te.inputs[0]),te.connect(N);for(let j=128;j<V.length;j+=128){const I=[W[0][j],W[1][j],W[2][j]],X=[W[3][j],W[4][j],W[5][j]];if(I.some((P,ae)=>P!==H[ae])||X.some((P,ae)=>P!==L[ae])){H=I,L=X;const P=j/A.sampleRate;F.gain.setValueAtTime(0,P),F=s(A,{...T,gain:0}),te=a(A,{...R,orientationX:H[0],orientationY:H[1],orientationZ:H[2],positionX:L[0],positionY:L[1],positionZ:L[2]}),F.gain.setValueAtTime(1,P),B.connect(F).connect(te.inputs[0]),te.connect(N)}}return N}return D?(await n(A,b.orientationX,k.orientationX),await n(A,b.orientationY,k.orientationY),await n(A,b.orientationZ,k.orientationZ),await n(A,b.positionX,k.positionX),await n(A,b.positionY,k.positionY),await n(A,b.positionZ,k.positionZ)):(await c(A,b.orientationX,k.orientationX),await c(A,b.orientationY,k.orientationY),await c(A,b.orientationZ,k.orientationZ),await c(A,b.positionX,k.positionX),await c(A,b.positionY,k.positionY),await c(A,b.positionZ,k.positionZ)),Xh(k)?await h(b,A,k.inputs[0]):await h(b,A,k),k};return{render(b,A){const N=p.get(A);return N!==void 0?Promise.resolve(N):_(b,A)}}},QA={disableNormalization:!1},JA=(n,e,t,s)=>class u3{constructor(o,u){const c=e(o),h=s({...QA,...u}),f=n(c,h);return t.add(f),f}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===u3.prototype||t.has(o)}},e8=(n,e)=>(t,s,a)=>(n(s).replay(a),e(s,t,a)),t8=(n,e,t)=>async(s,a,o)=>{const u=n(s);await Promise.all(u.activeInputs.map((c,h)=>Array.from(c).map(async([f,p])=>{const _=await e(f).render(f,a),b=s.context.destination;!t(f)&&(s!==b||!t(s))&&_.connect(o,p,h)})).reduce((c,h)=>[...c,...h],[]))},n8=(n,e,t)=>async(s,a,o)=>{const u=e(s);await Promise.all(Array.from(u.activeInputs).map(async([c,h])=>{const p=await n(c).render(c,a);t(c)||p.connect(o,h)}))},r8=(n,e,t,s)=>a=>n(af,()=>af(a))?Promise.resolve(n(s,s)).then(o=>{if(!o){const u=t(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(o=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{u.disconnect(),o(c.renderedBuffer)},u.connect(a.destination),a.startRendering()}),s8=n=>(e,t)=>{n.set(e,t)},i8=n=>(e,t)=>n.set(e,t),a8=(n,e,t,s,a,o,u,c)=>(h,f)=>t(h).render(h,f).then(()=>Promise.all(Array.from(s(f)).map(p=>t(p).render(p,f)))).then(()=>a(f)).then(p=>(typeof p.copyFromChannel!="function"?(u(p),Gg(p)):e(o,()=>o(p))||c(p),n.add(p),p)),o8={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},l8=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...o8,...h},y=t(f,p),_=o(f),b=_?s():null;super(c,!1,y,b),this._pan=e(this,_,y.pan)}get pan(){return this._pan}},c8=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(h,y)}return o.set(h,f),p?await n(h,c.pan,f.pan):await s(h,c.pan,f.pan),Xh(f)?await a(c,h,f.inputs[0]):await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},u8=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},h8=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let o=!1,u=!1;try{await s.audioWorklet.addModule(a);const c=new n(s,"a",{numberOfOutputs:0}),h=s.createOscillator();c.port.onmessage=()=>o=!0,c.onprocessorerror=()=>u=!0,h.connect(c),h.start(0),await s.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(a)}return o&&!u},d8=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},f8=()=>new DOMException("","UnknownError"),p8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},m8=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...p8,...f},_=t(p,y),A=o(p)?s():null;super(h,!0,_,A),this._isCurveNullified=!1,this._nativeWaveShaperNode=_,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},g8=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=n(u,f)}return s.set(u,c),Xh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},b8=()=>typeof window>"u"?null:window,v8=(n,e)=>t=>{t.copyFromChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<h&&y<p;y+=1)s[y]=f[y+u]},t.copyToChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<h&&y<p;y+=1)f[y+u]=s[y]}},y8=n=>e=>{e.copyFromChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyToChannel)},x8=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",a=>()=>{const o=a.call(e);return o===s?null:o},a=>o=>a.call(e,o===null?s:o))},w8=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const a=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let h=0;h<c;h+=1)a.connect(s,0,h)},()=>a.disconnect(s))},h3=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),d3=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},_f=(n,e,t,s)=>{let a=n;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:o,set:u}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(n,e,{get:t(o),set:s(u)})},_8=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),S8=n=>({...n,channelCount:n.numberOfOutputs}),N8=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},f3=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;f3(n,e,t+1e-7)}},A8=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},C8=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},T8=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Kg=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},p3=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Qg=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},k8=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},j8=n=>{n.start=(e=>(t=0,s=0,a)=>{const o=n.buffer,u=o===null?s:Math.min(o.duration,s);o!==null&&u>o.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,u,a)})(n.start)},m3=(n,e)=>{const t=e.createGain();n.connect(t);const s=(a=>()=>{a.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Zh(n,t),n.stop=(a=>{let o=!1;return(u=0)=>{if(o)try{a.call(n,u)}catch{t.gain.setValueAtTime(0,u)}else a.call(n,u),o=!0}})(n.stop)},Kh=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},E8=ZS(Au),M8=n6(Au),L8=pN(Vp),g3=new WeakMap,O8=LN(g3),bo=H6(new Map,new WeakMap),Go=b8(),b3=lA(bo,Yo),Jg=MN(xi),ti=t8(xi,Jg,wu),D8=o6(b3,kr,ti),yr=RN(Ip),Rl=RA(Go),dr=QN(Rl),v3=new WeakMap,y3=NN(Kh),Sf=dA(Go),e2=YN(Sf),t2=XN(Go),x3=ZN(Go),of=pA(Go),cs=L6(KS($x),t6(E8,M8,lp,L8,cp,xi,O8,gf,kr,Au,jl,wu,G1),bo,UN(cg,cp,xi,kr,sf,jl),Yo,Fp,wi,uN(lp,cg,xi,kr,sf,yr,jl,dr),bN(v3,xi,ho),y3,yr,e2,t2,x3,dr,of),R8=a6(cs,D8,Yo,b3,yr,dr),n2=new WeakSet,$5=cA(Go),w3=rN(new Uint32Array(1)),r2=v8(w3,Yo),s2=y8(w3),_3=c6(n2,bo,wi,$5,Rl,u8($5),r2,s2),Bp=r6(Gi),S3=n8(Jg,vf,wu),Xo=K6(S3),Qh=hA(Bp,bo,A8,C8,T8,Kg,p3,Qg,j8,x8(_f),m3),Zo=e8(ON(vf),S3),I8=d6(Xo,Qh,kr,Zo,ti),vo=O6(QS(Yx),v3,Wg,D6,HS,WS,GS,$S,YS,ag,Wx,Sf,f3),V8=h6(cs,I8,vo,Ws,Qh,yr,dr,Kh),F8=w6(cs,_6,Yo,Ws,fA(Gi,_f),yr,dr,ti),B8=U6(Xo,l3,kr,Zo,ti),Cu=i8(g3),P8=q6(cs,vo,B8,Fp,l3,yr,dr,Cu),Rc=aA(Au,t2),z8=w8(Ws,Rc),Ic=wA(Sf,z8),q8=$6(Ic,kr,ti),U8=G6(cs,q8,Ic,yr,dr),H8=Z6(xf,kr,ti),W8=X6(cs,H8,xf,yr,dr,S8),G8=NA(Bp,Qh,Gi,Rc),Jh=SA(Bp,bo,G8,Kg,Qg),$8=nN(Xo,Jh,kr,Zo,ti),Y8=tN(cs,vo,$8,Jh,yr,dr,Kh),N3=AA(wi,_f),X8=aN(N3,kr,ti),Z8=iN(cs,X8,N3,yr,dr,Cu),K8=fN(Xo,c3,kr,Zo,ti),Q8=dN(cs,vo,K8,c3,yr,dr,Cu),A3=CA(wi),J8=wN(Xo,A3,kr,Zo,ti),eC=xN(cs,vo,J8,A3,wi,yr,dr,Cu),tC=jN(Xo,Gi,kr,Zo,ti),nC=kN(cs,vo,tC,Gi,yr,dr),rC=EA(Fp,Ws,wf,wi),Pp=r8(bo,Gi,wf,d8(Gi,Rl)),sC=qN(Qh,kr,Rl,ti,Pp),iC=TA(rC),aC=PN(cs,iC,sC,yr,dr,Cu),oC=S6(vo,Ic,Jh,wf,wi,h3,dr,_f),C3=new WeakMap,lC=iA(F8,oC,y3,dr,C3,Kh),T3=IA(Bp,bo,Kg,p3,Qg,m3),cC=YA(Xo,T3,kr,Zo,ti),uC=$A(cs,vo,T3,cC,yr,dr,Kh),k3=J6(Qh),hC=UA(k3,Ws,Gi,d3,Rc),zp=qA(k3,Ws,hC,d3,Rc,Sf,_f),dC=FA(lp,Ws,Ic,Gi,wf,zp,wi,cp,h3,Rc),j3=VA(dC),fC=KA(Xo,Ic,Jh,Gi,j3,kr,Rl,Zo,ti,Pp),pC=ZA(cs,vo,j3,fC,yr,dr,Cu),mC=BA(Yo),gC=JA(mC,yr,new WeakSet,N8),bC=zA(Ic,xf,Gi,zp,wi,Rc),E3=PA(bC,wi),vC=c8(Xo,E3,kr,Zo,ti),yC=l8(cs,vo,E3,vC,yr,dr),xC=g8(zp,kr,ti),wC=m8(cs,Ws,zp,xC,yr,dr,Cu),M3=JN(Go),i2=AN(Go),L3=new WeakMap,_C=IN(L3,Rl),SC=M3?e6(bo,wi,SN(Go),i2,CN(XS),yr,_C,dr,of,new WeakMap,new WeakMap,h8(of,Rl),Go):void 0,NC=KN(e2,dr),AC=cN(n2,bo,lN,_N,new WeakSet,yr,NC,ap,af,r2,s2),O3=P6(SC,R8,_3,V8,P8,U8,W8,Y8,Z8,AC,Q8,eC,nC,aC,lC,uC,pC,gC,yC,wC),CC=eA(cs,MA,yr,dr),TC=nA(cs,LA,yr,dr),kC=rA(cs,OA,yr,dr),jC=DA(Ws,dr),EC=sA(cs,jC,yr),MC=x6(O3,Ws,wi,f8,CC,TC,kC,EC,Sf),a2=VN(C3),LC=s6(a2),D3=Q6(Yo),OC=mN(a2),R3=vN(Yo),I3=new WeakMap,DC=EN(I3,ho),RC=xA(D3,Yo,Ws,Ic,xf,Jh,Gi,wf,wi,R3,i2,DC,Rc),IC=gA(Ws,RC,Gi,wi,Rc),VC=B6(Xo,D3,Qh,Ic,xf,Jh,Gi,OC,R3,i2,kr,of,Rl,Zo,ti,Pp),FC=DN(L3),BC=s8(I3),Y5=M3?I6(LC,cs,vo,VC,IC,xi,FC,yr,dr,of,_8,BC,k8,Kh):void 0,PC=oN(wi,Rl),zC=a8(n2,bo,Jg,a2,Pp,ap,r2,s2),qC=WA(O3,bo,Ws,PC,zC),UC=HN(Ip,e2),HC=WN(Hg,t2),WC=GN(Wg,x3),GC=$N(Ip,dr);function Ma(n){return n===void 0}function Rn(n){return n!==void 0}function $C(n){return typeof n=="function"}function Ml(n){return typeof n=="number"}function bu(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function YC(n){return typeof n=="boolean"}function da(n){return Array.isArray(n)}function Ll(n){return typeof n=="string"}function M1(n){return Ll(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function tn(n,e){if(!n)throw new Error(e)}function Ol(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function V3(n){!n.isOffline&&n.state!=="running"&&qp('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let F3=!1,X5=!1;function Z5(n){F3=n}function XC(n){Ma(n)&&F3&&!X5&&(X5=!0,qp("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let B3=console;function ZC(...n){B3.log(...n)}function qp(...n){B3.warn(...n)}function KC(n){return new MC(n)}function QC(n,e,t){return new qC(n,e,t)}const ca=typeof self=="object"?self:null,JC=ca&&(ca.hasOwnProperty("AudioContext")||ca.hasOwnProperty("webkitAudioContext"));function eT(n,e,t){return tn(Rn(Y5),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof ca?.BaseAudioContext?ca?.AudioWorkletNode:Y5)(n,e,t)}function yo(n,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,s);else for(var c=n.length-1;c>=0;c--)(u=n[c])&&(o=(a<3?u(o):a>3?u(e,t,o):u(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function ys(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(p){try{f(s.next(p))}catch(y){u(y)}}function h(p){try{f(s.throw(p))}catch(y){u(y)}}function f(p){p.done?o(p.value):a(p.value).then(c,h)}f((s=s.apply(n,e||[])).next())})}class tT{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function _u(n){return WC(n)}function Cc(n){return HC(n)}function $1(n){return GC(n)}function Sh(n){return UC(n)}function nT(n){return n instanceof _3}function rT(n,e){return n==="value"||_u(e)||Cc(e)||nT(e)}function vu(n,...e){if(!e.length)return n;const t=e.shift();if(bu(n)&&bu(t))for(const s in t)rT(s,t[s])?n[s]=t[s]:bu(t[s])?(n[s]||Object.assign(n,{[s]:{}}),vu(n[s],t[s])):Object.assign(n,{[s]:t[s]});return vu(n,...e)}function sT(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function Qt(n,e,t=[],s){const a={},o=Array.from(e);if(bu(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some(c=>Reflect.has(n,c))||(vu(a,{[s]:o[0]}),t.splice(t.indexOf(s),1),o.shift())),o.length===1&&bu(o[0]))vu(a,o[0]);else for(let u=0;u<t.length;u++)Rn(o[u])&&(a[t[u]]=o[u]);return vu(n,a)}function iT(n){return n.constructor.getDefaults()}function Lh(n,e){return Ma(n)?e:n}function lo(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}class Il{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ca&&this.toString()===ca.TONE_DEBUG_CLASS)&&ZC(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Il.version=Hx;const o2=1e-6;function Uh(n,e){return n>e+o2}function pg(n,e){return Uh(n,e)||ao(n,e)}function fp(n,e){return n+o2<e}function ao(n,e){return Math.abs(n-e)<o2}function aT(n,e,t){return Math.max(Math.min(n,t),e)}class La extends Il{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Qt(La.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(tn(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];tn(pg(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(ao(this._timeline[t].time,e)){for(let s=t;s>=0&&ao(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&pg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let o=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<o;){let u=Math.floor(s+(o-s)/2);const c=this._timeline[u],h=this._timeline[u+1];if(ao(c[t],e)){for(let f=u;f<this._timeline.length;f++){const p=this._timeline[f];if(ao(p[t],e))u=f;else break}return u}else{if(fp(c[t],e)&&Uh(h[t],e))return u;Uh(c[t],e)?o=u:s=u+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),o=this._search(t);return a!==-1&&o!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[o].time===t&&(o-=1),this._iterate(s,a,o)):a===-1&&this._iterate(s,0,o),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&ao(this._timeline[s].time,e)){let a=s;for(let o=s;o>=0&&ao(this._timeline[o].time,e);o--)a=o;this._iterate(o=>{t(o)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const P3=[];function Up(n){P3.push(n)}function oT(n){P3.forEach(e=>e(n))}const z3=[];function Hp(n){z3.push(n)}function lT(n){z3.forEach(e=>e(n))}class Nf extends Il{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{Ma(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(Ma(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Ma(t))this._events[a]=[];else{const o=this._events[a];for(let u=o.length-1;u>=0;u--)o[u]===t&&o.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,o=s.length;a<o;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Nf.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class q3 extends Nf{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let l2=class U3 extends q3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new La,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Qt(U3.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=KC({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new tT(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(oT(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return tn(Sh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return tn(Sh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return tn(Sh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){tn(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){tn(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){tn(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){tn(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return eT(this.rawContext,e,t)}addAudioWorkletModule(e){return ys(this,void 0,void 0,function*(){tn(Rn(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ys(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Sh(this._context)?this._context.resume():Promise.resolve()}close(){return ys(this,void 0,void 0,function*(){Sh(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&lT(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let o=0;o<s.length;o++)s[o]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const o=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:o+t})};return a(),s}};class cT extends q3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ys(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function jr(n,e){da(e)?e.forEach(t=>jr(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function c2(n,e){da(e)?e.forEach(t=>c2(n,t)):Object.defineProperty(n,e,{writable:!0})}const hr=()=>{};class Cr extends Il{constructor(){super(),this.name="ToneAudioBuffer",this.onload=hr;const e=Qt(Cr.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Ll(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:hr,onload:hr,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:co().sampleRate}set(e){return e instanceof Cr?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ys(this,void 0,void 0,function*(){const t=Cr.load(e).then(s=>{this.set(s),this.onload(this)});Cr.downloads.push(t);try{yield t}finally{const s=Cr.downloads.indexOf(t);Cr.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=da(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,o=co(),u=o.createBuffer(s,a,o.sampleRate),c=!t&&s===1?[e]:e;for(let h=0;h<s;h++)u.copyToChannel(c[h],h);return this._buffer=u,this}toMono(e){if(Ml(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const o=this.toArray(a);for(let u=0;u<o.length;u++)t[u]+=o[u]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(Ml(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){tn(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);tn(s<a,"The start time must be less than the end time");const o=a-s,u=co().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(s,a),c);return new Cr(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Cr().fromArray(e)}static fromUrl(e){return ys(this,void 0,void 0,function*(){return yield new Cr().load(e)})}static load(e){return ys(this,void 0,void 0,function*(){const t=Cr.baseUrl===""||Cr.baseUrl.endsWith("/")?Cr.baseUrl:Cr.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield co().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return ys(this,void 0,void 0,function*(){for(yield Promise.resolve();Cr.downloads.length;)yield Cr.downloads[0]})}}Cr.baseUrl="";Cr.downloads=[];class u2 extends l2{constructor(){super({clockSource:"offline",context:$1(arguments[0])?arguments[0]:QC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:$1(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=$1(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ys(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return ys(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Cr(t)})}close(){return Promise.resolve()}}const H3=new cT;let pu=H3;function co(){return pu===H3&&JC&&uT(new l2),pu}function uT(n,e=!1){e&&pu.dispose(),Sh(n)?pu=new l2(n):$1(n)?pu=new u2(n):pu=n}function Tu(){return pu.resume()}if(ca&&!ca.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Hx} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function hT(n){return Math.pow(10,n/20)}function dT(n){return 20*(Math.log(n)/Math.LN10)}function W3(n){return Math.pow(2,n/12)}let Wp=440;function fT(){return Wp}function pT(n){Wp=n}function mu(n){return Math.round(G3(n))}function G3(n){return 69+12*Math.log2(n/Wp)}function $3(n){return Wp*Math.pow(2,(n-69)/12)}class h2 extends Il{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof h2&&this.fromType(this._val),Ma(this._val))return this._noArg();if(Ll(this._val)&&Ma(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(bu(this._val)){let e=0;for(const t in this._val)if(Rn(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(Rn(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Ll(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class uo extends h2{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new uo(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),c=Math.round(a/s)*s-a;return a+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let o=1;o<9;o++){const u=Math.pow(2,o);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let s=t[0],a=new uo(this.context,t[0]).toSeconds();return t.forEach(o=>{const u=new uo(this.context,o).toSeconds();Math.abs(u-e)<Math.abs(a-e)&&(s=o,a=u)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const o=a.toString();return o.length>3&&(a=parseFloat(parseFloat(o).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return mu(this.toFrequency())}_now(){return this.context.now()}}class ua extends uo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return fT()}static set A4(e){pT(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:ua.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=mT[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:ua.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new ua(this.context,this.valueOf()*W3(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return mu(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/ua.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),gT[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return $3(e)}static ftom(e){return mu(e)}}const mT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},gT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Zd extends uo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Wi extends Il{constructor(){super();const e=Qt(Wi.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:co()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return XC(e),new uo(this.context,e).toSeconds()}toFrequency(e){return new ua(this.context,e).toFrequency()}toTicks(e){return new Zd(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Ma(e[s])&&delete t[s]}),t}get(){const e=iT(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Rn(s)&&Rn(s.value)&&Rn(s.setValueAtTime)?e[t]=s.value:s instanceof Wi?e[t]=s._getPartialProperties(e[t]):da(s)||Ml(s)||Ll(s)||YC(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Rn(this[t])&&(this[t]&&Rn(this[t].value)&&Rn(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Wi?this[t].set(e[t]):this[t]=e[t])}),this}}class d2 extends La{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Ol(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const o=this._timeline[a];if(o.state===e)return o}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const o=this._timeline[a];if(o.state===e)return o}}}class br extends Wi{constructor(){const e=Qt(br.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,tn(Rn(e.param)&&(_u(e.param)||e.param instanceof br),"param must be an AudioParam");!_u(e.param);)e.param=e.param._param;this._swappable=Rn(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new La(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Rn(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Wi.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Rn(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Rn(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Rn(this.maxValue)&&Rn(this.minValue)&&Ol(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?hT(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?dT(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return tn(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let o=this._initialValue;if(a===null)o=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let c;u===null?c=this._initialValue:c=u.value,a.type==="setTargetAtTime"&&(o=this._exponentialApproach(a.time,c,a.value,a.constant,t))}else if(s===null)o=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?u=this._initialValue:u=c.value}s.type==="linearRampToValueAtTime"?o=this._linearInterpolate(a.time,u,s.time,s.value,t):o=this._exponentialInterpolate(a.time,u,s.time,s.value,t)}else o=a.value;return this._toType(o)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return tn(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=ao(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return tn(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);tn(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(t);return this._assertRange(a),tn(isFinite(a)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:o,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,o,s),this._param.setTargetAtTime(a,o,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const o=this._fromType(e[0])*a;this.setValueAtTime(this._toType(o),t);const u=s/(e.length-1);for(let c=1;c<e.length;c++){const h=this._fromType(e[c])*a;this.linearRampToValueAtTime(this._toType(h),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return tn(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));tn(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),o=this._events.getAfter(t);return a&&ao(a.time,t)?o?(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):o&&(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time),o.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):o.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),o=a?a.time:t+2,u=(o-t)/10;for(let c=t;c<o;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){tn(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,o){return s+(t-s)*Math.exp(-(o-e)/a)}_linearInterpolate(e,t,s,a,o){return t+(a-t)*((o-e)/(s-e))}_exponentialInterpolate(e,t,s,a,o){return t*Math.pow(a/t,(o-e)/(s-e))}}class hn extends Wi{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Rn(this.input)?_u(this.input)||this.input instanceof br?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Rn(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Rn(e)&&(e instanceof hn||Cc(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();tn(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return ed(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return qp("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return bT(this,e,t,s),this}chain(...e){return lf(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Rn(this.input)&&(this.input instanceof hn?this.input.dispose():Cc(this.input)&&this.input.disconnect()),Rn(this.output)&&(this.output instanceof hn?this.output.dispose():Cc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function lf(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof hn?t.connect(s):Cc(t)&&ed(t,s),s),e)}function ed(n,e,t=0,s=0){for(tn(Rn(n),"Cannot connect from undefined node"),tn(Rn(e),"Cannot connect to undefined node"),(e instanceof hn||Cc(e))&&tn(e.numberOfInputs>0,"Cannot connect to node with no inputs"),tn(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof hn||e instanceof br;)Rn(e.input)&&(e=e.input);for(;n instanceof hn;)Rn(n.output)&&(n=n.output);_u(e)?n.connect(e,t):n.connect(e,t,s)}function bT(n,e,t=0,s=0){if(Rn(e))for(;e instanceof hn;)e=e.input;for(;!Cc(n);)Rn(n.output)&&(n=n.output);_u(e)?n.disconnect(e,t):Cc(e)?n.disconnect(e,t,s):n.disconnect()}class ws extends hn{constructor(){const e=Qt(ws.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new br({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),jr(this,"gain")}static getDefaults(){return Object.assign(hn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Hh extends hn{constructor(e){super(e),this.onended=hr,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ws({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(hn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:hr})}_startGain(e,t=1){tn(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){tn(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==hr&&(this.onended(this),this.onended=hr,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),tn(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=hr,this}}class f2 extends Hh{constructor(){const e=Qt(f2.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),ed(this._source,this._gainNode),this.offset=new br({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Hh.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class vr extends hn{constructor(){const e=Qt(vr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new f2({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(hn.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return p2(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function p2(n,e,t,s){(e instanceof br||_u(e)||e instanceof vr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof vr&&(e.overridden=!0)),ed(n,e,t,s)}class m2 extends br{constructor(){const e=Qt(m2.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new La(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(br.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),o=this._events.get(t),u=Math.round(Math.max(1/s,1));for(let c=0;c<=u;c++){const h=s*c+t,f=this._exponentialApproach(o.time,o.value,a,s,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),o=Math.round(Math.max((t-a.time)*10,1)),u=(t-a.time)/o;for(let c=0;c<=o;c++){const h=u*c+a.time,f=this._exponentialInterpolate(a.time,a.value,t,s,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ma(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const o=this._events.get(t);return o&&o.time===t&&o.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),c=Math.sqrt(Math.pow(a,2)-2*u*(t.ticks-e)),h=(-a+c)/u,f=(-a-c)/u;return(h>0?h:f)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),o=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-o}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class g2 extends vr{constructor(){const e=Qt(g2.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new m2({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(vr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class b2 extends Wi{constructor(){const e=Qt(b2.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new d2,this._tickOffset=new La,this._ticksAtTime=new La,this._secondsAtTime=new La,this.frequency=new g2({context:this.context,units:e.units,value:e.frequency}),jr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Wi.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Rn(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),o={state:"paused",time:t};this._state.add(o);let u=a||s,c=a?a.ticks:0,h=null;return this._state.forEachBetween(u.time,t+this.sampleTime,f=>{let p=u.time;const y=this._tickOffset.get(f.time);y&&y.time>=u.time&&(c=y.ticks,p=y.time),u.state==="started"&&f.state!=="started"&&(c+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(p),f.time!==o.time&&(h={state:f.state,time:f.time,ticks:c})),u=f}),this._state.remove(o),h&&this._ticksAtTime.add(h),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let o=a||t,u=a?a.seconds:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,h=>{let f=o.time;const p=this._tickOffset.get(h.time);p&&p.time>=o.time&&(u=p.seconds,f=p.time),o.state==="started"&&h.state!=="started"&&(u+=h.time-f,h.time!==s.time&&(c={state:h.state,time:h.time,seconds:u})),o=h}),this._state.remove(s),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),o=Math.max(s.time,a.time),u=this.frequency.getTicksAtTime(o)+e-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),u.time-this.sampleTime,s),a=u});let o=null;if(a&&a.state==="started"){const u=Math.max(a.time,e),c=this.frequency.getTicksAtTime(u),h=this.frequency.getTicksAtTime(a.time),f=c-h;let p=Math.ceil(f)-f;p=ao(p,1)?0:p;let y=this.frequency.getTimeOfTick(c+p);for(;y<t;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(_){o=_;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let Y3=class X3 extends Wi{constructor(){const e=Qt(X3.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=hr,this._lastUpdate=0,this._state=new d2("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new b2({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,jr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Wi.getDefaults(),{callback:hr,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){V3(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};Nf.mixin(Y3);class td extends hn{constructor(){const e=Qt(td.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new ws({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,jr(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class v2 extends hn{constructor(){const e=Qt(v2.getDefaults(),arguments);super(e),this.name="Destination",this.input=new td({context:this.context}),this.output=new ws({context:this.context}),this.volume=this.input.volume,lf(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),lf(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Up(n=>{n.destination=new v2({context:n})});Hp(n=>{n.destination.dispose()});class vT extends hn{constructor(){super(...arguments),this.name="Listener",this.positionX=new br({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new br({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new br({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new br({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new br({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new br({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new br({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new br({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new br({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(hn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Up(n=>{n.listener=new vT({context:n})});Hp(n=>{n.listener.dispose()});class y2 extends Il{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Qt(y2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:hr,onload:hr,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return tn(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=hr,a=hr){return Ll(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Cr(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new Cr(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class pp extends ua{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return mu(super._frequencyToUnits(e))}_ticksToUnits(e){return mu(super._ticksToUnits(e))}_beatsToUnits(e){return mu(super._beatsToUnits(e))}_secondsToUnits(e){return mu(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return $3(this.toMidi())}transpose(e){return new pp(this.context,this.toMidi()+e)}}class Th extends Zd{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class yT extends Wi{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new La,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Up(n=>{n.draw=new yT({context:n})});Hp(n=>{n.draw.dispose()});class xT extends Il{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){tn(Rn(e.time),"Events must have a time property"),tn(Rn(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new wT(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class wT{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class _T extends Il{constructor(e){super(),this.name="TimelineValue",this._timeline=new La({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Tc extends hn{constructor(){super(Qt(Tc.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return p2(this,e,t,s),this}}class Af extends Tc{constructor(){const e=Qt(Af.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,da(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):$C(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(vr.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,o=t;a<o;a++){const u=a/(o-1)*2-1;s[a]=e(u,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));tn(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Gp extends Tc{constructor(){const e=Qt(Gp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Af({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Tc.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class kc{constructor(e,t){this.id=kc._eventId++,this._remainderTime=0;const s=Object.assign(kc.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:hr,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}kc._eventId=0;class x2 extends kc{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(x2.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},kc.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return fp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Th(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){fp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Th(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Uh(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class $p extends Wi{constructor(){const e=Qt($p.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new _T(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new La,this._repeatedEvents=new xT,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Y3({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),jr(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Wi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new Th(this.context,this._swingTicks*2/3).toSeconds()*a}Z5(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),Z5(!1)}schedule(e,t){const s=new kc(this,{callback:e,time:new Zd(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const o=new x2(this,{callback:e,duration:new uo(this.context,a).toTicks(),interval:new uo(this.context,t).toTicks(),time:new Zd(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(e,t){const s=new kc(this,{callback:e,once:!0,time:new Zd(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Th(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Rn(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){da(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new uo(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new uo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Th(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Th(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),o=t+a;this.emit("stop",o),this._clock.setTicksAtTime(e,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,o=1/(60/a.getValueAtTime(s)/this.PPQ),u=[];if(e.units==="time"){const h=.015625/o,f=new ws(h),p=new Gp(-1),y=new ws(h);a.chain(f,p,y),a=y,o=1/o,u=[f,p,y]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/o:t=0);const c=new ws(t);return a.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),c2(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Nf.mixin($p);Up(n=>{n.transport=new $p({context:n})});Hp(n=>{n.transport.dispose()});class hi extends hn{constructor(e){super(e),this.input=void 0,this._state=new d2("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=hr,this._syncedStop=hr,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new td({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,jr(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,onstop:hr,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=Ma(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")tn(Uh(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const o=this._state.get(a);o&&(o.offset=this.toSeconds(Lh(t,0)),o.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,s)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else V3(this.context),this._start(a,t,s);return this}stop(e){let t=Ma(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Rn(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Uh(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,o)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=hr,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Yp extends Hh{constructor(){const e=Qt(Yp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,ed(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new br({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Cr(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Hh.getDefaults(),{url:new Cr,loop:!1,loopEnd:0,loopStart:0,onload:hr,onerror:hr,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){tn(this.buffer.loaded,"buffer is either not set or not loaded");const o=this.toSeconds(e);this._startGain(o,a),this.loop?t=Lh(t,this.loopStart):t=Lh(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=c-h;pg(u,c)&&(u=(u-h)%f+h),ao(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,fp(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),Rn(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(o+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ku(n,e){return ys(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new u2(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class w2 extends Hh{constructor(){const e=Qt(w2.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],ed(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new br({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new br({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),jr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Hh.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class vs extends hi{constructor(){const e=Qt(vs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),jr(this,"frequency"),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),jr(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(hi.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new w2({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return vs._periodicWaveCache.find(t=>t.phase===this._phase&&sT(t.partials,this._partials));{const e=vs._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Rn(s)){const{partials:a,wave:o}=s;this._wave=o,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,o]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(a,o);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),vs._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),vs._periodicWaveCache.length>100&&vs._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ol(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((o,u)=>a[u]=o),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const o=new Float32Array(a),u=new Float32Array(a);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[o,u]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(c=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let h=1;h<a;++h){const f=2/(h*Math.PI);let p;switch(e){case"sine":p=h<=c?1:0,this._partials[h-1]=p;break;case"square":p=h&1?2*f:0,this._partials[h-1]=p;break;case"sawtooth":p=f*(h&1?1:-1),this._partials[h-1]=p;break;case"triangle":h&1?p=2*(f*f)*(h-1>>1&1?-1:1):p=0,this._partials[h-1]=p;break;case"custom":p=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}p!==0?(o[h]=-p*Math.sin(t*h),u[h]=p*Math.cos(t*h)):(o[h]=0,u[h]=0)}return[o,u]}_inverseFFT(e,t,s){let a=0;const o=e.length;for(let u=0;u<o;u++)a+=e[u]*Math.cos(u*s)+t[u]*Math.sin(u*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,o=32;for(let u=0;u<o;u++)s=Math.max(this._inverseFFT(e,t,u/o*a),s);return aT(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}vs._periodicWaveCache=[];class Z3 extends Tc{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Af({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Dl extends vr{constructor(){const e=Qt(Dl.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ws({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(vr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Xp extends hi{constructor(){const e=Qt(Xp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new Z3({context:this.context}),this._modulationNode=new ws({context:this.context}),this._carrier=new vs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new vs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Dl({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),jr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(vs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Zp extends hi{constructor(){const e=Qt(Zp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new ws({context:this.context,gain:0}),this._carrier=new vs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new vs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Dl({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Dl({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),jr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(vs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Cf extends hi{constructor(){const e=Qt(Cf.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new ws({context:this.context,gain:0}),this._thresh=new Af({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new vr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new vs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),jr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(hi.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Kp extends hi{constructor(){const e=Qt(Kp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,jr(this,["frequency","detune"])}static getDefaults(){return Object.assign(vs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,o)=>a.detune.value=t+s*o)}}get count(){return this._oscillators.length}set count(e){if(Ol(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new vs({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):hr});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Qp extends hi{constructor(){const e=Qt(Qp.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Dl({context:this.context,value:2}),this._pulse=new Cf({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new vs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),jr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(hi.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const K5={am:Xp,fat:Kp,fm:Zp,oscillator:vs,pulse:Cf,pwm:Qp};class jc extends hi{constructor(){const e=Qt(jc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),jr(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(vs.getDefaults(),Zp.getDefaults(),Xp.getDefaults(),Kp.getDefaults(),Cf.getDefaults(),Qp.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=K5[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof K5[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ml(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ml(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ll(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class _2 extends vr{constructor(){super(Qt(_2.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ws({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,lf(this._constantSource,this._sum)}static getDefaults(){return Object.assign(vr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class S2 extends Tc{constructor(){const e=Qt(S2.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Dl({context:this.context,value:e.max-e.min}),this._add=this.output=new _2({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Tc.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function K3(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ol(o,n,e),t.set(this,o)}})}}function Vl(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ol(this.toSeconds(o),n,e),t.set(this,o)}})}}class Jp extends hi{constructor(){const e=Qt(Jp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Cr({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(hi.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:hr,onerror:hr,playbackRate:1,reverse:!1})}load(e){return ys(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=hr){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Lh(t,this._loopStart):t=Lh(t,0);const a=this.toSeconds(t),o=s;s=Lh(s,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(s);u=u/this._playbackRate,e=this.toSeconds(e);const c=new Yp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Ma(o)?c.start(e,a):c.start(e,a,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ol(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ol(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}yo([Vl(0)],Jp.prototype,"fadeIn",void 0);yo([Vl(0)],Jp.prototype,"fadeOut",void 0);class fa extends hn{constructor(){const e=Qt(fa.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new vr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(hn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Ll(e))return e;{let s;for(s in L1)if(L1[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Ll(s)&&Reflect.has(L1,s)){const a=L1[s];bu(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(da(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const o=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/a;a=(1-u)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let h=1;h<c.length;h++)if(c[h-1]<=u&&u<=c[h]){c=this._attackCurve.slice(h),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,a,t)}if(o&&this.sustain<1){const c=t*this.sustain,h=e+a;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,o+h):this._sig.exponentialApproachValueAtTime(c,h,o)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(tn(da(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return p2(this,e,t,s),this}asArray(){return ys(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new u2(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o*.1,c=o+u,h=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return h._sig.toDestination(),h.triggerAttackRelease(t*(a+u)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}yo([Vl(0)],fa.prototype,"attack",void 0);yo([Vl(0)],fa.prototype,"decay",void 0);yo([K3(0,1)],fa.prototype,"sustain",void 0);yo([Vl(0)],fa.prototype,"release",void 0);const L1=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],o=6.4;for(e=0;e<127;e++){t=e/127;const _=Math.sin(t*(Math.PI*2)*o-Math.PI/2)+1;a[e]=_/10+t*.83}a[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const h=[];for(e=0;e<128;e++)t=e/127,h[e]=.5*(1-Math.cos(Math.PI*t));const f=[];for(e=0;e<128;e++){t=e/127;const _=Math.pow(t,3)*4+.2,b=Math.cos(_*Math.PI*2*t);f[e]=Math.abs(b*(1-t))}function p(_){const b=new Array(_.length);for(let A=0;A<_.length;A++)b[A]=1-_[A];return b}function y(_){return _.slice(0).reverse()}return{bounce:{In:p(f),Out:f},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:p(a)},sine:{In:h,Out:p(h)},step:{In:u,Out:p(u)}}})();class Ec extends hn{constructor(){const e=Qt(Ec.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new td({context:this.context,volume:e.volume}),this.volume=this._volume.volume,jr(this,"volume")}static getDefaults(){return Object.assign(hn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const o=a[t],u=this.context.transport.schedule(c=>{a[t]=c,s.apply(this,a)},o);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s),u=this.toSeconds(t);return this.triggerAttack(e,o,a),this.triggerRelease(o+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class fo extends Ec{constructor(){const e=Qt(fo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Ec.getDefaults(),{detune:0,onsilence:hr,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof ua?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,o,s)}else this.frequency.setValueAtTime(a,s);return this}}yo([Vl(0)],fo.prototype,"portamento",void 0);class e0 extends fa{constructor(){super(Qt(e0.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ws({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ea extends fo{constructor(){const e=Qt(Ea.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new jc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new e0(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),jr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(fo.getDefaults(),{envelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(lo(jc.getDefaults(),[...Object.keys(hi.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class cf extends fo{constructor(){const e=Qt(cf.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new Ea({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Ea({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new vr({context:this.context,units:"frequency"}),this.detune=new vr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Dl({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new ws({context:this.context,gain:0}),jr(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(fo.getDefaults(),{harmonicity:3,oscillator:Object.assign(lo(jc.getDefaults(),[...Object.keys(hi.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(lo(jc.getDefaults(),[...Object.keys(hi.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class mp extends cf{constructor(){super(Qt(mp.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Z3({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class gp extends hn{constructor(){const e=Qt(gp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new br({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new br({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new br({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new br({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(hn.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){tn(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const h=Math.pow(u/e,2)*19980+20;t[u]=h}const s=new Float32Array(e),a=new Float32Array(e),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class bp extends hn{constructor(){const e=Qt(bp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new ws({context:this.context}),this.output=new ws({context:this.context}),this._filters=[],this._filters=[],this.Q=new vr({context:this.context,units:"positive",value:e.Q}),this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),this.gain=new vr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,jr(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(hn.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){tn(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Ml(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);tn(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(o=>o.disconnect()),this._filters=new Array(a);for(let o=0;o<a;o++){const u=new gp({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[o]=u}this._internalChannels=this._filters,lf(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new gp({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((o,u)=>s[u]*=o)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),c2(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class vp extends fa{constructor(){const e=Qt(vp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Gp({context:this.context,value:e.exponent}),this._scale=this.output=new S2({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(fa.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Ol(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class yp extends fo{constructor(){const e=Qt(yp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new jc(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new bp(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new vp(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new e0(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),jr(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(fo.getDefaults(),{envelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(lo(bp.getDefaults(),Object.keys(hn.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(lo(vp.getDefaults(),Object.keys(hn.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(lo(jc.getDefaults(),Object.keys(hi.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Kd extends cf{constructor(){const e=Qt(Kd.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Dl({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(cf.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class t0 extends Ea{constructor(){const e=Qt(t0.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,jr(this,["oscillator","envelope"])}static getDefaults(){return vu(fo.getDefaults(),Ea.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof ua?e.toFrequency():e),o=a*this.octaves;return this.oscillator.frequency.setValueAtTime(o,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}yo([K3(0)],t0.prototype,"octaves",void 0);yo([Vl(0)],t0.prototype,"pitchDecay",void 0);const Q3=new Set;function N2(n){Q3.add(n)}function J3(n,e){const t=`registerProcessor("${n}", ${e})`;Q3.add(t)}const ST=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;N2(ST);const NT=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;N2(NT);const AT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;N2(AT);const CT="feedback-comb-filter",TT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;J3(CT,TT);class zi extends Ec{constructor(){const e=Qt(zi.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),tn(!Ml(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Ec.getDefaults(),{maxPolyphony:32,options:{},voice:Ea})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return tn(e instanceof fo,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else qp("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const o=new pp(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,t,s),this._activeVoices.push({midi:o,voice:u,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new pp(this.context,s).toMidi(),o=this._activeVoices.find(({midi:u,released:c})=>u===a&&!c);o&&(o.voice.triggerRelease(t),o.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){tn(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s);if(this.triggerAttack(e,o,a),da(t)){tn(da(e),"If the duration is an array, the notes must also be an array"),e=e;for(let u=0;u<e.length;u++){const c=t[Math.min(u,t.length-1)],h=this.toSeconds(c);tn(h>0,"The duration must be greater than 0"),this.triggerRelease(e[u],o+h)}}else{const u=this.toSeconds(t);tn(u>0,"The duration must be greater than 0"),this.triggerRelease(e,o+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=lo(e,["onsilence","context"]);return this.options=vu(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Tf extends Ec{constructor(){const e=Qt(Tf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(tn(M1(s)||Ml(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),M1(s)){const o=new ua(this.context,s).toMidi();t[o]=e.urls[s]}else Ml(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new y2({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Ec.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:hr,onerror:hr,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const o=G3(new ua(this.context,a).toFrequency()),u=Math.round(o),c=o-u,h=this._findClosest(u),f=u-h,p=this._buffers.get(f),y=W3(h+c),_=new Yp({url:p,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);_.start(t,0,p.duration/y,s),da(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(_),_.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),A=b.indexOf(_);A!==-1&&b.splice(A,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new ua(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const o=this._activeSources.get(a);t=this.toSeconds(t),o.forEach(u=>{u.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const o=this.toSeconds(s);return this.triggerAttack(e,o,a),da(t)?(tn(da(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const h=t[Math.min(c,t.length-1)];this.triggerRelease(u,o+this.toSeconds(h))})):this.triggerRelease(e,o+this.toSeconds(t)),this}add(e,t,s){if(tn(M1(e)||isFinite(e),`note must be a pitch or midi: ${e}`),M1(e)){const a=new ua(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}yo([Vl(0)],Tf.prototype,"attack",void 0);yo([Vl(0)],Tf.prototype,"release",void 0);class A2 extends hn{constructor(){const e=Qt(A2.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new br({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",jr(this,"pan")}static getDefaults(){return Object.assign(hn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const kT="bit-crusher",jT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;J3(kT,jT);class bs extends hn{constructor(){const e=Qt(bs.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new ws({context:this.context}),bs._allSolos.has(this.context)||bs._allSolos.set(this.context,new Set),bs._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(hn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),bs._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){bs._soloed.has(this.context)||bs._soloed.set(this.context,new Set),bs._soloed.get(this.context).add(this)}_removeSolo(){bs._soloed.has(this.context)&&bs._soloed.get(this.context).delete(this)}_isSoloed(){return bs._soloed.has(this.context)&&bs._soloed.get(this.context).has(this)}_noSolos(){return!bs._soloed.has(this.context)||bs._soloed.has(this.context)&&bs._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),bs._allSolos.get(this.context).delete(this),this._removeSolo(),this}}bs._allSolos=new Map;bs._soloed=new Map;class C2 extends hn{constructor(){const e=Qt(C2.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new A2({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new td({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,jr(this,["pan","volume"])}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class kh extends hn{constructor(){const e=Qt(kh.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new bs({solo:e.solo,context:this.context}),this._panVol=this.output=new C2({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),jr(this,["pan","volume"])}static getDefaults(){return Object.assign(hn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return kh.buses.has(e)||kh.buses.set(e,new ws({context:this.context})),kh.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new ws({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}kh.buses=new Map;const Hi=co().transport,ew=co().destination;co().destination;co().listener;co().draw;const xs=co();function ET(){return Cr.loaded()}const O1=({cx:n,cy:e,innerRadius:t,outerRadius:s,startAngle:a,endAngle:o,color:u,label:c,chord:h,isSelected:f,isDiatonic:p,isSecondary:y=!1,onClick:_,onDoubleClick:b,ringType:A="major",wheelRotation:N=0,romanNumeral:k,voicingSuggestion:T,segmentId:R="seg",onHover:D})=>{const V=PS(n,e,t,s,a,o),B=(a+o)/2,W=Cn.useRef(0),H=Cn.useRef(null),[L,F]=Cn.useState(!1),te=Cn.useRef(null),j=Cn.useRef(!1),I=Cn.useRef(!1),X=-N,P=s-t,ae=t+P*.5,Z=t+P*.18,re=Nc(n,e,ae,B),le=Nc(n,e,Z,B),fe=s-6,_e=BS(n,e,fe,a+1,o-1),z=`voicing-arc-${R}`,E=`clip-${R}`,G=(()=>{let qe=.35,ht=.5;p?(qe=1,ht=1):y&&(qe=.7,ht=.65);const Te=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(Te){const tt=parseInt(Te[1]),bt=Math.round(parseInt(Te[2])*ht),mt=parseInt(Te[3]);let st=mt;return A==="minor"?st=Math.max(mt-8,30):A==="diminished"&&(st=Math.max(mt-15,25)),{fill:`hsl(${tt}, ${bt}%, ${st}%)`,opacity:qe}}return{fill:u,opacity:qe}})(),Q=()=>A==="diminished"?"10px":A==="minor"?"12px":"14px",ie=p||y,pe=ie?"#000000":"rgba(255,255,255,0.7)",de=p?"bold":y?"600":"normal",ye=A==="diminished"||A==="minor"?"6px":"8px",Se=A==="major"?ie?6:5:A==="minor"?ie?4:3.25:ie?3.5:3,Be=ie?1:.95,Qe=qe=>{if(F(!0),qe.touches.length>=2){I.current=!0,te.current=null;return}qe.touches.length===1&&!I.current&&(te.current={x:qe.touches[0].clientX,y:qe.touches[0].clientY},j.current=!1)},Xe=qe=>{if(qe.touches.length>=2){I.current=!0,j.current=!0;return}if(te.current&&qe.touches.length===1&&!I.current){const ht=qe.touches[0],Te=ht.clientX-te.current.x,tt=ht.clientY-te.current.y;Math.sqrt(Te*Te+tt*tt)>15&&(j.current=!0)}},ot=async qe=>{qe.preventDefault(),qe.stopPropagation(),F(!1);const ht=I.current,Te=j.current;if(te.current=null,j.current=!1,qe.touches.length===0&&(I.current=!1),ht||Te)return;xs.state!=="running"&&await Tu();const tt=Date.now(),bt=tt-W.current;H.current&&(clearTimeout(H.current),H.current=null),bt<300&&bt>0?(W.current=0,b&&b(h)):(W.current=tt,H.current=setTimeout(()=>{_(h),H.current=null},300))},Y=()=>{F(!1),te.current=null,j.current=!1,I.current=!1,H.current&&(clearTimeout(H.current),H.current=null)},Ie=qe=>{qe.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),D&&D(null,0,0),_(h)},vt=qe=>{qe.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),D&&D(null,0,0),b&&b(h)},et=Cn.useRef(null),Re=qe=>{if(!D)return;const ht=qe.clientX,Te=qe.clientY;et.current=setTimeout(()=>{D("Select a chord slot in the timeline, then double-click a chord or chord voicing to add to the timeline.",ht,Te)},3e3)},it=()=>{et.current&&(clearTimeout(et.current),et.current=null),D&&D(null,0,0)};return g.jsxs("g",{className:Vt("cursor-pointer transition-all duration-200",!ie&&"hover:opacity-70",L&&"opacity-80"),onClick:Ie,onDoubleClick:vt,onTouchStart:Qe,onTouchMove:Xe,onTouchEnd:ot,onTouchCancel:Y,onMouseEnter:Re,onMouseLeave:it,style:{pointerEvents:"all",WebkitTapHighlightColor:"transparent"},children:[(p||y)&&T&&g.jsx("defs",{children:g.jsx("path",{id:z,d:_e,fill:"none"})}),g.jsx("defs",{children:g.jsx("clipPath",{id:E,children:g.jsx("path",{d:V})})}),g.jsx("path",{d:V,fill:G.fill,opacity:G.opacity,stroke:k==="I"?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",strokeWidth:k==="I"?2.5:1,className:Vt("transition-all duration-200 hover:brightness-110",f&&"brightness-125 stroke-white stroke-2",ie&&"hover:brightness-105"),style:{pointerEvents:"all"}}),f&&g.jsx("path",{d:V,fill:"none",stroke:"white",strokeWidth:Se,opacity:Be,filter:"url(#segment-glow)",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none",clipPath:`url(#${E})`}),(p||y)&&T&&A==="major"&&g.jsx("text",{fill:"rgba(0,0,0,0.6)",fontSize:"6px",className:"pointer-events-none select-none",children:g.jsx("textPath",{href:`#${z}`,startOffset:"50%",textAnchor:"middle",children:T})}),p&&T&&A==="minor"&&g.jsx("text",{fill:"rgba(0,0,0,0.55)",fontSize:"5px",className:"pointer-events-none select-none",children:g.jsx("textPath",{href:`#${z}`,startOffset:"50%",textAnchor:"middle",children:T})}),p&&T&&A==="diminished"&&g.jsx("text",{fill:"rgba(0,0,0,0.5)",fontSize:"5px",className:"pointer-events-none select-none",children:g.jsx("textPath",{href:`#${z}`,startOffset:"50%",textAnchor:"middle",children:T})}),g.jsx("text",{x:re.x,y:re.y,textAnchor:"middle",dominantBaseline:"middle",fill:pe,fontWeight:de,fontSize:Q(),className:"pointer-events-none select-none",transform:`rotate(${X}, ${re.x}, ${re.y})`,children:Ln(c)}),(p||y)&&k&&g.jsx("text",{x:le.x,y:le.y,textAnchor:"middle",dominantBaseline:"middle",fill:"rgba(0,0,0,0.6)",fontSize:ye,fontStyle:"italic",className:"pointer-events-none select-none",transform:`rotate(${X}, ${le.x}, ${le.y})`,children:k})]})};const MT=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Q5=n=>{const e=LT(n);return e.charAt(0).toUpperCase()+e.slice(1)},tw=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),OT=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var DT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const RT=ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:u,...c},h)=>ee.createElement("svg",{ref:h,...DT,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:tw("lucide",a),...!o&&!OT(c)&&{"aria-hidden":"true"},...c},[...u.map(([f,p])=>ee.createElement(f,p)),...Array.isArray(o)?o:[o]]));const rn=(n,e)=>{const t=ee.forwardRef(({className:s,...a},o)=>ee.createElement(RT,{ref:o,iconNode:e,className:tw(`lucide-${MT(Q5(n))}`,`lucide-${n}`,s),...a}));return t.displayName=Q5(n),t};const IT=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],VT=rn("arrow-down",IT);const FT=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],BT=rn("arrow-up",FT);const PT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jh=rn("chevron-down",PT);const zT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wh=rn("chevron-right",zT);const qT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Gh=rn("chevron-left",qT);const UT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nw=rn("chevron-up",UT);const HT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oh=rn("circle-question-mark",HT);const WT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],GT=rn("circle",WT);const $T=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],YT=rn("clock",$T);const XT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ZT=rn("copy",XT);const KT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],n0=rn("download",KT);const QT=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],JT=rn("eraser",QT);const ek=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],tk=rn("file-plus",ek);const nk=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],rk=rn("folder-open",nk);const sk=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rw=rn("grip-vertical",sk);const ik=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],sw=rn("hand",ik);const ak=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ok=rn("hash",ak);const lk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ck=rn("info",lk);const uk=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],hk=rn("layers",uk);const dk=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],iw=rn("list-music",dk);const fk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pk=rn("loader-circle",fk);const mk=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],xp=rn("map",mk);const gk=[["path",{d:"M5 12h14",key:"1ays0h"}]],bk=rn("minus",gk);const vk=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],yk=rn("mouse-pointer-2",vk);const xk=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wp=rn("music",xk);const wk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],_k=rn("panel-right-close",wk);const Sk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Nk=rn("panel-right",Sk);const Ak=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],aw=rn("pause",Ak);const Ck=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nd=rn("play",Ck);const Tk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mc=rn("plus",Tk);const kk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jk=rn("refresh-cw",kk);const Ek=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],J5=rn("repeat",Ek);const Mk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_p=rn("rotate-ccw",Mk);const Lk=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],$h=rn("rotate-cw",Lk);const Ok=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mg=rn("save",Ok);const Dk=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ow=rn("settings-2",Dk);const Rk=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],lw=rn("skip-back",Rk);const Ik=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],cw=rn("skip-forward",Ik);const Vk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fk=rn("sparkles",Vk);const Bk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],uw=rn("square",Bk);const Pk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],zk=rn("tag",Pk);const qk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gg=rn("trash-2",qk);const Uk=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hk=rn("trash",Uk);const Wk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],bg=rn("volume-2",Wk);const Gk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],$k=rn("volume-x",Gk);const Yk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lc=rn("x",Yk);const Xk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Zk=rn("zoom-in",Xk);const Kk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Qk=rn("zoom-out",Kk);let Oc={piano:null,epiano:null,guitar:null,organ:null,synth:null,strings:null,pad:null,brass:null,marimba:null,bell:null,lead:null,bass:null,choir:null},T2="piano",Wd=null,Y1=[],Sp={},ey=!1,qi=null;const k2=()=>{if(qi)return;if("audioSession"in navigator)try{navigator.audioSession.type="playback",console.log("[iOS Audio] Set audioSession.type to playback")}catch(t){console.warn("[iOS Audio] Could not set audioSession type:",t)}const n=["/+NIxAAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/","40jEAA8AAAANIAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU"].join("");qi=document.createElement("audio"),qi.src="data:audio/mpeg;base64,"+n,qi.loop=!0,qi.volume=.001,qi.muted=!1,qi.setAttribute("playsinline","true"),qi.setAttribute("x-webkit-airplay","deny"),qi.preload="auto",document.body.appendChild(qi);const e=qi.play();e!==void 0&&e.then(()=>{console.log("[iOS Audio] Silent media started - ringer switch workaround active")}).catch(t=>{console.log("[iOS Audio] Silent audio deferred until user gesture:",t.message)})},j2=async()=>{if(!ey){if(console.log("[iOS Audio] Starting unlock sequence..."),k2(),qi&&qi.paused)try{await qi.play(),console.log("[iOS Audio] Silent audio now playing")}catch(n){console.warn("[iOS Audio] Silent audio play failed:",n)}try{await Tu(),console.log("[iOS Audio] Tone.start() completed, state:",xs.state)}catch(n){console.warn("[iOS Audio] Tone.start() failed:",n)}if(xs.state!=="running")try{await xs.resume(),console.log("[iOS Audio] Context resumed, state:",xs.state)}catch(n){console.warn("[iOS Audio] Context resume failed:",n)}ey=!0,console.log("[iOS Audio] Unlock sequence complete")}},E2=n=>{n in Oc&&(T2=n)},hw=n=>{const e=n<=0?-1/0:20*Math.log10(n);try{ew.volume.rampTo(e,.1)}catch(t){console.error("Error setting volume:",t)}},dw=n=>{ew.mute=n},Fl=async()=>{if(Wd)return Wd;Wd=(async()=>{const n="https://tonejs.github.io/audio/salamander/",e=(t,s)=>{if(!Oc[t])try{const a=s();a&&(Oc[t]=a)}catch(a){console.error(`Failed to init instrument "${t}"`,a)}};e("piano",()=>new Tf({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:n}).toDestination()),e("guitar",()=>new zi(Ea,{oscillator:{type:"triangle"},envelope:{attack:.002,decay:.25,sustain:.3,release:1.2},filter:{type:"lowpass",frequency:2400,rolloff:-12,Q:1.2},filterEnvelope:{attack:.002,decay:.25,sustain:.2,release:.8,baseFrequency:800,octaves:2.5}}).toDestination()),e("organ",()=>new zi(mp,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("synth",()=>new zi(Kd,{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("epiano",()=>new zi(mp,{harmonicity:2,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.7,release:.8},modulation:{type:"sine"},modulationEnvelope:{attack:.2,decay:.1,sustain:.6,release:.6}}).toDestination()),e("strings",()=>new zi(Ea,{oscillator:{type:"sawtooth"},envelope:{attack:.2,decay:.2,sustain:.8,release:1.2}}).toDestination()),e("pad",()=>new zi(Kd,{harmonicity:1.5,modulationIndex:8,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.9,release:1.5},modulation:{type:"triangle"},modulationEnvelope:{attack:.8,decay:.3,sustain:.8,release:1.2}}).toDestination()),e("brass",()=>new zi(yp,{oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.02,decay:.25,sustain:.6,release:.7},filterEnvelope:{attack:.01,decay:.2,sustain:.8,release:.4,baseFrequency:200,octaves:2.5}}).toDestination()),e("marimba",()=>new zi(Ea,{oscillator:{type:"triangle"},envelope:{attack:.001,decay:.35,sustain:0,release:.6}}).toDestination()),e("bell",()=>new zi(Kd,{harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:1.2,sustain:0,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:0,release:1.2}}).toDestination()),e("lead",()=>new zi(Ea,{oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.15,sustain:.6,release:.35}}).toDestination()),e("bass",()=>new zi(yp,{oscillator:{type:"square"},filter:{type:"lowpass",rolloff:-24,Q:2},envelope:{attack:.01,decay:.2,sustain:.6,release:.4},filterEnvelope:{attack:.001,decay:.15,sustain:.4,release:.2,baseFrequency:80,octaves:3}}).toDestination()),e("choir",()=>new zi(Ea,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),await ET()})();try{await Wd}catch(n){Wd=null,console.error("Failed to initialize audio",n)}},ty=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Br=async(n,e="1n",t)=>{if(xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Fl(),!n||n.length===0)return;const s=n[0],a=ty.indexOf(s.replace(/\d/,"")),o=n.map((c,h)=>{if(c.match(/\d/))return c;const f=c,p=ty.indexOf(f);if(h===0)return`${f}3`;let y=3;return(p<a||p-a>6)&&(y=4),h>=4&&(y=4),h>=5&&(y=5),`${f}${y}`});let u=Oc[T2];if(u||(u=Oc.piano),!u){console.error("No instrument available to play!");return}try{u.triggerAttackRelease(o,e,t)}catch(c){console.error("Failed to play chord",c)}},fw=async(n,e=4,t="8n")=>{xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Fl();let s=Oc[T2];if(s||(s=Oc.piano),!s){console.error("No instrument available to play!");return}const a=`${n}${e}`;try{s.triggerAttackRelease(a,t)}catch(o){console.error(`Failed to play note ${a}`,o)}},pw=()=>{Object.values(Oc).forEach(t=>t?.releaseAll()),Hi.stop();const{setPlayingSlot:n,setIsPlaying:e}=Ht.getState();n(null,null),e(!1)},uf=n=>{const e=Math.floor(n/4),t=Math.floor(n%4),s=Math.floor(n%1*4);return`${e}:${t}:${s}`},M2=n=>{Hi.cancel(0),Y1=[],Sp={},Hi.timeSignature=4;let e=0;n.sections.forEach(s=>{Sp[s.id]=e,s.measures.forEach(a=>{a.beats.forEach(o=>{const u=uf(e),c=o.duration,h=c*4,f=`${Math.floor(h/16)}:${Math.floor(h%16/4)}:${h%4}`,p=Hi.schedule(y=>{const b=Math.max(0,y-xs.currentTime)*1e3;setTimeout(()=>{Ht.getState().setPlayingSlot(s.id,o.id)},b),o.chord&&Br(o.chord.notes,f,y)},u);Y1.push(p),e+=c})})});const t=Hi.schedule(()=>{Ht.getState().isLooping||pw()},uf(e));Y1.push(t)},Jk=async()=>{await Fl()},mw=async()=>{await Fl(),xs.state!=="running"&&await xs.resume();const{tempo:n,currentSong:e}=Ht.getState();Hi.bpm.value=n,Y1.length===0&&M2(e),Hi.start()},gw=()=>{Hi.pause()},bw=n=>{Hi.bpm.value=n},vw=n=>{const{currentSong:e,playingSectionId:t}=Ht.getState(),s=e.sections.map(p=>p.id);let a=t?s.indexOf(t):-1;a===-1&&(a=0);let o=n==="next"?a+1:a-1;o>=s.length&&(o=0),o<0&&(o=0);const u=s[o],c=Sp[u]||0,h=uf(c);Hi.position=h;const f=e.sections[o].measures[0]?.beats[0];f&&Ht.getState().setPlayingSlot(u,f.id)},yw=()=>{const{isLooping:n,playingSectionId:e,selectedSectionId:t,currentSong:s}=Ht.getState();if(n){const a=e||t,o=s.sections.find(u=>u.id===a);if(o){const u=Sp[o.id]??0;let c=0;o.measures.forEach(f=>f.beats.forEach(p=>c+=p.duration));const h=u+c;Hi.loopStart=uf(u),Hi.loopEnd=uf(h),Hi.loop=!0;return}}Hi.loop=!1},vg=Object.freeze(Object.defineProperty({__proto__:null,initAudio:Fl,pauseSong:gw,playChord:Br,playNote:fw,playSong:mw,preloadAudio:Jk,scheduleSong:M2,setInstrument:E2,setMute:dw,setTempo:bw,setVolume:hw,skipToSection:vw,startSilentAudioForIOS:k2,stopAudio:pw,toggleLoopMode:yw,unlockAudioForIOS:j2},Symbol.toStringTag,{value:"Module"})),Np=768;function L2(){const[n,e]=ee.useState(()=>typeof window<"u"?window.innerWidth<Np:!1);return ee.useEffect(()=>{const t=()=>e(window.innerWidth<Np);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),n}function ju(){const[n,e]=ee.useState(()=>typeof window<"u"?window.innerWidth<Np||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[t,s]=ee.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1);return ee.useEffect(()=>{const a=()=>{const o=window.innerWidth,u=window.innerHeight,c=o<Np||u<500&&u<o,h=u<o&&u<500;e(c),s(h)};return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),{isMobile:n,isLandscape:t}}var Ho=Px();const ej=7e3,tj=({isOpen:n,onClose:e,onSelect:t,onAddToTimeline:s,onOpenDetails:a,chordRoot:o,voicings:u,selectedQuality:c,portraitWithPanel:h=!1})=>{const f=ee.useRef(null),{isMobile:p,isLandscape:y}=ju(),_=p&&y,[b,A]=ee.useState(c),N=ee.useRef(null),k=ee.useRef(null);ee.useEffect(()=>{n&&A(c)},[n,c]);const T=ee.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{e()},ej)},[e]);if(ee.useEffect(()=>(n&&T(),()=>{k.current&&clearTimeout(k.current)}),[n,T]),ee.useEffect(()=>{if(!n)return;const D=B=>{f.current&&!f.current.contains(B.target)&&e()},V=setTimeout(()=>{document.addEventListener("mousedown",D),document.addEventListener("touchstart",D)},100);return()=>{clearTimeout(V),document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[n,e]),ee.useEffect(()=>{if(!n)return;const D=V=>{V.key==="Escape"&&e()};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n,e]),!n)return null;const R=D=>{const V=Date.now();if(T(),N.current&&N.current.quality===D&&V-N.current.time<400){s&&s(D),e(),N.current=null;return}const B=la(o,D);Br(B),A(D),t(D),N.current={quality:D,time:V}};return Ho.createPortal(g.jsxs("div",{ref:f,className:Vt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row flex-nowrap items-center justify-center","animate-in fade-in zoom-in-95 duration-150",u.length>5||_?"p-1 gap-1":"p-2 gap-2"),style:{bottom:_?"56px":h?"6%":p?"13%":"220px",top:"auto",..._?{left:"24%",transform:"translateX(-50%)",maxWidth:"min(55vw, fit-content)"}:p?{left:"50%",transform:"translateX(-50%)",maxWidth:"calc(100vw - 32px)"}:{right:"340px",left:"auto",transform:"none",maxWidth:"calc(100vw - 400px)"},zIndex:99999},children:[u.map(D=>{const V=D.quality===b,B=u.length>4||_,W=u.length>=6;return g.jsx("button",{onClick:H=>{H.stopPropagation(),R(D.quality)},onTouchEnd:H=>{H.stopPropagation()},className:Vt("flex items-center justify-center rounded-lg transition-all shrink-0",W?"min-w-[32px] h-9 px-0.5":B?"min-w-[40px] h-10 px-1.5":"min-w-[48px] h-12 px-2",V?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`Tap to preview, double-tap to add ${o}${D.label}`,children:g.jsx("span",{className:Vt("font-semibold",W?"text-[10px]":B?"text-xs":V?"text-sm":"text-xs"),children:D.label||"maj"})},D.quality)}),u.length>0&&g.jsx("div",{className:"w-px bg-border-subtle self-stretch my-1 shrink-0"}),a&&g.jsx("button",{onClick:D=>{D.stopPropagation(),a(),e()},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation(),a(),e()},className:Vt("flex items-center justify-center rounded-lg transition-all shrink-0","text-text-tertiary hover:text-text-secondary hover:bg-bg-tertiary",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Open chord details",children:g.jsx(ck,{size:u.length>=6?12:u.length>4||_?14:16})}),s&&g.jsx("button",{onClick:D=>{D.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},className:Vt("flex items-center justify-center rounded-lg transition-all shrink-0","text-accent-primary hover:text-white hover:bg-accent-primary/20",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Add to timeline",children:g.jsx(Mc,{size:u.length>=6?14:u.length>4||_?16:18})})]}),document.body)};function nj(n,e){if(!n)return[];const t=n.split(/,\s*|\s+or\s+/).map(a=>a.trim()).filter(Boolean),s=[];e==="major"?s.push({quality:"major",label:""}):e==="minor"?s.push({quality:"minor",label:"m"}):e==="diminished"&&s.push({quality:"diminished",label:""});for(const a of t){let o=a,u=a;a==="6"?(o="major6",u="6"):a==="m6"?(o="minor6",u="m6"):a==="m75 (7)"?(o="halfDiminished7",u="7"):a==="m7"?(o="minor7",u="m7"):a==="m9"?(o="minor9",u="m9"):a==="m11"?(o="minor11",u="m11"):a==="sus4"?(o="sus4",u="sus4"):a==="7"?(o="dominant7",u="7"):a==="9"?(o="dominant9",u="9"):a==="11"?(o="dominant11",u="11"):a==="13"?(o="dominant13",u="13"):a==="maj7"?(o="major7",u="maj7"):a==="maj9"?(o="major9",u="maj9"):a==="maj13"&&(o="major13",u="maj13"),s.push({quality:o,label:u})}return s}const rj=({zoomScale:n,zoomOriginY:e,onZoomChange:t,panOffset:s,onPanChange:a,rotationOffset:o=0,disableModeToggle:u=!1,footerVisible:c=!0})=>{const{selectedKey:h,setKey:f,wheelRotation:p,wheelMode:y,rotateWheel:_,toggleWheelMode:b,addChordToSlot:A,selectedSectionId:N,selectedSlotId:k,setSelectedChord:T,selectedChord:R,selectNextSlotAfter:D,setSelectedSlot:V,timelineVisible:B,openTimeline:W,chordPanelVisible:H,toggleChordPanel:L,pulseChordPanel:F,chordPanelGuitarExpanded:te,chordPanelVoicingsExpanded:j}=Ht(),I=gu.indexOf(h),X=-(I*30);let P;o!==0?P=X+o:y==="rotating"?P=p:P=0;const ae=ee.useRef(null),Z=ee.useRef(null),[re,le]=ee.useState(null),[fe,_e]=ee.useState({x:0,y:0}),[z,E]=ee.useState({isOpen:!1,chord:null,voicingSuggestion:"",baseQuality:""}),$=s??fe,G=ee.useCallback(je=>{a?a(je):_e(je)},[a]),Q=L2(),{isLandscape:ie}=ju();ee.useEffect(()=>{const je=R?.segmentId??null;le(je)},[R]);const pe=ee.useRef(null),de=ee.useRef(null),[ye,Se]=ee.useState(!1),Be=ee.useRef(0),Qe=ee.useRef(0),[Xe,ot]=ee.useState(!1),Y=ee.useRef(null),Ie=ee.useCallback((je,Pe)=>{if(!de.current)return 0;const Ze=de.current.getBoundingClientRect(),Ct=Ze.left+Ze.width/2,St=Ze.top+Ze.height/2,Mt=je-Ct,pn=Pe-St;return Math.atan2(pn,Mt)*(180/Math.PI)},[]),vt=ee.useCallback(je=>{for(;je>180;)je-=360;for(;je<-180;)je+=360;return je},[]),et=ee.useCallback(je=>{const Pe=gu.indexOf(h),Ze=je==="cw"?(Pe+1)%12:(Pe-1+12)%12;f(gu[Ze],{skipRotation:!0}),_(je)},[h,f,_]),Re=ee.useRef(null),it=ee.useRef(!1),qe=ee.useCallback(je=>{if(Q||!de.current||!pe.current)return;const Pe=de.current.getBoundingClientRect(),Ze=Pe.width/2,Ct=Pe.height/2,St=je.clientX-Pe.left-Ze,Mt=je.clientY-Pe.top-Ct,pn=Math.sqrt(St*St+Mt*Mt),un=Pe.width/600*70,on=Pe.width/600*250;pn>un&&pn<=on?(Se(!0),Be.current=Ie(je.clientX,je.clientY),Qe.current=p,je.preventDefault()):pn>on&&n>1&&(ot(!0),Y.current={x:je.clientX,y:je.clientY},je.preventDefault())},[Ie,p,Q,n]),ht=ee.useCallback(je=>{if(je.touches.length!==1)return;const Pe=je.touches[0];if(Re.current={x:Pe.clientX,y:Pe.clientY},it.current=!1,!de.current)return;const Ze=de.current.getBoundingClientRect(),Ct=Ze.width/2,St=Ze.height/2,Mt=Pe.clientX-Ze.left-Ct,pn=Pe.clientY-Ze.top-St,un=Math.sqrt(Mt*Mt+pn*pn),on=Ze.width/600*70;un>on&&(Be.current=Ie(Pe.clientX,Pe.clientY),Qe.current=p)},[Ie,p]),Te=ee.useCallback(je=>{if(je.touches.length!==1||!Re.current)return;const Pe=je.touches[0],Ze=Pe.clientX-Re.current.x,Ct=Pe.clientY-Re.current.y;if(Math.sqrt(Ze*Ze+Ct*Ct)>10){if(it.current=!0,je.preventDefault(),!de.current)return;const Mt=de.current.getBoundingClientRect(),pn=Mt.width/2,un=Mt.height/2,on=Pe.clientX-Mt.left,xn=Pe.clientY-Mt.top,Pn=Math.sqrt(Math.pow(on-pn,2)+Math.pow(xn-un,2)),Tn=Mt.width/600*70;if(Pn>Tn&&Be.current!==0){const sr=Ie(Pe.clientX,Pe.clientY),$r=vt(sr-Be.current);if(Math.abs($r)>=15){const Mr=Math.round($r/30);if(Mr!==0){const _s=y==="fixed"?Mr>0?"cw":"ccw":Mr>0?"ccw":"cw",Yi=Math.abs(Mr);for(let Pr=0;Pr<Yi;Pr++)et(_s);Be.current=sr}}}}},[Ie,et,y,vt]),tt=ee.useCallback(je=>{if(!ye)return;const Pe=Ie(je.clientX,je.clientY),Ze=vt(Pe-Be.current);if(Math.abs(Ze)>=15){const Ct=Math.round(Ze/30);if(Ct!==0){let St;y==="fixed"?St=Ct>0?"cw":"ccw":St=Ct>0?"ccw":"cw";const Mt=Math.abs(Ct);for(let pn=0;pn<Mt;pn++)et(St);Be.current=Pe}}},[ye,Ie,et,y,vt]),bt=ee.useCallback(()=>{Se(!1)},[]);ee.useEffect(()=>{if(ye)return document.addEventListener("mousemove",tt),document.addEventListener("mouseup",bt),()=>{document.removeEventListener("mousemove",tt),document.removeEventListener("mouseup",bt)}},[ye,tt,bt]);const mt=ee.useCallback((je,Pe,Ze)=>{if(!pe.current||Ze<=1)return{x:0,y:0};const{clientWidth:Ct,clientHeight:St}=pe.current,Mt=12,pn=Ct*(Ze-1)/2+Mt,un=St*(Ze-1)/2+Mt;return{x:Math.max(-pn,Math.min(pn,je)),y:Math.max(-un,Math.min(un,Pe))}},[]);ee.useEffect(()=>{G(mt($.x,$.y,n))},[n,mt,$.x,$.y,G]);const st=ee.useCallback(je=>{if(!Xe||!Y.current)return;const Pe=je.clientX-Y.current.x,Ze=je.clientY-Y.current.y;G(mt($.x+Pe,$.y+Ze,n)),Y.current={x:je.clientX,y:je.clientY}},[Xe,n,mt,$,G]),dt=ee.useCallback(()=>{ot(!1),Y.current=null},[]);ee.useEffect(()=>{if(Xe)return document.addEventListener("mousemove",st),document.addEventListener("mouseup",dt),()=>{document.removeEventListener("mousemove",st),document.removeEventListener("mouseup",dt)}},[Xe,st,dt]);const gt=je=>({x:(je[0].clientX+je[1].clientX)/2,y:(je[0].clientY+je[1].clientY)/2}),Nt=ee.useCallback(je=>{if(je.touches.length===2){je.preventDefault();const Pe=je.touches[0].clientX-je.touches[1].clientX,Ze=je.touches[0].clientY-je.touches[1].clientY;ae.current=Math.sqrt(Pe*Pe+Ze*Ze),Z.current=gt(je.touches)}},[]),Ee=ee.useCallback(je=>{if(je.touches.length===2&&ae.current!==null){je.preventDefault(),je.stopPropagation();const Pe=je.touches[0].clientX-je.touches[1].clientX,Ze=je.touches[0].clientY-je.touches[1].clientY,Ct=Math.sqrt(Pe*Pe+Ze*Ze),St=Ct/ae.current,Mt=Math.max(1,Math.min(2.5,n*St)),pn=Mt>1.3?38:50,un=gt(je.touches);if(Z.current){const on=un.x-Z.current.x,xn=un.y-Z.current.y;G(mt($.x+on,$.y+xn,Mt))}ae.current=Ct,Z.current=un,t(Mt,pn)}},[n,t,mt,$,G]),ft=ee.useCallback(je=>{ae.current=null,Z.current=null,je.touches.length===0&&je.preventDefault()},[]),ut=ee.useCallback(je=>{if(je.ctrlKey||je.metaKey){je.preventDefault();const Pe=je.deltaY>0?.9:1.1,Ze=Math.max(1,Math.min(2.5,n*Pe)),Ct=Ze>1.3?38:50;t(Ze,Ct)}},[n,t]),We=Yh(),at=600,xt=at/2,ct=at/2,nn=60,jt=nn+8,Ft=145,en=Ft,At=210,wt=At,qt=250,wn=ee.useMemo(()=>qx(h),[h]),Me=ee.useMemo(()=>wn.sharps>0?`${wn.sharps}`:wn.flats>0?`${wn.flats}`:"",[wn]),yt=ee.useRef(0),we=je=>{const Pe=je,Ze=Date.now();if(Ze-yt.current<300)return;yt.current=Ze,Br(je.notes),le(Pe.segmentId??null),T(je);let Ct="";Pe.positionIndex!==void 0&&Pe.ringType&&(Ct=dn(Pe.positionIndex,Pe.ringType==="major"?"major":Pe.ringType==="minor"?Pe.numeral==="ii"||Pe.numeral==="vi"?"ii":"iii":"dim")),(!(Q&&!ie)||!H||!te&&!j)&&E({isOpen:!0,chord:Pe,voicingSuggestion:Ct,baseQuality:Pe.quality})},Ve=je=>{const Pe=je;let Ze=N,Ct=k;if(!Ze||!Ct){W();const Mt=Ht.getState();if(Ze=Mt.selectedSectionId,Ct=Mt.selectedSlotId,!Ze||!Ct)return}A(je,Ze,Ct),D(Ze,Ct)||(V(Ze,Ct),le(Pe.segmentId??null),T(je)),B||W()},pt=je=>(je-I+12)%12,Et=(je,Pe)=>{const Ze=pt(je);return Pe==="major"?Ze===0||Ze===1||Ze===11:Pe==="ii"||Pe==="iii"||Pe==="dim"?Ze===0:!1},Bt=je=>pt(je)===1,sn=je=>{const Pe=pt(je);return Pe===2||Pe===4},Yt=(je,Pe)=>{const Ze=pt(je);if(Pe==="major"){if(Ze===0)return"I";if(Ze===1)return"V";if(Ze===11)return"IV";if(Ze===2)return"II";if(Ze===4)return"III"}if(Pe==="ii"){if(Ze===0)return"ii";if(Ze===1)return"vi"}return Pe==="iii"&&Ze===0?"iii":Pe==="dim"&&Ze===0?"vii":""},dn=(je,Pe)=>{const Ze=pt(je);if(Pe==="major"){if(Ze===0)return"maj7, maj9, maj13 or 6";if(Ze===1)return"7, 9, 11, sus4, 13";if(Ze===11)return"maj7, maj9, maj13 or 6";if(Ze===2||Ze===4)return"7, sus4"}if(Pe==="ii"){if(Ze===0)return"m7, m9, m11, m6";if(Ze===1)return"m7, m9, m11"}return Pe==="iii"&&Ze===0?"m7":Pe==="dim"&&Ze===0?"m75 (7)":""},fn=je=>{if(re)return re===je.segmentId;const Pe=R?.segmentId;return Pe?Pe===je.segmentId:R&&!Pe?R.root===je.root&&R.quality===je.quality:!1},Jn=ee.useCallback(je=>{je.touches.length===2?Nt(je):je.touches.length===1&&ht(je)},[Nt,ht]),Gn=ee.useCallback(je=>{je.touches.length===2?Ee(je):je.touches.length===1&&Te(je)},[Ee,Te]),Sn=ee.useCallback(je=>{Re.current=null,it.current=!1,ft(je)},[ft]),[an,$n]=ee.useState(null),Er=ee.useCallback((je,Pe,Ze)=>{$n(je?{text:je,x:Pe,y:Ze}:null)},[]),us=an?{position:"fixed",left:an.x,top:an.y,transform:"translate(-50%, -100%) translateY(-12px)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"11px",pointerEvents:"none",zIndex:9999,whiteSpace:"normal",textAlign:"center",maxWidth:"220px",lineHeight:"1.4",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}:{};return g.jsxs("div",{ref:pe,"data-chord-wheel":!0,className:`relative flex flex-col items-center justify-center w-full h-full p-1 sm:p-2 select-none ${Xe?"cursor-grabbing":n>1&&!Q?"cursor-grab":""}`,onTouchStart:Jn,onTouchMove:Gn,onTouchEnd:Sn,onWheel:ut,onMouseDown:qe,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"none"},children:[an&&g.jsx("div",{style:us,children:an.text}),g.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out overflow-hidden",style:{transform:`translate(${$.x}px, ${$.y}px) scale(${n})`,transformOrigin:`center ${e}%`},children:g.jsxs("svg",{ref:de,width:"100%",height:"100%",viewBox:`0 0 ${at} ${at}`,className:`w-full h-full select-none ${ye?"cursor-grabbing":"cursor-grab"}`,onMouseDown:qe,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[g.jsxs("defs",{children:[g.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[g.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),g.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),g.jsx("filter",{id:"segment-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:g.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#ffffff",floodOpacity:"0.9"})})]}),g.jsx("g",{style:{transform:`rotate(${P}deg)`,transformOrigin:`${xt}px ${ct}px`,transition:"transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:AS.map((je,Pe)=>{const Ct=Pe*30-15,St=Ct+30,Mt=We[je.major]||We.C,pn=je.ii.replace("m",""),un=je.iii.replace("m",""),on=je.diminished.replace("",""),xn=Et(Pe,"major"),Pn=sn(Pe),Tn=Et(Pe,"ii")||Bt(Pe),sr=Et(Pe,"iii"),$r=Et(Pe,"dim"),Mr={root:je.major,quality:"major",numeral:Yt(Pe,"major"),notes:la(je.major,"major"),symbol:je.major,segmentId:`major-${Pe}`,ringType:"major",positionIndex:Pe},_s={root:pn,quality:"minor",numeral:Yt(Pe,"ii"),notes:la(pn,"minor"),symbol:je.ii,segmentId:`ii-${Pe}`,ringType:"minor",positionIndex:Pe},Yi={root:un,quality:"minor",numeral:Yt(Pe,"iii"),notes:la(un,"minor"),symbol:je.iii,segmentId:`iii-${Pe}`,ringType:"minor",positionIndex:Pe},Pr={root:on,quality:"diminished",numeral:Yt(Pe,"dim"),notes:la(on,"diminished"),symbol:je.diminished,segmentId:`dim-${Pe}`,ringType:"diminished",positionIndex:Pe},ni=15,Nn=Ct+-7.5,Xi=Nn+ni,Ds=Xi,Si=Ds+ni,_o=15,hs=Ct+(30-_o)/2,zr=hs+_o,Lr=je.major,So=je.ii,Bl=je.iii,Qo=je.diminished;return g.jsxs("g",{children:[g.jsx(O1,{cx:xt,cy:ct,innerRadius:jt,outerRadius:Ft,startAngle:Ct,endAngle:St,color:Mt,label:Lr,chord:Mr,isSelected:fn(Mr),isDiatonic:xn,isSecondary:Pn,onClick:we,onDoubleClick:Ve,ringType:"major",wheelRotation:P,romanNumeral:xn||Pn?Yt(Pe,"major"):void 0,voicingSuggestion:xn||Pn?dn(Pe,"major"):void 0,segmentId:`major-${Pe}`,onHover:Er}),g.jsx(O1,{cx:xt,cy:ct,innerRadius:en,outerRadius:At,startAngle:Nn,endAngle:Xi,color:Mt,label:So,chord:_s,isSelected:fn(_s),isDiatonic:Tn,onClick:we,onDoubleClick:Ve,ringType:"minor",wheelRotation:P,romanNumeral:Tn?Yt(Pe,"ii"):void 0,voicingSuggestion:Tn?dn(Pe,"ii"):void 0,segmentId:`ii-${Pe}`,onHover:Er}),g.jsx(O1,{cx:xt,cy:ct,innerRadius:en,outerRadius:At,startAngle:Ds,endAngle:Si,color:Mt,label:Bl,chord:Yi,isSelected:fn(Yi),isDiatonic:sr,onClick:we,onDoubleClick:Ve,ringType:"minor",wheelRotation:P,romanNumeral:sr?Yt(Pe,"iii"):void 0,voicingSuggestion:sr?dn(Pe,"iii"):void 0,segmentId:`iii-${Pe}`,onHover:Er}),g.jsx(O1,{cx:xt,cy:ct,innerRadius:wt,outerRadius:qt,startAngle:hs,endAngle:zr,color:Mt,label:Qo,chord:Pr,isSelected:fn(Pr),isDiatonic:$r,onClick:we,onDoubleClick:Ve,ringType:"diminished",wheelRotation:P,romanNumeral:$r?Yt(Pe,"dim"):void 0,voicingSuggestion:$r?dn(Pe,"dim"):void 0,segmentId:`dim-${Pe}`,onHover:Er})]},je.major)})}),g.jsx("circle",{cx:xt,cy:ct,r:nn,fill:"#1a1a24",stroke:"#3a3a4a",strokeWidth:"2",style:{pointerEvents:"none"}}),g.jsx("text",{x:xt,y:ct-25,textAnchor:"middle",fill:"#6366f1",fontSize:"9",fontWeight:"bold",letterSpacing:"2",children:"KEY"}),g.jsx("text",{x:xt,y:ct+3,textAnchor:"middle",fill:"white",fontSize:"26",fontWeight:"bold",children:Ln(h)}),g.jsx("text",{x:xt,y:ct+21,textAnchor:"middle",fill:"#9898a6",fontSize:"11",children:Me||"No /"}),g.jsxs("g",{transform:`translate(${xt-22}, ${ct+40})`,onClick:()=>et("ccw"),onTouchEnd:je=>{je.preventDefault(),je.stopPropagation(),et("ccw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[g.jsx("circle",{r:Q?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),g.jsx("g",{transform:Q?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:g.jsx(_p,{size:Q?12:9,color:"#9898a6"})})]}),g.jsxs("g",{transform:`translate(${xt+22}, ${ct+40})`,onClick:()=>et("cw"),onTouchEnd:je=>{je.preventDefault(),je.stopPropagation(),et("cw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[g.jsx("circle",{r:Q?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),g.jsx("g",{transform:Q?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:g.jsx($h,{size:Q?12:9,color:"#9898a6"})})]}),g.jsxs("g",{transform:`translate(${xt}, ${ct+40})`,onClick:u?void 0:b,onTouchEnd:u?void 0:je=>{je.preventDefault(),je.stopPropagation(),b()},className:u?"":"cursor-pointer",style:{pointerEvents:u?"none":"all",cursor:u?"default":"pointer",opacity:u?.5:1},children:[g.jsx("circle",{r:Q?16:11,fill:u||y==="rotating"?"#252535":"#3f2e2e",className:"transition-colors",style:{pointerEvents:u?"none":"all",transition:"fill 0.3s ease"},children:g.jsx("title",{children:u?"Mode locked in this view":y==="rotating"?"Lock wheel (C at top)":"Pin current key to top"})}),g.jsxs("g",{style:{pointerEvents:"none",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:o!==0?`rotate(${o}deg)`:y==="rotating"?"rotate(0deg)":`rotate(${I*30}deg)`,transformOrigin:"0px 0px"},children:[g.jsx("polygon",{points:Q?"0,-10 4,0 0,1.5 -4,0":"0,-7 2.5,0 0,1 -2.5,0",fill:"#ef4444",stroke:"#b91c1c",strokeWidth:"0.5"}),g.jsx("polygon",{points:Q?"0,10 4,0 0,-1.5 -4,0":"0,7 2.5,0 0,-1 -2.5,0",fill:"#f1f5f9",stroke:"#94a3b8",strokeWidth:"0.5"}),g.jsx("circle",{cx:0,cy:0,r:Q?2:1.5,fill:y==="rotating"?"#fef2f2":"#6b7280"})]})]})]})}),g.jsx(tj,{isOpen:z.isOpen,onClose:()=>E({...z,isOpen:!1}),onSelect:je=>{if(z.chord){const Pe=la(z.chord.root,je),Ze={...z.chord,quality:je,notes:Pe,symbol:`${z.chord.root}${Mh(je)}`};T(Ze)}},onAddToTimeline:je=>{if(z.chord){const Pe=la(z.chord.root,je),Ze={...z.chord,quality:je,notes:Pe,symbol:`${z.chord.root}${Mh(je)}`};let Ct=N,St=k;if(!Ct||!St){W();const Mt=Ht.getState();if(Ct=Mt.selectedSectionId,St=Mt.selectedSlotId,!Ct||!St)return}A(Ze,Ct,St),V(Ct,St),T(Ze),B||W()}},onOpenDetails:()=>{H?F():L()},chordRoot:z.chord?.root||"C",voicings:nj(z.voicingSuggestion,z.baseQuality),selectedQuality:z.chord?.quality,portraitWithPanel:Q&&!ie&&H&&!te&&!j}),Q&&!ie&&!H&&R&&(()=>{const je=We[R.root]||"#6366f1",Pe=R.quality;let Ze;return Pe==="major"||Pe==="maj"?Ze=Ln(R.root):Pe==="minor"||Pe==="m"?Ze=Ln(`${R.root}m`):Pe==="diminished"||Pe==="dim"?Ze=Ln(`${R.root}`):Ze=Ln(`${R.root}${Mh(Pe)}`),g.jsxs("div",{className:"fixed flex items-center gap-1 z-10 cursor-pointer touch-feedback active:scale-95",style:{bottom:B?c?"260px":"204px":c?"175px":"119px",right:"12px",backgroundColor:"transparent",color:je,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${je}`,backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.4)",transition:"bottom 0.25s ease-out"},onClick:Ct=>{Ct.stopPropagation(),Ct.preventDefault(),Br(R.notes)},onTouchStart:Ct=>{Ct.stopPropagation()},onTouchEnd:Ct=>{Ct.stopPropagation(),Ct.preventDefault(),Br(R.notes)},children:[g.jsx("span",{className:"text-sm font-bold leading-none",children:Ze}),R.numeral&&g.jsx("span",{className:"text-xs font-serif italic opacity-70",children:Ln(R.numeral)})]})})()]})},yg=({type:n,size:e=20,className:t})=>{const s=e>16?1.5:1;switch(n){case"whole":return g.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:g.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"4",fill:"none",stroke:"currentColor",strokeWidth:s*1.5})});case"half":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 10, 16)"}),g.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-half":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 8, 16)"}),g.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"quarter":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"currentColor",transform:"rotate(-20, 10, 16)"}),g.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-quarter":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 8, 16)"}),g.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"eighth":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),g.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("path",{d:"M13 4 Q18 6 16 11",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"sixteenth":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),g.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("path",{d:"M13 3 Q18 5 16 9",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("path",{d:"M13 7 Q18 9 16 13",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]})}};function xg(n,e){const[t]=e;if(t%3===0&&t>3){if(n===1)return"dotted-half";if(n===2)return"dotted-quarter";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}if(t===3){if(n===1)return"dotted-half";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}return n===1?"whole":n===2?"half":n===4?"quarter":n===8?"eighth":n===16?"sixteenth":n<=1?"whole":n<=2?"half":n<=4?"quarter":n<=8?"eighth":"sixteenth"}function xw(n){const[e]=n;return e%3===0?[1,3,6].filter(t=>t<=8):[1,2,4,8]}const sj=({value:n,onChange:e,timeSignature:t,isCompact:s=!1})=>{const[a,o]=ee.useState(!1),u=ee.useRef(null),c=ee.useRef(null),h=xw(t);ee.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&c.current&&!c.current.contains(_.target)&&o(!1)};if(a)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[a]),ee.useEffect(()=>{if(a){const y=()=>o(!1);return window.addEventListener("scroll",y,!0),()=>window.removeEventListener("scroll",y,!0)}},[a]);const f=xg(n,t),p=s?12:16;return g.jsxs("div",{className:"relative",children:[g.jsx("button",{ref:u,onClick:()=>o(!a),className:Vt("flex items-center justify-center rounded transition-all","hover:bg-accent-primary/20 active:scale-95","text-text-muted hover:text-accent-primary",s?"w-4 h-5":"w-5 h-6",a&&"bg-accent-primary/20 text-accent-primary"),title:`${n} step${n>1?"s":""} per measure`,children:g.jsx(yg,{type:f,size:p})}),a&&Ho.createPortal(g.jsx("div",{ref:c,className:Vt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row gap-2 p-2","animate-in fade-in zoom-in-95 duration-150"),style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",zIndex:99999},children:h.map(y=>{const _=xg(y,t),b=y===n;return g.jsx("button",{onClick:()=>{e(y),o(!1)},className:Vt("flex items-center justify-center rounded-lg transition-all","w-12 h-12",b?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`${y} step${y>1?"s":""}`,children:g.jsx(yg,{type:_,size:26})},y)})}),document.body)]})},ny={intro:{bg:"bg-purple-500/15",border:"border-purple-500/40",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/15",border:"border-blue-500/40",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/15",border:"border-cyan-500/40",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/15",border:"border-amber-500/40",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/15",border:"border-emerald-500/40",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/15",border:"border-rose-500/40",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/15",border:"border-slate-500/40",accent:"bg-slate-500"}},ij=({section:n,songTimeSignature:e,className:t,onSlotClick:s})=>{const{tempo:a}=Ht(),o=Yh(),u=ny[n.type]||ny.custom,c=n.timeSignature||e,h=c[0],f=n.measures.length,[p,y]=ee.useState(!1),[_,b]=ee.useState(null),A=ee.useRef([]),N=252,k=15,T=52,R=Math.floor(N/f),D=Math.max(k,Math.min(T,R)),V=f>8,B=f>12,W=()=>{A.current.forEach(L=>clearTimeout(L)),A.current=[],y(!1),b(null)};ee.useEffect(()=>(W(),()=>{A.current.forEach(L=>clearTimeout(L)),A.current=[]}),[n.id]);const H=async()=>{if(p){W();return}xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Fl(),y(!0);const L=60/a*1e3,F=n.measures[0]?.beats.length||h,te=h/F,j=te*L;let I=0;n.measures.forEach(ae=>{ae.beats.forEach(Z=>{const re=I*j,le=window.setTimeout(()=>{b(Z.id)},re);if(A.current.push(le),Z.chord&&Z.chord.notes&&Z.chord.notes.length>0){const fe=window.setTimeout(()=>{const E=`${4/Math.min(te,h)}n`;Br(Z.chord.notes,E)},re);A.current.push(fe)}I++})});const X=n.measures.reduce((ae,Z)=>ae+Z.beats.length,0),P=window.setTimeout(()=>{y(!1),b(null),A.current=[]},X*j);A.current.push(P)};return g.jsx("div",{className:Vt("w-full",t),children:g.jsxs("div",{className:Vt("rounded-lg border overflow-hidden transition-all",u.bg,u.border),children:[g.jsx("div",{className:Vt("h-1 w-full",u.accent)}),g.jsx("div",{className:"pl-2 pr-3 py-2 overflow-hidden",style:{maxHeight:B?"80px":V?"100px":"120px"},children:g.jsx("div",{className:"flex gap-0.5",style:{minWidth:"min-content",width:"100%"},children:n.measures.map((L,F)=>{const te=L.beats.length;return g.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",style:{minWidth:`${D}px`,maxWidth:`${D}px`},children:[!B&&g.jsxs("div",{className:"h-3 flex items-center justify-between px-0.5",children:[g.jsx("span",{className:Vt("font-mono text-white/30",V?"text-[6px]":"text-[8px]"),children:F+1}),!V&&g.jsx("div",{className:"flex gap-px",children:Array.from({length:Math.min(te,h)}).map((j,I)=>g.jsx("div",{className:"w-0.5 h-1 bg-white/15 rounded-full"},I))})]}),g.jsx("div",{className:"flex-1 rounded overflow-hidden flex gap-px",style:{minHeight:B?"28px":V?"36px":"48px"},children:L.beats.map(j=>{const I=j.chord&&j.chord.notes&&j.chord.notes.length>0,X=j.chord,P=I&&o[X.root]||"#666",ae=_===j.id,Z=L.beats.length;let re="9px";return B?re=Z>2?"5px":"6px":V?re=Z>2?"6px":"7px":re=Z>2?"7px":Z>1?"8px":"9px",I?g.jsx("div",{onClick:()=>s?.(j.id),className:Vt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold truncate transition-all duration-150",ae&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:brightness-110 active:scale-95"),style:{backgroundColor:ae?P:"rgba(0, 0, 0, 0.35)",border:`1.5px solid ${P}`,color:ae?"#fff":P,fontSize:re,padding:"0 2px",textShadow:ae?"0 1px 3px rgba(0,0,0,0.7)":"0 1px 2px rgba(0,0,0,0.5)",boxShadow:ae?`0 0 12px ${P}, 0 0 4px ${P}`:"none"},title:X.symbol,children:Ln(X.symbol)},j.id):g.jsx("div",{onClick:()=>s?.(j.id),className:Vt("flex-1 min-w-0 rounded-sm flex items-center justify-center transition-all duration-150",ae&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:bg-white/10 active:scale-95"),style:{backgroundColor:ae?"rgba(99, 102, 241, 0.5)":"rgba(255, 255, 255, 0.03)",border:ae?"1.5px solid rgba(99, 102, 241, 0.8)":"1px dashed rgba(255, 255, 255, 0.1)",boxShadow:ae?"0 0 8px rgba(99, 102, 241, 0.5)":"none"},children:g.jsx("span",{className:Vt("transition-colors duration-150",ae?"text-white/60":"text-white/10",V?"text-[6px]":"text-[8px]"),children:""})},j.id)})})]},L.id)})})}),g.jsxs("div",{className:"px-2 py-1.5 bg-black/20 border-t border-white/5 flex items-center gap-2",children:[g.jsx("button",{onClick:H,className:Vt("w-5 h-5 rounded-full flex items-center justify-center transition-all","hover:scale-110 active:scale-95",p?"bg-red-500/80 text-white":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"),title:p?"Stop":"Play section once",children:p?g.jsx(uw,{size:8}):g.jsx(nd,{size:10,className:"ml-0.5"})}),g.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3",children:[g.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[c[0],"/",c[1]]}),g.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-white/20"}),g.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[f," bar",f!==1?"s":""]})]})]})]})})};function aj(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ee.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const r0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rd(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function O2(n){return"nodeType"in n}function _i(n){var e,t;return n?rd(n)?n:O2(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function D2(n){const{Document:e}=_i(n);return n instanceof e}function kf(n){return rd(n)?!1:n instanceof _i(n).HTMLElement}function ww(n){return n instanceof _i(n).SVGElement}function sd(n){return n?rd(n)?n.document:O2(n)?D2(n)?n:kf(n)||ww(n)?n.ownerDocument:document:document:document}const po=r0?ee.useLayoutEffect:ee.useEffect;function s0(n){const e=ee.useRef(n);return po(()=>{e.current=n}),ee.useCallback(function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function oj(){const n=ee.useRef(null),e=ee.useCallback((s,a)=>{n.current=setInterval(s,a)},[]),t=ee.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function hf(n,e){e===void 0&&(e=[n]);const t=ee.useRef(n);return po(()=>{t.current!==n&&(t.current=n)},e),t}function jf(n,e){const t=ee.useRef();return ee.useMemo(()=>{const s=n(t.current);return t.current=s,s},[...e])}function Ap(n){const e=s0(n),t=ee.useRef(null),s=ee.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,s]}function Cp(n){const e=ee.useRef();return ee.useEffect(()=>{e.current=n},[n]),e.current}let Lm={};function Ef(n,e){return ee.useMemo(()=>{if(e)return e;const t=Lm[n]==null?0:Lm[n]+1;return Lm[n]=t,n+"-"+t},[n,e])}function _w(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((o,u)=>{const c=Object.entries(u);for(const[h,f]of c){const p=o[h];p!=null&&(o[h]=p+n*f)}return o},{...e})}}const Dh=_w(1),df=_w(-1);function lj(n){return"clientX"in n&&"clientY"in n}function i0(n){if(!n)return!1;const{KeyboardEvent:e}=_i(n.target);return e&&n instanceof e}function cj(n){if(!n)return!1;const{TouchEvent:e}=_i(n.target);return e&&n instanceof e}function Tp(n){if(cj(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return lj(n)?{x:n.clientX,y:n.clientY}:null}const $o=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[$o.Translate.toString(n),$o.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:s}=n;return e+" "+t+"ms "+s}}}),ry="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uj(n){return n.matches(ry)?n:n.querySelector(ry)}const hj={display:"none"};function dj(n){let{id:e,value:t}=n;return Cn.createElement("div",{id:e,style:hj},t)}function fj(n){let{id:e,announcement:t,ariaLiveType:s="assertive"}=n;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Cn.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},t)}function pj(){const[n,e]=ee.useState("");return{announce:ee.useCallback(s=>{s!=null&&e(s)},[]),announcement:n}}const Sw=ee.createContext(null);function mj(n){const e=ee.useContext(Sw);ee.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function gj(){const[n]=ee.useState(()=>new Set),e=ee.useCallback(s=>(n.add(s),()=>n.delete(s)),[n]);return[ee.useCallback(s=>{let{type:a,event:o}=s;n.forEach(u=>{var c;return(c=u[a])==null?void 0:c.call(u,o)})},[n]),e]}const bj={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vj={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function yj(n){let{announcements:e=vj,container:t,hiddenTextDescribedById:s,screenReaderInstructions:a=bj}=n;const{announce:o,announcement:u}=pj(),c=Ef("DndLiveRegion"),[h,f]=ee.useState(!1);if(ee.useEffect(()=>{f(!0)},[]),mj(ee.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:b}=y;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(y){let{active:_,over:b}=y;o(e.onDragOver({active:_,over:b}))},onDragEnd(y){let{active:_,over:b}=y;o(e.onDragEnd({active:_,over:b}))},onDragCancel(y){let{active:_,over:b}=y;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!h)return null;const p=Cn.createElement(Cn.Fragment,null,Cn.createElement(dj,{id:s,value:a.draggable}),Cn.createElement(fj,{id:c,announcement:u}));return t?Ho.createPortal(p,t):p}var Ls;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Ls||(Ls={}));function kp(){}function El(n,e){return ee.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function R2(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ee.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const mo=Object.freeze({x:0,y:0});function Nw(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function xj(n,e){const t=Tp(n);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function Aw(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return t-s}function wj(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return s-t}function sy(n){let{left:e,top:t,height:s,width:a}=n;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+s},{x:e+a,y:t+s}]}function Cw(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function iy(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const I2=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=iy(e,e.left,e.top),o=[];for(const u of s){const{id:c}=u,h=t.get(c);if(h){const f=Nw(iy(h),a);o.push({id:c,data:{droppableContainer:u,value:f}})}}return o.sort(Aw)},_j=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=sy(e),o=[];for(const u of s){const{id:c}=u,h=t.get(c);if(h){const f=sy(h),p=a.reduce((_,b,A)=>_+Nw(f[A],b),0),y=Number((p/4).toFixed(4));o.push({id:c,data:{droppableContainer:u,value:y}})}}return o.sort(Aw)};function Sj(n,e){const t=Math.max(e.top,n.top),s=Math.max(e.left,n.left),a=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),u=a-s,c=o-t;if(s<a&&t<o){const h=e.width*e.height,f=n.width*n.height,p=u*c,y=p/(h+f-p);return Number(y.toFixed(4))}return 0}const Nj=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=[];for(const o of s){const{id:u}=o,c=t.get(u);if(c){const h=Sj(c,e);h>0&&a.push({id:u,data:{droppableContainer:o,value:h}})}}return a.sort(wj)};function Aj(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Tw(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:mo}function Cj(n){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((u,c)=>({...u,top:u.top+n*c.y,bottom:u.bottom+n*c.y,left:u.left+n*c.x,right:u.right+n*c.x}),{...t})}}const Tj=Cj(1);function kw(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function kj(n,e,t){const s=kw(e);if(!s)return n;const{scaleX:a,scaleY:o,x:u,y:c}=s,h=n.left-u-(1-a)*parseFloat(t),f=n.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=a?n.width/a:n.width,y=o?n.height/o:n.height;return{width:p,height:y,top:f,right:h+p,bottom:f+y,left:h}}const jj={ignoreTransform:!1};function id(n,e){e===void 0&&(e=jj);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:p}=_i(n).getComputedStyle(n);f&&(t=kj(t,f,p))}const{top:s,left:a,width:o,height:u,bottom:c,right:h}=t;return{top:s,left:a,width:o,height:u,bottom:c,right:h}}function ay(n){return id(n,{ignoreTransform:!0})}function Ej(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Mj(n,e){return e===void 0&&(e=_i(n).getComputedStyle(n)),e.position==="fixed"}function Lj(n,e){e===void 0&&(e=_i(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?t.test(o):!1})}function a0(n,e){const t=[];function s(a){if(e!=null&&t.length>=e||!a)return t;if(D2(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!kf(a)||ww(a)||t.includes(a))return t;const o=_i(n).getComputedStyle(a);return a!==n&&Lj(a,o)&&t.push(a),Mj(a,o)?t:s(a.parentNode)}return n?s(n):t}function jw(n){const[e]=a0(n,1);return e??null}function Om(n){return!r0||!n?null:rd(n)?n:O2(n)?D2(n)||n===sd(n).scrollingElement?window:kf(n)?n:null:null}function Ew(n){return rd(n)?n.scrollX:n.scrollLeft}function Mw(n){return rd(n)?n.scrollY:n.scrollTop}function wg(n){return{x:Ew(n),y:Mw(n)}}var Us;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Us||(Us={}));function Lw(n){return!r0||!n?!1:n===document.scrollingElement}function Ow(n){const e={x:0,y:0},t=Lw(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},s={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},a=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,u=n.scrollTop>=s.y,c=n.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:u,isRight:c,maxScroll:s,minScroll:e}}const Oj={x:.2,y:.2};function Dj(n,e,t,s,a){let{top:o,left:u,right:c,bottom:h}=t;s===void 0&&(s=10),a===void 0&&(a=Oj);const{isTop:f,isBottom:p,isLeft:y,isRight:_}=Ow(n),b={x:0,y:0},A={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!f&&o<=e.top+N.height?(b.y=Us.Backward,A.y=s*Math.abs((e.top+N.height-o)/N.height)):!p&&h>=e.bottom-N.height&&(b.y=Us.Forward,A.y=s*Math.abs((e.bottom-N.height-h)/N.height)),!_&&c>=e.right-N.width?(b.x=Us.Forward,A.x=s*Math.abs((e.right-N.width-c)/N.width)):!y&&u<=e.left+N.width&&(b.x=Us.Backward,A.x=s*Math.abs((e.left+N.width-u)/N.width)),{direction:b,speed:A}}function Rj(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:e,left:t,right:s,bottom:a}=n.getBoundingClientRect();return{top:e,left:t,right:s,bottom:a,width:n.clientWidth,height:n.clientHeight}}function Dw(n){return n.reduce((e,t)=>Dh(e,wg(t)),mo)}function Ij(n){return n.reduce((e,t)=>e+Ew(t),0)}function Vj(n){return n.reduce((e,t)=>e+Mw(t),0)}function Rw(n,e){if(e===void 0&&(e=id),!n)return;const{top:t,left:s,bottom:a,right:o}=e(n);jw(n)&&(a<=0||o<=0||t>=window.innerHeight||s>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Fj=[["x",["left","right"],Ij],["y",["top","bottom"],Vj]];class V2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=a0(t),a=Dw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,u,c]of Fj)for(const h of u)Object.defineProperty(this,h,{get:()=>{const f=c(s),p=a[o]-f;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qd{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var a;(a=this.target)==null||a.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function Bj(n){const{EventTarget:e}=_i(n);return n instanceof e?n:sd(n)}function Dm(n,e){const t=Math.abs(n.x),s=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var ja;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(ja||(ja={}));function oy(n){n.preventDefault()}function Pj(n){n.stopPropagation()}var Bn;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Bn||(Bn={}));const Iw={start:[Bn.Space,Bn.Enter],cancel:[Bn.Esc],end:[Bn.Space,Bn.Enter,Bn.Tab]},zj=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Bn.Right:return{...t,x:t.x+25};case Bn.Left:return{...t,x:t.x-25};case Bn.Down:return{...t,y:t.y+25};case Bn.Up:return{...t,y:t.y-25}}};class Mf{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Qd(sd(t)),this.windowListeners=new Qd(_i(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ja.Resize,this.handleCancel),this.windowListeners.add(ja.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ja.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&Rw(s),t(mo)}handleKeyDown(e){if(i0(e)){const{active:t,context:s,options:a}=this.props,{keyboardCodes:o=Iw,coordinateGetter:u=zj,scrollBehavior:c="smooth"}=a,{code:h}=e;if(o.end.includes(h)){this.handleEnd(e);return}if(o.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:f}=s.current,p=f?{x:f.left,y:f.top}:mo;this.referenceCoordinates||(this.referenceCoordinates=p);const y=u(e,{active:t,context:s.current,currentCoordinates:p});if(y){const _=df(y,p),b={x:0,y:0},{scrollableAncestors:A}=s.current;for(const N of A){const k=e.code,{isTop:T,isRight:R,isLeft:D,isBottom:V,maxScroll:B,minScroll:W}=Ow(N),H=Rj(N),L={x:Math.min(k===Bn.Right?H.right-H.width/2:H.right,Math.max(k===Bn.Right?H.left:H.left+H.width/2,y.x)),y:Math.min(k===Bn.Down?H.bottom-H.height/2:H.bottom,Math.max(k===Bn.Down?H.top:H.top+H.height/2,y.y))},F=k===Bn.Right&&!R||k===Bn.Left&&!D,te=k===Bn.Down&&!V||k===Bn.Up&&!T;if(F&&L.x!==y.x){const j=N.scrollLeft+_.x,I=k===Bn.Right&&j<=B.x||k===Bn.Left&&j>=W.x;if(I&&!_.y){N.scrollTo({left:j,behavior:c});return}I?b.x=N.scrollLeft-j:b.x=k===Bn.Right?N.scrollLeft-B.x:N.scrollLeft-W.x,b.x&&N.scrollBy({left:-b.x,behavior:c});break}else if(te&&L.y!==y.y){const j=N.scrollTop+_.y,I=k===Bn.Down&&j<=B.y||k===Bn.Up&&j>=W.y;if(I&&!_.x){N.scrollTo({top:j,behavior:c});return}I?b.y=N.scrollTop-j:b.y=k===Bn.Down?N.scrollTop-B.y:N.scrollTop-W.y,b.y&&N.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Dh(df(y,this.referenceCoordinates),b))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mf.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:s=Iw,onActivation:a}=e,{active:o}=t;const{code:u}=n.nativeEvent;if(s.start.includes(u)){const c=o.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),a?.({event:n.nativeEvent}),!0)}return!1}}];function ly(n){return!!(n&&"distance"in n)}function cy(n){return!!(n&&"delay"in n)}class F2{constructor(e,t,s){var a;s===void 0&&(s=Bj(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:u}=o;this.props=e,this.events=t,this.document=sd(u),this.documentListeners=new Qd(this.document),this.listeners=new Qd(s),this.windowListeners=new Qd(_i(u)),this.initialCoordinates=(a=Tp(o))!=null?a:mo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ja.Resize,this.handleCancel),this.windowListeners.add(ja.DragStart,oy),this.windowListeners.add(ja.VisibilityChange,this.handleCancel),this.windowListeners.add(ja.ContextMenu,oy),this.documentListeners.add(ja.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(cy(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(ly(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(ja.Click,Pj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ja.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:u,options:{activationConstraint:c}}=o;if(!a)return;const h=(t=Tp(e))!=null?t:mo,f=df(a,h);if(!s&&c){if(ly(c)){if(c.tolerance!=null&&Dm(f,c.tolerance))return this.handleCancel();if(Dm(f,c.distance))return this.handleStart()}if(cy(c)&&Dm(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),u(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Bn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const qj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lf extends F2{constructor(e){const{event:t}=e,s=sd(t.target);super(e,qj,s)}}Lf.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const Uj={move:{name:"mousemove"},end:{name:"mouseup"}};var _g;(function(n){n[n.RightClick=2]="RightClick"})(_g||(_g={}));class Hj extends F2{constructor(e){super(e,Uj,sd(e.event.target))}}Hj.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return t.button===_g.RightClick?!1:(s?.({event:t}),!0)}}];const Rm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class o0 extends F2{constructor(e){super(e,Rm)}static setup(){return window.addEventListener(Rm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rm.move.name,e)};function e(){}}}o0.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;const{touches:a}=t;return a.length>1?!1:(s?.({event:t}),!0)}}];var Jd;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Jd||(Jd={}));var jp;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(jp||(jp={}));function Wj(n){let{acceleration:e,activator:t=Jd.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:u=5,order:c=jp.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:p,delta:y,threshold:_}=n;const b=$j({delta:y,disabled:!o}),[A,N]=oj(),k=ee.useRef({x:0,y:0}),T=ee.useRef({x:0,y:0}),R=ee.useMemo(()=>{switch(t){case Jd.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Jd.DraggableRect:return a}},[t,a,h]),D=ee.useRef(null),V=ee.useCallback(()=>{const W=D.current;if(!W)return;const H=k.current.x*T.current.x,L=k.current.y*T.current.y;W.scrollBy(H,L)},[]),B=ee.useMemo(()=>c===jp.TreeOrder?[...f].reverse():f,[c,f]);ee.useEffect(()=>{if(!o||!f.length||!R){N();return}for(const W of B){if(s?.(W)===!1)continue;const H=f.indexOf(W),L=p[H];if(!L)continue;const{direction:F,speed:te}=Dj(W,L,R,e,_);for(const j of["x","y"])b[j][F[j]]||(te[j]=0,F[j]=0);if(te.x>0||te.y>0){N(),D.current=W,A(V,u),k.current=te,T.current=F;return}}k.current={x:0,y:0},T.current={x:0,y:0},N()},[e,V,s,N,o,u,JSON.stringify(R),JSON.stringify(b),A,f,B,p,JSON.stringify(_)])}const Gj={x:{[Us.Backward]:!1,[Us.Forward]:!1},y:{[Us.Backward]:!1,[Us.Forward]:!1}};function $j(n){let{delta:e,disabled:t}=n;const s=Cp(e);return jf(a=>{if(t||!s||!a)return Gj;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Us.Backward]:a.x[Us.Backward]||o.x===-1,[Us.Forward]:a.x[Us.Forward]||o.x===1},y:{[Us.Backward]:a.y[Us.Backward]||o.y===-1,[Us.Forward]:a.y[Us.Forward]||o.y===1}}},[t,e,s])}function Yj(n,e){const t=e!=null?n.get(e):void 0,s=t?t.node.current:null;return jf(a=>{var o;return e==null?null:(o=s??a)!=null?o:null},[s,e])}function Xj(n,e){return ee.useMemo(()=>n.reduce((t,s)=>{const{sensor:a}=s,o=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...o]},[]),[n,e])}var ff;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(ff||(ff={}));var Sg;(function(n){n.Optimized="optimized"})(Sg||(Sg={}));const uy=new Map;function Zj(n,e){let{dragging:t,dependencies:s,config:a}=e;const[o,u]=ee.useState(null),{frequency:c,measure:h,strategy:f}=a,p=ee.useRef(n),y=k(),_=hf(y),b=ee.useCallback(function(T){T===void 0&&(T=[]),!_.current&&u(R=>R===null?T:R.concat(T.filter(D=>!R.includes(D))))},[_]),A=ee.useRef(null),N=jf(T=>{if(y&&!t)return uy;if(!T||T===uy||p.current!==n||o!=null){const R=new Map;for(let D of n){if(!D)continue;if(o&&o.length>0&&!o.includes(D.id)&&D.rect.current){R.set(D.id,D.rect.current);continue}const V=D.node.current,B=V?new V2(h(V),V):null;D.rect.current=B,B&&R.set(D.id,B)}return R}return T},[n,o,t,y,h]);return ee.useEffect(()=>{p.current=n},[n]),ee.useEffect(()=>{y||b()},[t,y]),ee.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),ee.useEffect(()=>{y||typeof c!="number"||A.current!==null||(A.current=setTimeout(()=>{b(),A.current=null},c))},[c,y,b,...s]),{droppableRects:N,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(f){case ff.Always:return!1;case ff.BeforeDragging:return t;default:return!t}}}function B2(n,e){return jf(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Kj(n,e){return B2(n,e)}function Qj(n){let{callback:e,disabled:t}=n;const s=s0(e),a=ee.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,t]);return ee.useEffect(()=>()=>a?.disconnect(),[a]),a}function l0(n){let{callback:e,disabled:t}=n;const s=s0(e),a=ee.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[t]);return ee.useEffect(()=>()=>a?.disconnect(),[a]),a}function Jj(n){return new V2(id(n),n)}function hy(n,e,t){e===void 0&&(e=Jj);const[s,a]=ee.useState(null);function o(){a(h=>{if(!n)return null;if(n.isConnected===!1){var f;return(f=h??t)!=null?f:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const u=Qj({callback(h){if(n)for(const f of h){const{type:p,target:y}=f;if(p==="childList"&&y instanceof HTMLElement&&y.contains(n)){o();break}}}}),c=l0({callback:o});return po(()=>{o(),n?(c?.observe(n),u?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),u?.disconnect())},[n]),s}function e7(n){const e=B2(n);return Tw(n,e)}const dy=[];function t7(n){const e=ee.useRef(n),t=jf(s=>n?s&&s!==dy&&n&&e.current&&n.parentNode===e.current.parentNode?s:a0(n):dy,[n]);return ee.useEffect(()=>{e.current=n},[n]),t}function n7(n){const[e,t]=ee.useState(null),s=ee.useRef(n),a=ee.useCallback(o=>{const u=Om(o.target);u&&t(c=>c?(c.set(u,wg(u)),new Map(c)):null)},[]);return ee.useEffect(()=>{const o=s.current;if(n!==o){u(o);const c=n.map(h=>{const f=Om(h);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,wg(f)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),s.current=n}return()=>{u(n),u(o)};function u(c){c.forEach(h=>{const f=Om(h);f?.removeEventListener("scroll",a)})}},[a,n]),ee.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,u)=>Dh(o,u),mo):Dw(n):mo,[n,e])}function fy(n,e){e===void 0&&(e=[]);const t=ee.useRef(null);return ee.useEffect(()=>{t.current=null},e),ee.useEffect(()=>{const s=n!==mo;s&&!t.current&&(t.current=n),!s&&t.current&&(t.current=null)},[n]),t.current?df(n,t.current):mo}function r7(n){ee.useEffect(()=>{if(!r0)return;const e=n.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function s7(n,e){return ee.useMemo(()=>n.reduce((t,s)=>{let{eventName:a,handler:o}=s;return t[a]=u=>{o(u,e)},t},{}),[n,e])}function Vw(n){return ee.useMemo(()=>n?Ej(n):null,[n])}const py=[];function i7(n,e){e===void 0&&(e=id);const[t]=n,s=Vw(t?_i(t):null),[a,o]=ee.useState(py);function u(){o(()=>n.length?n.map(h=>Lw(h)?s:new V2(e(h),h)):py)}const c=l0({callback:u});return po(()=>{c?.disconnect(),u(),n.forEach(h=>c?.observe(h))},[n]),a}function Fw(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return kf(e)?e:n}function a7(n){let{measure:e}=n;const[t,s]=ee.useState(null),a=ee.useCallback(f=>{for(const{target:p}of f)if(kf(p)){s(y=>{const _=e(p);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=l0({callback:a}),u=ee.useCallback(f=>{const p=Fw(f);o?.disconnect(),p&&o?.observe(p),s(p?e(p):null)},[e,o]),[c,h]=Ap(u);return ee.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const o7=[{sensor:Lf,options:{}},{sensor:Mf,options:{}}],l7={current:{}},X1={draggable:{measure:ay},droppable:{measure:ay,strategy:ff.WhileDragging,frequency:Sg.Optimized},dragOverlay:{measure:id}};class ef extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const c7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ef,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:X1,measureDroppableContainers:kp,windowRect:null,measuringScheduled:!1},Bw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kp,draggableNodes:new Map,over:null,measureDroppableContainers:kp},Of=ee.createContext(Bw),Pw=ee.createContext(c7);function u7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ef}}}function h7(n,e){switch(e.type){case Ls.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ls.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Ls.DragEnd:case Ls.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ls.RegisterDroppable:{const{element:t}=e,{id:s}=t,a=new ef(n.droppable.containers);return a.set(s,t),{...n,droppable:{...n.droppable,containers:a}}}case Ls.SetDroppableDisabled:{const{id:t,key:s,disabled:a}=e,o=n.droppable.containers.get(t);if(!o||s!==o.key)return n;const u=new ef(n.droppable.containers);return u.set(t,{...o,disabled:a}),{...n,droppable:{...n.droppable,containers:u}}}case Ls.UnregisterDroppable:{const{id:t,key:s}=e,a=n.droppable.containers.get(t);if(!a||s!==a.key)return n;const o=new ef(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function d7(n){let{disabled:e}=n;const{active:t,activatorEvent:s,draggableNodes:a}=ee.useContext(Of),o=Cp(s),u=Cp(t?.id);return ee.useEffect(()=>{if(!e&&!s&&o&&u!=null){if(!i0(o)||document.activeElement===o.target)return;const c=a.get(u);if(!c)return;const{activatorNode:h,node:f}=c;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[h.current,f.current]){if(!p)continue;const y=uj(p);if(y){y.focus();break}}})}},[s,e,a,u,o]),null}function zw(n,e){let{transform:t,...s}=e;return n!=null&&n.length?n.reduce((a,o)=>o({transform:a,...s}),t):t}function f7(n){return ee.useMemo(()=>({draggable:{...X1.draggable,...n?.draggable},droppable:{...X1.droppable,...n?.droppable},dragOverlay:{...X1.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function p7(n){let{activeNode:e,measure:t,initialRect:s,config:a=!0}=n;const o=ee.useRef(!1),{x:u,y:c}=typeof a=="boolean"?{x:a,y:a}:a;po(()=>{if(!u&&!c||!e){o.current=!1;return}if(o.current||!s)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const p=t(f),y=Tw(p,s);if(u||(y.x=0),c||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=jw(f);_&&_.scrollBy({top:y.y,left:y.x})}},[e,u,c,s,t])}const c0=ee.createContext({...mo,scaleX:1,scaleY:1});var Sc;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Sc||(Sc={}));const P2=ee.memo(function(e){var t,s,a,o;let{id:u,accessibility:c,autoScroll:h=!0,children:f,sensors:p=o7,collisionDetection:y=Nj,measuring:_,modifiers:b,...A}=e;const N=ee.useReducer(h7,void 0,u7),[k,T]=N,[R,D]=gj(),[V,B]=ee.useState(Sc.Uninitialized),W=V===Sc.Initialized,{draggable:{active:H,nodes:L,translate:F},droppable:{containers:te}}=k,j=H!=null?L.get(H):null,I=ee.useRef({initial:null,translated:null}),X=ee.useMemo(()=>{var At;return H!=null?{id:H,data:(At=j?.data)!=null?At:l7,rect:I}:null},[H,j]),P=ee.useRef(null),[ae,Z]=ee.useState(null),[re,le]=ee.useState(null),fe=hf(A,Object.values(A)),_e=Ef("DndDescribedBy",u),z=ee.useMemo(()=>te.getEnabled(),[te]),E=f7(_),{droppableRects:$,measureDroppableContainers:G,measuringScheduled:Q}=Zj(z,{dragging:W,dependencies:[F.x,F.y],config:E.droppable}),ie=Yj(L,H),pe=ee.useMemo(()=>re?Tp(re):null,[re]),de=en(),ye=Kj(ie,E.draggable.measure);p7({activeNode:H!=null?L.get(H):null,config:de.layoutShiftCompensation,initialRect:ye,measure:E.draggable.measure});const Se=hy(ie,E.draggable.measure,ye),Be=hy(ie?ie.parentElement:null),Qe=ee.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:te,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Xe=te.getNodeFor((t=Qe.current.over)==null?void 0:t.id),ot=a7({measure:E.dragOverlay.measure}),Y=(s=ot.nodeRef.current)!=null?s:ie,Ie=W?(a=ot.rect)!=null?a:Se:null,vt=!!(ot.nodeRef.current&&ot.rect),et=e7(vt?null:Se),Re=Vw(Y?_i(Y):null),it=t7(W?Xe??ie:null),qe=i7(it),ht=zw(b,{transform:{x:F.x-et.x,y:F.y-et.y,scaleX:1,scaleY:1},activatorEvent:re,active:X,activeNodeRect:Se,containerNodeRect:Be,draggingNodeRect:Ie,over:Qe.current.over,overlayNodeRect:ot.rect,scrollableAncestors:it,scrollableAncestorRects:qe,windowRect:Re}),Te=pe?Dh(pe,F):null,tt=n7(it),bt=fy(tt),mt=fy(tt,[Se]),st=Dh(ht,bt),dt=Ie?Tj(Ie,ht):null,gt=X&&dt?y({active:X,collisionRect:dt,droppableRects:$,droppableContainers:z,pointerCoordinates:Te}):null,Nt=Cw(gt,"id"),[Ee,ft]=ee.useState(null),ut=vt?ht:Dh(ht,mt),We=Aj(ut,(o=Ee?.rect)!=null?o:null,Se),at=ee.useRef(null),xt=ee.useCallback((At,wt)=>{let{sensor:qt,options:wn}=wt;if(P.current==null)return;const Me=L.get(P.current);if(!Me)return;const yt=At.nativeEvent,we=new qt({active:P.current,activeNode:Me,event:yt,options:wn,context:Qe,onAbort(pt){if(!L.get(pt))return;const{onDragAbort:Bt}=fe.current,sn={id:pt};Bt?.(sn),R({type:"onDragAbort",event:sn})},onPending(pt,Et,Bt,sn){if(!L.get(pt))return;const{onDragPending:dn}=fe.current,fn={id:pt,constraint:Et,initialCoordinates:Bt,offset:sn};dn?.(fn),R({type:"onDragPending",event:fn})},onStart(pt){const Et=P.current;if(Et==null)return;const Bt=L.get(Et);if(!Bt)return;const{onDragStart:sn}=fe.current,Yt={activatorEvent:yt,active:{id:Et,data:Bt.data,rect:I}};Ho.unstable_batchedUpdates(()=>{sn?.(Yt),B(Sc.Initializing),T({type:Ls.DragStart,initialCoordinates:pt,active:Et}),R({type:"onDragStart",event:Yt}),Z(at.current),le(yt)})},onMove(pt){T({type:Ls.DragMove,coordinates:pt})},onEnd:Ve(Ls.DragEnd),onCancel:Ve(Ls.DragCancel)});at.current=we;function Ve(pt){return async function(){const{active:Bt,collisions:sn,over:Yt,scrollAdjustedTranslate:dn}=Qe.current;let fn=null;if(Bt&&dn){const{cancelDrop:Jn}=fe.current;fn={activatorEvent:yt,active:Bt,collisions:sn,delta:dn,over:Yt},pt===Ls.DragEnd&&typeof Jn=="function"&&await Promise.resolve(Jn(fn))&&(pt=Ls.DragCancel)}P.current=null,Ho.unstable_batchedUpdates(()=>{T({type:pt}),B(Sc.Uninitialized),ft(null),Z(null),le(null),at.current=null;const Jn=pt===Ls.DragEnd?"onDragEnd":"onDragCancel";if(fn){const Gn=fe.current[Jn];Gn?.(fn),R({type:Jn,event:fn})}})}}},[L]),ct=ee.useCallback((At,wt)=>(qt,wn)=>{const Me=qt.nativeEvent,yt=L.get(wn);if(P.current!==null||!yt||Me.dndKit||Me.defaultPrevented)return;const we={active:yt};At(qt,wt.options,we)===!0&&(Me.dndKit={capturedBy:wt.sensor},P.current=wn,xt(qt,wt))},[L,xt]),nn=Xj(p,ct);r7(p),po(()=>{Se&&V===Sc.Initializing&&B(Sc.Initialized)},[Se,V]),ee.useEffect(()=>{const{onDragMove:At}=fe.current,{active:wt,activatorEvent:qt,collisions:wn,over:Me}=Qe.current;if(!wt||!qt)return;const yt={active:wt,activatorEvent:qt,collisions:wn,delta:{x:st.x,y:st.y},over:Me};Ho.unstable_batchedUpdates(()=>{At?.(yt),R({type:"onDragMove",event:yt})})},[st.x,st.y]),ee.useEffect(()=>{const{active:At,activatorEvent:wt,collisions:qt,droppableContainers:wn,scrollAdjustedTranslate:Me}=Qe.current;if(!At||P.current==null||!wt||!Me)return;const{onDragOver:yt}=fe.current,we=wn.get(Nt),Ve=we&&we.rect.current?{id:we.id,rect:we.rect.current,data:we.data,disabled:we.disabled}:null,pt={active:At,activatorEvent:wt,collisions:qt,delta:{x:Me.x,y:Me.y},over:Ve};Ho.unstable_batchedUpdates(()=>{ft(Ve),yt?.(pt),R({type:"onDragOver",event:pt})})},[Nt]),po(()=>{Qe.current={activatorEvent:re,active:X,activeNode:ie,collisionRect:dt,collisions:gt,droppableRects:$,draggableNodes:L,draggingNode:Y,draggingNodeRect:Ie,droppableContainers:te,over:Ee,scrollableAncestors:it,scrollAdjustedTranslate:st},I.current={initial:Ie,translated:dt}},[X,ie,gt,dt,L,Y,Ie,$,te,Ee,it,st]),Wj({...de,delta:F,draggingRect:dt,pointerCoordinates:Te,scrollableAncestors:it,scrollableAncestorRects:qe});const jt=ee.useMemo(()=>({active:X,activeNode:ie,activeNodeRect:Se,activatorEvent:re,collisions:gt,containerNodeRect:Be,dragOverlay:ot,draggableNodes:L,droppableContainers:te,droppableRects:$,over:Ee,measureDroppableContainers:G,scrollableAncestors:it,scrollableAncestorRects:qe,measuringConfiguration:E,measuringScheduled:Q,windowRect:Re}),[X,ie,Se,re,gt,Be,ot,L,te,$,Ee,G,it,qe,E,Q,Re]),Ft=ee.useMemo(()=>({activatorEvent:re,activators:nn,active:X,activeNodeRect:Se,ariaDescribedById:{draggable:_e},dispatch:T,draggableNodes:L,over:Ee,measureDroppableContainers:G}),[re,nn,X,Se,T,_e,L,Ee,G]);return Cn.createElement(Sw.Provider,{value:D},Cn.createElement(Of.Provider,{value:Ft},Cn.createElement(Pw.Provider,{value:jt},Cn.createElement(c0.Provider,{value:We},f)),Cn.createElement(d7,{disabled:c?.restoreFocus===!1})),Cn.createElement(yj,{...c,hiddenTextDescribedById:_e}));function en(){const At=ae?.autoScrollEnabled===!1,wt=typeof h=="object"?h.enabled===!1:h===!1,qt=W&&!At&&!wt;return typeof h=="object"?{...h,enabled:qt}:{enabled:qt}}}),m7=ee.createContext(null),my="button",g7="Draggable";function b7(n){let{id:e,data:t,disabled:s=!1,attributes:a}=n;const o=Ef(g7),{activators:u,activatorEvent:c,active:h,activeNodeRect:f,ariaDescribedById:p,draggableNodes:y,over:_}=ee.useContext(Of),{role:b=my,roleDescription:A="draggable",tabIndex:N=0}=a??{},k=h?.id===e,T=ee.useContext(k?c0:m7),[R,D]=Ap(),[V,B]=Ap(),W=s7(u,e),H=hf(t);po(()=>(y.set(e,{id:e,key:o,node:R,activatorNode:V,data:H}),()=>{const F=y.get(e);F&&F.key===o&&y.delete(e)}),[y,e]);const L=ee.useMemo(()=>({role:b,tabIndex:N,"aria-disabled":s,"aria-pressed":k&&b===my?!0:void 0,"aria-roledescription":A,"aria-describedby":p.draggable}),[s,b,N,k,A,p.draggable]);return{active:h,activatorEvent:c,activeNodeRect:f,attributes:L,isDragging:k,listeners:s?void 0:W,node:R,over:_,setNodeRef:D,setActivatorNodeRef:B,transform:T}}function qw(){return ee.useContext(Pw)}const v7="Droppable",y7={timeout:25};function x7(n){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:a}=n;const o=Ef(v7),{active:u,dispatch:c,over:h,measureDroppableContainers:f}=ee.useContext(Of),p=ee.useRef({disabled:t}),y=ee.useRef(!1),_=ee.useRef(null),b=ee.useRef(null),{disabled:A,updateMeasurementsFor:N,timeout:k}={...y7,...a},T=hf(N??s),R=ee.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{f(Array.isArray(T.current)?T.current:[T.current]),b.current=null},k)},[k]),D=l0({callback:R,disabled:A||!u}),V=ee.useCallback((L,F)=>{D&&(F&&(D.unobserve(F),y.current=!1),L&&D.observe(L))},[D]),[B,W]=Ap(V),H=hf(e);return ee.useEffect(()=>{!D||!B.current||(D.disconnect(),y.current=!1,D.observe(B.current))},[B,D]),ee.useEffect(()=>(c({type:Ls.RegisterDroppable,element:{id:s,key:o,disabled:t,node:B,rect:_,data:H}}),()=>c({type:Ls.UnregisterDroppable,key:o,id:s})),[s]),ee.useEffect(()=>{t!==p.current.disabled&&(c({type:Ls.SetDroppableDisabled,id:s,key:o,disabled:t}),p.current.disabled=t)},[s,o,t,c]),{active:u,rect:_,isOver:h?.id===s,node:B,over:h,setNodeRef:W}}function w7(n){let{animation:e,children:t}=n;const[s,a]=ee.useState(null),[o,u]=ee.useState(null),c=Cp(t);return!t&&!s&&c&&a(c),po(()=>{if(!o)return;const h=s?.key,f=s?.props.id;if(h==null||f==null){a(null);return}Promise.resolve(e(f,o)).then(()=>{a(null)})},[e,s,o]),Cn.createElement(Cn.Fragment,null,t,s?ee.cloneElement(s,{ref:u}):null)}const _7={x:0,y:0,scaleX:1,scaleY:1};function S7(n){let{children:e}=n;return Cn.createElement(Of.Provider,{value:Bw},Cn.createElement(c0.Provider,{value:_7},e))}const N7={position:"fixed",touchAction:"none"},A7=n=>i0(n)?"transform 250ms ease":void 0,C7=ee.forwardRef((n,e)=>{let{as:t,activatorEvent:s,adjustScale:a,children:o,className:u,rect:c,style:h,transform:f,transition:p=A7}=n;if(!c)return null;const y=a?f:{...f,scaleX:1,scaleY:1},_={...N7,width:c.width,height:c.height,top:c.top,left:c.left,transform:$o.Transform.toString(y),transformOrigin:a&&s?xj(s,c):void 0,transition:typeof p=="function"?p(s):p,...h};return Cn.createElement(t,{className:u,style:_,ref:e},o)}),T7=n=>e=>{let{active:t,dragOverlay:s}=e;const a={},{styles:o,className:u}=n;if(o!=null&&o.active)for(const[c,h]of Object.entries(o.active))h!==void 0&&(a[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,h));if(o!=null&&o.dragOverlay)for(const[c,h]of Object.entries(o.dragOverlay))h!==void 0&&s.node.style.setProperty(c,h);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&s.node.classList.add(u.dragOverlay),function(){for(const[h,f]of Object.entries(a))t.node.style.setProperty(h,f);u!=null&&u.active&&t.node.classList.remove(u.active)}},k7=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:$o.Transform.toString(e)},{transform:$o.Transform.toString(t)}]},j7={duration:250,easing:"ease",keyframes:k7,sideEffects:T7({styles:{active:{opacity:"0"}}})};function E7(n){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:a}=n;return s0((o,u)=>{if(e===null)return;const c=t.get(o);if(!c)return;const h=c.node.current;if(!h)return;const f=Fw(u);if(!f)return;const{transform:p}=_i(u).getComputedStyle(u),y=kw(p);if(!y)return;const _=typeof e=="function"?e:M7(e);return Rw(h,a.draggable.measure),_({active:{id:o,data:c.data,node:h,rect:a.draggable.measure(h)},draggableNodes:t,dragOverlay:{node:u,rect:a.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:a,transform:y})})}function M7(n){const{duration:e,easing:t,sideEffects:s,keyframes:a}={...j7,...n};return o=>{let{active:u,dragOverlay:c,transform:h,...f}=o;if(!e)return;const p={x:c.rect.left-u.rect.left,y:c.rect.top-u.rect.top},y={scaleX:h.scaleX!==1?u.rect.width*h.scaleX/c.rect.width:1,scaleY:h.scaleY!==1?u.rect.height*h.scaleY/c.rect.height:1},_={x:h.x-p.x,y:h.y-p.y,...y},b=a({...f,active:u,dragOverlay:c,transform:{initial:h,final:_}}),[A]=b,N=b[b.length-1];if(JSON.stringify(A)===JSON.stringify(N))return;const k=s?.({active:u,dragOverlay:c,...f}),T=c.node.animate(b,{duration:e,easing:t,fill:"forwards"});return new Promise(R=>{T.onfinish=()=>{k?.(),R()}})}}let gy=0;function L7(n){return ee.useMemo(()=>{if(n!=null)return gy++,gy},[n])}const Uw=Cn.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:a,transition:o,modifiers:u,wrapperElement:c="div",className:h,zIndex:f=999}=n;const{activatorEvent:p,active:y,activeNodeRect:_,containerNodeRect:b,draggableNodes:A,droppableContainers:N,dragOverlay:k,over:T,measuringConfiguration:R,scrollableAncestors:D,scrollableAncestorRects:V,windowRect:B}=qw(),W=ee.useContext(c0),H=L7(y?.id),L=zw(u,{activatorEvent:p,active:y,activeNodeRect:_,containerNodeRect:b,draggingNodeRect:k.rect,over:T,overlayNodeRect:k.rect,scrollableAncestors:D,scrollableAncestorRects:V,transform:W,windowRect:B}),F=B2(_),te=E7({config:s,draggableNodes:A,droppableContainers:N,measuringConfiguration:R}),j=F?k.setRef:void 0;return Cn.createElement(S7,null,Cn.createElement(w7,{animation:te},y&&H?Cn.createElement(C7,{key:H,id:y.id,ref:j,as:c,activatorEvent:p,adjustScale:e,className:h,transition:o,rect:F,style:{zIndex:f,...a},transform:L},t):null))});function Df(n,e,t){const s=n.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function O7(n,e){return n.reduce((t,s,a)=>{const o=e.get(s);return o&&(t[a]=o),t},Array(n.length))}function D1(n){return n!==null&&n>=0}function D7(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function R7(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const R1={scaleX:1,scaleY:1},z2=n=>{var e;let{rects:t,activeNodeRect:s,activeIndex:a,overIndex:o,index:u}=n;const c=(e=t[a])!=null?e:s;if(!c)return null;const h=I7(t,u,a);if(u===a){const f=t[o];return f?{x:a<o?f.left+f.width-(c.left+c.width):f.left-c.left,y:0,...R1}:null}return u>a&&u<=o?{x:-c.width-h,y:0,...R1}:u<a&&u>=o?{x:c.width+h,y:0,...R1}:{x:0,y:0,...R1}};function I7(n,e,t){const s=n[e],a=n[e-1],o=n[e+1];return!s||!a&&!o?0:t<e?a?s.left-(a.left+a.width):o.left-(s.left+s.width):o?o.left-(s.left+s.width):s.left-(a.left+a.width)}const Hw=n=>{let{rects:e,activeIndex:t,overIndex:s,index:a}=n;const o=Df(e,s,t),u=e[a],c=o[a];return!c||!u?null:{x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height}},Ww="Sortable",Gw=Cn.createContext({activeIndex:-1,containerId:Ww,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Hw,disabled:{draggable:!1,droppable:!1}});function q2(n){let{children:e,id:t,items:s,strategy:a=Hw,disabled:o=!1}=n;const{active:u,dragOverlay:c,droppableRects:h,over:f,measureDroppableContainers:p}=qw(),y=Ef(Ww,t),_=c.rect!==null,b=ee.useMemo(()=>s.map(W=>typeof W=="object"&&"id"in W?W.id:W),[s]),A=u!=null,N=u?b.indexOf(u.id):-1,k=f?b.indexOf(f.id):-1,T=ee.useRef(b),R=!D7(b,T.current),D=k!==-1&&N===-1||R,V=R7(o);po(()=>{R&&A&&p(b)},[R,b,A,p]),ee.useEffect(()=>{T.current=b},[b]);const B=ee.useMemo(()=>({activeIndex:N,containerId:y,disabled:V,disableTransforms:D,items:b,overIndex:k,useDragOverlay:_,sortedRects:O7(b,h),strategy:a}),[N,y,V.draggable,V.droppable,D,b,k,h,_,a]);return Cn.createElement(Gw.Provider,{value:B},e)}const V7=n=>{let{id:e,items:t,activeIndex:s,overIndex:a}=n;return Df(t,s,a).indexOf(e)},F7=n=>{let{containerId:e,isSorting:t,wasDragging:s,index:a,items:o,newIndex:u,previousItems:c,previousContainerId:h,transition:f}=n;return!f||!s||c!==o&&a===u?!1:t?!0:u!==a&&e===h},B7={duration:200,easing:"ease"},$w="transform",P7=$o.Transition.toString({property:$w,duration:0,easing:"linear"}),z7={roleDescription:"sortable"};function q7(n){let{disabled:e,index:t,node:s,rect:a}=n;const[o,u]=ee.useState(null),c=ee.useRef(t);return po(()=>{if(!e&&t!==c.current&&s.current){const h=a.current;if(h){const f=id(s.current,{ignoreTransform:!0}),p={x:h.left-f.left,y:h.top-f.top,scaleX:h.width/f.width,scaleY:h.height/f.height};(p.x||p.y)&&u(p)}}t!==c.current&&(c.current=t)},[e,t,s,a]),ee.useEffect(()=>{o&&u(null)},[o]),o}function U2(n){let{animateLayoutChanges:e=F7,attributes:t,disabled:s,data:a,getNewIndex:o=V7,id:u,strategy:c,resizeObserverConfig:h,transition:f=B7}=n;const{items:p,containerId:y,activeIndex:_,disabled:b,disableTransforms:A,sortedRects:N,overIndex:k,useDragOverlay:T,strategy:R}=ee.useContext(Gw),D=U7(s,b),V=p.indexOf(u),B=ee.useMemo(()=>({sortable:{containerId:y,index:V,items:p},...a}),[y,a,V,p]),W=ee.useMemo(()=>p.slice(p.indexOf(u)),[p,u]),{rect:H,node:L,isOver:F,setNodeRef:te}=x7({id:u,data:B,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...h}}),{active:j,activatorEvent:I,activeNodeRect:X,attributes:P,setNodeRef:ae,listeners:Z,isDragging:re,over:le,setActivatorNodeRef:fe,transform:_e}=b7({id:u,data:B,attributes:{...z7,...t},disabled:D.draggable}),z=aj(te,ae),E=!!j,$=E&&!A&&D1(_)&&D1(k),G=!T&&re,Q=G&&$?_e:null,pe=$?Q??(c??R)({rects:N,activeNodeRect:X,activeIndex:_,overIndex:k,index:V}):null,de=D1(_)&&D1(k)?o({id:u,items:p,activeIndex:_,overIndex:k}):V,ye=j?.id,Se=ee.useRef({activeId:ye,items:p,newIndex:de,containerId:y}),Be=p!==Se.current.items,Qe=e({active:j,containerId:y,isDragging:re,isSorting:E,id:u,index:V,items:p,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:f,wasDragging:Se.current.activeId!=null}),Xe=q7({disabled:!Qe,index:V,node:L,rect:H});return ee.useEffect(()=>{E&&Se.current.newIndex!==de&&(Se.current.newIndex=de),y!==Se.current.containerId&&(Se.current.containerId=y),p!==Se.current.items&&(Se.current.items=p)},[E,de,y,p]),ee.useEffect(()=>{if(ye===Se.current.activeId)return;if(ye!=null&&Se.current.activeId==null){Se.current.activeId=ye;return}const Y=setTimeout(()=>{Se.current.activeId=ye},50);return()=>clearTimeout(Y)},[ye]),{active:j,activeIndex:_,attributes:P,data:B,rect:H,index:V,newIndex:de,items:p,isOver:F,isSorting:E,isDragging:re,listeners:Z,node:L,overIndex:k,over:le,setNodeRef:z,setActivatorNodeRef:fe,setDroppableNodeRef:te,setDraggableNodeRef:ae,transform:Xe??pe,transition:ot()};function ot(){if(Xe||Be&&Se.current.newIndex===V)return P7;if(!(G&&!i0(I)||!f)&&(E||Qe))return $o.Transition.toString({...f,property:$w})}}function U7(n,e){var t,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(s=n?.droppable)!=null?s:e.droppable}}function Ep(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const H7=[Bn.Down,Bn.Right,Bn.Up,Bn.Left],H2=(n,e)=>{let{context:{active:t,collisionRect:s,droppableRects:a,droppableContainers:o,over:u,scrollableAncestors:c}}=e;if(H7.includes(n.code)){if(n.preventDefault(),!t||!s)return;const h=[];o.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const _=a.get(y.id);if(_)switch(n.code){case Bn.Down:s.top<_.top&&h.push(y);break;case Bn.Up:s.top>_.top&&h.push(y);break;case Bn.Left:s.left>_.left&&h.push(y);break;case Bn.Right:s.left<_.left&&h.push(y);break}});const f=_j({collisionRect:s,droppableRects:a,droppableContainers:h});let p=Cw(f,"id");if(p===u?.id&&f.length>1&&(p=f[1].id),p!=null){const y=o.get(t.id),_=o.get(p),b=_?a.get(_.id):null,A=_?.node.current;if(A&&b&&y&&_){const k=a0(A).some((W,H)=>c[H]!==W),T=Yw(y,_),R=W7(y,_),D=k||!T?{x:0,y:0}:{x:R?s.width-b.width:0,y:R?s.height-b.height:0},V={x:b.left,y:b.top};return D.x&&D.y?V:df(V,D)}}}};function Yw(n,e){return!Ep(n)||!Ep(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function W7(n,e){return!Ep(n)||!Ep(e)||!Yw(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}const G7={intro:"In",verse:"V","pre-chorus":"PC",chorus:"C",bridge:"Br",interlude:"Int",solo:"So",breakdown:"Bd",tag:"Tg",hook:"Hk",outro:"Out"},$7={intro:{bg:"bg-purple-600",border:"border-purple-500",text:"text-purple-100"},verse:{bg:"bg-blue-600",border:"border-blue-500",text:"text-blue-100"},"pre-chorus":{bg:"bg-cyan-600",border:"border-cyan-500",text:"text-cyan-100"},chorus:{bg:"bg-amber-600",border:"border-amber-500",text:"text-amber-100"},bridge:{bg:"bg-emerald-600",border:"border-emerald-500",text:"text-emerald-100"},interlude:{bg:"bg-teal-600",border:"border-teal-500",text:"text-teal-100"},solo:{bg:"bg-orange-600",border:"border-orange-500",text:"text-orange-100"},breakdown:{bg:"bg-red-600",border:"border-red-500",text:"text-red-100"},tag:{bg:"bg-pink-600",border:"border-pink-500",text:"text-pink-100"},hook:{bg:"bg-yellow-600",border:"border-yellow-500",text:"text-yellow-100"},outro:{bg:"bg-rose-600",border:"border-rose-500",text:"text-rose-100"}},Y7={bg:"bg-slate-600",text:"text-slate-100"};function X7(n,e){const t=G7[n.type]||n.type.charAt(0).toUpperCase(),s=e.filter(a=>a.type===n.type);if(s.length>1){const a=s.findIndex(o=>o.id===n.id)+1;return`${t}${a}`}return t}const Z7=({section:n,allSections:e,totalMeasures:t,isActive:s,isLast:a,onClick:o})=>{const{attributes:u,listeners:c,setNodeRef:h,transform:f,transition:p,isDragging:y}=U2({id:n.id}),_=n.measures.length/t*100,b=$7[n.type]||Y7,A=X7(n,e),N=_>5||s,k={transform:$o.Transform.toString(f),transition:p,width:`${_}%`,minWidth:"16px"};return g.jsxs("div",{ref:h,style:k,...u,...c,onClick:T=>{T.stopPropagation(),o?.()},className:Vt("relative h-full flex items-center justify-center overflow-hidden","transition-all duration-200 ease-out","touch-none select-none",b.bg,s&&!y&&"ring-2 ring-white/50 ring-inset z-10",!s&&!y&&"opacity-70 hover:opacity-90",y&&"opacity-100 scale-[1.08] z-50 ring-2 ring-white ring-inset shadow-lg","cursor-grab active:cursor-grabbing",!a&&!y&&"border-r border-black/30"),title:`${n.name||n.type} (${n.measures.length} bars) - Drag to reorder`,children:[N&&g.jsx("span",{className:Vt("text-[9px] font-bold uppercase tracking-tight pointer-events-none","transition-all duration-200",b.text,s&&!y&&"scale-105"),style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:A}),s&&!y&&g.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white/60",style:{boxShadow:"0 0 6px rgba(255,255,255,0.6)"}})]})},Xw=({sections:n,activeSectionId:e,onSectionClick:t,onReorder:s,onAddSection:a})=>{const o=n.reduce((h,f)=>h+f.measures.length,0),u=R2(El(Lf,{activationConstraint:{distance:5}}),El(o0,{activationConstraint:{delay:150,tolerance:5}}),El(Mf,{coordinateGetter:H2})),c=h=>{const{active:f,over:p}=h;if(p&&f.id!==p.id&&s){const y=n.findIndex(A=>A.id===f.id),_=n.findIndex(A=>A.id===p.id),b=Df(n,y,_);s(b)}};return o===0||n.length===0?a?g.jsx("div",{className:"w-full px-1",children:g.jsx("div",{className:"relative w-full h-6 bg-black/20 rounded-lg border border-white/5 flex items-center justify-center",children:g.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-2 py-0.5 text-[9px] font-medium text-white/50 hover:text-white/80 transition-colors",children:[g.jsx(Mc,{size:10}),"Add Section"]})})}):null:g.jsxs("div",{className:"w-full px-1",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("div",{className:"relative flex-1 h-6 bg-black/20 rounded-lg overflow-hidden border border-white/5",children:[g.jsxs(P2,{sensors:u,collisionDetection:I2,onDragEnd:c,children:[g.jsx(q2,{items:n.map(h=>h.id),strategy:z2,children:g.jsx("div",{className:"absolute inset-0 flex",children:n.map((h,f)=>g.jsx(Z7,{section:h,allSections:n,totalMeasures:o,isActive:h.id===e,isLast:f===n.length-1,onClick:()=>t?.(h.id)},h.id))})}),g.jsx(Uw,{dropAnimation:{duration:200,easing:"ease-out"},children:null})]}),g.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-white/10 pointer-events-none"})]}),a&&g.jsx("button",{onClick:a,className:Vt("shrink-0 w-6 h-6 rounded-lg","flex items-center justify-center","bg-accent-primary/20 border border-accent-primary/30","text-accent-primary hover:bg-accent-primary/30","transition-all hover:scale-105 active:scale-95"),title:"Add new section",children:g.jsx(Mc,{size:14})})]}),g.jsxs("div",{className:"relative w-full h-1.5 flex justify-between px-0.5 mt-0.5",children:[g.jsx("div",{className:"w-px h-full bg-white/20"}),g.jsx("div",{className:"w-px h-full bg-white/20"})]})]})},K7=[[4,4],[3,4],[5,4],[2,4],[6,8]],by=[{name:"Intro",type:"intro"},{name:"Verse",type:"verse"},{name:"Pre-Chorus",type:"pre-chorus"},{name:"Chorus",type:"chorus"},{name:"Bridge",type:"bridge"},{name:"Interlude",type:"interlude"},{name:"Solo",type:"solo"},{name:"Breakdown",type:"breakdown"},{name:"Tag",type:"tag"},{name:"Hook",type:"hook"},{name:"Outro",type:"outro"}],Zw=({section:n,isOpen:e,onClose:t,onTimeSignatureChange:s,onBarsChange:a,onStepCountChange:o,onNameChange:u,onCopy:c,onClear:h,onDelete:f,songTimeSignature:p,onNavigatePrev:y,onNavigateNext:_,hasPrev:b=!1,hasNext:A=!1,sectionIndex:N,totalSections:k,onSlotClick:T,onMoveUp:R,onMoveDown:D})=>{const V=ee.useRef(null),{currentSong:B,reorderSections:W,addSuggestedSection:H}=Ht(),L=n.timeSignature||p,F=`${L[0]}/${L[1]}`,te=n.measures.length,j=n.measures[0]?.beats.length??1,I=xw(L);return ee.useEffect(()=>{if(!e)return;const X=P=>{P.key==="Escape"&&t()};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[e,t]),e?Ho.createPortal(g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:X=>{X.stopPropagation(),t()}}),y&&g.jsx("button",{onClick:y,disabled:!b,className:Vt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{left:"calc(50% - min(150px, 45vw) - 52px)"},title:"Previous Section",children:g.jsx(Gh,{size:24})}),_&&g.jsx("button",{onClick:_,disabled:!A,className:Vt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",A?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{right:"calc(50% - min(150px, 45vw) - 52px)"},title:"Next Section",children:g.jsx(Wh,{size:24})}),g.jsxs("div",{ref:V,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"260px",maxWidth:"300px",width:"90vw"},children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[N!==void 0&&k!==void 0&&g.jsxs("div",{className:"h-5 px-2 rounded-full flex items-center justify-center gap-0.5 font-bold text-white shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99,102,241,0.4)"},title:`Section ${N+1} of ${k}`,children:[g.jsx("span",{className:"text-[10px]",children:N+1}),g.jsx("span",{className:"text-[6px] opacity-60 font-medium",children:"of"}),g.jsx("span",{className:"text-[10px]",children:k})]}),(N===void 0||k===void 0)&&g.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),u?g.jsx("select",{value:n.type,onChange:X=>{const P=by.find(ae=>ae.type===X.target.value);P&&u(P.name,P.type)},className:`bg-transparent text-sm font-bold text-text-primary 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                           appearance-none cursor-pointer pr-5`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0 center"},children:by.map(X=>g.jsx("option",{value:X.type,className:"bg-bg-secondary",children:X.name},X.type))}):g.jsx("span",{className:"text-sm font-bold text-text-primary",children:n.name})]}),g.jsx("button",{onClick:X=>{X.stopPropagation(),t()},className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:g.jsx(Lc,{size:14})})]}),g.jsx("div",{className:"px-3 py-2 border-b border-border-subtle bg-black/10",children:g.jsx(Xw,{sections:B.sections,activeSectionId:n.id,onReorder:X=>{W(X)},onAddSection:H,onSectionClick:X=>{if(_&&y){const P=B.sections.findIndex(Z=>Z.id===X),ae=B.sections.findIndex(Z=>Z.id===n.id);if(P>ae&&_)for(let Z=ae;Z<P;Z++)_();else if(P<ae&&y)for(let Z=ae;Z>P;Z--)y()}}})}),g.jsxs("div",{className:"p-4 space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Sig"}),g.jsx("div",{className:"relative",children:g.jsx("select",{value:F,onChange:X=>s(X.target.value),className:`w-full h-8 bg-bg-tertiary text-text-primary text-xs font-bold rounded-lg 
                                               px-3 border border-border-subtle 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"24px"},children:K7.map(([X,P])=>g.jsxs("option",{value:`${X}/${P}`,className:"bg-bg-secondary",children:[X,"/",P]},`${X}/${P}`))})})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Length"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:()=>a(Math.max(1,te-1)),disabled:te<=1,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:""}),g.jsx("span",{className:"flex-1 text-center text-sm font-bold text-text-primary tabular-nums",children:te}),g.jsx("button",{onClick:()=>a(Math.min(32,te+1)),disabled:te>=32,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:"+"})]})]})]}),o&&g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"block text-center text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Steps Per Bar"}),g.jsx("div",{className:"flex items-center gap-1.5 justify-center",children:I.map(X=>{const P=xg(X,L),ae=X===j;return g.jsx("button",{onClick:()=>o(X),className:Vt("flex items-center justify-center rounded-lg transition-all","w-11 h-11 active:scale-95",ae?"bg-accent-primary text-white shadow-lg border-2 border-accent-primary":"bg-bg-tertiary border border-border-subtle text-text-muted hover:text-text-primary hover:bg-bg-secondary"),title:`${X} step${X>1?"s":""} per measure`,children:g.jsx(yg,{type:P,size:24})},X)})})]}),g.jsx(ij,{section:n,songTimeSignature:p,className:"pt-1",onSlotClick:T}),g.jsxs("div",{className:"space-y-2 pt-2",children:[R&&D&&g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>{R()},disabled:!b,className:Vt("flex-1 flex items-center justify-center gap-1.5","px-2 py-2 rounded-lg","transition-all text-xs font-bold active:scale-95",b?"bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20":"bg-bg-tertiary border border-border-subtle text-text-muted opacity-40 cursor-not-allowed"),title:"Move section earlier in song",children:[g.jsx(BT,{size:14}),"Move Up"]}),g.jsxs("button",{onClick:()=>{D()},disabled:!A,className:Vt("flex-1 flex items-center justify-center gap-1.5","px-2 py-2 rounded-lg","transition-all text-xs font-bold active:scale-95",A?"bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20":"bg-bg-tertiary border border-border-subtle text-text-muted opacity-40 cursor-not-allowed"),title:"Move section later in song",children:[g.jsx(VT,{size:14}),"Move Down"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsxs("button",{onClick:()=>{c()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-accent-primary/10 border border-accent-primary/30
                                           text-accent-primary hover:bg-accent-primary/20
                                           transition-all text-xs font-bold active:scale-95`,children:[g.jsx(ZT,{size:14}),"Duplicate"]}),g.jsxs("button",{onClick:()=>{h()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-yellow-500/10 border border-yellow-500/30
                                           text-yellow-400 hover:bg-yellow-500/20
                                           transition-all text-xs font-bold active:scale-95`,children:[g.jsx(JT,{size:14}),"Clear"]}),g.jsxs("button",{onClick:()=>{f()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-red-500/10 border border-red-500/30
                                           text-red-400 hover:bg-red-500/20
                                           transition-all text-xs font-bold active:scale-95`,children:[g.jsx(gg,{size:14}),"Remove"]})]})]})]})]})]}),document.body):null},Q7={intro:"Intro",verse:"Verse","pre-chorus":"Pre-Chorus",chorus:"Chorus",bridge:"Bridge",interlude:"Interlude",solo:"Solo",breakdown:"Breakdown",tag:"Tag",hook:"Hook",outro:"Outro"};function Rh(n,e){const t=Q7[n.type],s=e.filter(o=>o.type===n.type);if(s.length<=1)return t;const a=s.findIndex(o=>o.id===n.id);return`${t} ${a+1}`}const J7=({section:n,allSections:e,isActive:t,isDesktop:s,onActivate:a,onEdit:o,onDelete:u})=>{const{attributes:c,listeners:h,setNodeRef:f,transform:p,transition:y,isDragging:_}=U2({id:n.id}),b={transform:$o.Transform.toString(p),transition:y},A=Rh(n,e),N=A.charAt(0).toUpperCase();return g.jsxs("div",{ref:f,"data-section-id":n.id,className:Vt("relative shrink-0",_&&"opacity-50 scale-95 z-50"),style:b,children:[g.jsx("button",{onClick:()=>{_||(t?o():a())},className:Vt("no-touch-enlarge relative font-semibold transition-all touch-feedback","flex items-center justify-center select-none",t?Vt("rounded-full text-white shadow-lg whitespace-nowrap overflow-hidden",s?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"):Vt("rounded-full text-text-secondary hover:text-text-primary border border-border-medium hover:border-border-subtle hover:bg-bg-tertiary",s?"w-9 h-9 text-sm":"w-8 h-8 text-xs")),style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",...t?{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 16px rgba(99, 102, 241, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.2)"}:void 0},title:`${A} - Hold center to drag`,children:t?g.jsxs("span",{className:"flex items-center gap-1 px-2 truncate pointer-events-none",children:[g.jsx("span",{className:"truncate",children:A}),g.jsx("span",{className:"pointer-events-auto cursor-pointer hover:opacity-100 p-0.5 -m-0.5 rounded transition-opacity",onClick:k=>{k.stopPropagation(),o()},children:g.jsx(ow,{size:s?14:12,className:"opacity-70 hover:opacity-100 shrink-0"})})]}):N}),g.jsx("div",{...c,...h,onClick:()=>{_||(t?o():a())},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 touch-none draggable-element cursor-grab active:cursor-grabbing",style:{width:t?s?"60px":"50px":s?"24px":"20px",height:s?"24px":"20px",WebkitTouchCallout:"none",WebkitUserSelect:"none"},title:"Hold to drag"})]})},Ng=({isOpen:n,onToggle:e,hideCloseButton:t=!1,isCompact:s=!1,isLandscape:a=!1})=>{const{currentSong:o,selectedSectionId:u,selectedSlotId:c,setSelectedSlot:h,selectSlotOnly:f,setSelectedChord:p,playingSectionId:y,playingSlotId:_,isPlaying:b,addSuggestedSection:A,setSectionTimeSignature:N,setSectionMeasures:k,setSectionSubdivision:T,removeSection:R,duplicateSection:D,clearSection:V,setMeasureSubdivision:B,selectedChord:W,addChordToSlot:H,toggleSongMap:L,updateSection:F,undo:te,redo:j,canUndo:I,canRedo:X,clearSlot:P,reorderSections:ae}=Ht(),Z=o.timeSignature,re=Yh(),le=ee.useRef(null),fe=ee.useRef(null),{isMobile:_e}=ju(),z=!_e,[E,$]=Cn.useState(0),G=ee.useRef(0),[Q,ie]=Cn.useState(0),pe=ee.useRef(0),[de,ye]=Cn.useState(0),Se=ee.useRef(!1),[Be,Qe]=Cn.useState(null),Xe=ee.useRef(null),[ot,Y]=ee.useState(null),Ie=R2(El(Lf,{activationConstraint:{distance:10}}),El(o0,{activationConstraint:{delay:200,tolerance:20}}),El(Mf,{coordinateGetter:H2})),vt=Ee=>{Y(Ee.active.id)},et=Ee=>{const{active:ft,over:ut}=Ee;if(Y(null),ut&&ft.id!==ut.id){const We=o.sections.findIndex(xt=>xt.id===ft.id),at=o.sections.findIndex(xt=>xt.id===ut.id);if(We!==-1&&at!==-1){const xt=Df(o.sections,We,at);ae(xt),$(at);const ct=o.sections[We];ct&&ct.measures[0]?.beats[0]&&h(ct.id,ct.measures[0].beats[0].id)}}};ee.useEffect(()=>{if(!b&&u&&fe.current){const Ee=o.sections.findIndex(ft=>ft.id===u);Ee!==-1&&($(Ee),setTimeout(()=>{if(fe.current){const ft=fe.current.querySelector(`[data-section-id="${u}"]`);ft&&ft.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100))}},[u,o.sections,b]),ee.useEffect(()=>{if(b&&y){const Ee=o.sections.findIndex(ft=>ft.id===y);Ee!==-1&&Ee!==E&&$(Ee)}},[b,y,o.sections,E]),ee.useEffect(()=>{if(_&&le.current){const Ee=le.current.querySelector(`[data-slot-id="${_}"]`);Ee&&Ee.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[_]),ee.useEffect(()=>{if(!n||!c||b)return;const Ee=setTimeout(()=>{if(le.current){const ft=le.current.querySelector(`[data-slot-id="${c}"]`);ft&&ft.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},250);return()=>clearTimeout(Ee)},[c,b,n]);const Re=Ee=>{G.current=Ee.touches[0].clientY},it=Ee=>{const ft=Ee.touches[0].clientY-G.current;ft>0&&ie(Math.min(ft,100))},qe=()=>{Q>50&&e(),ie(0)},ht=Ee=>{pe.current=Ee.touches[0].clientY},Te=Ee=>{const ft=pe.current-Ee.touches[0].clientY;ft>0&&ye(Math.min(ft,60))},tt=()=>{de>30&&e(),ye(0)},bt=Ee=>{Se.current=!0,pe.current=Ee.clientY,Ee.preventDefault()};ee.useEffect(()=>{const Ee=ut=>{if(!Se.current)return;const We=pe.current-ut.clientY;We>0&&ye(Math.min(We,60))},ft=()=>{Se.current&&(de>30&&e(),ye(0),Se.current=!1)};return document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",ft),()=>{document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",ft)}},[de,e]);const mt=Ee=>{if(re[Ee])return re[Ee];const ft=xu(Ee);for(const ut of Object.keys(re))if(xu(ut)===ft)return re[ut];return"hsl(230, 60%, 50%)"},st=(Ee,ft,ut)=>{const We=u===Ee&&c===ft,at=Date.now();if(ut&&Xe.current&&Xe.current.slotId===ft&&at-Xe.current.time<400){W&&(H(W,Ee,ft),f(Ee,ft)),Xe.current=null;return}ut?(ut.notes&&ut.notes.length>0&&Br(ut.notes),We?p(ut):f(Ee,ft),Xe.current={slotId:ft,time:at}):(We&&W?H(W,Ee,ft):f(Ee,ft),Xe.current=null)},dt=Ee=>{const ft=Ee==="prev"?Math.max(0,E-1):Math.min(o.sections.length-1,E+1);$(ft);const ut=o.sections[ft];ut&&ut.measures[0]?.beats[0]&&h(ut.id,ut.measures[0].beats[0].id)},gt=Ee=>{if(!fe.current)return;const ft=fe.current,ut=120,We=ft.scrollWidth-ft.clientWidth,at=ft.scrollLeft;let xt;Ee==="left"?xt=Math.max(0,at-ut):xt=Math.min(We,at+ut),ft.scrollTo({left:xt,behavior:"smooth"})},Nt=o.sections[E];return n?g.jsxs("div",{"data-mobile-timeline":!0,className:Vt("relative w-full bg-bg-secondary border-t-2 border-border-subtle overflow-hidden flex flex-col mobile-timeline-drawer",a&&"h-full",t&&"h-full border-t-0"),style:{maxHeight:a||t?void 0:"140px",transform:Q>0?`translateY(${Q}px)`:void 0,opacity:Q>0?Math.max(.5,1-Q/150):1,transition:Q===0?"all 0.2s ease-out":"none"},children:[!t&&g.jsx("div",{className:"flex flex-col items-center pt-2 pb-2.5 cursor-grab active:cursor-grabbing shrink-0",onTouchStart:Re,onTouchMove:it,onTouchEnd:qe,children:g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})}),s?g.jsxs("div",{className:"relative flex items-center justify-center shrink-0 px-1 py-1",children:[g.jsx("button",{onClick:()=>L(!0),className:"absolute left-1 rounded text-text-muted hover:text-accent-primary touch-feedback flex items-center justify-center w-5 h-5",title:"Song Overview",children:g.jsx(xp,{size:12})}),g.jsxs("div",{className:"flex items-center justify-center gap-1",children:[g.jsx("button",{onClick:()=>dt("prev"),disabled:E===0,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:g.jsx(Gh,{size:14})}),g.jsx("div",{className:"relative",children:g.jsxs("button",{onClick:()=>Nt&&Qe(Nt.id),className:"flex items-center justify-center gap-0.5 px-2 py-1 rounded-full text-white font-semibold text-[10px]",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)",border:"1px solid rgba(255,255,255,0.2)"},title:Nt?Rh(Nt,o.sections):"Section",children:[g.jsxs("span",{className:"flex items-baseline",children:[g.jsx("span",{children:Nt?Rh(Nt,o.sections).charAt(0).toUpperCase():"S"}),g.jsx("span",{className:"text-[7px] opacity-60 ml-0.5",children:E+1})]}),g.jsx(ow,{size:10,className:"opacity-70 shrink-0"})]})}),g.jsx("button",{onClick:()=>dt("next"),disabled:E===o.sections.length-1,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:g.jsx(Wh,{size:14})})]}),g.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5",children:[g.jsx("button",{onClick:te,disabled:!I,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:g.jsx(_p,{size:10})}),g.jsx("button",{onClick:j,disabled:!X,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:g.jsx($h,{size:10})})]})]}):g.jsxs("div",{className:Vt("flex items-center justify-between shrink-0",z?"px-3 py-1":"px-2 pb-1.5"),children:[g.jsxs("div",{className:"flex items-center shrink-0",children:[g.jsx("button",{onClick:()=>L(!0),className:Vt("no-touch-enlarge rounded text-text-muted hover:text-accent-primary touch-feedback shrink-0 mr-0.5",z?"p-2":"p-1.5"),title:"Song Overview",children:g.jsx(xp,{size:z?18:16})}),g.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[g.jsx("button",{onClick:te,disabled:!I,className:Vt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",z?"w-8 h-8":"w-7 h-7"),title:"Undo",children:g.jsx(_p,{size:z?14:12})}),g.jsx("button",{onClick:j,disabled:!X,className:Vt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",z?"w-8 h-8":"w-7 h-7"),title:"Redo",children:g.jsx($h,{size:z?14:12})})]})]}),g.jsx("button",{onClick:()=>gt("left"),className:Vt("no-touch-enlarge rounded text-text-muted hover:text-text-primary touch-feedback",z?"p-2":"p-1.5"),title:"Scroll sections left",children:g.jsx(Gh,{size:z?18:16})}),g.jsxs(P2,{sensors:Ie,collisionDetection:I2,onDragStart:vt,onDragEnd:et,children:[g.jsxs("div",{ref:fe,className:Vt("flex-1 flex items-center overflow-x-auto scrollbar-hide px-1 mx-1",z?"gap-2":"gap-1.5"),children:[g.jsx(q2,{items:o.sections.map(Ee=>Ee.id),strategy:z2,children:o.sections.map((Ee,ft)=>g.jsx(J7,{section:Ee,allSections:o.sections,isActive:ft===E,isDesktop:z,onActivate:()=>{$(ft),Ee.measures[0]?.beats[0]&&h(Ee.id,Ee.measures[0].beats[0].id)},onEdit:()=>Qe(Ee.id),onDelete:()=>R(Ee.id)},Ee.id))}),g.jsx("button",{onClick:()=>A(),className:Vt("no-touch-enlarge rounded-full text-text-muted hover:text-accent-primary touch-feedback shrink-0 border border-dashed border-border-medium hover:border-accent-primary/50 transition-all hover:bg-accent-primary/10 flex items-center justify-center",z?"w-9 h-9":"w-8 h-8"),title:"Add section",children:g.jsx(Mc,{size:z?14:12})})]}),g.jsx(Uw,{children:ot?g.jsx("div",{className:Vt("rounded-full text-white font-semibold shadow-2xl flex items-center justify-center",z?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"),style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 24px rgba(99, 102, 241, 0.7), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",transform:"scale(1.05) rotate(3deg)"},children:(()=>{const Ee=o.sections.find(ft=>ft.id===ot);return Ee?Rh(Ee,o.sections):""})()}):null})]}),g.jsx("button",{onClick:()=>gt("right"),className:Vt("no-touch-enlarge rounded text-text-muted hover:text-text-primary touch-feedback",z?"p-2":"p-1.5"),title:"Scroll sections right",children:g.jsx(Wh,{size:z?18:16})})]}),g.jsx("div",{ref:le,className:Vt("flex-1",z?"px-3 pb-2 pt-3":"px-1 pb-1 pt-3",a?"overflow-y-auto overflow-x-hidden":"overflow-x-auto overflow-y-hidden"),children:Nt&&g.jsx("div",{className:Vt(a?s?"flex flex-col gap-0":"grid grid-cols-4 gap-0.5":Vt("flex flex-row items-center",z?"gap-1.5":"gap-0.5")),children:Nt.measures.map((Ee,ft)=>g.jsxs(Cn.Fragment,{children:[g.jsxs("div",{className:Vt("flex items-center",a?s?"gap-0.5 w-full min-w-0":"gap-0.5":z?"gap-1 shrink-0":"gap-0.5 shrink-0"),children:[g.jsxs("div",{className:Vt("flex flex-col items-center justify-center shrink-0",a?"gap-0 w-4":z?"gap-0 w-6":"gap-0 w-5"),children:[g.jsx("span",{className:Vt("font-mono text-text-muted text-center leading-none",z?"text-[9px]":a?"text-[7px]":"text-[8px]"),children:ft+1}),g.jsx(sj,{value:Ee.beats.length,onChange:ut=>B(Nt.id,Ee.id,ut),timeSignature:Nt.timeSignature||[4,4],isCompact:a})]}),g.jsx("div",{className:Vt("flex items-center",a?s?`flex-1 gap-0.5 min-w-0 ${Ee.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:`flex-1 gap-0.5 min-w-0 ${Ee.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:"gap-0.5"),children:Ee.beats.map(ut=>{const We=u===Nt.id&&c===ut.id,at=b&&y===Nt.id&&_===ut.id,xt=ut.chord?mt(ut.chord.root):void 0,ct=Ee.beats.length;let nn,jt;a&&ct>4&&(nn=Math.max(22,Math.floor(160/ct)),jt=Math.max(18,Math.floor(120/ct)));const Ft=z?48:36,en=4/ct,At=Math.round(Ft*en),wt=Math.max(z?36:28,Math.min(z?192:144,At)),qt=z?40:a&&s?ct<=4?26:24:32;return g.jsxs("button",{"data-slot-id":ut.id,onClick:()=>st(Nt.id,ut.id,ut.chord),className:Vt("no-touch-enlarge relative flex items-center justify-center rounded-md transition-all touch-feedback group",a&&ct<=4?"flex-1 min-w-0":"shrink-0",at&&"ring-2 ring-green-500 ring-offset-1 ring-offset-bg-primary shadow-[0_0_12px_rgba(34,197,94,0.5)] scale-105 z-10",We&&!at&&"ring-2 ring-accent-primary ring-offset-1 ring-offset-bg-primary",!ut.chord&&"border-2 border-dashed border-border-medium bg-bg-elevated hover:border-text-muted"),style:{height:`${qt}px`,...a&&nn?{width:`${nn}px`,minWidth:`${jt}px`}:{},...a?{}:{width:`${wt}px`,minWidth:`${wt}px`},...ut.chord?{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${xt}`}:{}},children:[ut.chord?g.jsx("span",{className:Vt("font-bold px-0.5 truncate",z?"text-xs":a?ct>=8?"text-[7px]":ct>=4?"text-[8px]":"text-[9px]":"text-[10px]"),style:{color:xt},children:Ln(ut.chord.symbol)}):g.jsx("span",{className:Vt("text-text-muted font-light",a?ct>=8?"text-xs":"text-sm":"text-base"),children:"+"}),at&&g.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 flex items-center justify-center",children:g.jsx(nd,{size:6,fill:"white",className:"text-white"})}),ut.chord&&!at&&(We||z)&&g.jsx("div",{onClick:wn=>{wn.stopPropagation(),P(Nt.id,ut.id)},className:Vt("absolute rounded-full bg-black/70 backdrop-blur-sm flex items-center justify-center cursor-pointer border border-white/30 active:bg-white/30",z?Vt("w-4 h-4 -top-2 -right-2 hover:bg-white/20 hover:border-white/50 transition-all z-30",We?"opacity-100":"opacity-0 group-hover:opacity-100"):"w-5 h-5 -top-2.5 -right-2.5 opacity-100 z-30"),title:"Remove chord",children:g.jsx("span",{className:Vt("text-white/90 font-bold leading-none",z?"text-[10px]":"text-xs"),children:""})})]},ut.id)})})]}),!s&&!a&&ft<Nt.measures.length-1&&g.jsx("div",{className:"w-px h-5 bg-border-medium shrink-0"})]},Ee.id))})}),Be&&(()=>{const Ee=o.sections.findIndex(We=>We.id===Be),ft=Ee>0,ut=Ee<o.sections.length-1;return g.jsx(Zw,{section:o.sections.find(We=>We.id===Be),isOpen:!0,onClose:()=>Qe(null),onTimeSignatureChange:We=>{const[at,xt]=We.split("/").map(ct=>parseInt(ct,10));at&&xt&&Be&&N(Be,[at,xt])},onBarsChange:We=>{Be&&k(Be,We)},onStepCountChange:We=>{Be&&T(Be,We)},onNameChange:(We,at)=>{Be&&F(Be,{name:We,type:at})},onCopy:()=>{Be&&(D(Be),setTimeout(()=>{const at=Ht.getState().currentSong.sections,xt=Ee+1;if(xt<at.length){const ct=at[xt];Qe(ct.id),$(xt)}},0))},onClear:()=>{Be&&V(Be)},onDelete:()=>{if(Be){const We=o.sections.findIndex(xt=>xt.id===Be);let at=null;if(o.sections.length>1&&(We<o.sections.length-1?at=o.sections[We+1].id:at=o.sections[We-1].id),R(Be),Qe(at),at){o.sections.findIndex(ct=>ct.id===at);const xt=We<o.sections.length-1?We:Math.max(0,We-1);$(xt)}}},songTimeSignature:Z||[4,4],onNavigatePrev:()=>{if(ft){const We=o.sections[Ee-1];Qe(We.id),$(Ee-1)}},onNavigateNext:()=>{if(ut){const We=o.sections[Ee+1];Qe(We.id),$(Ee+1)}},hasPrev:ft,hasNext:ut,sectionIndex:Ee,totalSections:o.sections.length,onSlotClick:We=>{Qe(null),$(Ee),f(Be,We)},onMoveUp:()=>{if(ft&&Be){const We=[...o.sections],at=We[Ee];We[Ee]=We[Ee-1],We[Ee-1]=at,ae(We),$(Ee-1)}},onMoveDown:()=>{if(ut&&Be){const We=[...o.sections],at=We[Ee];We[Ee]=We[Ee+1],We[Ee+1]=at,ae(We),$(Ee+1)}}})})()]}):g.jsxs("div",{"data-mobile-timeline":!0,className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing touch-feedback select-none",onClick:()=>{!Se.current&&de===0&&e()},onTouchStart:ht,onTouchMove:Te,onTouchEnd:tt,onMouseDown:bt,style:{transform:de>0?`translateY(-${de}px)`:void 0,opacity:de>0?Math.min(1,.7+de/100):1,transition:de===0?"all 0.2s ease-out":"none"},children:[g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),g.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Timeline"})]})},Ag=({highlightedNotes:n,rootNote:e,bassNote:t,color:s="#6366f1",octave:a=4,onNotePlay:o})=>{const u=["C","D","E","F","G","A","B"],c=T=>{const R={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},D=T.replace(/\d+/g,"");return R[D]??-1},h=n.map(T=>c(T)),f=e?c(e):-1,p=t?c(t):-1,y=T=>{const R=c(T);return R!==-1&&h.includes(R)},_=T=>f===-1?!1:c(T)===f,b=T=>p===-1?!1:c(T)===p,A=(T,R)=>{o&&o(T,R)},N=()=>{const T=[];for(let D=0;D<2;D++){const V=a+D;u.forEach(B=>{const W=y(B),H=_(B),L=b(B);T.push(g.jsx("div",{className:"h-full rounded-b-md relative border-x border-b border-gray-400 cursor-pointer hover:brightness-95 active:brightness-90 transition-all",style:{width:`${100/14}%`,background:"linear-gradient(180deg, #fafafa 0%, #e8e8e8 70%, #d0d0d0 100%)",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.08)"},onClick:()=>A(B,V),children:W&&g.jsxs(g.Fragment,{children:[H&&g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"3px",transform:"translateX(-50%)",width:"18px",height:"18px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"6px",transform:"translateX(-50%)",width:L?"14px":H?"12px":"9px",height:L?"14px":H?"12px":"9px",background:s,border:L?"3px solid #000":"2px solid #000",boxShadow:L?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`white-${D}-${B}`))})}return T},k=()=>{const T=[],R=[{note:"C#",offset:7.14},{note:"D#",offset:14.28},{note:"F#",offset:28.57},{note:"G#",offset:35.71},{note:"A#",offset:42.85}];for(let D=0;D<2;D++){const V=D*50,B=a+D;R.forEach(({note:W,offset:H})=>{const L=y(W),F=_(W),te=b(W),j=V+H;T.push(g.jsx("div",{className:"absolute top-0 rounded-b-md cursor-pointer hover:brightness-125 active:brightness-150 transition-all",style:{left:`${j}%`,width:"5.5%",height:"58%",transform:"translateX(-50%)",background:"linear-gradient(180deg, #333 0%, #1a1a1a 70%, #0a0a0a 100%)",boxShadow:"0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08)",pointerEvents:"auto"},onClick:()=>A(W,B),children:L&&g.jsxs(g.Fragment,{children:[F&&g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"1px",transform:"translateX(-50%)",width:"16px",height:"16px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"4px",transform:"translateX(-50%)",width:te?"12px":F?"10px":"8px",height:te?"12px":F?"10px":"8px",background:s,border:te?"3px solid #fff":"2px solid #fff",boxShadow:te?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`black-${D}-${W}`))})}return T};return g.jsx("div",{className:"relative w-full rounded-lg select-none overflow-hidden",style:{height:"80px",minHeight:"80px",background:"#1a1a22",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.6)",padding:"3px 2px 2px 2px"},children:g.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[g.jsx("div",{className:"flex w-full h-full gap-[1px]",style:{position:"relative",zIndex:0},children:N()}),g.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"},children:k()})]})})},eE={C:{maj:[{frets:[-1,3,2,0,1,0],fingers:[0,3,2,0,1,0],barres:[],baseFret:1}],m:[{frets:[-1,3,1,0,1,3],fingers:[0,3,1,0,2,4],barres:[],baseFret:1}],7:[{frets:[-1,3,2,3,1,0],fingers:[0,3,2,4,1,0],barres:[],baseFret:1}],maj7:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj9:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,3,2,2,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],m7:[{frets:[-1,3,1,3,1,3],fingers:[0,2,1,3,1,4],barres:[1],baseFret:3}],m9:[{frets:[-1,3,1,3,3,3],fingers:[0,2,1,3,4,4],barres:[],baseFret:3}],m11:[{frets:[-1,3,1,3,3,1],fingers:[0,2,1,3,4,1],barres:[1],baseFret:3}],m6:[{frets:[-1,3,1,2,1,3],fingers:[0,3,1,2,1,4],barres:[1],baseFret:1}],sus2:[{frets:[-1,3,0,0,1,3],fingers:[0,2,0,0,1,3],barres:[],baseFret:1}],sus4:[{frets:[-1,3,3,0,1,1],fingers:[0,3,4,0,1,1],barres:[1],baseFret:1}],dim:[{frets:[-1,3,1,-1,1,2],fingers:[0,4,1,0,2,3],barres:[],baseFret:1}],6:[{frets:[-1,3,2,2,1,0],fingers:[0,4,2,3,1,0],barres:[],baseFret:1}],add9:[{frets:[-1,3,2,0,3,0],fingers:[0,2,1,0,3,0],barres:[],baseFret:1}],9:[{frets:[-1,3,2,3,3,0],fingers:[0,2,1,3,4,0],barres:[],baseFret:1}],11:[{frets:[-1,3,2,3,3,3],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],13:[{frets:[-1,3,2,3,3,5],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,3,4,3,4,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},"C#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},Db:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},D:{maj:[{frets:[-1,-1,0,2,3,2],fingers:[0,0,0,1,3,2],barres:[],baseFret:1}],m:[{frets:[-1,-1,0,2,3,1],fingers:[0,0,0,2,3,1],barres:[],baseFret:1}],7:[{frets:[-1,-1,0,2,1,2],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],maj7:[{frets:[-1,-1,0,2,2,2],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],maj9:[{frets:[-1,-1,0,2,2,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],maj13:[{frets:[-1,-1,0,2,2,4],fingers:[0,0,0,1,1,3],barres:[2],baseFret:1}],m7:[{frets:[-1,-1,0,2,1,1],fingers:[0,0,0,2,1,1],barres:[1],baseFret:1}],m9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],m11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m6:[{frets:[-1,-1,0,2,0,1],fingers:[0,0,0,2,0,1],barres:[],baseFret:1}],sus2:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],sus4:[{frets:[-1,-1,0,2,3,3],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,1,3,1],fingers:[0,0,0,1,4,2],barres:[],baseFret:1}],6:[{frets:[-1,-1,0,2,0,2],fingers:[0,0,0,1,0,2],barres:[],baseFret:1}],add9:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],13:[{frets:[-1,-1,0,2,1,4],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,1,1,1],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}]},"D#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},Eb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},E:{maj:[{frets:[0,2,2,1,0,0],fingers:[0,2,3,1,0,0],barres:[],baseFret:1}],m:[{frets:[0,2,2,0,0,0],fingers:[0,2,3,0,0,0],barres:[],baseFret:1}],7:[{frets:[0,2,0,1,0,0],fingers:[0,2,0,1,0,0],barres:[],baseFret:1}],maj7:[{frets:[0,2,1,1,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],maj9:[{frets:[0,2,1,1,0,2],fingers:[0,2,1,1,0,3],barres:[1],baseFret:1}],maj13:[{frets:[0,2,1,1,2,2],fingers:[0,2,1,1,3,3],barres:[],baseFret:1}],m7:[{frets:[0,2,0,0,0,0],fingers:[0,1,0,0,0,0],barres:[],baseFret:1}],m9:[{frets:[0,2,0,0,0,2],fingers:[0,2,0,0,0,3],barres:[],baseFret:1}],m11:[{frets:[0,2,0,0,3,0],fingers:[0,2,0,0,4,0],barres:[],baseFret:1}],m6:[{frets:[0,2,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],sus2:[{frets:[0,2,4,4,0,0],fingers:[0,1,3,4,0,0],barres:[],baseFret:1}],sus4:[{frets:[0,2,2,2,0,0],fingers:[0,2,3,4,0,0],barres:[],baseFret:1}],dim:[{frets:[0,1,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],6:[{frets:[0,2,2,1,2,0],fingers:[0,2,3,1,4,0],barres:[],baseFret:1}],add9:[{frets:[0,2,2,1,0,2],fingers:[0,2,3,1,0,4],barres:[],baseFret:1}],9:[{frets:[0,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],11:[{frets:[0,2,0,1,3,0],fingers:[0,2,0,1,4,0],barres:[],baseFret:1}],13:[{frets:[0,2,0,1,2,2],fingers:[0,2,0,1,3,4],barres:[],baseFret:1}],m7b5:[{frets:[0,1,0,0,2,0],fingers:[0,1,0,0,2,0],barres:[],baseFret:1}]},F:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:1}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:1}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,-1,3,2,1,0],fingers:[0,0,3,2,1,0],barres:[],baseFret:1}],maj9:[{frets:[1,0,3,0,1,0],fingers:[1,0,3,0,2,0],barres:[],baseFret:1}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:1}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:1}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:1}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,-1,3,0,1,1],fingers:[0,0,3,0,1,1],barres:[1],baseFret:1}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:1}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:1}],6:[{frets:[1,-1,0,2,1,1],fingers:[1,0,0,3,1,1],barres:[1],baseFret:1}],add9:[{frets:[-1,-1,3,2,1,3],fingers:[0,0,3,2,1,4],barres:[],baseFret:1}],9:[{frets:[1,3,1,2,1,3],fingers:[1,3,1,2,1,4],barres:[1],baseFret:1}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:1}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:1}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}]},"F#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},Gb:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},G:{maj:[{frets:[3,2,0,0,0,3],fingers:[2,1,0,0,0,3],barres:[],baseFret:1}],m:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],7:[{frets:[3,2,0,0,0,1],fingers:[3,2,0,0,0,1],barres:[],baseFret:1}],maj7:[{frets:[3,2,0,0,0,2],fingers:[3,1,0,0,0,2],barres:[],baseFret:1}],maj9:[{frets:[3,0,0,0,0,2],fingers:[2,0,0,0,0,1],barres:[],baseFret:1}],maj13:[{frets:[3,2,0,0,2,2],fingers:[3,1,0,0,2,2],barres:[2],baseFret:1}],m7:[{frets:[3,1,0,0,3,0],fingers:[2,1,0,0,3,0],barres:[],baseFret:1}],m9:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],m11:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],m6:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],sus2:[{frets:[3,0,0,0,3,3],fingers:[1,0,0,0,2,3],barres:[],baseFret:1}],sus4:[{frets:[3,3,0,0,1,3],fingers:[2,3,0,0,1,4],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],6:[{frets:[3,2,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],add9:[{frets:[3,0,0,0,0,3],fingers:[2,0,0,0,0,3],barres:[],baseFret:1}],9:[{frets:[3,2,0,1,0,1],fingers:[3,2,0,1,0,1],barres:[1],baseFret:1}],11:[{frets:[3,2,0,1,3,1],fingers:[3,2,0,1,4,1],barres:[1],baseFret:1}],13:[{frets:[3,2,0,1,0,5],fingers:[2,1,0,1,0,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}]},"G#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},Ab:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},A:{maj:[{frets:[-1,0,2,2,2,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],m:[{frets:[-1,0,2,2,1,0],fingers:[0,0,2,3,1,0],barres:[],baseFret:1}],7:[{frets:[-1,0,2,0,2,0],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}],maj7:[{frets:[-1,0,2,1,2,0],fingers:[0,0,2,1,3,0],barres:[],baseFret:1}],maj9:[{frets:[-1,0,2,1,0,0],fingers:[0,0,2,1,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,0,2,1,2,4],fingers:[0,0,2,1,3,4],barres:[],baseFret:1}],m7:[{frets:[-1,0,2,0,1,0],fingers:[0,0,2,0,1,0],barres:[],baseFret:1}],m9:[{frets:[-1,0,2,0,1,3],fingers:[0,0,2,0,1,4],barres:[],baseFret:1}],m11:[{frets:[-1,0,0,0,1,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],m6:[{frets:[-1,0,2,2,1,2],fingers:[0,0,2,3,1,4],barres:[],baseFret:1}],sus2:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],sus4:[{frets:[-1,0,2,2,3,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],dim:[{frets:[-1,0,1,2,1,-1],fingers:[0,0,1,3,2,0],barres:[],baseFret:1}],6:[{frets:[-1,0,2,2,2,2],fingers:[0,0,1,1,1,1],barres:[2],baseFret:1}],add9:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],9:[{frets:[-1,0,2,4,2,3],fingers:[0,0,1,3,1,2],barres:[2],baseFret:1}],11:[{frets:[-1,0,0,0,2,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],13:[{frets:[-1,0,2,0,2,4],fingers:[0,0,1,0,2,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,0,1,0,1,-1],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}]},"A#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},Bb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},B:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:2}],7:[{frets:[-1,2,1,2,0,2],fingers:[0,2,1,3,0,4],barres:[],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:2}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:2}],m7:[{frets:[-1,2,0,2,0,2],fingers:[0,1,0,2,0,3],barres:[],baseFret:1}],m9:[{frets:[-1,2,0,2,2,2],fingers:[0,1,0,2,3,4],barres:[],baseFret:1}],m11:[{frets:[-1,2,0,2,0,0],fingers:[0,1,0,2,0,0],barres:[],baseFret:1}],m6:[{frets:[-1,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:2}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:2}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,2,1,2,2,2],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],11:[{frets:[-1,2,1,2,0,0],fingers:[0,2,1,3,0,0],barres:[],baseFret:1}],13:[{frets:[-1,2,1,2,2,4],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:2}]}};function tE(n){return{"C":"C#","D":"Db","D":"D#","E":"Eb","F":"F#","G":"Gb","G":"G#","A":"Ab","A":"A#","B":"Bb"}[n]||n.replace("","#").replace("","b")}function nE(n){return{major:"maj",major7:"maj7",major9:"maj9",major11:"maj11",major13:"maj13",major6:"6",minor:"m",min:"m",minor7:"m7",min7:"m7",minor9:"m9",min9:"m9",minor11:"m11",min11:"m11",minor13:"m13",min13:"m13",minor6:"m6",min6:"m6",dom7:"7",dominant7:"7",dom9:"9",dominant9:"9",dom11:"11",dominant11:"11",dom13:"13",dominant13:"13",suspended2:"sus2",suspended4:"sus4",diminished:"dim","half-diminished":"m7b5",halfDiminished7:"m7b5","m75":"m7b5",sixth:"6",ninth:"9",added9:"add9"}[n]||n}function Kw(n,e){const t=tE(n),s=nE(e),a=eE[t];if(!a)return null;const o=a[s];return!o||o.length===0?null:o[0]}const Cg=({root:n,quality:e,color:t="#6366f1",onClick:s,onDoubleClick:a})=>{const o=L2(),u=Kw(n,e),c=ee.useRef(0),h=ee.useRef(null),f=Ln(`${n}${Mh(e)}`),p=()=>{const N=Date.now(),k=N-c.current;h.current&&(clearTimeout(h.current),h.current=null),k<300&&k>0?(c.current=0,a&&a()):(c.current=N,h.current=setTimeout(()=>{s&&s(),h.current=null},300))},y=ee.useRef(0),_=ee.useRef(null),b=N=>{N.preventDefault(),N.stopPropagation();const k=Date.now(),T=k-y.current;_.current&&(clearTimeout(_.current),_.current=null),T<300&&T>0?(y.current=0,a&&a()):(y.current=k,_.current=setTimeout(()=>{s&&s(),_.current=null},300))};if(!u)return g.jsxs("div",{className:"flex items-center justify-center text-text-muted text-xs py-4",children:["No guitar diagram available for ",n,e]});const A=s||a;return g.jsxs("div",{className:`flex flex-col items-center ${A?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,onClick:A?p:void 0,onTouchEnd:A?b:void 0,onTouchStart:A?N=>N.stopPropagation():void 0,children:[g.jsx("span",{className:`${o?"text-xs":"text-[11px]"} font-bold mb-1 text-center`,style:{backgroundColor:"transparent",color:t,padding:"4px 12px",borderRadius:"10px",border:`2px solid ${t}`},children:f}),g.jsx("svg",{viewBox:"0 0 100 120",className:`w-full ${o?"max-w-[110px]":"max-w-[120px]"}`,style:{minHeight:o?110:120,pointerEvents:"none"},children:g.jsx(rE,{chord:u,color:t})})]})},rE=({chord:n,color:e})=>{const{frets:t,fingers:s,barres:a,baseFret:o}=n,u=20,c=25,h=12,f=18,p=4,y=6,_=4.5,b=Array.from({length:y},(R,D)=>u+D*h),A=Array.from({length:p+1},(R,D)=>c+D*f),N=o===1,k=h*(y-1)+16,T=f*p+8;return g.jsxs(g.Fragment,{children:[g.jsx("rect",{x:u-8,y:c-4,width:k,height:T,fill:"#3d2817",rx:3}),N?g.jsx("rect",{x:u-2,y:c-3,width:h*(y-1)+4,height:4,fill:"#f5f5f5",rx:1}):g.jsx("text",{x:u-14,y:c+f/2+4,fontSize:"12",fill:"#e0e0e0",textAnchor:"middle",fontWeight:"700",children:o}),A.map((R,D)=>g.jsx("line",{x1:u,y1:R,x2:u+h*(y-1),y2:R,stroke:"#b8b8b8",strokeWidth:D===0&&!N?2:1},`fret-${D}`)),b.map((R,D)=>g.jsx("line",{x1:R,y1:c,x2:R,y2:c+f*p,stroke:"#d4d4d4",strokeWidth:1.2+(5-D)*.25},`string-${D}`)),a.map((R,D)=>{const V=t.map((L,F)=>({fret:L,idx:F})).filter(({fret:L})=>L===R);if(V.length<2)return null;const B=Math.min(...V.map(L=>L.idx)),W=Math.max(...V.map(L=>L.idx)),H=c+(R-.5)*f;return g.jsx("rect",{x:b[B]-_,y:H-_,width:b[W]-b[B]+_*2,height:_*2,fill:"white",stroke:e,strokeWidth:2,rx:_},`barre-${D}`)}),t.map((R,D)=>{const V=b[D];if(R===-1)return g.jsx("text",{x:V,y:c-10,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:""},`mute-${D}`);if(R===0)return g.jsx("circle",{cx:V,cy:c-8,r:4,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:1.5},`open-${D}`);const B=a.includes(R),W=s[D];if(B){const L=t.findIndex(F=>F===R);if(D!==L)return null}const H=c+(R-.5)*f;return g.jsxs("g",{children:[g.jsx("circle",{cx:V,cy:H,r:_,fill:"white",stroke:e,strokeWidth:2}),W>0&&!B&&g.jsx("text",{x:V,y:H+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:W})]},`finger-${D}`)}),a.map((R,D)=>{const V=t.map((L,F)=>({fret:L,idx:F})).filter(({fret:L})=>L===R);if(V.length<2)return null;const B=Math.min(...V.map(L=>L.idx)),W=c+(R-.5)*f,H=s[B];return H>0?g.jsx("text",{x:b[B],y:W+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:H},`barre-finger-${D}`):null})]})},vy=({notes:n,rootNote:e,color:t="#6366f1",width:s,numerals:a,onNotePlay:o,compact:u=!1})=>{const c=L2(),h=W=>{const H=W.replace(/[0-9]/g,"");let L=H[0],F="";H.includes("")||H.includes("#")?F="":(H.includes("")||H.includes("b"))&&(F="");let j={C:-6,D:-5,E:-4,F:-3,G:-2,A:-1,B:0}[L]??0;const I="CDEFGAB".indexOf(L),X="CDEFGAB".indexOf(e[0]);return I<X&&X-I>3&&(j+=7),{line:j,accidental:F}},f=W=>{o&&o(W,4)},y=s||(u?180:c?280:340),_=u?70:c?110:115,b=u?6:12,A=b,N=_*(u?.28:.22),k=u?7:10,T=Math.max(80,y-b*2),R=N+(u?32:50),D=N+(u?42:62),V=n.map((W,H)=>{const{line:L,accidental:F}=h(W),te=u?40:60,j=T-te-15,I=u?18:25,X=j/Math.max(n.length-1,1),P=Math.max(X,I),ae=P*Math.max(n.length-1,0),Z=(j-ae)/2,re=A+te+Z+H*P,le=N-L*k/2;return{note:W,x:re,y:le,line:L,accidental:F,needsLedgerLines:L<-4||L>4}}),B=W=>{const H=[];if(W.line<-4)for(let F=-6;F>=W.line;F-=2)F<-4&&H.push(g.jsx("line",{x1:W.x-28/2,y1:N-F*k/2,x2:W.x+28/2,y2:N-F*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-below-${F}`));else if(W.line>4)for(let F=6;F<=W.line;F+=2)F>4&&H.push(g.jsx("line",{x1:W.x-28/2,y1:N-F*k/2,x2:W.x+28/2,y2:N-F*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-above-${F}`));return H};return g.jsx("div",{className:`flex justify-center items-center ${u?"":"w-full"}`,children:g.jsxs("svg",{viewBox:`0 0 ${y} ${_}`,className:u?"":"w-full",style:{minHeight:u?60:c?95:100,width:u?y:void 0},children:[[-2,-1,0,1,2].map(W=>g.jsx("line",{x1:A,y1:N-W*k,x2:A+T,y2:N-W*k,stroke:"#777",strokeWidth:u?1.5:2},`staff-${W}`)),g.jsx("text",{x:A-(u?2:3),y:N+(u?14:20),fontSize:u?"38":c?"56":"62",fill:t,fontFamily:"serif",fontWeight:"bold",children:""}),V.map(W=>B(W)),V.map((W,H)=>g.jsxs("g",{children:[W.accidental&&g.jsx("text",{x:W.x-(u?12:20),y:W.y+(u?3:5),fontSize:u?"12":c?"18":"20",fill:"#ccc",fontFamily:"serif",fontWeight:"bold",children:W.accidental}),o&&g.jsx("circle",{cx:W.x,cy:W.y,r:16,fill:"transparent",style:{cursor:"pointer"},onClick:()=>f(W.note),onTouchEnd:L=>{L.preventDefault(),f(W.note)}}),g.jsx("ellipse",{cx:W.x,cy:W.y,rx:u?5:7,ry:u?4:5.5,fill:H===0?t:"#ddd",stroke:H===0?t:"#ddd",strokeWidth:1,style:o?{cursor:"pointer"}:void 0,className:o?"hover:opacity-80 active:scale-110 transition-transform":""}),g.jsx("text",{x:W.x,y:R,fontSize:u?"7":c?"10":"11",fill:"#999",textAnchor:"middle",fontWeight:"600",children:W.note}),a&&a[H]&&g.jsx("text",{x:W.x,y:D,fontSize:u?"7":c?"9":"10",fill:H===0?t:"#777",textAnchor:"middle",fontWeight:"700",children:a[H]})]},`note-${H}`))]})})},Tg=({variant:n="sidebar",onScrollChange:e,forceVisible:t=!1})=>{const{selectedChord:s,selectedKey:a,chordPanelVisible:o,toggleChordPanel:u,selectedSectionId:c,selectedSlotId:h,addChordToSlot:f,setSelectedChord:p,setSelectedSlot:y,timelineVisible:_,openTimeline:b,setChordPanelGuitarExpanded:A,setChordPanelVoicingsExpanded:N,chordPanelAttention:k}=Ht(),T=Yh(),[R,D]=ee.useState(null),[V,B]=ee.useState([]),[W,H]=ee.useState(320),[L,F]=ee.useState(!1),te=ee.useRef(0),j=n==="drawer",[I,X]=ee.useState(s),P=s??I,{isMobile:ae}=ju(),Z=n==="landscape-panel"||n==="landscape-expanded",re=n==="landscape-panel",le=!j&&!Z&&W<360,fe=!j&&!Z&&W<290,[_e,z]=ee.useState(!1),[E,$]=ee.useState(!1),[G,Q]=ee.useState(!1),[ie,pe]=ee.useState(!ae||Z),[de,ye]=ee.useState(0),Se=4,Be=Me=>{z(Me),N(Me)},Qe=Me=>{pe(Me),A(Me)};ee.useEffect(()=>{A(ie),N(_e)},[]);const Xe=ee.useRef(0),ot=ee.useRef(0),[Y,Ie]=ee.useState(0),vt=ee.useRef(null),et=ee.useRef(null),Re=ee.useRef(null),it=ee.useRef(null),qe=ee.useRef(null),ht=Me=>{if(Me.current&&qe.current){const yt=qe.current,Ve=Me.current.offsetTop-yt.offsetTop;yt.scrollTo({top:Ve,behavior:"smooth"})}},Te=ee.useCallback(Me=>{!j||!ae||(Xe.current=Me.touches[0].clientY,ot.current=Me.touches[0].clientY)},[j,ae]),tt=ee.useCallback(Me=>{if(!j||!ae)return;ot.current=Me.touches[0].clientY;const yt=ot.current-Xe.current;yt>0&&Ie(Math.min(yt,150))},[j,ae]),bt=ee.useCallback(()=>{!j||!ae||(Y>80?(Ie(300),setTimeout(()=>{u(),Ie(0)},200)):Ie(0))},[j,ae,Y,u]),mt=()=>{if(!P)return"Chord Details";const Me=R||P.quality;return Ln(Me==="major"||Me==="maj"?P.root:Me==="minor"||Me==="m"?`${P.root}m`:Me==="diminished"||Me==="dim"?`${P.root}dim`:`${P.root}${Mh(Me)}`)},st=ee.useCallback((Me,yt)=>{fw(Me,yt)},[]),dt={maj:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',major:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',maj7:"Smooth and sophisticated, the major 7th adds a dreamy, floating quality. Think Burt Bacharach, neo-soul, and late-night jazz.",maj9:"Builds on maj7 with a crystalline 9th. Modern, airy, and introspective  perfect for R&B ballads and ambient textures.",maj13:"The full major palette: lush, orchestral, and complex. Great for endings or when you want maximum harmonic richness.",6:"Warm and vintage  the major 6th has an old-Hollywood or country sweetness. Softer resolution than maj7.",add9:"A major triad with added sparkle from the 9th, but no 7th. Clean, modern, and ubiquitous in pop and worship music.",7:"The dominant 7th creates bluesy tension begging for resolution. The engine behind the ii-V-I and the soul of rock & blues.",9:"Dominant 7 with a colorful 9th. Funky, jazzy, and sophisticated  think Stevie Wonder, Earth Wind & Fire, and neo-soul.",11:"Suspended, modal quality over dominant function. Creates an open, unresolved tension that floats before landing.",13:"The dominant chord at its richest: soulful 13th on top of bluesy 7th. Perfect for jazz turnarounds and R&B grooves.",m7:"The workhorse minor chord: soulful, laid-back, and endlessly versatile. The default for jazz ii chords and R&B grooves.",minor:"The basic minor triad: melancholic, introspective, and emotionally direct. Minor keys are built on this sound.",m9:"Lush and cinematic  adds depth and width to the minor sound. Evokes late-night cityscapes and emotional introspection.",m11:"Spacious and modal, with an open 11th suspension. Great for grooves, vamps, and creating atmospheric tension.",m6:"Bittersweet with a film-noir quality. The 6th adds sophistication to minor  a nice alternative to m7 for tonic chords.",sus2:"Neither major nor minor  the open 2nd creates an ambient, neutral quality. Ubiquitous in pop, rock, and modern worship.",sus4:"Suspended tension from the 4th wants to fall to the 3rd. Creates expectation and movement  classic resolution technique.",dim:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",diminished:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",m7b5:"Half-diminished: dark and sophisticated. The natural ii chord in minor keys, essential for minor ii-V-i progressions."},gt=["maj","7","maj7","maj9","maj13","6","13","m7","m9","m11","m6","sus2","sus4","dim","m7b5","add9","9","11"],Nt=Me=>{if(!P?.root)return"-";const yt=sn=>sn.replace(/[\d]/g,"").replace(//,"b").replace(//,"#"),we={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},Ve=we[yt(P.root)],pt=we[yt(Me)];if(Ve===void 0||pt===void 0)return"-";const Et=(pt-Ve+12)%12;return{0:"R",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[Et]??"-"},Ee=ee.useCallback(Me=>{j||(Me.preventDefault(),F(!0))},[j]);ee.useEffect(()=>{if(!L||j)return;const Me=Ve=>{const pt=window.innerWidth-Ve.clientX;H(Math.max(280,Math.min(500,pt)))},yt=Ve=>{if(Ve.touches.length===1){const pt=window.innerWidth-Ve.touches[0].clientX;H(Math.max(280,Math.min(500,pt)))}},we=()=>{F(!1)};return document.addEventListener("mousemove",Me),document.addEventListener("mouseup",we),document.addEventListener("touchmove",yt),document.addEventListener("touchend",we),()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",we),document.removeEventListener("touchmove",yt),document.removeEventListener("touchend",we)}},[L,j]),ee.useEffect(()=>{s&&X(s)},[s]),ee.useEffect(()=>{D(null),B([]),ye(0)},[P?.root,P?.quality]),ee.useEffect(()=>{Z&&ie&&vt.current&&qe.current&&setTimeout(()=>{if(vt.current&&qe.current){const Me=vt.current,yt=qe.current,we=Me.offsetTop-yt.offsetTop;yt.scrollTo({top:we+35,behavior:"smooth"})}},100)},[Z,ie]),ee.useEffect(()=>{if(!j||!e)return;const Me=qe.current;if(!Me)return;const yt=()=>{const we=Me.scrollHeight-Me.scrollTop-Me.clientHeight<20;e(we)};return Me.addEventListener("scroll",yt),yt(),()=>Me.removeEventListener("scroll",yt)},[j,e]);const ft=P&&T[P.root]||"#6366f1",ut=V.length>0?V:P?.notes||[],We=lu(ut,de),at=jS(ut),xt=Me=>{const yt=Date.now();if(yt-te.current<300||(te.current=yt,!P))return;const we=la(P.root,Me),Ve=lu(we,de);Br(Ve),D(Me),B(we)},ct=Me=>{if(te.current=0,!_){b();return}if(!P||!c||!h)return;const yt=la(P.root,Me),we=T5(P.root,Me,yt,de),Ve={...P,quality:Me,symbol:we,notes:yt,inversion:de};f(Ve,c,h),y(c,h),p(Ve)},nn=ee.useCallback(()=>{if(!P)return;const Me=R||P.quality,yt=la(P.root,Me),we=lu(yt,de);Br(we)},[P,R,de]),jt=ee.useCallback(()=>{if(!_){b();return}if(!P||!c||!h)return;const Me=R||P.quality,yt=la(P.root,Me),we=T5(P.root,Me,yt,de),Ve={...P,quality:Me,symbol:we,notes:yt,inversion:de};f(Ve,c,h),y(c,h),p(Ve)},[P,R,de,c,h,f,y,p,_,b]),Ft=ee.useRef(0),en=ee.useRef(null),At=ee.useCallback(Me=>{if(!P)return;Me.preventDefault(),Me.stopPropagation();const yt=Date.now(),we=yt-Ft.current;en.current&&(clearTimeout(en.current),en.current=null),we<300&&we>0?(Ft.current=0,jt()):(Ft.current=yt,en.current=setTimeout(()=>{nn(),en.current=null},300))},[P,nn,jt]),wt=()=>{if(!P)return{extensions:[],description:""};let Me=P.numeral;if(Me&&Me.includes("(")){const we=Me.match(/^(.+?)\s*\(/);we&&(Me=we[1].trim())}return{I:{extensions:["maj","maj7","maj9","maj13","6"],description:"The tonic  your home base and resting point. This is where phrases resolve and songs often begin and end. Its stability makes it perfect for choruses and moments of arrival."},IV:{extensions:["maj","maj7","maj9","maj13","6"],description:'The subdominant  warm, hopeful, and slightly floating. It gently pulls away from home without creating urgency. Great for pre-choruses and that "lifting" feeling before a chorus.'},V:{extensions:["maj","7","9","11","sus4","13"],description:`The dominant  maximum tension wanting to resolve back to I. This chord creates expectation and forward motion. It's the "question" that begs for an "answer."`},ii:{extensions:["m","m7","m9","m11","m6"],description:"The supertonic  a natural setup chord that leads smoothly to V or IV. It's the workhorse of the ii-V-I progression and adds sophistication to any verse."},iii:{extensions:["m","m7"],description:"The mediant  mysterious and chameleon-like. It can substitute for I (they share two notes) or lead to vi. Use it for unexpected color and emotional complexity."},vi:{extensions:["m","m7","m9","m11"],description:'The relative minor  emotional depth and melancholy without leaving the key. This is the "sad" chord in major keys and the foundation of countless pop progressions (vi-IV-I-V).'},"vii":{extensions:["dim","m75"],description:"The leading tone chord  highly unstable and restless. Every note wants to move somewhere, making it a powerful passing chord that pulls strongly toward I."},II:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of V)  borrowed tension that points toward V. Use it to create a dramatic runway before landing on V."},III:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of vi)  creates an unexpected dramatic pull toward vi. Perfect for adding tension before a minor chord moment."}}[Me||""]||{extensions:[],description:`This chord doesn't fit in the key of ${a}, but it may add color and interest to your progression.`}};if(!o&&!t)return j?g.jsxs("div",{className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-pointer touch-feedback active:bg-bg-tertiary",onClick:u,onTouchStart:Me=>{Xe.current=Me.touches[0].clientY,ot.current=Me.touches[0].clientY},onTouchMove:Me=>{ot.current=Me.touches[0].clientY},onTouchEnd:()=>{Xe.current-ot.current>30&&u()},title:"Swipe up or tap to open",children:[g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),g.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Chord Details"})]}):g.jsx("button",{onClick:u,className:"h-full px-2 flex items-center justify-center bg-bg-secondary border-l border-border-subtle hover:bg-bg-tertiary transition-colors shrink-0",title:"Show chord details",children:g.jsx(Nk,{size:18,className:"text-text-muted"})});const qt=n==="landscape-panel",wn=n==="landscape-expanded";return g.jsxs("div",{className:`${wn||qt?"h-full w-full flex flex-col bg-bg-secondary overflow-hidden":j?`${ae?"relative w-full":"fixed inset-x-3 bottom-[88px]"} ${ae?"max-h-[60vh]":"max-h-[70vh]"} bg-bg-secondary ${ae?"border-t-2 border-border-subtle":"border-2 border-border-subtle rounded-2xl"} shadow-2xl overflow-hidden ${ae?"":"z-40"} flex`:"h-full flex bg-bg-secondary border-l border-border-subtle overflow-x-hidden"}${k?" chord-panel-attention":""}`,style:{...!j&&!qt&&!wn?{width:W,minWidth:0,maxWidth:"100%"}:{},...j?{transform:Y>0?`translateY(${Y}px)`:void 0,opacity:Y>0?Math.max(0,1-Y/300):1,transition:Y===0||Y>=150?"all 0.2s ease-out":"none"}:{},...k?{boxShadow:"0 0 20px 4px rgba(99, 102, 241, 0.4), inset 0 0 10px rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 0.6)",transition:"box-shadow 0.3s ease-out, border-color 0.3s ease-out"}:{}},children:[!j&&!qt&&g.jsx("div",{className:`w-3 flex items-center justify-center cursor-ew-resize hover:bg-bg-tertiary active:bg-accent-primary/20 transition-colors ${L?"bg-accent-primary/20":""} relative z-[60] touch-none`,onMouseDown:Ee,onTouchStart:Ee,children:g.jsx(rw,{size:12,className:"text-text-muted"})}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 relative",children:[j&&ae&&g.jsx("div",{className:"flex flex-col items-center shrink-0 cursor-grab active:cursor-grabbing",onTouchStart:Te,onTouchMove:tt,onTouchEnd:bt,children:g.jsx("div",{className:"pt-2.5 pb-1 flex flex-col items-center",children:g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})})}),g.jsxs("div",{className:`${Z?"px-3 py-2":ae&&j?"px-2 py-2":"px-4 py-3"} border-b border-border-subtle ${fe?"flex flex-col gap-2":"grid grid-cols-[1fr_auto_1fr] items-center gap-2"} shrink-0 ${j?"bg-bg-secondary/80 backdrop-blur-md":""}`,children:[g.jsx("div",{className:`flex items-center min-w-0 ${fe?"justify-center":""}`,style:{gap:"8px"},children:re&&P?g.jsx(g.Fragment,{children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs font-bold cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all",style:{backgroundColor:"transparent",color:ft,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${ft}`},onClick:nn,onDoubleClick:jt,children:mt()}),P.numeral&&g.jsx("span",{className:"text-sm font-serif italic text-text-muted shrink-0",children:Ln(P.numeral)}),g.jsxs("div",{className:"flex items-center shrink-0",title:"Chord inversion",children:[g.jsx("button",{onClick:()=>{const Me=Math.max(0,de-1);ye(Me);const yt=lu(ut,Me);Br(yt)},disabled:de<=0,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:g.jsx(Gh,{size:10})}),g.jsx("span",{className:"text-[9px] font-bold text-text-secondary w-3 text-center",children:de}),g.jsx("button",{onClick:()=>{const Me=Math.min(at,de+1);ye(Me);const yt=lu(ut,Me);Br(yt)},disabled:de>=at,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:g.jsx(Wh,{size:10})})]})]})}):g.jsx(g.Fragment,{children:g.jsxs("span",{className:`flex items-center shrink-0 min-w-0 ${P?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,style:P?{gap:"4px",backgroundColor:"transparent",color:ft,padding:"3px 8px",borderRadius:"6px",border:`1.5px solid ${ft}`}:{gap:"4px"},onClick:P?nn:void 0,onDoubleClick:P?jt:void 0,onTouchEnd:P?At:void 0,onTouchStart:P?Me=>Me.stopPropagation():void 0,children:[g.jsx("span",{className:`${Z?"text-lg":ae?"text-sm":"text-xs sm:text-sm"} font-bold leading-none truncate`,children:ae&&j?mt():P?Ln(`${P.root}${Mh(R||P.quality)}`):"Chord Details"}),P?.numeral&&g.jsx("span",{className:`${Z?"text-sm":"text-[10px]"} font-serif italic opacity-70 shrink-0`,children:Ln(P.numeral)})]})})}),!fe&&g.jsx("div",{className:"flex items-center justify-center",children:P&&!re&&g.jsxs("div",{className:"flex items-center bg-bg-tertiary/40 rounded-full px-0.5 ml-3",title:"Chord inversion - which note is in the bass",children:[g.jsx("button",{onClick:()=>{const Me=Math.max(0,de-1);ye(Me);const yt=lu(ut,Me);Br(yt)},disabled:de<=0,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous inversion",children:g.jsx(Gh,{size:8})}),g.jsx("span",{className:"text-[11px] font-semibold text-text-secondary min-w-[20px] text-center",children:ES(de)}),g.jsx("button",{onClick:()=>{const Me=Math.min(at,de+1);ye(Me);const yt=lu(ut,Me);Br(yt)},disabled:de>=at,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next inversion",children:g.jsx(Wh,{size:8})})]})}),g.jsxs("div",{className:`flex items-center gap-2 shrink-0 ${fe?"justify-center w-full":"justify-end"}`,children:[P&&g.jsxs("button",{onClick:jt,className:`${fe?"flex-1 py-2":ae&&j?"px-8 py-1.5 min-w-[100px]":ae?"px-3 py-1.5":"px-2.5 py-1"} bg-gradient-to-r from-accent-primary to-purple-600 hover:opacity-90 rounded-lg transition-all touch-feedback flex items-center justify-center gap-1.5 shadow-md shadow-accent-primary/20 active:scale-95`,title:"Add chord to timeline",children:[g.jsx(Mc,{size:fe?16:ae?14:12,className:"text-white"}),g.jsx("span",{className:`${fe?"text-sm":ae?"text-xs":"text-[11px]"} font-semibold text-white`,children:"Add"})]}),!Z&&!(ae&&j)&&g.jsx("button",{onClick:u,className:`${fe?"p-2 bg-bg-tertiary/60 rounded-lg":ae?"p-2 min-w-[40px] min-h-[40px]":"p-1"} hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center`,title:"Hide panel",children:g.jsx(_k,{size:fe||ae?18:16,className:"text-text-muted"})})]})]}),P?g.jsxs("div",{ref:qe,className:`flex-1 ${wn?"flex flex-row overflow-hidden":"overflow-y-auto overflow-x-hidden"} min-h-0 overscroll-contain`,children:[!wn&&g.jsxs("div",{className:`${ae?"px-5 pt-4 pb-4":"px-5 py-4"} border-b border-border-subtle`,children:[g.jsx(Ag,{highlightedNotes:We,rootNote:P.root,bassNote:We[0],color:ft,octave:Se,onNotePlay:st}),g.jsx("div",{className:`${ae?"mt-4":"mt-5"} w-full`,children:g.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`${ae?"56px":"72px"} repeat(${We.length}, minmax(0, 1fr))`},children:[g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Notes"}),We.map((Me,yt)=>g.jsx("div",{className:`text-center ${ae?"text-xs":"text-sm"} font-bold text-text-primary flex items-center justify-center`,style:{height:"16px"},children:Me},`note-${yt}`)),g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Absolute"}),We.map((Me,yt)=>g.jsx("div",{className:`text-center ${ae?"text-[11px]":"text-xs"} text-text-primary font-semibold flex items-center justify-center`,style:{height:"16px"},children:Nt(Me)},`abs-${yt}`)),g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Relative"}),We.map((Me,yt)=>g.jsx("div",{className:`text-center ${ae?"text-[11px]":"text-xs"} text-text-secondary flex items-center justify-center`,style:{height:"16px"},children:MS(a,Me).replace(/^1/,"R")},`rel-${yt}`))]})})]}),g.jsxs("div",{className:`flex flex-col ${wn?"flex-1 overflow-y-auto":""}`,children:[g.jsxs("div",{ref:vt,className:`${Z?"px-2 py-1":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Me=!ie;Qe(Me),Me&&setTimeout(()=>ht(vt),50)},className:`w-full flex items-center justify-between ${ie?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsx("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide whitespace-nowrap`,children:re?"Guitar & Suggested":`Guitar & Suggested Voicings for ${Ln(P.numeral||P.symbol)}`}),g.jsx(jh,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${ie?"rotate-180":""}`})]}),ie&&g.jsx(g.Fragment,{children:g.jsxs("div",{className:`flex items-start ${re?"gap-1":"gap-2"} px-3`,style:{marginTop:re?"4px":"8px"},children:[g.jsxs("div",{className:"flex flex-col items-center shrink-0",style:{minWidth:re?"70px":"100px"},children:[g.jsx(Cg,{root:P.root,quality:R||P.quality,color:ft,onClick:nn,onDoubleClick:jt}),!re&&g.jsx("p",{className:`${ae?"text-[10px]":"text-[9px]"} text-text-muted leading-relaxed text-center ${ae?"mb-1 px-1":"mb-1 px-0.5"}`,style:{maxWidth:re?"70px":"100px"},children:dt[R||P.quality]||"Select a voicing to see its description."})]}),g.jsx("div",{className:"w-px bg-border-subtle self-stretch"}),g.jsx("div",{className:"flex-1 flex flex-col justify-start pl-1",children:wt().extensions.length>0?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`grid ${re||le?"grid-cols-1":"grid-cols-2"}`,style:{gap:re?"3px":le?"4px":ae?"6px":"5px",marginBottom:re?"2px":"4px",marginRight:le?"12px":void 0},children:wt().extensions.map(Me=>g.jsxs("button",{className:`relative group ${re?"px-1 py-0.5 text-[8px] min-h-[20px]":le?"px-2 py-1.5 text-[9px] min-h-[26px]":ae?"px-2 py-2 text-xs min-h-[36px]":"px-1.5 py-1 text-[10px]"} rounded font-semibold transition-colors touch-feedback text-center`,style:{width:re?"60px":le?"70px":ae?"80px":"70px",...R===Me?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#f0f0f5",border:"1px solid rgba(255,255,255,0.08)"}},onClick:()=>xt(Me),onDoubleClick:()=>ct(Me),children:[Ln(`${P.root}${Me}`),!ae&&dt[Me]&&g.jsxs("span",{className:"pointer-events-none absolute -top-6 -translate-y-full left-1/2 -translate-x-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[dt[Me]?g.jsxs(g.Fragment,{children:[dt[Me],g.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},Me))}),!le&&g.jsx("div",{style:{marginTop:re?"2px":"6px"},children:g.jsx(vy,{notes:We,rootNote:P.root,color:ft,numerals:We.map(Me=>Nt(Me)),onNotePlay:st,compact:!0})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[g.jsx(vy,{notes:We,rootNote:P.root,color:ft,numerals:We.map(Me=>Nt(Me)),onNotePlay:st,compact:!1}),g.jsxs("p",{className:`${re?"text-[8px]":ae?"text-[10px]":"text-[9px]"} text-text-muted italic text-center mt-1`,children:["Out of key  see ",g.jsx("span",{className:"font-semibold text-text-secondary",children:"Voicings"})," below"]})]})})]})})]}),g.jsxs("div",{ref:et,className:`${wn?"px-3 py-1":ae?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Me=!_e;Be(Me),Me&&setTimeout(()=>ht(et),50)},className:`w-full flex items-center justify-between ${_e?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsx("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Voicings"}),g.jsx(jh,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${_e?"rotate-180":""}`})]}),_e&&g.jsx("div",{className:`grid ${re?"grid-cols-4":ae?"grid-cols-3":"grid-cols-2 sm:grid-cols-3"} ${re?"gap-2":ae?"gap-3":"gap-2.5"}`,children:gt.map((Me,yt)=>{const Ve=yt%2===0?{left:"calc(100% + 10px)"}:{right:"calc(100% + 10px)"};return g.jsxs("button",{className:`relative group ${re?"px-1.5 py-1 min-h-[22px] text-[8px]":ae?"px-3 py-3 min-h-[48px] text-xs":"px-2 py-1.5 text-[10px]"} rounded font-medium transition-colors touch-feedback`,style:R===Me?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#9898a6",border:"1px solid rgba(255,255,255,0.08)"},onClick:()=>xt(Me),onDoubleClick:()=>ct(Me),children:[Me,!ae&&dt[Me]&&g.jsxs("span",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{...Ve,backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[dt[Me]?g.jsxs(g.Fragment,{children:[dt[Me],g.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},Me)})})]}),g.jsxs("div",{ref:it,className:`${wn?"px-3 py-1":ae?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Me=!G;Q(Me),Me&&setTimeout(()=>ht(it),50)},className:`w-full flex items-center justify-between cursor-pointer ${G?"mb-3":"mb-0"} rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsx("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Theory"}),g.jsx(jh,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${G?"rotate-180":""}`})]}),G&&g.jsx("div",{className:`${ae?"p-3":"p-4"} bg-bg-elevated rounded-none`,children:g.jsx("p",{className:`${ae?"text-sm":"text-xs"} text-text-secondary leading-relaxed`,children:wt().description})})]}),g.jsxs("div",{ref:Re,className:`${wn?"px-3 py-1":ae?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Me=!E;$(Me),Me&&setTimeout(()=>ht(Re),50)},className:`w-full flex items-center justify-between ${E?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsxs("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:["Scales in ",Ln(a)]}),g.jsx(jh,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${E?"rotate-180":""}`})]}),E&&(()=>{const Me=sg(a),yt=Ve=>[...Me.slice(Ve),...Me.slice(0,Ve)].map(Et=>Ln(Et)).join("  "),we=[{name:"Ionian (I)",degree:0,quality:"MAJ",color:"#EAB308",desc:"Bright, happy"},{name:"Dorian (ii)",degree:1,quality:"min",color:"#8B5CF6",desc:"Hopeful minor, jazzy"},{name:"Phrygian (iii)",degree:2,quality:"min",color:"#F97316",desc:"Spanish, exotic"},{name:"Lydian (IV)",degree:3,quality:"MAJ",color:"#06B6D4",desc:"Dreamy, floating"},{name:"Mixolydian (V)",degree:4,quality:"MAJ",color:"#10B981",desc:"Bluesy, rock"},{name:"Aeolian (vi)",degree:5,quality:"min",color:"#3B82F6",desc:"Sad, melancholic"},{name:"Locrian (vii)",degree:6,quality:"dim",color:"#EF4444",desc:"Dark, unstable"}];return g.jsx("div",{className:"space-y-1.5 pb-2",children:we.map(Ve=>g.jsxs("div",{className:"bg-bg-tertiary/50 p-2 rounded",style:{borderLeft:`2px solid ${Ve.color}`},children:[g.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[g.jsxs("span",{className:`${ae?"text-[11px]":"text-[10px]"} font-medium text-white`,children:[Ln(Me[Ve.degree])," ",Ve.name.split(" ")[0]]}),g.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded",style:{color:Ve.color,backgroundColor:`${Ve.color}15`},children:Ve.quality})]}),g.jsx("p",{className:`${ae?"text-[9px]":"text-[8px]"} text-gray-400 mb-1`,children:Ve.desc}),g.jsx("p",{className:`${ae?"text-[10px]":"text-[9px]"} text-gray-500 font-mono tracking-wide`,children:yt(Ve.degree)})]},Ve.name))})})()]})]}),ae&&g.jsx("div",{className:"h-12 shrink-0"})]}):g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[g.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-purple-600/20 flex items-center justify-center border border-accent-primary/30",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-primary",children:[g.jsx("circle",{cx:"8",cy:"18",r:"4"}),g.jsx("path",{d:"M12 18V2l7 4"})]})}),g.jsxs("div",{className:"text-center space-y-2",children:[g.jsx("p",{className:`${ae?"text-base":"text-sm"} font-semibold text-text-primary`,children:"No chord selected"}),g.jsx("p",{className:`${ae?"text-sm":"text-xs"} text-text-muted max-w-[200px]`,children:"Tap a chord on the wheel or select one from the timeline"})]})]})]})]})},sE="modulepreload",iE=function(n){return"/"+n},yy={},Ih=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=h(t.map(f=>{if(f=iE(f),f in yy)return;yy[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":sE,p||(_.as="script"),_.crossOrigin="",_.href=f,c&&_.setAttribute("nonce",c),document.head.appendChild(_),p)return new Promise((b,A)=>{_.addEventListener("load",b),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},aE=()=>{const{currentSong:n,isPlaying:e,tempo:t,volume:s,setTempo:a,setVolume:o,instrument:u,setInstrument:c,isMuted:h,toggleMute:f,toggleLoop:p,isLooping:y,playingSectionId:_,selectedSectionId:b,setSelectedSlot:A}=Ht(),{isMobile:N,isLandscape:k}=ju(),[T,R]=ee.useState(!1),[D,V]=ee.useState(!1),[B,W]=ee.useState(t.toString()),H=ee.useRef(null),[L,F]=ee.useState(!1),te=ee.useRef(null),j=ee.useRef(t),I=ee.useRef(null);ee.useEffect(()=>{M2(n)},[n]),ee.useEffect(()=>{bw(t)},[t]),ee.useEffect(()=>{E2(u)},[u]),ee.useEffect(()=>{yw()},[y,n,_,b]),ee.useEffect(()=>{Ih(()=>Promise.resolve().then(()=>vg),void 0).then(Q=>{R(!0),Q.preloadAudio().finally(()=>R(!1))})},[]);const X=async()=>{try{await j2(),e?(gw(),Ht.getState().setIsPlaying(!1)):(R(!0),await mw(),Ht.getState().setIsPlaying(!0))}catch(Q){console.error("Playback error:",Q)}finally{R(!1)}},P=Q=>{vw(Q)},ae=()=>{p()},Z=()=>{const Q=n.sections;if(Q.length===0)return;const ie=b?Q.findIndex(ye=>ye.id===b):-1,pe=ie>=0?(ie+1)%Q.length:0,de=Q[pe];de&&de.measures[0]?.beats[0]&&A(de.id,de.measures[0].beats[0].id)},re=[{value:"piano",label:"Piano"},{value:"epiano",label:"Electric Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"}];re.find(Q=>Q.value===u)||c("piano");const le=Q=>{const ie=re.findIndex(de=>de.value===u);if(ie===-1){c("piano");return}const pe=Q==="next"?(ie+1)%re.length:(ie-1+re.length)%re.length;c(re[pe].value)},fe=()=>{W(t.toString()),V(!0),setTimeout(()=>H.current?.focus(),0)},_e=()=>{const Q=parseInt(B,10);!isNaN(Q)&&Q>=40&&Q<=240?a(Q):W(t.toString()),V(!1)},z=Q=>{Q.key==="Enter"?_e():Q.key==="Escape"&&(W(t.toString()),V(!1))},E=Q=>{te.current=Q.touches[0].clientX,j.current=t,F(!1),I.current=setTimeout(()=>{I.current=null},150)},$=Q=>{if(te.current===null)return;const pe=Q.touches[0].clientX-te.current;if(Math.abs(pe)>10){F(!0),I.current&&(clearTimeout(I.current),I.current=null);const de=Math.round(pe/3),ye=Math.min(240,Math.max(40,j.current+de));a(ye)}},G=()=>{!L&&I.current&&(clearTimeout(I.current),fe()),te.current=null,F(!1),I.current=null};return g.jsxs("div",{"data-playback-controls":!0,className:"flex flex-col w-full bg-bg-elevated border-t border-border-subtle",children:[g.jsxs("div",{className:`${N&&k?"h-8":N?"h-11":"h-12"} flex items-center justify-between ${N?"px-2 gap-1":"px-6"} relative z-20`,children:[g.jsxs("div",{className:"flex items-center gap-0.5",children:[g.jsx("button",{onClick:()=>P("prev"),className:`${N&&k?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:g.jsx(lw,{size:N&&k?12:16})}),g.jsx("button",{onClick:X,disabled:T,className:`${N&&k?"w-6 h-6":N?"w-8 h-8":"w-9 h-9"} rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95 touch-feedback`,children:T?g.jsx(pk,{size:N&&k?12:N?16:18,className:"animate-spin"}):e?g.jsx(aw,{size:N&&k?12:N?16:18,fill:"currentColor"}):g.jsx(nd,{size:N&&k?12:N?16:18,fill:"currentColor",className:"ml-0.5"})}),g.jsx("button",{onClick:()=>P("next"),className:`${N&&k?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:g.jsx(cw,{size:N&&k?12:16})}),N?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:Z,className:`${k?"p-1":"p-1.5"} transition-colors text-text-secondary hover:text-text-primary touch-feedback`,title:"Cycle to Next Section",children:g.jsx(jk,{size:k?12:14})}),g.jsx("button",{onClick:ae,className:`${k?"p-1":"p-1.5"} transition-colors touch-feedback ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:g.jsx(J5,{size:k?12:14})})]}):g.jsx("button",{onClick:ae,className:`p-1.5 transition-colors ml-1 ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:g.jsx(J5,{size:14})})]}),g.jsx("div",{className:"flex items-center",children:N?D?g.jsx("input",{ref:H,type:"number",inputMode:"numeric",value:B,onChange:Q=>W(Q.target.value),onBlur:_e,onKeyDown:z,className:`${k?"w-10 text-[9px] h-4":"w-12 text-[11px] h-5"} bg-bg-tertiary border border-accent-primary rounded-sm px-1 text-center text-text-primary font-medium focus:outline-none`,min:40,max:240}):g.jsxs("div",{onTouchStart:E,onTouchMove:$,onTouchEnd:G,onClick:fe,className:`${k?"text-[9px] px-1.5 h-4":"text-[11px] px-2 h-5"} font-medium ${L?"text-accent-primary":"text-text-secondary"} hover:text-text-primary transition-colors touch-feedback whitespace-nowrap flex items-center cursor-ew-resize select-none`,children:[t," ",g.jsx("span",{className:`${L?"text-accent-primary/70":"text-text-muted"} ml-0.5`,children:"BPM"})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-text-secondary font-medium",children:"Tempo"}),g.jsx("input",{type:"number",value:t,onChange:Q=>a(Number(Q.target.value)),className:"w-14 bg-bg-tertiary border border-border-subtle rounded px-2 py-1 text-center text-text-primary text-[11px] font-medium",min:40,max:240}),g.jsx("span",{className:"text-text-muted",children:"BPM"})]})}),g.jsxs("div",{className:`flex items-center ${N?"gap-1.5":"gap-4"}`,children:[g.jsxs("div",{className:"flex items-center gap-1",children:[!N&&g.jsxs("div",{className:"flex items-center rounded bg-bg-tertiary/60 border border-border-subtle/70 h-7",children:[g.jsx("button",{onClick:()=>le("prev"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-l transition-colors flex items-center",title:"Previous instrument",children:g.jsx(Gh,{size:12})}),g.jsx("button",{onClick:()=>le("next"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-r transition-colors flex items-center",title:"Next instrument",children:g.jsx(Wh,{size:12})})]}),N&&!k&&g.jsx(wp,{size:14,className:"text-text-muted"}),g.jsx("select",{value:u,onChange:Q=>c(Q.target.value),className:`bg-bg-tertiary border border-border-subtle rounded ${N&&k?"px-3 py-1 h-6 text-[7px] min-w-[60px]":N?"px-1.5 h-7 text-[11px] min-w-[70px]":"px-2 h-7 text-[10px] min-w-[130px]"} text-text-secondary focus:outline-none focus:border-accent-primary cursor-pointer`,children:re.map(Q=>g.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),g.jsxs("div",{className:`flex items-center ${N?"":"gap-2 w-28"}`,children:[g.jsx("button",{onClick:f,className:`${N?"p-1.5":"p-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center rounded`,title:h?"Unmute":"Mute",children:h||s===0?g.jsx($k,{size:N?16:14}):g.jsx(bg,{size:N?16:14})}),!N&&g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:h?0:s,onChange:Q=>{h&&f(),o(Number(Q.target.value))},className:`w-full h-1 bg-bg-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full ${h?"opacity-50":""}`})]})]})]}),N&&!k&&g.jsx("div",{className:"w-full bg-bg-elevated/50 flex justify-center items-start pt-[6px]",style:{height:"env(safe-area-inset-bottom)",minHeight:"env(safe-area-inset-bottom)"},children:g.jsx("div",{className:"w-32 h-1 rounded-full bg-white/5"})})]})},oE={intro:{bg:"bg-purple-500/10",headers:"bg-purple-500/30 text-purple-100",border:"border-purple-500/30",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/10",headers:"bg-blue-500/30 text-blue-100",border:"border-blue-500/30",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/10",headers:"bg-cyan-500/30 text-cyan-100",border:"border-cyan-500/30",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/10",headers:"bg-amber-500/30 text-amber-100",border:"border-amber-500/30",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/10",headers:"bg-emerald-500/30 text-emerald-100",border:"border-emerald-500/30",accent:"bg-emerald-500"},interlude:{bg:"bg-teal-500/10",headers:"bg-teal-500/30 text-teal-100",border:"border-teal-500/30",accent:"bg-teal-500"},solo:{bg:"bg-orange-500/10",headers:"bg-orange-500/30 text-orange-100",border:"border-orange-500/30",accent:"bg-orange-500"},breakdown:{bg:"bg-red-500/10",headers:"bg-red-500/30 text-red-100",border:"border-red-500/30",accent:"bg-red-500"},tag:{bg:"bg-pink-500/10",headers:"bg-pink-500/30 text-pink-100",border:"border-pink-500/30",accent:"bg-pink-500"},hook:{bg:"bg-yellow-500/10",headers:"bg-yellow-500/30 text-yellow-100",border:"border-yellow-500/30",accent:"bg-yellow-500"},outro:{bg:"bg-rose-500/10",headers:"bg-rose-500/30 text-rose-100",border:"border-rose-500/30",accent:"bg-rose-500"}},lE=60,xy=.25,cE={bg:"bg-slate-500/10",headers:"bg-slate-500/30 text-slate-100",border:"border-slate-500/30",accent:"bg-slate-500"},uE=({section:n,allSections:e,onSelectBeat:t,onBeatTap:s,onEmptySlotTap:a,isActive:o,playingSlotId:u,selectedBeatId:c,chordColors:h,measureWidth:f,isCompact:p,onRemoveSection:y})=>{const{attributes:_,listeners:b,setNodeRef:A,transform:N,transition:k,isDragging:T}=U2({id:n.id}),R={transform:$o.Transform.toString(N),transition:k},D=oE[n.type]||cE,V=n.measures,B=Rh(n,e),H=Math.max(p?40:100,V.length*f),L=p?60:140;return p?g.jsxs("div",{ref:A,"data-section-id":n.id,style:{...R,width:H,height:L,touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"},className:Vt("relative flex flex-col rounded-lg overflow-hidden shrink-0 transition-all border cursor-pointer select-none draggable-element",D.bg,D.border,T?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-70 hover:scale-[1.02]",o?"ring-2 ring-white/30":""),onClick:()=>t(n.id,n.measures[0]?.beats[0]?.id),..._,...b,children:[g.jsx("div",{className:Vt("h-1.5 w-full",D.accent)}),g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 py-1",children:[g.jsx("span",{className:"font-bold uppercase tracking-wide text-center leading-tight text-sm",children:n.type.charAt(0).toUpperCase()}),g.jsxs("span",{className:"text-[8px] font-mono text-white/40 mt-0.5",children:[V.length,"b"]})]})]}):g.jsxs("div",{ref:A,"data-section-id":n.id,style:{...R,width:H,height:L},className:Vt("relative flex flex-col pt-8 pb-2 rounded-xl overflow-hidden shrink-0 transition-all border group",D.bg,D.border,T?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-50",o?"ring-2 ring-white/20":""),children:[g.jsxs("div",{className:Vt("absolute top-0 left-0 right-0 h-8 flex items-center justify-between px-3 select-none border-b border-white/5 draggable-element",D.headers,"cursor-grab active:cursor-grabbing"),style:{touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"},..._,...b,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(rw,{size:14,className:"opacity-50"}),g.jsx("span",{className:"font-bold text-xs uppercase tracking-wider truncate max-w-[100px]",children:B})]}),f>=70&&g.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-80 mr-6",children:g.jsxs("span",{children:[V.length," bars"]})})]}),g.jsx("button",{className:"absolute top-0 right-0 z-20 p-1.5 rounded-md hover:bg-white/10 text-white/40 hover:text-red-400 transition-colors",onClick:F=>{F.stopPropagation(),y(n.id)},onPointerDown:F=>F.stopPropagation(),title:"Remove Section",children:g.jsx(Hk,{size:15})}),g.jsx("div",{className:"flex-1 flex px-2 pt-2 gap-1 overflow-hidden",children:V.map((F,te)=>g.jsxs("div",{className:"flex-1 min-w-[32px] h-full flex flex-col gap-1",children:[g.jsxs("div",{className:"h-4 flex items-end justify-between px-0.5 border-b border-white/10 pb-0.5",children:[g.jsx("span",{className:"text-[9px] font-mono text-white/30",children:te+1}),g.jsx("div",{className:"flex gap-0.5",children:F.beats.map((j,I)=>g.jsx("div",{className:"w-0.5 h-1.5 bg-white/20 rounded-full"},I))})]}),(()=>{const j=F.beats.filter(X=>X.chord),I=j.length;if(I===0){const X=F.beats[0];return g.jsx("div",{className:"flex-1 rounded-sm bg-white/5 border border-dashed border-white/10 flex items-center justify-center cursor-pointer hover:bg-white/10 hover:border-white/20 transition-colors",onClick:P=>{P.stopPropagation(),X&&a(n.id,X.id)},title:"Tap to select this slot",children:g.jsx("span",{className:"text-[10px] text-white/20",children:"+"})})}return g.jsx("div",{className:"flex gap-0.5 flex-1 items-stretch",children:j.map(X=>{const P=h[X.chord.root]||"#666",ae=I<=2?"10px":I<=4?"8px":"7px",Z=I<=2?"0 4px":"0 2px",re=c===X.id,le=u===X.id;return g.jsx("div",{onClick:fe=>{fe.stopPropagation(),s(n.id,X.id,X.chord)},className:Vt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold shadow-sm truncate transition-all cursor-pointer",le?"ring-2 ring-green-500 shadow-[0_0_12px_rgba(34,197,94,0.6)] scale-110 z-10":re?"ring-2 ring-accent-primary shadow-[0_0_12px_rgba(99,102,241,0.5)] scale-105 z-10":"hover:ring-1 hover:ring-white/30 hover:scale-105"),style:{backgroundColor:le?"rgba(34, 197, 94, 0.15)":re?"rgba(99, 102, 241, 0.15)":"rgba(0, 0, 0, 0.3)",border:`2px solid ${le?"#22c55e":re?"#6366f1":P}`,color:le?"#4ade80":re?"#a5b4fc":P,fontSize:ae,padding:Z,minHeight:"24px"},title:re?`Tap again to go to ${X.chord.symbol}`:`Tap to select ${X.chord.symbol}`,children:Ln(X.chord.symbol)},X.id)})})})()]},F.id))}),g.jsx("div",{className:"absolute inset-0 top-8 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none",children:g.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-white/80 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Go to Section"})})]})},hE=({displayChord:n,chordColors:e,isPlaying:t,selectedMapBeatId:s})=>{const{isMobile:a,isLandscape:o}=ju();if(!n)return null;const u=e[n.root]||"#6366f1";return a&&o?g.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:c=>c.stopPropagation(),children:g.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg backdrop-blur-md cursor-pointer group",style:{background:"rgba(17,17,22,0.95)",border:`1.5px solid ${u}`,boxShadow:`0 2px 12px ${u}40`},onClick:()=>{n.notes&&Br(n.notes)},children:[g.jsx("span",{className:"text-sm font-bold",style:{color:u},children:Ln(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)}),n.numeral&&g.jsx("span",{className:"text-[10px] font-serif italic text-white/40",children:Ln(n.numeral)}),t&&s&&g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"})]})}):a?g.jsx("div",{className:"shrink-0 px-3 py-2",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:g.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-sm mx-auto",children:[g.jsxs("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Br(n.notes)},children:[g.jsx("div",{className:"relative px-3 py-1.5 rounded-lg transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`1.5px solid ${u}`,boxShadow:`0 0 12px ${u}30`},children:g.jsx("span",{className:"text-base font-bold",style:{color:u},children:Ln(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&g.jsx("span",{className:"text-[10px] font-serif italic text-white/40 mt-1",children:Ln(n.numeral)}),t&&s&&g.jsxs("span",{className:"text-[8px] text-green-400 mt-0.5 animate-pulse flex items-center gap-1",children:[g.jsx("span",{className:"w-1 h-1 rounded-full bg-green-400 animate-ping"}),"Playing"]})]}),g.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex-shrink-0 overflow-hidden",style:{width:"140px",transform:"scale(0.85)",transformOrigin:"center"},children:g.jsx(Ag,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),g.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Br(n.notes)},children:g.jsx("div",{className:"transform scale-50 origin-top group-hover:scale-55 transition-transform",style:{marginTop:"-8px",marginBottom:"-50px"},children:g.jsx(Cg,{root:n.root,quality:n.quality,color:u})})})]})}):g.jsx("div",{className:"shrink-0 px-4 py-3",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:g.jsxs("div",{className:"flex items-center justify-center gap-6 max-w-xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",onClick:()=>{n.notes&&Br(n.notes)},children:[g.jsx("div",{className:"relative px-4 py-2 rounded-xl transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`2px solid ${u}`,boxShadow:`0 0 20px ${u}30`},children:g.jsx("span",{className:"text-xl font-bold",style:{color:u},children:Ln(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&g.jsx("span",{className:"text-xs font-serif italic text-white/40 mt-1.5",children:Ln(n.numeral)}),t&&s&&g.jsxs("span",{className:"text-[9px] text-green-400 mt-1 animate-pulse flex items-center gap-1",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"}),"Now Playing"]})]}),g.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex-shrink-0",style:{width:"200px"},children:g.jsx(Ag,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),g.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Br(n.notes)},children:g.jsx("div",{className:"transform scale-75 origin-top group-hover:scale-80 transition-transform",style:{marginTop:"-8px",marginBottom:"-20px"},children:g.jsx(Cg,{root:n.root,quality:n.quality,color:u})})})]})})},dE=({onSave:n,onExport:e})=>{ju();const{currentSong:t,songMapVisible:s,toggleSongMap:a,toggleSongInfoModal:o,setSelectedSlot:u,reorderSections:c,isPlaying:h,tempo:f,setTempo:p,playingSectionId:y,openTimeline:_,instrument:b,setInstrument:A,removeSection:N,addSuggestedSection:k}=Ht(),[T,R]=ee.useState(!1),[D,V]=ee.useState(f.toString()),B=ee.useRef(null),[W,H]=ee.useState(null),[L,F]=ee.useState(!1),te=ee.useRef(null),j=ee.useRef(f),I=ee.useRef(null),X=()=>{V(f.toString()),R(!0),setTimeout(()=>B.current?.focus(),0)},P=()=>{const Te=parseInt(D,10);!isNaN(Te)&&Te>=40&&Te<=240?p(Te):V(f.toString()),R(!1)},ae=Te=>{Te.key==="Enter"?P():Te.key==="Escape"&&(V(f.toString()),R(!1))},Z=Te=>{te.current=Te.touches[0].clientX,j.current=f,F(!1),I.current=setTimeout(()=>{I.current=null},150)},re=Te=>{if(te.current===null)return;const bt=Te.touches[0].clientX-te.current;if(Math.abs(bt)>10){F(!0),I.current&&(clearTimeout(I.current),I.current=null);const mt=Math.round(bt/3),st=Math.min(240,Math.max(40,j.current+mt));p(st)}},le=()=>{!L&&I.current&&(clearTimeout(I.current),X()),te.current=null,F(!1),I.current=null},[fe,_e]=ee.useState(1),z=ee.useRef(null),[E,$]=ee.useState(null),[G,Q]=ee.useState(null),[ie,pe]=ee.useState(null),[de,ye]=ee.useState(null);ee.useEffect(()=>{if(!h)return;const Te=()=>{const{playingSectionId:bt,playingSlotId:mt}=Ht.getState();if(bt&&mt){const st=t.sections.find(dt=>dt.id===bt);if(st)for(const dt of st.measures){const gt=dt.beats.find(Nt=>Nt.id===mt);if(gt?.chord){ye(gt.chord),$(gt.chord),Q(mt),pe(bt);return}}}};Te();const tt=setInterval(Te,100);return()=>clearInterval(tt)},[h,t.sections]),ee.useEffect(()=>{!h&&E&&ye(E)},[h,E]);const Se=Yh(),Be=t.sections.reduce((Te,tt)=>Te+tt.measures.length,0),Xe=t.sections.reduce((Te,tt)=>{const mt=(tt.timeSignature||t.timeSignature)[0];return Te+tt.measures.length*mt},0)/f*60,ot=Math.floor(Xe/60),Y=Math.floor(Xe%60),Ie=`${ot}:${Y.toString().padStart(2,"0")}`,vt=lE*fe,et=Te=>{_e(Number(Te.target.value))},Re=R2(El(Lf,{activationConstraint:{distance:8}}),El(o0,{activationConstraint:{delay:250,tolerance:8}}),El(Mf,{coordinateGetter:H2})),it=Te=>{const{active:tt,over:bt}=Te;if(bt&&tt.id!==bt.id){const mt=t.sections.findIndex(dt=>dt.id===tt.id),st=t.sections.findIndex(dt=>dt.id===bt.id);c(Df(t.sections,mt,st))}};if(ee.useEffect(()=>{const Te=tt=>{W||tt.key==="Escape"&&a(!1)};return s&&window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)},[s,a,W]),ee.useEffect(()=>{if(!s||!h||!y||!z.current)return;const Te=z.current.querySelector(`[data-section-id="${y}"]`);Te&&Te.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[s,h,y]),!s)return null;const qe=async()=>{const{unlockAudioForIOS:Te,playSong:tt,pauseSong:bt}=await Ih(async()=>{const{unlockAudioForIOS:mt,playSong:st,pauseSong:dt}=await Promise.resolve().then(()=>vg);return{unlockAudioForIOS:mt,playSong:st,pauseSong:dt}},void 0);h?(bt(),Ht.getState().setIsPlaying(!1)):(await Te(),await tt(),Ht.getState().setIsPlaying(!0))},ht=async Te=>{const{skipToSection:tt}=await Ih(async()=>{const{skipToSection:bt}=await Promise.resolve().then(()=>vg);return{skipToSection:bt}},void 0);tt(Te)};return s?g.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-[#111116] animate-in fade-in duration-200",onClick:()=>a(!1),children:[g.jsxs("div",{className:"shrink-0 relative z-20",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},onClick:Te=>Te.stopPropagation(),children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"}),g.jsxs("div",{className:"relative flex items-center justify-between px-4 py-3 mt-2",children:[g.jsx("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:Te=>{Te.stopPropagation(),o(!0)},children:g.jsxs("div",{children:[g.jsx("h2",{className:"font-bold text-white text-base leading-tight",children:t.title}),t.artist&&t.artist.trim()&&g.jsxs("p",{className:"text-white/40 text-[11px] italic",children:["by ",t.artist]})]})}),g.jsxs("div",{className:"flex items-center gap-2",children:[n&&g.jsx("button",{onClick:Te=>{Te.stopPropagation(),n()},className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 hover:text-white transition-colors",title:"Save song",children:g.jsx(mg,{size:16})}),e&&g.jsxs("button",{onClick:Te=>{Te.stopPropagation(),e()},className:"h-8 px-2.5 rounded-full bg-accent-primary/20 hover:bg-accent-primary/30 active:bg-accent-primary/40 flex items-center justify-center gap-1 text-accent-primary hover:text-white transition-colors",title:"Export PDF",children:[g.jsx(n0,{size:14}),g.jsx("span",{className:"text-[10px] font-bold",children:"PDF"})]}),g.jsx("button",{onClick:()=>a(!1),className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 transition-colors",children:g.jsx(Lc,{size:16})})]})]}),g.jsxs("div",{className:"flex items-center gap-4 px-4 pb-4 text-[10px] font-medium text-white/40 overflow-x-auto no-scrollbar",children:[g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[g.jsx("span",{className:"text-accent-primary",children:t.sections.length}),g.jsx("span",{children:"Sections"})]}),g.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[g.jsx("span",{className:"text-accent-primary",children:Be}),g.jsx("span",{children:"Bars"})]}),g.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[g.jsx("span",{className:"text-accent-primary",children:Ie}),g.jsx("span",{children:"Duration"})]})]}),g.jsx("div",{className:"px-4 pb-4",children:g.jsx(Xw,{sections:t.sections,activeSectionId:y||ie||W||void 0,onReorder:c,onAddSection:k,onSectionClick:Te=>{const tt=z.current?.querySelector(`[data-section-id="${Te}"]`);tt&&tt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),H(Te),$(null),Q(null),pe(null)}})})]}),W&&(()=>{const Te=t.sections.findIndex(st=>st.id===W),tt=t.sections[Te];if(!tt)return null;const bt=Te>0,mt=Te<t.sections.length-1;return g.jsx(Zw,{section:tt,isOpen:!0,onClose:()=>H(null),onTimeSignatureChange:st=>{const[dt,gt]=st.split("/").map(Number);dt&&gt&&Ht.getState().setSectionTimeSignature(tt.id,[dt,gt])},onBarsChange:st=>Ht.getState().setSectionMeasures(tt.id,st),onStepCountChange:st=>Ht.getState().setSectionSubdivision(tt.id,st),onNameChange:(st,dt)=>Ht.getState().updateSection(tt.id,{name:st,type:dt}),onCopy:()=>{Ht.getState().duplicateSection(tt.id);const st=Te+1;st<Ht.getState().currentSong.sections.length&&setTimeout(()=>{const dt=Ht.getState().currentSong.sections[st];dt&&H(dt.id)},0)},onClear:()=>Ht.getState().clearSection(tt.id),onDelete:()=>{Ht.getState().removeSection(tt.id),H(null)},songTimeSignature:t.timeSignature,onNavigatePrev:()=>{if(bt){const st=t.sections[Te-1].id;H(st);const dt=z.current?.querySelector(`[data-section-id="${st}"]`);dt&&dt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},onNavigateNext:()=>{if(mt){const st=t.sections[Te+1].id;H(st);const dt=z.current?.querySelector(`[data-section-id="${st}"]`);dt&&dt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},hasPrev:bt,hasNext:mt,sectionIndex:Te,totalSections:t.sections.length,onSlotClick:st=>{H(null);const dt=tt.measures.flatMap(gt=>gt.beats).find(gt=>gt.id===st);dt&&dt.chord&&Ht.getState().setSelectedChord(dt.chord),u(tt.id,st),_()},onMoveUp:()=>{if(Te>0){const st=[...t.sections];[st[Te-1],st[Te]]=[st[Te],st[Te-1]],c(st)}},onMoveDown:()=>{if(Te<t.sections.length-1){const st=[...t.sections];[st[Te],st[Te+1]]=[st[Te+1],st[Te]],c(st)}}})})(),g.jsxs("div",{ref:z,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-center relative scrollbar-hide bg-[#0b0b0f]",onClick:Te=>Te.stopPropagation(),children:[g.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),g.jsx("div",{className:Vt("flex relative h-full items-center px-4 transition-all min-w-full",fe<xy?"gap-2":"gap-4"),style:{paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:g.jsx(P2,{sensors:Re,collisionDetection:I2,onDragEnd:it,children:g.jsx(q2,{items:t.sections.map(Te=>Te.id),strategy:z2,children:t.sections.map(Te=>g.jsx(uE,{section:Te,allSections:t.sections,onSelectBeat:(tt,bt)=>{bt&&u(tt,bt),$(null),Q(null),pe(null),a(!1)},onBeatTap:(tt,bt,mt)=>{G===bt&&ie===tt?(bt&&u(tt,bt),$(null),Q(null),pe(null),a(!1)):($(mt),Q(bt),pe(tt),ye(mt),mt?.notes&&Br(mt.notes))},onEmptySlotTap:(tt,bt)=>{u(tt,bt),a(!1),_()},isActive:h&&t.sections.findIndex(tt=>tt.id===Te.id)===t.sections.findIndex(tt=>tt.id===y),playingSlotId:Ht.getState().isPlaying?Ht.getState().playingSlotId:null,selectedBeatId:G,chordColors:Se,measureWidth:vt,isCompact:fe<xy,onRemoveSection:N},Te.id))})})})]}),g.jsx(hE,{displayChord:de,chordColors:Se,isPlaying:h,selectedMapBeatId:G}),g.jsxs("div",{className:"shrink-0 bg-[#1a1a24] border-t border-white/5 z-[110]",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:Te=>Te.stopPropagation(),children:[g.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/5",children:g.jsxs("div",{className:"flex items-center gap-4 w-full",children:[g.jsx("button",{onClick:()=>_e(Math.max(.08,fe-.1)),className:"p-2 -m-2 text-text-secondary active:text-white transition-colors",children:g.jsx(Qk,{size:18})}),g.jsx("input",{type:"range",min:"0.08",max:"2",step:"0.05",value:fe,onChange:et,onTouchStart:Te=>Te.stopPropagation(),onTouchMove:Te=>Te.stopPropagation(),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer touch-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-accent-primary",style:{WebkitAppearance:"none"}}),g.jsx("button",{onClick:()=>_e(Math.min(2,fe+.1)),className:"p-2 -m-2 text-text-secondary active:text-white transition-colors",children:g.jsx(Zk,{size:18})})]})}),g.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 py-4",children:[g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsx("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold",children:"BPM"}),T?g.jsx("input",{ref:B,type:"number",inputMode:"numeric",value:D,onChange:Te=>V(Te.target.value),onBlur:P,onKeyDown:ae,className:"w-16 text-lg bg-bg-tertiary border border-accent-primary rounded px-2 py-1 text-center text-white font-mono font-medium focus:outline-none",min:40,max:240}):g.jsx("div",{onTouchStart:Z,onTouchMove:re,onTouchEnd:le,onClick:X,className:Vt("text-lg font-mono font-medium cursor-ew-resize select-none px-3 py-1 rounded transition-colors",L?"text-accent-primary bg-accent-primary/10":"text-accent-primary hover:bg-white/5"),children:f})]}),g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsx("button",{onClick:()=>ht("prev"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:g.jsx(lw,{size:22,fill:"currentColor"})}),g.jsx("button",{onClick:qe,className:Vt("w-14 h-14 rounded-full flex items-center justify-center shadow-xl transition-all active:scale-95",h?"bg-accent-primary text-white shadow-accent-primary/30":"bg-accent-primary/20 text-accent-primary border-2 border-accent-primary"),children:h?g.jsx(aw,{size:24,fill:"currentColor"}):g.jsx(nd,{size:24,fill:"currentColor",className:"ml-1"})}),g.jsx("button",{onClick:()=>ht("next"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:g.jsx(cw,{size:22,fill:"currentColor"})})]}),g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsxs("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold flex items-center gap-1",children:[g.jsx(wp,{size:10}),"Voice"]}),g.jsxs("select",{value:b,onChange:Te=>A(Te.target.value),className:"bg-bg-tertiary border border-white/10 rounded px-3 py-1 text-sm text-accent-primary font-medium focus:outline-none focus:border-accent-primary cursor-pointer appearance-none text-center min-w-[100px] hover:bg-bg-elevated transition-colors",onClick:Te=>Te.stopPropagation(),children:[g.jsx("option",{value:"piano",children:"Piano"}),g.jsx("option",{value:"epiano",children:"E. Piano"}),g.jsx("option",{value:"organ",children:"Organ"}),g.jsx("option",{value:"pad",children:"Pad"})]})]})]})]})]}):null},fE=({className:n="",size:e=24})=>g.jsx("div",{className:`relative flex items-center justify-center ${n}`,style:{width:e,height:e},children:g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=20,h=48,f=s<=4||s>=10;let p;f?s===0?p="rgba(234, 179, 8, 0.95)":s===1?p="rgba(163, 190, 60, 0.9)":s===2?p="rgba(132, 204, 22, 0.85)":s===3?p="rgba(74, 222, 128, 0.75)":s===4?p="rgba(45, 212, 191, 0.65)":s===11?p="rgba(251, 146, 60, 0.9)":s===10?p="rgba(168, 162, 158, 0.65)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+h*Math.cos(o),A=50+h*Math.sin(o),N=50+h*Math.cos(u),k=50+h*Math.sin(u),T=50+c*Math.cos(u),R=50+c*Math.sin(u);return g.jsx("path",{d:`M ${y} ${_} L ${b} ${A} A ${h} ${h} 0 0 1 ${N} ${k} L ${T} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),g.jsx("circle",{cx:"50",cy:"50",r:"18",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.15)",strokeWidth:"1"})]})});function rr(n){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(n)}var go=Uint8Array,ha=Uint16Array,W2=Int32Array,G2=new go([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$2=new go([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wy=new go([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qw=function(n,e){for(var t=new ha(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new W2(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},Jw=Qw(G2,2),pE=Jw.b,kg=Jw.r;pE[28]=258,kg[258]=28;var mE=Qw($2,0),_y=mE.r,jg=new ha(32768);for(var Tr=0;Tr<32768;++Tr){var xc=(Tr&43690)>>1|(Tr&21845)<<1;xc=(xc&52428)>>2|(xc&13107)<<2,xc=(xc&61680)>>4|(xc&3855)<<4,jg[Tr]=((xc&65280)>>8|(xc&255)<<8)>>1}var tf=(function(n,e,t){for(var s=n.length,a=0,o=new ha(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new ha(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(t){c=new ha(1<<e);var h=15-e;for(a=0;a<s;++a)if(n[a])for(var f=a<<4|n[a],p=e-n[a],y=u[n[a]-1]++<<p,_=y|(1<<p)-1;y<=_;++y)c[jg[y]>>h]=f}else for(c=new ha(s),a=0;a<s;++a)n[a]&&(c[a]=jg[u[n[a]-1]++]>>15-n[a]);return c}),Su=new go(288);for(var Tr=0;Tr<144;++Tr)Su[Tr]=8;for(var Tr=144;Tr<256;++Tr)Su[Tr]=9;for(var Tr=256;Tr<280;++Tr)Su[Tr]=7;for(var Tr=280;Tr<288;++Tr)Su[Tr]=8;var Mp=new go(32);for(var Tr=0;Tr<32;++Tr)Mp[Tr]=5;var gE=tf(Su,9,0),bE=tf(Mp,5,0),e4=function(n){return(n+7)/8|0},vE=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new go(n.subarray(e,t))},Al=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Gd=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Im=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:n4,l:0};if(a==1){var u=new go(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(B,W){return B.f-W.f}),t.push({s:-1,f:25001});var c=t[0],h=t[1],f=0,p=1,y=2;for(t[0]={s:-1,f:c.f+h.f,l:c,r:h};p!=a-1;)c=t[t[f].f<t[y].f?f++:y++],h=t[f!=p&&t[f].f<t[y].f?f++:y++],t[p++]={s:-1,f:c.f+h.f,l:c,r:h};for(var _=o[0].s,s=1;s<a;++s)o[s].s>_&&(_=o[s].s);var b=new ha(_+1),A=Eg(t[p-1],b,0);if(A>e){var s=0,N=0,k=A-e,T=1<<k;for(o.sort(function(W,H){return b[H.s]-b[W.s]||W.f-H.f});s<a;++s){var R=o[s].s;if(b[R]>e)N+=T-(1<<A-b[R]),b[R]=e;else break}for(N>>=k;N>0;){var D=o[s].s;b[D]<e?N-=1<<e-b[D]++-1:++s}for(;s>=0&&N;--s){var V=o[s].s;b[V]==e&&(--b[V],++N)}A=e}return{t:new go(b),l:A}},Eg=function(n,e,t){return n.s==-1?Math.max(Eg(n.l,e,t+1),Eg(n.r,e,t+1)):e[n.s]=t},Sy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ha(++e),s=0,a=n[0],o=1,u=function(h){t[s++]=h},c=1;c<=e;++c)if(n[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[c]}return{c:t.subarray(0,s),n:e}},$d=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},t4=function(n,e,t){var s=t.length,a=e4(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},Ny=function(n,e,t,s,a,o,u,c,h,f,p){Al(e,p++,t),++a[256];for(var y=Im(a,15),_=y.t,b=y.l,A=Im(o,15),N=A.t,k=A.l,T=Sy(_),R=T.c,D=T.n,V=Sy(N),B=V.c,W=V.n,H=new ha(19),L=0;L<R.length;++L)++H[R[L]&31];for(var L=0;L<B.length;++L)++H[B[L]&31];for(var F=Im(H,7),te=F.t,j=F.l,I=19;I>4&&!te[wy[I-1]];--I);var X=f+5<<3,P=$d(a,Su)+$d(o,Mp)+u,ae=$d(a,_)+$d(o,N)+u+14+3*I+$d(H,te)+2*H[16]+3*H[17]+7*H[18];if(h>=0&&X<=P&&X<=ae)return t4(e,p,n.subarray(h,h+f));var Z,re,le,fe;if(Al(e,p,1+(ae<P)),p+=2,ae<P){Z=tf(_,b,0),re=_,le=tf(N,k,0),fe=N;var _e=tf(te,j,0);Al(e,p,D-257),Al(e,p+5,W-1),Al(e,p+10,I-4),p+=14;for(var L=0;L<I;++L)Al(e,p+3*L,te[wy[L]]);p+=3*I;for(var z=[R,B],E=0;E<2;++E)for(var $=z[E],L=0;L<$.length;++L){var G=$[L]&31;Al(e,p,_e[G]),p+=te[G],G>15&&(Al(e,p,$[L]>>5&127),p+=$[L]>>12)}}else Z=gE,re=Su,le=bE,fe=Mp;for(var L=0;L<c;++L){var Q=s[L];if(Q>255){var G=Q>>18&31;Gd(e,p,Z[G+257]),p+=re[G+257],G>7&&(Al(e,p,Q>>23&31),p+=G2[G]);var ie=Q&31;Gd(e,p,le[ie]),p+=fe[ie],ie>3&&(Gd(e,p,Q>>5&8191),p+=$2[ie])}else Gd(e,p,Z[Q]),p+=re[Q]}return Gd(e,p,Z[256]),p+re[256]},yE=new W2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),n4=new go(0),xE=function(n,e,t,s,a,o){var u=o.z||n.length,c=new go(s+u+5*(1+Math.ceil(u/7e3))+a),h=c.subarray(s,c.length-a),f=o.l,p=(o.r||0)&7;if(e){p&&(h[0]=o.r>>3);for(var y=yE[e-1],_=y>>13,b=y&8191,A=(1<<t)-1,N=o.p||new ha(32768),k=o.h||new ha(A+1),T=Math.ceil(t/3),R=2*T,D=function(ot){return(n[ot]^n[ot+1]<<T^n[ot+2]<<R)&A},V=new W2(25e3),B=new ha(288),W=new ha(32),H=0,L=0,F=o.i||0,te=0,j=o.w||0,I=0;F+2<u;++F){var X=D(F),P=F&32767,ae=k[X];if(N[P]=ae,k[X]=P,j<=F){var Z=u-F;if((H>7e3||te>24576)&&(Z>423||!f)){p=Ny(n,h,0,V,B,W,L,te,I,F-I,p),te=H=L=0,I=F;for(var re=0;re<286;++re)B[re]=0;for(var re=0;re<30;++re)W[re]=0}var le=2,fe=0,_e=b,z=P-ae&32767;if(Z>2&&X==D(F-z))for(var E=Math.min(_,Z)-1,$=Math.min(32767,F),G=Math.min(258,Z);z<=$&&--_e&&P!=ae;){if(n[F+le]==n[F+le-z]){for(var Q=0;Q<G&&n[F+Q]==n[F+Q-z];++Q);if(Q>le){if(le=Q,fe=z,Q>E)break;for(var ie=Math.min(z,Q-2),pe=0,re=0;re<ie;++re){var de=F-z+re&32767,ye=N[de],Se=de-ye&32767;Se>pe&&(pe=Se,ae=de)}}}P=ae,ae=N[P],z+=P-ae&32767}if(fe){V[te++]=268435456|kg[le]<<18|_y[fe];var Be=kg[le]&31,Qe=_y[fe]&31;L+=G2[Be]+$2[Qe],++B[257+Be],++W[Qe],j=F+le,++H}else V[te++]=n[F],++B[n[F]]}}for(F=Math.max(F,j);F<u;++F)V[te++]=n[F],++B[n[F]];p=Ny(n,h,f,V,B,W,L,te,I,F-I,p),f||(o.r=p&7|h[p/8|0]<<3,p-=7,o.h=k,o.p=N,o.i=F,o.w=j)}else{for(var F=o.w||0;F<u+f;F+=65535){var Xe=F+65535;Xe>=u&&(h[p/8|0]=f,Xe=u),p=t4(h,p+1,n.subarray(F,Xe))}o.i=u}return vE(c,0,s+e4(p)+a)},r4=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},wE=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new go(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return xE(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},s4=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},_E=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=r4();a.p(e.dictionary),s4(n,2,a.d())}};function Mg(n,e){e||(e={});var t=r4();t.p(n);var s=wE(n,e,e.dictionary?6:2,4);return _E(s,e),s4(s,s.length-4,t.d()),s}var SE=typeof TextDecoder<"u"&&new TextDecoder,NE=0;try{SE.decode(n4,{stream:!0}),NE=1}catch{}function AE(n){if(Array.isArray(n))return n}function CE(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,c=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(s=o.call(t)).done)&&(c.push(s.value),c.length!==e);h=!0);}catch(p){f=!0,a=p}finally{try{if(!h&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw a}}return c}}function Ay(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function TE(n,e){if(n){if(typeof n=="string")return Ay(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ay(n,e):void 0}}function kE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cy(n,e){return AE(n)||CE(n,e)||TE(n,e)||kE()}function Ty(n,e="utf8"){return new TextDecoder(e).decode(n)}const jE=new TextEncoder;function EE(n){return jE.encode(n)}const ME=1024*8,LE=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Vm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=ME,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Y2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Vm[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===LE&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+s));c.reverse();const h=new Vm[t](c.buffer);return this.offset+=s,h.reverse(),h}const u=new Vm[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Ty(this.readBytes(e))}decodeText(e=1,t="utf8"){return Ty(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(EE(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ad(n){let e=n.length;for(;--e>=0;)n[e]=0}const OE=3,DE=258,i4=29,RE=256,IE=RE+1+i4,a4=30,VE=512,FE=new Array((IE+2)*2);ad(FE);const BE=new Array(a4*2);ad(BE);const PE=new Array(VE);ad(PE);const zE=new Array(DE-OE+1);ad(zE);const qE=new Array(i4);ad(qE);const UE=new Array(a4);ad(UE);const HE=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Lg=HE;const WE=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},GE=new Uint32Array(WE()),$E=(n,e,t,s)=>{const a=GE,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var qo=$E,Og={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},o4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const YE=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var XE=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)YE(t,s)&&(n[s]=t[s])}}return n},ZE=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},l4={assign:XE,flattenChunks:ZE};let c4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c4=!1}const pf=new Uint8Array(256);for(let n=0;n<256;n++)pf[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;pf[254]=pf[254]=1;var KE=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,c=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const QE=(n,e)=>{if(e<65534&&n.subarray&&c4)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var JE=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let c=pf[u];if(c>4){o[a++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<t;)u=u<<6|n[s++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return QE(o,a)},eM=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+pf[n[t]]>e?t:e},Dg={string2buf:KE,buf2string:JE,utf8border:eM};function tM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nM=tM;const I1=16209,rM=16191;var sM=function(e,t){let s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D,V,B,W,H,L,F,te;const j=e.state;s=e.next_in,F=e.input,a=s+(e.avail_in-5),o=e.next_out,te=e.output,u=o-(t-e.avail_out),c=o+(e.avail_out-257),h=j.dmax,f=j.wsize,p=j.whave,y=j.wnext,_=j.window,b=j.hold,A=j.bits,N=j.lencode,k=j.distcode,T=(1<<j.lenbits)-1,R=(1<<j.distbits)-1;e:do{A<15&&(b+=F[s++]<<A,A+=8,b+=F[s++]<<A,A+=8),D=N[b&T];t:for(;;){if(V=D>>>24,b>>>=V,A-=V,V=D>>>16&255,V===0)te[o++]=D&65535;else if(V&16){B=D&65535,V&=15,V&&(A<V&&(b+=F[s++]<<A,A+=8),B+=b&(1<<V)-1,b>>>=V,A-=V),A<15&&(b+=F[s++]<<A,A+=8,b+=F[s++]<<A,A+=8),D=k[b&R];n:for(;;){if(V=D>>>24,b>>>=V,A-=V,V=D>>>16&255,V&16){if(W=D&65535,V&=15,A<V&&(b+=F[s++]<<A,A+=8,A<V&&(b+=F[s++]<<A,A+=8)),W+=b&(1<<V)-1,W>h){e.msg="invalid distance too far back",j.mode=I1;break e}if(b>>>=V,A-=V,V=o-u,W>V){if(V=W-V,V>p&&j.sane){e.msg="invalid distance too far back",j.mode=I1;break e}if(H=0,L=_,y===0){if(H+=f-V,V<B){B-=V;do te[o++]=_[H++];while(--V);H=o-W,L=te}}else if(y<V){if(H+=f+y-V,V-=y,V<B){B-=V;do te[o++]=_[H++];while(--V);if(H=0,y<B){V=y,B-=V;do te[o++]=_[H++];while(--V);H=o-W,L=te}}}else if(H+=y-V,V<B){B-=V;do te[o++]=_[H++];while(--V);H=o-W,L=te}for(;B>2;)te[o++]=L[H++],te[o++]=L[H++],te[o++]=L[H++],B-=3;B&&(te[o++]=L[H++],B>1&&(te[o++]=L[H++]))}else{H=o-W;do te[o++]=te[H++],te[o++]=te[H++],te[o++]=te[H++],B-=3;while(B>2);B&&(te[o++]=te[H++],B>1&&(te[o++]=te[H++]))}}else if((V&64)===0){D=k[(D&65535)+(b&(1<<V)-1)];continue n}else{e.msg="invalid distance code",j.mode=I1;break e}break}}else if((V&64)===0){D=N[(D&65535)+(b&(1<<V)-1)];continue t}else if(V&32){j.mode=rM;break e}else{e.msg="invalid literal/length code",j.mode=I1;break e}break}}while(s<a&&o<c);B=A>>3,s-=B,A-=B<<3,b&=(1<<A)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<c?257+(c-o):257-(o-c),j.hold=b,j.bits=A};const xh=15,ky=852,jy=592,Ey=0,Fm=1,My=2,iM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),aM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),oM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lM=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),cM=(n,e,t,s,a,o,u,c)=>{const h=c.bits;let f=0,p=0,y=0,_=0,b=0,A=0,N=0,k=0,T=0,R=0,D,V,B,W,H,L=null,F;const te=new Uint16Array(xh+1),j=new Uint16Array(xh+1);let I=null,X,P,ae;for(f=0;f<=xh;f++)te[f]=0;for(p=0;p<s;p++)te[e[t+p]]++;for(b=h,_=xh;_>=1&&te[_]===0;_--);if(b>_&&(b=_),_===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<_&&te[y]===0;y++);for(b<y&&(b=y),k=1,f=1;f<=xh;f++)if(k<<=1,k-=te[f],k<0)return-1;if(k>0&&(n===Ey||_!==1))return-1;for(j[1]=0,f=1;f<xh;f++)j[f+1]=j[f]+te[f];for(p=0;p<s;p++)e[t+p]!==0&&(u[j[e[t+p]]++]=p);if(n===Ey?(L=I=u,F=20):n===Fm?(L=iM,I=aM,F=257):(L=oM,I=lM,F=0),R=0,p=0,f=y,H=o,A=b,N=0,B=-1,T=1<<b,W=T-1,n===Fm&&T>ky||n===My&&T>jy)return 1;for(;;){X=f-N,u[p]+1<F?(P=0,ae=u[p]):u[p]>=F?(P=I[u[p]-F],ae=L[u[p]-F]):(P=96,ae=0),D=1<<f-N,V=1<<A,y=V;do V-=D,a[H+(R>>N)+V]=X<<24|P<<16|ae|0;while(V!==0);for(D=1<<f-1;R&D;)D>>=1;if(D!==0?(R&=D-1,R+=D):R=0,p++,--te[f]===0){if(f===_)break;f=e[t+u[p]]}if(f>b&&(R&W)!==B){for(N===0&&(N=b),H+=y,A=f-N,k=1<<A;A+N<_&&(k-=te[A+N],!(k<=0));)A++,k<<=1;if(T+=1<<A,n===Fm&&T>ky||n===My&&T>jy)return 1;B=R&W,a[B]=b<<24|A<<16|H-o|0}}return R!==0&&(a[H+R]=f-N<<24|64<<16|0),c.bits=b,0};var nf=cM;const uM=0,u4=1,h4=2,{Z_FINISH:Ly,Z_BLOCK:hM,Z_TREES:V1,Z_OK:Nu,Z_STREAM_END:dM,Z_NEED_DICT:fM,Z_STREAM_ERROR:Oa,Z_DATA_ERROR:d4,Z_MEM_ERROR:f4,Z_BUF_ERROR:pM,Z_DEFLATED:Oy}=o4,u0=16180,Dy=16181,Ry=16182,Iy=16183,Vy=16184,Fy=16185,By=16186,Py=16187,zy=16188,qy=16189,Lp=16190,Cl=16191,Bm=16192,Uy=16193,Pm=16194,Hy=16195,Wy=16196,Gy=16197,$y=16198,F1=16199,B1=16200,Yy=16201,Xy=16202,Zy=16203,Ky=16204,Qy=16205,zm=16206,Jy=16207,ex=16208,Vr=16209,p4=16210,m4=16211,mM=852,gM=592,bM=15,vM=bM,tx=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function yM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Eu=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<u0||e.mode>m4?1:0},g4=n=>{if(Eu(n))return Oa;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=u0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(mM),e.distcode=e.distdyn=new Int32Array(gM),e.sane=1,e.back=-1,Nu},b4=n=>{if(Eu(n))return Oa;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,g4(n)},v4=(n,e)=>{let t;if(Eu(n))return Oa;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Oa:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,b4(n))},y4=(n,e)=>{if(!n)return Oa;const t=new yM;n.state=t,t.strm=n,t.window=null,t.mode=u0;const s=v4(n,e);return s!==Nu&&(n.state=null),s},xM=n=>y4(n,vM);let nx=!0,qm,Um;const wM=n=>{if(nx){qm=new Int32Array(512),Um=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(nf(u4,n.lens,0,288,qm,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;nf(h4,n.lens,0,32,Um,0,n.work,{bits:5}),nx=!1}n.lencode=qm,n.lenbits=9,n.distcode=Um,n.distbits=5},x4=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},_M=(n,e)=>{let t,s,a,o,u,c,h,f,p,y,_,b,A,N,k=0,T,R,D,V,B,W,H,L;const F=new Uint8Array(4);let te,j;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Eu(n)||!n.output||!n.input&&n.avail_in!==0)return Oa;t=n.state,t.mode===Cl&&(t.mode=Bm),u=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,f=t.hold,p=t.bits,y=c,_=h,L=Nu;e:for(;;)switch(t.mode){case u0:if(t.wrap===0){t.mode=Bm;break}for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0),f=0,p=0,t.mode=Dy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Vr;break}if((f&15)!==Oy){n.msg="unknown compression method",t.mode=Vr;break}if(f>>>=4,p-=4,H=(f&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=Vr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?qy:Cl,f=0,p=0;break;case Dy:for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==Oy){n.msg="unknown compression method",t.mode=Vr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Vr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0)),f=0,p=0,t.mode=Ry;case Ry:for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,F[2]=f>>>16&255,F[3]=f>>>24&255,t.check=qo(t.check,F,4,0)),f=0,p=0,t.mode=Iy;case Iy:for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0)),f=0,p=0,t.mode=Vy;case Vy:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=Fy;case Fy:if(t.flags&1024&&(b=t.length,b>c&&(b=c),b&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+b),H)),t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=By;case By:if(t.flags&2048){if(c===0)break e;b=0;do H=s[o+b++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Py;case Py:if(t.flags&4096){if(c===0)break e;b=0;do H=s[o+b++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,H)break e}else t.head&&(t.head.comment=null);t.mode=zy;case zy:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Vr;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Cl;break;case qy:for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}n.adler=t.check=tx(f),f=0,p=0,t.mode=Lp;case Lp:if(t.havedict===0)return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,fM;n.adler=t.check=1,t.mode=Cl;case Cl:if(e===hM||e===V1)break e;case Bm:if(t.last){f>>>=p&7,p-=p&7,t.mode=zm;break}for(;p<3;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=Uy;break;case 1:if(wM(t),t.mode=F1,e===V1){f>>>=2,p-=2;break e}break;case 2:t.mode=Wy;break;case 3:n.msg="invalid block type",t.mode=Vr}f>>>=2,p-=2;break;case Uy:for(f>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Vr;break}if(t.length=f&65535,f=0,p=0,t.mode=Pm,e===V1)break e;case Pm:t.mode=Hy;case Hy:if(b=t.length,b){if(b>c&&(b=c),b>h&&(b=h),b===0)break e;a.set(s.subarray(o,o+b),u),c-=b,o+=b,h-=b,u+=b,t.length-=b;break}t.mode=Cl;break;case Wy:for(;p<14;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Vr;break}t.have=0,t.mode=Gy;case Gy:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.lens[I[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[I[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,te={bits:t.lenbits},L=nf(uM,t.lens,0,19,t.lencode,0,t.work,te),t.lenbits=te.bits,L){n.msg="invalid code lengths set",t.mode=Vr;break}t.have=0,t.mode=$y;case $y:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[f&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(D<16)f>>>=T,p-=T,t.lens[t.have++]=D;else{if(D===16){for(j=T+2;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(f>>>=T,p-=T,t.have===0){n.msg="invalid bit length repeat",t.mode=Vr;break}H=t.lens[t.have-1],b=3+(f&3),f>>>=2,p-=2}else if(D===17){for(j=T+3;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=T,p-=T,H=0,b=3+(f&7),f>>>=3,p-=3}else{for(j=T+7;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=T,p-=T,H=0,b=11+(f&127),f>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Vr;break}for(;b--;)t.lens[t.have++]=H}}if(t.mode===Vr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Vr;break}if(t.lenbits=9,te={bits:t.lenbits},L=nf(u4,t.lens,0,t.nlen,t.lencode,0,t.work,te),t.lenbits=te.bits,L){n.msg="invalid literal/lengths set",t.mode=Vr;break}if(t.distbits=6,t.distcode=t.distdyn,te={bits:t.distbits},L=nf(h4,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,te),t.distbits=te.bits,L){n.msg="invalid distances set",t.mode=Vr;break}if(t.mode=F1,e===V1)break e;case F1:t.mode=B1;case B1:if(c>=6&&h>=258){n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,sM(n,_),u=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,f=t.hold,p=t.bits,t.mode===Cl&&(t.back=-1);break}for(t.back=0;k=t.lencode[f&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(R&&(R&240)===0){for(V=T,B=R,W=D;k=t.lencode[W+((f&(1<<V+B)-1)>>V)],T=k>>>24,R=k>>>16&255,D=k&65535,!(V+T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=V,p-=V,t.back+=V}if(f>>>=T,p-=T,t.back+=T,t.length=D,R===0){t.mode=Qy;break}if(R&32){t.back=-1,t.mode=Cl;break}if(R&64){n.msg="invalid literal/length code",t.mode=Vr;break}t.extra=R&15,t.mode=Yy;case Yy:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Xy;case Xy:for(;k=t.distcode[f&(1<<t.distbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if((R&240)===0){for(V=T,B=R,W=D;k=t.distcode[W+((f&(1<<V+B)-1)>>V)],T=k>>>24,R=k>>>16&255,D=k&65535,!(V+T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=V,p-=V,t.back+=V}if(f>>>=T,p-=T,t.back+=T,R&64){n.msg="invalid distance code",t.mode=Vr;break}t.offset=D,t.extra=R&15,t.mode=Zy;case Zy:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Vr;break}t.mode=Ky;case Ky:if(h===0)break e;if(b=_-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Vr;break}b>t.wnext?(b-=t.wnext,A=t.wsize-b):A=t.wnext-b,b>t.length&&(b=t.length),N=t.window}else N=a,A=u-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do a[u++]=N[A++];while(--b);t.length===0&&(t.mode=B1);break;case Qy:if(h===0)break e;a[u++]=t.length,h--,t.mode=B1;break;case zm:if(t.wrap){for(;p<32;){if(c===0)break e;c--,f|=s[o++]<<p,p+=8}if(_-=h,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?qo(t.check,a,_,u-_):Lg(t.check,a,_,u-_)),_=h,t.wrap&4&&(t.flags?f:tx(f))!==t.check){n.msg="incorrect data check",t.mode=Vr;break}f=0,p=0}t.mode=Jy;case Jy:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Vr;break}f=0,p=0}t.mode=ex;case ex:L=dM;break e;case Vr:L=d4;break e;case p4:return f4;case m4:default:return Oa}return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,(t.wsize||_!==n.avail_out&&t.mode<Vr&&(t.mode<zm||e!==Ly))&&x4(n,n.output,n.next_out,_-n.avail_out),y-=n.avail_in,_-=n.avail_out,n.total_in+=y,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?qo(t.check,a,_,n.next_out-_):Lg(t.check,a,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Cl?128:0)+(t.mode===F1||t.mode===Pm?256:0),(y===0&&_===0||e===Ly)&&L===Nu&&(L=pM),L},SM=n=>{if(Eu(n))return Oa;let e=n.state;return e.window&&(e.window=null),n.state=null,Nu},NM=(n,e)=>{if(Eu(n))return Oa;const t=n.state;return(t.wrap&2)===0?Oa:(t.head=e,e.done=!1,Nu)},AM=(n,e)=>{const t=e.length;let s,a,o;return Eu(n)||(s=n.state,s.wrap!==0&&s.mode!==Lp)?Oa:s.mode===Lp&&(a=1,a=Lg(a,e,t,0),a!==s.check)?d4:(o=x4(n,e,t,t),o?(s.mode=p4,f4):(s.havedict=1,Nu))};var CM=b4,TM=v4,kM=g4,jM=xM,EM=y4,MM=_M,LM=SM,OM=NM,DM=AM,RM="pako inflate (from Nodeca project)",kl={inflateReset:CM,inflateReset2:TM,inflateResetKeep:kM,inflateInit:jM,inflateInit2:EM,inflate:MM,inflateEnd:LM,inflateGetHeader:OM,inflateSetDictionary:DM,inflateInfo:RM};function IM(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var VM=IM;const w4=Object.prototype.toString,{Z_NO_FLUSH:FM,Z_FINISH:BM,Z_OK:mf,Z_STREAM_END:Hm,Z_NEED_DICT:Wm,Z_STREAM_ERROR:PM,Z_DATA_ERROR:rx,Z_MEM_ERROR:zM}=o4;function Rf(n){this.options=l4.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nM,this.strm.avail_out=0;let t=kl.inflateInit2(this.strm,e.windowBits);if(t!==mf)throw new Error(Og[t]);if(this.header=new VM,kl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Dg.string2buf(e.dictionary):w4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=kl.inflateSetDictionary(this.strm,e.dictionary),t!==mf)))throw new Error(Og[t])}Rf.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?BM:FM,w4.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=kl.inflate(t,u),o===Wm&&a&&(o=kl.inflateSetDictionary(t,a),o===mf?o=kl.inflate(t,u):o===rx&&(o=Wm));t.avail_in>0&&o===Hm&&t.state.wrap>0&&n[t.next_in]!==0;)kl.inflateReset(t),o=kl.inflate(t,u);switch(o){case PM:case rx:case Wm:case zM:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===Hm))if(this.options.to==="string"){let h=Dg.utf8border(t.output,t.next_out),f=t.next_out-h,p=Dg.buf2string(t.output,h);t.next_out=f,t.avail_out=s-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===mf&&c===0)){if(o===Hm)return o=kl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Rf.prototype.onData=function(n){this.chunks.push(n)};Rf.prototype.onEnd=function(n){n===mf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l4.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function qM(n,e){const t=new Rf(e);if(t.push(n),t.err)throw t.msg||Og[t.err];return t.result}var UM=Rf,HM=qM,WM={Inflate:UM,inflate:HM};const{Inflate:GM,inflate:$M}=WM;var sx=GM,YM=$M;const _4=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;_4[n]=e}const ix=4294967295;function XM(n,e,t){let s=n;for(let a=0;a<t;a++)s=_4[(s^e[a])&255]^s>>>8;return s}function ZM(n,e){return(XM(ix,n,e)^ix)>>>0}function ax(n,e,t){const s=n.readUint32(),a=ZM(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function S4(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function N4(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function A4(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function C4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function T4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+KM(e[o-a],t[o],t[o-a])&255}}function KM(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function QM(n,e,t,s,a,o){switch(n){case 0:S4(e,t,a);break;case 1:N4(e,t,a,o);break;case 2:A4(e,t,s,a);break;case 3:C4(e,t,s,a,o);break;case 4:T4(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const JM=new Uint16Array([255]),eL=new Uint8Array(JM.buffer),tL=eL[0]===255;function nL(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,h=new Uint8Array(s*t*c);let f=0;for(let p=0;p<7;p++){const y=u[p],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((s-y.y)/y.yStep);if(_<=0||b<=0)continue;const A=_*c,N=new Uint8Array(A);for(let k=0;k<b;k++){const T=e[f++],R=e.subarray(f,f+A);f+=A;const D=new Uint8Array(A);QM(T,R,D,N,A,c),N.set(D);for(let V=0;V<_;V++){const B=y.x+V*y.xStep,W=y.y+k*y.yStep;if(!(B>=t||W>=s))for(let H=0;H<c;H++)h[(W*t+B)*c+H]=D[V*c+H]}}}if(o===16){const p=new Uint16Array(h.buffer);if(tL)for(let y=0;y<p.length;y++)p[y]=rL(p[y]);return p}else return h}function rL(n){return(n&255)<<8|n>>8&255}const sL=new Uint16Array([255]),iL=new Uint8Array(sL.buffer),aL=iL[0]===255,oL=new Uint8Array(0);function ox(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*t),h=new Uint8Array(s*c);let f=oL,p=0,y,_;for(let b=0;b<s;b++){switch(y=e.subarray(p+1,p+1+c),_=h.subarray(b*c,(b+1)*c),e[p]){case 0:S4(y,_,c);break;case 1:N4(y,_,c,u);break;case 2:A4(y,_,f,c);break;case 3:C4(y,_,f,c,u);break;case 4:T4(y,_,f,c,u);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=_,p+=c+1}if(o===16){const b=new Uint16Array(h.buffer);if(aL)for(let A=0;A<b.length;A++)b[A]=lL(b[A]);return b}else return h}function lL(n){return(n&255)<<8|n>>8&255}const Z1=Uint8Array.of(137,80,78,71,13,10,26,10);function lx(n){if(!cL(n.readBytes(Z1.length)))throw new Error("wrong PNG signature")}function cL(n){if(n.length<Z1.length)return!1;for(let e=0;e<Z1.length;e++)if(n[e]!==Z1[e])return!1;return!0}const uL="tEXt",hL=0,k4=new TextDecoder("latin1");function dL(n){if(pL(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const fL=/^[\u0000-\u00FF]*$/;function pL(n){if(!fL.test(n))throw new Error("invalid latin1 text")}function mL(n,e,t){const s=j4(e);n[s]=gL(e,t-s.length-1)}function j4(n){for(n.mark();n.readByte()!==hL;);const e=n.offset;n.reset();const t=k4.decode(n.readBytes(e-n.offset-1));return n.skip(1),dL(t),t}function gL(n,e){return k4.decode(n.readBytes(e))}const oa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Gm={UNKNOWN:-1,DEFLATE:0},cx={UNKNOWN:-1,ADAPTIVE:0},$m={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},P1={NONE:0,BACKGROUND:1,PREVIOUS:2},Ym={SOURCE:0,OVER:1};class bL extends Y2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new sx,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Gm.UNKNOWN,this._filterMethod=cx.UNKNOWN,this._interlaceMethod=$m.UNKNOWN,this._colorType=oa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lx(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(lx(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case uL:mL(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ax(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ax(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=vL(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case oa.GREYSCALE:s=1;break;case oa.TRUECOLOUR:s=3;break;case oa.INDEXED_COLOUR:s=1;break;case oa.GREYSCALE_ALPHA:s=2;break;case oa.TRUECOLOUR_ALPHA:s=4;break;case oa.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Gm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case oa.GREYSCALE:case oa.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case oa.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case oa.UNKNOWN:case oa.GREYSCALE_ALPHA:case oa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=j4(this),s=this.readUint8();if(s!==Gm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:YM(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=ox({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case P1.NONE:break;case P1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[u+c]=0}break;case P1.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const c=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,h=(o*t.width+u)*this._png.channels;return{index:c,frameIndex:h}};switch(t.blendOp){case Ym.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:h}=a(o,u);for(let f=0;f<this._png.channels;f++)e.data[c+f]=t.data[h+f]}break;case Ym.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:h}=a(o,u);for(let f=0;f<this._png.channels;f++){const p=t.data[h+this._png.channels-1]/s,y=f%(this._png.channels-1)===0?1:t.data[h+f],_=Math.floor(p*y+(1-p)*e.data[c+f]);e.data[c+f]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==cx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===$m.NO_INTERLACE)this._png.data=ox({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===$m.ADAM7)this._png.data=nL({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:P1.NONE,blendOp:Ym.SOURCE,data:e}),this._inflator=new sx,this._writingDataChunks=!1}}function vL(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var ux;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(ux||(ux={}));function yL(n,e){return new bL(n,e).decode()}var cn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Xm(){cn.console&&typeof cn.console.log=="function"&&cn.console.log.apply(cn.console,arguments)}var gr={log:Xm,warn:function(n){cn.console&&(typeof cn.console.warn=="function"?cn.console.warn.apply(cn.console,arguments):Xm.call(null,arguments))},error:function(n){cn.console&&(typeof cn.console.error=="function"?cn.console.error.apply(cn.console,arguments):Xm(n))}};function Zm(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){hu(s.response,e,t)},s.onerror=function(){gr.error("could not download file")},s.send()}function hx(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function z1(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var hu=cn.saveAs||((typeof window>"u"?"undefined":rr(window))!=="object"||window!==cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=cn.URL||cn.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?hx(a.href)?Zm(n,e,t):z1(a,a.target="_blank"):z1(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){z1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(hx(n))Zm(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){z1(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:rr(o)!=="object"&&(gr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Zm(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(cn.HTMLElement)||cn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":rr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=u?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},c.readAsDataURL(n)}else{var h=cn.URL||cn.webkitURL,f=h.createObjectURL(n);s?s.location=f:location.href=f,s=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function E4(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+c+h+f}}var K1=cn.atob.bind(cn),dx=cn.btoa.bind(cn);function Km(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=oi(t,s,a,o,e[0],7,-680876936),o=oi(o,t,s,a,e[1],12,-389564586),a=oi(a,o,t,s,e[2],17,606105819),s=oi(s,a,o,t,e[3],22,-1044525330),t=oi(t,s,a,o,e[4],7,-176418897),o=oi(o,t,s,a,e[5],12,1200080426),a=oi(a,o,t,s,e[6],17,-1473231341),s=oi(s,a,o,t,e[7],22,-45705983),t=oi(t,s,a,o,e[8],7,1770035416),o=oi(o,t,s,a,e[9],12,-1958414417),a=oi(a,o,t,s,e[10],17,-42063),s=oi(s,a,o,t,e[11],22,-1990404162),t=oi(t,s,a,o,e[12],7,1804603682),o=oi(o,t,s,a,e[13],12,-40341101),a=oi(a,o,t,s,e[14],17,-1502002290),t=li(t,s=oi(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=li(o,t,s,a,e[6],9,-1069501632),a=li(a,o,t,s,e[11],14,643717713),s=li(s,a,o,t,e[0],20,-373897302),t=li(t,s,a,o,e[5],5,-701558691),o=li(o,t,s,a,e[10],9,38016083),a=li(a,o,t,s,e[15],14,-660478335),s=li(s,a,o,t,e[4],20,-405537848),t=li(t,s,a,o,e[9],5,568446438),o=li(o,t,s,a,e[14],9,-1019803690),a=li(a,o,t,s,e[3],14,-187363961),s=li(s,a,o,t,e[8],20,1163531501),t=li(t,s,a,o,e[13],5,-1444681467),o=li(o,t,s,a,e[2],9,-51403784),a=li(a,o,t,s,e[7],14,1735328473),t=ci(t,s=li(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ci(o,t,s,a,e[8],11,-2022574463),a=ci(a,o,t,s,e[11],16,1839030562),s=ci(s,a,o,t,e[14],23,-35309556),t=ci(t,s,a,o,e[1],4,-1530992060),o=ci(o,t,s,a,e[4],11,1272893353),a=ci(a,o,t,s,e[7],16,-155497632),s=ci(s,a,o,t,e[10],23,-1094730640),t=ci(t,s,a,o,e[13],4,681279174),o=ci(o,t,s,a,e[0],11,-358537222),a=ci(a,o,t,s,e[3],16,-722521979),s=ci(s,a,o,t,e[6],23,76029189),t=ci(t,s,a,o,e[9],4,-640364487),o=ci(o,t,s,a,e[12],11,-421815835),a=ci(a,o,t,s,e[15],16,530742520),t=ui(t,s=ci(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=ui(o,t,s,a,e[7],10,1126891415),a=ui(a,o,t,s,e[14],15,-1416354905),s=ui(s,a,o,t,e[5],21,-57434055),t=ui(t,s,a,o,e[12],6,1700485571),o=ui(o,t,s,a,e[3],10,-1894986606),a=ui(a,o,t,s,e[10],15,-1051523),s=ui(s,a,o,t,e[1],21,-2054922799),t=ui(t,s,a,o,e[8],6,1873313359),o=ui(o,t,s,a,e[15],10,-30611744),a=ui(a,o,t,s,e[6],15,-1560198380),s=ui(s,a,o,t,e[13],21,1309151649),t=ui(t,s,a,o,e[4],6,-145523070),o=ui(o,t,s,a,e[11],10,-1120210379),a=ui(a,o,t,s,e[2],15,718787259),s=ui(s,a,o,t,e[9],21,-343485551),n[0]=Ac(t,n[0]),n[1]=Ac(s,n[1]),n[2]=Ac(a,n[2]),n[3]=Ac(o,n[3])}function h0(n,e,t,s,a,o){return e=Ac(Ac(e,n),Ac(s,o)),Ac(e<<a|e>>>32-a,t)}function oi(n,e,t,s,a,o,u){return h0(e&t|~e&s,n,e,a,o,u)}function li(n,e,t,s,a,o,u){return h0(e&s|t&~s,n,e,a,o,u)}function ci(n,e,t,s,a,o,u){return h0(e^t^s,n,e,a,o,u)}function ui(n,e,t,s,a,o,u){return h0(t^(e|~s),n,e,a,o,u)}function M4(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Km(s,xL(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Km(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Km(s,a),s}function xL(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var fx="0123456789abcdef".split("");function wL(n){for(var e="",t=0;t<4;t++)e+=fx[n>>8*t+4&15]+fx[n>>8*t&15];return e}function _L(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Rg(n){return M4(n).map(_L).join("")}var SL=(function(n){for(var e=0;e<n.length;e++)n[e]=wL(n[e]);return n.join("")})(M4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ac(n,e){if(SL){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Ig(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),c=[],h=0;h<256;h++)c[h]=h;var f=0;for(h=0;h<256;h++){var p=c[h];f=(f+p+u.charCodeAt(h))%256,c[h]=c[f],c[f]=p}t=n,s=c}else c=s;var y=e.length,_=0,b=0,A="";for(h=0;h<y;h++)b=(b+(p=c[_=(_+1)%256]))%256,c[_]=c[b],c[b]=p,u=c[(c[_]+c[b])%256],A+=String.fromCharCode(e.charCodeAt(h)^u);return A}var px={print:4,modify:8,copy:16,"annot-forms":32};function Nh(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(c){if(px.perm!==void 0)throw new Error("Invalid permission: "+c);a+=px[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Rg(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Ig(this.encryptionKey,this.padding)}function Ah(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function mx(n){if(rr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(c){cn.console&&gr.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Op(n){if(!(this instanceof Op))return new Op(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function L4(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function fu(n,e,t,s,a){if(!(this instanceof fu))return new fu(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,L4.call(this,s,a)}function Eh(n,e,t,s,a){if(!(this instanceof Eh))return new Eh(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,L4.call(this,s,a)}function Ut(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,h=16,f="S",p=null;rr(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=mx;var A="1.3",N=b.__private__.getPdfVersion=function(){return A};b.__private__.setPdfVersion=function(S){A=S};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var T=b.__private__.getPageFormat=function(S){return k[S]};a=a||"a4";var R="compat",D="advanced",V=R;function B(){this.saveGraphicsState(),Y(new Ve(Nt,0,0,-Nt,0,Pa()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),f="n",V=D}function W(){this.restoreGraphicsState(),f="S",V=R}var H=b.__private__.combineFontStyleAndFontWeight=function(S,q){if(S=="bold"&&q=="normal"||S=="bold"&&q==400||S=="normal"&&q=="italic"||S=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(S=q==400||q==="normal"?S==="italic"?"italic":"normal":q!=700&&q!=="bold"||S!=="normal"?(q==700?"bold":q)+""+S:"bold"),S};b.advancedAPI=function(S){var q=V===R;return q&&B.call(this),typeof S!="function"||(S(this),q&&W.call(this)),this},b.compatAPI=function(S){var q=V===D;return q&&W.call(this),typeof S!="function"||(S(this),q&&B.call(this)),this},b.isAdvancedAPI=function(){return V===D};var L,F=function(S){if(V!==D)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},te=b.roundToPrecision=b.__private__.roundToPrecision=function(S,q){var he=e||q;if(isNaN(S)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(he).replace(/0+$/,"")};L=b.hpf=b.__private__.hpf=typeof h=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return te(S,h)}:h==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return te(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return te(S,16)};var j=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return te(S,2)},I=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return te(S,3)},X=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return V===R?S*Nt:V===D?S:void 0},P=function(S){return X((function(q){return V===R?Pa()-q:V===D?q:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var ae,Z="00000000000000000000000000000000",re=b.__private__.getFileId=function(){return Z},le=b.__private__.setFileId=function(S){return Z=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(zr=new Nh(p.userPermissions,p.userPassword,p.ownerPassword,Z)),Z};b.setFileId=function(S){return le(S),this},b.getFileId=function(){return re()};var fe=b.__private__.convertDateToPDFDate=function(S){var q=S.getTimezoneOffset(),he=q<0?"+":"-",ge=Math.floor(Math.abs(q/60)),Ne=Math.abs(q%60),$e=[he,G(ge),"'",G(Ne),"'"].join("");return["D:",S.getFullYear(),G(S.getMonth()+1),G(S.getDate()),G(S.getHours()),G(S.getMinutes()),G(S.getSeconds()),$e].join("")},_e=b.__private__.convertPDFDateToDate=function(S){var q=parseInt(S.substr(2,4),10),he=parseInt(S.substr(6,2),10)-1,ge=parseInt(S.substr(8,2),10),Ne=parseInt(S.substr(10,2),10),$e=parseInt(S.substr(12,2),10),rt=parseInt(S.substr(14,2),10);return new Date(q,he,ge,Ne,$e,rt,0)},z=b.__private__.setCreationDate=function(S){var q;if(S===void 0&&(S=new Date),S instanceof Date)q=fe(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=S}return ae=q},E=b.__private__.getCreationDate=function(S){var q=ae;return S==="jsDate"&&(q=_e(ae)),q};b.setCreationDate=function(S){return z(S),this},b.getCreationDate=function(S){return E(S)};var $,G=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},Q=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ie=0,pe=[],de=[],ye=0,Se=[],Be=[],Qe=!1,Xe=de;b.__private__.setCustomOutputDestination=function(S){Qe=!0,Xe=S};var ot=function(S){Qe||(Xe=S)};b.__private__.resetCustomOutputDestination=function(){Qe=!1,Xe=de};var Y=b.__private__.out=function(S){return S=S.toString(),ye+=S.length+1,Xe.push(S),Xe},Ie=b.__private__.write=function(S){return Y(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},vt=b.__private__.getArrayBuffer=function(S){for(var q=S.length,he=new ArrayBuffer(q),ge=new Uint8Array(he);q--;)ge[q]=S.charCodeAt(q);return he},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return et};var Re=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return Re=V===D?S/Nt:S,this};var it,qe=b.__private__.getFontSize=b.getFontSize=function(){return V===R?Re:Re*Nt},ht=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return ht=S,this},b.__private__.getR2L=b.getR2L=function(){return ht};var Te,tt=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))it=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');it=S}else it=parseInt(S,10)};b.__private__.getZoomMode=function(){return it};var bt,mt=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Te=S};b.__private__.getPageMode=function(){return Te};var st=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');bt=S};b.__private__.getLayoutMode=function(){return bt},b.__private__.setDisplayMode=b.setDisplayMode=function(S,q,he){return tt(S),st(q),mt(he),this};var dt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(dt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return dt[S]},b.__private__.getDocumentProperties=function(){return dt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var q in dt)dt.hasOwnProperty(q)&&S[q]&&(dt[q]=S[q]);return this},b.__private__.setDocumentProperty=function(S,q){if(Object.keys(dt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return dt[S]=q};var gt,Nt,Ee,ft,ut,We={},at={},xt=[],ct={},nn={},jt={},Ft={},en=null,At=0,wt=[],qt=new mx(b),wn=n.hotfixes||[],Me={},yt={},we=[],Ve=function S(q,he,ge,Ne,$e,rt){if(!(this instanceof S))return new S(q,he,ge,Ne,$e,rt);isNaN(q)&&(q=1),isNaN(he)&&(he=0),isNaN(ge)&&(ge=0),isNaN(Ne)&&(Ne=1),isNaN($e)&&($e=0),isNaN(rt)&&(rt=0),this._matrix=[q,he,ge,Ne,$e,rt]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ve.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(S)},Ve.prototype.multiply=function(S){var q=S.sx*this.sx+S.shy*this.shx,he=S.sx*this.shy+S.shy*this.sy,ge=S.shx*this.sx+S.sy*this.shx,Ne=S.shx*this.shy+S.sy*this.sy,$e=S.tx*this.sx+S.ty*this.shx+this.tx,rt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Ve(q,he,ge,Ne,$e,rt)},Ve.prototype.decompose=function(){var S=this.sx,q=this.shy,he=this.shx,ge=this.sy,Ne=this.tx,$e=this.ty,rt=Math.sqrt(S*S+q*q),Ot=(S/=rt)*he+(q/=rt)*ge;he-=S*Ot,ge-=q*Ot;var Pt=Math.sqrt(he*he+ge*ge);return Ot/=Pt,S*(ge/=Pt)<q*(he/=Pt)&&(S=-S,q=-q,Ot=-Ot,rt=-rt),{scale:new Ve(rt,0,0,Pt,0,0),translate:new Ve(1,0,0,1,Ne,$e),rotate:new Ve(S,q,-q,S,0,0),skew:new Ve(1,0,Ot,1,0,0)}},Ve.prototype.toString=function(S){return this.join(" ")},Ve.prototype.inversed=function(){var S=this.sx,q=this.shy,he=this.shx,ge=this.sy,Ne=this.tx,$e=this.ty,rt=1/(S*ge-q*he),Ot=ge*rt,Pt=-q*rt,Jt=-he*rt,mn=S*rt;return new Ve(Ot,Pt,Jt,mn,-Ot*Ne-Jt*$e,-Pt*Ne-mn*$e)},Ve.prototype.applyToPoint=function(S){var q=S.x*this.sx+S.y*this.shx+this.tx,he=S.x*this.shy+S.y*this.sy+this.ty;return new Ai(q,he)},Ve.prototype.applyToRectangle=function(S){var q=this.applyToPoint(S),he=this.applyToPoint(new Ai(S.x+S.w,S.y+S.h));return new Ra(q.x,q.y,he.x-q.x,he.y-q.y)},Ve.prototype.clone=function(){var S=this.sx,q=this.shy,he=this.shx,ge=this.sy,Ne=this.tx,$e=this.ty;return new Ve(S,q,he,ge,Ne,$e)},b.Matrix=Ve;var pt=b.matrixMult=function(S,q){return q.multiply(S)},Et=new Ve(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Et;var Bt=function(S,q){if(!nn[S]){var he=(q instanceof fu?"Sh":"P")+(Object.keys(ct).length+1).toString(10);q.id=he,nn[S]=he,ct[he]=q,qt.publish("addPattern",q)}};b.ShadingPattern=fu,b.TilingPattern=Eh,b.addShadingPattern=function(S,q){return F("addShadingPattern()"),Bt(S,q),this},b.beginTilingPattern=function(S){F("beginTilingPattern()"),rl(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,q){F("endTilingPattern()"),q.stream=Be[$].join(`
`),Bt(S,q),qt.publish("endTilingPattern",q),we.pop().restore()};var sn,Yt=b.__private__.newObject=function(){var S=dn();return fn(S,!0),S},dn=b.__private__.newObjectDeferred=function(){return ie++,pe[ie]=function(){return ye},ie},fn=function(S,q){return q=typeof q=="boolean"&&q,pe[S]=ye,q&&Y(S+" 0 obj"),S},Jn=b.__private__.newAdditionalObject=function(){var S={objId:dn(),content:""};return Se.push(S),S},Gn=dn(),Sn=dn(),an=b.__private__.decodeColorString=function(S){var q=S.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var he=parseFloat(q[0]);q=[he,he,he,"r"]}for(var ge="#",Ne=0;Ne<3;Ne++)ge+=("0"+Math.floor(255*parseFloat(q[Ne])).toString(16)).slice(-2);return ge},$n=b.__private__.encodeColorString=function(S){var q;typeof S=="string"&&(S={ch1:S});var he=S.ch1,ge=S.ch2,Ne=S.ch3,$e=S.ch4,rt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var Ot=new E4(he);if(Ot.ok)he=Ot.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Pt=parseInt(he.substr(1),16);he=Pt>>16&255,ge=Pt>>8&255,Ne=255&Pt}if(ge===void 0||$e===void 0&&he===ge&&ge===Ne)q=typeof he=="string"?he+" "+rt[0]:S.precision===2?j(he/255)+" "+rt[0]:I(he/255)+" "+rt[0];else if($e===void 0||rr($e)==="object"){if($e&&!isNaN($e.a)&&$e.a===0)return["1.","1.","1.",rt[1]].join(" ");q=typeof he=="string"?[he,ge,Ne,rt[1]].join(" "):S.precision===2?[j(he/255),j(ge/255),j(Ne/255),rt[1]].join(" "):[I(he/255),I(ge/255),I(Ne/255),rt[1]].join(" ")}else q=typeof he=="string"?[he,ge,Ne,$e,rt[2]].join(" "):S.precision===2?[j(he),j(ge),j(Ne),j($e),rt[2]].join(" "):[I(he),I(ge),I(Ne),I($e),rt[2]].join(" ");return q},Er=b.__private__.getFilters=function(){return u},us=b.__private__.putStream=function(S){var q=(S=S||{}).data||"",he=S.filters||Er(),ge=S.alreadyAppliedFilters||[],Ne=S.addLength1||!1,$e=q.length,rt=S.objectId,Ot=function(rs){return rs};if(p!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ot=zr.encryptor(rt,0));var Pt={};he===!0&&(he=["FlateEncode"]);var Jt=S.additionalKeyValues||[],mn=(Pt=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(q,he):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(Pt.data.length!==0&&(Jt.push({key:"Length",value:Pt.data.length}),Ne===!0&&Jt.push({key:"Length1",value:$e})),mn.length!=0)if(mn.split("/").length-1==1)Jt.push({key:"Filter",value:mn});else{Jt.push({key:"Filter",value:"["+mn+"]"});for(var In=0;In<Jt.length;In+=1)if(Jt[In].key==="DecodeParms"){for(var xr=[],qr=0;qr<Pt.reverseChain.split("/").length-1;qr+=1)xr.push("null");xr.push(Jt[In].value),Jt[In].value="["+xr.join(" ")+"]"}}Y("<<");for(var ir=0;ir<Jt.length;ir++)Y("/"+Jt[ir].key+" "+Jt[ir].value);Y(">>"),Pt.data.length!==0&&(Y("stream"),Y(Ot(Pt.data)),Y("endstream"))},je=b.__private__.putPage=function(S){var q=S.number,he=S.data,ge=S.objId,Ne=S.contentsObjId;fn(ge,!0),Y("<</Type /Page"),Y("/Parent "+S.rootDictionaryObjId+" 0 R"),Y("/Resources "+S.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(L(S.mediaBox.bottomLeftX))+" "+parseFloat(L(S.mediaBox.bottomLeftY))+" "+L(S.mediaBox.topRightX)+" "+L(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&Y("/CropBox ["+L(S.cropBox.bottomLeftX)+" "+L(S.cropBox.bottomLeftY)+" "+L(S.cropBox.topRightX)+" "+L(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&Y("/BleedBox ["+L(S.bleedBox.bottomLeftX)+" "+L(S.bleedBox.bottomLeftY)+" "+L(S.bleedBox.topRightX)+" "+L(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&Y("/TrimBox ["+L(S.trimBox.bottomLeftX)+" "+L(S.trimBox.bottomLeftY)+" "+L(S.trimBox.topRightX)+" "+L(S.trimBox.topRightY)+"]"),S.artBox!==null&&Y("/ArtBox ["+L(S.artBox.bottomLeftX)+" "+L(S.artBox.bottomLeftY)+" "+L(S.artBox.topRightX)+" "+L(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&Y("/UserUnit "+S.userUnit),qt.publish("putPage",{objId:ge,pageContext:wt[q],pageNumber:q,page:he}),Y("/Contents "+Ne+" 0 R"),Y(">>"),Y("endobj");var $e=he.join(`
`);return V===D&&($e+=`
Q`),fn(Ne,!0),us({data:$e,filters:Er(),objectId:Ne}),Y("endobj"),ge},Pe=b.__private__.putPages=function(){var S,q,he=[];for(S=1;S<=At;S++)wt[S].objId=dn(),wt[S].contentsObjId=dn();for(S=1;S<=At;S++)he.push(je({number:S,data:Be[S],objId:wt[S].objId,contentsObjId:wt[S].contentsObjId,mediaBox:wt[S].mediaBox,cropBox:wt[S].cropBox,bleedBox:wt[S].bleedBox,trimBox:wt[S].trimBox,artBox:wt[S].artBox,userUnit:wt[S].userUnit,rootDictionaryObjId:Gn,resourceDictionaryObjId:Sn}));fn(Gn,!0),Y("<</Type /Pages");var ge="/Kids [";for(q=0;q<At;q++)ge+=he[q]+" 0 R ";Y(ge+"]"),Y("/Count "+At),Y(">>"),Y("endobj"),qt.publish("postPutPages")},Ze=function(S){qt.publish("putFont",{font:S,out:Y,newObject:Yt,putStream:us}),S.isAlreadyPutted!==!0&&(S.objectNumber=Yt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Ah(S.postScriptName)),Y("/Subtype /Type1"),typeof S.encoding=="string"&&Y("/Encoding /"+S.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Ct=function(S){S.objectNumber=Yt();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[L(S.x),L(S.y),L(S.x+S.width),L(S.y+S.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var he=S.pages[1].join(`
`);us({data:he,additionalKeyValues:q,objectId:S.objectNumber}),Y("endobj")},St=function(S,q){q||(q=21);var he=Yt(),ge=(function(rt,Ot){var Pt,Jt=[],mn=1/(Ot-1);for(Pt=0;Pt<1;Pt+=mn)Jt.push(Pt);if(Jt.push(1),rt[0].offset!=0){var In={offset:0,color:rt[0].color};rt.unshift(In)}if(rt[rt.length-1].offset!=1){var xr={offset:1,color:rt[rt.length-1].color};rt.push(xr)}for(var qr="",ir=0,rs=0;rs<Jt.length;rs++){for(Pt=Jt[rs];Pt>rt[ir+1].offset;)ir++;var Yr=rt[ir].offset,Ns=(Pt-Yr)/(rt[ir+1].offset-Yr),za=rt[ir].color,Qi=rt[ir+1].color;qr+=Q(Math.round((1-Ns)*za[0]+Ns*Qi[0]).toString(16))+Q(Math.round((1-Ns)*za[1]+Ns*Qi[1]).toString(16))+Q(Math.round((1-Ns)*za[2]+Ns*Qi[2]).toString(16))}return qr.trim()})(S.colors,q),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+q+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),us({data:ge,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),Y("endobj"),S.objectNumber=Yt(),Y("<< /ShadingType "+S.type),Y("/ColorSpace /DeviceRGB");var $e="/Coords ["+L(parseFloat(S.coords[0]))+" "+L(parseFloat(S.coords[1]))+" ";S.type===2?$e+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3])):$e+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3]))+" "+L(parseFloat(S.coords[4]))+" "+L(parseFloat(S.coords[5])),Y($e+="]"),S.matrix&&Y("/Matrix ["+S.matrix.toString()+"]"),Y("/Function "+he+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Mt=function(S,q){var he=dn(),ge=Yt();q.push({resourcesOid:he,objectOid:ge}),S.objectNumber=ge;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+S.boundingBox.map(L).join(" ")+"]"}),Ne.push({key:"XStep",value:L(S.xStep)}),Ne.push({key:"YStep",value:L(S.yStep)}),Ne.push({key:"Resources",value:he+" 0 R"}),S.matrix&&Ne.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),us({data:S.stream,additionalKeyValues:Ne,objectId:S.objectNumber}),Y("endobj")},pn=function(S){for(var q in S.objectNumber=Yt(),Y("<<"),S)switch(q){case"opacity":Y("/ca "+j(S[q]));break;case"stroke-opacity":Y("/CA "+j(S[q]))}Y(">>"),Y("endobj")},un=function(S){fn(S.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in Y("/Font <<"),We)We.hasOwnProperty(q)&&(y===!1||y===!0&&_.hasOwnProperty(q))&&Y("/"+q+" "+We[q].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(ct).length>0){for(var q in Y("/Shading <<"),ct)ct.hasOwnProperty(q)&&ct[q]instanceof fu&&ct[q].objectNumber>=0&&Y("/"+q+" "+ct[q].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),Y(">>")}})(),(function(q){if(Object.keys(ct).length>0){for(var he in Y("/Pattern <<"),ct)ct.hasOwnProperty(he)&&ct[he]instanceof b.TilingPattern&&ct[he].objectNumber>=0&&ct[he].objectNumber<q&&Y("/"+he+" "+ct[he].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),Y(">>")}})(S.objectOid),(function(){if(Object.keys(jt).length>0){var q;for(q in Y("/ExtGState <<"),jt)jt.hasOwnProperty(q)&&jt[q].objectNumber>=0&&Y("/"+q+" "+jt[q].objectNumber+" 0 R");qt.publish("putGStateDict"),Y(">>")}})(),(function(){for(var q in Y("/XObject <<"),Me)Me.hasOwnProperty(q)&&Me[q].objectNumber>=0&&Y("/"+q+" "+Me[q].objectNumber+" 0 R");qt.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},on=function(S){at[S.fontName]=at[S.fontName]||{},at[S.fontName][S.fontStyle]=S.id},xn=function(S,q,he,ge,Ne){var $e={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:S,fontName:q,fontStyle:he,encoding:ge,isStandardFont:Ne||!1,metadata:{}};return qt.publish("addFont",{font:$e,instance:this}),We[$e.id]=$e,on($e),$e.id},Pn=b.__private__.pdfEscape=b.pdfEscape=function(S,q){return(function(he,ge){var Ne,$e,rt,Ot,Pt,Jt,mn,In,xr;if(rt=(ge=ge||{}).sourceEncoding||"Unicode",Pt=ge.outputEncoding,(ge.autoencode||Pt)&&We[gt].metadata&&We[gt].metadata[rt]&&We[gt].metadata[rt].encoding&&(Ot=We[gt].metadata[rt].encoding,!Pt&&We[gt].encoding&&(Pt=We[gt].encoding),!Pt&&Ot.codePages&&(Pt=Ot.codePages[0]),typeof Pt=="string"&&(Pt=Ot[Pt]),Pt)){for(mn=!1,Jt=[],Ne=0,$e=he.length;Ne<$e;Ne++)(In=Pt[he.charCodeAt(Ne)])?Jt.push(String.fromCharCode(In)):Jt.push(he[Ne]),Jt[Ne].charCodeAt(0)>>8&&(mn=!0);he=Jt.join("")}for(Ne=he.length;mn===void 0&&Ne!==0;)he.charCodeAt(Ne-1)>>8&&(mn=!0),Ne--;if(!mn)return he;for(Jt=ge.noBOM?[]:[254,255],Ne=0,$e=he.length;Ne<$e;Ne++){if((xr=(In=he.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(xr),Jt.push(In-(xr<<8))}return String.fromCharCode.apply(void 0,Jt)})(S,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tn=b.__private__.beginPage=function(S){Be[++At]=[],wt[At]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Mr(At),ot(Be[$])},sr=function(S,q){var he,ge,Ne;switch(t=q||t,typeof S=="string"&&(he=T(S.toLowerCase()),Array.isArray(he)&&(ge=he[0],Ne=he[1])),Array.isArray(S)&&(ge=S[0]*Nt,Ne=S[1]*Nt),isNaN(ge)&&(ge=a[0],Ne=a[1]),(ge>14400||Ne>14400)&&(gr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Ne=Math.min(14400,Ne)),a=[ge,Ne],t.substr(0,1)){case"l":Ne>ge&&(a=[Ne,ge]);break;case"p":ge>Ne&&(a=[Ne,ge])}Tn(a),Xt(el),Y(pi),zl!==0&&Y(zl+" J"),ds!==0&&Y(ds+" j"),qt.publish("addPage",{pageNumber:At})},$r=function(S){S>0&&S<=At&&(Be.splice(S,1),wt.splice(S,1),At--,$>At&&($=At),this.setPage($))},Mr=function(S){S>0&&S<=At&&($=S)},_s=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Be.length-1},Yi=function(S,q,he){var ge,Ne=void 0;return he=he||{},S=S!==void 0?S:We[gt].fontName,q=q!==void 0?q:We[gt].fontStyle,ge=S.toLowerCase(),at[ge]!==void 0&&at[ge][q]!==void 0?Ne=at[ge][q]:at[S]!==void 0&&at[S][q]!==void 0?Ne=at[S][q]:he.disableWarning===!1&&gr.warn("Unable to look up font label for font '"+S+"', '"+q+"'. Refer to getFontList() for available fonts."),Ne||he.noFallback||(Ne=at.times[q])==null&&(Ne=at.times.normal),Ne},Pr=b.__private__.putInfo=function(){var S=Yt(),q=function(ge){return ge};for(var he in p!==null&&(q=zr.encryptor(S,0)),Y("<<"),Y("/Producer ("+Pn(q("jsPDF "+Ut.version))+")"),dt)dt.hasOwnProperty(he)&&dt[he]&&Y("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Pn(q(dt[he]))+")");Y("/CreationDate ("+Pn(q(ae))+")"),Y(">>"),Y("endobj")},ni=b.__private__.putCatalog=function(S){var q=(S=S||{}).rootDictionaryObjId||Gn;switch(Yt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+q+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+it;he.substr(he.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+j(it)+"]")}switch(bt||(bt="continuous"),bt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}Te&&Y("/PageMode /"+Te),qt.publish("putCatalog"),Y(">>"),Y("endobj")},Gs=b.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(ie+1)),Y("/Root "+ie+" 0 R"),Y("/Info "+(ie-1)+" 0 R"),p!==null&&Y("/Encrypt "+zr.oid+" 0 R"),Y("/ID [ <"+Z+"> <"+Z+"> ]"),Y(">>")},Nn=b.__private__.putHeader=function(){Y("%PDF-"+A),Y("%")},Xi=b.__private__.putXRef=function(){var S="0000000000";Y("xref"),Y("0 "+(ie+1)),Y("0000000000 65535 f ");for(var q=1;q<=ie;q++)typeof pe[q]=="function"?Y((S+pe[q]()).slice(-10)+" 00000 n "):pe[q]!==void 0?Y((S+pe[q]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},Ds=b.__private__.buildDocument=function(){var S;ie=0,ye=0,de=[],pe=[],Se=[],Gn=dn(),Sn=dn(),ot(de),qt.publish("buildDocument"),Nn(),Pe(),(function(){qt.publish("putAdditionalObjects");for(var he=0;he<Se.length;he++){var ge=Se[he];fn(ge.objId,!0),Y(ge.content),Y("endobj")}qt.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var he in We)We.hasOwnProperty(he)&&(y===!1||y===!0&&_.hasOwnProperty(he))&&Ze(We[he])})(),(function(){var he;for(he in jt)jt.hasOwnProperty(he)&&pn(jt[he])})(),(function(){for(var he in Me)Me.hasOwnProperty(he)&&Ct(Me[he])})(),(function(he){var ge;for(ge in ct)ct.hasOwnProperty(ge)&&(ct[ge]instanceof fu?St(ct[ge]):ct[ge]instanceof Eh&&Mt(ct[ge],he))})(S),qt.publish("putResources"),S.forEach(un),un({resourcesOid:Sn,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources"),p!==null&&(zr.oid=Yt(),Y("<<"),Y("/Filter /Standard"),Y("/V "+zr.v),Y("/R "+zr.r),Y("/U <"+zr.toHexString(zr.U)+">"),Y("/O <"+zr.toHexString(zr.O)+">"),Y("/P "+zr.P),Y(">>"),Y("endobj")),Pr(),ni();var q=ye;return Xi(),Gs(),Y("startxref"),Y(""+q),Y("%%EOF"),ot(Be[$]),de.join(`
`)},Si=b.__private__.getBlob=function(S){return new Blob([vt(S)],{type:"application/pdf"})},_o=b.output=b.__private__.output=(sn=function(S,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",S){case void 0:return Ds();case"save":b.save(q.filename);break;case"arraybuffer":return vt(Ds());case"blob":return Si(Ds());case"bloburi":case"bloburl":if(cn.URL!==void 0&&typeof cn.URL.createObjectURL=="function")return cn.URL&&cn.URL.createObjectURL(Si(Ds()))||void 0;gr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",ge=Ds();try{he=dx(ge)}catch{he=dx(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+q.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ne=q.pdfObjectUrl,$e="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+$e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Ot=cn.open();return Ot!==null&&Ot.document.write(rt),Ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Jt=cn.open();if(Jt!==null){Jt.document.write(Pt);var mn=this;Jt.document.documentElement.querySelector("#pdfViewer").onload=function(){Jt.document.title=q.filename,Jt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mn.output("bloburl"))}}return Jt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',xr=cn.open();if(xr!==null&&(xr.document.write(In),xr.document.title=q.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return cn.document.location.href=this.output("datauristring",q);default:return null}},sn.foo=function(){try{return sn.apply(this,arguments)}catch(he){var S=he.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var q="Error in function "+S.split(`
`)[0].split("<")[0]+": "+he.message;if(!cn.console)throw new Error(q);cn.console.error(q,he),cn.alert&&alert(q)}},sn.foo.bar=sn,sn.foo),hs=function(S){return Array.isArray(wn)===!0&&wn.indexOf(S)>-1};switch(s){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=hs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Nt=s}var zr=null;z(),le();var Lr=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[S].objId,pageNumber:S,pageContext:wt[S]}},So=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in wt)if(wt[q].objId===S)break;return Lr(q)},Bl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:wt[$].objId,pageNumber:$,pageContext:wt[$]}};b.addPage=function(){return sr.apply(this,arguments),this},b.setPage=function(){return Mr.apply(this,arguments),ot.call(this,Be[$]),this},b.insertPage=function(S){return this.addPage(),this.movePage($,S),this},b.movePage=function(S,q){var he,ge;if(S>q){he=Be[S],ge=wt[S];for(var Ne=S;Ne>q;Ne--)Be[Ne]=Be[Ne-1],wt[Ne]=wt[Ne-1];Be[q]=he,wt[q]=ge,this.setPage(q)}else if(S<q){he=Be[S],ge=wt[S];for(var $e=S;$e<q;$e++)Be[$e]=Be[$e+1],wt[$e]=wt[$e+1];Be[q]=he,wt[q]=ge,this.setPage(q)}return this},b.deletePage=function(){return $r.apply(this,arguments),this},b.__private__.text=b.text=function(S,q,he,ge,Ne){var $e,rt,Ot,Pt,Jt,mn,In,xr,qr,ir=(ge=ge||{}).scope||this;if(typeof S=="number"&&typeof q=="number"&&(typeof he=="string"||Array.isArray(he))){var rs=he;he=q,q=S,S=rs}if(arguments[3]instanceof Ve==0?(Ot=arguments[4],Pt=arguments[5],rr(In=arguments[3])==="object"&&In!==null||(typeof Ot=="string"&&(Pt=Ot,Ot=null),typeof In=="string"&&(Pt=In,In=null),typeof In=="number"&&(Ot=In,In=null),ge={flags:In,angle:Ot,align:Pt})):(F("The transform parameter of text() with a Matrix value"),qr=Ne),isNaN(q)||isNaN(he)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return ir;var Yr,Ns="",za=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:Da,Qi=ir.internal.scaleFactor;function qa(Hn){return Hn=Hn.split("	").join(Array(ge.TabLen||9).join(" ")),Pn(Hn,In)}function Hc(Hn){for(var Vn,ar=Hn.concat(),Hr=[],Sa=ar.length;Sa--;)typeof(Vn=ar.shift())=="string"?Hr.push(Vn):Array.isArray(Hn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?Hr.push(Vn[0]):Hr.push([Vn[0],Vn[1],Vn[2]]);return Hr}function Ul(Hn,Vn){var ar;if(typeof Hn=="string")ar=Vn(Hn)[0];else if(Array.isArray(Hn)){for(var Hr,Sa,na=Hn.concat(),ol=[],$c=na.length;$c--;)typeof(Hr=na.shift())=="string"?ol.push(Vn(Hr)[0]):Array.isArray(Hr)&&typeof Hr[0]=="string"&&(Sa=Vn(Hr[0],Hr[1],Hr[2]),ol.push([Sa[0],Sa[1],Sa[2]]));ar=ol}return ar}var ga=!1,Ji=!0;if(typeof S=="string")ga=!0;else if(Array.isArray(S)){var il=S.concat();rt=[];for(var Ua,fs=il.length;fs--;)(typeof(Ua=il.shift())!="string"||Array.isArray(Ua)&&typeof Ua[0]!="string")&&(Ji=!1);ga=Ji}if(ga===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Ao=Re/ir.internal.scaleFactor,Co=Ao*(za-1);switch(ge.baseline){case"bottom":he-=Co;break;case"top":he+=Ao-Co;break;case"hanging":he+=Ao-2*Co;break;case"middle":he+=Ao/2-Co}if((mn=ge.maxWidth||0)>0&&(typeof S=="string"?S=ir.splitTextToSize(S,mn):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Hn,Vn){return Hn.concat(ir.splitTextToSize(Vn,mn))},[]))),$e={text:S,x:q,y:he,options:ge,mutex:{pdfEscape:Pn,activeFontKey:gt,fonts:We,activeFontSize:Re}},qt.publish("preProcessText",$e),S=$e.text,Ot=(ge=$e.options).angle,qr instanceof Ve==0&&Ot&&typeof Ot=="number"){Ot*=Math.PI/180,ge.rotationDirection===0&&(Ot=-Ot),V===D&&(Ot=-Ot);var Hl=Math.cos(Ot),ba=Math.sin(Ot);qr=new Ve(Hl,ba,-ba,Hl,0,0)}else Ot&&Ot instanceof Ve&&(qr=Ot);V!==D||qr||(qr=Et),(Jt=ge.charSpace||Ni)!==void 0&&(Ns+=L(X(Jt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=ge.horizontalScale)!==void 0&&(Ns+=L(100*xr)+` Tz
`),ge.lang;var Ys=-1,Ha=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,Wl=ir.internal.getCurrentPageInfo().pageContext;switch(Ha){case 0:case!1:case"fill":Ys=0;break;case 1:case!0:case"stroke":Ys=1;break;case 2:case"fillThenStroke":Ys=2;break;case 3:case"invisible":Ys=3;break;case 4:case"fillAndAddForClipping":Ys=4;break;case 5:case"strokeAndAddPathForClipping":Ys=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ys=6;break;case 7:case"addToPathForClipping":Ys=7}var Wc=Wl.usedRenderingMode!==void 0?Wl.usedRenderingMode:-1;Ys!==-1?Ns+=Ys+` Tr
`:Wc!==-1&&(Ns+=`0 Tr
`),Ys!==-1&&(Wl.usedRenderingMode=Ys),Pt=ge.align||"left";var mi,ea=Re*za,Wa=ir.internal.pageSize.getWidth(),Gc=We[gt];Jt=ge.charSpace||Ni,mn=ge.maxWidth||0,In=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var ta=[],To=function(Hn){return ir.getStringUnitWidth(Hn,{font:Gc,charSpace:Jt,fontSize:Re,doKerning:!1})*Re/Qi};if(Object.prototype.toString.call(S)==="[object Array]"){var si;rt=Hc(S),Pt!=="left"&&(mi=rt.map(To));var Xs,va=0;if(Pt==="right"){q-=mi[0],S=[],fs=rt.length;for(var ya=0;ya<fs;ya++)ya===0?(Xs=fi(q),si=Ss(he)):(Xs=X(va-mi[ya]),si=-ea),S.push([rt[ya],Xs,si]),va=mi[ya]}else if(Pt==="center"){q-=mi[0]/2,S=[],fs=rt.length;for(var Ga=0;Ga<fs;Ga++)Ga===0?(Xs=fi(q),si=Ss(he)):(Xs=X((va-mi[Ga])/2),si=-ea),S.push([rt[Ga],Xs,si]),va=mi[Ga]}else if(Pt==="left"){S=[],fs=rt.length;for(var Gl=0;Gl<fs;Gl++)S.push(rt[Gl])}else if(Pt==="justify"&&Gc.encoding==="Identity-H"){S=[],fs=rt.length,mn=mn!==0?mn:Wa;for(var $l=0,Ur=0;Ur<fs;Ur++)if(si=Ur===0?Ss(he):-ea,Xs=Ur===0?fi(q):$l,Ur<fs-1){var Pu=X((mn-mi[Ur])/(rt[Ur].split(" ").length-1)),xa=rt[Ur].split(" ");S.push([xa[0]+" ",Xs,si]),$l=0;for(var wa=1;wa<xa.length;wa++){var As=(To(xa[wa-1]+" "+xa[wa])-To(xa[wa]))*Qi+Pu;wa==xa.length-1?S.push([xa[wa],As,0]):S.push([xa[wa]+" ",As,0]),$l-=As}}else S.push([rt[Ur],Xs,si]);S.push(["",$l,0])}else{if(Pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],fs=rt.length,mn=mn!==0?mn:Wa,Ur=0;Ur<fs;Ur++){si=Ur===0?Ss(he):-ea,Xs=Ur===0?fi(q):0;var $a=rt[Ur].split(" ").length-1,Yl=$a>0?(mn-mi[Ur])/$a:0;Ur<fs-1?ta.push(L(X(Yl))):ta.push(0),S.push([rt[Ur],Xs,si])}}}(typeof ge.R2L=="boolean"?ge.R2L:ht)===!0&&(S=Ul(S,function(Hn,Vn,ar){return[Hn.split("").reverse().join(""),Vn,ar]})),$e={text:S,x:q,y:he,options:ge,mutex:{pdfEscape:Pn,activeFontKey:gt,fonts:We,activeFontSize:Re}},qt.publish("postProcessText",$e),S=$e.text,Yr=$e.mutex.isHex||!1;var Xl=We[gt].encoding;Xl!=="WinAnsiEncoding"&&Xl!=="StandardEncoding"||(S=Ul(S,function(Hn,Vn,ar){return[qa(Hn),Vn,ar]})),rt=Hc(S),S=[];for(var Ya,Xa,_a,al=Array.isArray(rt[0])?1:0,gi="",Za=function(Hn,Vn,ar){var Hr="";return ar instanceof Ve?(ar=typeof ge.angle=="number"?pt(ar,new Ve(1,0,0,1,Hn,Vn)):pt(new Ve(1,0,0,1,Hn,Vn),ar),V===D&&(ar=pt(new Ve(1,0,0,-1,0,0),ar)),Hr=ar.join(" ")+` Tm
`):Hr=L(Hn)+" "+L(Vn)+` Td
`,Hr},Rs=0;Rs<rt.length;Rs++){switch(gi="",al){case 1:_a=(Yr?"<":"(")+rt[Rs][0]+(Yr?">":")"),Ya=parseFloat(rt[Rs][1]),Xa=parseFloat(rt[Rs][2]);break;case 0:_a=(Yr?"<":"(")+rt[Rs]+(Yr?">":")"),Ya=fi(q),Xa=Ss(he)}ta!==void 0&&ta[Rs]!==void 0&&(gi=ta[Rs]+` Tw
`),Rs===0?S.push(gi+Za(Ya,Xa,qr)+_a):al===0?S.push(gi+_a):al===1&&S.push(gi+Za(Ya,Xa,qr)+_a)}S=al===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ci=`BT
/`;return Ci+=gt+" "+Re+` Tf
`,Ci+=L(Re*za)+` TL
`,Ci+=pa+`
`,Ci+=Ns,Ci+=S,Y(Ci+="ET"),_[gt]=!0,ir};var Qo=b.__private__.clip=b.clip=function(S){return Y(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Qo("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Y("n"),this};var $s=b.__private__.isValidStyle=function(S){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(q=!0),q};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return $s(S)&&(f=S),this};var Vc=b.__private__.getStyle=b.getStyle=function(S){var q=f;switch(S){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=S}return q},Fc=b.close=function(){return Y("h"),this};b.stroke=function(){return Y("S"),this},b.fill=function(S){return Zi("f",S),this},b.fillEvenOdd=function(S){return Zi("f*",S),this},b.fillStroke=function(S){return Zi("B",S),this},b.fillStrokeEvenOdd=function(S){return Zi("B*",S),this};var Zi=function(S,q){rr(q)==="object"?Ou(q,S):Y(S)},Jo=function(S){S===null||V===D&&S===void 0||(S=Vc(S),Y(S))};function Lu(S,q,he,ge,Ne){var $e=new Eh(q||this.boundingBox,he||this.xStep,ge||this.yStep,this.gState,Ne||this.matrix);$e.stream=this.stream;var rt=S+"$$"+this.cloneIndex+++"$$";return Bt(rt,$e),$e}var Ou=function(S,q){var he=nn[S.key],ge=ct[he];if(ge instanceof fu)Y("q"),Y(Bc(q)),ge.gState&&b.setGState(ge.gState),Y(S.matrix.toString()+" cm"),Y("/"+he+" sh"),Y("Q");else if(ge instanceof Eh){var Ne=new Ve(1,0,0,-1,0,Pa());S.matrix&&(Ne=Ne.multiply(S.matrix||Et),he=Lu.call(ge,S.key,S.boundingBox,S.xStep,S.yStep,Ne).id),Y("q"),Y("/Pattern cs"),Y("/"+he+" scn"),ge.gState&&b.setGState(ge.gState),Y(q),Y("Q")}},Bc=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pc=b.moveTo=function(S,q){return Y(L(X(S))+" "+L(P(q))+" m"),this},Du=b.lineTo=function(S,q){return Y(L(X(S))+" "+L(P(q))+" l"),this},ri=b.curveTo=function(S,q,he,ge,Ne,$e){return Y([L(X(S)),L(P(q)),L(X(he)),L(P(ge)),L(X(Ne)),L(P($e)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,q,he,ge,Ne){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||!$s(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return V===R?this.lines([[he-S,ge-q]],S,q,[1,1],Ne||"S"):this.lines([[he-S,ge-q]],S,q,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,q,he,ge,Ne,$e){var rt,Ot,Pt,Jt,mn,In,xr,qr,ir,rs,Yr,Ns;if(typeof S=="number"&&(Ns=he,he=q,q=S,S=Ns),ge=ge||[1,1],$e=$e||!1,isNaN(q)||isNaN(he)||!Array.isArray(S)||!Array.isArray(ge)||!$s(Ne)||typeof $e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pc(q,he),rt=ge[0],Ot=ge[1],Jt=S.length,rs=q,Yr=he,Pt=0;Pt<Jt;Pt++)(mn=S[Pt]).length===2?(rs=mn[0]*rt+rs,Yr=mn[1]*Ot+Yr,Du(rs,Yr)):(In=mn[0]*rt+rs,xr=mn[1]*Ot+Yr,qr=mn[2]*rt+rs,ir=mn[3]*Ot+Yr,rs=mn[4]*rt+rs,Yr=mn[5]*Ot+Yr,ri(In,xr,qr,ir,rs,Yr));return $e&&Fc(),Jo(Ne),this},b.path=function(S){for(var q=0;q<S.length;q++){var he=S[q],ge=he.c;switch(he.op){case"m":Pc(ge[0],ge[1]);break;case"l":Du(ge[0],ge[1]);break;case"c":ri.apply(this,ge);break;case"h":Fc()}}return this},b.__private__.rect=b.rect=function(S,q,he,ge,Ne){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||!$s(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R&&(ge=-ge),Y([L(X(S)),L(P(q)),L(X(he)),L(X(ge)),"re"].join(" ")),Jo(Ne),this},b.__private__.triangle=b.triangle=function(S,q,he,ge,Ne,$e,rt){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||isNaN(Ne)||isNaN($e)||!$s(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-S,ge-q],[Ne-he,$e-ge],[S-Ne,q-$e]],S,q,[1,1],rt,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,q,he,ge,Ne,$e,rt){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||isNaN(Ne)||isNaN($e)||!$s(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ot=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*he),$e=Math.min($e,.5*ge),this.lines([[he-2*Ne,0],[Ne*Ot,0,Ne,$e-$e*Ot,Ne,$e],[0,ge-2*$e],[0,$e*Ot,-Ne*Ot,$e,-Ne,$e],[2*Ne-he,0],[-Ne*Ot,0,-Ne,-$e*Ot,-Ne,-$e],[0,2*$e-ge],[0,-$e*Ot,Ne*Ot,-$e,Ne,-$e]],S+Ne,q,[1,1],rt,!0),this},b.__private__.ellipse=b.ellipse=function(S,q,he,ge,Ne){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||!$s(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $e=4/3*(Math.SQRT2-1)*he,rt=4/3*(Math.SQRT2-1)*ge;return Pc(S+he,q),ri(S+he,q-rt,S+$e,q-ge,S,q-ge),ri(S-$e,q-ge,S-he,q-rt,S-he,q),ri(S-he,q+rt,S-$e,q+ge,S,q+ge),ri(S+$e,q+ge,S+he,q+rt,S+he,q),Jo(Ne),this},b.__private__.circle=b.circle=function(S,q,he,ge){if(isNaN(S)||isNaN(q)||isNaN(he)||!$s(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,q,he,he,ge)},b.setFont=function(S,q,he){return he&&(q=H(q,he)),gt=Yi(S,q,{disableWarning:!1}),this};var Ki=b.__private__.getFont=b.getFont=function(){return We[Yi.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,q,he={};for(S in at)if(at.hasOwnProperty(S))for(q in he[S]=[],at[S])at[S].hasOwnProperty(q)&&he[S].push(q);return he},b.addFont=function(S,q,he,ge,Ne){var $e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$e.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&$e.indexOf(arguments[3])==-1&&(he=H(he,ge)),xn.call(this,S,q,he,Ne=Ne||"Identity-H")};var Da,el=n.lineWidth||.200025,No=b.__private__.getLineWidth=b.getLineWidth=function(){return el},Xt=b.__private__.setLineWidth=b.setLineWidth=function(S){return el=S,Y(L(X(S))+" w"),this};b.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(S,q){if(S=S||[],q=q||0,isNaN(q)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(he){return L(X(he))}).join(" "),q=L(X(q)),Y("["+S+"] "+q+" d"),this};var Ru=b.__private__.getLineHeight=b.getLineHeight=function(){return Re*Da};b.__private__.getLineHeight=b.getLineHeight=function(){return Re*Da};var zc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Da=S),this},Iu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Da};zc(n.lineHeight);var fi=b.__private__.getHorizontalCoordinate=function(S){return X(S)},Ss=b.__private__.getVerticalCoordinate=function(S){return V===D?S:wt[$].mediaBox.topRightY-wt[$].mediaBox.bottomLeftY-X(S)},qc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return L(fi(S))},tl=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return L(Ss(S))},pi=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return an(pi)},b.__private__.setStrokeColor=b.setDrawColor=function(S,q,he,ge){return pi=$n({ch1:S,ch2:q,ch3:he,ch4:ge,pdfColorType:"draw",precision:2}),Y(pi),this};var nl=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return an(nl)},b.__private__.setFillColor=b.setFillColor=function(S,q,he,ge){return nl=$n({ch1:S,ch2:q,ch3:he,ch4:ge,pdfColorType:"fill",precision:2}),Y(nl),this};var pa=n.textColor||"0 g",Vu=b.__private__.getTextColor=b.getTextColor=function(){return an(pa)};b.__private__.setTextColor=b.setTextColor=function(S,q,he,ge){return pa=$n({ch1:S,ch2:q,ch3:he,ch4:ge,pdfColorType:"text",precision:3}),this};var Ni=n.charSpace,Pl=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ni||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ni=S,this};var zl=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=q,Y(q+" J"),this};var ds=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ds=q,Y(q+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(L(X(S))+" M"),this},b.GState=Op,b.setGState=function(S){(S=typeof S=="string"?jt[Ft[S]]:ma(null,S)).equals(en)||(Y("/"+S.id+" gs"),en=S)};var ma=function(S,q){if(!S||!Ft[S]){var he=!1;for(var ge in jt)if(jt.hasOwnProperty(ge)&&jt[ge].equals(q)){he=!0;break}if(he)q=jt[ge];else{var Ne="GS"+(Object.keys(jt).length+1).toString(10);jt[Ne]=q,q.id=Ne}return S&&(Ft[S]=q.id),qt.publish("addGState",q),q}};b.addGState=function(S,q){return ma(S,q),this},b.saveGraphicsState=function(){return Y("q"),xt.push({key:gt,size:Re,color:pa}),this},b.restoreGraphicsState=function(){Y("Q");var S=xt.pop();return gt=S.key,Re=S.size,pa=S.color,en=null,this},b.setCurrentTransformationMatrix=function(S){return Y(S.toString()+" cm"),this},b.comment=function(S){return Y("#"+S),this};var Ai=function(S,q){var he=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function($e){isNaN($e)||(he=parseFloat($e))}});var ge=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function($e){isNaN($e)||(ge=parseFloat($e))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function($e){Ne=$e.toString()}}),this},Ra=function(S,q,he,ge){Ai.call(this,S,q),this.type="rect";var Ne=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(rt){isNaN(rt)||(Ne=parseFloat(rt))}});var $e=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $e},set:function(rt){isNaN(rt)||($e=parseFloat(rt))}}),this},ql=function(){this.page=At,this.currentPage=$,this.pages=Be.slice(0),this.pagesContext=wt.slice(0),this.x=Ee,this.y=ft,this.matrix=ut,this.width=Va($),this.height=Uc($),this.outputDestination=Xe,this.id="",this.objectNumber=-1};ql.prototype.restore=function(){At=this.page,$=this.currentPage,wt=this.pagesContext,Be=this.pages,Ee=this.x,ft=this.y,ut=this.matrix,sl($,this.width),Fa($,this.height),Xe=this.outputDestination};var rl=function(S,q,he,ge,Ne){we.push(new ql),At=$=0,Be=[],Ee=S,ft=q,ut=Ne,Tn([he,ge])};for(var Ia in b.beginFormObject=function(S,q,he,ge,Ne){return rl(S,q,he,ge,Ne),this},b.endFormObject=function(S){return(function(q){if(yt[q])we.pop().restore();else{var he=new ql,ge="Xo"+(Object.keys(Me).length+1).toString(10);he.id=ge,yt[q]=ge,Me[ge]=he,qt.publish("addFormObject",he),we.pop().restore()}})(S),this},b.doFormObject=function(S,q){var he=Me[yt[S]];return Y("q"),Y(q.toString()+" cm"),Y("/"+he.id+" Do"),Y("Q"),this},b.getFormObject=function(S){var q=Me[yt[S]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},b.save=function(S,q){return S=S||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(hu(Si(Ds()),S),typeof hu.unload=="function"&&cn.setTimeout&&setTimeout(hu.unload,911),this):new Promise(function(he,ge){try{var Ne=hu(Si(Ds()),S);typeof hu.unload=="function"&&cn.setTimeout&&setTimeout(hu.unload,911),he(Ne)}catch($e){ge($e.message)}})},Ut.API)Ut.API.hasOwnProperty(Ia)&&(Ia==="events"&&Ut.API.events.length?(function(S,q){var he,ge,Ne;for(Ne=q.length-1;Ne!==-1;Ne--)he=q[Ne][0],ge=q[Ne][1],S.subscribe.apply(S,[he].concat(typeof ge=="function"?[ge]:ge))})(qt,Ut.API.events):b[Ia]=Ut.API[Ia]);function Va(S){return wt[S].mediaBox.topRightX-wt[S].mediaBox.bottomLeftX}function sl(S,q){wt[S].mediaBox.topRightX=q+wt[S].mediaBox.bottomLeftX}function Uc(S){return wt[S].mediaBox.topRightY-wt[S].mediaBox.bottomLeftY}function Fa(S,q){wt[S].mediaBox.topRightY=q+wt[S].mediaBox.bottomLeftY}var Ba=b.getPageWidth=function(S){return Va(S=S||$)/Nt},Fu=b.setPageWidth=function(S,q){sl(S,q*Nt)},Pa=b.getPageHeight=function(S){return Uc(S=S||$)/Nt},Bu=b.setPageHeight=function(S,q){Fa(S,q*Nt)};return b.internal={pdfEscape:Pn,getStyle:Vc,getFont:Ki,getFontSize:qe,getCharSpace:Pl,getTextColor:Vu,getLineHeight:Ru,getLineHeightFactor:Iu,getLineWidth:No,write:Ie,getHorizontalCoordinate:fi,getVerticalCoordinate:Ss,getCoordinateString:qc,getVerticalCoordinateString:tl,collections:{},newObject:Yt,newAdditionalObject:Jn,newObjectDeferred:dn,newObjectDeferredBegin:fn,getFilters:Er,putStream:us,events:qt,scaleFactor:Nt,pageSize:{getWidth:function(){return Ba($)},setWidth:function(S){Fu($,S)},getHeight:function(){return Pa($)},setHeight:function(S){Bu($,S)}},encryptionOptions:p,encryption:zr,getEncryptor:function(S){return p!==null?zr.encryptor(S,0):function(q){return q}},output:_o,getNumberOfPages:_s,get pages(){return Be},out:Y,f2:j,f3:I,getPageInfo:Lr,getPageInfoByObjId:So,getCurrentPageInfo:Bl,getPDFVersion:N,Point:Ai,Rectangle:Ra,Matrix:Ve,hasHotfix:hs},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ba($)},set:function(S){Fu($,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Pa($)},set:function(S){Bu($,S)},enumerable:!0,configurable:!0}),(function(S){for(var q=0,he=et.length;q<he;q++){var ge=xn.call(this,S[q][0],S[q][1],S[q][2],et[q][3],!0);y===!1&&(_[ge]=!0);var Ne=S[q][0].split("-");on({id:ge,fontName:Ne[0],fontStyle:Ne[1]||""})}qt.publish("addFonts",{fonts:We,dictionary:at})}).call(b,et),gt="F1",sr(a,t),qt.publish("initialized"),b}Nh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Nh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Nh.prototype.processOwnerPassword=function(n,e){return Ig(Rg(e).substr(0,5),n)},Nh.prototype.encryptor=function(n,e){var t=Rg(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Ig(t,s)}},Op.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||rr(n)!==rr(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Ut.API={events:[]},Ut.version="3.0.4";var ts=Ut.API,X2=1,Mu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vn=function(n){return n.toFixed(2)},wc=function(n){return n.toFixed(5)};ts.__acroform__={};var $i=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},gx=function(n){return n*X2},Uo=function(n){var e=new D4,t=It.internal.getHeight(n)||0,s=It.internal.getWidth(n)||0;return e.BBox=[0,0,Number(vn(s)),Number(vn(t))],e},NL=ts.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},AL=ts.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},CL=ts.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},as=ts.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return CL(n,e-1)},os=ts.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return NL(n,e-1)},ls=ts.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AL(n,e-1)},TL=ts.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],c=n[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=s(o+c)||0,h.upperRight_X=t(a+u)||0,h.upperRight_Y=s(o)||0,[Number(vn(h.lowerLeft_X)),Number(vn(h.lowerLeft_Y)),Number(vn(h.upperRight_X)),Number(vn(h.upperRight_Y))]},kL=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Vg(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+vn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Uo(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Vg=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(j){return j.split(`
`)}):a.map(function(j){return[j]});var o=t,u=It.internal.getHeight(n)||0;u=u<0?-u:u;var c=It.internal.getWidth(n)||0;c=c<0?-c:c;var h=function(j,I,X){if(j+1<a.length){var P=I+" "+a[j+1][0];return q1(P,n,X).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var f,p,y=q1("3",n,o).height,_=n.multiline?u-o:(u-y)/2,b=_+=2,A=0,N=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+q1(e,n,o=12).width+", FieldWidth:"+c+`
`;break}for(var T="",R=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var V=!1;if(a[D].length!==1&&k!==a[D].length-1){if((y+2)*(R+2)+2>u)continue e;T+=a[D][k],V=!0,N=D,D--}else{T=(T+=a[D][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var B=parseInt(D),W=h(B,T,o),H=D>=a.length-1;if(W&&!H){T+=" ",k=0;continue}if(W||H){if(H)N=B;else if(n.multiline&&(y+2)*(R+2)+2>u)continue e}else{if(!n.multiline||(y+2)*(R+2)+2>u)continue e;N=B}}for(var L="",F=A;F<=N;F++){var te=a[F];if(n.multiline){if(F===N){L+=te[k]+" ",k=(k+1)%te.length;continue}if(F===A){L+=te[te.length-1]+" ";continue}}L+=te[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,p=q1(L,n,o).width,n.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;default:f=2}e+=vn(f)+" "+vn(b)+` Td
`,e+="("+Mu(L)+`) Tj
`,e+=-vn(f)+` 0 Td
`,b=-(o+2),p=0,A=V?N:N+1,R++,T=""}break}return s.text=e,s.fontSize=o,s},q1=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},jL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EL=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},ML=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(xo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(jL)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new R4,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&EL(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var c=s[u],h=[],f=c.Rect;if(c.Rect&&(c.Rect=TL(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=It.createDefaultAppearanceStream(c),rr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=kL(c);h.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var b=c.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var A=b[u];typeof A=="function"&&(A=A.call(a,c)),y+="/"+u+" "+A+" ",a.internal.acroformPlugin.xForms.indexOf(A)>=0||a.internal.acroformPlugin.xForms.push(A)}}else typeof(A=b)=="function"&&(A=A.call(a,c)),y+="/"+u+" "+A,a.internal.acroformPlugin.xForms.indexOf(A)>=0||a.internal.acroformPlugin.xForms.push(A);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:c.objId}),a.internal.out("endobj")}o&&(function(N,k){for(var T in N)if(N.hasOwnProperty(T)){var R=T,D=N[T];k.internal.newObjectDeferredBegin(D.objId,!0),rr(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete N[R]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},O4=ts.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),rr(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Mu(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qm=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Mu(s(n))+")"},Wo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wo.prototype.toString=function(){return this.objId+" 0 R"},Wo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Wo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:O4(a,this.objId,this.scope)}):a instanceof Wo?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var D4=function(){Wo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};$i(D4,Wo);var R4=function(){Wo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Mu(t(n))+")"}},set:function(t){n=t}})};$i(R4,Wo);var xo=function n(){Wo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!as(e,3)},set:function(T){T?this.F=os(e,3):this.F=ls(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(T){s=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(T){s[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(T){s[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(T){s[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(T){s[3]=T}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Dp)return;o="FieldObject"+n.FieldNum++}var T=function(R){return R};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Mu(T(o))+")"},set:function(T){o=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(T){o=T}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(T){c=T}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(T){h=T}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/X2:f},set:function(T){f=T}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(T){p=T}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Dp||this instanceof yu))return Qm(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=T}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Hs==0?Qm(_,this.objId,this.scope):_},set:function(T){T=T.toString(),_=this instanceof Hs==0?T.substr(0,1)==="("?wh(T.substr(1,T.length-2)):wh(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hs==1?wh(_.substr(1,_.length-1)):_},set:function(T){T=T.toString(),_=this instanceof Hs==1?"/"+T:T}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Hs==0?Qm(b,this.objId,this.scope):b},set:function(T){T=T.toString(),b=this instanceof Hs==0?T.substr(0,1)==="("?wh(T.substr(1,T.length-2)):wh(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hs==1?wh(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof Hs==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(T){T=!!T,N=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(T){A=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,1)},set:function(T){T?this.Ff=os(this.Ff,1):this.Ff=ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,2)},set:function(T){T?this.Ff=os(this.Ff,2):this.Ff=ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,3)},set:function(T){T?this.Ff=os(this.Ff,3):this.Ff=ls(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};$i(xo,Wo);var Vh=function(){xo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return O4(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,c){c||(c=1);for(var h,f=[];h=u.exec(o);)f.push(h[c]);return f})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,18)},set:function(t){t?this.Ff=os(this.Ff,18):this.Ff=ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=os(this.Ff,19):this.Ff=ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,20)},set:function(t){t?(this.Ff=os(this.Ff,20),e.sort()):this.Ff=ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,22)},set:function(t){t?this.Ff=os(this.Ff,22):this.Ff=ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(t){t?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,27)},set:function(t){t?this.Ff=os(this.Ff,27):this.Ff=ls(this.Ff,27)}}),this.hasAppearanceStream=!1};$i(Vh,xo);var Fh=function(){Vh.call(this),this.fontName="helvetica",this.combo=!1};$i(Fh,Vh);var Bh=function(){Fh.call(this),this.combo=!0};$i(Bh,Fh);var Q1=function(){Bh.call(this),this.edit=!0};$i(Q1,Bh);var Hs=function(){xo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,15)},set:function(t){t?this.Ff=os(this.Ff,15):this.Ff=ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,16)},set:function(t){t?this.Ff=os(this.Ff,16):this.Ff=ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,17)},set:function(t){t?this.Ff=os(this.Ff,17):this.Ff=ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(t){t?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Mu(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){rr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};$i(Hs,xo);var J1=function(){Hs.call(this),this.pushButton=!0};$i(J1,Hs);var Ph=function(){Hs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};$i(Ph,Hs);var Dp=function(){var n,e;xo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Mu(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){rr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=It.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$i(Dp,xo),Ph.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ph.prototype.createOption=function(n){var e=new Dp;return e.Parent=this,e.optionName=n,this.Kids.push(e),LL.call(this.scope,e),e};var ep=function(){Hs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=It.CheckBox.createAppearanceStream()};$i(ep,Hs);var yu=function(){xo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,13)},set:function(e){e?this.Ff=os(this.Ff,13):this.Ff=ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,21)},set:function(e){e?this.Ff=os(this.Ff,21):this.Ff=ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(e){e?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,24)},set:function(e){e?this.Ff=os(this.Ff,24):this.Ff=ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,25)},set:function(e){e?this.Ff=os(this.Ff,25):this.Ff=ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(e){e?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$i(yu,xo);var tp=function(){yu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,14)},set:function(n){n?this.Ff=os(this.Ff,14):this.Ff=ls(this.Ff,14)}}),this.password=!0};$i(tp,yu);var It={CheckBox:{createAppearanceStream:function(){return{N:{On:It.CheckBox.YesNormal},D:{On:It.CheckBox.YesPushDown,Off:It.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Vg(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+vn(It.internal.getWidth(n))+" "+vn(It.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+vn(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=It.internal.getHeight(n),u=It.internal.getWidth(n),c=Vg(n,n.caption);return a.push("1 g"),a.push("0 0 "+vn(u)+" "+vn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vn(u-1)+" "+vn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+vn(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vn(It.internal.getWidth(n))+" "+vn(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Circle.YesNormal,e.D[n]=It.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=It.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+wc(It.internal.getWidth(n)/2)+" "+wc(It.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*It.internal.Bezier_C).toFixed(5)),u=Number((s*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wc(It.internal.getWidth(n)/2)+" "+wc(It.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+wc(It.internal.getWidth(n)/2)+" "+wc(It.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wc(It.internal.getWidth(n)/2)+" "+wc(It.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Cross.YesNormal,e.D[n]=It.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=It.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+vn(It.internal.getWidth(n)-2)+" "+vn(It.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(vn(s.x1.x)+" "+vn(s.x1.y)+" m"),t.push(vn(s.x2.x)+" "+vn(s.x2.y)+" l"),t.push(vn(s.x4.x)+" "+vn(s.x4.y)+" m"),t.push(vn(s.x3.x)+" "+vn(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=It.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+vn(It.internal.getWidth(n))+" "+vn(It.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+vn(It.internal.getWidth(n)-2)+" "+vn(It.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(vn(t.x1.x)+" "+vn(t.x1.y)+" m"),s.push(vn(t.x2.x)+" "+vn(t.x2.y)+" l"),s.push(vn(t.x4.x)+" "+vn(t.x4.y)+" m"),s.push(vn(t.x3.x)+" "+vn(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vn(It.internal.getWidth(n))+" "+vn(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};It.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=It.internal.getWidth(n),t=It.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},It.internal.getWidth=function(n){var e=0;return rr(n)==="object"&&(e=gx(n.Rect[2])),e},It.internal.getHeight=function(n){var e=0;return rr(n)==="object"&&(e=gx(n.Rect[3])),e};var LL=ts.addField=function(n){if(ML(this,n),!(n instanceof xo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ts.AcroFormChoiceField=Vh,ts.AcroFormListBox=Fh,ts.AcroFormComboBox=Bh,ts.AcroFormEditBox=Q1,ts.AcroFormButton=Hs,ts.AcroFormPushButton=J1,ts.AcroFormRadioButton=Ph,ts.AcroFormCheckBox=ep,ts.AcroFormTextField=yu,ts.AcroFormPasswordField=tp,ts.AcroFormAppearance=It,ts.AcroForm={ChoiceField:Vh,ListBox:Fh,ComboBox:Bh,EditBox:Q1,Button:Hs,PushButton:J1,RadioButton:Ph,CheckBox:ep,TextField:yu,PasswordField:tp,Appearance:It},Ut.AcroForm={ChoiceField:Vh,ListBox:Fh,ComboBox:Bh,EditBox:Q1,Button:Hs,PushButton:J1,RadioButton:Ph,CheckBox:ep,TextField:yu,PasswordField:tp,Appearance:It};Ut.AcroForm;function I4(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(j,I){var X,P,ae,Z,re,le=t;if((I=I||t)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(W(j))for(re in s)for(ae=s[re],X=0;X<ae.length;X+=1){for(Z=!0,P=0;P<ae[X].length;P+=1)if(ae[X][P]!==void 0&&ae[X][P]!==j[P]){Z=!1;break}if(Z===!0){le=re;break}}else for(re in s)for(ae=s[re],X=0;X<ae.length;X+=1){for(Z=!0,P=0;P<ae[X].length;P+=1)if(ae[X][P]!==void 0&&ae[X][P]!==j.charCodeAt(P)){Z=!1;break}if(Z===!0){le=re;break}}return le===t&&I!==t&&(le=I),le},o=function j(I){for(var X=this.internal.write,P=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:I.width}),Z.push({key:"Height",value:I.height}),I.colorSpace===T.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===T.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var re="",le=0,fe=I.transparency.length;le<fe;le++)re+=I.transparency[le]+" "+I.transparency[le]+" ";Z.push({key:"Mask",value:"["+re+"]"})}I.sMask!==void 0&&Z.push({key:"SMask",value:I.objectId+1+" 0 R"});var _e=I.filter!==void 0?["/"+I.filter]:void 0;if(P({data:I.data,additionalKeyValues:Z,alreadyAppliedFilters:_e,objectId:I.objectId}),X("endobj"),"sMask"in I&&I.sMask!==void 0){var z,E=(z=I.sMaskBitsPerComponent)!==null&&z!==void 0?z:I.bitsPerComponent,$={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:I.sMask};"filter"in I&&($.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(I.width),$.filter=I.filter),j.call(this,$)}if(I.colorSpace===T.INDEXED){var G=this.internal.newObject();P({data:L(new Uint8Array(I.palette)),objectId:G}),X("endobj")}},u=function(){var j=this.internal.collections[e+"images"];for(var I in j)o.call(this,j[I])},c=function(){var j,I=this.internal.collections[e+"images"],X=this.internal.write;for(var P in I)X("/I"+(j=I[P]).index,j.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var j=this.internal.collections[e+"images"];return h.call(this),j},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(j){return typeof n["process"+j.toUpperCase()]=="function"},_=function(j){return rr(j)==="object"&&j.nodeType===1},b=function(j,I){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var X=""+j.getAttribute("src");if(X.indexOf("data:image/")===0)return K1(unescape(X).split("base64,").pop());var P=n.loadFile(X,!0);if(P!==void 0)return P}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ae;switch(I){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return K1(j.toDataURL(ae,1).split("base64,").pop())}},A=function(j){var I=this.internal.collections[e+"images"];if(I){for(var X in I)if(j===I[X].alias)return I[X]}},N=function(j,I,X){return j||I||(j=-96,I=-96),j<0&&(j=-1*X.width*72/j/this.internal.scaleFactor),I<0&&(I=-1*X.height*72/I/this.internal.scaleFactor),j===0&&(j=I*X.width/X.height),I===0&&(I=j*X.height/X.width),[j,I]},k=function(j,I,X,P,ae,Z){var re=N.call(this,X,P,ae),le=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,_e=f.call(this);if(X=re[0],P=re[1],_e[ae.index]=ae,Z){Z*=Math.PI/180;var z=Math.cos(Z),E=Math.sin(Z),$=function(Q){return Q.toFixed(4)},G=[$(z),$(E),$(-1*E),$(z),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,le(j),fe(I+P),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([le(X),"0","0",le(P),"0","0","cm"].join(" "))):this.internal.write([le(X),"0","0",le(P),le(j),fe(I+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},T=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(j){var I,X,P=0;if(typeof j=="string")for(X=j.length,I=0;I<X;I++)P=(P<<5)-P+j.charCodeAt(I),P|=0;else if(W(j))for(X=j.byteLength/2,I=0;I<X;I++)P=(P<<5)-P+j[I],P|=0;return P},V=n.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var I=!0;return j.length===0&&(I=!1),j.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(I=!1),I},B=n.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var I=j.indexOf(",");return I<0?null:j.substring(0,I).trim().endsWith("base64")?j.substring(I+1):null};n.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(j){for(var I=j.length,X=new Uint8Array(I),P=0;P<I;P++)X[P]=j.charCodeAt(P);return X},L=n.__addimage__.arrayBufferToBinaryString=function(j){for(var I="",X=W(j)?j:new Uint8Array(j),P=0;P<X.length;P+=8192)I+=String.fromCharCode.apply(null,X.subarray(P,P+8192));return I};n.addImage=function(){var j,I,X,P,ae,Z,re,le,fe;if(typeof arguments[1]=="number"?(I=t,X=arguments[1],P=arguments[2],ae=arguments[3],Z=arguments[4],re=arguments[5],le=arguments[6],fe=arguments[7]):(I=arguments[1],X=arguments[2],P=arguments[3],ae=arguments[4],Z=arguments[5],re=arguments[6],le=arguments[7],fe=arguments[8]),rr(j=arguments[0])==="object"&&!_(j)&&"imageData"in j){var _e=j;j=_e.imageData,I=_e.format||I||t,X=_e.x||X||0,P=_e.y||P||0,ae=_e.w||_e.width||ae,Z=_e.h||_e.height||Z,re=_e.alias||re,le=_e.compression||le,fe=_e.rotation||_e.angle||fe}var z=this.internal.getFilters();if(le===void 0&&z.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(X)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var E=F.call(this,j,I,re,le);return k.call(this,X,P,ae,Z,E,fe),this};var F=function(j,I,X,P){var ae,Z,re;if(typeof j=="string"&&a(j)===t){j=unescape(j);var le=te(j,!1);(le!==""||(le=n.loadFile(j,!0))!==void 0)&&(j=le)}if(_(j)&&(j=b(j,I)),I=a(j,I),!y(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((re=X)==null||re.length===0)&&(X=(function(fe){return typeof fe=="string"||W(fe)?D(fe):W(fe.data)?D(fe.data):null})(j)),(ae=A.call(this,X))||(j instanceof Uint8Array||I==="RGBA"||(Z=j,j=H(j)),ae=this["process"+I.toUpperCase()](j,p.call(this),X,(function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in n.image_compression?fe:R.NONE})(P),Z)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},te=n.__addimage__.convertBase64ToBinaryString=function(j,I){I=typeof I!="boolean"||I;var X,P="";if(typeof j=="string"){var ae;X=(ae=B(j))!==null&&ae!==void 0?ae:j;try{P=K1(X)}catch(Z){if(I)throw V(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return P};n.getImageProperties=function(j){var I,X,P="";if(_(j)&&(j=b(j)),typeof j=="string"&&a(j)===t&&((P=te(j,!1))===""&&(P=n.loadFile(j)||""),j=P),X=a(j),!y(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(j instanceof Uint8Array||(j=H(j)),!(I=this["process"+X.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=X,I}})(Ut.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ut.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,y=0;y<f.length&&!p;y++)switch((s=f[y]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<f.length;_++){s=f[_];var b=this.internal.pdfEscape,A=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(N.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+b(T(s.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+b(T(R))+") >>",N.content=o;var D=N.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+D,s.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(N.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var V=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(A(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var B=this.annotations._nameMap[s.options.name];s.options.pageNumber=B.page,s.options.top=B.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(A(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var W=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+W+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(t),y:f(s),w:h(t+a),h:f(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,c,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(t,c).length;u=Math.ceil(f*p)}else c=h,u=f;return this.text(t,s,a,o),a+=.2*f,o.align==="center"&&(s-=h/2),o.align==="right"&&(s-=h),this.link(s,a-f,c,u,o),h},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(Ut.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=n.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&a.indexOf(N.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(N){var k=0,T=t,R="",D=0;for(k=0;k<N.length;k+=1)T[N.charCodeAt(k)]!==void 0?(D++,typeof(T=T[N.charCodeAt(k)])=="number"&&(R+=String.fromCharCode(T),T=t,D=0),k===N.length-1&&(T=t,R+=N.charAt(k-(D-1)),k-=D-1,D=0)):(T=t,R+=N.charAt(k-D),k-=D,D=0);return R};n.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&s[N.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(N,k,T){return u(N)?o(N)===!1?-1:!f(N)||!u(k)&&!u(T)||!u(T)&&c(k)||c(N)&&!u(k)||c(N)&&h(k)||c(N)&&c(k)?0:p(N)&&u(k)&&!c(k)&&u(T)&&f(T)?3:c(N)||!u(T)?1:2:-1},b=function(N){var k=0,T=0,R=0,D="",V="",B="",W=(N=N||"").split("\\s+"),H=[];for(k=0;k<W.length;k+=1){for(H.push(""),T=0;T<W[k].length;T+=1)D=W[k][T],V=W[k][T-1],B=W[k][T+1],u(D)?(R=_(D,V,B),H[k]+=R!==-1?String.fromCharCode(e[D.charCodeAt(0)][R]):D):H[k]+=D;H[k]=y(H[k])}return H.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var N,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var R=0;for(T=[],R=0;R<k.length;R+=1)Array.isArray(k[R])?T.push([b(k[R][0]),k[R][1],k[R][2]]):T.push([b(k[R])]);N=T}else N=b(k);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};n.events.push(["preProcessText",A])})(Ut.API),Ut.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ut.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(N){_=N}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(N){A=N}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return s.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){s.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),_=f.scaleFactor||this.internal.scaleFactor,b=0,A=0,N=0,k=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var T=f.maxWidth;T>0?typeof h=="string"?h=this.splitTextToSize(h,T):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(D,V){return D.concat(k.splitTextToSize(V,T))},[])):h=Array.isArray(h)?h:[h];for(var R=0;R<h.length;R++)b<(N=this.getStringUnitWidth(h[R],{font:y})*p)&&(b=N);return b!==0&&(A=h.length),{w:b/=_,h:Math.max((A*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,y,_){if(s.call(this),!p)throw new Error("No data for PDF table.");var b,A,N,k,T=[],R=[],D=[],V={},B={},W=[],H=[],L=(_=_||{}).autoSize||!1,F=_.printHeaders!==!1,te=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,j=_.margins||Object.assign({width:this.getPageWidth()},e),I=typeof _.padding=="number"?_.padding:3,X=_.headerBackgroundColor||"#c8c8c8",P=_.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=te,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=P,this.setFontSize(te),y==null)R=T=Object.keys(p[0]),D=T.map(function(){return"left"});else if(Array.isArray(y)&&rr(y[0])==="object")for(T=y.map(function(_e){return _e.name}),R=y.map(function(_e){return _e.prompt||_e.name||""}),D=y.map(function(_e){return _e.align||"left"}),b=0;b<y.length;b+=1)B[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(R=T=y,D=T.map(function(){return"left"}));if(L||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<T.length;b+=1){for(V[k=T[b]]=p.map(function(_e){return _e[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=V[k],this.setFont(void 0,"normal"),N=0;N<A.length;N+=1)W.push(this.getTextDimensions(A[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[k]=Math.max.apply(null,W)+I+I,W=[]}if(F){var ae={};for(b=0;b<T.length;b+=1)ae[T[b]]={},ae[T[b]].text=R[b],ae[T[b]].align=D[b];var Z=c.call(this,ae,B);H=T.map(function(_e){return new o(h,f,B[_e],Z,ae[_e].text,void 0,ae[_e].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var re=y.reduce(function(_e,z){return _e[z.name]=z.align,_e},{});for(b=0;b<p.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:p[b]},this);var le=c.call(this,p[b],B);for(N=0;N<T.length;N+=1){var fe=p[b][T[N]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:N,data:fe},this),u.call(this,new o(h,f,B[T[N]],le,fe,b+2,re[T[N]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var c=function(h,f){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(b){var A=h[b];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+p+p},this).reduce(function(b,A){return Math.max(b,A)},0)};n.setTableHeaderRow=function(h){s.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,p),this.setTextColor(A)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(Ut.API);var V4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},F4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fg=I4(F4),B4=[100,200,300,400,500,600,700,800,900],OL=I4(B4);function Jm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return V4[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Fg[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function bx(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var DL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yx(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function xx(n){return n.trimLeft()}function RL(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function IL(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var U1,wx,_x,_h,H1,Sx,Nx,Ax,eg=["times"];function Cx(n,e,t,s,a){var o=4,u=kx;switch(a){case Ut.API.image_compression.FAST:o=1,u=Tx;break;case Ut.API.image_compression.MEDIUM:o=6,u=jx;break;case Ut.API.image_compression.SLOW:o=9,u=Ex}n=(function(h,f,p,y){for(var _,b=h.length/f,A=new Uint8Array(h.length+b),N=[VL,Tx,kx,jx,Ex],k=0;k<b;k+=1){var T=k*f,R=h.subarray(T,T+f);if(y)A.set(y(R,p,_),T+k);else{for(var D=N.length,V=[],B=0;B<D;B+=1)V[B]=N[B](R,p,_);var W=BL(V.concat());A.set(V[W],T+k)}_=R}return A})(n,e,Math.ceil(t*s/8),u);var c=Mg(n,{level:o});return Ut.API.__addimage__.arrayBufferToBinaryString(c)}function VL(n){var e=Array.apply([],n);return e.unshift(0),e}function Tx(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function kx(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function jx(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,c=t&&t[o]||0;a[o+1]=n[o]+256-(u+c>>>1)&255}return a}function Ex(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=FL(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function FL(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function BL(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function tg(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return P4(n,a)>>o&u}function Mx(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),c=(1<<s)-1,h=(e&c)<<u;(function(f,p,y){if(p+1<f.byteLength)f.setUint16(p,y,!1);else{var _=y>>8&255;f.setUint8(p,_)}})(n,o,P4(n,o)&~(c<<u)&65535|h)}function P4(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function PL(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var c=null,h=null;o&&(c=e,h=u,e+=3*u);var f=!0,p=[],y=0,_=null,b=0,A=null;for(this.width=t,this.height=s;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,A=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=n[e++];y=n[e++]|n[e++]<<8,_=n[e++],1&N||(_=null),b=N>>2&7,e++;break;case 254:for(;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,V=n[e++],B=V>>6&1,W=1<<1+(7&V),H=c,L=h,F=!1;V>>7&&(F=!0,H=e,L=W,e+=3*W);var te=e;for(e++;;){var j;if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}p.push({x:k,y:T,width:R,height:D,has_local_palette:F,palette_offset:H,palette_size:L,data_offset:te,data_length:e-te,transparent_index:_,interlaced:!!B,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(I){if(I<0||I>=p.length)throw new Error("Frame index out of range.");return p[I]},this.decodeAndBlitFrameBGRA=function(I,X){var P=this.frameInfo(I),ae=P.width*P.height,Z=new Uint8Array(ae);Lx(n,P.data_offset,Z,ae);var re=P.palette_offset,le=P.transparent_index;le===null&&(le=256);var fe=P.width,_e=t-fe,z=fe,E=4*(P.y*t+P.x),$=4*((P.y+P.height)*t+P.x),G=E,Q=4*_e;P.interlaced===!0&&(Q+=4*t*7);for(var ie=8,pe=0,de=Z.length;pe<de;++pe){var ye=Z[pe];if(z===0&&(z=fe,(G+=Q)>=$&&(Q=4*_e+4*t*(ie-1),G=E+(fe+_e)*(ie<<1),ie>>=1)),ye===le)G+=4;else{var Se=n[re+3*ye],Be=n[re+3*ye+1],Qe=n[re+3*ye+2];X[G++]=Qe,X[G++]=Be,X[G++]=Se,X[G++]=255}--z}},this.decodeAndBlitFrameRGBA=function(I,X){var P=this.frameInfo(I),ae=P.width*P.height,Z=new Uint8Array(ae);Lx(n,P.data_offset,Z,ae);var re=P.palette_offset,le=P.transparent_index;le===null&&(le=256);var fe=P.width,_e=t-fe,z=fe,E=4*(P.y*t+P.x),$=4*((P.y+P.height)*t+P.x),G=E,Q=4*_e;P.interlaced===!0&&(Q+=4*t*7);for(var ie=8,pe=0,de=Z.length;pe<de;++pe){var ye=Z[pe];if(z===0&&(z=fe,(G+=Q)>=$&&(Q=4*_e+4*t*(ie-1),G=E+(fe+_e)*(ie<<1),ie>>=1)),ye===le)G+=4;else{var Se=n[re+3*ye],Be=n[re+3*ye+1],Qe=n[re+3*ye+2];X[G++]=Se,X[G++]=Be,X[G++]=Qe,X[G++]=255}--z}}}function Lx(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,c=u+1,h=a+1,f=(1<<h)-1,p=0,y=0,_=0,b=n[e++],A=new Int32Array(4096),N=null;;){for(;p<16&&b!==0;)y|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<h)break;var k=y&f;if(y>>=h,p-=h,k!==o){if(k===u)break;for(var T=k<c?k:N,R=0,D=T;D>o;)D=A[D]>>8,++R;var V=D;if(_+R+(T!==k?1:0)>s)return void gr.log("Warning, gif stream longer than expected.");t[_++]=V;var B=_+=R;for(T!==k&&(t[_++]=V),D=T;R--;)D=A[D],t[--B]=255&D,D>>=8;N!==null&&c<4096&&(A[c++]=N<<8|V,c>=f+1&&h<12&&(++h,f=f<<1|1)),N=k}else c=u+1,f=(1<<(h=a+1))-1,N=null}return _!==s&&gr.log("Warning, gif stream shorter than expected."),t}function ng(n){var e,t,s,a,o,u=Math.floor,c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),A=new Array(64),N=[],k=0,T=7,R=new Array(64),D=new Array(64),V=new Array(64),B=new Array(256),W=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(E,$){for(var G=0,Q=0,ie=new Array,pe=1;pe<=16;pe++){for(var de=1;de<=E[pe];de++)ie[$[Q]]=[],ie[$[Q]][0]=G,ie[$[Q]][1]=pe,Q++,G++;G*=2}return ie}function re(E){for(var $=E[0],G=E[1]-1;G>=0;)$&1<<G&&(k|=1<<T),G--,--T<0&&(k==255?(le(255),le(0)):le(k),T=7,k=0)}function le(E){N.push(E)}function fe(E){le(E>>8&255),le(255&E)}function _e(E,$,G,Q,ie){for(var pe,de=ie[0],ye=ie[240],Se=(function(Re,it){var qe,ht,Te,tt,bt,mt,st,dt,gt,Nt,Ee=0;for(gt=0;gt<8;++gt){qe=Re[Ee],ht=Re[Ee+1],Te=Re[Ee+2],tt=Re[Ee+3],bt=Re[Ee+4],mt=Re[Ee+5],st=Re[Ee+6];var ft=qe+(dt=Re[Ee+7]),ut=qe-dt,We=ht+st,at=ht-st,xt=Te+mt,ct=Te-mt,nn=tt+bt,jt=tt-bt,Ft=ft+nn,en=ft-nn,At=We+xt,wt=We-xt;Re[Ee]=Ft+At,Re[Ee+4]=Ft-At;var qt=.707106781*(wt+en);Re[Ee+2]=en+qt,Re[Ee+6]=en-qt;var wn=.382683433*((Ft=jt+ct)-(wt=at+ut)),Me=.5411961*Ft+wn,yt=1.306562965*wt+wn,we=.707106781*(At=ct+at),Ve=ut+we,pt=ut-we;Re[Ee+5]=pt+Me,Re[Ee+3]=pt-Me,Re[Ee+1]=Ve+yt,Re[Ee+7]=Ve-yt,Ee+=8}for(Ee=0,gt=0;gt<8;++gt){qe=Re[Ee],ht=Re[Ee+8],Te=Re[Ee+16],tt=Re[Ee+24],bt=Re[Ee+32],mt=Re[Ee+40],st=Re[Ee+48];var Et=qe+(dt=Re[Ee+56]),Bt=qe-dt,sn=ht+st,Yt=ht-st,dn=Te+mt,fn=Te-mt,Jn=tt+bt,Gn=tt-bt,Sn=Et+Jn,an=Et-Jn,$n=sn+dn,Er=sn-dn;Re[Ee]=Sn+$n,Re[Ee+32]=Sn-$n;var us=.707106781*(Er+an);Re[Ee+16]=an+us,Re[Ee+48]=an-us;var je=.382683433*((Sn=Gn+fn)-(Er=Yt+Bt)),Pe=.5411961*Sn+je,Ze=1.306562965*Er+je,Ct=.707106781*($n=fn+Yt),St=Bt+Ct,Mt=Bt-Ct;Re[Ee+40]=Mt+Pe,Re[Ee+24]=Mt-Pe,Re[Ee+8]=St+Ze,Re[Ee+56]=St-Ze,Ee++}for(gt=0;gt<64;++gt)Nt=Re[gt]*it[gt],b[gt]=Nt>0?Nt+.5|0:Nt-.5|0;return b})(E,$),Be=0;Be<64;++Be)A[H[Be]]=Se[Be];var Qe=A[0]-G;G=A[0],Qe==0?re(Q[0]):(re(Q[_[pe=32767+Qe]]),re(y[pe]));for(var Xe=63;Xe>0&&A[Xe]==0;)Xe--;if(Xe==0)return re(de),G;for(var ot,Y=1;Y<=Xe;){for(var Ie=Y;A[Y]==0&&Y<=Xe;)++Y;var vt=Y-Ie;if(vt>=16){ot=vt>>4;for(var et=1;et<=ot;++et)re(ye);vt&=15}pe=32767+A[Y],re(ie[(vt<<4)+_[pe]]),re(y[pe]),Y++}return Xe!=63&&re(de),G}function z(E){E=Math.min(Math.max(E,1),100),o!=E&&((function($){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ie=u((G[Q]*$+50)/100);ie=Math.min(Math.max(ie,1),255),c[H[Q]]=ie}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var ye=u((pe[de]*$+50)/100);ye=Math.min(Math.max(ye,1),255),h[H[de]]=ye}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Qe=0;Qe<8;Qe++)for(var Xe=0;Xe<8;Xe++)f[Be]=1/(c[H[Be]]*Se[Qe]*Se[Xe]*8),p[Be]=1/(h[H[Be]]*Se[Qe]*Se[Xe]*8),Be++})(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),o=E)}this.encode=function(E,$){$&&z($),N=new Array,k=0,T=7,fe(65496),fe(65504),fe(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),fe(1),fe(1),le(0),le(0),(function(){fe(65499),fe(132),le(0);for(var ht=0;ht<64;ht++)le(c[ht]);le(1);for(var Te=0;Te<64;Te++)le(h[Te])})(),(function(ht,Te){fe(65472),fe(17),le(8),fe(Te),fe(ht),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)})(E.width,E.height),(function(){fe(65476),fe(418),le(0);for(var ht=0;ht<16;ht++)le(L[ht+1]);for(var Te=0;Te<=11;Te++)le(F[Te]);le(16);for(var tt=0;tt<16;tt++)le(te[tt+1]);for(var bt=0;bt<=161;bt++)le(j[bt]);le(1);for(var mt=0;mt<16;mt++)le(I[mt+1]);for(var st=0;st<=11;st++)le(X[st]);le(17);for(var dt=0;dt<16;dt++)le(P[dt+1]);for(var gt=0;gt<=161;gt++)le(ae[gt])})(),fe(65498),fe(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var G=0,Q=0,ie=0;k=0,T=7,this.encode.displayName="_encode_";for(var pe,de,ye,Se,Be,Qe,Xe,ot,Y,Ie=E.data,vt=E.width,et=E.height,Re=4*vt,it=0;it<et;){for(pe=0;pe<Re;){for(Be=Re*it+pe,Xe=-1,ot=0,Y=0;Y<64;Y++)Qe=Be+(ot=Y>>3)*Re+(Xe=4*(7&Y)),it+ot>=et&&(Qe-=Re*(it+1+ot-et)),pe+Xe>=Re&&(Qe-=pe+Xe-Re+4),de=Ie[Qe++],ye=Ie[Qe++],Se=Ie[Qe++],R[Y]=(W[de]+W[ye+256|0]+W[Se+512|0]>>16)-128,D[Y]=(W[de+768|0]+W[ye+1024|0]+W[Se+1280|0]>>16)-128,V[Y]=(W[de+1280|0]+W[ye+1536|0]+W[Se+1792|0]>>16)-128;G=_e(R,f,G,e,s),Q=_e(D,p,Q,t,a),ie=_e(V,p,ie,t,a),pe+=32}it+=8}if(T>=0){var qe=[];qe[1]=T+1,qe[0]=(1<<T+1)-1,re(qe)}return fe(65497),new Uint8Array(N)},n=n||50,(function(){for(var E=String.fromCharCode,$=0;$<256;$++)B[$]=E($)})(),e=Z(L,F),t=Z(I,X),s=Z(te,j),a=Z(P,ae),(function(){for(var E=1,$=2,G=1;G<=15;G++){for(var Q=E;Q<$;Q++)_[32767+Q]=G,y[32767+Q]=[],y[32767+Q][1]=G,y[32767+Q][0]=Q;for(var ie=-($-1);ie<=-E;ie++)_[32767+ie]=G,y[32767+ie]=[],y[32767+ie][1]=G,y[32767+ie][0]=$-1+ie;E<<=1,$<<=1}})(),(function(){for(var E=0;E<256;E++)W[E]=19595*E,W[E+256|0]=38470*E,W[E+512|0]=7471*E+32768,W[E+768|0]=-11059*E,W[E+1024|0]=-21709*E,W[E+1280|0]=32768*E+8421375,W[E+1536|0]=-27439*E,W[E+1792|0]=-5329*E})(),z(n)}function io(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ox(n){function e(F){if(!F)throw Error("assert :P")}function t(F,te,j){for(var I=0;4>I;I++)if(F[te+I]!=j.charCodeAt(I))return!0;return!1}function s(F,te,j,I,X){for(var P=0;P<X;P++)F[te+P]=j[I+P]}function a(F,te,j,I){for(var X=0;X<I;X++)F[te+X]=j}function o(F){return new Int32Array(F)}function u(F,te){for(var j=[],I=0;I<F;I++)j.push(new te);return j}function c(F,te){var j=[];return(function I(X,P,ae){for(var Z=ae[P],re=0;re<Z&&(X.push(ae.length>P+1?[]:new te),!(ae.length<P+1));re++)I(X[re],P+1,ae)})(j,0,F),j}var h=function(){var F=this;function te(m,x){for(var C=1<<x-1>>>0;m&C;)C>>>=1;return C?(m&C-1)+C:m}function j(m,x,C,M,U){e(!(M%C));do m[x+(M-=C)]=U;while(0<M)}function I(m,x,C,M,U){if(e(2328>=U),512>=U)var K=o(512);else if((K=o(U))==null)return 0;return(function(J,se,oe,ue,be,Le){var ce,xe,Ce=se,He=1<<oe,ke=o(16),Ue=o(16);for(e(be!=0),e(ue!=null),e(J!=null),e(0<oe),xe=0;xe<be;++xe){if(15<ue[xe])return 0;++ke[ue[xe]]}if(ke[0]==be)return 0;for(Ue[1]=0,ce=1;15>ce;++ce){if(ke[ce]>1<<ce)return 0;Ue[ce+1]=Ue[ce]+ke[ce]}for(xe=0;xe<be;++xe)ce=ue[xe],0<ue[xe]&&(Le[Ue[ce]++]=xe);if(Ue[15]==1)return(ue=new X).g=0,ue.value=Le[0],j(J,Ce,1,He,ue),He;var Ye,lt=-1,nt=He-1,Rt=0,Tt=1,ln=1,Lt=1<<oe;for(xe=0,ce=1,be=2;ce<=oe;++ce,be<<=1){if(Tt+=ln<<=1,0>(ln-=ke[ce]))return 0;for(;0<ke[ce];--ke[ce])(ue=new X).g=ce,ue.value=Le[xe++],j(J,Ce+Rt,be,Lt,ue),Rt=te(Rt,ce)}for(ce=oe+1,be=2;15>=ce;++ce,be<<=1){if(Tt+=ln<<=1,0>(ln-=ke[ce]))return 0;for(;0<ke[ce];--ke[ce]){if(ue=new X,(Rt&nt)!=lt){for(Ce+=Lt,Ye=1<<(lt=ce)-oe;15>lt&&!(0>=(Ye-=ke[lt]));)++lt,Ye<<=1;He+=Lt=1<<(Ye=lt-oe),J[se+(lt=Rt&nt)].g=Ye+oe,J[se+lt].value=Ce-se-lt}ue.g=ce-oe,ue.value=Le[xe++],j(J,Ce+(Rt>>oe),be,Lt,ue),Rt=te(Rt,ce)}}return Tt!=2*Ue[15]-1?0:He})(m,x,C,M,U,K)}function X(){this.value=this.g=0}function P(){this.value=this.g=0}function ae(){this.G=u(5,X),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(To,P)}function Z(m,x,C,M){e(m!=null),e(x!=null),e(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=x,m.pa=C,m.Jd=x,m.Yc=C+M,m.Zc=4<=M?C+M-4+1:C,de(m)}function re(m,x){for(var C=0;0<x--;)C|=Se(m,128)<<x;return C}function le(m,x){var C=re(m,x);return ye(m)?-C:C}function fe(m,x,C,M){var U,K=0;for(e(m!=null),e(x!=null),e(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),U=0;U<M;++U)K+=x[C+U]<<8*U;m.Ra=K,m.bb=M,m.oa=x,m.pa=C}function _e(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<va-8>>>0,++m.bb,m.u-=8;Q(m)&&(m.h=1,m.u=0)}function z(m,x){if(e(0<=x),!m.h&&x<=Xs){var C=G(m)&si[x];return m.u+=x,_e(m),C}return m.h=1,m.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(m){return m.Ra>>>(m.u&va-1)>>>0}function Q(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>va}function ie(m,x){m.u=x,m.h=Q(m)}function pe(m){m.u>=ya&&(e(m.u>=ya),_e(m))}function de(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ye(m){return re(m,1)}function Se(m,x){var C=m.Ca;0>m.b&&de(m);var M=m.b,U=C*x>>>8,K=(m.I>>>M>U)+0;for(K?(C-=U,m.I-=U+1<<M>>>0):C=U+1,M=C,U=0;256<=M;)U+=8,M>>=8;return M=7^U+Ga[M],m.b-=M,m.Ca=(C<<M)-1,K}function Be(m,x,C){m[x+0]=C>>24&255,m[x+1]=C>>16&255,m[x+2]=C>>8&255,m[x+3]=255&C}function Qe(m,x){return m[x+0]|m[x+1]<<8}function Xe(m,x){return Qe(m,x)|m[x+2]<<16}function ot(m,x){return Qe(m,x)|Qe(m,x+2)<<16}function Y(m,x){var C=1<<x;return e(m!=null),e(0<x),m.X=o(C),m.X==null?0:(m.Mb=32-x,m.Xa=x,1)}function Ie(m,x){e(m!=null),e(x!=null),e(m.Xa==x.Xa),s(x.X,0,m.X,0,1<<x.Xa)}function vt(){this.X=[],this.Xa=this.Mb=0}function et(m,x,C,M){e(C!=null),e(M!=null);var U=C[0],K=M[0];return U==0&&(U=(m*K+x/2)/x),K==0&&(K=(x*U+m/2)/m),0>=U||0>=K?0:(C[0]=U,M[0]=K,1)}function Re(m,x){return m+(1<<x)-1>>>x}function it(m,x){return((4278255360&m)+(4278255360&x)>>>0&4278255360)+((16711935&m)+(16711935&x)>>>0&16711935)>>>0}function qe(m,x){F[x]=function(C,M,U,K,J,se,oe){var ue;for(ue=0;ue<J;++ue){var be=F[m](se[oe+ue-1],U,K+ue);se[oe+ue]=it(C[M+ue],be)}}}function ht(){this.ud=this.hd=this.jd=0}function Te(m,x){return((4278124286&(m^x))>>>1)+(m&x)>>>0}function tt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function bt(m,x){return tt(m+(m-x+.5>>1))}function mt(m,x,C){return Math.abs(x-C)-Math.abs(m-C)}function st(m,x,C,M,U,K,J){for(M=K[J-1],C=0;C<U;++C)K[J+C]=M=it(m[x+C],M)}function dt(m,x,C,M,U){var K;for(K=0;K<C;++K){var J=m[x+K],se=J>>8&255,oe=16711935&(oe=(oe=16711935&J)+((se<<16)+se));M[U+K]=(4278255360&J)+oe>>>0}}function gt(m,x){x.jd=255&m,x.hd=m>>8&255,x.ud=m>>16&255}function Nt(m,x,C,M,U,K){var J;for(J=0;J<M;++J){var se=x[C+J],oe=se>>>8,ue=se,be=255&(be=(be=se>>>16)+((m.jd<<24>>24)*(oe<<24>>24)>>>5));ue=255&(ue=(ue+=(m.hd<<24>>24)*(oe<<24>>24)>>>5)+((m.ud<<24>>24)*(be<<24>>24)>>>5)),U[K+J]=(4278255360&se)+(be<<16)+ue}}function Ee(m,x,C,M,U){F[x]=function(K,J,se,oe,ue,be,Le,ce,xe){for(oe=Le;oe<ce;++oe)for(Le=0;Le<xe;++Le)ue[be++]=U(se[M(K[J++])])},F[m]=function(K,J,se,oe,ue,be,Le){var ce=8>>K.b,xe=K.Ea,Ce=K.K[0],He=K.w;if(8>ce)for(K=(1<<K.b)-1,He=(1<<ce)-1;J<se;++J){var ke,Ue=0;for(ke=0;ke<xe;++ke)ke&K||(Ue=M(oe[ue++])),be[Le++]=U(Ce[Ue&He]),Ue>>=ce}else F["VP8LMapColor"+C](oe,ue,Ce,He,be,Le,J,se,xe)}}function ft(m,x,C,M,U){for(C=x+C;x<C;){var K=m[x++];M[U++]=K>>16&255,M[U++]=K>>8&255,M[U++]=255&K}}function ut(m,x,C,M,U){for(C=x+C;x<C;){var K=m[x++];M[U++]=K>>16&255,M[U++]=K>>8&255,M[U++]=255&K,M[U++]=K>>24&255}}function We(m,x,C,M,U){for(C=x+C;x<C;){var K=(J=m[x++])>>16&240|J>>12&15,J=240&J|J>>28&15;M[U++]=K,M[U++]=J}}function at(m,x,C,M,U){for(C=x+C;x<C;){var K=(J=m[x++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;M[U++]=K,M[U++]=J}}function xt(m,x,C,M,U){for(C=x+C;x<C;){var K=m[x++];M[U++]=255&K,M[U++]=K>>8&255,M[U++]=K>>16&255}}function ct(m,x,C,M,U,K){if(K==0)for(C=x+C;x<C;)Be(M,((K=m[x++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),U+=32;else s(M,U,m,x,C)}function nn(m,x){F[x][0]=F[m+"0"],F[x][1]=F[m+"1"],F[x][2]=F[m+"2"],F[x][3]=F[m+"3"],F[x][4]=F[m+"4"],F[x][5]=F[m+"5"],F[x][6]=F[m+"6"],F[x][7]=F[m+"7"],F[x][8]=F[m+"8"],F[x][9]=F[m+"9"],F[x][10]=F[m+"10"],F[x][11]=F[m+"11"],F[x][12]=F[m+"12"],F[x][13]=F[m+"13"],F[x][14]=F[m+"0"],F[x][15]=F[m+"0"]}function jt(m){return m==Jc||m==Wu||m==Kl||m==Gu}function Ft(){this.eb=[],this.size=this.A=this.fb=0}function en(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function At(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ft,this.f.kb=new en,this.sd=null}function wt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wn(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Me(m,x){var C=m.T,M=x.ba.f.RGBA,U=M.eb,K=M.fb+m.ka*M.A,J=ks[x.ba.S],se=m.y,oe=m.O,ue=m.f,be=m.N,Le=m.ea,ce=m.W,xe=x.cc,Ce=x.dc,He=x.Mc,ke=x.Nc,Ue=m.ka,Ye=m.ka+m.T,lt=m.U,nt=lt+1>>1;for(Ue==0?J(se,oe,null,null,ue,be,Le,ce,ue,be,Le,ce,U,K,null,null,lt):(J(x.ec,x.fc,se,oe,xe,Ce,He,ke,ue,be,Le,ce,U,K-M.A,U,K,lt),++C);Ue+2<Ye;Ue+=2)xe=ue,Ce=be,He=Le,ke=ce,be+=m.Rc,ce+=m.Rc,K+=2*M.A,J(se,(oe+=2*m.fa)-m.fa,se,oe,xe,Ce,He,ke,ue,be,Le,ce,U,K-M.A,U,K,lt);return oe+=m.fa,m.j+Ye<m.o?(s(x.ec,x.fc,se,oe,lt),s(x.cc,x.dc,ue,be,nt),s(x.Mc,x.Nc,Le,ce,nt),C--):1&Ye||J(se,oe,null,null,ue,be,Le,ce,ue,be,Le,ce,U,K+M.A,null,null,lt),C}function yt(m,x,C){var M=m.F,U=[m.J];if(M!=null){var K=m.U,J=x.ba.S,se=J==Qc||J==Kl;x=x.ba.f.RGBA;var oe=[0],ue=m.ka;oe[0]=m.T,m.Kb&&(ue==0?--oe[0]:(--ue,U[0]-=m.width),m.j+m.ka+m.T==m.o&&(oe[0]=m.o-m.j-ue));var be=x.eb;ue=x.fb+ue*x.A,m=Yc(M,U[0],m.width,K,oe,be,ue+(se?0:3),x.A),e(C==oe),m&&jt(J)&&ll(be,ue,se,K,oe,x.A)}return 0}function we(m){var x=m.ma,C=x.ba.S,M=11>C,U=C==Vs||C==ki||C==Qc||C==Zl||C==12||jt(C);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Wa(x.Oa,m,U?11:12))return 0;if(U&&jt(C)&&Hc(),m.da)alert("todo:use_scaling");else{if(M){if(x.Ib=wn,m.Kb){if(C=m.U+1>>1,x.memory=o(m.U+2*C),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+m.U,x.Mc=x.cc,x.Nc=x.dc+C,x.Ib=Me,Hc()}}else alert("todo:EmitYUV");U&&(x.Jb=yt,M&&Qi())}if(M&&!Do){for(m=0;256>m;++m)js[m]=89858*(m-128)+ec>>Di,d0[m]=-22014*(m-128)+ec,zf[m]=-45773*(m-128),Ku[m]=113618*(m-128)+ec>>Di;for(m=dl;m<Oo;++m)x=76283*(m-16)+ec>>Di,f0[m-dl]=Pr(x,255),p0[m-dl]=Pr(x+8>>4,15);Do=1}return 1}function Ve(m){var x=m.ma,C=m.U,M=m.T;return e(!(1&m.ka)),0>=C||0>=M?0:(C=x.Ib(m,x),x.Jb!=null&&x.Jb(m,x,C),x.Dc+=C,1)}function pt(m){m.ma.memory=null}function Et(m,x,C,M){return z(m,8)!=47?0:(x[0]=z(m,14)+1,C[0]=z(m,14)+1,M[0]=z(m,1),z(m,3)!=0?0:!m.h)}function Bt(m,x){if(4>m)return m+1;var C=m-2>>1;return(2+(1&m)<<C)+z(x,C)+1}function sn(m,x){return 120<x?x-120:1<=(C=((C=Ei[x-1])>>4)*m+(8-(15&C)))?C:1;var C}function Yt(m,x,C){var M=G(C),U=m[x+=255&M].g-8;return 0<U&&(ie(C,C.u+8),M=G(C),x+=m[x].value,x+=M&(1<<U)-1),ie(C,C.u+m[x].g),m[x].value}function dn(m,x,C){return C.g+=m.g,C.value+=m.value<<x>>>0,e(8>=C.g),m.g}function fn(m,x,C){var M=m.xc;return e((x=M==0?0:m.vc[m.md*(C>>M)+(x>>M)])<m.Wb),m.Ya[x]}function Jn(m,x,C,M){var U=m.ab,K=m.c*x,J=m.C;x=J+x;var se=C,oe=M;for(M=m.Ta,C=m.Ua;0<U--;){var ue=m.gc[U],be=J,Le=x,ce=se,xe=oe,Ce=(oe=M,se=C,ue.Ea);switch(e(be<Le),e(Le<=ue.nc),ue.hc){case 2:Ur(ce,xe,(Le-be)*Ce,oe,se);break;case 0:var He=be,ke=Le,Ue=oe,Ye=se,lt=(Lt=ue).Ea;He==0&&(Gl(ce,xe,null,null,1,Ue,Ye),st(ce,xe+1,0,0,lt-1,Ue,Ye+1),xe+=lt,Ye+=lt,++He);for(var nt=1<<Lt.b,Rt=nt-1,Tt=Re(lt,Lt.b),ln=Lt.K,Lt=Lt.w+(He>>Lt.b)*Tt;He<ke;){var kn=ln,pr=Lt,gn=1;for($l(ce,xe,Ue,Ye-lt,1,Ue,Ye);gn<lt;){var kt=(gn&~Rt)+nt;kt>lt&&(kt=lt),(0,$a[kn[pr++]>>8&15])(ce,xe+ +gn,Ue,Ye+gn-lt,kt-gn,Ue,Ye+gn),gn=kt}xe+=lt,Ye+=lt,++He&Rt||(Lt+=Tt)}Le!=ue.nc&&s(oe,se-Ce,oe,se+(Le-be-1)*Ce,Ce);break;case 1:for(Ce=ce,ke=xe,lt=(ce=ue.Ea)-(Ye=ce&~(Ue=(xe=1<<ue.b)-1)),He=Re(ce,ue.b),nt=ue.K,ue=ue.w+(be>>ue.b)*He;be<Le;){for(Rt=nt,Tt=ue,ln=new ht,Lt=ke+Ye,kn=ke+ce;ke<Lt;)gt(Rt[Tt++],ln),Yl(ln,Ce,ke,xe,oe,se),ke+=xe,se+=xe;ke<kn&&(gt(Rt[Tt++],ln),Yl(ln,Ce,ke,lt,oe,se),ke+=lt,se+=lt),++be&Ue||(ue+=He)}break;case 3:if(ce==oe&&xe==se&&0<ue.b){for(ke=oe,ce=Ce=se+(Le-be)*Ce-(Ye=(Le-be)*Re(ue.Ea,ue.b)),xe=oe,Ue=se,He=[],Ye=(lt=Ye)-1;0<=Ye;--Ye)He[Ye]=xe[Ue+Ye];for(Ye=lt-1;0<=Ye;--Ye)ke[ce+Ye]=He[Ye];Pu(ue,be,Le,oe,Ce,oe,se)}else Pu(ue,be,Le,ce,xe,oe,se)}se=M,oe=C}oe!=C&&s(M,C,se,oe,K)}function Gn(m,x){var C=m.V,M=m.Ba+m.c*m.C,U=x-m.C;if(e(x<=m.l.o),e(16>=U),0<U){var K=m.l,J=m.Ta,se=m.Ua,oe=K.width;if(Jn(m,U,C,M),U=se=[se],e((C=m.C)<(M=x)),e(K.v<K.va),M>K.o&&(M=K.o),C<K.j){var ue=K.j-C;C=K.j,U[0]+=ue*oe}if(C>=M?C=0:(U[0]+=4*K.v,K.ka=C-K.j,K.U=K.va-K.v,K.T=M-C,C=1),C){if(se=se[0],11>(C=m.ca).S){var be=C.f.RGBA,Le=(M=C.S,U=K.U,K=K.T,ue=be.eb,be.A),ce=K;for(be=be.fb+m.Ma*be.A;0<ce--;){var xe=J,Ce=se,He=U,ke=ue,Ue=be;switch(M){case Uu:Xl(xe,Ce,He,ke,Ue);break;case Vs:Ya(xe,Ce,He,ke,Ue);break;case Jc:Ya(xe,Ce,He,ke,Ue),ll(ke,Ue,0,He,1,0);break;case Hu:al(xe,Ce,He,ke,Ue);break;case ki:ct(xe,Ce,He,ke,Ue,1);break;case Wu:ct(xe,Ce,He,ke,Ue,1),ll(ke,Ue,0,He,1,0);break;case Qc:ct(xe,Ce,He,ke,Ue,0);break;case Kl:ct(xe,Ce,He,ke,Ue,0),ll(ke,Ue,1,He,1,0);break;case Zl:Xa(xe,Ce,He,ke,Ue);break;case Gu:Xa(xe,Ce,He,ke,Ue),Ti(ke,Ue,He,1,0);break;case ko:_a(xe,Ce,He,ke,Ue);break;default:e(0)}se+=oe,be+=Le}m.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=C.height)}}m.C=x,e(m.C<=m.i)}function Sn(m){var x;if(0<m.ua)return 0;for(x=0;x<m.Wb;++x){var C=m.Ya[x].G,M=m.Ya[x].H;if(0<C[1][M[1]+0].g||0<C[2][M[2]+0].g||0<C[3][M[3]+0].g)return 0}return 1}function an(m,x,C,M,U,K){if(m.Z!=0){var J=m.qd,se=m.rd;for(e(Qa[m.Z]!=null);x<C;++x)Qa[m.Z](J,se,M,U,M,U,K),J=M,se=U,U+=K;m.qd=J,m.rd=se}}function $n(m,x){var C=m.l.ma,M=C.Z==0||C.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,e(x<=m.l.o),x>M){var U=m.l.width,K=C.ca,J=C.tb+U*M,se=m.V,oe=m.Ba+m.c*M,ue=m.gc;e(m.ab==1),e(ue[0].hc==3),wa(ue[0],M,x,se,oe,K,J),an(C,M,x,K,J,U)}m.C=m.Ma=x}function Er(m,x,C,M,U,K,J){var se=m.$/M,oe=m.$%M,ue=m.m,be=m.s,Le=C+m.$,ce=Le;U=C+M*U;var xe=C+M*K,Ce=280+be.ua,He=m.Pb?se:16777216,ke=0<be.ua?be.Wa:null,Ue=be.wc,Ye=Le<xe?fn(be,oe,se):null;e(m.C<K),e(xe<=U);var lt=!1;e:for(;;){for(;lt||Le<xe;){var nt=0;if(se>=He){var Rt=Le-C;e((He=m).Pb),He.wd=He.m,He.xd=Rt,0<He.s.ua&&Ie(He.s.Wa,He.s.vb),He=se+jo}if(oe&Ue||(Ye=fn(be,oe,se)),e(Ye!=null),Ye.Qb&&(x[Le]=Ye.qb,lt=!0),!lt)if(pe(ue),Ye.jc){nt=ue,Rt=x;var Tt=Le,ln=Ye.pd[G(nt)&To-1];e(Ye.jc),256>ln.g?(ie(nt,nt.u+ln.g),Rt[Tt]=ln.value,nt=0):(ie(nt,nt.u+ln.g-256),e(256<=ln.value),nt=ln.value),nt==0&&(lt=!0)}else nt=Yt(Ye.G[0],Ye.H[0],ue);if(ue.h)break;if(lt||256>nt){if(!lt)if(Ye.nd)x[Le]=(Ye.qb|nt<<8)>>>0;else{if(pe(ue),lt=Yt(Ye.G[1],Ye.H[1],ue),pe(ue),Rt=Yt(Ye.G[2],Ye.H[2],ue),Tt=Yt(Ye.G[3],Ye.H[3],ue),ue.h)break;x[Le]=(Tt<<24|lt<<16|nt<<8|Rt)>>>0}if(lt=!1,++Le,++oe>=M&&(oe=0,++se,J!=null&&se<=K&&!(se%16)&&J(m,se),ke!=null))for(;ce<Le;)nt=x[ce++],ke.X[(506832829*nt&4294967295)>>>ke.Mb]=nt}else if(280>nt){if(nt=Bt(nt-256,ue),Rt=Yt(Ye.G[4],Ye.H[4],ue),pe(ue),Rt=sn(M,Rt=Bt(Rt,ue)),ue.h)break;if(Le-C<Rt||U-Le<nt)break e;for(Tt=0;Tt<nt;++Tt)x[Le+Tt]=x[Le+Tt-Rt];for(Le+=nt,oe+=nt;oe>=M;)oe-=M,++se,J!=null&&se<=K&&!(se%16)&&J(m,se);if(e(Le<=U),oe&Ue&&(Ye=fn(be,oe,se)),ke!=null)for(;ce<Le;)nt=x[ce++],ke.X[(506832829*nt&4294967295)>>>ke.Mb]=nt}else{if(!(nt<Ce))break e;for(lt=nt-280,e(ke!=null);ce<Le;)nt=x[ce++],ke.X[(506832829*nt&4294967295)>>>ke.Mb]=nt;nt=Le,e(!(lt>>>(Rt=ke).Xa)),x[nt]=Rt.X[lt],lt=!0}lt||e(ue.h==Q(ue))}if(m.Pb&&ue.h&&Le<U)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Ie(m.s.vb,m.s.Wa);else{if(ue.h)break e;J?.(m,se>K?K:se),m.a=0,m.$=Le-C}return 1}return m.a=3,0}function us(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var x=m.Wa;x!=null&&(x.X=null),m.vb=null,e(m!=null)}function je(){var m=new Jt;return m==null?null:(m.a=0,m.xb=hd,nn("Predictor","VP8LPredictors"),nn("Predictor","VP8LPredictors_C"),nn("PredictorAdd","VP8LPredictorsAdd"),nn("PredictorAdd","VP8LPredictorsAdd_C"),Ur=dt,Yl=Nt,Xl=ft,Ya=ut,Xa=We,_a=at,al=xt,F.VP8LMapColor32b=xa,F.VP8LMapColor8b=As,m)}function Pe(m,x,C,M,U){var K=1,J=[m],se=[x],oe=M.m,ue=M.s,be=null,Le=0;e:for(;;){if(C)for(;K&&z(oe,1);){var ce=J,xe=se,Ce=M,He=1,ke=Ce.m,Ue=Ce.gc[Ce.ab],Ye=z(ke,2);if(Ce.Oc&1<<Ye)K=0;else{switch(Ce.Oc|=1<<Ye,Ue.hc=Ye,Ue.Ea=ce[0],Ue.nc=xe[0],Ue.K=[null],++Ce.ab,e(4>=Ce.ab),Ye){case 0:case 1:Ue.b=z(ke,3)+2,He=Pe(Re(Ue.Ea,Ue.b),Re(Ue.nc,Ue.b),0,Ce,Ue.K),Ue.K=Ue.K[0];break;case 3:var lt,nt=z(ke,8)+1,Rt=16<nt?0:4<nt?1:2<nt?2:3;if(ce[0]=Re(Ue.Ea,Rt),Ue.b=Rt,lt=He=Pe(nt,1,0,Ce,Ue.K)){var Tt,ln=nt,Lt=Ue,kn=1<<(8>>Lt.b),pr=o(kn);if(pr==null)lt=0;else{var gn=Lt.K[0],kt=Lt.w;for(pr[0]=Lt.K[0][0],Tt=1;Tt<1*ln;++Tt)pr[Tt]=it(gn[kt+Tt],pr[Tt-1]);for(;Tt<4*kn;++Tt)pr[Tt]=0;Lt.K[0]=null,Lt.K[0]=pr,lt=1}}He=lt;break;case 2:break;default:e(0)}K=He}}if(J=J[0],se=se[0],K&&z(oe,1)&&!(K=1<=(Le=z(oe,4))&&11>=Le)){M.a=3;break e}var _t;if(_t=K)t:{var wr,Zt,yn,Zn=M,ss=J,Es=se,or=Le,Xr=C,Fs=Zn.m,Zr=Zn.s,An=[null],zn=1,_r=0,Wn=Mi[or];n:for(;;){if(Xr&&z(Fs,1)){var is=z(Fs,3)+2,Sr=Re(ss,is),qn=Re(Es,is),Gr=Sr*qn;if(!Pe(Sr,qn,0,Zn,An))break n;for(An=An[0],Zr.xc=is,wr=0;wr<Gr;++wr){var Kn=An[wr]>>8&65535;An[wr]=Kn,Kn>=zn&&(zn=Kn+1)}}if(Fs.h)break n;for(Zt=0;5>Zt;++Zt){var Kr=ul[Zt];!Zt&&0<or&&(Kr+=1<<or),_r<Kr&&(_r=Kr)}var Qr=u(zn*Wn,X),er=zn,Fn=u(er,ae);if(Fn==null)var Bs=null;else e(65536>=er),Bs=Fn;var Dr=o(_r);if(Bs==null||Dr==null||Qr==null){Zn.a=1;break n}var Wt=Qr;for(wr=yn=0;wr<zn;++wr){var Gt=Bs[wr],Un=Gt.G,ii=Gt.H,Ri=0,Ks=1,Jr=0;for(Zt=0;5>Zt;++Zt){Kr=ul[Zt],Un[Zt]=Wt,ii[Zt]=yn,!Zt&&0<or&&(Kr+=1<<or);s:{var Ro,Io=Kr,Ju=Zn,lr=Dr,fd=Wt,pd=yn,eh=0,Ja=Ju.m,m0=z(Ja,1);if(a(lr,0,0,Io),m0){var md=z(Ja,1)+1,gd=z(Ja,1),th=z(Ja,gd==0?1:8);lr[th]=1,md==2&&(lr[th=z(Ja,8)]=1);var ps=1}else{var Rr=o(19),ru=z(Ja,4)+4;if(19<ru){Ju.a=3;var Vo=0;break s}for(Ro=0;Ro<ru;++Ro)Rr[eu[Ro]]=z(Ja,3);var nc=void 0,fl=void 0,Aa=Ju,nh=Rr,rc=Io,rh=lr,sh=0,eo=Aa.m,bd=8,vd=u(128,X);r:for(;I(vd,0,7,nh,19);){if(z(eo,1)){var qf=2+2*z(eo,3);if((nc=2+z(eo,qf))>rc)break r}else nc=rc;for(fl=0;fl<rc&&nc--;){pe(eo);var yd=vd[0+(127&G(eo))];ie(eo,eo.u+yd.g);var Fo=yd.value;if(16>Fo)rh[fl++]=Fo,Fo!=0&&(bd=Fo);else{var Uf=Fo==16,Hf=Fo-16,Wf=Ql[Hf],xd=z(eo,ji[Hf])+Wf;if(fl+xd>rc)break r;for(var Gf=Uf?bd:0;0<xd--;)rh[fl++]=Gf}}sh=1;break r}sh||(Aa.a=3),ps=sh}(ps=ps&&!Ja.h)&&(eh=I(fd,pd,8,lr,Io)),ps&&eh!=0?Vo=eh:(Ju.a=3,Vo=0)}if(Vo==0)break n;if(Ks&&$u[Zt]==1&&(Ks=Wt[yn].g==0),Ri+=Wt[yn].g,yn+=Vo,3>=Zt){var pl,ih=Dr[0];for(pl=1;pl<Kr;++pl)Dr[pl]>ih&&(ih=Dr[pl]);Jr+=ih}}if(Gt.nd=Ks,Gt.Qb=0,Ks&&(Gt.qb=(Un[3][ii[3]+0].value<<24|Un[1][ii[1]+0].value<<16|Un[2][ii[2]+0].value)>>>0,Ri==0&&256>Un[0][ii[0]+0].value&&(Gt.Qb=1,Gt.qb+=Un[0][ii[0]+0].value<<8)),Gt.jc=!Gt.Qb&&6>Jr,Gt.jc){var su,Ca=Gt;for(su=0;su<To;++su){var to=su,no=Ca.pd[to],ah=Ca.G[0][Ca.H[0]+to];256<=ah.value?(no.g=ah.g+256,no.value=ah.value):(no.g=0,no.value=0,to>>=dn(ah,8,no),to>>=dn(Ca.G[1][Ca.H[1]+to],16,no),to>>=dn(Ca.G[2][Ca.H[2]+to],0,no),dn(Ca.G[3][Ca.H[3]+to],24,no))}}}Zr.vc=An,Zr.Wb=zn,Zr.Ya=Bs,Zr.yc=Qr,_t=1;break t}_t=0}if(!(K=_t)){M.a=3;break e}if(0<Le){if(ue.ua=1<<Le,!Y(ue.Wa,Le)){M.a=1,K=0;break e}}else ue.ua=0;var oh=M,ml=J,$f=se,sc=oh.s,ic=sc.xc;if(oh.c=ml,oh.i=$f,sc.md=Re(ml,ic),sc.wc=ic==0?-1:(1<<ic)-1,C){M.xb=Eo;break e}if((be=o(J*se))==null){M.a=1,K=0;break e}K=(K=Er(M,be,0,J,se,se,null))&&!oe.h;break e}return K?(U!=null?U[0]=be:(e(be==null),e(C)),M.$=0,C||us(ue)):us(ue),K}function Ze(m,x){var C=m.c*m.i,M=C+x+16*x;return e(m.c<=x),m.V=o(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+C+x,1)}function Ct(m,x){var C=m.C,M=x-C,U=m.V,K=m.Ba+m.c*C;for(e(x<=m.l.o);0<M;){var J=16<M?16:M,se=m.l.ma,oe=m.l.width,ue=oe*J,be=se.ca,Le=se.tb+oe*C,ce=m.Ta,xe=m.Ua;Jn(m,J,U,K),bi(ce,xe,be,Le,ue),an(se,C,C+J,be,Le,oe),M-=J,U+=J*m.c,C+=J}e(C==x),m.C=m.Ma=x}function St(){this.ub=this.yd=this.td=this.Rb=0}function Mt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function un(){this.Yb=(function(){var m=[];return(function x(C,M,U){for(var K=U[M],J=0;J<K&&(C.push(U.length>M+1?[]:0),!(U.length<M+1));J++)x(C[J],M+1,U)})(m,0,[3,11]),m})()}function on(){this.jb=o(3),this.Wc=c([4,8],un),this.Xc=c([4,17],un)}function xn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Pn(){this.ld=this.La=this.dd=this.tc=0}function Tn(){this.Na=this.la=0}function sr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $r(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Mr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pn),this.Y=0,this.ya=Array(new $r),this.aa=0,this.l=new ni}function _s(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Yi(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new St,this.Kc=new Mt,this.ed=new xn,this.Qa=new pn,this.Ic=this.$c=this.Aa=0,this.D=new Mr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,E),this.ia=0,this.pb=u(4,sr),this.Pa=new on,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _s),this.Hd=0,this.rb=Array(new Tn),this.sb=0,this.wa=Array(new Pn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $r),this.L=this.aa=0,this.gd=c([4,2],Pn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pr(m,x){return 0>m?0:m>x?x:m}function ni(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gs(){var m=new Yi;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,vi||(vi=Si)),m}function Nn(m,x,C){return m.a==0&&(m.a=x,m.sc=C,m.cb=0),0}function Xi(m,x,C){return 3<=C&&m[x+0]==157&&m[x+1]==1&&m[x+2]==42}function Ds(m,x){if(m==null)return 0;if(m.a=0,m.sc="OK",x==null)return Nn(m,2,"null VP8Io passed to VP8GetHeaders()");var C=x.data,M=x.w,U=x.ha;if(4>U)return Nn(m,7,"Truncated header.");var K=C[M+0]|C[M+1]<<8|C[M+2]<<16,J=m.Od;if(J.Rb=!(1&K),J.td=K>>1&7,J.yd=K>>4&1,J.ub=K>>5,3<J.td)return Nn(m,3,"Incorrect keyframe parameters.");if(!J.yd)return Nn(m,4,"Frame not displayable.");M+=3,U-=3;var se=m.Kc;if(J.Rb){if(7>U)return Nn(m,7,"cannot parse picture header");if(!Xi(C,M,U))return Nn(m,3,"Bad code word");se.c=16383&(C[M+4]<<8|C[M+3]),se.Td=C[M+4]>>6,se.i=16383&(C[M+6]<<8|C[M+5]),se.Ud=C[M+6]>>6,M+=7,U-=7,m.za=se.c+15>>4,m.Ub=se.i+15>>4,x.width=se.c,x.height=se.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((K=m.Pa).jb,0,255,K.jb.length),e((K=m.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,a(K.Zb,0,0,K.Zb.length),a(K.Lb,0,0,K.Lb)}if(J.ub>U)return Nn(m,7,"bad partition length");Z(K=m.m,C,M,J.ub),M+=J.ub,U-=J.ub,J.Rb&&(se.Ld=ye(K),se.Kd=ye(K)),se=m.Qa;var oe,ue=m.Pa;if(e(K!=null),e(se!=null),se.Cb=ye(K),se.Cb){if(se.Bb=ye(K),ye(K)){for(se.Fb=ye(K),oe=0;4>oe;++oe)se.Zb[oe]=ye(K)?le(K,7):0;for(oe=0;4>oe;++oe)se.Lb[oe]=ye(K)?le(K,6):0}if(se.Bb)for(oe=0;3>oe;++oe)ue.jb[oe]=ye(K)?re(K,8):255}else se.Bb=0;if(K.Ka)return Nn(m,3,"cannot parse segment header");if((se=m.ed).zd=ye(K),se.Tb=re(K,6),se.wb=re(K,3),se.Pc=ye(K),se.Pc&&ye(K)){for(ue=0;4>ue;++ue)ye(K)&&(se.vd[ue]=le(K,6));for(ue=0;4>ue;++ue)ye(K)&&(se.od[ue]=le(K,6))}if(m.L=se.Tb==0?0:se.zd?1:2,K.Ka)return Nn(m,3,"cannot parse filter header");var be=U;if(U=oe=M,M=oe+be,se=be,m.Xb=(1<<re(m.m,2))-1,be<3*(ue=m.Xb))C=7;else{for(oe+=3*ue,se-=3*ue,be=0;be<ue;++be){var Le=C[U+0]|C[U+1]<<8|C[U+2]<<16;Le>se&&(Le=se),Z(m.Jc[+be],C,oe,Le),oe+=Le,se-=Le,U+=3}Z(m.Jc[+ue],C,oe,se),C=oe<M?0:5}if(C!=0)return Nn(m,C,"cannot parse partitions");for(C=re(oe=m.m,7),U=ye(oe)?le(oe,4):0,M=ye(oe)?le(oe,4):0,se=ye(oe)?le(oe,4):0,ue=ye(oe)?le(oe,4):0,oe=ye(oe)?le(oe,4):0,be=m.Qa,Le=0;4>Le;++Le){if(be.Cb){var ce=be.Zb[Le];be.Fb||(ce+=C)}else{if(0<Le){m.pb[Le]=m.pb[0];continue}ce=C}var xe=m.pb[Le];xe.Sc[0]=Li[Pr(ce+U,127)],xe.Sc[1]=Oi[Pr(ce+0,127)],xe.Eb[0]=2*Li[Pr(ce+M,127)],xe.Eb[1]=101581*Oi[Pr(ce+se,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=Li[Pr(ce+ue,117)],xe.Qc[1]=Oi[Pr(ce+oe,127)],xe.lc=ce+oe}if(!J.Rb)return Nn(m,4,"Not a key frame.");for(ye(K),J=m.Pa,C=0;4>C;++C){for(U=0;8>U;++U)for(M=0;3>M;++M)for(se=0;11>se;++se)ue=Se(K,fr[C][U][M][se])?re(K,8):Pf[C][U][M][se],J.Wc[C][U].Yb[M][se]=ue;for(U=0;17>U;++U)J.Xc[C][U]=J.Wc[C][jn[U]]}return m.kc=ye(K),m.kc&&(m.Bd=re(K,8)),m.cb=1}function Si(m,x,C,M,U,K,J){var se=x[U].Yb[C];for(C=0;16>U;++U){if(!Se(m,se[C+0]))return U;for(;!Se(m,se[C+1]);)if(se=x[++U].Yb[0],C=0,U==16)return 16;var oe=x[U+1].Yb;if(Se(m,se[C+2])){var ue=m,be=0;if(Se(ue,(ce=se)[(Le=C)+3]))if(Se(ue,ce[Le+6])){for(se=0,Le=2*(be=Se(ue,ce[Le+8]))+(ce=Se(ue,ce[Le+9+be])),be=0,ce=Bf[Le];ce[se];++se)be+=be+Se(ue,ce[se]);be+=3+(8<<Le)}else Se(ue,ce[Le+7])?(be=7+2*Se(ue,165),be+=Se(ue,145)):be=5+Se(ue,159);else be=Se(ue,ce[Le+4])?3+Se(ue,ce[Le+5]):2;se=oe[2]}else be=1,se=oe[1];oe=J+ud[U],0>(ue=m).b&&de(ue);var Le,ce=ue.b,xe=(Le=ue.Ca>>1)-(ue.I>>ce)>>31;--ue.b,ue.Ca+=xe,ue.Ca|=1,ue.I-=(Le+1&xe)<<ce,K[oe]=((be^xe)-xe)*M[(0<U)+0]}return 16}function _o(m){var x=m.rb[m.sb-1];x.la=0,x.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function hs(m,x,C,M,U){U=m[x+C+32*M]+(U>>3),m[x+C+32*M]=-256&U?0>U?0:255:U}function zr(m,x,C,M,U,K){hs(m,x,0,C,M+U),hs(m,x,1,C,M+K),hs(m,x,2,C,M-K),hs(m,x,3,C,M-U)}function Lr(m){return(20091*m>>16)+m}function So(m,x,C,M){var U,K=0,J=o(16);for(U=0;4>U;++U){var se=m[x+0]+m[x+8],oe=m[x+0]-m[x+8],ue=(35468*m[x+4]>>16)-Lr(m[x+12]),be=Lr(m[x+4])+(35468*m[x+12]>>16);J[K+0]=se+be,J[K+1]=oe+ue,J[K+2]=oe-ue,J[K+3]=se-be,K+=4,x++}for(U=K=0;4>U;++U)se=(m=J[K+0]+4)+J[K+8],oe=m-J[K+8],ue=(35468*J[K+4]>>16)-Lr(J[K+12]),hs(C,M,0,0,se+(be=Lr(J[K+4])+(35468*J[K+12]>>16))),hs(C,M,1,0,oe+ue),hs(C,M,2,0,oe-ue),hs(C,M,3,0,se-be),K++,M+=32}function Bl(m,x,C,M){var U=m[x+0]+4,K=35468*m[x+4]>>16,J=Lr(m[x+4]),se=35468*m[x+1]>>16;zr(C,M,0,U+J,m=Lr(m[x+1]),se),zr(C,M,1,U+K,m,se),zr(C,M,2,U-K,m,se),zr(C,M,3,U-J,m,se)}function Qo(m,x,C,M,U){So(m,x,C,M),U&&So(m,x+16,C,M+4)}function $s(m,x,C,M){Za(m,x+0,C,M,1),Za(m,x+32,C,M+128,1)}function Vc(m,x,C,M){var U;for(m=m[x+0]+4,U=0;4>U;++U)for(x=0;4>x;++x)hs(C,M,x,U,m)}function Fc(m,x,C,M){m[x+0]&&Hn(m,x+0,C,M),m[x+16]&&Hn(m,x+16,C,M+4),m[x+32]&&Hn(m,x+32,C,M+128),m[x+48]&&Hn(m,x+48,C,M+128+4)}function Zi(m,x,C,M){var U,K=o(16);for(U=0;4>U;++U){var J=m[x+0+U]+m[x+12+U],se=m[x+4+U]+m[x+8+U],oe=m[x+4+U]-m[x+8+U],ue=m[x+0+U]-m[x+12+U];K[0+U]=J+se,K[8+U]=J-se,K[4+U]=ue+oe,K[12+U]=ue-oe}for(U=0;4>U;++U)J=(m=K[0+4*U]+3)+K[3+4*U],se=K[1+4*U]+K[2+4*U],oe=K[1+4*U]-K[2+4*U],ue=m-K[3+4*U],C[M+0]=J+se>>3,C[M+16]=ue+oe>>3,C[M+32]=J-se>>3,C[M+48]=ue-oe>>3,M+=64}function Jo(m,x,C){var M,U=x-32,K=Is,J=255-m[U-1];for(M=0;M<C;++M){var se,oe=K,ue=J+m[x-1];for(se=0;se<C;++se)m[x+se]=oe[ue+m[U+se]];x+=32}}function Lu(m,x){Jo(m,x,4)}function Ou(m,x){Jo(m,x,8)}function Bc(m,x){Jo(m,x,16)}function Pc(m,x){var C;for(C=0;16>C;++C)s(m,x+32*C,m,x-32,16)}function Du(m,x){var C;for(C=16;0<C;--C)a(m,x,m[x-1],16),x+=32}function ri(m,x,C){var M;for(M=0;16>M;++M)a(x,C+32*M,m,16)}function Ki(m,x){var C,M=16;for(C=0;16>C;++C)M+=m[x-1+32*C]+m[x+C-32];ri(M>>5,m,x)}function Da(m,x){var C,M=8;for(C=0;16>C;++C)M+=m[x-1+32*C];ri(M>>4,m,x)}function el(m,x){var C,M=8;for(C=0;16>C;++C)M+=m[x+C-32];ri(M>>4,m,x)}function No(m,x){ri(128,m,x)}function Xt(m,x,C){return m+2*x+C+2>>2}function Ru(m,x){var C,M=x-32;for(M=new Uint8Array([Xt(m[M-1],m[M+0],m[M+1]),Xt(m[M+0],m[M+1],m[M+2]),Xt(m[M+1],m[M+2],m[M+3]),Xt(m[M+2],m[M+3],m[M+4])]),C=0;4>C;++C)s(m,x+32*C,M,0,M.length)}function zc(m,x){var C=m[x-1],M=m[x-1+32],U=m[x-1+64],K=m[x-1+96];Be(m,x+0,16843009*Xt(m[x-1-32],C,M)),Be(m,x+32,16843009*Xt(C,M,U)),Be(m,x+64,16843009*Xt(M,U,K)),Be(m,x+96,16843009*Xt(U,K,K))}function Iu(m,x){var C,M=4;for(C=0;4>C;++C)M+=m[x+C-32]+m[x-1+32*C];for(M>>=3,C=0;4>C;++C)a(m,x+32*C,M,4)}function fi(m,x){var C=m[x-1+0],M=m[x-1+32],U=m[x-1+64],K=m[x-1-32],J=m[x+0-32],se=m[x+1-32],oe=m[x+2-32],ue=m[x+3-32];m[x+0+96]=Xt(M,U,m[x-1+96]),m[x+1+96]=m[x+0+64]=Xt(C,M,U),m[x+2+96]=m[x+1+64]=m[x+0+32]=Xt(K,C,M),m[x+3+96]=m[x+2+64]=m[x+1+32]=m[x+0+0]=Xt(J,K,C),m[x+3+64]=m[x+2+32]=m[x+1+0]=Xt(se,J,K),m[x+3+32]=m[x+2+0]=Xt(oe,se,J),m[x+3+0]=Xt(ue,oe,se)}function Ss(m,x){var C=m[x+1-32],M=m[x+2-32],U=m[x+3-32],K=m[x+4-32],J=m[x+5-32],se=m[x+6-32],oe=m[x+7-32];m[x+0+0]=Xt(m[x+0-32],C,M),m[x+1+0]=m[x+0+32]=Xt(C,M,U),m[x+2+0]=m[x+1+32]=m[x+0+64]=Xt(M,U,K),m[x+3+0]=m[x+2+32]=m[x+1+64]=m[x+0+96]=Xt(U,K,J),m[x+3+32]=m[x+2+64]=m[x+1+96]=Xt(K,J,se),m[x+3+64]=m[x+2+96]=Xt(J,se,oe),m[x+3+96]=Xt(se,oe,oe)}function qc(m,x){var C=m[x-1+0],M=m[x-1+32],U=m[x-1+64],K=m[x-1-32],J=m[x+0-32],se=m[x+1-32],oe=m[x+2-32],ue=m[x+3-32];m[x+0+0]=m[x+1+64]=K+J+1>>1,m[x+1+0]=m[x+2+64]=J+se+1>>1,m[x+2+0]=m[x+3+64]=se+oe+1>>1,m[x+3+0]=oe+ue+1>>1,m[x+0+96]=Xt(U,M,C),m[x+0+64]=Xt(M,C,K),m[x+0+32]=m[x+1+96]=Xt(C,K,J),m[x+1+32]=m[x+2+96]=Xt(K,J,se),m[x+2+32]=m[x+3+96]=Xt(J,se,oe),m[x+3+32]=Xt(se,oe,ue)}function tl(m,x){var C=m[x+0-32],M=m[x+1-32],U=m[x+2-32],K=m[x+3-32],J=m[x+4-32],se=m[x+5-32],oe=m[x+6-32],ue=m[x+7-32];m[x+0+0]=C+M+1>>1,m[x+1+0]=m[x+0+64]=M+U+1>>1,m[x+2+0]=m[x+1+64]=U+K+1>>1,m[x+3+0]=m[x+2+64]=K+J+1>>1,m[x+0+32]=Xt(C,M,U),m[x+1+32]=m[x+0+96]=Xt(M,U,K),m[x+2+32]=m[x+1+96]=Xt(U,K,J),m[x+3+32]=m[x+2+96]=Xt(K,J,se),m[x+3+64]=Xt(J,se,oe),m[x+3+96]=Xt(se,oe,ue)}function pi(m,x){var C=m[x-1+0],M=m[x-1+32],U=m[x-1+64],K=m[x-1+96];m[x+0+0]=C+M+1>>1,m[x+2+0]=m[x+0+32]=M+U+1>>1,m[x+2+32]=m[x+0+64]=U+K+1>>1,m[x+1+0]=Xt(C,M,U),m[x+3+0]=m[x+1+32]=Xt(M,U,K),m[x+3+32]=m[x+1+64]=Xt(U,K,K),m[x+3+64]=m[x+2+64]=m[x+0+96]=m[x+1+96]=m[x+2+96]=m[x+3+96]=K}function nl(m,x){var C=m[x-1+0],M=m[x-1+32],U=m[x-1+64],K=m[x-1+96],J=m[x-1-32],se=m[x+0-32],oe=m[x+1-32],ue=m[x+2-32];m[x+0+0]=m[x+2+32]=C+J+1>>1,m[x+0+32]=m[x+2+64]=M+C+1>>1,m[x+0+64]=m[x+2+96]=U+M+1>>1,m[x+0+96]=K+U+1>>1,m[x+3+0]=Xt(se,oe,ue),m[x+2+0]=Xt(J,se,oe),m[x+1+0]=m[x+3+32]=Xt(C,J,se),m[x+1+32]=m[x+3+64]=Xt(M,C,J),m[x+1+64]=m[x+3+96]=Xt(U,M,C),m[x+1+96]=Xt(K,U,M)}function pa(m,x){var C;for(C=0;8>C;++C)s(m,x+32*C,m,x-32,8)}function Vu(m,x){var C;for(C=0;8>C;++C)a(m,x,m[x-1],8),x+=32}function Ni(m,x,C){var M;for(M=0;8>M;++M)a(x,C+32*M,m,8)}function Pl(m,x){var C,M=8;for(C=0;8>C;++C)M+=m[x+C-32]+m[x-1+32*C];Ni(M>>4,m,x)}function zl(m,x){var C,M=4;for(C=0;8>C;++C)M+=m[x+C-32];Ni(M>>3,m,x)}function ds(m,x){var C,M=4;for(C=0;8>C;++C)M+=m[x-1+32*C];Ni(M>>3,m,x)}function ma(m,x){Ni(128,m,x)}function Ai(m,x,C){var M=m[x-C],U=m[x+0],K=3*(U-M)+Ka[1020+m[x-2*C]-m[x+C]],J=Kc[112+(K+4>>3)];m[x-C]=Is[255+M+Kc[112+(K+3>>3)]],m[x+0]=Is[255+U-J]}function Ra(m,x,C,M){var U=m[x+0],K=m[x+C];return Cs[255+m[x-2*C]-m[x-C]]>M||Cs[255+K-U]>M}function ql(m,x,C,M){return 4*Cs[255+m[x-C]-m[x+0]]+Cs[255+m[x-2*C]-m[x+C]]<=M}function rl(m,x,C,M,U){var K=m[x-3*C],J=m[x-2*C],se=m[x-C],oe=m[x+0],ue=m[x+C],be=m[x+2*C],Le=m[x+3*C];return 4*Cs[255+se-oe]+Cs[255+J-ue]>M?0:Cs[255+m[x-4*C]-K]<=U&&Cs[255+K-J]<=U&&Cs[255+J-se]<=U&&Cs[255+Le-be]<=U&&Cs[255+be-ue]<=U&&Cs[255+ue-oe]<=U}function Ia(m,x,C,M){var U=2*M+1;for(M=0;16>M;++M)ql(m,x+M,C,U)&&Ai(m,x+M,C)}function Va(m,x,C,M){var U=2*M+1;for(M=0;16>M;++M)ql(m,x+M*C,1,U)&&Ai(m,x+M*C,1)}function sl(m,x,C,M){var U;for(U=3;0<U;--U)Ia(m,x+=4*C,C,M)}function Uc(m,x,C,M){var U;for(U=3;0<U;--U)Va(m,x+=4,C,M)}function Fa(m,x,C,M,U,K,J,se){for(K=2*K+1;0<U--;){if(rl(m,x,C,K,J))if(Ra(m,x,C,se))Ai(m,x,C);else{var oe=m,ue=x,be=C,Le=oe[ue-2*be],ce=oe[ue-be],xe=oe[ue+0],Ce=oe[ue+be],He=oe[ue+2*be],ke=27*(Ye=Ka[1020+3*(xe-ce)+Ka[1020+Le-Ce]])+63>>7,Ue=18*Ye+63>>7,Ye=9*Ye+63>>7;oe[ue-3*be]=Is[255+oe[ue-3*be]+Ye],oe[ue-2*be]=Is[255+Le+Ue],oe[ue-be]=Is[255+ce+ke],oe[ue+0]=Is[255+xe-ke],oe[ue+be]=Is[255+Ce-Ue],oe[ue+2*be]=Is[255+He-Ye]}x+=M}}function Ba(m,x,C,M,U,K,J,se){for(K=2*K+1;0<U--;){if(rl(m,x,C,K,J))if(Ra(m,x,C,se))Ai(m,x,C);else{var oe=m,ue=x,be=C,Le=oe[ue-be],ce=oe[ue+0],xe=oe[ue+be],Ce=Kc[112+(4+(He=3*(ce-Le))>>3)],He=Kc[112+(He+3>>3)],ke=Ce+1>>1;oe[ue-2*be]=Is[255+oe[ue-2*be]+ke],oe[ue-be]=Is[255+Le+He],oe[ue+0]=Is[255+ce-Ce],oe[ue+be]=Is[255+xe-ke]}x+=M}}function Fu(m,x,C,M,U,K){Fa(m,x,C,1,16,M,U,K)}function Pa(m,x,C,M,U,K){Fa(m,x,1,C,16,M,U,K)}function Bu(m,x,C,M,U,K){var J;for(J=3;0<J;--J)Ba(m,x+=4*C,C,1,16,M,U,K)}function S(m,x,C,M,U,K){var J;for(J=3;0<J;--J)Ba(m,x+=4,1,C,16,M,U,K)}function q(m,x,C,M,U,K,J,se){Fa(m,x,U,1,8,K,J,se),Fa(C,M,U,1,8,K,J,se)}function he(m,x,C,M,U,K,J,se){Fa(m,x,1,U,8,K,J,se),Fa(C,M,1,U,8,K,J,se)}function ge(m,x,C,M,U,K,J,se){Ba(m,x+4*U,U,1,8,K,J,se),Ba(C,M+4*U,U,1,8,K,J,se)}function Ne(m,x,C,M,U,K,J,se){Ba(m,x+4,1,U,8,K,J,se),Ba(C,M+4,1,U,8,K,J,se)}function $e(){this.ba=new At,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ot(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pt(){this.ua=0,this.Wa=new vt,this.vb=new vt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new X}function Jt(){this.xb=this.a=0,this.l=new ni,this.ca=new At,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pt,this.ab=0,this.gc=u(4,Ot),this.Oc=0}function mn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ni,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function In(m,x,C,M,U,K,J){for(m=m==null?0:m[x+0],x=0;x<J;++x)U[K+x]=m+C[M+x]&255,m=U[K+x]}function xr(m,x,C,M,U,K,J){var se;if(m==null)In(null,null,C,M,U,K,J);else for(se=0;se<J;++se)U[K+se]=m[x+se]+C[M+se]&255}function qr(m,x,C,M,U,K,J){if(m==null)In(null,null,C,M,U,K,J);else{var se,oe=m[x+0],ue=oe,be=oe;for(se=0;se<J;++se)ue=be+(oe=m[x+se])-ue,be=C[M+se]+(-256&ue?0>ue?0:255:ue)&255,ue=oe,U[K+se]=be}}function ir(m,x,C,M){var U=x.width,K=x.o;if(e(m!=null&&x!=null),0>C||0>=M||C+M>K)return null;if(!m.Cc){if(m.ga==null){var J;if(m.ga=new mn,(J=m.ga==null)||(J=x.width*x.o,e(m.Gb.length==0),m.Gb=o(J),m.Uc=0,m.Gb==null?J=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,J=1),J=!J),!J){J=m.ga;var se=m.Fa,oe=m.P,ue=m.qc,be=m.mb,Le=m.nb,ce=oe+1,xe=ue-1,Ce=J.l;if(e(se!=null&&be!=null&&x!=null),Qa[0]=null,Qa[1]=In,Qa[2]=xr,Qa[3]=qr,J.ca=be,J.tb=Le,J.c=x.width,J.i=x.height,e(0<J.c&&0<J.i),1>=ue)x=0;else if(J.$a=3&se[oe+0],J.Z=se[oe+0]>>2&3,J.Lc=se[oe+0]>>4&3,oe=se[oe+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||oe)x=0;else if(Ce.put=Ve,Ce.ac=we,Ce.bc=pt,Ce.ma=J,Ce.width=x.width,Ce.height=x.height,Ce.Da=x.Da,Ce.v=x.v,Ce.va=x.va,Ce.j=x.j,Ce.o=x.o,J.$a)e:{e(J.$a==1),x=je();t:for(;;){if(x==null){x=0;break e}if(e(J!=null),J.mc=x,x.c=J.c,x.i=J.i,x.l=J.l,x.l.ma=J,x.l.width=J.c,x.l.height=J.i,x.a=0,fe(x.m,se,ce,xe),!Pe(J.c,J.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Sn(x.s)?(J.ic=1,se=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(se),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(J.ic=0,x=Ze(x,J.c)),!x))break t;x=1;break e}J.mc=null,x=0}else x=xe>=J.c*J.i;J=!x}if(J)return null;m.ga.Lc!=1?m.Ga=0:M=K-C}e(m.ga!=null),e(C+M<=K);e:{if(x=(se=m.ga).c,K=se.l.o,se.$a==0){if(ce=m.rc,xe=m.Vc,Ce=m.Fa,oe=m.P+1+C*x,ue=m.mb,be=m.nb+C*x,e(oe<=m.P+m.qc),se.Z!=0)for(e(Qa[se.Z]!=null),J=0;J<M;++J)Qa[se.Z](ce,xe,Ce,oe,ue,be,x),ce=ue,xe=be,be+=x,oe+=x;else for(J=0;J<M;++J)s(ue,be,Ce,oe,x),ce=ue,xe=be,be+=x,oe+=x;m.rc=ce,m.Vc=xe}else{if(e(se.mc!=null),x=C+M,e((J=se.mc)!=null),e(x<=J.i),J.C>=x)x=1;else if(se.ic||Qi(),se.ic){se=J.V,ce=J.Ba,xe=J.c;var He=J.i,ke=(Ce=1,oe=J.$/xe,ue=J.$%xe,be=J.m,Le=J.s,J.$),Ue=xe*He,Ye=xe*x,lt=Le.wc,nt=ke<Ye?fn(Le,ue,oe):null;e(ke<=Ue),e(x<=He),e(Sn(Le));t:for(;;){for(;!be.h&&ke<Ye;){if(ue&lt||(nt=fn(Le,ue,oe)),e(nt!=null),pe(be),256>(He=Yt(nt.G[0],nt.H[0],be)))se[ce+ke]=He,++ke,++ue>=xe&&(ue=0,++oe<=x&&!(oe%16)&&$n(J,oe));else{if(!(280>He)){Ce=0;break t}He=Bt(He-256,be);var Rt,Tt=Yt(nt.G[4],nt.H[4],be);if(pe(be),!(ke>=(Tt=sn(xe,Tt=Bt(Tt,be)))&&Ue-ke>=He)){Ce=0;break t}for(Rt=0;Rt<He;++Rt)se[ce+ke+Rt]=se[ce+ke+Rt-Tt];for(ke+=He,ue+=He;ue>=xe;)ue-=xe,++oe<=x&&!(oe%16)&&$n(J,oe);ke<Ye&&ue&lt&&(nt=fn(Le,ue,oe))}e(be.h==Q(be))}$n(J,oe>x?x:oe);break t}!Ce||be.h&&ke<Ue?(Ce=0,J.a=be.h?5:3):J.$=ke,x=Ce}else x=Er(J,J.V,J.Ba,J.c,J.i,x,Ct);if(!x){M=0;break e}}C+M>=K&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+C*U}function rs(m,x,C,M,U,K){for(;0<U--;){var J,se=m,oe=x+(C?1:0),ue=m,be=x+(C?0:3);for(J=0;J<M;++J){var Le=ue[be+4*J];Le!=255&&(Le*=32897,se[oe+4*J+0]=se[oe+4*J+0]*Le>>23,se[oe+4*J+1]=se[oe+4*J+1]*Le>>23,se[oe+4*J+2]=se[oe+4*J+2]*Le>>23)}x+=K}}function Yr(m,x,C,M,U){for(;0<M--;){var K;for(K=0;K<C;++K){var J=m[x+2*K+0],se=15&(ue=m[x+2*K+1]),oe=4369*se,ue=(240&ue|ue>>4)*oe>>16;m[x+2*K+0]=(240&J|J>>4)*oe>>16&240|(15&J|J<<4)*oe>>16>>4&15,m[x+2*K+1]=240&ue|se}x+=U}}function Ns(m,x,C,M,U,K,J,se){var oe,ue,be=255;for(ue=0;ue<U;++ue){for(oe=0;oe<M;++oe){var Le=m[x+oe];K[J+4*oe]=Le,be&=Le}x+=C,J+=se}return be!=255}function za(m,x,C,M,U){var K;for(K=0;K<U;++K)C[M+K]=m[x+K]>>8}function Qi(){ll=rs,Ti=Yr,Yc=Ns,bi=za}function qa(m,x,C){F[m]=function(M,U,K,J,se,oe,ue,be,Le,ce,xe,Ce,He,ke,Ue,Ye,lt){var nt,Rt=lt-1>>1,Tt=se[oe+0]|ue[be+0]<<16,ln=Le[ce+0]|xe[Ce+0]<<16;e(M!=null);var Lt=3*Tt+ln+131074>>2;for(x(M[U+0],255&Lt,Lt>>16,He,ke),K!=null&&(Lt=3*ln+Tt+131074>>2,x(K[J+0],255&Lt,Lt>>16,Ue,Ye)),nt=1;nt<=Rt;++nt){var kn=se[oe+nt]|ue[be+nt]<<16,pr=Le[ce+nt]|xe[Ce+nt]<<16,gn=Tt+kn+ln+pr+524296,kt=gn+2*(kn+ln)>>3;Lt=kt+Tt>>1,Tt=(gn=gn+2*(Tt+pr)>>3)+kn>>1,x(M[U+2*nt-1],255&Lt,Lt>>16,He,ke+(2*nt-1)*C),x(M[U+2*nt-0],255&Tt,Tt>>16,He,ke+(2*nt-0)*C),K!=null&&(Lt=gn+ln>>1,Tt=kt+pr>>1,x(K[J+2*nt-1],255&Lt,Lt>>16,Ue,Ye+(2*nt-1)*C),x(K[J+2*nt+0],255&Tt,Tt>>16,Ue,Ye+(2*nt+0)*C)),Tt=kn,ln=pr}1&lt||(Lt=3*Tt+ln+131074>>2,x(M[U+lt-1],255&Lt,Lt>>16,He,ke+(lt-1)*C),K!=null&&(Lt=3*ln+Tt+131074>>2,x(K[J+lt-1],255&Lt,Lt>>16,Ue,Ye+(lt-1)*C)))}}function Hc(){ks[Uu]=hl,ks[Vs]=Jl,ks[Hu]=dd,ks[ki]=Xu,ks[Qc]=Mo,ks[Zl]=Na,ks[ko]=Lo,ks[Jc]=Jl,ks[Wu]=Xu,ks[Kl]=Mo,ks[Gu]=Na}function Ul(m){return m&-16384?0>m?0:255:m>>Zu}function ga(m,x){return Ul((19077*m>>8)+(26149*x>>8)-14234)}function Ji(m,x,C){return Ul((19077*m>>8)-(6419*x>>8)-(13320*C>>8)+8708)}function il(m,x){return Ul((19077*m>>8)+(33050*x>>8)-17685)}function Ua(m,x,C,M,U){M[U+0]=ga(m,C),M[U+1]=Ji(m,x,C),M[U+2]=il(m,x)}function fs(m,x,C,M,U){M[U+0]=il(m,x),M[U+1]=Ji(m,x,C),M[U+2]=ga(m,C)}function Ao(m,x,C,M,U){var K=Ji(m,x,C);x=K<<3&224|il(m,x)>>3,M[U+0]=248&ga(m,C)|K>>5,M[U+1]=x}function Co(m,x,C,M,U){var K=240&il(m,x)|15;M[U+0]=240&ga(m,C)|Ji(m,x,C)>>4,M[U+1]=K}function Hl(m,x,C,M,U){M[U+0]=255,Ua(m,x,C,M,U+1)}function ba(m,x,C,M,U){fs(m,x,C,M,U),M[U+3]=255}function Ys(m,x,C,M,U){Ua(m,x,C,M,U),M[U+3]=255}function Ha(m,x,C){F[m]=function(M,U,K,J,se,oe,ue,be,Le){for(var ce=be+(-2&Le)*C;be!=ce;)x(M[U+0],K[J+0],se[oe+0],ue,be),x(M[U+1],K[J+0],se[oe+0],ue,be+C),U+=2,++J,++oe,be+=2*C;1&Le&&x(M[U+0],K[J+0],se[oe+0],ue,be)}}function Wl(m,x,C){return C==0?m==0?x==0?6:5:x==0?4:0:C}function Wc(m,x,C,M,U){switch(m>>>30){case 3:Za(x,C,M,U,0);break;case 2:Rs(x,C,M,U);break;case 1:Hn(x,C,M,U)}}function mi(m,x){var C,M,U=x.M,K=x.Nb,J=m.oc,se=m.pc+40,oe=m.oc,ue=m.pc+584,be=m.oc,Le=m.pc+600;for(C=0;16>C;++C)J[se+32*C-1]=129;for(C=0;8>C;++C)oe[ue+32*C-1]=129,be[Le+32*C-1]=129;for(0<U?J[se-1-32]=oe[ue-1-32]=be[Le-1-32]=129:(a(J,se-32-1,127,21),a(oe,ue-32-1,127,9),a(be,Le-32-1,127,9)),M=0;M<m.za;++M){var ce=x.ya[x.aa+M];if(0<M){for(C=-1;16>C;++C)s(J,se+32*C-4,J,se+32*C+12,4);for(C=-1;8>C;++C)s(oe,ue+32*C-4,oe,ue+32*C+4,4),s(be,Le+32*C-4,be,Le+32*C+4,4)}var xe=m.Gd,Ce=m.Hd+M,He=ce.ad,ke=ce.Hc;if(0<U&&(s(J,se-32,xe[Ce].y,0,16),s(oe,ue-32,xe[Ce].f,0,8),s(be,Le-32,xe[Ce].ea,0,8)),ce.Za){var Ue=J,Ye=se-32+16;for(0<U&&(M>=m.za-1?a(Ue,Ye,xe[Ce].y[15],4):s(Ue,Ye,xe[Ce+1].y,0,4)),C=0;4>C;C++)Ue[Ye+128+C]=Ue[Ye+256+C]=Ue[Ye+384+C]=Ue[Ye+0+C];for(C=0;16>C;++C,ke<<=2)Ue=J,Ye=se+Wr[C],Or[ce.Ob[C]](Ue,Ye),Wc(ke,He,16*+C,Ue,Ye)}else if(Ue=Wl(M,U,ce.Ob[0]),Zs[Ue](J,se),ke!=0)for(C=0;16>C;++C,ke<<=2)Wc(ke,He,16*+C,J,se+Wr[C]);for(C=ce.Gc,Ue=Wl(M,U,ce.Dd),ra[Ue](oe,ue),ra[Ue](be,Le),ke=He,Ue=oe,Ye=ue,255&(ce=0|C)&&(170&ce?Ci(ke,256,Ue,Ye):Vn(ke,256,Ue,Ye)),ce=be,ke=Le,255&(C>>=8)&&(170&C?Ci(He,320,ce,ke):Vn(He,320,ce,ke)),U<m.Ub-1&&(s(xe[Ce].y,0,J,se+480,16),s(xe[Ce].f,0,oe,ue+224,8),s(xe[Ce].ea,0,be,Le+224,8)),C=8*K*m.B,xe=m.sa,Ce=m.ta+16*M+16*K*m.R,He=m.qa,ce=m.ra+8*M+C,ke=m.Ha,Ue=m.Ia+8*M+C,C=0;16>C;++C)s(xe,Ce+C*m.R,J,se+32*C,16);for(C=0;8>C;++C)s(He,ce+C*m.B,oe,ue+32*C,8),s(ke,Ue+C*m.B,be,Le+32*C,8)}}function ea(m,x,C,M,U,K,J,se,oe){var ue=[0],be=[0],Le=0,ce=oe!=null?oe.kd:0,xe=oe??new rt;if(m==null||12>C)return 7;xe.data=m,xe.w=x,xe.ha=C,x=[x],C=[C],xe.gb=[xe.gb];e:{var Ce=x,He=C,ke=xe.gb;if(e(m!=null),e(He!=null),e(ke!=null),ke[0]=0,12<=He[0]&&!t(m,Ce[0],"RIFF")){if(t(m,Ce[0]+8,"WEBP")){ke=3;break e}var Ue=ot(m,Ce[0]+4);if(12>Ue||4294967286<Ue){ke=3;break e}if(ce&&Ue>He[0]-8){ke=7;break e}ke[0]=Ue,Ce[0]+=12,He[0]-=12}ke=0}if(ke!=0)return ke;for(Ue=0<xe.gb[0],C=C[0];;){e:{var Ye=m;He=x,ke=C;var lt=ue,nt=be,Rt=Ce=[0];if((Lt=Le=[Le])[0]=0,8>ke[0])ke=7;else{if(!t(Ye,He[0],"VP8X")){if(ot(Ye,He[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var Tt=ot(Ye,He[0]+8),ln=1+Xe(Ye,He[0]+12);if(2147483648<=ln*(Ye=1+Xe(Ye,He[0]+15))){ke=3;break e}Rt!=null&&(Rt[0]=Tt),lt!=null&&(lt[0]=ln),nt!=null&&(nt[0]=Ye),He[0]+=18,ke[0]-=18,Lt[0]=1}ke=0}}if(Le=Le[0],Ce=Ce[0],ke!=0)return ke;if(He=!!(2&Ce),!Ue&&Le)return 3;if(K!=null&&(K[0]=!!(16&Ce)),J!=null&&(J[0]=He),se!=null&&(se[0]=0),J=ue[0],Ce=be[0],Le&&He&&oe==null){ke=0;break}if(4>C){ke=7;break}if(Ue&&Le||!Ue&&!Le&&!t(m,x[0],"ALPH")){C=[C],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{Tt=m,ke=x,Ue=C;var Lt=xe.gb;lt=xe.na,nt=xe.P,Rt=xe.Sa,ln=22,e(Tt!=null),e(Ue!=null),Ye=ke[0];var kn=Ue[0];for(e(lt!=null),e(Rt!=null),lt[0]=null,nt[0]=null,Rt[0]=0;;){if(ke[0]=Ye,Ue[0]=kn,8>kn){ke=7;break e}var pr=ot(Tt,Ye+4);if(4294967286<pr){ke=3;break e}var gn=8+pr+1&-2;if(ln+=gn,0<Lt&&ln>Lt){ke=3;break e}if(!t(Tt,Ye,"VP8 ")||!t(Tt,Ye,"VP8L")){ke=0;break e}if(kn[0]<gn){ke=7;break e}t(Tt,Ye,"ALPH")||(lt[0]=Tt,nt[0]=Ye+8,Rt[0]=pr),Ye+=gn,kn-=gn}}if(C=C[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],ke!=0)break}C=[C],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(Lt=m,ke=x,Ue=C,lt=xe.gb[0],nt=xe.Ja,Rt=xe.xa,Tt=ke[0],Ye=!t(Lt,Tt,"VP8 "),ln=!t(Lt,Tt,"VP8L"),e(Lt!=null),e(Ue!=null),e(nt!=null),e(Rt!=null),8>Ue[0])ke=7;else{if(Ye||ln){if(Lt=ot(Lt,Tt+4),12<=lt&&Lt>lt-12){ke=3;break e}if(ce&&Lt>Ue[0]-8){ke=7;break e}nt[0]=Lt,ke[0]+=8,Ue[0]-=8,Rt[0]=ln}else Rt[0]=5<=Ue[0]&&Lt[Tt+0]==47&&!(Lt[Tt+4]>>5),nt[0]=Ue[0];ke=0}if(C=C[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],x=x[0],ke!=0)break;if(4294967286<xe.Ja)return 3;if(se==null||He||(se[0]=xe.xa?2:1),J=[J],Ce=[Ce],xe.xa){if(5>C){ke=7;break}se=J,ce=Ce,He=K,m==null||5>C?m=0:5<=C&&m[x+0]==47&&!(m[x+4]>>5)?(Ue=[0],Lt=[0],lt=[0],fe(nt=new $,m,x,C),Et(nt,Ue,Lt,lt)?(se!=null&&(se[0]=Ue[0]),ce!=null&&(ce[0]=Lt[0]),He!=null&&(He[0]=lt[0]),m=1):m=0):m=0}else{if(10>C){ke=7;break}se=Ce,m==null||10>C||!Xi(m,x+3,C-3)?m=0:(ce=m[x+0]|m[x+1]<<8|m[x+2]<<16,He=16383&(m[x+7]<<8|m[x+6]),m=16383&(m[x+9]<<8|m[x+8]),1&ce||3<(ce>>1&7)||!(ce>>4&1)||ce>>5>=xe.Ja||!He||!m?m=0:(J&&(J[0]=He),se&&(se[0]=m),m=1))}if(!m||(J=J[0],Ce=Ce[0],Le&&(ue[0]!=J||be[0]!=Ce)))return 3;oe!=null&&(oe[0]=xe,oe.offset=x-oe.w,e(4294967286>x-oe.w),e(oe.offset==oe.ha-C));break}return ke==0||ke==7&&Le&&oe==null?(K!=null&&(K[0]|=xe.na!=null&&0<xe.na.length),M!=null&&(M[0]=J),U!=null&&(U[0]=Ce),0):ke}function Wa(m,x,C){var M=x.width,U=x.height,K=0,J=0,se=M,oe=U;if(x.Da=m!=null&&0<m.Da,x.Da&&(se=m.cd,oe=m.bd,K=m.v,J=m.j,11>C||(K&=-2,J&=-2),0>K||0>J||0>=se||0>=oe||K+se>M||J+oe>U))return 0;if(x.v=K,x.j=J,x.va=K+se,x.o=J+oe,x.U=se,x.T=oe,x.da=m!=null&&0<m.da,x.da){if(!et(se,oe,C=[m.ib],K=[m.hb]))return 0;x.ib=C[0],x.hb=K[0]}return x.ob=m!=null&&m.ob,x.Kb=m==null||!m.Sd,x.da&&(x.ob=x.ib<3*M/4&&x.hb<3*U/4,x.Kb=0),1}function Gc(m){if(m==null)return 2;if(11>m.S){var x=m.f.RGBA;x.fb+=(m.height-1)*x.A,x.A=-x.A}else x=m.f.kb,m=m.height,x.O+=(m-1)*x.fa,x.fa=-x.fa,x.N+=(m-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(m-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(m-1)*x.lb,x.lb=-x.lb);return 0}function ta(m,x,C,M){if(M==null||0>=m||0>=x)return 2;if(C!=null){if(C.Da){var U=C.cd,K=C.bd,J=-2&C.v,se=-2&C.j;if(0>J||0>se||0>=U||0>=K||J+U>m||se+K>x)return 2;m=U,x=K}if(C.da){if(!et(m,x,U=[C.ib],K=[C.hb]))return 2;m=U[0],x=K[0]}}M.width=m,M.height=x;e:{var oe=M.width,ue=M.height;if(m=M.S,0>=oe||0>=ue||!(m>=Uu&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){J=K=U=x=0;var be=(se=oe*Qu[m])*ue;if(11>m||(K=(ue+1)/2*(x=(oe+1)/2),m==12&&(J=(U=oe)*ue)),(ue=o(be+2*K+J))==null){m=1;break e}M.sd=ue,11>m?((oe=M.f.RGBA).eb=ue,oe.fb=0,oe.A=se,oe.size=be):((oe=M.f.kb).y=ue,oe.O=0,oe.fa=se,oe.Fd=be,oe.f=ue,oe.N=0+be,oe.Ab=x,oe.Cd=K,oe.ea=ue,oe.W=0+be+K,oe.Db=x,oe.Ed=K,m==12&&(oe.F=ue,oe.J=0+be+2*K),oe.Tc=J,oe.lb=U)}if(x=1,U=M.S,K=M.width,J=M.height,U>=Uu&&13>U)if(11>U)m=M.f.RGBA,x&=(se=Math.abs(m.A))*(J-1)+K<=m.size,x&=se>=K*Qu[U],x&=m.eb!=null;else{m=M.f.kb,se=(K+1)/2,be=(J+1)/2,oe=Math.abs(m.fa),ue=Math.abs(m.Ab);var Le=Math.abs(m.Db),ce=Math.abs(m.lb),xe=ce*(J-1)+K;x&=oe*(J-1)+K<=m.Fd,x&=ue*(be-1)+se<=m.Cd,x=(x&=Le*(be-1)+se<=m.Ed)&oe>=K&ue>=se&Le>=se,x&=m.y!=null,x&=m.f!=null,x&=m.ea!=null,U==12&&(x&=ce>=K,x&=xe<=m.Tc,x&=m.F!=null)}else x=0;m=x?0:2}}return m!=0||C!=null&&C.fd&&(m=Gc(M)),m}var To=64,si=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xs=24,va=32,ya=8,Ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qe("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(m){return m},F.Predictor2=function(m,x,C){return x[C+0]},F.Predictor3=function(m,x,C){return x[C+1]},F.Predictor4=function(m,x,C){return x[C-1]},F.Predictor5=function(m,x,C){return Te(Te(m,x[C+1]),x[C+0])},F.Predictor6=function(m,x,C){return Te(m,x[C-1])},F.Predictor7=function(m,x,C){return Te(m,x[C+0])},F.Predictor8=function(m,x,C){return Te(x[C-1],x[C+0])},F.Predictor9=function(m,x,C){return Te(x[C+0],x[C+1])},F.Predictor10=function(m,x,C){return Te(Te(m,x[C-1]),Te(x[C+0],x[C+1]))},F.Predictor11=function(m,x,C){var M=x[C+0];return 0>=mt(M>>24&255,m>>24&255,(x=x[C-1])>>24&255)+mt(M>>16&255,m>>16&255,x>>16&255)+mt(M>>8&255,m>>8&255,x>>8&255)+mt(255&M,255&m,255&x)?M:m},F.Predictor12=function(m,x,C){var M=x[C+0];return(tt((m>>24&255)+(M>>24&255)-((x=x[C-1])>>24&255))<<24|tt((m>>16&255)+(M>>16&255)-(x>>16&255))<<16|tt((m>>8&255)+(M>>8&255)-(x>>8&255))<<8|tt((255&m)+(255&M)-(255&x)))>>>0},F.Predictor13=function(m,x,C){var M=x[C-1];return(bt((m=Te(m,x[C+0]))>>24&255,M>>24&255)<<24|bt(m>>16&255,M>>16&255)<<16|bt(m>>8&255,M>>8&255)<<8|bt(255&m,255&M))>>>0};var Gl=F.PredictorAdd0;F.PredictorAdd1=st,qe("Predictor2","PredictorAdd2"),qe("Predictor3","PredictorAdd3"),qe("Predictor4","PredictorAdd4"),qe("Predictor5","PredictorAdd5"),qe("Predictor6","PredictorAdd6"),qe("Predictor7","PredictorAdd7"),qe("Predictor8","PredictorAdd8"),qe("Predictor9","PredictorAdd9"),qe("Predictor10","PredictorAdd10"),qe("Predictor11","PredictorAdd11"),qe("Predictor12","PredictorAdd12"),qe("Predictor13","PredictorAdd13");var $l=F.PredictorAdd2;Ee("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),Ee("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Ur,Pu=F.ColorIndexInverseTransform,xa=F.MapARGB,wa=F.VP8LColorIndexInverseTransformAlpha,As=F.MapAlpha,$a=F.VP8LPredictorsAdd=[];$a.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var Yl,Xl,Ya,Xa,_a,al,gi,Za,Rs,Ci,Hn,Vn,ar,Hr,Sa,na,ol,$c,od,If,Vf,Ff,ld,cd,ll,Ti,Yc,bi,cl=o(511),zu=o(2041),Xc=o(225),Zc=o(767),qu=0,Ka=zu,Kc=Xc,Is=Zc,Cs=cl,Uu=0,Vs=1,Hu=2,ki=3,Qc=4,Zl=5,ko=6,Jc=7,Wu=8,Kl=9,Gu=10,ji=[2,3,7],Ql=[3,3,11],ul=[280,256,256,256,40],$u=[0,1,1,1,0],eu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ei=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jo=8,Li=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Oi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vi=null,Bf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ud=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ts=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zs=[],Or=[],ra=[],Eo=1,hd=2,Qa=[],ks=[];qa("UpsampleRgbLinePair",Ua,3),qa("UpsampleBgrLinePair",fs,3),qa("UpsampleRgbaLinePair",Ys,4),qa("UpsampleBgraLinePair",ba,4),qa("UpsampleArgbLinePair",Hl,4),qa("UpsampleRgba4444LinePair",Co,2),qa("UpsampleRgb565LinePair",Ao,2);var hl=F.UpsampleRgbLinePair,dd=F.UpsampleBgrLinePair,Jl=F.UpsampleRgbaLinePair,Xu=F.UpsampleBgraLinePair,Mo=F.UpsampleArgbLinePair,Na=F.UpsampleRgba4444LinePair,Lo=F.UpsampleRgb565LinePair,Di=16,ec=1<<Di-1,dl=-227,Oo=482,Zu=6,Do=0,js=o(256),Ku=o(256),zf=o(256),d0=o(256),f0=o(Oo-dl),p0=o(Oo-dl);Ha("YuvToRgbRow",Ua,3),Ha("YuvToBgrRow",fs,3),Ha("YuvToRgbaRow",Ys,4),Ha("YuvToBgraRow",ba,4),Ha("YuvToArgbRow",Hl,4),Ha("YuvToRgba4444Row",Co,2),Ha("YuvToRgb565Row",Ao,2);var Wr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tc=[0,2,8],tu=[8,7,6,4,4,2,2,2,1,1,1,1],nu=1;this.WebPDecodeRGBA=function(m,x,C,M,U){var K=Vs,J=new $e,se=new At;J.ba=se,se.S=K,se.width=[se.width],se.height=[se.height];var oe=se.width,ue=se.height,be=new wt;if(be==null||m==null)var Le=2;else e(be!=null),Le=ea(m,x,C,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Le!=0?oe=0:(oe!=null&&(oe[0]=be.width[0]),ue!=null&&(ue[0]=be.height[0]),oe=1),oe){se.width=se.width[0],se.height=se.height[0],M!=null&&(M[0]=se.width),U!=null&&(U[0]=se.height);e:{if(M=new ni,(U=new rt).data=m,U.w=x,U.ha=C,U.kd=1,x=[0],e(U!=null),((m=ea(U.data,U.w,U.ha,null,null,null,x,null,U))==0||m==7)&&x[0]&&(m=4),(x=m)==0){if(e(J!=null),M.data=U.data,M.w=U.w+U.offset,M.ha=U.ha-U.offset,M.put=Ve,M.ac=we,M.bc=pt,M.ma=J,U.xa){if((m=je())==null){J=1;break e}if((function(ce,xe){var Ce=[0],He=[0],ke=[0];t:for(;;){if(ce==null)return 0;if(xe==null)return ce.a=2,0;if(ce.l=xe,ce.a=0,fe(ce.m,xe.data,xe.w,xe.ha),!Et(ce.m,Ce,He,ke)){ce.a=3;break t}if(ce.xb=hd,xe.width=Ce[0],xe.height=He[0],!Pe(Ce[0],He[0],1,ce,null))break t;return 1}return e(ce.a!=0),0})(m,M)){if(M=(x=ta(M.width,M.height,J.Oa,J.ba))==0){t:{M=m;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((C=M.l)!=null),e((U=C.ma)!=null),M.xb!=0){if(M.ca=U.ba,M.tb=U.tb,e(M.ca!=null),!Wa(U.Oa,C,ki)){M.a=2;break n}if(!Ze(M,C.width)||C.da)break n;if((C.da||jt(M.ca.S))&&Qi(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Qi()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!Y(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!Er(M,M.V,M.Ba,M.c,M.i,C.o,Gn))break n;U.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(x=m.a)}else x=m.a}else{if((m=new Gs)==null){J=1;break e}if(m.Fa=U.na,m.P=U.P,m.qc=U.Sa,Ds(m,M)){if((x=ta(M.width,M.height,J.Oa,J.ba))==0){if(m.Aa=0,C=J.Oa,e((U=m)!=null),C!=null){if(0<(oe=0>(oe=C.Md)?0:100<oe?255:255*oe/100)){for(ue=be=0;4>ue;++ue)12>(Le=U.pb[ue]).lc&&(Le.ia=oe*tu[0>Le.lc?0:Le.lc]>>3),be|=Le.ia;be&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=C.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(ce,xe){if(ce==null)return 0;if(xe==null)return Nn(ce,2,"NULL VP8Io parameter in VP8Decode().");if(!ce.cb&&!Ds(ce,xe))return 0;if(e(ce.cb),xe.ac==null||xe.ac(xe)){xe.ob&&(ce.L=0);var Ce=tc[ce.L];if(ce.L==2?(ce.yb=0,ce.zb=0):(ce.yb=xe.v-Ce>>4,ce.zb=xe.j-Ce>>4,0>ce.yb&&(ce.yb=0),0>ce.zb&&(ce.zb=0)),ce.Va=xe.o+15+Ce>>4,ce.Hb=xe.va+15+Ce>>4,ce.Hb>ce.za&&(ce.Hb=ce.za),ce.Va>ce.Ub&&(ce.Va=ce.Ub),0<ce.L){var He=ce.ed;for(Ce=0;4>Ce;++Ce){var ke;if(ce.Qa.Cb){var Ue=ce.Qa.Lb[Ce];ce.Qa.Fb||(Ue+=He.Tb)}else Ue=He.Tb;for(ke=0;1>=ke;++ke){var Ye=ce.gd[Ce][ke],lt=Ue;if(He.Pc&&(lt+=He.vd[0],ke&&(lt+=He.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var nt=lt;0<He.wb&&(nt=4<He.wb?nt>>2:nt>>1)>9-He.wb&&(nt=9-He.wb),1>nt&&(nt=1),Ye.dd=nt,Ye.tc=2*lt+nt,Ye.ld=40<=lt?2:15<=lt?1:0}else Ye.tc=0;Ye.La=ke}}}Ce=0}else Nn(ce,6,"Frame setup failed"),Ce=ce.a;if(Ce=Ce==0){if(Ce){ce.$c=0,0<ce.Aa||(ce.Ic=nu);t:{Ce=ce.Ic,He=4*(nt=ce.za);var Rt=32*nt,Tt=nt+1,ln=0<ce.L?nt*(0<ce.Aa?2:1):0,Lt=(ce.Aa==2?2:1)*nt;if((Ye=He+832+(ke=3*(16*Ce+tc[ce.L])/2*Rt)+(Ue=ce.Fa!=null&&0<ce.Fa.length?ce.Kc.c*ce.Kc.i:0))!=Ye)Ce=0;else{if(Ye>ce.Vb){if(ce.Vb=0,ce.Ec=o(Ye),ce.Fc=0,ce.Ec==null){Ce=Nn(ce,1,"no memory during frame initialization.");break t}ce.Vb=Ye}Ye=ce.Ec,lt=ce.Fc,ce.Ac=Ye,ce.Bc=lt,lt+=He,ce.Gd=u(Rt,_s),ce.Hd=0,ce.rb=u(Tt+1,Tn),ce.sb=1,ce.wa=ln?u(ln,Pn):null,ce.Y=0,ce.D.Nb=0,ce.D.wa=ce.wa,ce.D.Y=ce.Y,0<ce.Aa&&(ce.D.Y+=nt),e(!0),ce.oc=Ye,ce.pc=lt,lt+=832,ce.ya=u(Lt,$r),ce.aa=0,ce.D.ya=ce.ya,ce.D.aa=ce.aa,ce.Aa==2&&(ce.D.aa+=nt),ce.R=16*nt,ce.B=8*nt,nt=(Rt=tc[ce.L])*ce.R,Rt=Rt/2*ce.B,ce.sa=Ye,ce.ta=lt+nt,ce.qa=ce.sa,ce.ra=ce.ta+16*Ce*ce.R+Rt,ce.Ha=ce.qa,ce.Ia=ce.ra+8*Ce*ce.B+Rt,ce.$c=0,lt+=ke,ce.mb=Ue?Ye:null,ce.nb=Ue?lt:null,e(lt+Ue<=ce.Fc+ce.Vb),_o(ce),a(ce.Ac,ce.Bc,0,He),Ce=1}}if(Ce){if(xe.ka=0,xe.y=ce.sa,xe.O=ce.ta,xe.f=ce.qa,xe.N=ce.ra,xe.ea=ce.Ha,xe.Vd=ce.Ia,xe.fa=ce.R,xe.Rc=ce.B,xe.F=null,xe.J=0,!qu){for(Ce=-255;255>=Ce;++Ce)cl[255+Ce]=0>Ce?-Ce:Ce;for(Ce=-1020;1020>=Ce;++Ce)zu[1020+Ce]=-128>Ce?-128:127<Ce?127:Ce;for(Ce=-112;112>=Ce;++Ce)Xc[112+Ce]=-16>Ce?-16:15<Ce?15:Ce;for(Ce=-255;510>=Ce;++Ce)Zc[255+Ce]=0>Ce?0:255<Ce?255:Ce;qu=1}gi=Zi,Za=Qo,Ci=$s,Hn=Vc,Vn=Fc,Rs=Bl,ar=Fu,Hr=Pa,Sa=q,na=he,ol=Bu,$c=S,od=ge,If=Ne,Vf=Ia,Ff=Va,ld=sl,cd=Uc,Or[0]=Iu,Or[1]=Lu,Or[2]=Ru,Or[3]=zc,Or[4]=fi,Or[5]=qc,Or[6]=Ss,Or[7]=tl,Or[8]=nl,Or[9]=pi,Zs[0]=Ki,Zs[1]=Bc,Zs[2]=Pc,Zs[3]=Du,Zs[4]=Da,Zs[5]=el,Zs[6]=No,ra[0]=Pl,ra[1]=Ou,ra[2]=pa,ra[3]=Vu,ra[4]=ds,ra[5]=zl,ra[6]=ma,Ce=1}else Ce=0}Ce&&(Ce=(function(kn,pr){for(kn.M=0;kn.M<kn.Va;++kn.M){var gn,kt=kn.Jc[kn.M&kn.Xb],_t=kn.m,wr=kn;for(gn=0;gn<wr.za;++gn){var Zt=_t,yn=wr,Zn=yn.Ac,ss=yn.Bc+4*gn,Es=yn.zc,or=yn.ya[yn.aa+gn];if(yn.Qa.Bb?or.$b=Se(Zt,yn.Pa.jb[0])?2+Se(Zt,yn.Pa.jb[2]):Se(Zt,yn.Pa.jb[1]):or.$b=0,yn.kc&&(or.Ad=Se(Zt,yn.Bd)),or.Za=!Se(Zt,145)+0,or.Za){var Xr=or.Ob,Fs=0;for(yn=0;4>yn;++yn){var Zr,An=Es[0+yn];for(Zr=0;4>Zr;++Zr){An=Ts[Zn[ss+Zr]][An];for(var zn=Yu[Se(Zt,An[0])];0<zn;)zn=Yu[2*zn+Se(Zt,An[zn])];An=-zn,Zn[ss+Zr]=An}s(Xr,Fs,Zn,ss,4),Fs+=4,Es[0+yn]=An}}else An=Se(Zt,156)?Se(Zt,128)?1:3:Se(Zt,163)?2:0,or.Ob[0]=An,a(Zn,ss,An,4),a(Es,0,An,4);or.Dd=Se(Zt,142)?Se(Zt,114)?Se(Zt,183)?1:3:2:0}if(wr.m.Ka)return Nn(kn,7,"Premature end-of-partition0 encountered.");for(;kn.ja<kn.za;++kn.ja){if(wr=kt,Zt=(_t=kn).rb[_t.sb-1],Zn=_t.rb[_t.sb+_t.ja],gn=_t.ya[_t.aa+_t.ja],ss=_t.kc?gn.Ad:0)Zt.la=Zn.la=0,gn.Za||(Zt.Na=Zn.Na=0),gn.Hc=0,gn.Gc=0,gn.ia=0;else{var _r,Wn;if(Zt=Zn,Zn=wr,ss=_t.Pa.Xc,Es=_t.ya[_t.aa+_t.ja],or=_t.pb[Es.$b],yn=Es.ad,Xr=0,Fs=_t.rb[_t.sb-1],An=Zr=0,a(yn,Xr,0,384),Es.Za)var is=0,Sr=ss[3];else{zn=o(16);var qn=Zt.Na+Fs.Na;if(qn=vi(Zn,ss[1],qn,or.Eb,0,zn,0),Zt.Na=Fs.Na=(0<qn)+0,1<qn)gi(zn,0,yn,Xr);else{var Gr=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)yn[Xr+zn]=Gr}is=1,Sr=ss[0]}var Kn=15&Zt.la,Kr=15&Fs.la;for(zn=0;4>zn;++zn){var Qr=1&Kr;for(Gr=Wn=0;4>Gr;++Gr)Kn=Kn>>1|(Qr=(qn=vi(Zn,Sr,qn=Qr+(1&Kn),or.Sc,is,yn,Xr))>is)<<7,Wn=Wn<<2|(3<qn?3:1<qn?2:yn[Xr+0]!=0),Xr+=16;Kn>>=4,Kr=Kr>>1|Qr<<7,Zr=(Zr<<8|Wn)>>>0}for(Sr=Kn,is=Kr>>4,_r=0;4>_r;_r+=2){for(Wn=0,Kn=Zt.la>>4+_r,Kr=Fs.la>>4+_r,zn=0;2>zn;++zn){for(Qr=1&Kr,Gr=0;2>Gr;++Gr)qn=Qr+(1&Kn),Kn=Kn>>1|(Qr=0<(qn=vi(Zn,ss[2],qn,or.Qc,0,yn,Xr)))<<3,Wn=Wn<<2|(3<qn?3:1<qn?2:yn[Xr+0]!=0),Xr+=16;Kn>>=2,Kr=Kr>>1|Qr<<5}An|=Wn<<4*_r,Sr|=Kn<<4<<_r,is|=(240&Kr)<<_r}Zt.la=Sr,Fs.la=is,Es.Hc=Zr,Es.Gc=An,Es.ia=43690&An?0:or.ia,ss=!(Zr|An)}if(0<_t.L&&(_t.wa[_t.Y+_t.ja]=_t.gd[gn.$b][gn.Za],_t.wa[_t.Y+_t.ja].La|=!ss),wr.Ka)return Nn(kn,7,"Premature end-of-file encountered.")}if(_o(kn),_t=pr,wr=1,gn=(kt=kn).D,Zt=0<kt.L&&kt.M>=kt.zb&&kt.M<=kt.Va,kt.Aa==0)t:{if(gn.M=kt.M,gn.uc=Zt,mi(kt,gn),wr=1,gn=(Wn=kt.D).Nb,Zt=(An=tc[kt.L])*kt.R,Zn=An/2*kt.B,zn=16*gn*kt.R,Gr=8*gn*kt.B,ss=kt.sa,Es=kt.ta-Zt+zn,or=kt.qa,yn=kt.ra-Zn+Gr,Xr=kt.Ha,Fs=kt.Ia-Zn+Gr,Kr=(Kn=Wn.M)==0,Zr=Kn>=kt.Va-1,kt.Aa==2&&mi(kt,Wn),Wn.uc)for(Qr=(qn=kt).D.M,e(qn.D.uc),Wn=qn.yb;Wn<qn.Hb;++Wn){is=Wn,Sr=Qr;var er=(Fn=(Jr=qn).D).Nb;_r=Jr.R;var Fn=Fn.wa[Fn.Y+is],Bs=Jr.sa,Dr=Jr.ta+16*er*_r+16*is,Wt=Fn.dd,Gt=Fn.tc;if(Gt!=0)if(e(3<=Gt),Jr.L==1)0<is&&Ff(Bs,Dr,_r,Gt+4),Fn.La&&cd(Bs,Dr,_r,Gt),0<Sr&&Vf(Bs,Dr,_r,Gt+4),Fn.La&&ld(Bs,Dr,_r,Gt);else{var Un=Jr.B,ii=Jr.qa,Ri=Jr.ra+8*er*Un+8*is,Ks=Jr.Ha,Jr=Jr.Ia+8*er*Un+8*is;er=Fn.ld,0<is&&(Hr(Bs,Dr,_r,Gt+4,Wt,er),na(ii,Ri,Ks,Jr,Un,Gt+4,Wt,er)),Fn.La&&($c(Bs,Dr,_r,Gt,Wt,er),If(ii,Ri,Ks,Jr,Un,Gt,Wt,er)),0<Sr&&(ar(Bs,Dr,_r,Gt+4,Wt,er),Sa(ii,Ri,Ks,Jr,Un,Gt+4,Wt,er)),Fn.La&&(ol(Bs,Dr,_r,Gt,Wt,er),od(ii,Ri,Ks,Jr,Un,Gt,Wt,er))}}if(kt.ia&&alert("todo:DitherRow"),_t.put!=null){if(Wn=16*Kn,Kn=16*(Kn+1),Kr?(_t.y=kt.sa,_t.O=kt.ta+zn,_t.f=kt.qa,_t.N=kt.ra+Gr,_t.ea=kt.Ha,_t.W=kt.Ia+Gr):(Wn-=An,_t.y=ss,_t.O=Es,_t.f=or,_t.N=yn,_t.ea=Xr,_t.W=Fs),Zr||(Kn-=An),Kn>_t.o&&(Kn=_t.o),_t.F=null,_t.J=null,kt.Fa!=null&&0<kt.Fa.length&&Wn<Kn&&(_t.J=ir(kt,_t,Wn,Kn-Wn),_t.F=kt.mb,_t.F==null&&_t.F.length==0)){wr=Nn(kt,3,"Could not decode alpha data.");break t}Wn<_t.j&&(An=_t.j-Wn,Wn=_t.j,e(!(1&An)),_t.O+=kt.R*An,_t.N+=kt.B*(An>>1),_t.W+=kt.B*(An>>1),_t.F!=null&&(_t.J+=_t.width*An)),Wn<Kn&&(_t.O+=_t.v,_t.N+=_t.v>>1,_t.W+=_t.v>>1,_t.F!=null&&(_t.J+=_t.v),_t.ka=Wn-_t.j,_t.U=_t.va-_t.v,_t.T=Kn-Wn,wr=_t.put(_t))}gn+1!=kt.Ic||Zr||(s(kt.sa,kt.ta-Zt,ss,Es+16*kt.R,Zt),s(kt.qa,kt.ra-Zn,or,yn+8*kt.B,Zn),s(kt.Ha,kt.Ia-Zn,Xr,Fs+8*kt.B,Zn))}if(!wr)return Nn(kn,6,"Output aborted.")}return 1})(ce,xe)),xe.bc!=null&&xe.bc(xe),Ce&=1}return Ce?(ce.cb=0,Ce):0})(m,M)||(x=m.a)}}else x=m.a}x==0&&J.Oa!=null&&J.Oa.fd&&(x=Gc(J.ba))}J=x}K=J!=0?null:11>K?se.f.RGBA.eb:se.f.kb.y}else K=null;return K};var Qu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(F,te){for(var j="",I=0;I<4;I++)j+=String.fromCharCode(F[te++]);return j}function p(F,te){return F[te+0]|F[te+1]<<8}function y(F,te){return(F[te+0]|F[te+1]<<8|F[te+2]<<16)>>>0}function _(F,te){return(F[te+0]|F[te+1]<<8|F[te+2]<<16|F[te+3]<<24)>>>0}new h;var b=[0],A=[0],N=[],k=new h,T=n,R=(function(F,te){var j={},I=0,X=!1,P=0,ae=0;if(j.frames=[],!(function(E,$){for(var G=0;G<4;G++)if(E[$+G]!="RIFF".charCodeAt(G))return!0;return!1})(F,te)){for(_(F,te+=4),te+=8;te<F.length;){var Z=f(F,te),re=_(F,te+=4);te+=4;var le=re+(1&re);switch(Z){case"VP8 ":case"VP8L":j.frames[I]===void 0&&(j.frames[I]={}),(z=j.frames[I]).src_off=X?ae:te-8,z.src_size=P+re+8,I++,X&&(X=!1,P=0,ae=0);break;case"VP8X":(z=j.header={}).feature_flags=F[te];var fe=te+4;z.canvas_width=1+y(F,fe),fe+=3,z.canvas_height=1+y(F,fe),fe+=3;break;case"ALPH":X=!0,P=le+8,ae=te-8;break;case"ANIM":(z=j.header).bgcolor=_(F,te),fe=te+4,z.loop_count=p(F,fe),fe+=2;break;case"ANMF":var _e,z;(z=j.frames[I]={}).offset_x=2*y(F,te),te+=3,z.offset_y=2*y(F,te),te+=3,z.width=1+y(F,te),te+=3,z.height=1+y(F,te),te+=3,z.duration=y(F,te),te+=3,_e=F[te++],z.dispose=1&_e,z.blend=_e>>1&1}Z!="ANMF"&&(te+=le)}return j}})(T,0);R.response=T,R.rgbaoutput=!0,R.dataurl=!1;var D=R.header?R.header:null,V=R.frames?R.frames:null;if(D){D.loop_counter=D.loop_count,b=[D.canvas_height],A=[D.canvas_width];for(var B=0;B<V.length&&V[B].blend!=0;B++);}var W=V[0],H=k.WebPDecodeRGBA(T,W.src_off,W.src_size,A,b);W.rgba=H,W.imgwidth=A[0],W.imgheight=b[0];for(var L=0;L<A[0]*b[0]*4;L++)N[L]=H[L];return this.width=A,this.height=b,this.data=N,this}(function(n){var e,t,s,a,o,u,c,h,f,p=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new h,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new u,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new u,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var y=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=E;Object.defineProperty(this,"pdf",{get:function(){return $}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(Y){G=!!Y}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(Y){Q=!!Y}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(Y){isNaN(Y)||(ie=Y)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Y){isNaN(Y)||(pe=Y)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Y){var Ie;typeof Y=="number"?Ie=[Y,Y,Y,Y]:((Ie=new Array(4))[0]=Y[0],Ie[1]=Y.length>=2?Y[1]:Ie[0],Ie[2]=Y.length>=3?Y[2]:Ie[0],Ie[3]=Y.length>=4?Y[3]:Ie[1]),f.margin=Ie}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(Y){de=Y}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(Y){ye=Y}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(Y){Se=Y}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Y){Y instanceof p&&(f=Y)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Y){f.path=Y}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Y){Be=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var Ie;Ie=_(Y),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var Ie=_(Y);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var Qe=null,Xe=null,ot=null;Object.defineProperty(this,"fontFaces",{get:function(){return ot},set:function(Y){Qe=null,Xe=null,ot=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var Ie;if(this.ctx.font=Y,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var vt=Ie[1];Ie[2];var et=Ie[3],Re=Ie[4];Ie[5];var it=Ie[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Re)[2];Re=Math.floor(qe==="px"?parseFloat(Re)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(Re)*this.pdf.getFontSize():parseFloat(Re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Re);var ht=(function(Ee){var ft,ut,We=[],at=Ee.trim();if(at==="")return eg;if(at in vx)return[vx[at]];for(;at!=="";){switch(ut=null,ft=(at=xx(at)).charAt(0)){case'"':case"'":ut=RL(at.substring(1),ft);break;default:ut=IL(at)}if(ut===null||(We.push(ut[0]),(at=xx(ut[1]))!==""&&at.charAt(0)!==","))return eg;at=at.replace(/^,/,"")}return We})(it);if(this.fontFaces){var Te=(function(Ee,ft){var ut=Ee.getFontList(),We=JSON.stringify(ut);if(Qe===null||Xe!==We){var at=(function(xt){var ct=[];return Object.keys(xt).forEach(function(nn){xt[nn].forEach(function(jt){var Ft=null;switch(jt){case"bold":Ft={family:nn,weight:"bold"};break;case"italic":Ft={family:nn,style:"italic"};break;case"bolditalic":Ft={family:nn,weight:"bold",style:"italic"};break;case"":case"normal":Ft={family:nn}}Ft!==null&&(Ft.ref={name:nn,style:jt},ct.push(Ft))})}),ct})(ut);Qe=(function(xt){for(var ct={},nn=0;nn<xt.length;++nn){var jt=Jm(xt[nn]),Ft=jt.family,en=jt.stretch,At=jt.style,wt=jt.weight;ct[Ft]=ct[Ft]||{},ct[Ft][en]=ct[Ft][en]||{},ct[Ft][en][At]=ct[Ft][en][At]||{},ct[Ft][en][At][wt]=jt}return ct})(at.concat(ft)),Xe=We}return Qe})(this.pdf,this.fontFaces),tt=ht.map(function(Ee){return{family:Ee,stretch:"normal",weight:et,style:vt}}),bt=(function(Ee,ft,ut){for(var We=(ut=ut||{}).defaultFontFamily||"times",at=Object.assign({},DL,ut.genericFontFamilies||{}),xt=null,ct=null,nn=0;nn<ft.length;++nn)if(at[(xt=Jm(ft[nn])).family]&&(xt.family=at[xt.family]),Ee.hasOwnProperty(xt.family)){ct=Ee[xt.family];break}if(!(ct=ct||Ee[We]))throw new Error("Could not find a font-family for the rule '"+yx(xt)+"' and default family '"+We+"'.");if(ct=(function(jt,Ft){if(Ft[jt])return Ft[jt];var en=Fg[jt],At=en<=Fg.normal?-1:1,wt=bx(Ft,F4,en,At);if(!wt)throw new Error("Could not find a matching font-stretch value for "+jt);return wt})(xt.stretch,ct),ct=(function(jt,Ft){if(Ft[jt])return Ft[jt];for(var en=V4[jt],At=0;At<en.length;++At)if(Ft[en[At]])return Ft[en[At]];throw new Error("Could not find a matching font-style for "+jt)})(xt.style,ct),!(ct=(function(jt,Ft){if(Ft[jt])return Ft[jt];if(jt===400&&Ft[500])return Ft[500];if(jt===500&&Ft[400])return Ft[400];var en=OL[jt],At=bx(Ft,B4,en,jt<400?-1:1);if(!At)throw new Error("Could not find a matching font-weight for value "+jt);return At})(xt.weight,ct)))throw new Error("Failed to resolve a font for the rule '"+yx(xt)+"'.");return ct})(Te,tt);this.pdf.setFont(bt.ref.name,bt.ref.style)}else{var mt="";(et==="bold"||parseInt(et,10)>=700||vt==="bold")&&(mt="bold"),vt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var st="",dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<ht.length;gt++){if(this.pdf.internal.getFont(ht[gt],mt,{noFallback:!0,disableWarning:!0})!==void 0){st=ht[gt];break}if(mt==="bolditalic"&&this.pdf.internal.getFont(ht[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=ht[gt],mt="bold";else if(this.pdf.internal.getFont(ht[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=ht[gt],mt="normal";break}}if(st===""){for(var Nt=0;Nt<ht.length;Nt++)if(dt[ht[Nt]]){st=dt[ht[Nt]];break}}st=st===""?"Times":st,this.pdf.setFont(st,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};y.prototype.setLineDash=function(E){this.lineDash=E},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(E,$){if(isNaN(E)||isNaN($))throw gr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new u(E,$));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new u(E,$)},y.prototype.closePath=function(){var E=new u(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&rr(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){E=new u(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(E.x,E.y)},y.prototype.lineTo=function(E,$){if(isNaN(E)||isNaN($))throw gr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new u(E,$));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new u(G.x,G.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(E,$,G,Q){if(isNaN(G)||isNaN(Q)||isNaN(E)||isNaN($))throw gr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new u(G,Q)),pe=this.ctx.transform.applyToPoint(new u(E,$));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new u(ie.x,ie.y)},y.prototype.bezierCurveTo=function(E,$,G,Q,ie,pe){if(isNaN(ie)||isNaN(pe)||isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q))throw gr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new u(ie,pe)),ye=this.ctx.transform.applyToPoint(new u(E,$)),Se=this.ctx.transform.applyToPoint(new u(G,Q));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:Se.x,y2:Se.y,x:de.x,y:de.y}),this.ctx.lastPoint=new u(de.x,de.y)},y.prototype.arc=function(E,$,G,Q,ie,pe){if(isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q)||isNaN(ie))throw gr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new u(E,$));E=de.x,$=de.y;var ye=this.ctx.transform.applyToPoint(new u(0,G)),Se=this.ctx.transform.applyToPoint(new u(0,0));G=Math.sqrt(Math.pow(ye.x-Se.x,2)+Math.pow(ye.y-Se.y,2))}Math.abs(ie-Q)>=2*Math.PI&&(Q=0,ie=2*Math.PI),this.path.push({type:"arc",x:E,y:$,radius:G,startAngle:Q,endAngle:ie,counterclockwise:pe})},y.prototype.arcTo=function(E,$,G,Q,ie){throw new Error("arcTo not implemented.")},y.prototype.rect=function(E,$,G,Q){if(isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q))throw gr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,$),this.lineTo(E+G,$),this.lineTo(E+G,$+Q),this.lineTo(E,$+Q),this.lineTo(E,$),this.lineTo(E+G,$),this.lineTo(E,$)},y.prototype.fillRect=function(E,$,G,Q){if(isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q))throw gr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,$,G,Q),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},y.prototype.strokeRect=function(E,$,G,Q){if(isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q))throw gr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(E,$,G,Q),this.stroke())},y.prototype.clearRect=function(E,$,G,Q){if(isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q))throw gr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,$,G,Q))},y.prototype.save=function(E){E=typeof E!="boolean"||E;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage($),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},y.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage($),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(E){var $,G,Q,ie;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))$=0,G=0,Q=0,ie=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(pe!==null)$=parseInt(pe[1]),G=parseInt(pe[2]),Q=parseInt(pe[3]),ie=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)$=parseInt(pe[1]),G=parseInt(pe[2]),Q=parseInt(pe[3]),ie=parseFloat(pe[4]);else{if(ie=1,typeof E=="string"&&E.charAt(0)!=="#"){var de=new E4(E);E=de.ok?de.toHex():"#000000"}E.length===4?($=E.substring(1,2),$+=$,G=E.substring(2,3),G+=G,Q=E.substring(3,4),Q+=Q):($=E.substring(1,3),G=E.substring(3,5),Q=E.substring(5,7)),$=parseInt($,16),G=parseInt(G,16),Q=parseInt(Q,16)}}return{r:$,g:G,b:Q,a:ie,style:E}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(E,$,G,Q){if(isNaN($)||isNaN(G)||typeof E!="string")throw gr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!b.call(this)){var ie=le(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;I.call(this,{text:E,x:$,y:G,scale:pe,angle:ie,align:this.textAlign,maxWidth:Q})}},y.prototype.strokeText=function(E,$,G,Q){if(isNaN($)||isNaN(G)||typeof E!="string")throw gr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){Q=isNaN(Q)?void 0:Q;var ie=le(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;I.call(this,{text:E,x:$,y:G,scale:pe,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:Q})}},y.prototype.measureText=function(E){if(typeof E!="string")throw gr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,G=this.pdf.internal.scaleFactor,Q=$.internal.getFontSize(),ie=$.getStringUnitWidth(E)*Q/$.internal.scaleFactor;return new function(pe){var de=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this}({width:ie*=Math.round(96*G/72*1e4)/1e4})},y.prototype.scale=function(E,$){if(isNaN(E)||isNaN($))throw gr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new h(E,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},y.prototype.rotate=function(E){if(isNaN(E))throw gr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new h(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply($)},y.prototype.translate=function(E,$){if(isNaN(E)||isNaN($))throw gr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new h(1,0,0,1,E,$);this.ctx.transform=this.ctx.transform.multiply(G)},y.prototype.transform=function(E,$,G,Q,ie,pe){if(isNaN(E)||isNaN($)||isNaN(G)||isNaN(Q)||isNaN(ie)||isNaN(pe))throw gr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new h(E,$,G,Q,ie,pe);this.ctx.transform=this.ctx.transform.multiply(de)},y.prototype.setTransform=function(E,$,G,Q,ie,pe){E=isNaN(E)?1:E,$=isNaN($)?0:$,G=isNaN(G)?0:G,Q=isNaN(Q)?1:Q,ie=isNaN(ie)?0:ie,pe=isNaN(pe)?0:pe,this.ctx.transform=new h(E,$,G,Q,ie,pe)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(E,$,G,Q,ie,pe,de,ye,Se){var Be=this.pdf.getImageProperties(E),Qe=1,Xe=1,ot=1,Y=1;Q!==void 0&&ye!==void 0&&(ot=ye/Q,Y=Se/ie,Qe=Be.width/Q*ye/Q,Xe=Be.height/ie*Se/ie),pe===void 0&&(pe=$,de=G,$=0,G=0),Q!==void 0&&ye===void 0&&(ye=Q,Se=ie),Q===void 0&&ye===void 0&&(ye=Be.width,Se=Be.height);var Ie=this.ctx.transform.decompose(),vt=le(Ie.rotate.shx),et=new h,Re=(et=(et=(et=et.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new c(pe-$*ot,de-G*Y,Q*Qe,ie*Xe));if(this.autoPaging){for(var it,qe=k.call(this,Re),ht=[],Te=0;Te<qe.length;Te+=1)ht.indexOf(qe[Te])===-1&&ht.push(qe[Te]);D(ht);for(var tt=ht[0],bt=ht[ht.length-1],mt=tt;mt<bt+1;mt++){this.pdf.setPage(mt);var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=mt===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ee=mt===1?0:gt+(mt-2)*Nt;if(this.ctx.clip_path.length!==0){var ft=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(it,this.posX+this.margin[3],-Ee+dt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=ft}var ut=JSON.parse(JSON.stringify(Re));ut=R([ut],this.posX+this.margin[3],-Ee+dt+this.ctx.prevPageLastElemOffset)[0];var We=(mt>tt||mt<bt)&&N.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Nt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",ut.x,ut.y,ut.w,ut.h,null,null,vt),We&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(E,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,vt)};var k=function(E,$,G){var Q=[];$=$||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":Q.push(Math.floor((E.y+ie)/G)+1);break;case"arc":Q.push(Math.floor((E.y+ie-E.radius)/G)+1),Q.push(Math.floor((E.y+ie+E.radius)/G)+1);break;case"qct":var pe=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);Q.push(Math.floor((pe.y+ie)/G)+1),Q.push(Math.floor((pe.y+pe.h+ie)/G)+1);break;case"bct":var de=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);Q.push(Math.floor((de.y+ie)/G)+1),Q.push(Math.floor((de.y+de.h+ie)/G)+1);break;case"rect":Q.push(Math.floor((E.y+ie)/G)+1),Q.push(Math.floor((E.y+E.h+ie)/G)+1)}for(var ye=0;ye<Q.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<Q[ye];)T.call(this);return Q},T=function(){var E=this.fillStyle,$=this.strokeStyle,G=this.font,Q=this.lineCap,ie=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=$,this.font=G,this.lineCap=Q,this.lineWidth=ie,this.lineJoin=pe},R=function(E,$,G){for(var Q=0;Q<E.length;Q++)switch(E[Q].type){case"bct":E[Q].x2+=$,E[Q].y2+=G;case"qct":E[Q].x1+=$,E[Q].y1+=G;default:E[Q].x+=$,E[Q].y+=G}return E},D=function(E){return E.sort(function($,G){return $-G})},V=function(E,$){var G=this.fillStyle,Q=this.strokeStyle,ie=this.lineCap,pe=this.lineWidth,de=Math.abs(pe*this.ctx.transform.scaleX),ye=this.lineJoin;if(this.autoPaging){for(var Se,Be,Qe=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),ot=[],Y=0;Y<Xe.length;Y++)if(Xe[Y].x!==void 0)for(var Ie=k.call(this,Xe[Y]),vt=0;vt<Ie.length;vt+=1)ot.indexOf(Ie[vt])===-1&&ot.push(Ie[vt]);for(var et=0;et<ot.length;et++)for(;this.pdf.internal.getNumberOfPages()<ot[et];)T.call(this);D(ot);for(var Re=ot[0],it=ot[ot.length-1],qe=Re;qe<it+1;qe++){this.pdf.setPage(qe),this.fillStyle=G,this.strokeStyle=Q,this.lineCap=ie,this.lineWidth=de,this.lineJoin=ye;var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=qe===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=qe===1?0:tt+(qe-2)*bt;if(this.ctx.clip_path.length!==0){var st=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Se,this.posX+this.margin[3],-mt+Te+this.ctx.prevPageLastElemOffset),B.call(this,E,!0),this.path=st}if(Be=JSON.parse(JSON.stringify(Qe)),this.path=R(Be,this.posX+this.margin[3],-mt+Te+this.ctx.prevPageLastElemOffset),$===!1||qe===0){var dt=(qe>Re||qe<it)&&N.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,bt,null).clip().discardPath()),B.call(this,E,$),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=Qe}else this.lineWidth=de,B.call(this,E,$),this.lineWidth=pe},B=function(E,$){if((E!=="stroke"||$||!A.call(this))&&(E==="stroke"||$||!b.call(this))){for(var G,Q,ie=[],pe=this.path,de=0;de<pe.length;de++){var ye=pe[de];switch(ye.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ye,deltas:[],abs:[]});break;case"lt":var Se=ie.length;if(pe[de-1]&&!isNaN(pe[de-1].x)&&(G=[ye.x-pe[de-1].x,ye.y-pe[de-1].y],Se>0)){for(;Se>=0;Se--)if(ie[Se-1].close!==!0&&ie[Se-1].begin!==!0){ie[Se-1].deltas.push(G),ie[Se-1].abs.push(ye);break}}break;case"bct":G=[ye.x1-pe[de-1].x,ye.y1-pe[de-1].y,ye.x2-pe[de-1].x,ye.y2-pe[de-1].y,ye.x-pe[de-1].x,ye.y-pe[de-1].y],ie[ie.length-1].deltas.push(G);break;case"qct":var Be=pe[de-1].x+2/3*(ye.x1-pe[de-1].x),Qe=pe[de-1].y+2/3*(ye.y1-pe[de-1].y),Xe=ye.x+2/3*(ye.x1-ye.x),ot=ye.y+2/3*(ye.y1-ye.y),Y=ye.x,Ie=ye.y;G=[Be-pe[de-1].x,Qe-pe[de-1].y,Xe-pe[de-1].x,ot-pe[de-1].y,Y-pe[de-1].x,Ie-pe[de-1].y],ie[ie.length-1].deltas.push(G);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ye)}}Q=$?null:E==="stroke"?"stroke":"fill";for(var vt=!1,et=0;et<ie.length;et++)if(ie[et].arc)for(var Re=ie[et].abs,it=0;it<Re.length;it++){var qe=Re[it];qe.type==="arc"?L.call(this,qe.x,qe.y,qe.radius,qe.startAngle,qe.endAngle,qe.counterclockwise,void 0,$,!vt):X.call(this,qe.x,qe.y),vt=!0}else if(ie[et].close===!0)this.pdf.internal.out("h"),vt=!1;else if(ie[et].begin!==!0){var ht=ie[et].start.x,Te=ie[et].start.y;P.call(this,ie[et].deltas,ht,Te),vt=!0}Q&&F.call(this,Q),$&&te.call(this)}},W=function(E){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-G;case"top":return E+$-G;case"hanging":return E+$-2*G;case"middle":return E+$/2-G;default:return E}},H=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function($,G){this.colorStops.push([$,G])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(E,$,G,Q,ie,pe,de,ye,Se){for(var Be=Z.call(this,G,Q,ie,pe),Qe=0;Qe<Be.length;Qe++){var Xe=Be[Qe];Qe===0&&(Se?j.call(this,Xe.x1+E,Xe.y1+$):X.call(this,Xe.x1+E,Xe.y1+$)),ae.call(this,E,$,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}ye?te.call(this):F.call(this,de)},F=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},te=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(E,$){this.pdf.internal.out(t(E)+" "+s($)+" m")},I=function(E){var $;switch(E.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var G,Q,ie,pe=this.pdf.getTextDimensions(E.text),de=W.call(this,E.y),ye=H.call(this,de)-pe.h,Se=this.ctx.transform.applyToPoint(new u(E.x,de));if(this.autoPaging){var Be=this.ctx.transform.decompose(),Qe=new h;Qe=(Qe=(Qe=Qe.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale);for(var Xe=this.ctx.transform.applyToRectangle(new c(E.x,de,pe.w,pe.h)),ot=Qe.applyToRectangle(new c(E.x,ye,pe.w,pe.h)),Y=k.call(this,ot),Ie=[],vt=0;vt<Y.length;vt+=1)Ie.indexOf(Y[vt])===-1&&Ie.push(Y[vt]);D(Ie);for(var et=Ie[0],Re=Ie[Ie.length-1],it=et;it<Re+1;it++){this.pdf.setPage(it);var qe=it===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Te=this.pdf.internal.pageSize.height-this.margin[2],tt=Te-this.margin[0],bt=this.pdf.internal.pageSize.width-this.margin[1],mt=bt-this.margin[3],st=it===1?0:ht+(it-2)*tt;if(this.ctx.clip_path.length!==0){var dt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(G,this.posX+this.margin[3],-1*st+qe),B.call(this,"fill",!0),this.path=dt}var gt=R([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-st+qe+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*E.scale),ie=this.lineWidth,this.lineWidth=ie*E.scale);var Nt=this.autoPaging!=="text";if(Nt||gt.y+gt.h<=Te){if(Nt||gt.y>=qe&&gt.x<=bt){var Ee=Nt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||bt-gt.x)[0],ft=R([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-st+qe+this.ctx.prevPageLastElemOffset)[0],ut=Nt&&(it>et||it<Re)&&N.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,tt,null).clip().discardPath()),this.pdf.text(Ee,ft.x,ft.y,{angle:E.angle,align:$,renderingMode:E.renderingMode}),ut&&this.pdf.restoreGraphicsState()}}else gt.y<Te&&(this.ctx.prevPageLastElemOffset+=Te-gt.y);E.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=ie)}}else E.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*E.scale),ie=this.lineWidth,this.lineWidth=ie*E.scale),this.pdf.text(E.text,Se.x+this.posX,Se.y+this.posY,{angle:E.angle,align:$,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=ie)},X=function(E,$,G,Q){G=G||0,Q=Q||0,this.pdf.internal.out(t(E+G)+" "+s($+Q)+" l")},P=function(E,$,G){return this.pdf.lines(E,$,G,null,null)},ae=function(E,$,G,Q,ie,pe,de,ye){this.pdf.internal.out([e(a(G+E)),e(o(Q+$)),e(a(ie+E)),e(o(pe+$)),e(a(de+E)),e(o(ye+$)),"c"].join(" "))},Z=function(E,$,G,Q){for(var ie=2*Math.PI,pe=Math.PI/2;$>G;)$-=ie;var de=Math.abs(G-$);de<ie&&Q&&(de=ie-de);for(var ye=[],Se=Q?-1:1,Be=$;de>1e-5;){var Qe=Be+Se*Math.min(de,pe);ye.push(re.call(this,E,Be,Qe)),de-=Math.abs(Qe-Be),Be=Qe}return ye},re=function(E,$,G){var Q=(G-$)/2,ie=E*Math.cos(Q),pe=E*Math.sin(Q),de=ie,ye=-pe,Se=de*de+ye*ye,Be=Se+de*ie+ye*pe,Qe=4/3*(Math.sqrt(2*Se*Be)-Be)/(de*pe-ye*ie),Xe=de-Qe*ye,ot=ye+Qe*de,Y=Xe,Ie=-ot,vt=Q+$,et=Math.cos(vt),Re=Math.sin(vt);return{x1:E*Math.cos($),y1:E*Math.sin($),x2:Xe*et-ot*Re,y2:Xe*Re+ot*et,x3:Y*et-Ie*Re,y3:Y*Re+Ie*et,x4:E*Math.cos(G),y4:E*Math.sin(G)}},le=function(E){return 180*E/Math.PI},fe=function(E,$,G,Q,ie,pe){var de=E+.5*(G-E),ye=$+.5*(Q-$),Se=ie+.5*(G-ie),Be=pe+.5*(Q-pe),Qe=Math.min(E,ie,de,Se),Xe=Math.max(E,ie,de,Se),ot=Math.min($,pe,ye,Be),Y=Math.max($,pe,ye,Be);return new c(Qe,ot,Xe-Qe,Y-ot)},_e=function(E,$,G,Q,ie,pe,de,ye){var Se,Be,Qe,Xe,ot,Y,Ie,vt,et,Re,it,qe,ht,Te,tt=G-E,bt=Q-$,mt=ie-G,st=pe-Q,dt=de-ie,gt=ye-pe;for(Be=0;Be<41;Be++)et=(Ie=(Qe=E+(Se=Be/40)*tt)+Se*((ot=G+Se*mt)-Qe))+Se*(ot+Se*(ie+Se*dt-ot)-Ie),Re=(vt=(Xe=$+Se*bt)+Se*((Y=Q+Se*st)-Xe))+Se*(Y+Se*(pe+Se*gt-Y)-vt),Be==0?(it=et,qe=Re,ht=et,Te=Re):(it=Math.min(it,et),qe=Math.min(qe,Re),ht=Math.max(ht,et),Te=Math.max(Te,Re));return new c(Math.round(it),Math.round(qe),Math.round(ht-it),Math.round(Te-qe))},z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,$,G=(E=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:$}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Ut.API),(function(n){var e=function(u){var c,h,f,p,y,_,b,A,N,k;for(h=[],f=0,p=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;p>f;f+=4)(y=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(_=(y=((y=((y=((y=(y-(k=y%85))/85)-(N=y%85))/85)-(A=y%85))/85)-(b=y%85))/85)%85,h.push(_+33,b+33,A+33,N+33,k+33)):h.push(122);return(function(T,R){for(var D=R;D>0;D--)T.pop()})(h,c.length),String.fromCharCode.apply(String,h)+"~>"},t=function(u){var c,h,f,p,y,_=String,b="length",A=255,N="charCodeAt",k="slice",T="replace";for(u[k](-2),u=u[k](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),f=[],p=0,y=(u+=c="uuuuu"[k](u[b]%5||5))[b];y>p;p+=5)h=52200625*(u[N](p)-33)+614125*(u[N](p+1)-33)+7225*(u[N](p+2)-33)+85*(u[N](p+3)-33)+(u[N](p+4)-33),f.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(R,D){for(var V=D;V>0;V--)R.pop()})(f,c[b]),_.fromCharCode.apply(_,f)},s=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var h="",f=0;f<u.length;f+=2)h+=String.fromCharCode("0x"+(u[f]+u[f+1]));return h},o=function(u){for(var c=new Uint8Array(u.length),h=u.length;h--;)c[h]=u.charCodeAt(h);return(c=Mg(c)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(u,c){var h=0,f=u||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=s(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Ut.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(h,f,p){var y=new XMLHttpRequest,_=0,b=function(A){var N=A.length,k=[],T=String.fromCharCode;for(_=0;_<N;_+=1)k.push(T(255&A.charCodeAt(_)));return k.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?p(b(this.responseText)):p(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)})(a,o,u)}catch{}return c})(e,t,s)},n.loadImageFile=n.loadFile})(Ut.API),(function(n){function e(){return(cn.html2canvas?Promise.resolve(cn.html2canvas):Ih(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(cn.DOMPurify?Promise.resolve(cn.DOMPurify):Ih(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var h=rr(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(c,h){var f=document.createElement(c);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},o=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},u=function c(h){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),f);return(p=p.setProgress(1,c,1,[c])).set(h)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,h){return c.__proto__=h||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,h){return this.then(function(){switch(h=h||(function(f){switch(s(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),h){case"string":return this.then(t).then(function(f){return this.set({src:a("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var A=p[b],N=A.src.find(function(k){return k.format==="truetype"});N&&f.addFont(N.url,A.ref.name,A.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,f.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},u.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(s(c)!=="object")return this;var h=Object.keys(c||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(h)})},u.prototype.get=function(c,h){return this.then(function(){var f=c in u.template.prop?this.prop[c]:this.opt[c];return h?h(f):f})},u.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(c=c||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,h,f,p){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,h,f,p){return this.setProgress(c?this.progress.val+c:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},u.prototype.then=function(c,h){var f=this;return this.thenCore(c,h,function(p,y){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return f.updateProgress(null,p),_}).then(p,y).then(function(_){return f.updateProgress(1),_})})},u.prototype.thenCore=function(c,h,f){f=f||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),h&&(h=h.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:u.convert(Object.assign({},p),Promise.prototype),_=f.call(y,c,h);return u.convert(_,p.__proto__)},u.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},u.prototype.thenList=function(c){var h=this;return c.forEach(function(f){h=h.thenCore(f)}),h},u.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return u.convert(h,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ut.getPageSize=function(c,h,f){if(rr(c)==="object"){var p=c;c=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var y,_=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var A,N=0,k=0;if(b.hasOwnProperty(_))N=b[_][1]/y,k=b[_][0]/y;else try{N=f[1],k=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",k>N&&(A=k,k=N,N=A);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>k&&(A=k,k=N,N=A)}return{width:k,height:N,unit:h,k:y,orientation:c}},n.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Jm):null;var f=new u(h);return h.worker?f:f.from(c).doCallback()}})(Ut.API),Ut.API.addJS=function(n){return _x=n,this.internal.events.subscribe("postPutResources",function(){U1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(U1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_x+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){U1!==void 0&&wx!==void 0&&this.internal.out("/Names <</JavaScript "+U1+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=s.exec(u);if(c!=null){var h=c[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(o=0;o<f;o++){var y=t.internal.newObject();p.push(y);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<p.length;o++)t.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var h=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<s.children.length;f++)this.renderItems(s.children[f])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(Ut.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,c){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),A=y.length,N={width:0,height:0,numcomponents:1},k=4;k<A;k+=2){if(k+=b,e.indexOf(y.charCodeAt(k+1))!==-1){_=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),N={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:_,numcomponents:y.charCodeAt(k+9)};break}b=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return N})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:f,index:s,alias:a}}return p}})(Ut.API),Ut.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=yL(n,{checkCrc:!0}),u=o.width,c=o.height,h=o.channels,f=o.palette,p=o.depth;a=f&&h===1?(function(L){for(var F=L.width,te=L.height,j=L.data,I=L.palette,X=L.depth,P=!1,ae=[],Z=[],re=void 0,le=!1,fe=0,_e=0;_e<I.length;_e++){var z=Cy(I[_e],4),E=z[0],$=z[1],G=z[2],Q=z[3];ae.push(E,$,G),Q!=null&&(Q===0?(fe++,Z.length<1&&Z.push(_e)):Q<255&&(le=!0))}if(le||fe>1){P=!0,Z=void 0;var ie=F*te;re=new Uint8Array(ie);for(var pe=new DataView(j.buffer),de=0;de<ie;de++){var ye=tg(pe,de,X),Se=Cy(I[ye],4)[3];re[de]=Se}}else fe===0&&(Z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:P?8:void 0,colorBytes:j,alphaBytes:re,needSMask:P,palette:ae,mask:Z}})(o):h===2||h===4?(function(L){for(var F=L.data,te=L.width,j=L.height,I=L.channels,X=L.depth,P=I===2?"DeviceGray":"DeviceRGB",ae=I-1,Z=te*j,re=ae,le=Z*re,fe=1*Z,_e=Math.ceil(le*X/8),z=Math.ceil(fe*X/8),E=new Uint8Array(_e),$=new Uint8Array(z),G=new DataView(F.buffer),Q=new DataView(E.buffer),ie=new DataView($.buffer),pe=!1,de=0;de<Z;de++){for(var ye=de*I,Se=0;Se<re;Se++)Mx(Q,tg(G,ye+Se,X),de*re+Se,X);var Be=tg(G,ye+re,X);Be<(1<<X)-1&&(pe=!0),Mx(ie,Be,1*de,X)}return{colorSpace:P,colorsPerPixel:ae,sMaskBitsPerComponent:pe?X:void 0,colorBytes:E,alphaBytes:$,needSMask:pe}})(o):(function(L){var F=L.data,te=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:te,colorsPerPixel:te==="DeviceGray"?1:3,colorBytes:F instanceof Uint16Array?(function(j){for(var I=j.length,X=new Uint8Array(2*I),P=new DataView(X.buffer,X.byteOffset,X.byteLength),ae=0;ae<I;ae++)P.setUint16(2*ae,j[ae],!1);return X})(F):F,needSMask:!1}})(o);var y,_,b,A=a,N=A.colorSpace,k=A.colorsPerPixel,T=A.sMaskBitsPerComponent,R=A.colorBytes,D=A.alphaBytes,V=A.needSMask,B=A.palette,W=A.mask,H=null;return s!==Ut.API.image_compression.NONE&&typeof Mg=="function"?(H=(function(L){var F;switch(L){case Ut.API.image_compression.FAST:F=11;break;case Ut.API.image_compression.MEDIUM:F=13;break;case Ut.API.image_compression.SLOW:F=14;break;default:F=12}return F})(s),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(H," /Colors ").concat(k," /BitsPerComponent ").concat(p," /Columns ").concat(u),n=Cx(R,Math.ceil(u*k*p/8),k,p,s),V&&(b=Cx(D,Math.ceil(u*T/8),1,T,s))):(y=void 0,_=void 0,n=R,V&&(b=D)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:y,decodeParameters:_,transparency:W,palette:B,sMask:b,predictor:H,width:u,height:c,bitsPerComponent:p,sMaskBitsPerComponent:T,colorSpace:N}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new PL(e),u=o.width,c=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:u,height:c},p=new ng(100).encode(f,100);return n.processJPEG.call(this,p,t,s,a)},n.processGIF87A=n.processGIF89A})(Ut.API),io.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},io.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){gr.log("bit decode error:"+t)}},io.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var h=this.palette[o>>7-c&1];this.data[u+4*c]=h.blue,this.data[u+4*c+1]=h.green,this.data[u+4*c+2]=h.red,this.data[u+4*c+3]=255}t!==0&&(this.pos+=4-t)}},io.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,c=o>>4,h=15&o,f=this.palette[c];if(this.data[u]=f.blue,this.data[u+1]=f.green,this.data[u+2]=f.red,this.data[u+3]=255,2*a+1>=this.width)break;f=this.palette[h],this.data[u+4]=f.blue,this.data[u+4+1]=f.green,this.data[u+4+2]=f.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},io.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},io.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,p=s*this.width*4+4*a;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=u,this.data[p+3]=f}this.pos+=n}},io.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,h=(u>>5&t)/t*255|0,f=(u>>11)/e*255|0,p=a*this.width*4+4*o;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},io.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},io.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}},io.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new io(e,!1),u=o.width,c=o.height,h={data:o.getData(),width:u,height:c},f=new ng(100).encode(h,100);return n.processJPEG.call(this,f,t,s,a)}})(Ut.API),Ox.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Ox(e),u=o.width,c=o.height,h={data:o.getData(),width:u,height:c},f=new ng(100).encode(h,100);return n.processJPEG.call(this,f,t,s,a)}})(Ut.API),Ut.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,h=0,f=0;f<a;f+=4){var p=s[f],y=s[f+1],_=s[f+2],b=s[f+3];o[c++]=p,o[c++]=y,o[c++]=_,u[h++]=b}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:A,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ut.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_h=Ut.API,H1=_h.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,h=c.fof?c.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,p=f.fof?f.fof:1,y=e.doKerning!==!1,_=0,b=n.length,A=0,N=c[0]||h,k=[];for(t=0;t<b;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(_=y&&rr(f[s])==="object"&&!isNaN(parseInt(f[s][A],10))?f[s][A]/p:0,k.push((c[s]||N)/h+_)),A=s;return k},Sx=_h.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return _h.processArabic&&(n=_h.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:H1.apply(this,arguments).reduce(function(o,u){return o+u},0)},Nx=function(n,e,t,s){for(var a=[],o=0,u=n.length,c=0;o!==u&&c+e[o]<t;)c+=e[o],o++;a.push(n.slice(0,o));var h=o;for(c=0;o!==u;)c+e[o]>s&&(a.push(n.slice(h,o)),c=0,h=o),c+=e[o],o++;return h!==o&&a.push(n.slice(h,o)),a},Ax=function(n,e,t){t||(t={});var s,a,o,u,c,h,f,p=[],y=[p],_=t.textIndent||0,b=0,A=0,N=n.split(" "),k=H1.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?N[0].length+2:t.lineIndent||0){var T=Array(h).join(" "),R=[];N.map(function(V){(V=V.split(/\s*\n/)).length>1?R=R.concat(V.map(function(B,W){return(W&&B.length?`
`:"")+B})):R.push(V[0])}),N=R,h=Sx.apply(this,[T,t])}for(o=0,u=N.length;o<u;o++){var D=0;if(s=N[o],h&&s[0]==`
`&&(s=s.substr(1),D=1),_+b+(A=(a=H1.apply(this,[s,t])).reduce(function(V,B){return V+B},0))>e||D){if(A>e){for(c=Nx.apply(this,[s,a,e-(_+b),e]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);A=a.slice(s.length-(p[0]?p[0].length:0)).reduce(function(V,B){return V+B},0)}else p=[s];y.push(p),_=A+h,b=k}else p.push(s),_+=b+A,b=k}return f=h?function(V,B){return(B?T:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(f)},_h.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var c,h,f=[];for(c=0,h=s.length;c<h;c++)f=f.concat(Ax.apply(this,[s[c],u,o]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},c=n.__fontmetrics__.compress=function(_){var b,A,N,k,T=["{"];for(var R in _){if(b=_[R],isNaN(parseInt(R,10))?A="'"+R+"'":(R=parseInt(R,10),A=(A=u(R).slice(2)).slice(0,-1)+a[A.slice(-1)]),typeof b=="number")b<0?(N=u(b).slice(3),k="-"):(N=u(b).slice(2),k=""),N=k+N.slice(0,-1)+a[N.slice(-1)];else{if(rr(b)!=="object")throw new Error("Don't know what to do with value type "+rr(b)+".");N=c(b)}T.push(A+N)}return T.push("}"),T.join("")},h=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,A,N,k,T={},R=1,D=T,V=[],B="",W="",H=_.length-1,L=1;L<H;L+=1)(k=_[L])=="'"?b?(N=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(V.push([D,N]),D={},N=void 0):k=="}"?((A=V.pop())[0][A[1]]=D,N=void 0,D=A[0]):k=="-"?R=-1:N===void 0?s.hasOwnProperty(k)?(B+=s[k],N=parseInt(B,16)*R,R=1,B=""):B+=k:s.hasOwnProperty(k)?(W+=s[k],D[N]=parseInt(W,16)*R,R=1,N=void 0,W=""):W+=k;return T},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var b=_.font,A=y.Unicode[b.postScriptName];A&&(b.metadata.Unicode={},b.metadata.Unicode.widths=A.widths,b.metadata.Unicode.kerning=A.kerning);var N=p.Unicode[b.postScriptName];N&&(b.metadata.Unicode.encoding=N,b.encoding=N.codePages[0])}])})(Ut.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(K1(c)),u.metadata=n.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(Ut),Ut.API.addSvgAsImage=function(n,e,t,s,a,o,u,c){if(isNaN(e)||isNaN(t))throw gr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw gr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(cn.canvg?Promise.resolve(cn.canvg):Ih(()=>import("./index.es-B-mFeePR.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),e,t,s,a,u,c)})},Ut.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},Ut.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),h=[],f=0,p=0,y=0;function _(A,N){var k,T=!1;for(k=0;k<A.length;k+=1)A[k]===N&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=c.length;for(y=0;y<b;y+=1)t[c[y]].value=t[c[y]].defaultValue,t[c[y]].explicitSet=!1}if(rr(n)==="object"){for(a in n)if(o=n[a],_(c,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&_(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(f=0;f<o.length;f+=1)if(s=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(p=0;p<o[f].length;p+=1)typeof o[f][p]!="number"&&(s=!1);s===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,N=[];for(A in t)t[A].explicitSet===!0&&(t[A].type==="name"?N.push("/"+A+" /"+t[A].value):N.push("/"+A+" "+t[A].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+u.length+c.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ut.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var c,h=u.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],y=0,_=o.length;y<_;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},s=function(o){var u,c,h,f,p,y,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,_=(c=Object.keys(o).sort(function(b,A){return b-A})).length;y<_;y++)u=c[y],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(f=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),h.push("<"+u+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,h=u.out,f=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",A=0;A<_.length;A++)b+=String.fromCharCode(_[A]);var N=f();p({data:b,addLength1:!0,objectId:N}),h("endobj");var k=f();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:k}),h("endobj");var T=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Ah(c.fontName)),h("/FontFile2 "+N+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var R=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+Ah(c.fontName)),h("/FontDescriptor "+T+" 0 R"),h("/W "+n.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+k+" 0 R"),h("/BaseFont /"+Ah(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+R+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,h=u.out,f=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var A=f();p({data:_,addLength1:!0,objectId:A}),h("endobj");var N=f();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:N}),h("endobj");var k=f();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+Ah(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=f();for(var T=0;T<c.metadata.hmtx.widths.length;T++)c.metadata.hmtx.widths[T]=parseInt(c.metadata.hmtx.widths[T]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Ah(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",h=o.x,f=o.y,p=o.options||{},y=o.mutex||{},_=y.pdfEscape,b=y.activeFontKey,A=y.fonts,N=b,k="",T=0,R="",D=A[N].encoding;if(A[N].encoding!=="Identity-H")return{text:c,x:h,y:f,options:p,mutex:y};for(R=c,N=b,Array.isArray(c)&&(R=c[0]),T=0;T<R.length;T+=1)A[N].metadata.hasOwnProperty("cmap")&&(u=A[N].metadata.cmap.unicode.codeMap[R[T].charCodeAt(0)]),u||R[T].charCodeAt(0)<256&&A[N].metadata.hasOwnProperty("Unicode")?k+=R[T]:k+="";var V="";return parseInt(N.slice(1))<14||D==="WinAnsiEncoding"?V=_(k,N).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(V=t(k,A[N])),y.isHex=!0,{text:V,x:h,y:f,options:p,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],h={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var f=0;for(f=0;f<u.length;f+=1)Array.isArray(u[f])&&u[f].length===3?c.push([a(Object.assign({},h,{text:u[f][0]})).text,u[f][1],u[f][2]]):c.push(a(Object.assign({},h,{text:u[f]})).text);o.text=c}else o.text=a(Object.assign({},h,{text:u})).text}])})(Ut),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ut.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,c,h,f,p,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,D=0;this.__bidiEngine__={};var V=function(j){var I=j.charCodeAt(),X=I>>8,P=N[X];return P!==void 0?y[256*P+(255&I)]:X===252||X===253?"AL":T.test(X)?"L":X===8?"R":"N"},B=function(j){for(var I,X=0;X<j.length;X++){if((I=V(j.charAt(X)))==="L")return!1;if(I==="R")return!0}return!1},W=function(j,I,X,P){var ae,Z,re,le,fe=I[P];switch(fe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(fe="AN");break;case"AL":R=!0,fe="R";break;case"WS":case"BN":fe="N";break;case"CS":P<1||P+1>=I.length||(ae=X[P-1])!=="EN"&&ae!=="AN"||(Z=I[P+1])!=="EN"&&Z!=="AN"?fe="N":R&&(Z="AN"),fe=Z===ae?Z:"N";break;case"ES":fe=(ae=P>0?X[P-1]:"B")==="EN"&&P+1<I.length&&I[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&X[P-1]==="EN"){fe="EN";break}if(R){fe="N";break}for(re=P+1,le=I.length;re<le&&I[re]==="ET";)re++;fe=re<le&&I[re]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(le=I.length,re=P+1;re<le&&I[re]==="NSM";)re++;if(re<le){var _e=j[P],z=_e>=1425&&_e<=2303||_e===64286;if(ae=I[re],z&&(ae==="R"||ae==="AL")){fe="R";break}}}fe=P<1||(ae=I[P-1])==="B"?"N":X[P-1];break;case"B":R=!1,a=!0,fe=D;break;case"S":o=!0,fe="N"}return fe},H=function(j,I,X){var P=j.split("");return X&&L(P,X,{hiLevel:D}),P.reverse(),I&&I.reverse(),P.join("")},L=function(j,I,X){var P,ae,Z,re,le,fe=-1,_e=j.length,z=0,E=[],$=D?b:_,G=[];for(R=!1,a=!1,o=!1,ae=0;ae<_e;ae++)G[ae]=V(j[ae]);for(Z=0;Z<_e;Z++){if(le=z,E[Z]=W(j,G,E,Z),P=240&(z=$[le][A[E[Z]]]),z&=15,I[Z]=re=$[z][5],P>0)if(P===16){for(ae=fe;ae<Z;ae++)I[ae]=1;fe=-1}else fe=-1;if($[z][6])fe===-1&&(fe=Z);else if(fe>-1){for(ae=fe;ae<Z;ae++)I[ae]=re;fe=-1}G[Z]==="B"&&(I[Z]=0),X.hiLevel|=re}o&&(function(Q,ie,pe){for(var de=0;de<pe;de++)if(Q[de]==="S"){ie[de]=D;for(var ye=de-1;ye>=0&&Q[ye]==="WS";ye--)ie[ye]=D}})(G,I,_e)},F=function(j,I,X,P,ae){if(!(ae.hiLevel<j)){if(j===1&&D===1&&!a)return I.reverse(),void(X&&X.reverse());for(var Z,re,le,fe,_e=I.length,z=0;z<_e;){if(P[z]>=j){for(le=z+1;le<_e&&P[le]>=j;)le++;for(fe=z,re=le-1;fe<re;fe++,re--)Z=I[fe],I[fe]=I[re],I[re]=Z,X&&(Z=X[fe],X[fe]=X[re],X[re]=Z);z=le}z++}}},te=function(j,I,X){var P=j.split(""),ae={hiLevel:D};return X||(X=[]),L(P,X,ae),(function(Z,re,le){if(le.hiLevel!==0&&p)for(var fe,_e=0;_e<Z.length;_e++)re[_e]===1&&(fe=k.indexOf(Z[_e]))>=0&&(Z[_e]=k[fe+1])})(P,X,ae),F(2,P,I,X,ae),F(1,P,I,X,ae),P.join("")};return this.__bidiEngine__.doBidiReorder=function(j,I,X){if((function(ae,Z){if(Z)for(var re=0;re<ae.length;re++)Z[re]=re;c===void 0&&(c=B(ae)),f===void 0&&(f=B(ae))})(j,I),u||!h||f)if(u&&h&&c^f)D=c?1:0,j=H(j,I,X);else if(!u&&h&&f)D=c?1:0,j=te(j,I,X),j=H(j,I);else if(!u||c||h||f){if(u&&!h&&c^f)j=H(j,I),c?(D=0,j=te(j,I,X)):(D=1,j=te(j,I,X),j=H(j,I));else if(u&&c&&!h&&f)D=1,j=te(j,I,X),j=H(j,I);else if(!u&&!h&&c^f){var P=p;c?(D=1,j=te(j,I,X),D=0,p=!1,j=te(j,I,X),p=P):(D=0,j=te(j,I,X),j=H(j,I),D=1,p=!1,j=te(j,I,X),p=P,j=H(j,I))}}else D=0,j=te(j,I,X);else D=c?1:0,j=te(j,I,X);return j},this.__bidiEngine__.setOptions=function(j){j&&(u=j.isInputVisual,h=j.isOutputVisual,c=j.isInputRtl,f=j.isOutputRtl,p=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([t.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([t.doBidiReorder(a[c])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(Ut),Ut.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Dc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new tO(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new zL(this.contents),this.head=new UL(this),this.name=new YL(this),this.cmap=new z4(this),this.toUnicode={},this.hhea=new HL(this),this.maxp=new XL(this),this.hmtx=new ZL(this),this.post=new GL(this),this.os2=new WL(this),this.loca=new eO(this),this.glyf=new KL(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,h,f;for(f=[],u=0,c=(h=this.bbox).length;u<c;u++)e=h[u],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var wo,Dc=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,c,h;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*c+h},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),zL=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,c,h,f,p,y,_,b,A,N;for(N in b=Object.keys(t).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),u=Math.floor(y/h),p=16*b-y,(a=new Dc).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(u),a.writeShort(p),o=16*b,f=a.pos+o,c=null,A=[],t)for(_=t[N],a.writeString(N),a.writeInt(n(_)),a.writeInt(f),a.writeInt(_.length),A=A.concat(_),N==="head"&&(c=f),f+=_.length;f%4;)A.push(0),f++;return a.write(A),s=2981146554-n(a.data),a.pos=c+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=q4.call(t);t.length%4;)t.push(0);for(o=new Dc(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),qL={}.hasOwnProperty,Ko=function(n,e){for(var t in e)qL.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};wo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var UL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Dc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Dx=(function(){function n(e,t){var s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,o=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),e.pos+=2,N=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),f=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),p=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var V,B;for(B=[],h=V=0;0<=a?V<a:V>a;h=0<=a?++V:--V)B.push(e.readUInt16());return B})(),h=T=0,D=o.length;T<D;h=++T)for(k=o[h],s=R=A=N[h];A<=k?R<=k:R>=k;s=A<=k?++R:--R)p[h]===0?u=s+f[h]:(u=c[p[h]/2+(s-A)-(_-h)]||0)!==0&&(u+=f[h]),this.codeMap[s]=65535&u}e.pos=y}return n.encode=function(e,t){var s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D,V,B,W,H,L,F,te,j,I,X,P,ae,Z,re,le,fe,_e,z,E,$,G,Q,ie,pe,de,ye,Se,Be,Qe;switch(P=new Dc,u=Object.keys(e).sort(function(Xe,ot){return Xe-ot}),t){case"macroman":for(N=0,k=(function(){var Xe=[];for(A=0;A<256;++A)Xe.push(0);return Xe})(),R={0:0},o={},ae=0,fe=u.length;ae<fe;ae++)R[ye=e[a=u[ae]]]==null&&(R[ye]=++N),o[a]={old:e[a],new:R[e[a]]},k[a]=R[e[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(k),{charMap:o,subtable:P.data,maxGlyphID:N+1};case"unicode":for(I=[],y=[],D=0,R={},s={},T=f=null,Z=0,_e=u.length;Z<_e;Z++)R[B=e[a=u[Z]]]==null&&(R[B]=++D),s[a]={old:B,new:R[B]},c=R[B]-a,T!=null&&c===f||(T&&y.push(T),I.push(a),f=c),T=a;for(T&&y.push(T),y.push(65535),I.push(65535),te=2*(F=I.length),L=2*Math.pow(Math.log(F)/Math.LN2,2),_=Math.log(L/2)/Math.LN2,H=2*F-L,h=[],W=[],b=[],A=re=0,z=I.length;re<z;A=++re){if(j=I[A],p=y[A],j===65535){h.push(0),W.push(0);break}if(j-(X=s[j].new)>=32768)for(h.push(0),W.push(2*(b.length+F-A)),a=le=j;j<=p?le<=p:le>=p;a=j<=p?++le:--le)b.push(s[a].new);else h.push(X-j),W.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*F+2*b.length),P.writeUInt16(0),P.writeUInt16(te),P.writeUInt16(L),P.writeUInt16(_),P.writeUInt16(H),pe=0,E=y.length;pe<E;pe++)a=y[pe],P.writeUInt16(a);for(P.writeUInt16(0),de=0,$=I.length;de<$;de++)a=I[de],P.writeUInt16(a);for(Se=0,G=h.length;Se<G;Se++)c=h[Se],P.writeUInt16(c);for(Be=0,Q=W.length;Be<Q;Be++)V=W[Be],P.writeUInt16(V);for(Qe=0,ie=b.length;Qe<ie;Qe++)N=b[Qe],P.writeUInt16(N);return{charMap:s,subtable:P.data,maxGlyphID:D+1}}},n})(),z4=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Dx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Dx.encode(e,t),(a=new Dc).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),HL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),WL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),GL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,c,h;for(h=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)h.push(e.readUInt32());return h}).call(this)}},n})(),$L=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},YL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,c,h,f,p,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(h={},o=p=0,y=s.length;p<y;o=++p)a=s[o],e.pos=a.offset,f=e.readString(a.length),u=new $L(f,a),h[_=a.nameID]==null&&(h[_]=[]),h[a.nameID].push(u);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),XL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),ZL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,c,h;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=a?f<a:f>a;t=0<=a?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,y,_;for(_=[],f=0,p=(y=this.metrics).length;f<p;f++)o=y[f],_.push(o.advance);return _}).call(this),s=this.widths[this.widths.length-1],h=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)h.push(this.widths.push(s));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),q4=[].slice,KL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,c,h,f,p,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(c=new Dc(t.read(a))).readShort(),f=c.readShort(),y=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[e]=u===-1?new JL(c,f,y,h,p):new QL(c,u,f,y,h,p),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,c,h;for(u=[],o=[],c=0,h=t.length;c<h;c++)a=e[t[c]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),QL=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),JL=(function(){function n(e,t,s,a,o){var u,c;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new Dc(q4.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),eO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var c=this.offsets[u],h=this.offsets[u+1]-c;h>0&&(a+=h)}for(var f=new Array(4*s.length),p=0;p<s.length;++p)f[4*p+3]=255&s[p],f[4*p+2]=(65280&s[p])>>8,f[4*p+1]=(16711680&s[p])>>16,f[4*p]=(4278190080&s[p])>>24;return f},n})(),tO=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,c,h;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))s=h[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,c,h,f,p,y,_,b,A,N,k,T;for(a in s=z4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},T=s.charMap)b[(h=T[a]).old]=h.new;for(A in _=s.maxGlyphID,u)A in b||(b[A]=_++);return p=(function(R){var D,V;for(D in V={},R)V[R[D]]=D;return V})(b),y=Object.keys(p).sort(function(R,D){return R-D}),N=(function(){var R,D,V;for(V=[],R=0,D=y.length;R<D;R++)c=y[R],V.push(p[c]);return V})(),o=this.font.glyf.encode(u,N,b),f=this.font.loca.encode(o.offsets,N),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n})();Ut.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var c,h,f;for(f=[],c=0,h=t.length;c<h;c++)s=t[c],f.push(e.convert(s));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();var np={exports:{}},nO=np.exports,Rx;function rO(){return Rx||(Rx=1,(function(n,e){(function(t,s){s()})(nO,function(){function t(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function s(f,p,y){var _=new XMLHttpRequest;_.open("GET",f),_.responseType="blob",_.onload=function(){h(_.response,p,y)},_.onerror=function(){console.error("could not download file")},_.send()}function a(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof k1=="object"&&k1.global===k1?k1:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(f,p,y){var _=u.URL||u.webkitURL,b=document.createElement("a");p=p||f.name||"download",b.download=p,b.rel="noopener",typeof f=="string"?(b.href=f,b.origin===location.origin?o(b):a(b.href)?s(f,p,y):o(b,b.target="_blank")):(b.href=_.createObjectURL(f),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,y){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,y),p);else if(a(f))s(f,p,y);else{var _=document.createElement("a");_.href=f,_.target="_blank",setTimeout(function(){o(_)})}}:function(f,p,y,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof f=="string")return s(f,p,y);var b=f.type==="application/octet-stream",A=/constructor/i.test(u.HTMLElement)||u.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||b&&A||c)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var D=k.result;D=N?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=D:location=D,_=null},k.readAsDataURL(f)}else{var T=u.URL||u.webkitURL,R=T.createObjectURL(f);_?_.location=R:location.href=R,_=null,setTimeout(function(){T.revokeObjectURL(R)},4e4)}});u.saveAs=h.saveAs=h,n.exports=h})})(np)),np.exports}var sO=rO();const Z2="chordWheelSongs",Bg="chordWheelCurrentSongId",rf=()=>{try{const n=localStorage.getItem(Z2);return n?JSON.parse(n).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch(n){return console.error("Error loading saved songs:",n),[]}},Ix=n=>{try{const e=rf(),t=e.findIndex(a=>a.id===n.id),s={...n,updatedAt:new Date().toISOString(),createdAt:n.createdAt instanceof Date?n.createdAt.toISOString():n.createdAt};t>=0?e[t]=s:e.push({...s,createdAt:new Date().toISOString()}),localStorage.setItem(Z2,JSON.stringify(e)),localStorage.setItem(Bg,n.id)}catch(e){console.error("Error saving song:",e)}},iO=n=>{try{const t=rf().filter(s=>s.id!==n);localStorage.setItem(Z2,JSON.stringify(t)),localStorage.getItem(Bg)===n&&localStorage.removeItem(Bg)}catch(e){console.error("Error deleting song:",e)}},aO=({isOpen:n,onClose:e,onConfirm:t,title:s,message:a,confirmLabel:o="Confirm",cancelLabel:u="Cancel",isDestructive:c=!1})=>(ee.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),ee.useEffect(()=>{const h=f=>{f.key==="Escape"&&n&&e()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n,e]),n?g.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),g.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-sm w-full overflow-hidden flex flex-col scale-100 opacity-100 transition-all",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s}),g.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),g.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-[#22222e] border-t border-border-subtle",children:[g.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:u}),g.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg transition-transform active:scale-95 ${c?"bg-red-500 hover:bg-red-600":"bg-accent-primary hover:bg-accent-secondary"}`,children:o})]})]})]}):null),U4={I:{degree:0,quality:"major"},ii:{degree:1,quality:"minor"},iii:{degree:2,quality:"minor"},IV:{degree:3,quality:"major"},V:{degree:4,quality:"major"},vi:{degree:5,quality:"minor"},"vii":{degree:6,quality:"diminished"},iv:{degree:3,quality:"minor"},"VI":{degree:8,quality:"major"},bVI:{degree:8,quality:"major"},"VII":{degree:10,quality:"major"},bVII:{degree:10,quality:"major"}},oO=[0,2,4,5,7,9,11];function lO(n,e){const t=xu(e),s=oo.indexOf(t);if(s===-1)return e;const a=U4[n];if(!a)return console.warn(`Unknown roman numeral: ${n}`),e;let o;a.degree<7?o=oO[a.degree]:o=a.degree;const u=(s+o)%12;return oo[u]}function Pg(n,e){const t=U4[n]||{quality:"major"},s=lO(n,e),a=la(s,t.quality);return{root:s,quality:t.quality,numeral:n,notes:a,symbol:`${s}${t.quality==="major"?"":t.quality==="minor"?"m":""}`}}function K2(n,e){return n.map(t=>Pg(t,e))}let rp=!1,Rp=[];function Q2(){rp=!1,Rp.forEach(n=>clearTimeout(n)),Rp=[]}async function H4(n,e,t=120,s=2,a){Q2(),rp=!0,xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Fl();const o=K2(n,e),c=60/t*1e3*s,f=`${4/s}n`;return new Promise(p=>{o.forEach((y,_)=>{const b=window.setTimeout(()=>{if(rp&&(a?.(_,y),Br(y.notes,f),_===o.length-1)){const A=window.setTimeout(()=>{rp=!1,p()},c);Rp.push(A)}},_*c);Rp.push(b)})})}const cO=[{id:"pop-anthem",name:"Pop/Rock Anthem",description:"The most popular progression in modern music. Uplifting and anthemic.",numerals:["I","V","vi","IV"],genre:"Pop/Rock",artists:"U2, The Beatles, Blink-182",color:"accent-primary",sectionType:"chorus",sectionName:"Anthem",beatsPerChord:4},{id:"emotional-ballad",name:"Emotional Ballad",description:"Starts on the minor chord for a melancholic, emotional feel.",numerals:["vi","IV","I","V"],genre:"Ballad",artists:"Adele, John Legend",color:"purple-400",sectionType:"verse",sectionName:"Ballad",beatsPerChord:4},{id:"jazz-ii-v-i",name:"Jazz / R&B",description:"The foundation of jazz harmony. Smooth and sophisticated.",numerals:["ii","V","I"],genre:"Jazz/R&B",artists:"Maroon 5, Jazz Standards",color:"blue-400",sectionType:"verse",sectionName:"ii-V-I",beatsPerChord:4,totalBars:4},{id:"50s-progression",name:"50s Doo-Wop",description:"Classic rock and roll. Nostalgic and feel-good.",numerals:["I","vi","IV","V"],genre:"Oldies",artists:"Stand By Me, Earth Angel",color:"yellow-400",sectionType:"verse",sectionName:"Doo-Wop",beatsPerChord:4},{id:"andalusian",name:"Andalusian Cadence",description:"Dramatic descending progression. Spanish/Flamenco influenced.",numerals:["vi","V","IV","III"],genre:"Dramatic",artists:"Hit the Road Jack, Sultans of Swing",color:"red-400",sectionType:"verse",sectionName:"Andal.",beatsPerChord:4},{id:"pachelbel",name:"Pachelbel Canon",description:"The classical progression that influenced centuries of music.",numerals:["I","V","vi","iii","IV","I","IV","V"],genre:"Classical/Pop",artists:"Canon in D, Basket Case",color:"green-400",sectionType:"verse",sectionName:"Canon",beatsPerChord:2}],uO=[{id:"perfect",name:"Perfect Cadence",description:'The "Full Stop". Strongest resolution.',numerals:["V","I"],color:"green-500",emotion:"Conclusive"},{id:"plagal",name:"Plagal Cadence",description:'The "Amen". Softer, church-like resolution.',numerals:["IV","I"],color:"blue-500",emotion:"Peaceful"},{id:"half",name:"Half Cadence",description:'The "Comma". Leaves listeners wanting more.',numerals:["I","V"],color:"yellow-500",emotion:"Suspenseful"},{id:"deceptive",name:"Deceptive Cadence",description:'The "Surprise". Expecting I, getting vi.',numerals:["V","vi"],color:"purple-500",emotion:"Unexpected"}],hO=({preset:n,showAddButton:e=!0,compact:t=!1,onAddToTimeline:s})=>{const{selectedKey:a,currentSong:o,openTimeline:u}=Ht(),c=Ht(R=>R.addCustomSection),[h,f]=ee.useState(!1),[p,y]=ee.useState(null),[_,b]=ee.useState(!1),A=K2(n.numerals,a),N=async()=>{if(h){Q2(),f(!1),y(null);return}f(!0),y(0);try{await H4(n.numerals,a,o.tempo,n.beatsPerChord,R=>{y(R)})}finally{f(!1),y(null)}},k=async(R,D)=>{if(h)return;y(D);const V=n.beatsPerChord>=4?"1n":"2n";await Br(R.notes,V),setTimeout(()=>y(null),400)},T=()=>{c&&(c(n.sectionName,n.sectionType,A,{beatsPerChord:n.beatsPerChord,totalBars:n.totalBars}),u(),b(!0),setTimeout(()=>b(!1),1500),s?.())};return g.jsxs("div",{className:`
                p-2.5 rounded bg-bg-tertiary transition-all duration-300 overflow-hidden
                ${t?"text-xs":"text-sm"}
                ${_?"ring-2 ring-green-500 bg-green-500/10":""}
            `,children:[g.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("span",{className:"font-bold text-white",children:n.name}),n.artists&&g.jsx("span",{className:"block text-xs text-gray-500 truncate",children:n.artists})]}),e&&g.jsxs("button",{onClick:T,className:`
                            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium shrink-0
                            transition-all duration-200
                            ${_?"bg-green-500 text-white":"bg-bg-elevated hover:bg-accent-primary/20 text-gray-400 hover:text-accent-primary"}
                        `,title:"Add to timeline",children:[g.jsx(Mc,{size:12}),g.jsx("span",{className:"hidden sm:inline",children:_?"Added!":"Add"})]})]}),g.jsxs("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"auto repeat(4, minmax(0, max-content))",justifyContent:"start"},children:[g.jsx("button",{onClick:N,className:`
                        flex items-center justify-center w-7 h-7 rounded-full shrink-0
                        transition-all duration-200
                        ${h?"bg-red-500 hover:bg-red-600 text-white":"bg-accent-primary/20 hover:bg-accent-primary/40 text-accent-primary"}
                    `,title:h?"Stop":"Play progression",children:h?g.jsx(uw,{size:12}):g.jsx(nd,{size:12,className:"ml-0.5"})}),n.numerals.map((R,D)=>{const V=A[D],B=p===D,W=D<4?void 0:D%4+2;return g.jsx("button",{onClick:()=>k(V,D),disabled:h,className:`
                                text-xs px-2 py-1 rounded font-medium
                                transition-all duration-150
                                ${B?`bg-${n.color} text-white scale-110 shadow-lg shadow-${n.color}/30`:`bg-black/40 text-${n.color} hover:bg-black/60 hover:scale-105`}
                                ${h&&!B?"opacity-50":""}
                                disabled:cursor-not-allowed
                            `,style:{...B?{backgroundColor:`var(--color-${n.color})`}:{},...W?{gridColumn:W}:{}},title:`Play ${V.symbol}`,children:R},`${R}-${D}`)})]})]})},dO=({preset:n})=>{const{selectedKey:e,currentSong:t}=Ht(),[s,a]=ee.useState(!1),[o,u]=ee.useState(null),c=K2(n.numerals,e),h=async()=>{if(s){Q2(),a(!1),u(null);return}a(!0),u(0);try{await H4(n.numerals,e,t.tempo,2,y=>{u(y)})}finally{a(!1),u(null)}},f=async(y,_)=>{s||(u(_),await Br(y.notes,"2n"),setTimeout(()=>u(null),400))},p=`text-${n.color.replace("-500","-400")}`;return g.jsxs("div",{className:`
                group p-3 rounded bg-bg-tertiary hover:bg-bg-tertiary/80 
                transition-all duration-200 border-l-2
            `,style:{borderColor:`var(--color-${n.color}, currentColor)`},children:[g.jsxs("div",{className:"flex justify-between items-center mb-1 gap-2",children:[g.jsx("span",{className:"font-bold text-white",children:n.name}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:h,className:`
                            w-6 h-6 rounded-full flex items-center justify-center
                            transition-all duration-200
                            ${s?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white/70 hover:text-white"}
                        `,title:s?"Stop":"Play cadence",children:s?g.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"}):g.jsx(nd,{size:10,className:"ml-0.5"})}),g.jsx("div",{className:"flex gap-0.5",children:n.numerals.map((y,_)=>{const b=c[_],A=o===_;return g.jsxs(Cn.Fragment,{children:[g.jsx("button",{onClick:()=>f(b,_),disabled:s,className:`
                                            text-xs px-1.5 py-0.5 rounded
                                            transition-all duration-150
                                            ${A?"bg-white text-black scale-110":`bg-black/30 ${p} hover:bg-black/50 hover:scale-105`}
                                        `,style:A?{backgroundColor:`var(--color-${n.color})`,color:"white"}:void 0,title:`Play ${b.symbol}`,children:y}),_<n.numerals.length-1&&g.jsx("span",{className:"text-gray-500 text-xs flex items-center",children:""})]},`${y}-${_}`)})})]})]}),g.jsx("p",{className:"text-gray-400 text-xs",children:n.description})]})},Vx=({size:n=32})=>g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",style:{width:n,height:n},children:[[...Array(12)].map((e,t)=>{const s=t*30,a=(s-15-90)*Math.PI/180,o=(s+15-90)*Math.PI/180,u=18,c=46,h=t<=4||t>=10;let f;h?t===0?f="rgba(234, 179, 8, 0.9)":t===1?f="rgba(163, 190, 60, 0.85)":t===2?f="rgba(132, 204, 22, 0.8)":t===3?f="rgba(74, 222, 128, 0.7)":t===4?f="rgba(45, 212, 191, 0.6)":t===11?f="rgba(251, 146, 60, 0.85)":t===10?f="rgba(168, 162, 158, 0.6)":f="rgba(200, 180, 100, 0.7)":f=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][t%3];const p=50+u*Math.cos(a),y=50+u*Math.sin(a),_=50+c*Math.cos(a),b=50+c*Math.sin(a),A=50+c*Math.cos(o),N=50+c*Math.sin(o),k=50+u*Math.cos(o),T=50+u*Math.sin(o);return g.jsx("path",{d:`M ${p} ${y} L ${_} ${b} A ${c} ${c} 0 0 1 ${A} ${N} L ${k} ${T} A ${u} ${u} 0 0 0 ${p} ${y}`,fill:f,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},t)}),g.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]}),fO=({selectedKey:n})=>{const[e,t]=ee.useState(null),s=async u=>{try{await Fl();const c=Pg(u,n);t(u),await Br(c.notes,"2n"),setTimeout(()=>t(null),400)}catch(c){console.error("Error playing chord:",c),t(null)}},a=["I","ii","iii","IV","V","vi","vii"],o=["Tonic (Home)","Mediant","Mediant","Subdom. (Away)","Dominant (Tension)","Rel. Minor","Leading Tone"];return g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:a.map((u,c)=>{const h=e===u,f=["I","IV","V"].includes(u),p=u==="vii",_=Pg(u,n).symbol;return g.jsxs("button",{onClick:()=>s(u),className:`rounded p-2 flex flex-col items-center justify-between h-20 cursor-pointer 
                            transition-all duration-150 active:scale-95
                            ${f?"bg-accent-primary/20 border border-accent-primary/30 hover:bg-accent-primary/30":p?"bg-red-500/10 border border-red-500/20 hover:bg-red-500/20":"bg-violet-500/15 border border-violet-500/25 hover:bg-violet-500/25"}
                            ${h?"ring-2 ring-white/50 scale-[1.02]":""}`,children:[g.jsx("span",{className:`font-bold mb-1 transition-colors ${h?"text-accent-primary":"text-white"}`,children:u}),g.jsx("span",{className:`text-[9px] font-medium transition-colors ${h?"text-accent-primary":"text-gray-300"}`,children:_}),g.jsx("span",{className:"text-[10px] text-gray-400 leading-tight",children:o[c]})]},u)})})},Fx=({onClose:n})=>{const{selectedKey:e}=Ht();return g.jsxs(g.Fragment,{children:[g.jsxs("section",{className:"relative",children:[g.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-accent-primary/20 rounded-full blur-3xl pointer-events-none"}),g.jsx("div",{className:"absolute -bottom-5 -right-5 w-24 h-24 bg-purple-500/15 rounded-full blur-3xl pointer-events-none"}),g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2 relative",children:[g.jsx(GT,{size:12,className:"fill-accent-primary"}),"Quick Start"]}),g.jsxs("div",{className:"relative bg-gradient-to-b from-bg-elevated/60 to-bg-elevated/40 rounded-xl p-5 border border-white/5 space-y-4",children:[g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:g.jsx(sw,{size:18,className:"text-accent-primary"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:g.jsx($h,{size:18,className:"text-purple-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate, or ",g.jsx("strong",{className:"text-gray-300",children:"tap the key"})," in the header to change keys. Highlighted chords always sound good together."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:g.jsx(iw,{size:18,className:"text-emerald-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",g.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:g.jsx(xp,{size:18,className:"text-amber-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",g.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:g.jsx(n0,{size:18,className:"text-sky-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),g.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"shrink-0 w-14 h-14 relative",children:g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=18,h=46,f=s<=4||s>=10;let p;f?s===0?p="rgba(234, 179, 8, 0.9)":s===1?p="rgba(163, 190, 60, 0.85)":s===2?p="rgba(132, 204, 22, 0.8)":s===3?p="rgba(74, 222, 128, 0.7)":s===4?p="rgba(45, 212, 191, 0.6)":s===11?p="rgba(251, 146, 60, 0.85)":s===10?p="rgba(168, 162, 158, 0.6)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+h*Math.cos(o),A=50+h*Math.sin(o),N=50+h*Math.cos(u),k=50+h*Math.sin(u),T=50+c*Math.cos(u),R=50+c*Math.sin(u);return g.jsx("path",{d:`M ${y} ${_} L ${b} ${A} A ${h} ${h} 0 0 1 ${N} ${k} L ${T} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),g.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("strong",{className:"text-xs text-white block mb-1",children:"Understanding the Wheel"}),g.jsxs("div",{className:"text-[11px] text-gray-400 leading-snug space-y-0.5",children:[g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Highlighted"})," = in key"]}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Inner"})," = Major (I, IV, V)"]}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Middle"})," = Minor (ii, iii, vi)"]}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Outer"})," = Dim (vii)"]})]})]})]})}),g.jsx("div",{className:"space-y-2",children:g.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[g.jsx(Oh,{size:14,className:"text-accent-primary shrink-0"}),g.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[g.jsx("strong",{className:"text-accent-primary",children:"Tip:"})," Tap the",g.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded-full text-text-muted border border-border-subtle/60",children:g.jsx(Oh,{size:10})}),"button anytime to reopen this guide."]})]})})})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(ok,{size:12}),"The Language of Music (Roman Numerals)"]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-300",children:'Musicians use roman numerals to talk about chords regardless of the specific key. This reveals the "DNA" of a song.'}),g.jsx(fO,{selectedKey:e}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-400",children:[g.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[g.jsx("strong",{className:"text-accent-primary block mb-1",children:"Tonic (I, vi, iii)"}),"Stable, home base. Where songs usually start and end."]}),g.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[g.jsx("strong",{className:"text-accent-primary block mb-1",children:"Subdominant (IV, ii)"}),"Movement, drifting away from home. Creates interest."]}),g.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[g.jsx("strong",{className:"text-accent-primary block mb-1",children:"Dominant (V, vii)"}),"Tension, needing resolution. Pulls strongly back to I."]})]})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(hk,{size:12}),"Songwriting Toolkit"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[g.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Emotional Cadences (How Phrases End)",g.jsx(bg,{size:12,className:"text-accent-primary/50"}),g.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e]})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:uO.map(t=>g.jsx(dO,{preset:t},t.id))})]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[g.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Famous Progressions",g.jsx(bg,{size:12,className:"text-accent-primary/50"}),g.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e,"  tap to play  click + to add"]})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:cO.map(t=>g.jsx(hO,{preset:t,onAddToTimeline:n},t.id))})]})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(wp,{size:12}),"Adding Spice (Advanced)"]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm flex items-center gap-2",children:"1. Modal Interchange (Borrowed Chords)"}),g.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Steal chords from the parallel minor key to add "cinematic" emotion.'}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[g.jsx("strong",{className:"text-white block",children:"Minor IV (iv)"}),g.jsx("span",{className:"text-gray-500",children:'"The Beatles Cadence". Gives a nostalgic, bittersweet ending. (Fm in key of C).'})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[g.jsx("strong",{className:"text-white block",children:"Flat VI (VI)"}),g.jsx("span",{className:"text-gray-500",children:'Epic, heroic, fantasy feeling. "Lord of the Rings" sound. (Ab in key of C).'})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[g.jsx("strong",{className:"text-white block",children:"Picardy Third"}),g.jsx("span",{className:"text-gray-500",children:"Ending a sad, minor song on a happy Major I chord. Pure sunshine."})]})]})]}),g.jsx("div",{className:"w-full h-px bg-white/5"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"2. Secondary Dominants"}),g.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Make a minor chord Major to create a magnetic pull to another chord."}),g.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"In C Major, play ',g.jsx("strong",{className:"text-white",children:"E Major (III)"}),". It pulls hard to ",g.jsx("strong",{className:"text-white",children:"Am"}),'. (Radiohead - Creep)"']})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"3. Tritone Substitution"}),g.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Jazz trick: Replace the V chord with a dominant chord exactly halfway around the circle (a tritone away)."}),g.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"Instead of G7  C, try ',g.jsx("strong",{className:"text-white",children:"Db7  C"}),'. Smooth chromatic slide."']})]})]}),g.jsx("div",{className:"w-full h-px bg-white/5"}),g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["4. Secrets of the Pros",g.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold",children:"Expert"})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[g.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"A"}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-white text-sm block",children:"Pedal Point"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Keep the bass note the same while changing chords on top. Creates massive tension and "floaty" feelings. (e.g., C/C  F/C  G/C).'})]})]}),g.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[g.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"B"}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-white text-sm block",children:"Line Clich"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'A single note moving down chromatically inside a static chord. think "Stairway to Heaven" or James Bond theme (Am  Am(maj7)  Am7  Am6).'})]})]}),g.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[g.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"C"}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-white text-sm block",children:"Relative Major/Minor Modulation"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching focus between I and vi. Use the exact same notes, but center your melody around Am instead of C to instantly change the mood from happy to sad."})]})]})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"5. Building Better Chords (Extensions)"}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-center",children:[g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"maj7"}),g.jsx("span",{className:"text-gray-500",children:"Dreamy, Jazz, Lo-fi"})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"dom7"}),g.jsx("span",{className:"text-gray-500",children:"Blues, Funk, Tension"})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"sus4"}),g.jsx("span",{className:"text-gray-500",children:"Open, airy, delayed"})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"add9"}),g.jsx("span",{className:"text-gray-500",children:"Rich, cinematic pop"})]})]})]})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(wp,{size:12}),"Scales & Modes"]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-300",children:g.jsx("strong",{className:"text-white",children:"Same notes, different starting points, totally different vibes."})}),g.jsxs("p",{className:"text-xs text-gray-400",children:['Think of modes as different "camera angles" on the same scale. Start a ',Ln(e)," major scale from different notes, and you unlock seven distinct musical personalities  each with its own emotional flavor."]}),(()=>{const t=sg(e),s=o=>[...t.slice(o),...t.slice(0,o)].map(c=>Ln(c)).join("  "),a=[{name:"Ionian (I)",degree:0,quality:"MAJOR",color:"yellow",desc:"The standard major scale. Bright, happy, resolved.",note:'This is your "home base."'},{name:"Dorian (ii)",degree:1,quality:"minor",color:"violet",desc:"Minor with a raised 6th.",highlight:"Hopeful minor",note:'  less sad, more cool. Think jazz, funk, and "So What".'},{name:"Phrygian (iii)",degree:2,quality:"minor",color:"orange",desc:"Minor with a flat 2nd.",highlight:"Spanish, exotic, intense.",note:" Classic in Flamenco and metal."},{name:"Lydian (IV)",degree:3,quality:"MAJOR",color:"cyan",desc:"Major with a raised 4th.",highlight:"Dreamy, floating, magical.",note:" Film composers love this for wonder and awe."},{name:"Mixolydian (V)",degree:4,quality:"MAJOR",color:"emerald",desc:"Major with a flat 7th.",highlight:"Bluesy, rock 'n roll.",note:" Common over dominant (V) chords."},{name:"Aeolian (vi)",degree:5,quality:"minor",color:"blue",desc:"The natural minor scale.",highlight:"Sad, introspective, melancholic.",note:" The basis of most minor-key music."},{name:"Locrian (vii)",degree:6,quality:"dim",color:"red",dimmed:!0,desc:"Flat 2nd and flat 5th.",highlight:"Dark, unstable, unsettling.",note:" Rarely used  its tonic chord is diminished!"}];return g.jsx("div",{className:"space-y-2",children:a.map(o=>g.jsxs("div",{className:`bg-bg-tertiary p-3 rounded border-l-2 border-${o.color}-500${o.dimmed?"/50":""}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("strong",{className:"text-white text-sm",children:o.name}),g.jsx("span",{className:`text-[10px] text-${o.color}-400 bg-${o.color}-500/10 px-1.5 py-0.5 rounded`,children:o.quality})]}),g.jsxs("p",{className:"text-xs text-gray-400",children:[o.desc,o.highlight&&g.jsxs("span",{className:"text-gray-300",children:[" ",o.highlight]}),o.note&&g.jsx("span",{className:"text-gray-500",children:o.note})]}),g.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5 font-mono tracking-wide",children:s(o.degree)})]},o.name))})})(),g.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20 mt-4",children:g.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-400",children:[g.jsx(Oh,{size:14,className:"text-accent-primary shrink-0 mt-0.5"}),g.jsxs("span",{children:[g.jsx("strong",{className:"text-accent-primary",children:"Key insight:"})," Every mode shares the same notes as its parent major scale. ",Ln(sg(e)[1])," Dorian uses the same notes as ",Ln(e),' major. The magic is in which note feels like "home."']})]})})]})]})]})},pO=({isOpen:n,onClose:e,isEmbedded:t=!1})=>n?t?g.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col bg-[#1a1a24]",children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-[#22222e] shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6",children:g.jsx(Vx,{size:24})}),g.jsx("h2",{className:"text-sm font-bold text-white",children:"Guide"})]}),g.jsx("button",{onClick:e,className:"p-1 hover:bg-bg-tertiary rounded transition-colors text-text-muted hover:text-white",children:g.jsx(Lc,{size:16})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-6 sm:py-6 space-y-8",children:g.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:g.jsx(Fx,{onClose:e})})})]}):g.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none",style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[g.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm cursor-pointer pointer-events-auto",onClick:e}),g.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-4xl w-full max-h-full overflow-hidden flex flex-col pointer-events-auto",children:[g.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-[#22222e]",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8",children:g.jsx(Vx,{size:32})}),g.jsx("h2",{className:"text-lg font-bold text-white",children:"Songwriter Wheel Guide"})]}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-tertiary rounded-lg transition-colors text-text-muted hover:text-white",children:g.jsx(Lc,{size:20})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-8 sm:py-8 space-y-8",children:g.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:g.jsx(Fx,{onClose:e})})})]})]}):null,Bx="chordwheel_onboarding_seen",mO=({onDismiss:n,onOpenHelp:e})=>{const[t,s]=ee.useState(!1),[a,o]=ee.useState(!1);ee.useEffect(()=>{if(!localStorage.getItem(Bx)){const h=setTimeout(()=>s(!0),800);return()=>clearTimeout(h)}},[]);const u=()=>{o(!0),localStorage.setItem(Bx,"true"),setTimeout(()=>{s(!1),n?.()},300)};return t?g.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 ${a?"opacity-0":"opacity-100"}`,style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[g.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer",onClick:u}),g.jsxs("div",{className:`relative max-w-md w-full bg-gradient-to-b from-[#1e1e2a] to-[#151520] border border-white/10 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 ${a?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[g.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-accent-primary/30 rounded-full blur-3xl pointer-events-none"}),g.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl pointer-events-none"}),g.jsxs("div",{className:"relative px-6 pt-6 pb-4 flex items-center justify-between border-b border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center shadow-lg shadow-accent-primary/25",children:g.jsx(Fk,{size:20,className:"text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-bold text-white",children:"Welcome!"}),g.jsx("p",{className:"text-xs text-gray-400",children:"Quick start guide"})]})]}),g.jsx("button",{onClick:u,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:g.jsx(Lc,{size:20})})]}),g.jsxs("div",{className:"relative px-6 py-5 space-y-4",children:[g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:g.jsx(sw,{size:18,className:"text-accent-primary"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:g.jsx($h,{size:18,className:"text-purple-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:g.jsx(iw,{size:18,className:"text-emerald-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",g.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:g.jsx(xp,{size:18,className:"text-amber-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",g.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:g.jsx(n0,{size:18,className:"text-sky-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),g.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[g.jsx(yk,{size:14,className:"text-accent-primary shrink-0",style:{transform:"scaleX(-1)"}}),g.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[g.jsx("strong",{className:"text-gray-300",children:"Tip:"})," Tap the",g.jsx("button",{onClick:()=>{u(),setTimeout(()=>e?.(),350)},className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 hover:bg-bg-tertiary rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/60",title:"Open full guide",children:g.jsx(Oh,{size:12})}),"button anytime for the full guide."]})]}),g.jsx("div",{className:"shrink-0 w-16 h-16 relative",children:g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((c,h)=>{const f=h*30,p=(f-15-90)*Math.PI/180,y=(f+15-90)*Math.PI/180,_=18,b=46,A=h<=4||h>=10;let N;A?h===0?N="rgba(234, 179, 8, 0.9)":h===1?N="rgba(163, 190, 60, 0.85)":h===2?N="rgba(132, 204, 22, 0.8)":h===3?N="rgba(74, 222, 128, 0.7)":h===4?N="rgba(45, 212, 191, 0.6)":h===11?N="rgba(251, 146, 60, 0.85)":h===10?N="rgba(168, 162, 158, 0.6)":N="rgba(200, 180, 100, 0.7)":N=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][h%3];const k=50+_*Math.cos(p),T=50+_*Math.sin(p),R=50+b*Math.cos(p),D=50+b*Math.sin(p),V=50+b*Math.cos(y),B=50+b*Math.sin(y),W=50+_*Math.cos(y),H=50+_*Math.sin(y);return g.jsx("path",{d:`M ${k} ${T} L ${R} ${D} A ${b} ${b} 0 0 1 ${V} ${B} L ${W} ${H} A ${_} ${_} 0 0 0 ${k} ${T}`,fill:N,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},h)}),g.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})})]})})]}),g.jsx("div",{className:"relative px-6 pb-6",children:g.jsx("button",{onClick:u,className:"w-full py-3 px-4 rounded-xl bg-gradient-to-r from-accent-primary to-purple-600 text-white font-semibold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-accent-primary/25 active:scale-[0.98]",children:"Got it, let's go!"})})]})]}):null},gO=({isOpen:n,onClose:e,title:t,artist:s,tags:a,timeSignature:o,onSave:u})=>{const c=ee.useRef(null),h=ee.useRef(null),[f,p]=ee.useState(t),[y,_]=ee.useState(s),[b,A]=ee.useState(a),[N,k]=ee.useState(o),[T,R]=ee.useState("");if(ee.useEffect(()=>{n&&(p(t),_(s),A(a),k(o),R(""),setTimeout(()=>{h.current?.focus(),h.current?.select()},100))},[n,t,s,a,o]),ee.useEffect(()=>{if(!n)return;const L=F=>{F.key==="Escape"&&e()};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[n,e]),!n)return null;const D=()=>{const L=f.trim()||"Untitled Song";u(L,y.trim(),b,N),e()},V=()=>{const L=T.trim();L&&!b.includes(L)&&(A([...b,L]),R(""))},B=L=>{A(b.filter(F=>F!==L))},W=L=>{L.key==="Enter"&&(L.preventDefault(),V())},H=L=>{L.key==="Enter"&&(L.preventDefault(),D())};return Ho.createPortal(g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),g.jsxs("div",{ref:c,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"340px",width:"90vw"},children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),g.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Song Info"})]}),g.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:g.jsx(Lc,{size:14})})]}),g.jsxs("div",{className:"p-4 space-y-4",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Song Title"}),g.jsx("input",{ref:h,type:"text",value:f,onChange:L=>p(L.target.value),onKeyDown:H,placeholder:"Untitled Song",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"By (Optional)"}),g.jsx("input",{type:"text",value:y,onChange:L=>_(L.target.value),onKeyDown:H,placeholder:"Artist or songwriter name",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Signature"}),g.jsxs("select",{value:`${N[0]}/${N[1]}`,onChange:L=>{const[F,te]=L.target.value.split("/").map(j=>parseInt(j,10));k([F,te])},className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`,children:[g.jsx("option",{value:"4/4",children:"4/4 (Common Time)"}),g.jsx("option",{value:"3/4",children:"3/4 (Waltz)"}),g.jsx("option",{value:"2/4",children:"2/4 (March)"}),g.jsx("option",{value:"5/4",children:"5/4"}),g.jsx("option",{value:"6/8",children:"6/8 (Compound)"}),g.jsx("option",{value:"7/8",children:"7/8"}),g.jsx("option",{value:"12/8",children:"12/8"})]}),g.jsx("p",{className:"text-[10px] text-text-muted",children:"Default for new sections. Sections can override this."})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[g.jsx(zk,{size:10}),"Tags (Optional)"]}),b.length>0&&g.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:b.map(L=>g.jsxs("span",{className:Vt("inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium","bg-accent-primary/15 text-accent-primary border border-accent-primary/30"),children:[L,g.jsx("button",{onClick:()=>B(L),className:"hover:text-red-400 transition-colors",title:`Remove "${L}"`,children:g.jsx(Lc,{size:12})})]},L))}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:T,onChange:L=>R(L.target.value),onKeyDown:W,placeholder:"Add a tag...",maxLength:30,className:`flex-1 h-8 bg-bg-tertiary text-text-primary text-xs rounded-lg 
                                           px-3 border border-border-subtle 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`}),g.jsxs("button",{onClick:V,disabled:!T.trim(),className:Vt("h-8 px-3 rounded-lg text-xs font-medium transition-all","flex items-center gap-1",T.trim()?"bg-accent-primary/10 border border-accent-primary/30 text-accent-primary hover:bg-accent-primary/20 active:scale-95":"bg-bg-tertiary border border-border-subtle text-text-muted cursor-not-allowed"),children:[g.jsx(Mc,{size:12}),"Add"]})]}),g.jsx("p",{className:"text-[10px] text-text-muted",children:"Tags help you organize and filter your songs"})]}),g.jsx("button",{onClick:D,className:`w-full py-2.5 rounded-lg
                                   bg-accent-primary text-white font-bold text-sm
                                   hover:bg-accent-primary/90 active:scale-[0.98]
                                   transition-all shadow-lg shadow-accent-primary/25`,children:"Save"})]})]})]}),document.body)},bO=({isOpen:n,onClose:e})=>{const t=ee.useRef(null),{selectedKey:s,setKey:a,setSelectedChord:o}=Ht(),u=Yh();if(ee.useEffect(()=>{if(!n)return;const f=p=>{p.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n,e]),!n)return null;const c=f=>{a(f);const p=la(f,"major");o({root:f,quality:"major",numeral:"I",notes:p,symbol:f}),e()},h=f=>{const p=qx(f);return p.sharps>0?`${p.sharps}`:p.flats>0?`${p.flats}`:""};return Ho.createPortal(g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/50 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),g.jsxs("div",{ref:t,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"360px",width:"90vw"},children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),g.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Select Key"})]}),g.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:g.jsx(Lc,{size:14})})]}),g.jsxs("div",{className:"p-4",children:[g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Current Key"}),g.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[g.jsx("span",{className:"text-2xl font-bold",style:{color:u[s]||"#6366f1"},children:Ln(s)}),g.jsx("span",{className:"text-sm text-text-muted",children:h(s)||"No /"})]})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:gu.map(f=>{const p=f===s,y=u[f]||"#6366f1",_=h(f);return g.jsxs("button",{onClick:()=>c(f),className:`
                                        relative flex flex-col items-center justify-center
                                        py-3 px-2 rounded-lg
                                        transition-all duration-150 active:scale-95
                                        ${p?"ring-2 ring-offset-2 ring-offset-bg-elevated shadow-lg":"hover:bg-bg-tertiary"}
                                    `,style:{backgroundColor:p?y:"transparent",borderColor:y,border:`2px solid ${p?y:"rgba(255,255,255,0.1)"}`,"--tw-ring-color":p?y:void 0},children:[g.jsx("span",{className:`text-lg font-bold ${p?"text-black":""}`,style:{color:p?void 0:y},children:Ln(f)}),g.jsx("span",{className:`text-[10px] ${p?"text-black/70":"text-text-muted"}`,children:_||""})]},f)})}),g.jsx("p",{className:"text-[10px] text-text-muted text-center mt-4",children:"Tap a key to change. The wheel will rotate and the I chord will be selected."})]})]})]}),document.body)},vO=({mobileTimelineOpen:n,setMobileTimelineOpen:e,chordPanelVisible:t,setChordPanelScrolledToBottom:s})=>{const a=ee.useRef(0),[o,u]=ee.useState(0),c=ee.useRef(!1),h=t,f=!t,p=450,y=V=>{a.current=V.touches[0].clientY,c.current=!0,u(0)},_=V=>{if(!c.current)return;const B=a.current-V.touches[0].clientY;u(B)},b=()=>{if(!c.current)return;c.current=!1;const V=40;h&&o<-V&&(t&&Ht.getState().toggleChordPanel(),n&&e(!1)),f&&o>V&&(n||e(!0),t||Ht.getState().toggleChordPanel()),u(0)},A=()=>{Math.abs(o)<15&&(h?(t&&Ht.getState().toggleChordPanel(),n&&e(!1)):(n||e(!0),t||Ht.getState().toggleChordPanel()))},N=o!==0,k=h&&o<0?Math.min(400,-o*1.5):0,T=f&&o>0?Math.min(p,o*2):0,R=T>0,D=k>0;return g.jsxs("div",{className:"shrink-0 flex flex-col overflow-hidden bg-bg-secondary",style:{maxHeight:D?`calc(65vh - ${k}px)`:"65vh",opacity:D?Math.max(.3,1-k/500):1,transition:N?"none":"all 0.25s ease-out"},children:[g.jsx("div",{className:"flex flex-col items-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing select-none",onTouchStart:y,onTouchMove:_,onTouchEnd:b,onClick:A,children:g.jsx("div",{className:"h-6 w-full flex items-center justify-center",children:g.jsx(nw,{size:16,className:`text-text-muted transition-transform duration-200 ${h?"rotate-180":""}`})})}),g.jsxs("div",{className:"flex-1 overflow-hidden",style:{maxHeight:R?`${T}px`:void 0,transition:N?"none":"max-height 0.25s ease-out"},children:[g.jsx(Ng,{isOpen:n||R,onToggle:()=>e(!n)}),g.jsx("div",{"data-chord-details":!0,className:"shrink-0 bg-bg-secondary overflow-hidden",style:{maxHeight:n||R?"45vh":"55vh"},children:g.jsx(Tg,{variant:"drawer",onScrollChange:s,forceVisible:R})})]})]})};function yO(){const{currentSong:n,selectedKey:e,timelineVisible:t,toggleTimeline:s,selectedSectionId:a,selectedSlotId:o,clearSlot:u,clearTimeline:c,setTitle:h,setArtist:f,setTags:p,setSongTimeSignature:y,loadSong:_,newSong:b,instrument:A,volume:N,isMuted:k,undo:T,redo:R,canUndo:D,canRedo:V,chordPanelVisible:B,isPlaying:W,songInfoModalVisible:H,toggleSongInfoModal:L}=Ht();ee.useEffect(()=>{E2(A)},[A]),ee.useEffect(()=>{hw(N)},[N]),ee.useEffect(()=>{dw(k)},[k]);const[F,te]=ee.useState(!1),[j,I]=ee.useState(!1),[X,P]=ee.useState(()=>{if(typeof window>"u")return 1;const we=window.innerWidth,Ve=window.innerHeight;return we<768||Ve<500&&Ve<we?1.25:1}),[ae,Z]=ee.useState(50),[re,le]=ee.useState({x:0,y:0}),fe=ee.useRef(null),[_e,z]=ee.useState(()=>typeof window>"u"?200:Math.max(200,Math.floor(window.innerWidth*.33))),[E,$]=ee.useState(()=>{if(typeof window>"u")return 500;const we=window.innerWidth,pt=window.innerHeight-48-56-152-32,Et=we-380-40;return Math.max(300,Math.min(Et,pt))}),[G,Q]=ee.useState(()=>typeof window<"u"?window.innerWidth<768||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[ie,pe]=ee.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1),de=ee.useRef(!1),ye=ee.useRef(!1),[Se,Be]=ee.useState(!1),Qe=ee.useRef(null),[Xe,ot]=ee.useState(!1),[Y,Ie]=ee.useState(!1),vt=ee.useRef(null),et=ee.useRef(!1);ee.useEffect(()=>{if(!G)return;if(ie&&!et.current)et.current=!0,vt.current=Ht.getState().chordPanelVisible,Be(!0),ot(!0),Ht.getState().chordPanelVisible||Ht.getState().toggleChordPanel();else if(!ie&&et.current){et.current=!1;const Et=Ht.getState().chordPanelVisible,Bt=vt.current;Bt!==null&&Et!==Bt&&Ht.getState().toggleChordPanel(),ot(!1),vt.current=null}const we=()=>{Be(!0)},Ve=()=>{Qe.current&&clearTimeout(Qe.current),Qe.current=setTimeout(we,1e4)},pt=Et=>{const Bt=Et.target,sn=Bt.closest("[data-chord-details]"),Yt=Bt.closest("[data-playback-controls]"),dn=Bt.closest("[data-mobile-timeline]"),fn=Bt.closest("header"),Jn=Bt.closest("[data-wheel-background]"),Gn=Bt.closest("button"),Sn=Bt.tagName==="path"||Bt.tagName==="circle"||Bt.tagName==="text"||Bt.tagName==="polygon"||Bt.tagName==="g"&&Bt.style.cursor==="pointer"||Bt.closest('g[style*="cursor: pointer"]')||Bt.closest('g[class*="cursor-pointer"]'),an=!ie&&Ht.getState().chordPanelVisible;Jn&&!sn&&!Yt&&!dn&&!fn&&!Gn&&!Sn&&!an&&(Be($n=>!$n),Qe.current&&clearTimeout(Qe.current),Ve())};return document.addEventListener("touchstart",pt),Ve(),()=>{document.removeEventListener("touchstart",pt),Qe.current&&clearTimeout(Qe.current)}},[G,ie]);const[Re,it]=ee.useState(!1),qe=ee.useRef(null),ht=ee.useCallback(()=>{!G||!ie||(it(!0),qe.current&&clearTimeout(qe.current),qe.current=setTimeout(()=>{it(!1)},3e3))},[G,ie]);ee.useEffect(()=>()=>{qe.current&&clearTimeout(qe.current)},[]),ee.useEffect(()=>{if(!G)return;const we=()=>{ot(!0)};return window.addEventListener("openMobileTimeline",we),()=>window.removeEventListener("openMobileTimeline",we)},[G]),ee.useEffect(()=>{if(!G)return;const we=Ht.getState();Xe&&!we.timelineVisible?Ht.setState({timelineVisible:!0}):!Xe&&we.timelineVisible&&Ht.setState({timelineVisible:!1})},[G,Xe]),ee.useEffect(()=>{const we=()=>{const Ve=window.innerWidth,pt=window.innerHeight,Et=Ve<768||pt<500&&pt<Ve,Bt=pt<Ve&&pt<500;if(Q(Et),pe(Bt),Et&&Bt){const Yt=Math.max(200,Math.floor(Ve*.33));z(Yt)}if(!Et){const Yt=Ht.getState().timelineVisible?152:24,dn=pt-48-56-Yt-32,fn=Ve-380-40;$(Math.max(300,Math.min(fn,dn)))}const sn=Ht.getState();Et&&!ye.current&&(sn.timelineVisible&&sn.toggleTimeline(),sn.chordPanelVisible&&sn.toggleChordPanel(),ye.current=!0),!Et&&de.current&&!sn.chordPanelVisible&&(sn.toggleChordPanel(),de.current=!1)};return we(),window.addEventListener("resize",we),window.addEventListener("orientationchange",we),()=>{window.removeEventListener("resize",we),window.removeEventListener("orientationchange",we)}},[]),ee.useEffect(()=>{if(G)return;const we=window.innerWidth,Ve=window.innerHeight,pt=t?152:24,Et=Ve-48-56-pt-32,Bt=we-380-40;$(Math.max(300,Math.min(Bt,Et)))},[t,G]);const Te=ee.useCallback((we,Ve)=>{P(we),Z(Ve)},[]),tt=ee.useCallback(()=>{const we=Math.min(2.5,X+.2);P(we),Z(we>1.3?38:50)},[X]),bt=ee.useCallback(()=>{const we=Math.max(.2,X-.2);P(we),Z(we>1.3?38:50)},[X]),mt=ee.useCallback(we=>{le(we)},[]),st=ee.useMemo(()=>G&&(ie||B)?90:0,[G,ie,B]),dt=G&&(ie||B);ee.useEffect(()=>{if(G)if(dt)if(fe.current||(fe.current={zoom:X,origin:ae,pan:{...re}}),ie){const we=window.innerHeight,Ve=1.65,pt=Math.max(.9,Math.min(1.1,we/400)),Et=Ve*pt;P(Et),Z(48),le({x:-35,y:0})}else P(1.42),Z(42),le({x:-35,y:-30});else fe.current&&(P(fe.current.zoom),Z(fe.current.origin),le(fe.current.pan),fe.current=null)},[dt,ie,G]);const gt=()=>{L(!0)},Nt=(we,Ve,pt,Et)=>{h(we),f(Ve),p(pt),y(Et)},Ee=ee.useMemo(()=>{const we=n.sections.reduce((sn,Yt)=>{const dn=Yt.measures.reduce((fn,Jn)=>fn+Jn.beats.reduce((Gn,Sn)=>Gn+Sn.duration,0),0);return sn+dn},0),Ve=n.tempo/60,pt=we/Ve,Et=Math.floor(pt/60),Bt=Math.floor(pt%60);return`${Et}:${Bt.toString().padStart(2,"0")}`},[n.sections,n.tempo]),[ft,ut]=ee.useState(!1);ee.useEffect(()=>{const we=async()=>{try{k2(),await Tu(),await Fl(),ut(!0)}catch(pt){console.error("Audio initialization failed:",pt)}},Ve=async()=>{ft||(await j2(),we())};return document.addEventListener("touchstart",Ve,{once:!0}),document.addEventListener("click",Ve,{once:!0}),()=>{document.removeEventListener("touchstart",Ve),document.removeEventListener("click",Ve)}},[ft]),ee.useEffect(()=>{const we=Ve=>{if((Ve.key==="Delete"||Ve.key==="Backspace")&&a&&o){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;Ve.preventDefault(),u(a,o)}};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[a,o,u]),ee.useEffect(()=>{const we=Ve=>{const pt=Ve.target;pt?.tagName==="INPUT"||pt?.tagName==="TEXTAREA"||pt?.isContentEditable||Ve.metaKey&&Ve.key.toLowerCase()==="z"&&(Ve.preventDefault(),Ve.shiftKey?V&&R():D&&T())};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[T,R,D,V]);const[We,at]=ee.useState(!1),[xt,ct]=ee.useState([]),nn=ee.useRef(null);ee.useEffect(()=>{ct(rf())},[]),ee.useEffect(()=>{const we=Ve=>{nn.current&&!nn.current.contains(Ve.target)&&at(!1)};return document.addEventListener("mousedown",we),()=>document.removeEventListener("mousedown",we)},[]);const jt=()=>{if(n.title==="Untitled Song"||!n.title.trim()){const we=prompt("Please name your song:",n.title);if(we===null)return;const Ve=we.trim()||"Untitled Song";h(Ve);const pt={...n,title:Ve};Ix(pt)}else Ix(n);ct(rf()),at(!1)},Ft=we=>{_(we),at(!1)},[en,At]=ee.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),wt=()=>{At({isOpen:!0,title:"New Song",message:"Start a new song? Unsaved changes will be lost.",confirmLabel:"Start New",isDestructive:!0,onConfirm:()=>{b(),at(!1)}})},qt=(we,Ve,pt)=>{pt.stopPropagation(),At({isOpen:!0,title:"Delete Song",message:`Are you sure you want to delete "${Ve}"? This cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:()=>{iO(we),ct(rf())}})},wn=152,Me=()=>{const we=new Ut,Ve=we.internal.pageSize.getWidth(),pt=20,Et=4,sn=n.sections.reduce((St,Mt)=>{const un=(Mt.timeSignature||n.timeSignature)[0];return St+Mt.measures.length*un},0)/n.tempo*60,Yt=Math.floor(sn/60),dn=Math.floor(sn%60),fn=`${Yt}:${dn.toString().padStart(2,"0")}`,Jn=n.sections.reduce((St,Mt)=>St+Mt.measures.length,0),Gn=n.sections.length;if(we.setFontSize(22),we.setFont("helvetica","bold"),we.setTextColor(0,0,0),we.text(n.title,pt,18),n.artist&&n.artist.trim()){const St=we.getTextWidth(n.title);we.setFontSize(14),we.setFont("helvetica","italic"),we.setTextColor(100,100,100),we.text(`by ${n.artist}`,pt+St+6,18),we.setTextColor(0,0,0)}we.setDrawColor(0,0,0),we.setLineWidth(.5),we.line(pt,22,Ve-pt,22),we.setFontSize(10),we.setFont("helvetica","normal");const Sn=[`Key: ${Ln(e)}`,`${n.timeSignature[0]}/${n.timeSignature[1]}`,`Tempo: ${n.tempo} BPM`,`Duration: ${fn}`,`${Gn} sections`,`${Jn} bars`];we.text(Sn.join("      "),pt,30);let an=48;const $n=new Set;if(n.sections.forEach(St=>{const Mt=St.measures.map(xn=>{const Pn=xn.beats.length;return xn.beats.forEach(Tn=>{if(Tn.chord){const sr=Tn.chord.root,Mr={major:"maj",minor:"m",diminished:"dim",augmented:"aug",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m7b5",sus2:"sus2",sus4:"sus4"}[Tn.chord.quality]||Tn.chord.quality||"maj";$n.add(`${sr}|${Mr}`)}}),Pn===1?xn.beats[0]?.chord?.symbol||"":Pn===2?xn.beats.map(Tn=>Tn.chord?.symbol||"").join(" "):xn.beats.map(Tn=>Tn.chord?.symbol||"").join(" ")}),pn=Mt.length===0?1:Math.ceil(Mt.length/Et),on=10+(Mt.length===0?12:pn*10)+6;if(an>48&&an+on>280&&(we.addPage(),an=20),we.setFontSize(14),we.setFont("helvetica","bold"),we.setTextColor(0,0,0),we.text(`[${Rh(St,n.sections)}]`,pt,an),an+=10,we.setFontSize(14),we.setFont("helvetica","normal"),Mt.length===0)we.text("(No chords)",pt,an),an+=12;else for(let xn=0;xn<Mt.length;xn+=Et){const Tn=Mt.slice(xn,xn+Et).join("  |  ");we.text(Tn,pt,an),an+=10}an+=6}),$n.size>0){const St=Array.from($n),Mt=245,pn=5,xn=St.length*(22+pn)>Mt,Pn=xn?18:22,Tn=xn?18:20,sr=xn?22:25,$r=xn?155:170;let Mr=0,_s=35;const Yi=xn?Math.ceil(St.length/2):St.length;we.setPage(1),St.forEach((Pr,ni)=>{const[Gs,Nn]=Pr.split("|"),Xi=Kw(Gs,Nn);if(!Xi)return;xn&&ni===Yi&&(Mr=1,_s=35);const Ds=Mr*sr,Si=`${Gs}${Nn==="maj"?"":Nn}`;we.setFontSize(xn?6:7),we.setFont("helvetica","bold"),we.setTextColor(0,0,0),we.text(Si,$r+Ds+Tn/2+2,_s,{align:"center"}),yt(we,Xi,$r+Ds,_s+3,xn),_s+=Pn+pn})}const Er=(St,Mt)=>{const un={intro:"In",verse:"V","pre-chorus":"PC",chorus:"C",bridge:"Br",interlude:"Int",solo:"So",breakdown:"Bd",tag:"Tg",hook:"Hk",outro:"Out"}[St.type]||St.type.charAt(0).toUpperCase(),on=Mt.filter(xn=>xn.type===St.type);if(on.length>1){const xn=on.findIndex(Pn=>Pn.id===St.id)+1;return`${un}${xn}`}return un},us=St=>{const on=Ve-pt*2,xn=n.sections.reduce((Tn,sr)=>Tn+sr.measures.length,0);if(xn===0)return;let Pn=pt;St.setDrawColor(0,0,0),St.setLineWidth(.4),n.sections.forEach(Tn=>{const sr=Tn.measures.length/xn*on,$r=Pn+2,Mr=Pn+sr-2;St.line($r,285,Mr,285),St.line($r,281,$r,289),St.line(Mr,281,Mr,289);const _s=Er(Tn,n.sections);St.setFontSize(7),St.setFont("helvetica","normal"),St.setTextColor(0,0,0),St.text(_s,Pn+sr/2,278,{align:"center"}),Pn+=sr})},je=we.getNumberOfPages();for(let St=1;St<=je;St++)we.setPage(St),us(we);const Pe=`${n.title.replace(/\s+/g,"-").toLowerCase()}.pdf`,Ze=we.output("blob");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const St=URL.createObjectURL(Ze);window.open(St,"_blank"),setTimeout(()=>URL.revokeObjectURL(St),1e4)}else sO.saveAs(Ze,Pe)},yt=(we,Ve,pt,Et,Bt=!1)=>{const{frets:sn,barres:Yt,baseFret:dn}=Ve,fn=Bt?2.5:3,Jn=Bt?3:4,Gn=4,Sn=6,an=Bt?1:1.2,$n=Array.from({length:Sn},(Ze,Ct)=>pt+Ct*fn),Er=Array.from({length:Gn+1},(Ze,Ct)=>Et+Ct*Jn),us=dn===1,je=fn*(Sn-1),Pe=Jn*Gn;we.setDrawColor(0,0,0),us?(we.setLineWidth(1),we.line(pt,Et,pt+je,Et)):(we.setLineWidth(.3),we.line(pt,Et,pt+je,Et),we.setFontSize(Bt?6:7),we.setFont("helvetica","bold"),we.text(dn.toString(),pt-3,Et+Jn/2+1)),we.setLineWidth(.2),Er.slice(1).forEach(Ze=>{we.line(pt,Ze,pt+je,Ze)}),$n.forEach(Ze=>{we.line(Ze,Et,Ze,Et+Pe)}),Yt.forEach(Ze=>{const Ct=sn.map((un,on)=>({fret:un,idx:on})).filter(({fret:un})=>un===Ze);if(Ct.length<2)return;const St=Math.min(...Ct.map(un=>un.idx)),Mt=Math.max(...Ct.map(un=>un.idx)),pn=Et+(Ze-.5)*Jn;we.setLineWidth(an*1.4),we.line($n[St],pn,$n[Mt],pn),we.setLineWidth(.2)}),sn.forEach((Ze,Ct)=>{const St=$n[Ct];if(Ze===-1){we.setFontSize(Bt?6:7),we.setFont("helvetica","bold"),we.text("x",St,Et-1,{align:"center"});return}if(Ze===0){we.setLineWidth(.3),we.circle(St,Et-1.5,.8,"S");return}if(Yt.includes(Ze)){const un=sn.findIndex(on=>on===Ze);if(Ct!==un)return}const pn=Et+(Ze-.5)*Jn;we.setFillColor(0,0,0),we.circle(St,pn,an,"F")})};return g.jsxs("div",{className:"h-full w-full flex flex-col bg-bg-secondary text-text-primary overflow-hidden",children:[g.jsxs("header",{className:`${G?"h-14":"h-12"} border-b border-border-subtle grid grid-cols-[1fr_auto_1fr] items-center ${G?"px-4":"px-3"} bg-bg-secondary shrink-0 z-20 transition-all duration-300 ease-out ${G&&!ie&&(Se||B)||G&&ie&&!Re?"opacity-0 -translate-y-full pointer-events-none absolute top-0 left-0 right-0":"relative"}`,children:[g.jsx("div",{className:"flex items-center gap-2 shrink-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"relative",children:g.jsx(fE,{size:G?32:24})}),g.jsx("span",{className:`font-bold ${G?"text-xs":"text-sm"} tracking-tight hidden sm:block text-text-muted`,children:"Songwriter Wheel"})]})}),g.jsx("div",{className:"flex items-center justify-center overflow-hidden",children:g.jsx("span",{onClick:gt,className:`${G?"text-xs":"text-sm"} font-medium text-text-primary cursor-pointer hover:text-accent-primary transition-colors px-2 py-1 rounded text-center truncate max-w-[70vw]`,title:"Click to edit song info",children:n.title})}),g.jsxs("div",{className:`flex items-center ${G?"gap-3":"gap-4"} shrink-0 justify-self-end`,children:[!G&&g.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[g.jsx(YT,{size:11,className:"shrink-0"}),g.jsx("span",{className:"leading-none",children:Ee})]}),g.jsxs("button",{onClick:()=>I(!0),className:`flex items-center gap-2 p-[10px] ${G?"text-xs":"text-[10px]"} text-text-muted hover:bg-bg-tertiary rounded-lg transition-colors touch-feedback`,children:[g.jsx("span",{className:"uppercase font-bold",children:"Key"}),g.jsx("span",{className:`font-bold text-accent-primary ${G?"text-base":"text-sm"} min-w-[1.5rem] text-center inline-block`,children:Ln(e)})]}),g.jsxs("div",{className:"relative",ref:nn,children:[g.jsxs("button",{onClick:()=>at(!We),className:`flex items-center gap-1.5 ${G?"text-xs px-2 py-1.5 min-w-[44px]":"text-[11px] px-2 py-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback`,children:[g.jsx(mg,{size:G?16:12}),g.jsx("span",{className:"hidden sm:inline",children:"Save"}),g.jsx(jh,{size:G?12:10,className:`transition-transform ${We?"rotate-180":""}`})]}),We&&g.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-[#1a1a24] border border-border-medium rounded-lg shadow-2xl z-50 overflow-hidden",children:[g.jsxs("div",{className:"p-1.5 border-b border-border-subtle bg-[#22222e]",children:[g.jsxs("button",{onClick:jt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[g.jsx(mg,{size:14,className:"text-accent-primary"}),"Save Current Song"]}),g.jsxs("button",{onClick:wt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[g.jsx(tk,{size:14,className:"text-green-400"}),"New Song"]})]}),g.jsx("div",{className:"max-h-48 overflow-y-auto bg-[#1a1a24]",children:xt.length===0?g.jsx("p",{className:"px-3 py-4 text-[10px] text-gray-500 text-center",children:"No saved songs yet"}):g.jsxs("div",{className:"p-1.5",children:[g.jsx("p",{className:"px-2 py-1 text-[9px] text-gray-500 uppercase tracking-wider",children:"Saved Songs"}),xt.map(we=>g.jsxs("div",{onClick:()=>Ft(we),className:`flex items-center justify-between px-3 py-2 text-xs rounded cursor-pointer transition-colors ${we.id===n.id?"bg-accent-primary/20 text-accent-primary":"text-gray-300 hover:bg-[#2a2a3a]"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g.jsx(rk,{size:12,className:"shrink-0"}),g.jsx("span",{className:"truncate",children:we.title})]}),g.jsx("button",{onClick:Ve=>qt(we.id,we.title,Ve),className:"p-1 hover:bg-red-500/20 rounded text-gray-500 hover:text-red-400 shrink-0",children:g.jsx(gg,{size:10})})]},we.id))]})})]})]}),g.jsxs("button",{onClick:Me,className:`flex items-center justify-center ${G?"text-xs px-3 py-1.5 min-w-[44px] min-h-[44px] gap-1":"text-[11px] px-2.5 py-1 gap-1.5"} bg-text-primary text-bg-primary rounded font-medium hover:bg-white transition-colors touch-feedback`,children:[g.jsx(n0,{size:G?16:12}),g.jsx("span",{className:G?"text-[10px] font-bold":"hidden sm:inline",children:"PDF"})]})]})]}),g.jsxs("div",{className:`flex-1 flex ${G?ie?"flex-row":"flex-col":"flex-row"} overflow-hidden min-h-0`,children:[g.jsxs("div",{"data-wheel-background":!0,className:`flex flex-col min-w-0 min-h-0 bg-gradient-to-b from-bg-primary to-bg-secondary/30 ${G&&ie?"shrink-0":"flex-1"} ${G?"overflow-hidden":""} relative`,style:G&&ie?{width:`${_e}px`,minWidth:"200px",height:"100%"}:void 0,children:[g.jsxs("div",{className:`flex-1 flex flex-col ${G&&!ie?"justify-center":G&&ie?"justify-center items-center":"justify-center items-center pt-2"} ${G?"overflow-hidden":"overflow-visible"}`,children:[G?null:g.jsxs("div",{className:"flex justify-end gap-2 px-2 shrink-0 w-full",children:[g.jsxs("div",{className:"flex items-center bg-bg-secondary/60 backdrop-blur-sm rounded-full px-0.5 border border-border-subtle/40",children:[g.jsx("button",{onClick:bt,disabled:X<=.2,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom out",children:g.jsx(bk,{size:8})}),g.jsxs("span",{className:"text-[7px] w-5 text-text-muted text-center font-medium",children:[Math.round(X*100),"%"]}),g.jsx("button",{onClick:tt,disabled:X>=2.5,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom in",children:g.jsx(Mc,{size:8})})]}),g.jsx("button",{onClick:()=>te(!0),className:"no-touch-enlarge w-8 h-8 flex items-center justify-center bg-bg-secondary/60 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/40",title:"Songwriter Wheel Guide",children:g.jsx(Oh,{size:16})})]}),g.jsx("div",{className:`flex-1 flex justify-center ${G?"items-center":""} ${G&&ie?"p-1 overflow-hidden":G&&!ie?"px-0 py-0":"p-2 overflow-visible"}`,onClick:ht,children:g.jsx("div",{className:"relative flex items-center justify-center",style:G&&ie?{width:"calc(100dvh - 60px)",height:"calc(100dvh - 60px)",maxWidth:"100%",maxHeight:"100%",aspectRatio:"1 / 1"}:G&&!ie?{width:Se?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",height:Se?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxWidth:Se?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxHeight:Se?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",aspectRatio:"1 / 1"}:{width:`${E}px`,height:`${E}px`,aspectRatio:"1 / 1"},children:g.jsx(rj,{zoomScale:X,zoomOriginY:ae,onZoomChange:Te,panOffset:re,onPanChange:mt,rotationOffset:st,disableModeToggle:st!==0})})})]}),G&&g.jsx("button",{onClick:()=>te(!0),onTouchEnd:we=>{we.preventDefault(),we.stopPropagation(),te(!0)},className:`absolute ${ie?"top-2 right-2 w-8 h-8":"top-3 right-3 w-11 h-11"} flex items-center justify-center bg-bg-secondary/90 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors shadow-lg border border-border-subtle z-50`,style:{touchAction:"auto",pointerEvents:"auto"},title:"Songwriter Wheel Guide",children:g.jsx(Oh,{size:ie?14:20})}),G?null:t?g.jsx(g.Fragment,{children:g.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle overflow-hidden flex flex-col",style:{height:wn},children:[g.jsxs("div",{className:"shrink-0 flex items-center justify-between px-2 py-1 border-b border-border-subtle/50 bg-bg-elevated/80",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("button",{onClick:T,disabled:!D,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Z)",children:[g.jsx(_p,{size:12}),g.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Undo"})]}),g.jsxs("button",{onClick:R,disabled:!V,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Z)",children:[g.jsx($h,{size:12}),g.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Redo"})]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("button",{onClick:()=>{At({isOpen:!0,title:"Clear Timeline",message:"Are you sure you want to clear all chords from the timeline? This action cannot be undone.",confirmLabel:"Clear",isDestructive:!0,onConfirm:c})},className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-red-400 rounded hover:bg-red-400/10 transition-colors flex items-center gap-0.5",title:"Clear all chords from timeline",children:[g.jsx(gg,{size:8}),g.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Clear"})]}),g.jsxs("button",{onClick:s,className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-text-primary rounded hover:bg-bg-tertiary transition-colors flex items-center gap-0.5",title:"Hide timeline",children:[g.jsx(jh,{size:8}),g.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Hide"})]})]})]}),g.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:g.jsx(Ng,{isOpen:!0,onToggle:s,hideCloseButton:!0,isCompact:!1,isLandscape:!1})})]})}):g.jsx("div",{className:"h-6 bg-bg-secondary border-t border-border-subtle flex items-center justify-center shrink-0",children:g.jsxs("button",{onClick:s,className:"px-3 h-full flex items-center gap-1 text-[8px] text-text-muted hover:text-text-primary hover:bg-bg-tertiary transition-colors",title:"Show timeline",children:[g.jsx(nw,{size:10}),g.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Timeline"})]})})]}),G&&ie?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`flex h-full ${Xe?"flex-1":"justify-end"} shrink-0`,style:{minWidth:Xe?"100px":"28px",transition:"all 0.25s ease-out"},children:[g.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${Xe?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{Xe&&!B&&Ht.getState().toggleChordPanel(),ot(!Xe)},children:[g.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),g.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:Xe?"":"Timeline"})]}),Xe&&g.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle",children:g.jsx(Ng,{isOpen:!0,onToggle:()=>ot(!1),hideCloseButton:!0,isCompact:B,isLandscape:!0})})]}),g.jsxs("div",{className:`flex h-full ${B?"flex-1":""} shrink-0`,style:{minWidth:B?"100px":"28px",transition:"all 0.25s ease-out"},children:[B&&g.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle","data-chord-details":!0,children:g.jsx(Tg,{variant:Xe?"landscape-panel":"landscape-expanded"})}),g.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${B?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{B&&!Xe&&ot(!0),Ht.getState().toggleChordPanel()},children:[g.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),g.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:B?"":"Details"})]})]})]}):G?null:g.jsx(Tg,{variant:"sidebar"})]}),G&&!ie&&g.jsx(vO,{mobileTimelineOpen:Xe,setMobileTimelineOpen:ot,chordPanelVisible:B,setChordPanelScrolledToBottom:Ie}),(W||!(G&&!ie&&(Se||B&&!Y)))&&g.jsx("div",{className:"shrink-0 z-30 relative bg-bg-elevated transition-all duration-300",children:g.jsx(aE,{})}),g.jsx(aO,{isOpen:en.isOpen,onClose:()=>At(we=>({...we,isOpen:!1})),onConfirm:en.onConfirm,title:en.title,message:en.message,confirmLabel:en.confirmLabel,isDestructive:en.isDestructive}),g.jsx(dE,{onSave:jt,onExport:Me}),g.jsx(pO,{isOpen:F,onClose:()=>te(!1)}),g.jsx(bO,{isOpen:j,onClose:()=>I(!1)}),g.jsx(gO,{isOpen:H,onClose:()=>L(!1),title:n.title,artist:n.artist||"",tags:n.tags||[],timeSignature:n.timeSignature,onSave:Nt}),g.jsx(mO,{onOpenHelp:()=>te(!0)})]})}oS.createRoot(document.getElementById("root")).render(g.jsxs(ee.StrictMode,{children:[g.jsx(yO,{}),g.jsx(gS,{})]}));export{rr as _,k1 as c,Q_ as g};
