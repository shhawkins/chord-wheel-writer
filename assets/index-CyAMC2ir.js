(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var w1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hm={exports:{}},Df={};var ev;function j_(){if(ev)return Df;ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:o}}return Df.Fragment=e,Df.jsx=t,Df.jsxs=t,Df}var tv;function E_(){return tv||(tv=1,hm.exports=j_()),hm.exports}var x=E_(),fm={exports:{}},cn={};var nv;function M_(){if(nv)return cn;nv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(G){return G===null||typeof G!="object"?null:(G=_&&G[_]||G["@@iterator"],typeof G=="function"?G:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function T(G,j,z){this.props=G,this.context=j,this.refs=k,this.updater=z||N}T.prototype.isReactComponent={},T.prototype.setState=function(G,j){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,j,"setState")},T.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function R(){}R.prototype=T.prototype;function O(G,j,z){this.props=G,this.context=j,this.refs=k,this.updater=z||N}var V=O.prototype=new R;V.constructor=O,A(V,T.prototype),V.isPureReactComponent=!0;var I=Array.isArray;function W(){}var U={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function B(G,j,z){var X=z.ref;return{$$typeof:r,type:G,key:j,ref:X!==void 0?X:null,props:z}}function ee(G,j){return B(G.type,j,G.props)}function M(G){return typeof G=="object"&&G!==null&&G.$$typeof===r}function F(G){var j={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(z){return j[z]})}var J=/\/+/g;function te(G,j){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):j.toString(36)}function ae(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(W,W):(G.status="pending",G.then(function(j){G.status==="pending"&&(G.status="fulfilled",G.value=j)},function(j){G.status==="pending"&&(G.status="rejected",G.reason=j)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function H(G,j,z,X,ie){var ce=typeof G;(ce==="undefined"||ce==="boolean")&&(G=null);var pe=!1;if(G===null)pe=!0;else switch(ce){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(G.$$typeof){case r:case e:pe=!0;break;case p:return pe=G._init,H(pe(G._payload),j,z,X,ie)}}if(pe)return ie=ie(G),pe=X===""?"."+te(G,0):X,I(ie)?(z="",pe!=null&&(z=pe.replace(J,"$&/")+"/"),H(ie,j,z,"",function(we){return we})):ie!=null&&(M(ie)&&(ie=ee(ie,z+(ie.key==null||G&&G.key===ie.key?"":(""+ie.key).replace(J,"$&/")+"/")+pe)),j.push(ie)),1;pe=0;var me=X===""?".":X+":";if(I(G))for(var Ne=0;Ne<G.length;Ne++)X=G[Ne],ce=me+te(X,Ne),pe+=H(X,j,z,ce,ie);else if(Ne=b(G),typeof Ne=="function")for(G=Ne.call(G),Ne=0;!(X=G.next()).done;)X=X.value,ce=me+te(X,Ne++),pe+=H(X,j,z,ce,ie);else if(ce==="object"){if(typeof G.then=="function")return H(ae(G),j,z,X,ie);throw j=String(G),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return pe}function se(G,j,z){if(G==null)return G;var X=[],ie=0;return H(G,X,"","",function(ce){return j.call(z,ce,ie++)}),X}function Q(G){if(G._status===-1){var j=G._result;j=j(),j.then(function(z){(G._status===0||G._status===-1)&&(G._status=1,G._result=z)},function(z){(G._status===0||G._status===-1)&&(G._status=2,G._result=z)}),G._status===-1&&(G._status=0,G._result=j)}if(G._status===1)return G._result.default;throw G._result}var ge=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ue={map:se,forEach:function(G,j,z){se(G,function(){j.apply(this,arguments)},z)},count:function(G){var j=0;return se(G,function(){j++}),j},toArray:function(G){return se(G,function(j){return j})||[]},only:function(G){if(!M(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return cn.Activity=y,cn.Children=ue,cn.Component=T,cn.Fragment=t,cn.Profiler=a,cn.PureComponent=O,cn.StrictMode=s,cn.Suspense=f,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,cn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return U.H.useMemoCache(G)}},cn.cache=function(G){return function(){return G.apply(null,arguments)}},cn.cacheSignal=function(){return null},cn.cloneElement=function(G,j,z){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var X=A({},G.props),ie=G.key;if(j!=null)for(ce in j.key!==void 0&&(ie=""+j.key),j)!L.call(j,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&j.ref===void 0||(X[ce]=j[ce]);var ce=arguments.length-2;if(ce===1)X.children=z;else if(1<ce){for(var pe=Array(ce),me=0;me<ce;me++)pe[me]=arguments[me+2];X.children=pe}return B(G.type,ie,X)},cn.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},cn.createElement=function(G,j,z){var X,ie={},ce=null;if(j!=null)for(X in j.key!==void 0&&(ce=""+j.key),j)L.call(j,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ie[X]=j[X]);var pe=arguments.length-2;if(pe===1)ie.children=z;else if(1<pe){for(var me=Array(pe),Ne=0;Ne<pe;Ne++)me[Ne]=arguments[Ne+2];ie.children=me}if(G&&G.defaultProps)for(X in pe=G.defaultProps,pe)ie[X]===void 0&&(ie[X]=pe[X]);return B(G,ce,ie)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(G){return{$$typeof:c,render:G}},cn.isValidElement=M,cn.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:Q}},cn.memo=function(G,j){return{$$typeof:d,type:G,compare:j===void 0?null:j}},cn.startTransition=function(G){var j=U.T,z={};U.T=z;try{var X=G(),ie=U.S;ie!==null&&ie(z,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(W,ge)}catch(ce){ge(ce)}finally{j!==null&&z.types!==null&&(j.types=z.types),U.T=j}},cn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},cn.use=function(G){return U.H.use(G)},cn.useActionState=function(G,j,z){return U.H.useActionState(G,j,z)},cn.useCallback=function(G,j){return U.H.useCallback(G,j)},cn.useContext=function(G){return U.H.useContext(G)},cn.useDebugValue=function(){},cn.useDeferredValue=function(G,j){return U.H.useDeferredValue(G,j)},cn.useEffect=function(G,j){return U.H.useEffect(G,j)},cn.useEffectEvent=function(G){return U.H.useEffectEvent(G)},cn.useId=function(){return U.H.useId()},cn.useImperativeHandle=function(G,j,z){return U.H.useImperativeHandle(G,j,z)},cn.useInsertionEffect=function(G,j){return U.H.useInsertionEffect(G,j)},cn.useLayoutEffect=function(G,j){return U.H.useLayoutEffect(G,j)},cn.useMemo=function(G,j){return U.H.useMemo(G,j)},cn.useOptimistic=function(G,j){return U.H.useOptimistic(G,j)},cn.useReducer=function(G,j,z){return U.H.useReducer(G,j,z)},cn.useRef=function(G){return U.H.useRef(G)},cn.useState=function(G){return U.H.useState(G)},cn.useSyncExternalStore=function(G,j,z){return U.H.useSyncExternalStore(G,j,z)},cn.useTransition=function(){return U.H.useTransition()},cn.version="19.2.0",cn}var rv;function Cg(){return rv||(rv=1,fm.exports=M_()),fm.exports}var re=Cg();const Yn=k_(re);var dm={exports:{}},Rf={},pm={exports:{}},mm={};var sv;function L_(){return sv||(sv=1,(function(r){function e(H,se){var Q=H.length;H.push(se);e:for(;0<Q;){var ge=Q-1>>>1,ue=H[ge];if(0<a(ue,se))H[ge]=se,H[Q]=ue,Q=ge;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var se=H[0],Q=H.pop();if(Q!==se){H[0]=Q;e:for(var ge=0,ue=H.length,G=ue>>>1;ge<G;){var j=2*(ge+1)-1,z=H[j],X=j+1,ie=H[X];if(0>a(z,Q))X<ue&&0>a(ie,z)?(H[ge]=ie,H[X]=Q,ge=X):(H[ge]=z,H[j]=Q,ge=j);else if(X<ue&&0>a(ie,Q))H[ge]=ie,H[X]=Q,ge=X;else break e}}return se}function a(H,se){var Q=H.sortIndex-se.sortIndex;return Q!==0?Q:H.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var f=[],d=[],p=1,y=null,_=3,b=!1,N=!1,A=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function V(H){for(var se=t(d);se!==null;){if(se.callback===null)s(d);else if(se.startTime<=H)s(d),se.sortIndex=se.expirationTime,e(f,se);else break;se=t(d)}}function I(H){if(A=!1,V(H),!N)if(t(f)!==null)N=!0,W||(W=!0,F());else{var se=t(d);se!==null&&ae(I,se.startTime-H)}}var W=!1,U=-1,L=5,B=-1;function ee(){return k?!0:!(r.unstable_now()-B<L)}function M(){if(k=!1,W){var H=r.unstable_now();B=H;var se=!0;try{e:{N=!1,A&&(A=!1,R(U),U=-1),b=!0;var Q=_;try{t:{for(V(H),y=t(f);y!==null&&!(y.expirationTime>H&&ee());){var ge=y.callback;if(typeof ge=="function"){y.callback=null,_=y.priorityLevel;var ue=ge(y.expirationTime<=H);if(H=r.unstable_now(),typeof ue=="function"){y.callback=ue,V(H),se=!0;break t}y===t(f)&&s(f),V(H)}else s(f);y=t(f)}if(y!==null)se=!0;else{var G=t(d);G!==null&&ae(I,G.startTime-H),se=!1}}break e}finally{y=null,_=Q,b=!1}se=void 0}}finally{se?F():W=!1}}}var F;if(typeof O=="function")F=function(){O(M)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,te=J.port2;J.port1.onmessage=M,F=function(){te.postMessage(null)}}else F=function(){T(M,0)};function ae(H,se){U=T(function(){H(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(H){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var Q=_;_=se;try{return H()}finally{_=Q}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(H,se){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=_;_=H;try{return se()}finally{_=Q}},r.unstable_scheduleCallback=function(H,se,Q){var ge=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ge+Q:ge):Q=ge,H){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Q+ue,H={id:p++,callback:se,priorityLevel:H,startTime:Q,expirationTime:ue,sortIndex:-1},Q>ge?(H.sortIndex=Q,e(d,H),t(f)===null&&H===t(d)&&(A?(R(U),U=-1):A=!0,ae(I,Q-ge))):(H.sortIndex=ue,e(f,H),N||b||(N=!0,W||(W=!0,F()))),H},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(H){var se=_;return function(){var Q=_;_=se;try{return H.apply(this,arguments)}finally{_=Q}}}})(mm)),mm}var iv;function O_(){return iv||(iv=1,pm.exports=L_()),pm.exports}var gm={exports:{}},ti={};var av;function D_(){if(av)return ti;av=1;var r=Cg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:d,implementation:p}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ti.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},ti.flushSync=function(f){var d=u.T,p=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=d,s.p=p,s.d.f()}},ti.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},ti.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ti.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&s.d.X(f,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ti.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},ti.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin);s.d.L(f,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ti.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},ti.requestFormReset=function(f){s.d.r(f)},ti.unstable_batchedUpdates=function(f,d){return f(d)},ti.useFormState=function(f,d,p){return u.H.useFormState(f,d,p)},ti.useFormStatus=function(){return u.H.useHostTransitionStatus()},ti.version="19.2.0",ti}var ov;function Ax(){if(ov)return gm.exports;ov=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gm.exports=D_(),gm.exports}var lv;function R_(){if(lv)return Rf;lv=1;var r=O_(),e=Cg(),t=Ax();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function c(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(o(n)!==n)throw Error(s(188))}function d(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,h=i;;){var g=l.return;if(g===null)break;var w=g.alternate;if(w===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===l)return f(g),n;if(w===h)return f(g),i;w=w.sibling}throw Error(s(188))}if(l.return!==h.return)l=g,h=w;else{for(var D=!1,K=g.child;K;){if(K===l){D=!0,l=g,h=w;break}if(K===h){D=!0,h=g,l=w;break}K=K.sibling}if(!D){for(K=w.child;K;){if(K===l){D=!0,l=w,h=g;break}if(K===h){D=!0,h=w,l=g;break}K=K.sibling}if(!D)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var J=Symbol.for("react.client.reference");function te(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===J?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case W:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case O:return n.displayName||"Context";case R:return(n._context.displayName||"Context")+".Consumer";case V:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case U:return i=n.displayName||null,i!==null?i:te(n.type)||"Memo";case L:i=n._payload,n=n._init;try{return te(n(i))}catch{}}return null}var ae=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ge=[],ue=-1;function G(n){return{current:n}}function j(n){0>ue||(n.current=ge[ue],ge[ue]=null,ue--)}function z(n,i){ue++,ge[ue]=n.current,n.current=i}var X=G(null),ie=G(null),ce=G(null),pe=G(null);function me(n,i){switch(z(ce,i),z(ie,n),z(X,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?S5(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=S5(i),n=N5(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}j(X),z(X,n)}function Ne(){j(X),j(ie),j(ce)}function we(n){n.memoizedState!==null&&z(pe,n);var i=X.current,l=N5(i,n.type);i!==l&&(z(ie,n),z(X,l))}function Ve(n){ie.current===n&&(j(X),j(ie)),pe.current===n&&(j(pe),Ef._currentValue=Q)}var Ge,nt;function st(n){if(Ge===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ge=i&&i[1]||"",nt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+n+nt}var Y=!1;function De(n,i){if(!n||Y)return"";Y=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Ie){var Oe=Ie}Reflect.construct(n,[],Xe)}else{try{Xe.call()}catch(Ie){Oe=Ie}n.call(Xe.prototype)}}else{try{throw Error()}catch(Ie){Oe=Ie}(Xe=n())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Ie){if(Ie&&Oe&&typeof Ie.stack=="string")return[Ie.stack,Oe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),D=w[0],K=w[1];if(D&&K){var be=D.split(`
`),Le=K.split(`
`);for(g=h=0;h<be.length&&!be[h].includes("DetermineComponentFrameRoot");)h++;for(;g<Le.length&&!Le[g].includes("DetermineComponentFrameRoot");)g++;if(h===be.length||g===Le.length)for(h=be.length-1,g=Le.length-1;1<=h&&0<=g&&be[h]!==Le[g];)g--;for(;1<=h&&0<=g;h--,g--)if(be[h]!==Le[g]){if(h!==1||g!==1)do if(h--,g--,0>g||be[h]!==Le[g]){var qe=`
`+be[h].replace(" at new "," at ");return n.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",n.displayName)),qe}while(1<=h&&0<=g);break}}}finally{Y=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?st(l):""}function dt(n,i){switch(n.tag){case 26:case 27:case 5:return st(n.type);case 16:return st("Lazy");case 13:return n.child!==i&&i!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return De(n.type,!1);case 11:return De(n.type.render,!1);case 1:return De(n.type,!0);case 31:return st("Activity");default:return""}}function et(n){try{var i="",l=null;do i+=dt(n,l),l=n,n=n.return;while(n);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Me=Object.prototype.hasOwnProperty,it=r.unstable_scheduleCallback,We=r.unstable_cancelCallback,ot=r.unstable_shouldYield,rt=r.unstable_requestPaint,Fe=r.unstable_now,tt=r.unstable_getCurrentPriorityLevel,Ke=r.unstable_ImmediatePriority,ct=r.unstable_UserBlockingPriority,yt=r.unstable_NormalPriority,mt=r.unstable_LowPriority,bt=r.unstable_IdlePriority,ut=r.log,rn=r.unstable_setDisableYieldValue,Vt=null,Nt=null;function xt(n){if(typeof ut=="function"&&rn(n),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Vt,n)}catch{}}var Tt=Math.clz32?Math.clz32:Et,vt=Math.log,an=Math.LN2;function Et(n){return n>>>=0,n===0?32:31-(vt(n)/an|0)|0}var Ft=256,gn=262144,At=4194304;function ft(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function le(n,i,l){var h=n.pendingLanes;if(h===0)return 0;var g=0,w=n.suspendedLanes,D=n.pingedLanes;n=n.warmLanes;var K=h&134217727;return K!==0?(h=K&~w,h!==0?g=ft(h):(D&=K,D!==0?g=ft(D):l||(l=K&~n,l!==0&&(g=ft(l))))):(K=h&~w,K!==0?g=ft(K):D!==0?g=ft(D):l||(l=h&~n,l!==0&&(g=ft(l)))),g===0?0:i!==0&&i!==g&&(i&w)===0&&(w=g&-g,l=i&-i,w>=l||w===32&&(l&4194048)!==0)?i:g}function Pe(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Qe(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ht(){var n=At;return At<<=1,(At&62914560)===0&&(At=4194304),n}function wt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function lt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Zt(n,i,l,h,g,w){var D=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var K=n.entanglements,be=n.expirationTimes,Le=n.hiddenUpdates;for(l=D&~l;0<l;){var qe=31-Tt(l),Xe=1<<qe;K[qe]=0,be[qe]=-1;var Oe=Le[qe];if(Oe!==null)for(Le[qe]=null,qe=0;qe<Oe.length;qe++){var Ie=Oe[qe];Ie!==null&&(Ie.lane&=-536870913)}l&=~Xe}h!==0&&Cn(n,h,0),w!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=w&~(D&~i))}function Cn(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var h=31-Tt(i);n.entangledLanes|=i,n.entanglements[h]=n.entanglements[h]|1073741824|l&261930}function xn(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var h=31-Tt(l),g=1<<h;g&i|n[h]&i&&(n[h]|=i),l&=~g}}function tn(n,i){var l=i&-i;return l=(l&42)!==0?1:Kt(l),(l&(n.suspendedLanes|i))!==0?0:l}function Kt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function fn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Qt(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:Y5(n.type))}function $n(n,i){var l=se.p;try{return se.p=n,i()}finally{se.p=l}}var lr=Math.random().toString(36).slice(2),vn="__reactFiber$"+lr,Bn="__reactProps$"+lr,dn="__reactContainer$"+lr,sn="__reactEvents$"+lr,Se="__reactListeners$"+lr,Re="__reactHandles$"+lr,$e="__reactResources$"+lr,gt="__reactMarker$"+lr;function $t(n){delete n[vn],delete n[Bn],delete n[sn],delete n[Se],delete n[Re]}function Bt(n){var i=n[vn];if(i)return i;for(var l=n.parentNode;l;){if(i=l[dn]||l[vn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=M5(n);n!==null;){if(l=n[vn])return l;n=M5(n)}return i}n=l,l=n.parentNode}return null}function wn(n){if(n=n[vn]||n[dn]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Jn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function cr(n){var i=n[$e];return i||(i=n[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Tn(n){n[gt]=!0}var li=new Set,Dr={};function Pr(n,i){Kr(n,i),Kr(n+"Capture",i)}function Kr(n,i){for(Dr[n]=i,n=0;n<i.length;n++)li.add(i[n])}var ms=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ci={},ui={};function wi(n){return Me.call(ui,n)?!0:Me.call(ci,n)?!1:ms.test(n)?ui[n]=!0:(ci[n]=!0,!1)}function js(n,i,l){if(wi(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function ha(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function Qs(n,i,l,h){if(h===null)n.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+h)}}function kn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function yo(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _i(n,i,l){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,w=h.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(D){l=""+D,w.call(this,D)}}),Object.defineProperty(n,i,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(D){l=""+D},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Yi(n){if(!n._valueTracker){var i=yo(n)?"checked":"value";n._valueTracker=_i(n,i,""+n[i])}}function xo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return n&&(h=yo(n)?n.checked?"true":"false":n.value),n=h,n!==l?(i.setValue(n),!0):!1}function gs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rr=/[\n"\\]/g;function Cr(n){return n.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wo(n,i,l,h,g,w,D,K){n.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?n.type=D:n.removeAttribute("type"),i!=null?D==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+kn(i)):n.value!==""+kn(i)&&(n.value=""+kn(i)):D!=="submit"&&D!=="reset"||n.removeAttribute("value"),i!=null?Oc(n,D,kn(i)):l!=null?Oc(n,D,kn(l)):h!=null&&n.removeAttribute("value"),g==null&&w!=null&&(n.defaultChecked=!!w),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?n.name=""+kn(K):n.removeAttribute("name")}function Rl(n,i,l,h,g,w,D,K){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),i!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){Yi(n);return}l=l!=null?""+kn(l):"",i=i!=null?""+kn(i):l,K||i===n.value||(n.value=i),n.defaultValue=i}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=K?n.checked:!!h,n.defaultChecked=!!h,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(n.name=D),Yi(n)}function Oc(n,i,l){i==="number"&&gs(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Ps(n,i,l,h){if(n=n.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=i.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&h&&(n[l].defaultSelected=!0)}else{for(l=""+kn(l),i=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Dc(n,i,l){if(i!=null&&(i=""+kn(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+kn(l):""}function Rc(n,i,l,h){if(i==null){if(h!=null){if(l!=null)throw Error(s(92));if(ae(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),i=l}l=kn(i),n.defaultValue=l,h=n.textContent,h===l&&h!==""&&h!==null&&(n.value=h),Yi(n)}function $i(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tu(n,i,l){var h=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":h?n.setProperty(i,l):typeof l!="number"||l===0||Xo.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function ku(n,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var g in i)h=i[g],i.hasOwnProperty(g)&&l[g]!==h&&Tu(n,g,h)}else for(var w in i)i.hasOwnProperty(w)&&Tu(n,w,i[w])}function Ic(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ju=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(n){return ju.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Xi(){}var Oa=null;function Zo(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _o=null,Ut=null;function Eu(n){var i=wn(n);if(i&&(n=i.stateNode)){var l=n[Bn]||null;e:switch(n=i.stateNode,i.type){case"input":if(wo(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Cr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==n&&h.form===n.form){var g=h[Bn]||null;if(!g)throw Error(s(90));wo(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)h=l[i],h.form===n.form&&xo(h)}break e;case"textarea":Dc(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Ps(n,!!l.multiple,i,!1)}}}var Vc=!1;function Mu(n,i,l){if(Vc)return n(i,l);Vc=!0;try{var h=n(i);return h}finally{if(Vc=!1,(_o!==null||Ut!==null)&&(Jd(),_o&&(i=_o,n=Ut,Ut=_o=null,Eu(i),n)))for(i=0;i<n.length;i++)Eu(n[i])}}function hi(n,i){var l=n.stateNode;if(l===null)return null;var h=l[Bn]||null;if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bc=!1;if(bs)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){Bc=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{Bc=!1}var fi=null,Ko=null,fa=null;function Lu(){if(fa)return fa;var n,i=Ko,l=i.length,h,g="value"in fi?fi.value:fi.textContent,w=g.length;for(n=0;n<l&&i[n]===g[n];n++);var D=l-n;for(h=1;h<=D&&i[l-h]===g[w-h];h++);return fa=g.slice(n,1<h?1-h:void 0)}function Si(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Il(){return!0}function Fl(){return!1}function as(n){function i(l,h,g,w,D){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var K in n)n.hasOwnProperty(K)&&(l=n[K],this[K]=l?l(w):w[K]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Il:Fl,this.isPropagationStopped=Fl,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),i}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=as(da),Da=y({},da,{view:0,detail:0}),Vl=as(Da),Jo,Ra,Ia,el=y({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yt,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ia&&(Ia&&n.type==="mousemove"?(Jo=n.screenX-Ia.screenX,Ra=n.screenY-Ia.screenY):Ra=Jo=0,Ia=n),Jo)},movementY:function(n){return"movementY"in n?n.movementY:Ra}}),zc=as(el),Fa=y({},el,{dataTransfer:0}),Va=as(Fa),Ou=y({},Da,{relatedTarget:0}),Ba=as(Ou),Du=y({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),S=as(Du),P=y({},da,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),de=as(P),ve=y({},da,{data:0}),Ae=as(ve),Ue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Je={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dt(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=kt[n])?!!i[n]:!1}function Yt(){return Dt}var on=y({},Da,{key:function(n){if(n.key){var i=Ue[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Si(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Je[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yt,charCode:function(n){return n.type==="keypress"?Si(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Si(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ln=as(on),br=y({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ir=as(br),er=y({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yt}),Jr=as(er),qr=y({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),vs=as(qr),za=y({},el,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zi=as(za),Pa=y({},da,{newState:0,oldState:0}),Pc=as(Pa),Bl=[9,13,27,32],pa=bs&&"CompositionEvent"in window,Qi=null;bs&&"documentMode"in document&&(Qi=document.documentMode);var tl=bs&&"TextEvent"in window&&!Qi,qa=bs&&(!pa||Qi&&8<Qi&&11>=Qi),os=" ",So=!1;function No(n,i){switch(n){case"keyup":return Bl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ma=!1;function qs(n,i){switch(n){case"compositionend":return zl(i);case"keypress":return i.which!==32?null:(So=!0,os);case"textInput":return n=i.data,n===os&&So?null:n;default:return null}}function Ua(n,i){if(ma)return n==="compositionend"||!pa&&No(n,i)?(n=Lu(),fa=Ko=fi=null,ma=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return qa&&i.locale!=="ko"?null:i.data;default:return null}}var Pl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Pl[n.type]:i==="textarea"}function di(n,i,l,h){_o?Ut?Ut.push(h):Ut=[h]:_o=h,i=a1(i,"onChange"),0<i.length&&(l=new Ni("onChange","change",null,l,h),n.push({event:l,listeners:i}))}var Ki=null,Ha=null;function Uc(n){b5(n,0)}function Ji(n){var i=Jn(n);if(xo(i))return n}function Ao(n,i){if(n==="change")return i}var Js=!1;if(bs){var Us;if(bs){var ga="oninput"in document;if(!ga){var ba=document.createElement("div");ba.setAttribute("oninput","return;"),ga=typeof ba.oninput=="function"}Us=ga}else Us=!1;Js=Us&&(!document.documentMode||9<document.documentMode)}function Ga(){Ki&&(Ki.detachEvent("onpropertychange",ql),Ha=Ki=null)}function ql(n){if(n.propertyName==="value"&&Ji(Ha)){var i=[];di(i,Ha,n,Zo(n)),Mu(Uc,i)}}function Ul(n,i,l){n==="focusin"?(Ga(),Ki=i,Ha=l,Ki.attachEvent("onpropertychange",ql)):n==="focusout"&&Ga()}function Fr(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ji(Ha)}function Ru(n,i){if(n==="click")return Ji(i)}function va(n,i){if(n==="input"||n==="change")return Ji(i)}function ya(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ys=typeof Object.is=="function"?Object.is:ya;function Wa(n,i){if(ys(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Me.call(i,g)||!ys(n[g],i[g]))return!1}return!0}function Hl(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gl(n,i){var l=Hl(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=i&&h>=i)return{node:l,offset:i-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hl(l)}}function Ya(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ya(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function $a(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=gs(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=gs(n.document)}return i}function xa(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var nl=bs&&"documentMode"in document&&11>=document.documentMode,pi=null,Xa=null,Es=null,Ai=!1;function zn(n,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ai||pi==null||pi!==gs(h)||(h=pi,"selectionStart"in h&&xa(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Es&&Wa(Es,h)||(Es=h,h=a1(Xa,"onSelect"),0<h.length&&(i=new Ni("onSelect","select",null,i,l),n.push({event:i,listeners:h}),i.target=pi)))}function On(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var tr={animationend:On("Animation","AnimationEnd"),animationiteration:On("Animation","AnimationIteration"),animationstart:On("Animation","AnimationStart"),transitionrun:On("Transition","TransitionRun"),transitionstart:On("Transition","TransitionStart"),transitioncancel:On("Transition","TransitionCancel"),transitionend:On("Transition","TransitionEnd")},Vr={},wa={};bs&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function ea(n){if(Vr[n])return Vr[n];if(!tr[n])return n;var i=tr[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in wa)return Vr[n]=i[l];return n}var rl=ea("animationend"),Hc=ea("animationiteration"),Kh=ea("animationstart"),jd=ea("transitionrun"),Ed=ea("transitionstart"),Md=ea("transitioncancel"),Jh=ea("transitionend"),ef=new Map,sl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sl.push("scrollEnd");function Ci(n,i){ef.set(n,i),Pr(i,[n])}var Gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},mi=[],il=0,Iu=0;function Wc(){for(var n=il,i=Iu=il=0;i<n;){var l=mi[i];mi[i++]=null;var h=mi[i];mi[i++]=null;var g=mi[i];mi[i++]=null;var w=mi[i];if(mi[i++]=null,h!==null&&g!==null){var D=h.pending;D===null?g.next=g:(g.next=D.next,D.next=g),h.pending=g}w!==0&&$c(l,g,w)}}function Yc(n,i,l,h){mi[il++]=n,mi[il++]=i,mi[il++]=l,mi[il++]=h,Iu|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function Fu(n,i,l,h){return Yc(n,i,l,h),Ms(n)}function Za(n,i){return Yc(n,null,null,i),Ms(n)}function $c(n,i,l){n.lanes|=l;var h=n.alternate;h!==null&&(h.lanes|=l);for(var g=!1,w=n.return;w!==null;)w.childLanes|=l,h=w.alternate,h!==null&&(h.childLanes|=l),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(g=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,g&&i!==null&&(g=31-Tt(l),n=w.hiddenUpdates,h=n[g],h===null?n[g]=[i]:h.push(i),i.lane=l|536870912),w):null}function Ms(n){if(50<Sf)throw Sf=0,R0=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var xs={};function Vu(n,i,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(n,i,l,h){return new Vu(n,i,l,h)}function Bu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ti(n,i){var l=n.alternate;return l===null?(l=Ls(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Xc(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Wl(n,i,l,h,g,w){var D=0;if(h=n,typeof n=="function")Bu(n)&&(D=1);else if(typeof n=="string")D=g_(n,l,X.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=Ls(31,l,i,g),n.elementType=B,n.lanes=w,n;case A:return Co(l.children,g,w,i);case k:D=8,g|=24;break;case T:return n=Ls(12,l,i,g|2),n.elementType=T,n.lanes=w,n;case I:return n=Ls(13,l,i,g),n.elementType=I,n.lanes=w,n;case W:return n=Ls(19,l,i,g),n.elementType=W,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:D=10;break e;case R:D=9;break e;case V:D=11;break e;case U:D=14;break e;case L:D=16,h=null;break e}D=29,l=Error(s(130,n===null?"null":typeof n,"")),h=null}return i=Ls(D,l,i,g),i.elementType=n,i.type=h,i.lanes=w,i}function Co(n,i,l,h){return n=Ls(7,n,h,i),n.lanes=l,n}function Zc(n,i,l){return n=Ls(6,n,null,i),n.lanes=l,n}function zu(n){var i=Ls(18,null,null,0);return i.stateNode=n,i}function Yl(n,i,l){return i=Ls(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Pu=new WeakMap;function ki(n,i){if(typeof n=="object"&&n!==null){var l=Pu.get(n);return l!==void 0?l:(i={value:n,source:i,stack:et(i)},Pu.set(n,i),i)}return{value:n,source:i,stack:et(i)}}var $l=[],al=0,qu=null,Qc=0,ji=[],Ei=0,To=null,Mi=1,Li="";function gi(n,i){$l[al++]=Qc,$l[al++]=qu,qu=n,Qc=i}function Ld(n,i,l){ji[Ei++]=Mi,ji[Ei++]=Li,ji[Ei++]=To,To=n;var h=Mi;n=Li;var g=32-Tt(h)-1;h&=~(1<<g),l+=1;var w=32-Tt(i)+g;if(30<w){var D=g-g%5;w=(h&(1<<D)-1).toString(32),h>>=D,g-=D,Mi=1<<32-Tt(i)+g|l<<g|h,Li=w+n}else Mi=1<<w|l<<g|h,Li=n}function tf(n){n.return!==null&&(gi(n,1),Ld(n,1,0))}function Uu(n){for(;n===qu;)qu=$l[--al],$l[al]=null,Qc=$l[--al],$l[al]=null;for(;n===To;)To=ji[--Ei],ji[Ei]=null,Li=ji[--Ei],ji[Ei]=null,Mi=ji[--Ei],ji[Ei]=null}function Od(n,i){ji[Ei++]=Mi,ji[Ei++]=Li,ji[Ei++]=To,Mi=i.id,Li=i.overflow,To=n}var ws=null,ur=null,Sn=!1,Hs=null,Tr=!1,ta=Error(s(519));function ko(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xl(ki(i,n)),ta}function nf(n){var i=n.stateNode,l=n.type,h=n.memoizedProps;switch(i[vn]=n,i[Bn]=h,l){case"dialog":An("cancel",i),An("close",i);break;case"iframe":case"object":case"embed":An("load",i);break;case"video":case"audio":for(l=0;l<Af.length;l++)An(Af[l],i);break;case"source":An("error",i);break;case"img":case"image":case"link":An("error",i),An("load",i);break;case"details":An("toggle",i);break;case"input":An("invalid",i),Rl(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":An("invalid",i);break;case"textarea":An("invalid",i),Rc(i,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||h.suppressHydrationWarning===!0||w5(i.textContent,l)?(h.popover!=null&&(An("beforetoggle",i),An("toggle",i)),h.onScroll!=null&&An("scroll",i),h.onScrollEnd!=null&&An("scrollend",i),h.onClick!=null&&(i.onclick=Xi),i=!0):i=!1,i||ko(n,!0)}function Qa(n){for(ws=n.return;ws;)switch(ws.tag){case 5:case 31:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:ws=ws.return}}function _s(n){if(n!==ws)return!1;if(!Sn)return Qa(n),Sn=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Z0(n.type,n.memoizedProps)),l=!l),l&&ur&&ko(n),Qa(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ur=E5(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ur=E5(n)}else i===27?(i=ur,cc(n.type)?(n=tm,tm=null,ur=n):ur=i):ur=ws?Aa(n.stateNode.nextSibling):null;return!0}function ol(){ur=ws=null,Sn=!1}function rf(){var n=Hs;return n!==null&&(Vi===null?Vi=n:Vi.push.apply(Vi,n),Hs=null),n}function Xl(n){Hs===null?Hs=[n]:Hs.push(n)}var Hu=G(null),jo=null,_a=null;function Eo(n,i,l){z(Hu,i._currentValue),i._currentValue=l}function Oi(n){n._currentValue=Hu.current,j(Hu)}function Zl(n,i,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===l)break;n=n.return}}function ll(n,i,l,h){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var w=g.dependencies;if(w!==null){var D=g.child;w=w.firstContext;e:for(;w!==null;){var K=w;w=g;for(var be=0;be<i.length;be++)if(K.context===i[be]){w.lanes|=l,K=w.alternate,K!==null&&(K.lanes|=l),Zl(w.return,l,n),h||(D=null);break e}w=K.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(s(341));D.lanes|=l,w=D.alternate,w!==null&&(w.lanes|=l),Zl(D,l,n),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===n){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function Mo(n,i,l,h){n=null;for(var g=i,w=!1;g!==null;){if(!w){if((g.flags&524288)!==0)w=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(s(387));if(D=D.memoizedProps,D!==null){var K=g.type;ys(g.pendingProps.value,D.value)||(n!==null?n.push(K):n=[K])}}else if(g===pe.current){if(D=g.alternate,D===null)throw Error(s(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Ef):n=[Ef])}g=g.return}n!==null&&ll(i,n,l,h),i.flags|=262144}function Gu(n){for(n=n.firstContext;n!==null;){if(!ys(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Lo(n){jo=n,_a=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ss(n){return Dd(jo,n)}function Wu(n,i){return jo===null&&Lo(n),Dd(n,i)}function Dd(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},_a===null){if(n===null)throw Error(s(308));_a=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else _a=_a.next=i;return l}var e0=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,h){n.push(h)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},t0=r.unstable_scheduleCallback,n0=r.unstable_NormalPriority,Br={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ql(){return{controller:new e0,data:new Map,refCount:0}}function Kc(n){n.refCount--,n.refCount===0&&t0(n0,function(){n.controller.abort()})}var Jc=null,Yu=0,m=0,v=null;function C(n,i){if(Jc===null){var l=Jc=[];Yu=0,m=P0(),v={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Yu++,i.then(E,E),i}function E(){if(--Yu===0&&Jc!==null){v!==null&&(v.status="fulfilled");var n=Jc;Jc=null,m=0,v=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function q(n,i){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){h.status="fulfilled",h.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var $=H.S;H.S=function(n,i){Gb=Fe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&C(n,i),$!==null&&$(n,i)};var Z=G(null);function ne(){var n=Z.current;return n!==null?n:fr.pooledCache}function oe(n,i){i===null?z(Z,Z.current):z(Z,i.pool)}function fe(){var n=ne();return n===null?null:{parent:Br._currentValue,pool:n}}var ye=Error(s(460)),je=Error(s(474)),he=Error(s(542)),_e={then:function(){}};function Te(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ze(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Xi,Xi),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,at(n),n;default:if(typeof i.status=="string")i.then(Xi,Xi);else{if(n=fr,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(h){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=h}},function(h){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,at(n),n}throw Be=i,ye}}function ke(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Be=l,ye):l}}var Be=null;function He(){if(Be===null)throw Error(s(459));var n=Be;return Be=null,n}function at(n){if(n===ye||n===he)throw Error(s(483))}var Ze=null,Mt=0;function _t(n){var i=Mt;return Mt+=1,Ze===null&&(Ze=[]),ze(Ze,n,i)}function Jt(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Ct(n,i){throw i.$$typeof===_?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function _n(n){function i(Ce,xe){if(n){var Ee=Ce.deletions;Ee===null?(Ce.deletions=[xe],Ce.flags|=16):Ee.push(xe)}}function l(Ce,xe){if(!n)return null;for(;xe!==null;)i(Ce,xe),xe=xe.sibling;return null}function h(Ce){for(var xe=new Map;Ce!==null;)Ce.key!==null?xe.set(Ce.key,Ce):xe.set(Ce.index,Ce),Ce=Ce.sibling;return xe}function g(Ce,xe){return Ce=Ti(Ce,xe),Ce.index=0,Ce.sibling=null,Ce}function w(Ce,xe,Ee){return Ce.index=Ee,n?(Ee=Ce.alternate,Ee!==null?(Ee=Ee.index,Ee<xe?(Ce.flags|=67108866,xe):Ee):(Ce.flags|=67108866,xe)):(Ce.flags|=1048576,xe)}function D(Ce){return n&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function K(Ce,xe,Ee,Ye){return xe===null||xe.tag!==6?(xe=Zc(Ee,Ce.mode,Ye),xe.return=Ce,xe):(xe=g(xe,Ee),xe.return=Ce,xe)}function be(Ce,xe,Ee,Ye){var qt=Ee.type;return qt===A?qe(Ce,xe,Ee.props.children,Ye,Ee.key):xe!==null&&(xe.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===L&&ke(qt)===xe.type)?(xe=g(xe,Ee.props),Jt(xe,Ee),xe.return=Ce,xe):(xe=Wl(Ee.type,Ee.key,Ee.props,null,Ce.mode,Ye),Jt(xe,Ee),xe.return=Ce,xe)}function Le(Ce,xe,Ee,Ye){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ee.containerInfo||xe.stateNode.implementation!==Ee.implementation?(xe=Yl(Ee,Ce.mode,Ye),xe.return=Ce,xe):(xe=g(xe,Ee.children||[]),xe.return=Ce,xe)}function qe(Ce,xe,Ee,Ye,qt){return xe===null||xe.tag!==7?(xe=Co(Ee,Ce.mode,Ye,qt),xe.return=Ce,xe):(xe=g(xe,Ee),xe.return=Ce,xe)}function Xe(Ce,xe,Ee){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=Zc(""+xe,Ce.mode,Ee),xe.return=Ce,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case b:return Ee=Wl(xe.type,xe.key,xe.props,null,Ce.mode,Ee),Jt(Ee,xe),Ee.return=Ce,Ee;case N:return xe=Yl(xe,Ce.mode,Ee),xe.return=Ce,xe;case L:return xe=ke(xe),Xe(Ce,xe,Ee)}if(ae(xe)||F(xe))return xe=Co(xe,Ce.mode,Ee,null),xe.return=Ce,xe;if(typeof xe.then=="function")return Xe(Ce,_t(xe),Ee);if(xe.$$typeof===O)return Xe(Ce,Wu(Ce,xe),Ee);Ct(Ce,xe)}return null}function Oe(Ce,xe,Ee,Ye){var qt=xe!==null?xe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return qt!==null?null:K(Ce,xe,""+Ee,Ye);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:return Ee.key===qt?be(Ce,xe,Ee,Ye):null;case N:return Ee.key===qt?Le(Ce,xe,Ee,Ye):null;case L:return Ee=ke(Ee),Oe(Ce,xe,Ee,Ye)}if(ae(Ee)||F(Ee))return qt!==null?null:qe(Ce,xe,Ee,Ye,null);if(typeof Ee.then=="function")return Oe(Ce,xe,_t(Ee),Ye);if(Ee.$$typeof===O)return Oe(Ce,xe,Wu(Ce,Ee),Ye);Ct(Ce,Ee)}return null}function Ie(Ce,xe,Ee,Ye,qt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ce=Ce.get(Ee)||null,K(xe,Ce,""+Ye,qt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case b:return Ce=Ce.get(Ye.key===null?Ee:Ye.key)||null,be(xe,Ce,Ye,qt);case N:return Ce=Ce.get(Ye.key===null?Ee:Ye.key)||null,Le(xe,Ce,Ye,qt);case L:return Ye=ke(Ye),Ie(Ce,xe,Ee,Ye,qt)}if(ae(Ye)||F(Ye))return Ce=Ce.get(Ee)||null,qe(xe,Ce,Ye,qt,null);if(typeof Ye.then=="function")return Ie(Ce,xe,Ee,_t(Ye),qt);if(Ye.$$typeof===O)return Ie(Ce,xe,Ee,Wu(xe,Ye),qt);Ct(xe,Ye)}return null}function jt(Ce,xe,Ee,Ye){for(var qt=null,qn=null,Rt=xe,bn=xe=0,En=null;Rt!==null&&bn<Ee.length;bn++){Rt.index>bn?(En=Rt,Rt=null):En=Rt.sibling;var Un=Oe(Ce,Rt,Ee[bn],Ye);if(Un===null){Rt===null&&(Rt=En);break}n&&Rt&&Un.alternate===null&&i(Ce,Rt),xe=w(Un,xe,bn),qn===null?qt=Un:qn.sibling=Un,qn=Un,Rt=En}if(bn===Ee.length)return l(Ce,Rt),Sn&&gi(Ce,bn),qt;if(Rt===null){for(;bn<Ee.length;bn++)Rt=Xe(Ce,Ee[bn],Ye),Rt!==null&&(xe=w(Rt,xe,bn),qn===null?qt=Rt:qn.sibling=Rt,qn=Rt);return Sn&&gi(Ce,bn),qt}for(Rt=h(Rt);bn<Ee.length;bn++)En=Ie(Rt,Ce,bn,Ee[bn],Ye),En!==null&&(n&&En.alternate!==null&&Rt.delete(En.key===null?bn:En.key),xe=w(En,xe,bn),qn===null?qt=En:qn.sibling=En,qn=En);return n&&Rt.forEach(function(pc){return i(Ce,pc)}),Sn&&gi(Ce,bn),qt}function Gt(Ce,xe,Ee,Ye){if(Ee==null)throw Error(s(151));for(var qt=null,qn=null,Rt=xe,bn=xe=0,En=null,Un=Ee.next();Rt!==null&&!Un.done;bn++,Un=Ee.next()){Rt.index>bn?(En=Rt,Rt=null):En=Rt.sibling;var pc=Oe(Ce,Rt,Un.value,Ye);if(pc===null){Rt===null&&(Rt=En);break}n&&Rt&&pc.alternate===null&&i(Ce,Rt),xe=w(pc,xe,bn),qn===null?qt=pc:qn.sibling=pc,qn=pc,Rt=En}if(Un.done)return l(Ce,Rt),Sn&&gi(Ce,bn),qt;if(Rt===null){for(;!Un.done;bn++,Un=Ee.next())Un=Xe(Ce,Un.value,Ye),Un!==null&&(xe=w(Un,xe,bn),qn===null?qt=Un:qn.sibling=Un,qn=Un);return Sn&&gi(Ce,bn),qt}for(Rt=h(Rt);!Un.done;bn++,Un=Ee.next())Un=Ie(Rt,Ce,bn,Un.value,Ye),Un!==null&&(n&&Un.alternate!==null&&Rt.delete(Un.key===null?bn:Un.key),xe=w(Un,xe,bn),qn===null?qt=Un:qn.sibling=Un,qn=Un);return n&&Rt.forEach(function(T_){return i(Ce,T_)}),Sn&&gi(Ce,bn),qt}function ir(Ce,xe,Ee,Ye){if(typeof Ee=="object"&&Ee!==null&&Ee.type===A&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:e:{for(var qt=Ee.key;xe!==null;){if(xe.key===qt){if(qt=Ee.type,qt===A){if(xe.tag===7){l(Ce,xe.sibling),Ye=g(xe,Ee.props.children),Ye.return=Ce,Ce=Ye;break e}}else if(xe.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===L&&ke(qt)===xe.type){l(Ce,xe.sibling),Ye=g(xe,Ee.props),Jt(Ye,Ee),Ye.return=Ce,Ce=Ye;break e}l(Ce,xe);break}else i(Ce,xe);xe=xe.sibling}Ee.type===A?(Ye=Co(Ee.props.children,Ce.mode,Ye,Ee.key),Ye.return=Ce,Ce=Ye):(Ye=Wl(Ee.type,Ee.key,Ee.props,null,Ce.mode,Ye),Jt(Ye,Ee),Ye.return=Ce,Ce=Ye)}return D(Ce);case N:e:{for(qt=Ee.key;xe!==null;){if(xe.key===qt)if(xe.tag===4&&xe.stateNode.containerInfo===Ee.containerInfo&&xe.stateNode.implementation===Ee.implementation){l(Ce,xe.sibling),Ye=g(xe,Ee.children||[]),Ye.return=Ce,Ce=Ye;break e}else{l(Ce,xe);break}else i(Ce,xe);xe=xe.sibling}Ye=Yl(Ee,Ce.mode,Ye),Ye.return=Ce,Ce=Ye}return D(Ce);case L:return Ee=ke(Ee),ir(Ce,xe,Ee,Ye)}if(ae(Ee))return jt(Ce,xe,Ee,Ye);if(F(Ee)){if(qt=F(Ee),typeof qt!="function")throw Error(s(150));return Ee=qt.call(Ee),Gt(Ce,xe,Ee,Ye)}if(typeof Ee.then=="function")return ir(Ce,xe,_t(Ee),Ye);if(Ee.$$typeof===O)return ir(Ce,xe,Wu(Ce,Ee),Ye);Ct(Ce,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,xe!==null&&xe.tag===6?(l(Ce,xe.sibling),Ye=g(xe,Ee),Ye.return=Ce,Ce=Ye):(l(Ce,xe),Ye=Zc(Ee,Ce.mode,Ye),Ye.return=Ce,Ce=Ye),D(Ce)):l(Ce,xe)}return function(Ce,xe,Ee,Ye){try{Mt=0;var qt=ir(Ce,xe,Ee,Ye);return Ze=null,qt}catch(Rt){if(Rt===ye||Rt===he)throw Rt;var qn=Ls(29,Rt,null,Ce.mode);return qn.lanes=Ye,qn.return=Ce,qn}finally{}}}var hr=_n(!0),ln=_n(!1),St=!1;function pt(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vr(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ht(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function hn(n,i,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Wn&2)!==0){var g=h.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),h.pending=i,i=Ms(n),$c(n,null,l),i}return Yc(n,h,i,l),Ms(n)}function Hn(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,xn(n,l)}}function es(n,i){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var D={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?g=w=D:w=w.next=D,l=l.next}while(l!==null);w===null?g=w=i:w=w.next=i}else g=w=i;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Ns=!1;function nr(){if(Ns){var n=v;if(n!==null)throw n}}function Ur(n,i,l,h){Ns=!1;var g=n.updateQueue;St=!1;var w=g.firstBaseUpdate,D=g.lastBaseUpdate,K=g.shared.pending;if(K!==null){g.shared.pending=null;var be=K,Le=be.next;be.next=null,D===null?w=Le:D.next=Le,D=be;var qe=n.alternate;qe!==null&&(qe=qe.updateQueue,K=qe.lastBaseUpdate,K!==D&&(K===null?qe.firstBaseUpdate=Le:K.next=Le,qe.lastBaseUpdate=be))}if(w!==null){var Xe=g.baseState;D=0,qe=Le=be=null,K=w;do{var Oe=K.lane&-536870913,Ie=Oe!==K.lane;if(Ie?(jn&Oe)===Oe:(h&Oe)===Oe){Oe!==0&&Oe===m&&(Ns=!0),qe!==null&&(qe=qe.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var jt=n,Gt=K;Oe=i;var ir=l;switch(Gt.tag){case 1:if(jt=Gt.payload,typeof jt=="function"){Xe=jt.call(ir,Xe,Oe);break e}Xe=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=Gt.payload,Oe=typeof jt=="function"?jt.call(ir,Xe,Oe):jt,Oe==null)break e;Xe=y({},Xe,Oe);break e;case 2:St=!0}}Oe=K.callback,Oe!==null&&(n.flags|=64,Ie&&(n.flags|=8192),Ie=g.callbacks,Ie===null?g.callbacks=[Oe]:Ie.push(Oe))}else Ie={lane:Oe,tag:K.tag,payload:K.payload,callback:K.callback,next:null},qe===null?(Le=qe=Ie,be=Xe):qe=qe.next=Ie,D|=Oe;if(K=K.next,K===null){if(K=g.shared.pending,K===null)break;Ie=K,K=Ie.next,Ie.next=null,g.lastBaseUpdate=Ie,g.shared.pending=null}}while(!0);qe===null&&(be=Xe),g.baseState=be,g.firstBaseUpdate=Le,g.lastBaseUpdate=qe,w===null&&(g.shared.lanes=0),sc|=D,n.lanes=D,n.memoizedState=Xe}}function Os(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Hr(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Os(l[n],i)}var yn=G(null),In=G(0);function yr(n,i){n=vl,z(In,n),z(yn,i),vl=n|i.baseLanes}function Pn(){z(In,vl),z(yn,yn.current)}function ts(){vl=In.current,j(yn),j(In)}var xr=G(null),Fn=null;function zr(n){var i=n.alternate;z(Dn,Dn.current&1),z(xr,n),Fn===null&&(i===null||yn.current!==null||i.memoizedState!==null)&&(Fn=n)}function Gn(n){z(Dn,Dn.current),z(xr,n),Fn===null&&(Fn=n)}function Gr(n){n.tag===22?(z(Dn,Dn.current),z(xr,n),Fn===null&&(Fn=n)):Wr()}function Wr(){z(Dn,Dn.current),z(xr,xr.current)}function Xn(n){j(xr),Fn===n&&(Fn=null),j(Dn)}var Dn=G(0);function Ds(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||J0(l)||em(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kr=0,zt=null,Pt=null,Vn=null,ei=!1,Di=!1,Gs=!1,Yr=0,Oo=0,Do=null,$u=0;function rr(){throw Error(s(321))}function sf(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!ys(n[l],i[l]))return!1;return!0}function af(n,i,l,h,g,w){return kr=w,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=n===null||n.memoizedState===null?nb:u0,Gs=!1,w=l(h,g),Gs=!1,Di&&(w=Ka(i,l,h,g)),Xu(n),w}function Xu(n){H.H=pf;var i=Pt!==null&&Pt.next!==null;if(kr=0,Vn=Pt=zt=null,ei=!1,Oo=0,Do=null,i)throw Error(s(300));n===null||cs||(n=n.dependencies,n!==null&&Gu(n)&&(cs=!0))}function Ka(n,i,l,h){zt=n;var g=0;do{if(Di&&(Do=null),Oo=0,Di=!1,25<=g)throw Error(s(301));if(g+=1,Vn=Pt=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}H.H=rb,w=i(l,h)}while(Di);return w}function r0(){var n=H.H,i=n.useState()[0];return i=typeof i.then=="function"?Ro(i):i,n=n.useState()[0],(Pt!==null?Pt.memoizedState:null)!==n&&(zt.flags|=1024),i}function of(){var n=Yr!==0;return Yr=0,n}function lf(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function Zu(n){if(ei){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ei=!1}kr=0,Vn=Pt=zt=null,Di=!1,Oo=Yr=0,Do=null}function ls(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?zt.memoizedState=Vn=n:Vn=Vn.next=n,Vn}function jr(){if(Pt===null){var n=zt.alternate;n=n!==null?n.memoizedState:null}else n=Pt.next;var i=Vn===null?zt.memoizedState:Vn.next;if(i!==null)Vn=i,Pt=n;else{if(n===null)throw zt.alternate===null?Error(s(467)):Error(s(310));Pt=n,n={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Vn===null?zt.memoizedState=Vn=n:Vn=Vn.next=n}return Vn}function eu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(n){var i=Oo;return Oo+=1,Do===null&&(Do=[]),n=ze(Do,n,i),i=zt,(Vn===null?i.memoizedState:Vn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?nb:u0),n}function Kl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ro(n);if(n.$$typeof===O)return Ss(n)}throw Error(s(438,String(n)))}function cl(n){var i=null,l=zt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var h=zt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=eu(),zt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),h=0;h<n;h++)l[h]=ee;return i.index++,l}function Sa(n,i){return typeof i=="function"?i(n):i}function Qu(n){var i=jr();return Jl(i,Pt,n)}function Jl(n,i,l){var h=n.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var g=n.baseQueue,w=h.pending;if(w!==null){if(g!==null){var D=g.next;g.next=w.next,w.next=D}i.baseQueue=g=w,h.pending=null}if(w=n.baseState,g===null)n.memoizedState=w;else{i=g.next;var K=D=null,be=null,Le=i,qe=!1;do{var Xe=Le.lane&-536870913;if(Xe!==Le.lane?(jn&Xe)===Xe:(kr&Xe)===Xe){var Oe=Le.revertLane;if(Oe===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),Xe===m&&(qe=!0);else if((kr&Oe)===Oe){Le=Le.next,Oe===m&&(qe=!0);continue}else Xe={lane:0,revertLane:Le.revertLane,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},be===null?(K=be=Xe,D=w):be=be.next=Xe,zt.lanes|=Oe,sc|=Oe;Xe=Le.action,Gs&&l(w,Xe),w=Le.hasEagerState?Le.eagerState:l(w,Xe)}else Oe={lane:Xe,revertLane:Le.revertLane,gesture:Le.gesture,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},be===null?(K=be=Oe,D=w):be=be.next=Oe,zt.lanes|=Xe,sc|=Xe;Le=Le.next}while(Le!==null&&Le!==i);if(be===null?D=w:be.next=K,!ys(w,n.memoizedState)&&(cs=!0,qe&&(l=v,l!==null)))throw l;n.memoizedState=w,n.baseState=D,n.baseQueue=be,h.lastRenderedState=w}return g===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function Ku(n){var i=jr(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var h=l.dispatch,g=l.pending,w=i.memoizedState;if(g!==null){l.pending=null;var D=g=g.next;do w=n(w,D.action),D=D.next;while(D!==g);ys(w,i.memoizedState)||(cs=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,h]}function Ju(n,i,l){var h=zt,g=jr(),w=Sn;if(w){if(l===void 0)throw Error(s(407));l=l()}else l=i();var D=!ys((Pt||g).memoizedState,l);if(D&&(g.memoizedState=l,cs=!0),g=g.queue,s0(uf.bind(null,h,g,n),[n]),g.getSnapshot!==i||D||Vn!==null&&Vn.memoizedState.tag&1){if(h.flags|=2048,hl(9,{destroy:void 0},cf.bind(null,h,g,l,i),null),fr===null)throw Error(s(349));w||(kr&127)!==0||Ja(h,i,l)}return l}function Ja(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=zt.updateQueue,i===null?(i=eu(),zt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function cf(n,i,l,h){i.value=l,i.getSnapshot=h,Rd(i)&&hf(n)}function uf(n,i,l){return l(function(){Rd(i)&&hf(n)})}function Rd(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!ys(n,l)}catch{return!0}}function hf(n){var i=Za(n,2);i!==null&&Bi(i,n,2)}function Io(n){var i=ls();if(typeof n=="function"){var l=n;if(n=l(),Gs){xt(!0);try{l()}finally{xt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:n},i}function Id(n,i,l,h){return n.baseState=l,Jl(n,Pt,typeof h=="function"?h:Sa)}function Fd(n,i,l,h,g){if(Pd(n))throw Error(s(485));if(n=i.action,n!==null){var w={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};H.T!==null?l(!0):w.isTransition=!1,h(w),l=i.pending,l===null?(w.next=i.pending=w,Vd(i,w)):(w.next=l.next,i.pending=l.next=w)}}function Vd(n,i){var l=i.action,h=i.payload,g=n.state;if(i.isTransition){var w=H.T,D={};H.T=D;try{var K=l(g,h),be=H.S;be!==null&&be(D,K),ff(n,i,K)}catch(Le){ul(n,i,Le)}finally{w!==null&&D.types!==null&&(w.types=D.types),H.T=w}}else try{w=l(g,h),ff(n,i,w)}catch(Le){ul(n,i,Le)}}function ff(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Bd(n,i,h)},function(h){return ul(n,i,h)}):Bd(n,i,l)}function Bd(n,i,l){i.status="fulfilled",i.value=l,eh(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,Vd(n,l)))}function ul(n,i,l){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=l,eh(i),i=i.next;while(i!==h)}n.action=null}function eh(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function tu(n,i){return i}function Na(n,i){if(Sn){var l=fr.formState;if(l!==null){e:{var h=zt;if(Sn){if(ur){t:{for(var g=ur,w=Tr;g.nodeType!==8;){if(!w){g=null;break t}if(g=Aa(g.nextSibling),g===null){g=null;break t}}w=g.data,g=w==="F!"||w==="F"?g:null}if(g){ur=Aa(g.nextSibling),h=g.data==="F!";break e}}ko(h)}h=!1}h&&(i=l[0])}}return l=ls(),l.memoizedState=l.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:i},l.queue=h,l=J2.bind(null,zt,h),h.dispatch=l,h=Io(!1),w=c0.bind(null,zt,!1,h.queue),h=ls(),g={state:i,dispatch:null,action:n,pending:null},h.queue=g,l=Fd.bind(null,zt,g,w,l),g.dispatch=l,h.memoizedState=n,[i,l,!1]}function eo(n){var i=jr();return to(i,Pt,n)}function to(n,i,l){if(i=Jl(n,i,tu)[0],n=Qu(Sa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=Ro(i)}catch(D){throw D===ye?he:D}else h=i;i=jr();var g=i.queue,w=g.dispatch;return l!==i.memoizedState&&(zt.flags|=2048,hl(9,{destroy:void 0},th.bind(null,g,l),null)),[h,w,n]}function th(n,i){n.action=i}function nh(n){var i=jr(),l=Pt;if(l!==null)return to(i,l,n);jr(),i=i.memoizedState,l=jr();var h=l.queue.dispatch;return l.memoizedState=n,[i,h,!1]}function hl(n,i,l,h){return n={tag:n,create:l,deps:h,inst:i,next:null},i=zt.updateQueue,i===null&&(i=eu(),zt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,i.lastEffect=n),n}function zd(){return jr().memoizedState}function ec(n,i,l,h){var g=ls();zt.flags|=n,g.memoizedState=hl(1|i,{destroy:void 0},l,h===void 0?null:h)}function tc(n,i,l,h){var g=jr();h=h===void 0?null:h;var w=g.memoizedState.inst;Pt!==null&&h!==null&&sf(h,Pt.memoizedState.deps)?g.memoizedState=hl(i,w,l,h):(zt.flags|=n,g.memoizedState=hl(1|i,w,l,h))}function B2(n,i){ec(8390656,8,n,i)}function s0(n,i){tc(2048,8,n,i)}function w4(n){zt.flags|=4;var i=zt.updateQueue;if(i===null)i=eu(),zt.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function z2(n){var i=jr().memoizedState;return w4({ref:i,nextImpl:n}),function(){if((Wn&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function P2(n,i){return tc(4,2,n,i)}function q2(n,i){return tc(4,4,n,i)}function U2(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function H2(n,i,l){l=l!=null?l.concat([n]):null,tc(4,4,U2.bind(null,i,n),l)}function i0(){}function G2(n,i){var l=jr();i=i===void 0?null:i;var h=l.memoizedState;return i!==null&&sf(i,h[1])?h[0]:(l.memoizedState=[n,i],n)}function W2(n,i){var l=jr();i=i===void 0?null:i;var h=l.memoizedState;if(i!==null&&sf(i,h[1]))return h[0];if(h=n(),Gs){xt(!0);try{n()}finally{xt(!1)}}return l.memoizedState=[h,i],h}function a0(n,i,l){return l===void 0||(kr&1073741824)!==0&&(jn&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=Yb(),zt.lanes|=n,sc|=n,l)}function Y2(n,i,l,h){return ys(l,i)?l:yn.current!==null?(n=a0(n,l,h),ys(n,i)||(cs=!0),n):(kr&42)===0||(kr&1073741824)!==0&&(jn&261930)===0?(cs=!0,n.memoizedState=l):(n=Yb(),zt.lanes|=n,sc|=n,i)}function $2(n,i,l,h,g){var w=se.p;se.p=w!==0&&8>w?w:8;var D=H.T,K={};H.T=K,c0(n,!1,i,l);try{var be=g(),Le=H.S;if(Le!==null&&Le(K,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var qe=q(be,h);df(n,i,qe,sa(n))}else df(n,i,h,sa(n))}catch(Xe){df(n,i,{then:function(){},status:"rejected",reason:Xe},sa())}finally{se.p=w,D!==null&&K.types!==null&&(D.types=K.types),H.T=D}}function _4(){}function o0(n,i,l,h){if(n.tag!==5)throw Error(s(476));var g=X2(n).queue;$2(n,g,i,Q,l===null?_4:function(){return Z2(n),l(h)})}function X2(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:Q},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Z2(n){var i=X2(n);i.next===null&&(i=n.alternate.memoizedState),df(n,i.next.queue,{},sa())}function l0(){return Ss(Ef)}function Q2(){return jr().memoizedState}function K2(){return jr().memoizedState}function S4(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=sa();n=Ht(l);var h=hn(i,n,l);h!==null&&(Bi(h,i,l),Hn(h,i,l)),i={cache:Ql()},n.payload=i;return}i=i.return}}function N4(n,i,l){var h=sa();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pd(n)?eb(i,l):(l=Fu(n,i,l,h),l!==null&&(Bi(l,n,h),tb(l,i,h)))}function J2(n,i,l){var h=sa();df(n,i,l,h)}function df(n,i,l,h){var g={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Pd(n))eb(i,g);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var D=i.lastRenderedState,K=w(D,l);if(g.hasEagerState=!0,g.eagerState=K,ys(K,D))return Yc(n,i,g,0),fr===null&&Wc(),!1}catch{}finally{}if(l=Fu(n,i,g,h),l!==null)return Bi(l,n,h),tb(l,i,h),!0}return!1}function c0(n,i,l,h){if(h={lane:2,revertLane:P0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Pd(n)){if(i)throw Error(s(479))}else i=Fu(n,l,h,2),i!==null&&Bi(i,n,2)}function Pd(n){var i=n.alternate;return n===zt||i!==null&&i===zt}function eb(n,i){Di=ei=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function tb(n,i,l){if((l&4194048)!==0){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,xn(n,l)}}var pf={readContext:Ss,use:Kl,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useLayoutEffect:rr,useInsertionEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useSyncExternalStore:rr,useId:rr,useHostTransitionStatus:rr,useFormState:rr,useActionState:rr,useOptimistic:rr,useMemoCache:rr,useCacheRefresh:rr};pf.useEffectEvent=rr;var nb={readContext:Ss,use:Kl,useCallback:function(n,i){return ls().memoizedState=[n,i===void 0?null:i],n},useContext:Ss,useEffect:B2,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,ec(4194308,4,U2.bind(null,i,n),l)},useLayoutEffect:function(n,i){return ec(4194308,4,n,i)},useInsertionEffect:function(n,i){ec(4,2,n,i)},useMemo:function(n,i){var l=ls();i=i===void 0?null:i;var h=n();if(Gs){xt(!0);try{n()}finally{xt(!1)}}return l.memoizedState=[h,i],h},useReducer:function(n,i,l){var h=ls();if(l!==void 0){var g=l(i);if(Gs){xt(!0);try{l(i)}finally{xt(!1)}}}else g=i;return h.memoizedState=h.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},h.queue=n,n=n.dispatch=N4.bind(null,zt,n),[h.memoizedState,n]},useRef:function(n){var i=ls();return n={current:n},i.memoizedState=n},useState:function(n){n=Io(n);var i=n.queue,l=J2.bind(null,zt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:i0,useDeferredValue:function(n,i){var l=ls();return a0(l,n,i)},useTransition:function(){var n=Io(!1);return n=$2.bind(null,zt,n.queue,!0,!1),ls().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var h=zt,g=ls();if(Sn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),fr===null)throw Error(s(349));(jn&127)!==0||Ja(h,i,l)}g.memoizedState=l;var w={value:l,getSnapshot:i};return g.queue=w,B2(uf.bind(null,h,w,n),[n]),h.flags|=2048,hl(9,{destroy:void 0},cf.bind(null,h,w,l,i),null),l},useId:function(){var n=ls(),i=fr.identifierPrefix;if(Sn){var l=Li,h=Mi;l=(h&~(1<<32-Tt(h)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Yr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=$u++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:l0,useFormState:Na,useActionState:Na,useOptimistic:function(n){var i=ls();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=c0.bind(null,zt,!0,l),l.dispatch=i,[n,i]},useMemoCache:cl,useCacheRefresh:function(){return ls().memoizedState=S4.bind(null,zt)},useEffectEvent:function(n){var i=ls(),l={impl:n};return i.memoizedState=l,function(){if((Wn&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},u0={readContext:Ss,use:Kl,useCallback:G2,useContext:Ss,useEffect:s0,useImperativeHandle:H2,useInsertionEffect:P2,useLayoutEffect:q2,useMemo:W2,useReducer:Qu,useRef:zd,useState:function(){return Qu(Sa)},useDebugValue:i0,useDeferredValue:function(n,i){var l=jr();return Y2(l,Pt.memoizedState,n,i)},useTransition:function(){var n=Qu(Sa)[0],i=jr().memoizedState;return[typeof n=="boolean"?n:Ro(n),i]},useSyncExternalStore:Ju,useId:Q2,useHostTransitionStatus:l0,useFormState:eo,useActionState:eo,useOptimistic:function(n,i){var l=jr();return Id(l,Pt,n,i)},useMemoCache:cl,useCacheRefresh:K2};u0.useEffectEvent=z2;var rb={readContext:Ss,use:Kl,useCallback:G2,useContext:Ss,useEffect:s0,useImperativeHandle:H2,useInsertionEffect:P2,useLayoutEffect:q2,useMemo:W2,useReducer:Ku,useRef:zd,useState:function(){return Ku(Sa)},useDebugValue:i0,useDeferredValue:function(n,i){var l=jr();return Pt===null?a0(l,n,i):Y2(l,Pt.memoizedState,n,i)},useTransition:function(){var n=Ku(Sa)[0],i=jr().memoizedState;return[typeof n=="boolean"?n:Ro(n),i]},useSyncExternalStore:Ju,useId:Q2,useHostTransitionStatus:l0,useFormState:nh,useActionState:nh,useOptimistic:function(n,i){var l=jr();return Pt!==null?Id(l,Pt,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:cl,useCacheRefresh:K2};rb.useEffectEvent=z2;function h0(n,i,l,h){i=n.memoizedState,l=l(h,i),l=l==null?i:y({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var f0={enqueueSetState:function(n,i,l){n=n._reactInternals;var h=sa(),g=Ht(h);g.payload=i,l!=null&&(g.callback=l),i=hn(n,g,h),i!==null&&(Bi(i,n,h),Hn(i,n,h))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var h=sa(),g=Ht(h);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=hn(n,g,h),i!==null&&(Bi(i,n,h),Hn(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=sa(),h=Ht(l);h.tag=2,i!=null&&(h.callback=i),i=hn(n,h,l),i!==null&&(Bi(i,n,l),Hn(i,n,l))}};function sb(n,i,l,h,g,w,D){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,w,D):i.prototype&&i.prototype.isPureReactComponent?!Wa(l,h)||!Wa(g,w):!0}function ib(n,i,l,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==n&&f0.enqueueReplaceState(i,i.state,null)}function nu(n,i){var l=i;if("ref"in i){l={};for(var h in i)h!=="ref"&&(l[h]=i[h])}if(n=n.defaultProps){l===i&&(l=y({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}function ab(n){Gc(n)}function ob(n){console.error(n)}function lb(n){Gc(n)}function qd(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function cb(n,i,l){try{var h=n.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function d0(n,i,l){return l=Ht(l),l.tag=3,l.payload={element:null},l.callback=function(){qd(n,i)},l}function ub(n){return n=Ht(n),n.tag=3,n}function hb(n,i,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var w=h.value;n.payload=function(){return g(w)},n.callback=function(){cb(i,l,h)}}var D=l.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(n.callback=function(){cb(i,l,h),typeof g!="function"&&(ic===null?ic=new Set([this]):ic.add(this));var K=h.stack;this.componentDidCatch(h.value,{componentStack:K!==null?K:""})})}function A4(n,i,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=l.alternate,i!==null&&Mo(i,l,g,!0),l=xr.current,l!==null){switch(l.tag){case 31:case 13:return Fn===null?e1():l.alternate===null&&$r===0&&($r=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===_e?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([h]):i.add(h),V0(n,h,g)),!1;case 22:return l.flags|=65536,h===_e?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([h]):l.add(h)),V0(n,h,g)),!1}throw Error(s(435,l.tag))}return V0(n,h,g),e1(),!1}if(Sn)return i=xr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,h!==ta&&(n=Error(s(422),{cause:h}),Xl(ki(n,l)))):(h!==ta&&(i=Error(s(423),{cause:h}),Xl(ki(i,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,h=ki(h,l),g=d0(n.stateNode,h,g),es(n,g),$r!==4&&($r=2)),!1;var w=Error(s(520),{cause:h});if(w=ki(w,l),_f===null?_f=[w]:_f.push(w),$r!==4&&($r=2),i===null)return!0;h=ki(h,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=d0(l.stateNode,h,n),es(l,n),!1;case 1:if(i=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ic===null||!ic.has(w))))return l.flags|=65536,g&=-g,l.lanes|=g,g=ub(g),hb(g,n,l,h),es(l,g),!1}l=l.return}while(l!==null);return!1}var p0=Error(s(461)),cs=!1;function Ws(n,i,l,h){i.child=n===null?ln(i,null,l,h):hr(i,n.child,l,h)}function fb(n,i,l,h,g){l=l.render;var w=i.ref;if("ref"in h){var D={};for(var K in h)K!=="ref"&&(D[K]=h[K])}else D=h;return Lo(i),h=af(n,i,l,D,w,g),K=of(),n!==null&&!cs?(lf(n,i,g),fl(n,i,g)):(Sn&&K&&tf(i),i.flags|=1,Ws(n,i,h,g),i.child)}function db(n,i,l,h,g){if(n===null){var w=l.type;return typeof w=="function"&&!Bu(w)&&w.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=w,pb(n,i,w,h,g)):(n=Wl(l.type,null,h,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(w=n.child,!_0(n,g)){var D=w.memoizedProps;if(l=l.compare,l=l!==null?l:Wa,l(D,h)&&n.ref===i.ref)return fl(n,i,g)}return i.flags|=1,n=Ti(w,h),n.ref=i.ref,n.return=i,i.child=n}function pb(n,i,l,h,g){if(n!==null){var w=n.memoizedProps;if(Wa(w,h)&&n.ref===i.ref)if(cs=!1,i.pendingProps=h=w,_0(n,g))(n.flags&131072)!==0&&(cs=!0);else return i.lanes=n.lanes,fl(n,i,g)}return m0(n,i,l,h,g)}function mb(n,i,l,h){var g=h.children,w=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,n!==null){for(h=i.child=n.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~w}else h=0,i.child=null;return gb(n,i,w,l,h)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&oe(i,w!==null?w.cachePool:null),w!==null?yr(i,w):Pn(),Gr(i);else return h=i.lanes=536870912,gb(n,i,w!==null?w.baseLanes|l:l,l,h)}else w!==null?(oe(i,w.cachePool),yr(i,w),Wr(),i.memoizedState=null):(n!==null&&oe(i,null),Pn(),Wr());return Ws(n,i,g,l),i.child}function mf(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function gb(n,i,l,h,g){var w=ne();return w=w===null?null:{parent:Br._currentValue,pool:w},i.memoizedState={baseLanes:l,cachePool:w},n!==null&&oe(i,null),Pn(),Gr(i),n!==null&&Mo(n,i,h,!0),i.childLanes=g,null}function Ud(n,i){return i=Gd({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function bb(n,i,l){return hr(i,n.child,null,l),n=Ud(i,i.pendingProps),n.flags|=2,Xn(i),i.memoizedState=null,n}function C4(n,i,l){var h=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Sn){if(h.mode==="hidden")return n=Ud(i,h),i.lanes=536870912,mf(null,n);if(Gn(i),(n=ur)?(n=j5(n,Tr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:To!==null?{id:Mi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=zu(n),l.return=i,i.child=l,ws=i,ur=null)):n=null,n===null)throw ko(i);return i.lanes=536870912,null}return Ud(i,h)}var w=n.memoizedState;if(w!==null){var D=w.dehydrated;if(Gn(i),g)if(i.flags&256)i.flags&=-257,i=bb(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(cs||Mo(n,i,l,!1),g=(l&n.childLanes)!==0,cs||g){if(h=fr,h!==null&&(D=tn(h,l),D!==0&&D!==w.retryLane))throw w.retryLane=D,Za(n,D),Bi(h,n,D),p0;e1(),i=bb(n,i,l)}else n=w.treeContext,ur=Aa(D.nextSibling),ws=i,Sn=!0,Hs=null,Tr=!1,n!==null&&Od(i,n),i=Ud(i,h),i.flags|=4096;return i}return n=Ti(n.child,{mode:h.mode,children:h.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Hd(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function m0(n,i,l,h,g){return Lo(i),l=af(n,i,l,h,void 0,g),h=of(),n!==null&&!cs?(lf(n,i,g),fl(n,i,g)):(Sn&&h&&tf(i),i.flags|=1,Ws(n,i,l,g),i.child)}function vb(n,i,l,h,g,w){return Lo(i),i.updateQueue=null,l=Ka(i,h,l,g),Xu(n),h=of(),n!==null&&!cs?(lf(n,i,w),fl(n,i,w)):(Sn&&h&&tf(i),i.flags|=1,Ws(n,i,l,w),i.child)}function yb(n,i,l,h,g){if(Lo(i),i.stateNode===null){var w=xs,D=l.contextType;typeof D=="object"&&D!==null&&(w=Ss(D)),w=new l(h,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=f0,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=h,w.state=i.memoizedState,w.refs={},pt(i),D=l.contextType,w.context=typeof D=="object"&&D!==null?Ss(D):xs,w.state=i.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(h0(i,l,D,h),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&f0.enqueueReplaceState(w,w.state,null),Ur(i,h,w,g),nr(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(n===null){w=i.stateNode;var K=i.memoizedProps,be=nu(l,K);w.props=be;var Le=w.context,qe=l.contextType;D=xs,typeof qe=="object"&&qe!==null&&(D=Ss(qe));var Xe=l.getDerivedStateFromProps;qe=typeof Xe=="function"||typeof w.getSnapshotBeforeUpdate=="function",K=i.pendingProps!==K,qe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(K||Le!==D)&&ib(i,w,h,D),St=!1;var Oe=i.memoizedState;w.state=Oe,Ur(i,h,w,g),nr(),Le=i.memoizedState,K||Oe!==Le||St?(typeof Xe=="function"&&(h0(i,l,Xe,h),Le=i.memoizedState),(be=St||sb(i,l,be,h,Oe,Le,D))?(qe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=Le),w.props=h,w.state=Le,w.context=D,h=be):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,vr(n,i),D=i.memoizedProps,qe=nu(l,D),w.props=qe,Xe=i.pendingProps,Oe=w.context,Le=l.contextType,be=xs,typeof Le=="object"&&Le!==null&&(be=Ss(Le)),K=l.getDerivedStateFromProps,(Le=typeof K=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==Xe||Oe!==be)&&ib(i,w,h,be),St=!1,Oe=i.memoizedState,w.state=Oe,Ur(i,h,w,g),nr();var Ie=i.memoizedState;D!==Xe||Oe!==Ie||St||n!==null&&n.dependencies!==null&&Gu(n.dependencies)?(typeof K=="function"&&(h0(i,l,K,h),Ie=i.memoizedState),(qe=St||sb(i,l,qe,h,Oe,Ie,be)||n!==null&&n.dependencies!==null&&Gu(n.dependencies))?(Le||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ie,be),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ie,be)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===n.memoizedProps&&Oe===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&Oe===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Ie),w.props=h,w.state=Ie,w.context=be,h=qe):(typeof w.componentDidUpdate!="function"||D===n.memoizedProps&&Oe===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&Oe===n.memoizedState||(i.flags|=1024),h=!1)}return w=h,Hd(n,i),h=(i.flags&128)!==0,w||h?(w=i.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,n!==null&&h?(i.child=hr(i,n.child,null,g),i.child=hr(i,null,l,g)):Ws(n,i,l,g),i.memoizedState=w.state,n=i.child):n=fl(n,i,g),n}function xb(n,i,l,h){return ol(),i.flags|=256,Ws(n,i,l,h),i.child}var g0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b0(n){return{baseLanes:n,cachePool:fe()}}function v0(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=ra),n}function wb(n,i,l){var h=i.pendingProps,g=!1,w=(i.flags&128)!==0,D;if((D=w)||(D=n!==null&&n.memoizedState===null?!1:(Dn.current&2)!==0),D&&(g=!0,i.flags&=-129),D=(i.flags&32)!==0,i.flags&=-33,n===null){if(Sn){if(g?zr(i):Wr(),(n=ur)?(n=j5(n,Tr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:To!==null?{id:Mi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=zu(n),l.return=i,i.child=l,ws=i,ur=null)):n=null,n===null)throw ko(i);return em(n)?i.lanes=32:i.lanes=536870912,null}var K=h.children;return h=h.fallback,g?(Wr(),g=i.mode,K=Gd({mode:"hidden",children:K},g),h=Co(h,g,l,null),K.return=i,h.return=i,K.sibling=h,i.child=K,h=i.child,h.memoizedState=b0(l),h.childLanes=v0(n,D,l),i.memoizedState=g0,mf(null,h)):(zr(i),y0(i,K))}var be=n.memoizedState;if(be!==null&&(K=be.dehydrated,K!==null)){if(w)i.flags&256?(zr(i),i.flags&=-257,i=x0(n,i,l)):i.memoizedState!==null?(Wr(),i.child=n.child,i.flags|=128,i=null):(Wr(),K=h.fallback,g=i.mode,h=Gd({mode:"visible",children:h.children},g),K=Co(K,g,l,null),K.flags|=2,h.return=i,K.return=i,h.sibling=K,i.child=h,hr(i,n.child,null,l),h=i.child,h.memoizedState=b0(l),h.childLanes=v0(n,D,l),i.memoizedState=g0,i=mf(null,h));else if(zr(i),em(K)){if(D=K.nextSibling&&K.nextSibling.dataset,D)var Le=D.dgst;D=Le,h=Error(s(419)),h.stack="",h.digest=D,Xl({value:h,source:null,stack:null}),i=x0(n,i,l)}else if(cs||Mo(n,i,l,!1),D=(l&n.childLanes)!==0,cs||D){if(D=fr,D!==null&&(h=tn(D,l),h!==0&&h!==be.retryLane))throw be.retryLane=h,Za(n,h),Bi(D,n,h),p0;J0(K)||e1(),i=x0(n,i,l)}else J0(K)?(i.flags|=192,i.child=n.child,i=null):(n=be.treeContext,ur=Aa(K.nextSibling),ws=i,Sn=!0,Hs=null,Tr=!1,n!==null&&Od(i,n),i=y0(i,h.children),i.flags|=4096);return i}return g?(Wr(),K=h.fallback,g=i.mode,be=n.child,Le=be.sibling,h=Ti(be,{mode:"hidden",children:h.children}),h.subtreeFlags=be.subtreeFlags&65011712,Le!==null?K=Ti(Le,K):(K=Co(K,g,l,null),K.flags|=2),K.return=i,h.return=i,h.sibling=K,i.child=h,mf(null,h),h=i.child,K=n.child.memoizedState,K===null?K=b0(l):(g=K.cachePool,g!==null?(be=Br._currentValue,g=g.parent!==be?{parent:be,pool:be}:g):g=fe(),K={baseLanes:K.baseLanes|l,cachePool:g}),h.memoizedState=K,h.childLanes=v0(n,D,l),i.memoizedState=g0,mf(n.child,h)):(zr(i),l=n.child,n=l.sibling,l=Ti(l,{mode:"visible",children:h.children}),l.return=i,l.sibling=null,n!==null&&(D=i.deletions,D===null?(i.deletions=[n],i.flags|=16):D.push(n)),i.child=l,i.memoizedState=null,l)}function y0(n,i){return i=Gd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Gd(n,i){return n=Ls(22,n,null,i),n.lanes=0,n}function x0(n,i,l){return hr(i,n.child,null,l),n=y0(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function _b(n,i,l){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Zl(n.return,i,l)}function w0(n,i,l,h,g,w){var D=n.memoizedState;D===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g,treeForkCount:w}:(D.isBackwards=i,D.rendering=null,D.renderingStartTime=0,D.last=h,D.tail=l,D.tailMode=g,D.treeForkCount=w)}function Sb(n,i,l){var h=i.pendingProps,g=h.revealOrder,w=h.tail;h=h.children;var D=Dn.current,K=(D&2)!==0;if(K?(D=D&1|2,i.flags|=128):D&=1,z(Dn,D),Ws(n,i,h,l),h=Sn?Qc:0,!K&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_b(n,l,i);else if(n.tag===19)_b(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(l=i.child,g=null;l!==null;)n=l.alternate,n!==null&&Ds(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),w0(i,!1,g,l,w,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&Ds(n)===null){i.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}w0(i,!0,l,null,w,h);break;case"together":w0(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function fl(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),sc|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Mo(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=Ti(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Ti(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function _0(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Gu(n)))}function T4(n,i,l){switch(i.tag){case 3:me(i,i.stateNode.containerInfo),Eo(i,Br,n.memoizedState.cache),ol();break;case 27:case 5:we(i);break;case 4:me(i,i.stateNode.containerInfo);break;case 10:Eo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gn(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(zr(i),i.flags|=128,null):(l&i.child.childLanes)!==0?wb(n,i,l):(zr(i),n=fl(n,i,l),n!==null?n.sibling:null);zr(i);break;case 19:var g=(n.flags&128)!==0;if(h=(l&i.childLanes)!==0,h||(Mo(n,i,l,!1),h=(l&i.childLanes)!==0),g){if(h)return Sb(n,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),z(Dn,Dn.current),h)break;return null;case 22:return i.lanes=0,mb(n,i,l,i.pendingProps);case 24:Eo(i,Br,n.memoizedState.cache)}return fl(n,i,l)}function Nb(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)cs=!0;else{if(!_0(n,l)&&(i.flags&128)===0)return cs=!1,T4(n,i,l);cs=(n.flags&131072)!==0}else cs=!1,Sn&&(i.flags&1048576)!==0&&Ld(i,Qc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(n=ke(i.elementType),i.type=n,typeof n=="function")Bu(n)?(h=nu(n,h),i.tag=1,i=yb(null,i,n,h,l)):(i.tag=0,i=m0(null,i,n,h,l));else{if(n!=null){var g=n.$$typeof;if(g===V){i.tag=11,i=fb(null,i,n,h,l);break e}else if(g===U){i.tag=14,i=db(null,i,n,h,l);break e}}throw i=te(n)||n,Error(s(306,i,""))}}return i;case 0:return m0(n,i,i.type,i.pendingProps,l);case 1:return h=i.type,g=nu(h,i.pendingProps),yb(n,i,h,g,l);case 3:e:{if(me(i,i.stateNode.containerInfo),n===null)throw Error(s(387));h=i.pendingProps;var w=i.memoizedState;g=w.element,vr(n,i),Ur(i,h,null,l);var D=i.memoizedState;if(h=D.cache,Eo(i,Br,h),h!==w.cache&&ll(i,[Br],l,!0),nr(),h=D.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:D.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=xb(n,i,h,l);break e}else if(h!==g){g=ki(Error(s(424)),i),Xl(g),i=xb(n,i,h,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ur=Aa(n.firstChild),ws=i,Sn=!0,Hs=null,Tr=!0,l=ln(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ol(),h===g){i=fl(n,i,l);break e}Ws(n,i,h,l)}i=i.child}return i;case 26:return Hd(n,i),n===null?(l=R5(i.type,null,i.pendingProps,null))?i.memoizedState=l:Sn||(l=i.type,n=i.pendingProps,h=o1(ce.current).createElement(l),h[vn]=i,h[Bn]=n,Ys(h,l,n),Tn(h),i.stateNode=h):i.memoizedState=R5(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return we(i),n===null&&Sn&&(h=i.stateNode=L5(i.type,i.pendingProps,ce.current),ws=i,Tr=!0,g=ur,cc(i.type)?(tm=g,ur=Aa(h.firstChild)):ur=g),Ws(n,i,i.pendingProps.children,l),Hd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Sn&&((g=h=ur)&&(h=r_(h,i.type,i.pendingProps,Tr),h!==null?(i.stateNode=h,ws=i,ur=Aa(h.firstChild),Tr=!1,g=!0):g=!1),g||ko(i)),we(i),g=i.type,w=i.pendingProps,D=n!==null?n.memoizedProps:null,h=w.children,Z0(g,w)?h=null:D!==null&&Z0(g,D)&&(i.flags|=32),i.memoizedState!==null&&(g=af(n,i,r0,null,null,l),Ef._currentValue=g),Hd(n,i),Ws(n,i,h,l),i.child;case 6:return n===null&&Sn&&((n=l=ur)&&(l=s_(l,i.pendingProps,Tr),l!==null?(i.stateNode=l,ws=i,ur=null,n=!0):n=!1),n||ko(i)),null;case 13:return wb(n,i,l);case 4:return me(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=hr(i,null,h,l):Ws(n,i,h,l),i.child;case 11:return fb(n,i,i.type,i.pendingProps,l);case 7:return Ws(n,i,i.pendingProps,l),i.child;case 8:return Ws(n,i,i.pendingProps.children,l),i.child;case 12:return Ws(n,i,i.pendingProps.children,l),i.child;case 10:return h=i.pendingProps,Eo(i,i.type,h.value),Ws(n,i,h.children,l),i.child;case 9:return g=i.type._context,h=i.pendingProps.children,Lo(i),g=Ss(g),h=h(g),i.flags|=1,Ws(n,i,h,l),i.child;case 14:return db(n,i,i.type,i.pendingProps,l);case 15:return pb(n,i,i.type,i.pendingProps,l);case 19:return Sb(n,i,l);case 31:return C4(n,i,l);case 22:return mb(n,i,l,i.pendingProps);case 24:return Lo(i),h=Ss(Br),n===null?(g=ne(),g===null&&(g=fr,w=Ql(),g.pooledCache=w,w.refCount++,w!==null&&(g.pooledCacheLanes|=l),g=w),i.memoizedState={parent:h,cache:g},pt(i),Eo(i,Br,g)):((n.lanes&l)!==0&&(vr(n,i),Ur(i,null,null,l),nr()),g=n.memoizedState,w=i.memoizedState,g.parent!==h?(g={parent:h,cache:h},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Eo(i,Br,h)):(h=w.cache,Eo(i,Br,h),h!==g.cache&&ll(i,[Br],l,!0))),Ws(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function dl(n){n.flags|=4}function S0(n,i,l,h,g){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Qb())n.flags|=8192;else throw Be=_e,je}else n.flags&=-16777217}function Ab(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!z5(i))if(Qb())n.flags|=8192;else throw Be=_e,je}function Wd(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ht():536870912,n.lanes|=i,ah|=i)}function gf(n,i){if(!Sn)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function wr(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(i)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=l,i}function k4(n,i,l){var h=i.pendingProps;switch(Uu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(i),null;case 1:return wr(i),null;case 3:return l=i.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Oi(Br),Ne(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(_s(i)?dl(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,rf())),wr(i),null;case 26:var g=i.type,w=i.memoizedState;return n===null?(dl(i),w!==null?(wr(i),Ab(i,w)):(wr(i),S0(i,g,null,h,l))):w?w!==n.memoizedState?(dl(i),wr(i),Ab(i,w)):(wr(i),i.flags&=-16777217):(n=n.memoizedProps,n!==h&&dl(i),wr(i),S0(i,g,n,h,l)),null;case 27:if(Ve(i),l=ce.current,g=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&dl(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return wr(i),null}n=X.current,_s(i)?nf(i):(n=L5(g,h,l),i.stateNode=n,dl(i))}return wr(i),null;case 5:if(Ve(i),g=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&dl(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return wr(i),null}if(w=X.current,_s(i))nf(i);else{var D=o1(ce.current);switch(w){case 1:w=D.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:w=D.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":w=D.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":w=D.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":w=D.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?D.createElement("select",{is:h.is}):D.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?D.createElement(g,{is:h.is}):D.createElement(g)}}w[vn]=i,w[Bn]=h;e:for(D=i.child;D!==null;){if(D.tag===5||D.tag===6)w.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===i)break e;for(;D.sibling===null;){if(D.return===null||D.return===i)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}i.stateNode=w;e:switch(Ys(w,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&dl(i)}}return wr(i),S0(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==h&&dl(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(s(166));if(n=ce.current,_s(i)){if(n=i.stateNode,l=i.memoizedProps,h=null,g=ws,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}n[vn]=i,n=!!(n.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||w5(n.nodeValue,l)),n||ko(i,!0)}else n=o1(n).createTextNode(h),n[vn]=i,i.stateNode=n}return wr(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(h=_s(i),l!==null){if(n===null){if(!h)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[vn]=i}else ol(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wr(i),n=!1}else l=rf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(Xn(i),i):(Xn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return wr(i),null;case 13:if(h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=_s(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[vn]=i}else ol(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wr(i),g=!1}else g=rf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Xn(i),i):(Xn(i),null)}return Xn(i),(i.flags&128)!==0?(i.lanes=l,i):(l=h!==null,n=n!==null&&n.memoizedState!==null,l&&(h=i.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==g&&(h.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),Wd(i,i.updateQueue),wr(i),null);case 4:return Ne(),n===null&&G0(i.stateNode.containerInfo),wr(i),null;case 10:return Oi(i.type),wr(i),null;case 19:if(j(Dn),h=i.memoizedState,h===null)return wr(i),null;if(g=(i.flags&128)!==0,w=h.rendering,w===null)if(g)gf(h,!1);else{if($r!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Ds(n),w!==null){for(i.flags|=128,gf(h,!1),n=w.updateQueue,i.updateQueue=n,Wd(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Xc(l,n),l=l.sibling;return z(Dn,Dn.current&1|2),Sn&&gi(i,h.treeForkCount),i.child}n=n.sibling}h.tail!==null&&Fe()>Qd&&(i.flags|=128,g=!0,gf(h,!1),i.lanes=4194304)}else{if(!g)if(n=Ds(w),n!==null){if(i.flags|=128,g=!0,n=n.updateQueue,i.updateQueue=n,Wd(i,n),gf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Sn)return wr(i),null}else 2*Fe()-h.renderingStartTime>Qd&&l!==536870912&&(i.flags|=128,g=!0,gf(h,!1),i.lanes=4194304);h.isBackwards?(w.sibling=i.child,i.child=w):(n=h.last,n!==null?n.sibling=w:i.child=w,h.last=w)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Fe(),n.sibling=null,l=Dn.current,z(Dn,g?l&1|2:l&1),Sn&&gi(i,h.treeForkCount),n):(wr(i),null);case 22:case 23:return Xn(i),ts(),h=i.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(l&536870912)!==0&&(i.flags&128)===0&&(wr(i),i.subtreeFlags&6&&(i.flags|=8192)):wr(i),l=i.updateQueue,l!==null&&Wd(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==l&&(i.flags|=2048),n!==null&&j(Z),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Oi(Br),wr(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function j4(n,i){switch(Uu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Oi(Br),Ne(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ve(i),null;case 31:if(i.memoizedState!==null){if(Xn(i),i.alternate===null)throw Error(s(340));ol()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Xn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ol()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return j(Dn),null;case 4:return Ne(),null;case 10:return Oi(i.type),null;case 22:case 23:return Xn(i),ts(),n!==null&&j(Z),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Oi(Br),null;case 25:return null;default:return null}}function Cb(n,i){switch(Uu(i),i.tag){case 3:Oi(Br),Ne();break;case 26:case 27:case 5:Ve(i);break;case 4:Ne();break;case 31:i.memoizedState!==null&&Xn(i);break;case 13:Xn(i);break;case 19:j(Dn);break;case 10:Oi(i.type);break;case 22:case 23:Xn(i),ts(),n!==null&&j(Z);break;case 24:Oi(Br)}}function bf(n,i){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&n)===n){h=void 0;var w=l.create,D=l.inst;h=w(),D.destroy=h}l=l.next}while(l!==g)}}catch(K){Qn(i,i.return,K)}}function nc(n,i,l){try{var h=i.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next;h=w;do{if((h.tag&n)===n){var D=h.inst,K=D.destroy;if(K!==void 0){D.destroy=void 0,g=i;var be=l,Le=K;try{Le()}catch(qe){Qn(g,be,qe)}}}h=h.next}while(h!==w)}}catch(qe){Qn(i,i.return,qe)}}function Tb(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Hr(i,l)}catch(h){Qn(n,n.return,h)}}}function kb(n,i,l){l.props=nu(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(h){Qn(n,i,h)}}function vf(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof l=="function"?n.refCleanup=l(h):l.current=h}}catch(g){Qn(n,i,g)}}function Fo(n,i){var l=n.ref,h=n.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Qn(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Qn(n,i,g)}else l.current=null}function jb(n){var i=n.type,l=n.memoizedProps,h=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Qn(n,n.return,g)}}function N0(n,i,l){try{var h=n.stateNode;Q4(h,n.type,l,i),h[Bn]=i}catch(g){Qn(n,n.return,g)}}function Eb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&cc(n.type)||n.tag===4}function A0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Eb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&cc(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function C0(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Xi));else if(h!==4&&(h===27&&cc(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(C0(n,i,l),n=n.sibling;n!==null;)C0(n,i,l),n=n.sibling}function Yd(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(h!==4&&(h===27&&cc(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Yd(n,i,l),n=n.sibling;n!==null;)Yd(n,i,l),n=n.sibling}function Mb(n){var i=n.stateNode,l=n.memoizedProps;try{for(var h=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Ys(i,h,l),i[vn]=n,i[Bn]=l}catch(w){Qn(n,n.return,w)}}var pl=!1,us=!1,T0=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,Rs=null;function E4(n,i){if(n=n.containerInfo,$0=p1,n=$a(n),xa(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var D=0,K=-1,be=-1,Le=0,qe=0,Xe=n,Oe=null;t:for(;;){for(var Ie;Xe!==l||g!==0&&Xe.nodeType!==3||(K=D+g),Xe!==w||h!==0&&Xe.nodeType!==3||(be=D+h),Xe.nodeType===3&&(D+=Xe.nodeValue.length),(Ie=Xe.firstChild)!==null;)Oe=Xe,Xe=Ie;for(;;){if(Xe===n)break t;if(Oe===l&&++Le===g&&(K=D),Oe===w&&++qe===h&&(be=D),(Ie=Xe.nextSibling)!==null)break;Xe=Oe,Oe=Xe.parentNode}Xe=Ie}l=K===-1||be===-1?null:{start:K,end:be}}else l=null}l=l||{start:0,end:0}}else l=null;for(X0={focusedElem:n,selectionRange:l},p1=!1,Rs=i;Rs!==null;)if(i=Rs,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Rs=n;else for(;Rs!==null;){switch(i=Rs,w=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)g=n[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,l=i,g=w.memoizedProps,w=w.memoizedState,h=l.stateNode;try{var jt=nu(l.type,g);n=h.getSnapshotBeforeUpdate(jt,w),h.__reactInternalSnapshotBeforeUpdate=n}catch(Gt){Qn(l,l.return,Gt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)K0(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":K0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Rs=n;break}Rs=i.return}}function Ob(n,i,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:gl(n,l),h&4&&bf(5,l);break;case 1:if(gl(n,l),h&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(D){Qn(l,l.return,D)}else{var g=nu(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(D){Qn(l,l.return,D)}}h&64&&Tb(l),h&512&&vf(l,l.return);break;case 3:if(gl(n,l),h&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Hr(n,i)}catch(D){Qn(l,l.return,D)}}break;case 27:i===null&&h&4&&Mb(l);case 26:case 5:gl(n,l),i===null&&h&4&&jb(l),h&512&&vf(l,l.return);break;case 12:gl(n,l);break;case 31:gl(n,l),h&4&&Ib(n,l);break;case 13:gl(n,l),h&4&&Fb(n,l),h&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=B4.bind(null,l),i_(n,l))));break;case 22:if(h=l.memoizedState!==null||pl,!h){i=i!==null&&i.memoizedState!==null||us,g=pl;var w=us;pl=h,(us=i)&&!w?bl(n,l,(l.subtreeFlags&8772)!==0):gl(n,l),pl=g,us=w}break;case 30:break;default:gl(n,l)}}function Db(n){var i=n.alternate;i!==null&&(n.alternate=null,Db(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&$t(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Er=null,Ri=!1;function ml(n,i,l){for(l=l.child;l!==null;)Rb(n,i,l),l=l.sibling}function Rb(n,i,l){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Vt,l)}catch{}switch(l.tag){case 26:us||Fo(l,i),ml(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:us||Fo(l,i);var h=Er,g=Ri;cc(l.type)&&(Er=l.stateNode,Ri=!1),ml(n,i,l),Tf(l.stateNode),Er=h,Ri=g;break;case 5:us||Fo(l,i);case 6:if(h=Er,g=Ri,Er=null,ml(n,i,l),Er=h,Ri=g,Er!==null)if(Ri)try{(Er.nodeType===9?Er.body:Er.nodeName==="HTML"?Er.ownerDocument.body:Er).removeChild(l.stateNode)}catch(w){Qn(l,i,w)}else try{Er.removeChild(l.stateNode)}catch(w){Qn(l,i,w)}break;case 18:Er!==null&&(Ri?(n=Er,T5(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),ph(n)):T5(Er,l.stateNode));break;case 4:h=Er,g=Ri,Er=l.stateNode.containerInfo,Ri=!0,ml(n,i,l),Er=h,Ri=g;break;case 0:case 11:case 14:case 15:nc(2,l,i),us||nc(4,l,i),ml(n,i,l);break;case 1:us||(Fo(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"&&kb(l,i,h)),ml(n,i,l);break;case 21:ml(n,i,l);break;case 22:us=(h=us)||l.memoizedState!==null,ml(n,i,l),us=h;break;default:ml(n,i,l)}}function Ib(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ph(n)}catch(l){Qn(i,i.return,l)}}}function Fb(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ph(n)}catch(l){Qn(i,i.return,l)}}function M4(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Lb),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Lb),i;default:throw Error(s(435,n.tag))}}function $d(n,i){var l=M4(n);i.forEach(function(h){if(!l.has(h)){l.add(h);var g=z4.bind(null,n,h);h.then(g,g)}})}function Ii(n,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],w=n,D=i,K=D;e:for(;K!==null;){switch(K.tag){case 27:if(cc(K.type)){Er=K.stateNode,Ri=!1;break e}break;case 5:Er=K.stateNode,Ri=!1;break e;case 3:case 4:Er=K.stateNode.containerInfo,Ri=!0;break e}K=K.return}if(Er===null)throw Error(s(160));Rb(w,D,g),Er=null,Ri=!1,w=g.alternate,w!==null&&(w.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Vb(i,n),i=i.sibling}var no=null;function Vb(n,i){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ii(i,n),Fi(n),h&4&&(nc(3,n,n.return),bf(3,n),nc(5,n,n.return));break;case 1:Ii(i,n),Fi(n),h&512&&(us||l===null||Fo(l,l.return)),h&64&&pl&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=no;if(Ii(i,n),Fi(n),h&512&&(us||l===null||Fo(l,l.return)),h&4){var w=l!==null?l.memoizedState:null;if(h=n.memoizedState,l===null)if(h===null)if(n.stateNode===null){e:{h=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":w=g.getElementsByTagName("title")[0],(!w||w[gt]||w[vn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=g.createElement(h),g.head.insertBefore(w,g.querySelector("head > title"))),Ys(w,h,l),w[vn]=n,Tn(w),h=w;break e;case"link":var D=V5("link","href",g).get(h+(l.href||""));if(D){for(var K=0;K<D.length;K++)if(w=D[K],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){D.splice(K,1);break t}}w=g.createElement(h),Ys(w,h,l),g.head.appendChild(w);break;case"meta":if(D=V5("meta","content",g).get(h+(l.content||""))){for(K=0;K<D.length;K++)if(w=D[K],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){D.splice(K,1);break t}}w=g.createElement(h),Ys(w,h,l),g.head.appendChild(w);break;default:throw Error(s(468,h))}w[vn]=n,Tn(w),h=w}n.stateNode=h}else B5(g,n.type,n.stateNode);else n.stateNode=F5(g,h,n.memoizedProps);else w!==h?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,h===null?B5(g,n.type,n.stateNode):F5(g,h,n.memoizedProps)):h===null&&n.stateNode!==null&&N0(n,n.memoizedProps,l.memoizedProps)}break;case 27:Ii(i,n),Fi(n),h&512&&(us||l===null||Fo(l,l.return)),l!==null&&h&4&&N0(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Ii(i,n),Fi(n),h&512&&(us||l===null||Fo(l,l.return)),n.flags&32){g=n.stateNode;try{$i(g,"")}catch(jt){Qn(n,n.return,jt)}}h&4&&n.stateNode!=null&&(g=n.memoizedProps,N0(n,g,l!==null?l.memoizedProps:g)),h&1024&&(T0=!0);break;case 6:if(Ii(i,n),Fi(n),h&4){if(n.stateNode===null)throw Error(s(162));h=n.memoizedProps,l=n.stateNode;try{l.nodeValue=h}catch(jt){Qn(n,n.return,jt)}}break;case 3:if(u1=null,g=no,no=l1(i.containerInfo),Ii(i,n),no=g,Fi(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{ph(i.containerInfo)}catch(jt){Qn(n,n.return,jt)}T0&&(T0=!1,Bb(n));break;case 4:h=no,no=l1(n.stateNode.containerInfo),Ii(i,n),Fi(n),no=h;break;case 12:Ii(i,n),Fi(n);break;case 31:Ii(i,n),Fi(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,$d(n,h)));break;case 13:Ii(i,n),Fi(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Zd=Fe()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,$d(n,h)));break;case 22:g=n.memoizedState!==null;var be=l!==null&&l.memoizedState!==null,Le=pl,qe=us;if(pl=Le||g,us=qe||be,Ii(i,n),us=qe,pl=Le,Fi(n),h&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||be||pl||us||ru(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){be=l=i;try{if(w=be.stateNode,g)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{K=be.stateNode;var Xe=be.memoizedProps.style,Oe=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;K.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(jt){Qn(be,be.return,jt)}}}else if(i.tag===6){if(l===null){be=i;try{be.stateNode.nodeValue=g?"":be.memoizedProps}catch(jt){Qn(be,be.return,jt)}}}else if(i.tag===18){if(l===null){be=i;try{var Ie=be.stateNode;g?k5(Ie,!0):k5(be.stateNode,!1)}catch(jt){Qn(be,be.return,jt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=n.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,$d(n,l))));break;case 19:Ii(i,n),Fi(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,$d(n,h)));break;case 30:break;case 21:break;default:Ii(i,n),Fi(n)}}function Fi(n){var i=n.flags;if(i&2){try{for(var l,h=n.return;h!==null;){if(Eb(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,w=A0(n);Yd(n,w,g);break;case 5:var D=l.stateNode;l.flags&32&&($i(D,""),l.flags&=-33);var K=A0(n);Yd(n,K,D);break;case 3:case 4:var be=l.stateNode.containerInfo,Le=A0(n);C0(n,Le,be);break;default:throw Error(s(161))}}catch(qe){Qn(n,n.return,qe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Bb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Bb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function gl(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ob(n,i.alternate,i),i=i.sibling}function ru(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:nc(4,i,i.return),ru(i);break;case 1:Fo(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&kb(i,i.return,l),ru(i);break;case 27:Tf(i.stateNode);case 26:case 5:Fo(i,i.return),ru(i);break;case 22:i.memoizedState===null&&ru(i);break;case 30:ru(i);break;default:ru(i)}n=n.sibling}}function bl(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,g=n,w=i,D=w.flags;switch(w.tag){case 0:case 11:case 15:bl(g,w,l),bf(4,w);break;case 1:if(bl(g,w,l),h=w,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Le){Qn(h,h.return,Le)}if(h=w,g=h.updateQueue,g!==null){var K=h.stateNode;try{var be=g.shared.hiddenCallbacks;if(be!==null)for(g.shared.hiddenCallbacks=null,g=0;g<be.length;g++)Os(be[g],K)}catch(Le){Qn(h,h.return,Le)}}l&&D&64&&Tb(w),vf(w,w.return);break;case 27:Mb(w);case 26:case 5:bl(g,w,l),l&&h===null&&D&4&&jb(w),vf(w,w.return);break;case 12:bl(g,w,l);break;case 31:bl(g,w,l),l&&D&4&&Ib(g,w);break;case 13:bl(g,w,l),l&&D&4&&Fb(g,w);break;case 22:w.memoizedState===null&&bl(g,w,l),vf(w,w.return);break;case 30:break;default:bl(g,w,l)}i=i.sibling}}function k0(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Kc(l))}function j0(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kc(n))}function ro(n,i,l,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zb(n,i,l,h),i=i.sibling}function zb(n,i,l,h){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ro(n,i,l,h),g&2048&&bf(9,i);break;case 1:ro(n,i,l,h);break;case 3:ro(n,i,l,h),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kc(n)));break;case 12:if(g&2048){ro(n,i,l,h),n=i.stateNode;try{var w=i.memoizedProps,D=w.id,K=w.onPostCommit;typeof K=="function"&&K(D,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(be){Qn(i,i.return,be)}}else ro(n,i,l,h);break;case 31:ro(n,i,l,h);break;case 13:ro(n,i,l,h);break;case 23:break;case 22:w=i.stateNode,D=i.alternate,i.memoizedState!==null?w._visibility&2?ro(n,i,l,h):yf(n,i):w._visibility&2?ro(n,i,l,h):(w._visibility|=2,rh(n,i,l,h,(i.subtreeFlags&10256)!==0||!1)),g&2048&&k0(D,i);break;case 24:ro(n,i,l,h),g&2048&&j0(i.alternate,i);break;default:ro(n,i,l,h)}}function rh(n,i,l,h,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=n,D=i,K=l,be=h,Le=D.flags;switch(D.tag){case 0:case 11:case 15:rh(w,D,K,be,g),bf(8,D);break;case 23:break;case 22:var qe=D.stateNode;D.memoizedState!==null?qe._visibility&2?rh(w,D,K,be,g):yf(w,D):(qe._visibility|=2,rh(w,D,K,be,g)),g&&Le&2048&&k0(D.alternate,D);break;case 24:rh(w,D,K,be,g),g&&Le&2048&&j0(D.alternate,D);break;default:rh(w,D,K,be,g)}i=i.sibling}}function yf(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,h=i,g=h.flags;switch(h.tag){case 22:yf(l,h),g&2048&&k0(h.alternate,h);break;case 24:yf(l,h),g&2048&&j0(h.alternate,h);break;default:yf(l,h)}i=i.sibling}}var xf=8192;function sh(n,i,l){if(n.subtreeFlags&xf)for(n=n.child;n!==null;)Pb(n,i,l),n=n.sibling}function Pb(n,i,l){switch(n.tag){case 26:sh(n,i,l),n.flags&xf&&n.memoizedState!==null&&b_(l,no,n.memoizedState,n.memoizedProps);break;case 5:sh(n,i,l);break;case 3:case 4:var h=no;no=l1(n.stateNode.containerInfo),sh(n,i,l),no=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=xf,xf=16777216,sh(n,i,l),xf=h):sh(n,i,l));break;default:sh(n,i,l)}}function qb(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function wf(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var h=i[l];Rs=h,Hb(h,n)}qb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ub(n),n=n.sibling}function Ub(n){switch(n.tag){case 0:case 11:case 15:wf(n),n.flags&2048&&nc(9,n,n.return);break;case 3:wf(n);break;case 12:wf(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Xd(n)):wf(n);break;default:wf(n)}}function Xd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var h=i[l];Rs=h,Hb(h,n)}qb(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:nc(8,i,i.return),Xd(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Xd(i));break;default:Xd(i)}n=n.sibling}}function Hb(n,i){for(;Rs!==null;){var l=Rs;switch(l.tag){case 0:case 11:case 15:nc(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Kc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Rs=h;else e:for(l=n;Rs!==null;){h=Rs;var g=h.sibling,w=h.return;if(Db(h),h===l){Rs=null;break e}if(g!==null){g.return=w,Rs=g;break e}Rs=w}}}var L4={getCacheForType:function(n){var i=Ss(Br),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return Ss(Br).controller.signal}},O4=typeof WeakMap=="function"?WeakMap:Map,Wn=0,fr=null,Nn=null,jn=0,Zn=0,na=null,rc=!1,ih=!1,E0=!1,vl=0,$r=0,sc=0,su=0,M0=0,ra=0,ah=0,_f=null,Vi=null,L0=!1,Zd=0,Gb=0,Qd=1/0,Kd=null,ic=null,As=0,ac=null,oh=null,yl=0,O0=0,D0=null,Wb=null,Sf=0,R0=null;function sa(){return(Wn&2)!==0&&jn!==0?jn&-jn:H.T!==null?P0():Qt()}function Yb(){if(ra===0)if((jn&536870912)===0||Sn){var n=gn;gn<<=1,(gn&3932160)===0&&(gn=262144),ra=n}else ra=536870912;return n=xr.current,n!==null&&(n.flags|=32),ra}function Bi(n,i,l){(n===fr&&(Zn===2||Zn===9)||n.cancelPendingCommit!==null)&&(lh(n,0),oc(n,jn,ra,!1)),lt(n,l),((Wn&2)===0||n!==fr)&&(n===fr&&((Wn&2)===0&&(su|=l),$r===4&&oc(n,jn,ra,!1)),Vo(n))}function $b(n,i,l){if((Wn&6)!==0)throw Error(s(327));var h=!l&&(i&127)===0&&(i&n.expiredLanes)===0||Pe(n,i),g=h?I4(n,i):F0(n,i,!0),w=h;do{if(g===0){ih&&!h&&oc(n,i,0,!1);break}else{if(l=n.current.alternate,w&&!D4(l)){g=F0(n,i,!1),w=!1;continue}if(g===2){if(w=i,n.errorRecoveryDisabledLanes&w)var D=0;else D=n.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){i=D;e:{var K=n;g=_f;var be=K.current.memoizedState.isDehydrated;if(be&&(lh(K,D).flags|=256),D=F0(K,D,!1),D!==2){if(E0&&!be){K.errorRecoveryDisabledLanes|=w,su|=w,g=4;break e}w=Vi,Vi=g,w!==null&&(Vi===null?Vi=w:Vi.push.apply(Vi,w))}g=D}if(w=!1,g!==2)continue}}if(g===1){lh(n,0),oc(n,i,0,!0);break}e:{switch(h=n,w=g,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:oc(h,i,ra,!rc);break e;case 2:Vi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(g=Zd+300-Fe(),10<g)){if(oc(h,i,ra,!rc),le(h,0,!0)!==0)break e;yl=i,h.timeoutHandle=A5(Xb.bind(null,h,l,Vi,Kd,L0,i,ra,su,ah,rc,w,"Throttled",-0,0),g);break e}Xb(h,l,Vi,Kd,L0,i,ra,su,ah,rc,w,null,-0,0)}}break}while(!0);Vo(n)}function Xb(n,i,l,h,g,w,D,K,be,Le,qe,Xe,Oe,Ie){if(n.timeoutHandle=-1,Xe=i.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},Pb(i,w,Xe);var jt=(w&62914560)===w?Zd-Fe():(w&4194048)===w?Gb-Fe():0;if(jt=v_(Xe,jt),jt!==null){yl=w,n.cancelPendingCommit=jt(r5.bind(null,n,i,w,l,h,g,D,K,be,qe,Xe,null,Oe,Ie)),oc(n,w,D,!Le);return}}r5(n,i,w,l,h,g,D,K,be)}function D4(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],w=g.getSnapshot;g=g.value;try{if(!ys(w(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oc(n,i,l,h){i&=~M0,i&=~su,n.suspendedLanes|=i,n.pingedLanes&=~i,h&&(n.warmLanes|=i),h=n.expirationTimes;for(var g=i;0<g;){var w=31-Tt(g),D=1<<w;h[w]=-1,g&=~D}l!==0&&Cn(n,l,i)}function Jd(){return(Wn&6)===0?(Nf(0),!1):!0}function I0(){if(Nn!==null){if(Zn===0)var n=Nn.return;else n=Nn,_a=jo=null,Zu(n),Ze=null,Mt=0,n=Nn;for(;n!==null;)Cb(n.alternate,n),n=n.return;Nn=null}}function lh(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,e_(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),yl=0,I0(),fr=n,Nn=l=Ti(n.current,null),jn=i,Zn=0,na=null,rc=!1,ih=Pe(n,i),E0=!1,ah=ra=M0=su=sc=$r=0,Vi=_f=null,L0=!1,(i&8)!==0&&(i|=i&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=i;0<h;){var g=31-Tt(h),w=1<<g;i|=n[g],h&=~w}return vl=i,Wc(),l}function Zb(n,i){zt=null,H.H=pf,i===ye||i===he?(i=He(),Zn=3):i===je?(i=He(),Zn=4):Zn=i===p0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,na=i,Nn===null&&($r=1,qd(n,ki(i,n.current)))}function Qb(){var n=xr.current;return n===null?!0:(jn&4194048)===jn?Fn===null:(jn&62914560)===jn||(jn&536870912)!==0?n===Fn:!1}function Kb(){var n=H.H;return H.H=pf,n===null?pf:n}function Jb(){var n=H.A;return H.A=L4,n}function e1(){$r=4,rc||(jn&4194048)!==jn&&xr.current!==null||(ih=!0),(sc&134217727)===0&&(su&134217727)===0||fr===null||oc(fr,jn,ra,!1)}function F0(n,i,l){var h=Wn;Wn|=2;var g=Kb(),w=Jb();(fr!==n||jn!==i)&&(Kd=null,lh(n,i)),i=!1;var D=$r;e:do try{if(Zn!==0&&Nn!==null){var K=Nn,be=na;switch(Zn){case 8:I0(),D=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(i=!0);var Le=Zn;if(Zn=0,na=null,ch(n,K,be,Le),l&&ih){D=0;break e}break;default:Le=Zn,Zn=0,na=null,ch(n,K,be,Le)}}R4(),D=$r;break}catch(qe){Zb(n,qe)}while(!0);return i&&n.shellSuspendCounter++,_a=jo=null,Wn=h,H.H=g,H.A=w,Nn===null&&(fr=null,jn=0,Wc()),D}function R4(){for(;Nn!==null;)e5(Nn)}function I4(n,i){var l=Wn;Wn|=2;var h=Kb(),g=Jb();fr!==n||jn!==i?(Kd=null,Qd=Fe()+500,lh(n,i)):ih=Pe(n,i);e:do try{if(Zn!==0&&Nn!==null){i=Nn;var w=na;t:switch(Zn){case 1:Zn=0,na=null,ch(n,i,w,1);break;case 2:case 9:if(Te(w)){Zn=0,na=null,t5(i);break}i=function(){Zn!==2&&Zn!==9||fr!==n||(Zn=7),Vo(n)},w.then(i,i);break e;case 3:Zn=7;break e;case 4:Zn=5;break e;case 7:Te(w)?(Zn=0,na=null,t5(i)):(Zn=0,na=null,ch(n,i,w,7));break;case 5:var D=null;switch(Nn.tag){case 26:D=Nn.memoizedState;case 5:case 27:var K=Nn;if(D?z5(D):K.stateNode.complete){Zn=0,na=null;var be=K.sibling;if(be!==null)Nn=be;else{var Le=K.return;Le!==null?(Nn=Le,t1(Le)):Nn=null}break t}}Zn=0,na=null,ch(n,i,w,5);break;case 6:Zn=0,na=null,ch(n,i,w,6);break;case 8:I0(),$r=6;break e;default:throw Error(s(462))}}F4();break}catch(qe){Zb(n,qe)}while(!0);return _a=jo=null,H.H=h,H.A=g,Wn=l,Nn!==null?0:(fr=null,jn=0,Wc(),$r)}function F4(){for(;Nn!==null&&!ot();)e5(Nn)}function e5(n){var i=Nb(n.alternate,n,vl);n.memoizedProps=n.pendingProps,i===null?t1(n):Nn=i}function t5(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=vb(l,i,i.pendingProps,i.type,void 0,jn);break;case 11:i=vb(l,i,i.pendingProps,i.type.render,i.ref,jn);break;case 5:Zu(i);default:Cb(l,i),i=Nn=Xc(i,vl),i=Nb(l,i,vl)}n.memoizedProps=n.pendingProps,i===null?t1(n):Nn=i}function ch(n,i,l,h){_a=jo=null,Zu(i),Ze=null,Mt=0;var g=i.return;try{if(A4(n,g,i,l,jn)){$r=1,qd(n,ki(l,n.current)),Nn=null;return}}catch(w){if(g!==null)throw Nn=g,w;$r=1,qd(n,ki(l,n.current)),Nn=null;return}i.flags&32768?(Sn||h===1?n=!0:ih||(jn&536870912)!==0?n=!1:(rc=n=!0,(h===2||h===9||h===3||h===6)&&(h=xr.current,h!==null&&h.tag===13&&(h.flags|=16384))),n5(i,n)):t1(i)}function t1(n){var i=n;do{if((i.flags&32768)!==0){n5(i,rc);return}n=i.return;var l=k4(i.alternate,i,vl);if(l!==null){Nn=l;return}if(i=i.sibling,i!==null){Nn=i;return}Nn=i=n}while(i!==null);$r===0&&($r=5)}function n5(n,i){do{var l=j4(n.alternate,n);if(l!==null){l.flags&=32767,Nn=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){Nn=n;return}Nn=n=l}while(n!==null);$r=6,Nn=null}function r5(n,i,l,h,g,w,D,K,be){n.cancelPendingCommit=null;do n1();while(As!==0);if((Wn&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=Iu,Zt(n,l,w,D,K,be),n===fr&&(Nn=fr=null,jn=0),oh=i,ac=n,yl=l,O0=w,D0=g,Wb=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,P4(yt,function(){return l5(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,g=se.p,se.p=2,D=Wn,Wn|=4;try{E4(n,i,l)}finally{Wn=D,se.p=g,H.T=h}}As=1,s5(),i5(),a5()}}function s5(){if(As===1){As=0;var n=ac,i=oh,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var h=se.p;se.p=2;var g=Wn;Wn|=4;try{Vb(i,n);var w=X0,D=$a(n.containerInfo),K=w.focusedElem,be=w.selectionRange;if(D!==K&&K&&K.ownerDocument&&Ya(K.ownerDocument.documentElement,K)){if(be!==null&&xa(K)){var Le=be.start,qe=be.end;if(qe===void 0&&(qe=Le),"selectionStart"in K)K.selectionStart=Le,K.selectionEnd=Math.min(qe,K.value.length);else{var Xe=K.ownerDocument||document,Oe=Xe&&Xe.defaultView||window;if(Oe.getSelection){var Ie=Oe.getSelection(),jt=K.textContent.length,Gt=Math.min(be.start,jt),ir=be.end===void 0?Gt:Math.min(be.end,jt);!Ie.extend&&Gt>ir&&(D=ir,ir=Gt,Gt=D);var Ce=Gl(K,Gt),xe=Gl(K,ir);if(Ce&&xe&&(Ie.rangeCount!==1||Ie.anchorNode!==Ce.node||Ie.anchorOffset!==Ce.offset||Ie.focusNode!==xe.node||Ie.focusOffset!==xe.offset)){var Ee=Xe.createRange();Ee.setStart(Ce.node,Ce.offset),Ie.removeAllRanges(),Gt>ir?(Ie.addRange(Ee),Ie.extend(xe.node,xe.offset)):(Ee.setEnd(xe.node,xe.offset),Ie.addRange(Ee))}}}}for(Xe=[],Ie=K;Ie=Ie.parentNode;)Ie.nodeType===1&&Xe.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Xe.length;K++){var Ye=Xe[K];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}p1=!!$0,X0=$0=null}finally{Wn=g,se.p=h,H.T=l}}n.current=i,As=2}}function i5(){if(As===2){As=0;var n=ac,i=oh,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var h=se.p;se.p=2;var g=Wn;Wn|=4;try{Ob(n,i.alternate,i)}finally{Wn=g,se.p=h,H.T=l}}As=3}}function a5(){if(As===4||As===3){As=0,rt();var n=ac,i=oh,l=yl,h=Wb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?As=5:(As=0,oh=ac=null,o5(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(ic=null),fn(l),i=i.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Vt,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=H.T,g=se.p,se.p=2,H.T=null;try{for(var w=n.onRecoverableError,D=0;D<h.length;D++){var K=h[D];w(K.value,{componentStack:K.stack})}}finally{H.T=i,se.p=g}}(yl&3)!==0&&n1(),Vo(n),g=n.pendingLanes,(l&261930)!==0&&(g&42)!==0?n===R0?Sf++:(Sf=0,R0=n):Sf=0,Nf(0)}}function o5(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Kc(i)))}function n1(){return s5(),i5(),a5(),l5()}function l5(){if(As!==5)return!1;var n=ac,i=O0;O0=0;var l=fn(yl),h=H.T,g=se.p;try{se.p=32>l?32:l,H.T=null,l=D0,D0=null;var w=ac,D=yl;if(As=0,oh=ac=null,yl=0,(Wn&6)!==0)throw Error(s(331));var K=Wn;if(Wn|=4,Ub(w.current),zb(w,w.current,D,l),Wn=K,Nf(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Vt,w)}catch{}return!0}finally{se.p=g,H.T=h,o5(n,i)}}function c5(n,i,l){i=ki(l,i),i=d0(n.stateNode,i,2),n=hn(n,i,2),n!==null&&(lt(n,2),Vo(n))}function Qn(n,i,l){if(n.tag===3)c5(n,n,l);else for(;i!==null;){if(i.tag===3){c5(i,n,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ic===null||!ic.has(h))){n=ki(l,n),l=ub(2),h=hn(i,l,2),h!==null&&(hb(l,h,i,n),lt(h,2),Vo(h));break}}i=i.return}}function V0(n,i,l){var h=n.pingCache;if(h===null){h=n.pingCache=new O4;var g=new Set;h.set(i,g)}else g=h.get(i),g===void 0&&(g=new Set,h.set(i,g));g.has(l)||(E0=!0,g.add(l),n=V4.bind(null,n,i,l),i.then(n,n))}function V4(n,i,l){var h=n.pingCache;h!==null&&h.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,fr===n&&(jn&l)===l&&($r===4||$r===3&&(jn&62914560)===jn&&300>Fe()-Zd?(Wn&2)===0&&lh(n,0):M0|=l,ah===jn&&(ah=0)),Vo(n)}function u5(n,i){i===0&&(i=ht()),n=Za(n,i),n!==null&&(lt(n,i),Vo(n))}function B4(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),u5(n,l)}function z4(n,i){var l=0;switch(n.tag){case 31:case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(i),u5(n,l)}function P4(n,i){return it(n,i)}var r1=null,uh=null,B0=!1,s1=!1,z0=!1,lc=0;function Vo(n){n!==uh&&n.next===null&&(uh===null?r1=uh=n:uh=uh.next=n),s1=!0,B0||(B0=!0,U4())}function Nf(n,i){if(!z0&&s1){z0=!0;do for(var l=!1,h=r1;h!==null;){if(n!==0){var g=h.pendingLanes;if(g===0)var w=0;else{var D=h.suspendedLanes,K=h.pingedLanes;w=(1<<31-Tt(42|n)+1)-1,w&=g&~(D&~K),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,p5(h,w))}else w=jn,w=le(h,h===fr?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Pe(h,w)||(l=!0,p5(h,w));h=h.next}while(l);z0=!1}}function q4(){h5()}function h5(){s1=B0=!1;var n=0;lc!==0&&J4()&&(n=lc);for(var i=Fe(),l=null,h=r1;h!==null;){var g=h.next,w=f5(h,i);w===0?(h.next=null,l===null?r1=g:l.next=g,g===null&&(uh=l)):(l=h,(n!==0||(w&3)!==0)&&(s1=!0)),h=g}As!==0&&As!==5||Nf(n),lc!==0&&(lc=0)}function f5(n,i){for(var l=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var D=31-Tt(w),K=1<<D,be=g[D];be===-1?((K&l)===0||(K&h)!==0)&&(g[D]=Qe(K,i)):be<=i&&(n.expiredLanes|=K),w&=~K}if(i=fr,l=jn,l=le(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,l===0||n===i&&(Zn===2||Zn===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&We(h),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Pe(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(h!==null&&We(h),fn(l)){case 2:case 8:l=ct;break;case 32:l=yt;break;case 268435456:l=bt;break;default:l=yt}return h=d5.bind(null,n),l=it(l,h),n.callbackPriority=i,n.callbackNode=l,i}return h!==null&&h!==null&&We(h),n.callbackPriority=2,n.callbackNode=null,2}function d5(n,i){if(As!==0&&As!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(n1()&&n.callbackNode!==l)return null;var h=jn;return h=le(n,n===fr?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:($b(n,h,i),f5(n,Fe()),n.callbackNode!=null&&n.callbackNode===l?d5.bind(null,n):null)}function p5(n,i){if(n1())return null;$b(n,i,!0)}function U4(){t_(function(){(Wn&6)!==0?it(Ke,q4):h5()})}function P0(){if(lc===0){var n=m;n===0&&(n=Ft,Ft<<=1,(Ft&261888)===0&&(Ft=256)),lc=n}return lc}function m5(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ks(""+n)}function g5(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function H4(n,i,l,h,g){if(i==="submit"&&l&&l.stateNode===g){var w=m5((g[Bn]||null).action),D=h.submitter;D&&(i=(i=D[Bn]||null)?m5(i.formAction):D.getAttribute("formAction"),i!==null&&(w=i,D=null));var K=new Ni("action","action",null,h,g);n.push({event:K,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(lc!==0){var be=D?g5(g,D):new FormData(g);o0(l,{pending:!0,data:be,method:g.method,action:w},null,be)}}else typeof w=="function"&&(K.preventDefault(),be=D?g5(g,D):new FormData(g),o0(l,{pending:!0,data:be,method:g.method,action:w},w,be))},currentTarget:g}]})}}for(var q0=0;q0<sl.length;q0++){var U0=sl[q0],G4=U0.toLowerCase(),W4=U0[0].toUpperCase()+U0.slice(1);Ci(G4,"on"+W4)}Ci(rl,"onAnimationEnd"),Ci(Hc,"onAnimationIteration"),Ci(Kh,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(jd,"onTransitionRun"),Ci(Ed,"onTransitionStart"),Ci(Md,"onTransitionCancel"),Ci(Jh,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Af));function b5(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],g=h.event;h=h.listeners;e:{var w=void 0;if(i)for(var D=h.length-1;0<=D;D--){var K=h[D],be=K.instance,Le=K.currentTarget;if(K=K.listener,be!==w&&g.isPropagationStopped())break e;w=K,g.currentTarget=Le;try{w(g)}catch(qe){Gc(qe)}g.currentTarget=null,w=be}else for(D=0;D<h.length;D++){if(K=h[D],be=K.instance,Le=K.currentTarget,K=K.listener,be!==w&&g.isPropagationStopped())break e;w=K,g.currentTarget=Le;try{w(g)}catch(qe){Gc(qe)}g.currentTarget=null,w=be}}}}function An(n,i){var l=i[sn];l===void 0&&(l=i[sn]=new Set);var h=n+"__bubble";l.has(h)||(v5(i,n,2,!1),l.add(h))}function H0(n,i,l){var h=0;i&&(h|=4),v5(l,n,h,i)}var i1="_reactListening"+Math.random().toString(36).slice(2);function G0(n){if(!n[i1]){n[i1]=!0,li.forEach(function(l){l!=="selectionchange"&&(Y4.has(l)||H0(l,!1,n),H0(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[i1]||(i[i1]=!0,H0("selectionchange",!1,i))}}function v5(n,i,l,h){switch(Y5(i)){case 2:var g=w_;break;case 8:g=__;break;default:g=am}l=g.bind(null,i,l,n),g=void 0,!Bc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(i,l,{capture:!0,passive:g}):n.addEventListener(i,l,!0):g!==void 0?n.addEventListener(i,l,{passive:g}):n.addEventListener(i,l,!1)}function W0(n,i,l,h,g){var w=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var D=h.tag;if(D===3||D===4){var K=h.stateNode.containerInfo;if(K===g)break;if(D===4)for(D=h.return;D!==null;){var be=D.tag;if((be===3||be===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;K!==null;){if(D=Bt(K),D===null)return;if(be=D.tag,be===5||be===6||be===26||be===27){h=w=D;continue e}K=K.parentNode}}h=h.return}Mu(function(){var Le=w,qe=Zo(l),Xe=[];e:{var Oe=ef.get(n);if(Oe!==void 0){var Ie=Ni,jt=n;switch(n){case"keypress":if(Si(l)===0)break e;case"keydown":case"keyup":Ie=Ln;break;case"focusin":jt="focus",Ie=Ba;break;case"focusout":jt="blur",Ie=Ba;break;case"beforeblur":case"afterblur":Ie=Ba;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Va;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Jr;break;case rl:case Hc:case Kh:Ie=S;break;case Jh:Ie=vs;break;case"scroll":case"scrollend":Ie=Vl;break;case"wheel":Ie=Zi;break;case"copy":case"cut":case"paste":Ie=de;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Ir;break;case"toggle":case"beforetoggle":Ie=Pc}var Gt=(i&4)!==0,ir=!Gt&&(n==="scroll"||n==="scrollend"),Ce=Gt?Oe!==null?Oe+"Capture":null:Oe;Gt=[];for(var xe=Le,Ee;xe!==null;){var Ye=xe;if(Ee=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Ee===null||Ce===null||(Ye=hi(xe,Ce),Ye!=null&&Gt.push(Cf(xe,Ye,Ee))),ir)break;xe=xe.return}0<Gt.length&&(Oe=new Ie(Oe,jt,null,l,qe),Xe.push({event:Oe,listeners:Gt}))}}if((i&7)===0){e:{if(Oe=n==="mouseover"||n==="pointerover",Ie=n==="mouseout"||n==="pointerout",Oe&&l!==Oa&&(jt=l.relatedTarget||l.fromElement)&&(Bt(jt)||jt[dn]))break e;if((Ie||Oe)&&(Oe=qe.window===qe?qe:(Oe=qe.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Ie?(jt=l.relatedTarget||l.toElement,Ie=Le,jt=jt?Bt(jt):null,jt!==null&&(ir=o(jt),Gt=jt.tag,jt!==ir||Gt!==5&&Gt!==27&&Gt!==6)&&(jt=null)):(Ie=null,jt=Le),Ie!==jt)){if(Gt=zc,Ye="onMouseLeave",Ce="onMouseEnter",xe="mouse",(n==="pointerout"||n==="pointerover")&&(Gt=Ir,Ye="onPointerLeave",Ce="onPointerEnter",xe="pointer"),ir=Ie==null?Oe:Jn(Ie),Ee=jt==null?Oe:Jn(jt),Oe=new Gt(Ye,xe+"leave",Ie,l,qe),Oe.target=ir,Oe.relatedTarget=Ee,Ye=null,Bt(qe)===Le&&(Gt=new Gt(Ce,xe+"enter",jt,l,qe),Gt.target=Ee,Gt.relatedTarget=ir,Ye=Gt),ir=Ye,Ie&&jt)t:{for(Gt=$4,Ce=Ie,xe=jt,Ee=0,Ye=Ce;Ye;Ye=Gt(Ye))Ee++;Ye=0;for(var qt=xe;qt;qt=Gt(qt))Ye++;for(;0<Ee-Ye;)Ce=Gt(Ce),Ee--;for(;0<Ye-Ee;)xe=Gt(xe),Ye--;for(;Ee--;){if(Ce===xe||xe!==null&&Ce===xe.alternate){Gt=Ce;break t}Ce=Gt(Ce),xe=Gt(xe)}Gt=null}else Gt=null;Ie!==null&&y5(Xe,Oe,Ie,Gt,!1),jt!==null&&ir!==null&&y5(Xe,ir,jt,Gt,!0)}}e:{if(Oe=Le?Jn(Le):window,Ie=Oe.nodeName&&Oe.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&Oe.type==="file")var qn=Ao;else if(qc(Oe))if(Js)qn=va;else{qn=Fr;var Rt=Ul}else Ie=Oe.nodeName,!Ie||Ie.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Le&&Ic(Le.elementType)&&(qn=Ao):qn=Ru;if(qn&&(qn=qn(n,Le))){di(Xe,qn,l,qe);break e}Rt&&Rt(n,Oe,Le),n==="focusout"&&Le&&Oe.type==="number"&&Le.memoizedProps.value!=null&&Oc(Oe,"number",Oe.value)}switch(Rt=Le?Jn(Le):window,n){case"focusin":(qc(Rt)||Rt.contentEditable==="true")&&(pi=Rt,Xa=Le,Es=null);break;case"focusout":Es=Xa=pi=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,zn(Xe,l,qe);break;case"selectionchange":if(nl)break;case"keydown":case"keyup":zn(Xe,l,qe)}var bn;if(pa)e:{switch(n){case"compositionstart":var En="onCompositionStart";break e;case"compositionend":En="onCompositionEnd";break e;case"compositionupdate":En="onCompositionUpdate";break e}En=void 0}else ma?No(n,l)&&(En="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(En="onCompositionStart");En&&(qa&&l.locale!=="ko"&&(ma||En!=="onCompositionStart"?En==="onCompositionEnd"&&ma&&(bn=Lu()):(fi=qe,Ko="value"in fi?fi.value:fi.textContent,ma=!0)),Rt=a1(Le,En),0<Rt.length&&(En=new Ae(En,n,null,l,qe),Xe.push({event:En,listeners:Rt}),bn?En.data=bn:(bn=zl(l),bn!==null&&(En.data=bn)))),(bn=tl?qs(n,l):Ua(n,l))&&(En=a1(Le,"onBeforeInput"),0<En.length&&(Rt=new Ae("onBeforeInput","beforeinput",null,l,qe),Xe.push({event:Rt,listeners:En}),Rt.data=bn)),H4(Xe,n,Le,l,qe)}b5(Xe,i)})}function Cf(n,i,l){return{instance:n,listener:i,currentTarget:l}}function a1(n,i){for(var l=i+"Capture",h=[];n!==null;){var g=n,w=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||w===null||(g=hi(n,l),g!=null&&h.unshift(Cf(n,g,w)),g=hi(n,i),g!=null&&h.push(Cf(n,g,w))),n.tag===3)return h;n=n.return}return[]}function $4(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function y5(n,i,l,h,g){for(var w=i._reactName,D=[];l!==null&&l!==h;){var K=l,be=K.alternate,Le=K.stateNode;if(K=K.tag,be!==null&&be===h)break;K!==5&&K!==26&&K!==27||Le===null||(be=Le,g?(Le=hi(l,w),Le!=null&&D.unshift(Cf(l,Le,be))):g||(Le=hi(l,w),Le!=null&&D.push(Cf(l,Le,be)))),l=l.return}D.length!==0&&n.push({event:i,listeners:D})}var X4=/\r\n?/g,Z4=/\u0000|\uFFFD/g;function x5(n){return(typeof n=="string"?n:""+n).replace(X4,`
`).replace(Z4,"")}function w5(n,i){return i=x5(i),x5(n)===i}function sr(n,i,l,h,g,w){switch(l){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||$i(n,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&$i(n,""+h);break;case"className":ha(n,"class",h);break;case"tabIndex":ha(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ha(n,l,h);break;case"style":ku(n,h,w);break;case"data":if(i!=="object"){ha(n,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(l);break}h=Ks(""+h),n.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(i!=="input"&&sr(n,i,"name",g.name,g,null),sr(n,i,"formEncType",g.formEncType,g,null),sr(n,i,"formMethod",g.formMethod,g,null),sr(n,i,"formTarget",g.formTarget,g,null)):(sr(n,i,"encType",g.encType,g,null),sr(n,i,"method",g.method,g,null),sr(n,i,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(l);break}h=Ks(""+h),n.setAttribute(l,h);break;case"onClick":h!=null&&(n.onclick=Xi);break;case"onScroll":h!=null&&An("scroll",n);break;case"onScrollEnd":h!=null&&An("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}l=Ks(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(l,""+h):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":h===!0?n.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(l,h):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(l,h):n.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(l):n.setAttribute(l,h);break;case"popover":An("beforetoggle",n),An("toggle",n),js(n,"popover",h);break;case"xlinkActuate":Qs(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Qs(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Qs(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Qs(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Qs(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Qs(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Qs(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Qs(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Qs(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":js(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Fc.get(l)||l,js(n,l,h))}}function Y0(n,i,l,h,g,w){switch(l){case"style":ku(n,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof h=="string"?$i(n,h):(typeof h=="number"||typeof h=="bigint")&&$i(n,""+h);break;case"onScroll":h!=null&&An("scroll",n);break;case"onScrollEnd":h!=null&&An("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),w=n[Bn]||null,w=w!=null?w[l]:null,typeof w=="function"&&n.removeEventListener(i,w,g),typeof h=="function")){typeof w!="function"&&w!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,h,g);break e}l in n?n[l]=h:h===!0?n.setAttribute(l,""):js(n,l,h)}}}function Ys(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":An("error",n),An("load",n);var h=!1,g=!1,w;for(w in l)if(l.hasOwnProperty(w)){var D=l[w];if(D!=null)switch(w){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:sr(n,i,w,D,l,null)}}g&&sr(n,i,"srcSet",l.srcSet,l,null),h&&sr(n,i,"src",l.src,l,null);return;case"input":An("invalid",n);var K=w=D=g=null,be=null,Le=null;for(h in l)if(l.hasOwnProperty(h)){var qe=l[h];if(qe!=null)switch(h){case"name":g=qe;break;case"type":D=qe;break;case"checked":be=qe;break;case"defaultChecked":Le=qe;break;case"value":w=qe;break;case"defaultValue":K=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(s(137,i));break;default:sr(n,i,h,qe,l,null)}}Rl(n,w,K,be,Le,D,g,!1);return;case"select":An("invalid",n),h=D=w=null;for(g in l)if(l.hasOwnProperty(g)&&(K=l[g],K!=null))switch(g){case"value":w=K;break;case"defaultValue":D=K;break;case"multiple":h=K;default:sr(n,i,g,K,l,null)}i=w,l=D,n.multiple=!!h,i!=null?Ps(n,!!h,i,!1):l!=null&&Ps(n,!!h,l,!0);return;case"textarea":An("invalid",n),w=g=h=null;for(D in l)if(l.hasOwnProperty(D)&&(K=l[D],K!=null))switch(D){case"value":h=K;break;case"defaultValue":g=K;break;case"children":w=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(91));break;default:sr(n,i,D,K,l,null)}Rc(n,h,g,w);return;case"option":for(be in l)if(l.hasOwnProperty(be)&&(h=l[be],h!=null))switch(be){case"selected":n.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:sr(n,i,be,h,l,null)}return;case"dialog":An("beforetoggle",n),An("toggle",n),An("cancel",n),An("close",n);break;case"iframe":case"object":An("load",n);break;case"video":case"audio":for(h=0;h<Af.length;h++)An(Af[h],n);break;case"image":An("error",n),An("load",n);break;case"details":An("toggle",n);break;case"embed":case"source":case"link":An("error",n),An("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in l)if(l.hasOwnProperty(Le)&&(h=l[Le],h!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:sr(n,i,Le,h,l,null)}return;default:if(Ic(i)){for(qe in l)l.hasOwnProperty(qe)&&(h=l[qe],h!==void 0&&Y0(n,i,qe,h,l,void 0));return}}for(K in l)l.hasOwnProperty(K)&&(h=l[K],h!=null&&sr(n,i,K,h,l,null))}function Q4(n,i,l,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,w=null,D=null,K=null,be=null,Le=null,qe=null;for(Ie in l){var Xe=l[Ie];if(l.hasOwnProperty(Ie)&&Xe!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":be=Xe;default:h.hasOwnProperty(Ie)||sr(n,i,Ie,null,h,Xe)}}for(var Oe in h){var Ie=h[Oe];if(Xe=l[Oe],h.hasOwnProperty(Oe)&&(Ie!=null||Xe!=null))switch(Oe){case"type":w=Ie;break;case"name":g=Ie;break;case"checked":Le=Ie;break;case"defaultChecked":qe=Ie;break;case"value":D=Ie;break;case"defaultValue":K=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(s(137,i));break;default:Ie!==Xe&&sr(n,i,Oe,Ie,h,Xe)}}wo(n,D,K,be,Le,qe,w,g);return;case"select":Ie=D=K=Oe=null;for(w in l)if(be=l[w],l.hasOwnProperty(w)&&be!=null)switch(w){case"value":break;case"multiple":Ie=be;default:h.hasOwnProperty(w)||sr(n,i,w,null,h,be)}for(g in h)if(w=h[g],be=l[g],h.hasOwnProperty(g)&&(w!=null||be!=null))switch(g){case"value":Oe=w;break;case"defaultValue":K=w;break;case"multiple":D=w;default:w!==be&&sr(n,i,g,w,h,be)}i=K,l=D,h=Ie,Oe!=null?Ps(n,!!l,Oe,!1):!!h!=!!l&&(i!=null?Ps(n,!!l,i,!0):Ps(n,!!l,l?[]:"",!1));return;case"textarea":Ie=Oe=null;for(K in l)if(g=l[K],l.hasOwnProperty(K)&&g!=null&&!h.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:sr(n,i,K,null,h,g)}for(D in h)if(g=h[D],w=l[D],h.hasOwnProperty(D)&&(g!=null||w!=null))switch(D){case"value":Oe=g;break;case"defaultValue":Ie=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==w&&sr(n,i,D,g,h,w)}Dc(n,Oe,Ie);return;case"option":for(var jt in l)if(Oe=l[jt],l.hasOwnProperty(jt)&&Oe!=null&&!h.hasOwnProperty(jt))switch(jt){case"selected":n.selected=!1;break;default:sr(n,i,jt,null,h,Oe)}for(be in h)if(Oe=h[be],Ie=l[be],h.hasOwnProperty(be)&&Oe!==Ie&&(Oe!=null||Ie!=null))switch(be){case"selected":n.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:sr(n,i,be,Oe,h,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in l)Oe=l[Gt],l.hasOwnProperty(Gt)&&Oe!=null&&!h.hasOwnProperty(Gt)&&sr(n,i,Gt,null,h,Oe);for(Le in h)if(Oe=h[Le],Ie=l[Le],h.hasOwnProperty(Le)&&Oe!==Ie&&(Oe!=null||Ie!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(s(137,i));break;default:sr(n,i,Le,Oe,h,Ie)}return;default:if(Ic(i)){for(var ir in l)Oe=l[ir],l.hasOwnProperty(ir)&&Oe!==void 0&&!h.hasOwnProperty(ir)&&Y0(n,i,ir,void 0,h,Oe);for(qe in h)Oe=h[qe],Ie=l[qe],!h.hasOwnProperty(qe)||Oe===Ie||Oe===void 0&&Ie===void 0||Y0(n,i,qe,Oe,h,Ie);return}}for(var Ce in l)Oe=l[Ce],l.hasOwnProperty(Ce)&&Oe!=null&&!h.hasOwnProperty(Ce)&&sr(n,i,Ce,null,h,Oe);for(Xe in h)Oe=h[Xe],Ie=l[Xe],!h.hasOwnProperty(Xe)||Oe===Ie||Oe==null&&Ie==null||sr(n,i,Xe,Oe,h,Ie)}function _5(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function K4(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var g=l[h],w=g.transferSize,D=g.initiatorType,K=g.duration;if(w&&K&&_5(D)){for(D=0,K=g.responseEnd,h+=1;h<l.length;h++){var be=l[h],Le=be.startTime;if(Le>K)break;var qe=be.transferSize,Xe=be.initiatorType;qe&&_5(Xe)&&(be=be.responseEnd,D+=qe*(be<K?1:(K-Le)/(be-Le)))}if(--h,i+=8*(w+D)/(g.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var $0=null,X0=null;function o1(n){return n.nodeType===9?n:n.ownerDocument}function S5(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N5(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Z0(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Q0=null;function J4(){var n=window.event;return n&&n.type==="popstate"?n===Q0?!1:(Q0=n,!0):(Q0=null,!1)}var A5=typeof setTimeout=="function"?setTimeout:void 0,e_=typeof clearTimeout=="function"?clearTimeout:void 0,C5=typeof Promise=="function"?Promise:void 0,t_=typeof queueMicrotask=="function"?queueMicrotask:typeof C5<"u"?function(n){return C5.resolve(null).then(n).catch(n_)}:A5;function n_(n){setTimeout(function(){throw n})}function cc(n){return n==="head"}function T5(n,i){var l=i,h=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(h===0){n.removeChild(g),ph(i);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Tf(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Tf(l);for(var w=l.firstChild;w;){var D=w.nextSibling,K=w.nodeName;w[gt]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=D}}else l==="body"&&Tf(n.ownerDocument.body);l=g}while(l);ph(i)}function k5(n,i){var l=n;n=0;do{var h=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=h}while(l)}function K0(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":K0(l),$t(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function r_(n,i,l,h){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[gt])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var w=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=Aa(n.nextSibling),n===null)break}return null}function s_(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Aa(n.nextSibling),n===null))return null;return n}function j5(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Aa(n.nextSibling),n===null))return null;return n}function J0(n){return n.data==="$?"||n.data==="$~"}function em(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function i_(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var h=function(){i(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function Aa(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var tm=null;function E5(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Aa(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function M5(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function L5(n,i,l){switch(i=o1(l),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Tf(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);$t(n)}var Ca=new Map,O5=new Set;function l1(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var xl=se.d;se.d={f:a_,r:o_,D:l_,C:c_,L:u_,m:h_,X:d_,S:f_,M:p_};function a_(){var n=xl.f(),i=Jd();return n||i}function o_(n){var i=wn(n);i!==null&&i.tag===5&&i.type==="form"?Z2(i):xl.r(n)}var hh=typeof document>"u"?null:document;function D5(n,i,l){var h=hh;if(h&&typeof i=="string"&&i){var g=Cr(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),O5.has(g)||(O5.add(g),n={rel:n,crossOrigin:l,href:i},h.querySelector(g)===null&&(i=h.createElement("link"),Ys(i,"link",n),Tn(i),h.head.appendChild(i)))}}function l_(n){xl.D(n),D5("dns-prefetch",n,null)}function c_(n,i){xl.C(n,i),D5("preconnect",n,i)}function u_(n,i,l){xl.L(n,i,l);var h=hh;if(h&&n&&i){var g='link[rel="preload"][as="'+Cr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Cr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Cr(l.imageSizes)+'"]')):g+='[href="'+Cr(n)+'"]';var w=g;switch(i){case"style":w=fh(n);break;case"script":w=dh(n)}Ca.has(w)||(n=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Ca.set(w,n),h.querySelector(g)!==null||i==="style"&&h.querySelector(kf(w))||i==="script"&&h.querySelector(jf(w))||(i=h.createElement("link"),Ys(i,"link",n),Tn(i),h.head.appendChild(i)))}}function h_(n,i){xl.m(n,i);var l=hh;if(l&&n){var h=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Cr(h)+'"][href="'+Cr(n)+'"]',w=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=dh(n)}if(!Ca.has(w)&&(n=y({rel:"modulepreload",href:n},i),Ca.set(w,n),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(jf(w)))return}h=l.createElement("link"),Ys(h,"link",n),Tn(h),l.head.appendChild(h)}}}function f_(n,i,l){xl.S(n,i,l);var h=hh;if(h&&n){var g=cr(h).hoistableStyles,w=fh(n);i=i||"default";var D=g.get(w);if(!D){var K={loading:0,preload:null};if(D=h.querySelector(kf(w)))K.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Ca.get(w))&&nm(n,l);var be=D=h.createElement("link");Tn(be),Ys(be,"link",n),be._p=new Promise(function(Le,qe){be.onload=Le,be.onerror=qe}),be.addEventListener("load",function(){K.loading|=1}),be.addEventListener("error",function(){K.loading|=2}),K.loading|=4,c1(D,i,h)}D={type:"stylesheet",instance:D,count:1,state:K},g.set(w,D)}}}function d_(n,i){xl.X(n,i);var l=hh;if(l&&n){var h=cr(l).hoistableScripts,g=dh(n),w=h.get(g);w||(w=l.querySelector(jf(g)),w||(n=y({src:n,async:!0},i),(i=Ca.get(g))&&rm(n,i),w=l.createElement("script"),Tn(w),Ys(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(g,w))}}function p_(n,i){xl.M(n,i);var l=hh;if(l&&n){var h=cr(l).hoistableScripts,g=dh(n),w=h.get(g);w||(w=l.querySelector(jf(g)),w||(n=y({src:n,async:!0,type:"module"},i),(i=Ca.get(g))&&rm(n,i),w=l.createElement("script"),Tn(w),Ys(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(g,w))}}function R5(n,i,l,h){var g=(g=ce.current)?l1(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=fh(l.href),l=cr(g).hoistableStyles,h=l.get(i),h||(h={type:"style",instance:null,count:0,state:null},l.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=fh(l.href);var w=cr(g).hoistableStyles,D=w.get(n);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,D),(w=g.querySelector(kf(n)))&&!w._p&&(D.instance=w,D.state.loading=5),Ca.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ca.set(n,l),w||m_(g,n,l,D.state))),i&&h===null)throw Error(s(528,""));return D}if(i&&h!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=dh(l),l=cr(g).hoistableScripts,h=l.get(i),h||(h={type:"script",instance:null,count:0,state:null},l.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function fh(n){return'href="'+Cr(n)+'"'}function kf(n){return'link[rel="stylesheet"]['+n+"]"}function I5(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function m_(n,i,l,h){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=n.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Ys(i,"link",l),Tn(i),n.head.appendChild(i))}function dh(n){return'[src="'+Cr(n)+'"]'}function jf(n){return"script[async]"+n}function F5(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var h=n.querySelector('style[data-href~="'+Cr(l.href)+'"]');if(h)return i.instance=h,Tn(h),h;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),Tn(h),Ys(h,"style",g),c1(h,l.precedence,n),i.instance=h;case"stylesheet":g=fh(l.href);var w=n.querySelector(kf(g));if(w)return i.state.loading|=4,i.instance=w,Tn(w),w;h=I5(l),(g=Ca.get(g))&&nm(h,g),w=(n.ownerDocument||n).createElement("link"),Tn(w);var D=w;return D._p=new Promise(function(K,be){D.onload=K,D.onerror=be}),Ys(w,"link",h),i.state.loading|=4,c1(w,l.precedence,n),i.instance=w;case"script":return w=dh(l.src),(g=n.querySelector(jf(w)))?(i.instance=g,Tn(g),g):(h=l,(g=Ca.get(w))&&(h=y({},l),rm(h,g)),n=n.ownerDocument||n,g=n.createElement("script"),Tn(g),Ys(g,"link",h),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,c1(h,l.precedence,n));return i.instance}function c1(n,i,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,w=g,D=0;D<h.length;D++){var K=h[D];if(K.dataset.precedence===i)w=K;else if(w!==g)break}w?w.parentNode.insertBefore(n,w.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function nm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var u1=null;function V5(n,i,l){if(u1===null){var h=new Map,g=u1=new Map;g.set(l,h)}else g=u1,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(n))return h;for(h.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var w=l[g];if(!(w[gt]||w[vn]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(i)||"";D=n+D;var K=h.get(D);K?K.push(w):h.set(D,[w])}}return h}function B5(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function g_(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function z5(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function b_(n,i,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=fh(h.href),w=i.querySelector(kf(g));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=h1.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=w,Tn(w);return}w=i.ownerDocument||i,h=I5(h),(g=Ca.get(g))&&nm(h,g),w=w.createElement("link"),Tn(w);var D=w;D._p=new Promise(function(K,be){D.onload=K,D.onerror=be}),Ys(w,"link",h),l.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=h1.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var sm=0;function v_(n,i){return n.stylesheets&&n.count===0&&d1(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var h=setTimeout(function(){if(n.stylesheets&&d1(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+i);0<n.imgBytes&&sm===0&&(sm=62500*K4());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&d1(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>sm?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function h1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)d1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var f1=null;function d1(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,f1=new Map,i.forEach(y_,n),f1=null,h1.call(n))}function y_(n,i){if(!(i.state.loading&4)){var l=f1.get(n);if(l)var h=l.get(null);else{l=new Map,f1.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<g.length;w++){var D=g[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(l.set(D.dataset.precedence,D),h=D)}h&&l.set(null,h)}g=i.instance,D=g.getAttribute("data-precedence"),w=l.get(D)||h,w===h&&l.set(null,g),l.set(D,g),this.count++,h=h1.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),w?w.parentNode.insertBefore(g,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var Ef={$$typeof:O,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function x_(n,i,l,h,g,w,D,K,be){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wt(0),this.hiddenUpdates=wt(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function P5(n,i,l,h,g,w,D,K,be,Le,qe,Xe){return n=new x_(n,i,l,D,be,Le,qe,Xe,K),i=1,w===!0&&(i|=24),w=Ls(3,null,null,i),n.current=w,w.stateNode=n,i=Ql(),i.refCount++,n.pooledCache=i,i.refCount++,w.memoizedState={element:h,isDehydrated:l,cache:i},pt(w),n}function q5(n){return n?(n=xs,n):xs}function U5(n,i,l,h,g,w){g=q5(g),h.context===null?h.context=g:h.pendingContext=g,h=Ht(i),h.payload={element:l},w=w===void 0?null:w,w!==null&&(h.callback=w),l=hn(n,h,i),l!==null&&(Bi(l,n,i),Hn(l,n,i))}function H5(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function im(n,i){H5(n,i),(n=n.alternate)&&H5(n,i)}function G5(n){if(n.tag===13||n.tag===31){var i=Za(n,67108864);i!==null&&Bi(i,n,67108864),im(n,67108864)}}function W5(n){if(n.tag===13||n.tag===31){var i=sa();i=Kt(i);var l=Za(n,i);l!==null&&Bi(l,n,i),im(n,i)}}var p1=!0;function w_(n,i,l,h){var g=H.T;H.T=null;var w=se.p;try{se.p=2,am(n,i,l,h)}finally{se.p=w,H.T=g}}function __(n,i,l,h){var g=H.T;H.T=null;var w=se.p;try{se.p=8,am(n,i,l,h)}finally{se.p=w,H.T=g}}function am(n,i,l,h){if(p1){var g=om(h);if(g===null)W0(n,i,h,m1,l),$5(n,h);else if(N_(g,n,i,l,h))h.stopPropagation();else if($5(n,h),i&4&&-1<S_.indexOf(n)){for(;g!==null;){var w=wn(g);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=ft(w.pendingLanes);if(D!==0){var K=w;for(K.pendingLanes|=2,K.entangledLanes|=2;D;){var be=1<<31-Tt(D);K.entanglements[1]|=be,D&=~be}Vo(w),(Wn&6)===0&&(Qd=Fe()+500,Nf(0))}}break;case 31:case 13:K=Za(w,2),K!==null&&Bi(K,w,2),Jd(),im(w,2)}if(w=om(h),w===null&&W0(n,i,h,m1,l),w===g)break;g=w}g!==null&&h.stopPropagation()}else W0(n,i,h,null,l)}}function om(n){return n=Zo(n),lm(n)}var m1=null;function lm(n){if(m1=null,n=Bt(n),n!==null){var i=o(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=u(i),n!==null)return n;n=null}else if(l===31){if(n=c(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return m1=n,null}function Y5(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case Ke:return 2;case ct:return 8;case yt:case mt:return 32;case bt:return 268435456;default:return 32}default:return 32}}var cm=!1,uc=null,hc=null,fc=null,Mf=new Map,Lf=new Map,dc=[],S_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $5(n,i){switch(n){case"focusin":case"focusout":uc=null;break;case"dragenter":case"dragleave":hc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":Mf.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lf.delete(i.pointerId)}}function Of(n,i,l,h,g,w){return n===null||n.nativeEvent!==w?(n={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:w,targetContainers:[g]},i!==null&&(i=wn(i),i!==null&&G5(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function N_(n,i,l,h,g){switch(i){case"focusin":return uc=Of(uc,n,i,l,h,g),!0;case"dragenter":return hc=Of(hc,n,i,l,h,g),!0;case"mouseover":return fc=Of(fc,n,i,l,h,g),!0;case"pointerover":var w=g.pointerId;return Mf.set(w,Of(Mf.get(w)||null,n,i,l,h,g)),!0;case"gotpointercapture":return w=g.pointerId,Lf.set(w,Of(Lf.get(w)||null,n,i,l,h,g)),!0}return!1}function X5(n){var i=Bt(n.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){n.blockedOn=i,$n(n.priority,function(){W5(l)});return}}else if(i===31){if(i=c(l),i!==null){n.blockedOn=i,$n(n.priority,function(){W5(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function g1(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=om(n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Oa=h,l.target.dispatchEvent(h),Oa=null}else return i=wn(l),i!==null&&G5(i),n.blockedOn=l,!1;i.shift()}return!0}function Z5(n,i,l){g1(n)&&l.delete(i)}function A_(){cm=!1,uc!==null&&g1(uc)&&(uc=null),hc!==null&&g1(hc)&&(hc=null),fc!==null&&g1(fc)&&(fc=null),Mf.forEach(Z5),Lf.forEach(Z5)}function b1(n,i){n.blockedOn===i&&(n.blockedOn=null,cm||(cm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,A_)))}var v1=null;function Q5(n){v1!==n&&(v1=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){v1===n&&(v1=null);for(var i=0;i<n.length;i+=3){var l=n[i],h=n[i+1],g=n[i+2];if(typeof h!="function"){if(lm(h||l)===null)continue;break}var w=wn(l);w!==null&&(n.splice(i,3),i-=3,o0(w,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function ph(n){function i(be){return b1(be,n)}uc!==null&&b1(uc,n),hc!==null&&b1(hc,n),fc!==null&&b1(fc,n),Mf.forEach(i),Lf.forEach(i);for(var l=0;l<dc.length;l++){var h=dc[l];h.blockedOn===n&&(h.blockedOn=null)}for(;0<dc.length&&(l=dc[0],l.blockedOn===null);)X5(l),l.blockedOn===null&&dc.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],w=l[h+1],D=g[Bn]||null;if(typeof w=="function")D||Q5(l);else if(D){var K=null;if(w&&w.hasAttribute("formAction")){if(g=w,D=w[Bn]||null)K=D.formAction;else if(lm(g)!==null)continue}else K=D.action;typeof K=="function"?l[h+1]=K:(l.splice(h,3),h-=3),Q5(l)}}}function K5(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(D){return g=D})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function um(n){this._internalRoot=n}y1.prototype.render=um.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,h=sa();U5(l,h,n,i,null,null)},y1.prototype.unmount=um.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;U5(n.current,2,null,n,null,null),Jd(),i[dn]=null}};function y1(n){this._internalRoot=n}y1.prototype.unstable_scheduleHydration=function(n){if(n){var i=Qt();n={blockedOn:null,target:n,priority:i};for(var l=0;l<dc.length&&i!==0&&i<dc[l].priority;l++);dc.splice(l,0,n),l===0&&X5(n)}};var J5=e.version;if(J5!=="19.2.0")throw Error(s(527,J5,"19.2.0"));se.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=d(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var C_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x1.isDisabled&&x1.supportsFiber)try{Vt=x1.inject(C_),Nt=x1}catch{}}return Rf.createRoot=function(n,i){if(!a(n))throw Error(s(299));var l=!1,h="",g=ab,w=ob,D=lb;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(D=i.onRecoverableError)),i=P5(n,1,!1,null,null,l,h,null,g,w,D,K5),n[dn]=i.current,G0(n),new um(i)},Rf.hydrateRoot=function(n,i,l){if(!a(n))throw Error(s(299));var h=!1,g="",w=ab,D=ob,K=lb,be=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(K=l.onRecoverableError),l.formState!==void 0&&(be=l.formState)),i=P5(n,1,!0,i,l??null,h,g,be,w,D,K,K5),i.context=q5(null),l=i.current,h=sa(),h=Kt(h),g=Ht(h),g.callback=null,hn(l,g,h),l=h,i.current.lanes=l,lt(i,l),Vo(i),n[dn]=i.current,G0(n),new y1(i)},Rf.version="19.2.0",Rf}var cv;function I_(){if(cv)return dm.exports;cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dm.exports=R_(),dm.exports}var F_=I_();const uv=r=>{let e;const t=new Set,s=(d,p)=>{const y=typeof d=="function"?d(e):d;if(!Object.is(y,e)){const _=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d))},f=e=r(s,a,c);return c},V_=(r=>r?uv(r):uv),B_=r=>r;function z_(r,e=B_){const t=Yn.useSyncExternalStore(r.subscribe,Yn.useCallback(()=>e(r.getState()),[r,e]),Yn.useCallback(()=>e(r.getInitialState()),[r,e]));return Yn.useDebugValue(t),t}const P_=r=>{const e=V_(r),t=s=>z_(e,s);return Object.assign(t,e),t},q_=(r=>P_);function U_(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var o;const u=f=>f===null?null:JSON.parse(f,void 0),c=(o=t.getItem(a))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const Gm=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return Gm(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Gm(s)(t)}}}},H_=(r,e)=>(t,s,a)=>{let o={storage:U_(()=>localStorage),partialize:A=>A,version:0,merge:(A,k)=>({...k,...A}),...e},u=!1;const c=new Set,f=new Set;let d=o.storage;if(!d)return r((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},s,a);const p=()=>{const A=o.partialize({...s()});return d.setItem(o.name,{state:A,version:o.version})},y=a.setState;a.setState=(A,k)=>(y(A,k),p());const _=r((...A)=>(t(...A),p()),s,a);a.getInitialState=()=>_;let b;const N=()=>{var A,k;if(!d)return;u=!1,c.forEach(R=>{var O;return R((O=s())!=null?O:_)});const T=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(A=s())!=null?A:_))||void 0;return Gm(d.getItem.bind(d))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const O=o.migrate(R.state,R.version);return O instanceof Promise?O.then(V=>[!0,V]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var O;const[V,I]=R;if(b=o.merge(I,(O=s())!=null?O:_),t(b,!0),V)return p()}).then(()=>{T?.(b,void 0),b=s(),u=!0,f.forEach(R=>R(b))}).catch(R=>{T?.(void 0,R)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(d=A.storage)},clearStorage:()=>{d?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>u,onHydrate:A=>(c.add(A),()=>{c.delete(A)}),onFinishHydration:A=>(f.add(A),()=>{f.delete(A)})},o.skipHydration||N(),b||_},G_=H_,Al=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],qf=["C","G","D","A","E","B","F#","Db","Ab","Eb","Bb","F"],W_=[{major:"C",ii:"Dm",iii:"Em",diminished:"B"},{major:"G",ii:"Am",iii:"Bm",diminished:"F#"},{major:"D",ii:"Em",iii:"F#m",diminished:"C#"},{major:"A",ii:"Bm",iii:"C#m",diminished:"G#"},{major:"E",ii:"F#m",iii:"G#m",diminished:"D#"},{major:"B",ii:"C#m",iii:"D#m",diminished:"A#"},{major:"F#",ii:"G#m",iii:"A#m",diminished:"E#"},{major:"Db",ii:"Ebm",iii:"Fm",diminished:"C"},{major:"Ab",ii:"Bbm",iii:"Cm",diminished:"G"},{major:"Eb",ii:"Fm",iii:"Gm",diminished:"D"},{major:"Bb",ii:"Cm",iii:"Dm",diminished:"A"},{major:"F",ii:"Gm",iii:"Am",diminished:"E"}];function Mh(r){return r.includes("b")&&{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E"}[r]||r}const Y_={7:"dominant7",9:"dominant9",11:"dominant11",13:"dominant13",maj7:"major7",maj9:"major9",maj11:"major11",maj13:"major13",6:"major6",add9:"add9",m7:"minor7",m9:"minor9",m11:"minor11",m13:"minor13",m6:"minor6",dim:"diminished",dim7:"diminished7",m7b5:"halfDiminished7","m75":"halfDiminished7",7:"halfDiminished7",sus2:"sus2",sus4:"sus4","7sus4":"dominant7sus4"},$_={major:[0,4,7],minor:[0,3,7],diminished:[0,3,6],augmented:[0,4,8],sus2:[0,2,7],sus4:[0,5,7],major6:[0,4,7,9],minor6:[0,3,7,9],major7:[0,4,7,11],minor7:[0,3,7,10],dominant7:[0,4,7,10],diminished7:[0,3,6,9],halfDiminished7:[0,3,6,10],dominant7sus4:[0,5,7,10],add9:[0,4,7,14],major9:[0,4,7,11,14],minor9:[0,3,7,10,14],dominant9:[0,4,7,10,14],major11:[0,4,7,11,14,17],minor11:[0,3,7,10,14,17],dominant11:[0,4,7,10,14,17],major13:[0,4,7,11,14,21],minor13:[0,3,7,10,14,21],dominant13:[0,4,7,10,14,21]};function ka(r,e){const t=Mh(r),s=Al.indexOf(t);if(s===-1)return[];const a=Y_[e]||e,o=$_[a];return o?o.map(u=>Al[(s+u)%12]):(console.warn(`Unknown chord quality: ${e} (resolved to ${a})`),Al.slice(s,s+1).concat([Al[(s+4)%12],Al[(s+7)%12]]))}function iu(r,e){if(!r||r.length===0)return r;const t=r.length-1,s=Math.max(0,Math.min(e,t));return s===0?r:[...r.slice(s),...r.slice(0,s)]}function X_(r){return Math.max(0,(r?.length||1)-1)}function Z_(r){return["Root","1st","2nd","3rd","4th","5th","6th"][r]||`${r}th`}function hv(r,e,t,s){const o=`${r}${e==="major"||e==="maj"?"":e}`;if(!s||s===0||!t||t.length===0)return o;const u=t[s%t.length];return`${o}/${u}`}function Q_(r){const e=["G","D","A","E","B","F#","C#"],t=["F","Bb","Eb","Ab","Db","Gb","Cb"],s=e.indexOf(r),a=t.indexOf(r);return s>=0?{sharps:s+1,flats:0}:a>=0?{sharps:0,flats:a+1}:{sharps:0,flats:0}}function fd(){return{C:"hsl(48, 95%, 58%)",G:"hsl(72, 75%, 50%)",D:"hsl(95, 65%, 48%)",A:"hsl(160, 60%, 45%)",E:"hsl(185, 70%, 50%)",B:"hsl(205, 75%, 55%)","F#":"hsl(235, 60%, 58%)",Gb:"hsl(235, 60%, 58%)",Db:"hsl(265, 55%, 55%)",Ab:"hsl(285, 50%, 52%)",Eb:"hsl(315, 60%, 55%)",Bb:"hsl(350, 70%, 58%)",F:"hsl(28, 85%, 55%)"}}function K_(r,e){const t=Mh(r),s=Mh(e),a=Al.indexOf(t),o=Al.indexOf(s);if(a===-1||o===-1)return"?";let u=(o-a+12)%12;return{0:"1",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[u]||"?"}function Zr(r){return r&&r.replace(/([A-G])b/g,"$1")}const $s=[];for(let r=0;r<256;++r)$s.push((r+256).toString(16).slice(1));function J_(r,e=0){return($s[r[e+0]]+$s[r[e+1]]+$s[r[e+2]]+$s[r[e+3]]+"-"+$s[r[e+4]]+$s[r[e+5]]+"-"+$s[r[e+6]]+$s[r[e+7]]+"-"+$s[r[e+8]]+$s[r[e+9]]+"-"+$s[r[e+10]]+$s[r[e+11]]+$s[r[e+12]]+$s[r[e+13]]+$s[r[e+14]]+$s[r[e+15]]).toLowerCase()}let bm;const eS=new Uint8Array(16);function tS(){if(!bm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bm=crypto.getRandomValues.bind(crypto)}return bm(eS)}const nS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fv={randomUUID:nS};function rS(r,e,t){r=r||{};const s=r.random??r.rng?.()??tS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,J_(s)}function Is(r,e,t){return fv.randomUUID&&!r?fv.randomUUID():rS(r)}function dv(r){if(r.length===0)return"intro";const e=r.map(o=>o.type),t=e[e.length-1],s=e.slice(-4),a=e.reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{});if(t==="intro")return"verse";if(s.length>=4){const[o,u,c,f]=s;if(o==="verse"&&u==="chorus"&&c==="verse"&&f==="chorus"||o==="chorus"&&u==="verse"&&c==="chorus"&&f==="verse")return"bridge"}if(t==="bridge"||t==="verse")return"chorus";if(t==="chorus"){const o=e.includes("bridge"),u=a.chorus||0;return o&&u>=3?"outro":"verse"}return t==="outro"?"verse":t==="pre-chorus"||t==="interlude"||t==="solo"||t==="breakdown"?"chorus":"verse"}const Fs=[4,4],zf=(r=Fs)=>{const[e,t]=r;return!e||!t?4:e*(4/t)},cu=r=>{const e=zf(r);return{id:Is(),beats:[{id:Is(),chord:null,duration:e}]}},Bo=r=>r?`${r.sectionId}:${r.slotId}`:"",Tg=r=>{const e=[];return r.forEach(t=>{t.measures.forEach(s=>{s.beats.forEach(a=>{e.push({sectionId:t.id,slotId:a.id,chord:a.chord??null})})})}),e},au=(r,e)=>{if(!e)return null;for(const t of r)if(t.id===e.sectionId){for(const s of t.measures)for(const a of s.beats)if(a.id===e.slotId)return a.chord??null}return null},pv=(r,e)=>e?Tg(r).findIndex(s=>s.sectionId===e.sectionId&&s.slotId===e.slotId):-1,sS=(r,e,t)=>{const s=Tg(r),a=s.findIndex(f=>f.sectionId===e.sectionId&&f.slotId===e.slotId),o=s.findIndex(f=>f.sectionId===t.sectionId&&f.slotId===t.slotId);if(a===-1||o===-1)return[];const[u,c]=a<=o?[a,o]:[o,a];return s.slice(u,c+1).map(({sectionId:f,slotId:d})=>({sectionId:f,slotId:d}))},V1=(r,e)=>e?r.some(t=>t.id===e.sectionId&&t.measures.some(s=>s.beats.some(a=>a.id===e.slotId))):!1,ou=(r,e,t,s,a)=>{const o=e&&t?{sectionId:e,slotId:t}:null,u=s.filter(p=>V1(r,p)),c=V1(r,o),f=u[u.length-1]||(c?o:null),d=a&&V1(r,a);return{selectedSectionId:f?.sectionId??null,selectedSlotId:f?.slotId??null,selectedSlots:u,selectionAnchor:d?a:u[0]??f??null}},Wm=100,Pf=r=>typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r)),Mr=r=>{const e=Pf(r.currentSong),t=[...r.historyPast,e].slice(-Wm);return{historyPast:t,historyFuture:[],canUndo:t.length>0,canRedo:!1}},mv=(r,e,t,s,a)=>{const o=ou(r.sections,e,t,s,a),u=o.selectedSectionId&&o.selectedSlotId?{sectionId:o.selectedSectionId,slotId:o.selectedSlotId}:null,c=u?au(r.sections,u):null;return{...o,selectedChord:c}},iS=(r,e,t)=>{let s=!1;for(const a of r)for(const o of a.measures)for(const u of o.beats){if(s)return{sectionId:a.id,slotId:u.id};a.id===e&&u.id===t&&(s=!0)}return null},If={id:"default",title:"Untitled Song",artist:"",key:"C",tempo:120,timeSignature:[4,4],sections:[{id:"verse-1",name:"Verse 1",type:"verse",timeSignature:Fs,measures:Array(4).fill(null).map(()=>cu(Fs))},{id:"chorus-1",name:"Chorus",type:"chorus",timeSignature:Fs,measures:Array(4).fill(null).map(()=>cu(Fs))}],notes:"",createdAt:new Date,updatedAt:new Date},vm={root:"C",quality:"major",numeral:"I",notes:["C","E","G"],symbol:"C"},pn=q_()(G_(r=>({currentSong:If,historyPast:[],historyFuture:[],canUndo:!1,canRedo:!1,selectedKey:"C",wheelRotation:0,wheelMode:"fixed",chordPanelVisible:!0,timelineVisible:!0,songMapVisible:!1,collapsedSections:{},chordPanelGuitarExpanded:!1,chordPanelVoicingsExpanded:!1,chordPanelAttention:!1,selectedChord:vm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,isPlaying:!1,playingSectionId:null,playingSlotId:null,isLooping:!1,tempo:120,volume:.8,instrument:"piano",isMuted:!1,setKey:e=>r({selectedKey:e}),rotateWheel:e=>r(t=>({wheelRotation:t.wheelMode==="rotating"?t.wheelRotation+(e==="cw"?-30:30):0})),toggleWheelMode:()=>r(e=>{const t=e.wheelMode==="rotating"?"fixed":"rotating";let s=0;if(t==="rotating"){const a=qf.indexOf(e.selectedKey);a!==-1&&(s=-(a*30))}return{wheelMode:t,wheelRotation:s}}),toggleChordPanel:()=>r(e=>({chordPanelVisible:!e.chordPanelVisible})),toggleTimeline:()=>r(e=>({timelineVisible:!e.timelineVisible})),openTimeline:()=>r(e=>{if(typeof window<"u"&&window.dispatchEvent(new CustomEvent("openMobileTimeline")),!e.selectedSectionId||!e.selectedSlotId){const t=e.currentSong.sections;if(t.length>0){const s=e.selectedSectionId&&t.find(a=>a.id===e.selectedSectionId)||t[0];if(s.measures.length>0&&s.measures[0].beats.length>0){const a=s.measures[0].beats[0],o={sectionId:s.id,slotId:a.id},u=a.chord??null;return{timelineVisible:!0,selectedSectionId:s.id,selectedSlotId:a.id,selectedSlots:[o],selectionAnchor:o,selectedChord:u}}}}return{timelineVisible:!0}}),toggleSongMap:e=>r(t=>({songMapVisible:e!==void 0?e:!t.songMapVisible})),toggleSectionCollapsed:e=>r(t=>{const s={...t.collapsedSections,[e]:!t.collapsedSections?.[e]};return s[e]||delete s[e],{collapsedSections:s}}),setChordPanelGuitarExpanded:e=>r({chordPanelGuitarExpanded:e}),setChordPanelVoicingsExpanded:e=>r({chordPanelVoicingsExpanded:e}),pulseChordPanel:()=>{r({chordPanelAttention:!0}),setTimeout(()=>r({chordPanelAttention:!1}),600)},setSelectedChord:e=>r({selectedChord:e}),setSelectedSlot:(e,t)=>r(s=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,selectedChord:null};const a={sectionId:e,slotId:t},o=au(s.currentSong.sections,a);return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[a],selectionAnchor:a,selectedChord:o??null}}),selectSlotOnly:(e,t)=>r(()=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null};const s={sectionId:e,slotId:t};return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[s],selectionAnchor:s}}),setSelectedSlots:e=>r(t=>{const s=e.filter(Boolean),a=s[s.length-1]??null,o=au(t.currentSong.sections,a);return{selectedSlots:s,selectedSectionId:a?.sectionId??null,selectedSlotId:a?.slotId??null,selectionAnchor:s[0]??a??null,selectedChord:o??null}}),toggleSlotSelection:(e,t)=>r(s=>{const a=s.selectedSlots.some(d=>d.sectionId===e&&d.slotId===t),o=a?s.selectedSlots.filter(d=>!(d.sectionId===e&&d.slotId===t)):[...s.selectedSlots,{sectionId:e,slotId:t}],u=o[o.length-1]??null,c=au(s.currentSong.sections,u),f=a&&s.selectionAnchor&&Bo(s.selectionAnchor)===Bo({sectionId:e,slotId:t});return{selectedSlots:o,selectedSectionId:u?.sectionId??null,selectedSlotId:u?.slotId??null,selectionAnchor:f?o[0]??u??null:s.selectionAnchor??u??null,selectedChord:c??null}}),selectRangeTo:(e,t)=>r(s=>{const a={sectionId:e,slotId:t},o=s.selectionAnchor||s.selectedSlots[s.selectedSlots.length-1]||(s.selectedSectionId&&s.selectedSlotId?{sectionId:s.selectedSectionId,slotId:s.selectedSlotId}:a),c=V1(s.currentSong.sections,o)?o:a,f=sS(s.currentSong.sections,c,a),d=f.length?f:[a],p=au(s.currentSong.sections,a);return{selectedSlots:d,selectedSectionId:a.sectionId,selectedSlotId:a.slotId,selectionAnchor:c,selectedChord:p??null}}),moveSelection:(e,t,s="move")=>{let a=!1;return r(o=>{const u=Tg(o.currentSong.sections),c=pv(o.currentSong.sections,e),f=pv(o.currentSong.sections,t);if(c===-1||f===-1)return{};const p=(o.selectedSlots.length?o.selectedSlots:[e]).map(L=>{const B=u.findIndex(ee=>ee.sectionId===L.sectionId&&ee.slotId===L.slotId);return B>=0?{idx:B,slot:u[B]}:null}).filter(L=>!!L).sort((L,B)=>L.idx-B.idx);if(!p.length)return{};const y=f-c,_=p.map(({idx:L})=>L+y);if(_.some(L=>L<0||L>=u.length))return{};const b=_.map(L=>u[L]);if(p.length===1&&s==="move"){const L=p[0].slot,B=b[0],ee=Mr(o),M=o.currentSong.sections.map(H=>({...H,measures:H.measures.map(se=>({...se,beats:se.beats.map(Q=>Q.id===L.slotId&&H.id===L.sectionId?{...Q,chord:B.chord}:Q.id===B.slotId&&H.id===B.sectionId?{...Q,chord:L.chord}:Q)}))}));a=!0;const F=o.selectionAnchor&&Bo(o.selectionAnchor)===Bo(e),J=ou(M,t.sectionId,t.slotId,[{sectionId:B.sectionId,slotId:B.slotId}],F?{sectionId:B.sectionId,slotId:B.slotId}:o.selectionAnchor),te=J.selectedSectionId&&J.selectedSlotId?{sectionId:J.selectedSectionId,slotId:J.selectedSlotId}:null,ae=au(M,te);return{...ee,currentSong:{...o.currentSong,sections:M},selectedSectionId:J.selectedSectionId,selectedSlotId:J.selectedSlotId,selectedSlots:J.selectedSlots,selectionAnchor:J.selectionAnchor,selectedChord:ae??null}}const N=new Map;p.forEach((L,B)=>{N.set(Bo(b[B]),L.slot.chord??null)});const A=new Set;s==="move"&&p.forEach((L,B)=>{const ee=Bo(L.slot),M=Bo(b[B]);ee!==M&&A.add(ee)});const k=Mr(o),T=o.currentSong.sections.map(L=>({...L,measures:L.measures.map(B=>({...B,beats:B.beats.map(ee=>{const M=Bo({sectionId:L.id,slotId:ee.id});return N.has(M)?{...ee,chord:N.get(M)??null}:A.has(M)?{...ee,chord:null}:ee})}))}));a=!0;const R=Bo(o.selectionAnchor),O=p.find(L=>Bo(L.slot)===R),V=O?{sectionId:b[p.indexOf(O)].sectionId,slotId:b[p.indexOf(O)].slotId}:o.selectionAnchor,I=ou(T,t.sectionId,t.slotId,b.map(L=>({sectionId:L.sectionId,slotId:L.slotId})),V??null),W=I.selectedSectionId&&I.selectedSlotId?{sectionId:I.selectedSectionId,slotId:I.selectedSlotId}:null,U=au(T,W);return{...k,currentSong:{...o.currentSong,sections:T},selectedSectionId:I.selectedSectionId,selectedSlotId:I.selectedSlotId,selectedSlots:I.selectedSlots,selectionAnchor:I.selectionAnchor,selectedChord:U??null}}),a},selectNextSlotAfter:(e,t)=>{let s=!1;return r(a=>{const o=iS(a.currentSong.sections,e,t);if(!o)return{};const u=a.currentSong.sections.find(c=>c.id===o.sectionId)?.measures.flatMap(c=>c.beats).find(c=>c.id===o.slotId)?.chord??null;return s=!0,{selectedSectionId:o.sectionId,selectedSlotId:o.slotId,selectedChord:u,selectedSlots:[{sectionId:o.sectionId,slotId:o.slotId}],selectionAnchor:{sectionId:o.sectionId,slotId:o.slotId}}}),s},setTempo:e=>r(t=>({...Mr(t),tempo:e,currentSong:{...t.currentSong,tempo:e}})),setVolume:e=>r({volume:e}),setInstrument:e=>r({instrument:e}),setIsPlaying:e=>r({isPlaying:e}),setPlayingSlot:(e,t)=>r({playingSectionId:e,playingSlotId:t}),toggleLoop:()=>r(e=>({isLooping:!e.isLooping})),toggleMute:()=>r(e=>({isMuted:!e.isMuted})),setTitle:e=>r(t=>({...Mr(t),currentSong:{...t.currentSong,title:e}})),setArtist:e=>r(t=>({...Mr(t),currentSong:{...t.currentSong,artist:e}})),setTags:e=>r(t=>({...Mr(t),currentSong:{...t.currentSong,tags:e}})),loadSong:e=>r(t=>{const s=e.key||"C",a=e.tempo??If.tempo;let o=0;if(t.wheelMode==="rotating"){const c=qf.indexOf(s);c!==-1&&(o=-(c*30))}return{...Mr(t),currentSong:{...e,tempo:a},selectedKey:s,wheelRotation:o,selectedChord:vm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:a}}),newSong:()=>r(e=>({...Mr(e),currentSong:{...If,id:Is(),title:"Untitled Song",createdAt:new Date,updatedAt:new Date,tempo:If.tempo,sections:[{id:Is(),name:"Verse 1",type:"verse",timeSignature:Fs,measures:Array(4).fill(null).map(()=>cu(Fs))},{id:Is(),name:"Chorus",type:"chorus",timeSignature:Fs,measures:Array(4).fill(null).map(()=>cu(Fs))}]},selectedKey:"C",wheelRotation:0,selectedChord:vm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:If.tempo})),addSection:e=>r(t=>{const s={id:Is(),name:e.charAt(0).toUpperCase()+e.slice(1),type:e,timeSignature:t.currentSong.timeSignature||Fs,measures:Array(4).fill(null).map(()=>cu(t.currentSong.timeSignature||Fs))};return{...Mr(t),currentSong:{...t.currentSong,sections:[...t.currentSong.sections,s]}}}),addSuggestedSection:()=>r(e=>{const t=dv(e.currentSong.sections),s={id:Is(),name:t.charAt(0).toUpperCase()+t.slice(1),type:t,timeSignature:e.currentSong.timeSignature||Fs,measures:Array(4).fill(null).map(()=>cu(e.currentSong.timeSignature||Fs))};return{...Mr(e),currentSong:{...e.currentSong,sections:[...e.currentSong.sections,s]}}}),addCustomSection:(e,t,s,a)=>r(o=>{const u=o.currentSong.timeSignature||Fs,c=zf(u),f=a?.beatsPerChord??4,d=c/f;let p;a?.totalBars?p=a.totalBars:d>=1?p=Math.ceil(s.length/d):p=s.length*Math.ceil(1/d);const y=[];if(d>=1)for(let k=0;k<p;k++){const T=[];for(let R=0;R<d;R++){const O=Math.floor(k*d+R);T.push({id:Is(),chord:s[O]||null,duration:f})}y.push({id:Is(),beats:T})}else for(let k=0;k<p;k++)y.push({id:Is(),beats:[{id:Is(),chord:s[k]||null,duration:c}]});const _={id:Is(),name:e,type:t,timeSignature:u,measures:y},b=Mr(o),N=y[0]?.beats[0]?.id,A=y[0]?.beats[0]?.chord??null;return{...b,currentSong:{...o.currentSong,sections:[...o.currentSong.sections,_]},selectedSectionId:_.id,selectedSlotId:N??null,selectedSlots:N?[{sectionId:_.id,slotId:N}]:[],selectionAnchor:N?{sectionId:_.id,slotId:N}:null,selectedChord:A}}),getSuggestedSectionType:()=>{const e=pn.getState();return dv(e.currentSong.sections)},updateSection:(e,t)=>r(s=>({...Mr(s),currentSong:{...s.currentSong,sections:s.currentSong.sections.map(o=>o.id===e?{...o,...t}:o)}})),removeSection:e=>r(t=>{const s=Mr(t),{[e]:a,...o}=t.collapsedSections||{};return{...s,currentSong:{...t.currentSong,sections:t.currentSong.sections.filter(u=>u.id!==e)},collapsedSections:o}}),clearSection:e=>r(t=>{const s=t.currentSong.sections.find(c=>c.id===e);if(!s)return{};if(!s.measures.some(c=>c.beats.some(f=>f.chord!==null)))return{};const o=Mr(t),u=t.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>({...d,chord:null}))}))});return{...o,currentSong:{...t.currentSong,sections:u}}}),duplicateSection:e=>r(t=>{const s=t.currentSong.sections.find(f=>f.id===e);if(!s)return{};const a=Mr(t),o={...s,id:Is(),name:`${s.name} (Copy)`,timeSignature:s.timeSignature||t.currentSong.timeSignature||Fs,measures:s.measures.map(f=>({...f,id:Is(),beats:f.beats.map(d=>({...d,id:Is()}))}))},u=t.currentSong.sections.findIndex(f=>f.id===e),c=[...t.currentSong.sections];return c.splice(u+1,0,o),{...a,currentSong:{...t.currentSong,sections:c}}}),reorderSections:e=>r(t=>({...Mr(t),currentSong:{...t.currentSong,sections:e}})),setSectionMeasures:(e,t)=>r(s=>{const a=Math.max(1,Math.min(16,Math.round(t))),o=s.currentSong.sections.map(f=>{if(f.id!==e)return f;const d=f.timeSignature||s.currentSong.timeSignature||Fs;let p=[...f.measures];if(p.length<a)for(;p.length<a;)p.push(cu(d));else p.length>a&&(p=p.slice(0,a));return{...f,measures:p}}),u=ou(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Mr(s),currentSong:{...s.currentSong,sections:o},...u}}),setSectionTimeSignature:(e,t)=>r(s=>{const a=s.currentSong.sections.map(c=>{if(c.id!==e)return c;const f=zf(t);return{...c,timeSignature:t,measures:c.measures.map(d=>({...d,beats:[{id:Is(),chord:null,duration:f}]}))}}),o=ou(a,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Mr(s),currentSong:{...s.currentSong,sections:a},...o}}),setMeasureSubdivision:(e,t,s)=>r(a=>{const o=Math.max(1,Math.min(16,Math.round(s))),u=a.currentSong.sections.map(d=>{if(d.id!==e)return d;const p=d.timeSignature||a.currentSong.timeSignature||Fs,y=zf(p);return{...d,measures:d.measures.map(_=>{if(_.id!==t)return _;const b=y/o,N=Array.from({length:o}).map((A,k)=>{const T=_.beats[k];return{id:T?.id??Is(),chord:T?.chord??null,duration:b}});return{..._,beats:N}})}}),c=ou(u,a.selectedSectionId,a.selectedSlotId,a.selectedSlots,a.selectionAnchor);return{...Mr(a),currentSong:{...a.currentSong,sections:u},...c}}),setSectionSubdivision:(e,t)=>r(s=>{const a=Math.max(1,Math.min(16,Math.round(t))),o=s.currentSong.sections.map(f=>{if(f.id!==e)return f;const d=f.timeSignature||s.currentSong.timeSignature||Fs,y=zf(d)/a;return{...f,measures:f.measures.map(_=>{const b=Array.from({length:a}).map((N,A)=>{const k=_.beats[A];return{id:k?.id??Is(),chord:k?.chord??null,duration:y}});return{..._,beats:b}})}}),u=ou(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Mr(s),currentSong:{...s.currentSong,sections:o},...u}}),addChordToSlot:(e,t,s)=>r(a=>{const o=Mr(a),u=a.currentSong.sections.map(c=>c.id!==t?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>d.id!==s?d:{...d,chord:e})}))});return{...o,currentSong:{...a.currentSong,sections:u}}}),clearSlot:(e,t)=>r(s=>{if(!s.currentSong.sections.some(c=>c.id===e&&c.measures.some(f=>f.beats.some(d=>d.id===t&&d.chord))))return{};const o=Mr(s),u=s.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>d.id!==t?d:{...d,chord:null})}))});return{...o,currentSong:{...s.currentSong,sections:u}}}),clearTimeline:()=>r(e=>{if(!e.currentSong.sections.some(o=>o.measures.some(u=>u.beats.some(c=>c.chord!==null))))return{};const s=Mr(e),a=e.currentSong.sections.map(o=>({...o,measures:o.measures.map(u=>({...u,beats:u.beats.map(c=>({...c,chord:null}))}))}));return{...s,currentSong:{...e.currentSong,sections:a},selectedChord:null}}),moveChord:(e,t,s,a)=>r(o=>{let u=null,c=null;if(o.currentSong.sections.forEach(p=>{p.measures.forEach(y=>{y.beats.forEach(_=>{_.id===t&&(u=_.chord),_.id===a&&(c=_.chord)})})}),!u&&!c)return{};const f=Mr(o),d=o.currentSong.sections.map(p=>({...p,measures:p.measures.map(y=>({...y,beats:y.beats.map(_=>_.id===t?{..._,chord:c}:_.id===a?{..._,chord:u}:_)}))}));return{...f,currentSong:{...o.currentSong,sections:d}}}),undo:()=>r(e=>{if(!e.historyPast.length)return{};const t=e.historyPast[e.historyPast.length-1],s=e.historyPast.slice(0,-1),a=[Pf(e.currentSong),...e.historyFuture].slice(0,Wm),o=mv(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Pf(t),historyPast:s,historyFuture:a,canUndo:s.length>0,canRedo:a.length>0,tempo:t.tempo??e.tempo,...o}}),redo:()=>r(e=>{if(!e.historyFuture.length)return{};const t=e.historyFuture[0],s=e.historyFuture.slice(1),a=[...e.historyPast,Pf(e.currentSong)].slice(-Wm),o=mv(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Pf(t),historyPast:a,historyFuture:s,canUndo:a.length>0,canRedo:s.length>0,tempo:t.tempo??e.tempo,...o}})}),{name:"songwriter-wheel-storage",partialize:r=>({currentSong:r.currentSong,tempo:r.tempo,volume:r.volume,instrument:r.instrument,isMuted:r.isMuted})}));function xc(r,e,t,s){const a=(s-90)*Math.PI/180;return{x:r+t*Math.cos(a),y:e+t*Math.sin(a)}}function aS(r,e,t,s,a){const o=xc(r,e,t,s),u=xc(r,e,t,a),c=a-s<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,c,1,u.x,u.y].join(" ")}function oS(r,e,t,s,a,o){const u=xc(r,e,s,o),c=xc(r,e,s,a),f=xc(r,e,t,o),d=xc(r,e,t,a),p=o-a<=180?"0":"1";return["M",u.x,u.y,"A",s,s,0,p,0,c.x,c.y,"L",d.x,d.y,"A",t,t,0,p,1,f.x,f.y,"Z"].join(" ")}function Cx(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=Cx(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Ot(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=Cx(r))&&(s&&(s+=" "),s+=e);return s}const Tx="15.1.22",gv=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),bv=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),Ym=(r,e)=>({startTime:e,type:"setValue",value:r}),kx=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),jx=(r,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-r)/a),wh=r=>r.type==="exponentialRampToValue",K1=r=>r.type==="linearRampToValue",vc=r=>wh(r)||K1(r),kg=r=>r.type==="setValue",Sl=r=>r.type==="setValueCurve",J1=(r,e,t,s)=>{const a=r[e];return a===void 0?s:vc(a)||kg(a)?a.value:Sl(a)?a.values[a.values.length-1]:jx(t,J1(r,e-1,a.startTime,s),a)},vv=(r,e,t,s,a)=>t===void 0?[s.insertTime,a]:vc(t)?[t.endTime,t.value]:kg(t)?[t.startTime,t.value]:Sl(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,J1(r,e-1,t.startTime,a)],$m=r=>r.type==="cancelAndHold",Xm=r=>r.type==="cancelScheduledValues",mc=r=>$m(r)||Xm(r)?r.cancelTime:wh(r)||K1(r)?r.endTime:r.startTime,yv=(r,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((r-e)/(s-e)):0,xv=(r,e,t,{endTime:s,value:a})=>t+(r-e)/(s-e)*(a-t),lS=(r,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?r[t]:(1-(e-t))*r[t]+(1-(s-e))*r[s]},cS=(r,{duration:e,startTime:t,values:s})=>{const a=(r-t)/e*(s.length-1);return lS(s,a)},_1=r=>r.type==="setTarget";class uS{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=mc(e);if($m(e)||Xm(e)){const s=this._automationEvents.findIndex(o=>Xm(e)&&Sl(o)?o.startTime+o.duration>=t:mc(o)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),$m(e)){const o=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&vc(a)){if(o!==void 0&&_1(o))throw new Error("The internal list is malformed.");const u=o===void 0?a.insertTime:Sl(o)?o.startTime+o.duration:mc(o),c=o===void 0?this._defaultValue:Sl(o)?o.values[o.values.length-1]:o.value,f=wh(a)?yv(t,u,c,a):xv(t,u,c,a),d=wh(a)?gv(f,t,this._currenTime):bv(f,t,this._currenTime);this._automationEvents.push(d)}if(o!==void 0&&_1(o)&&this._automationEvents.push(Ym(this.getValue(t),t)),o!==void 0&&Sl(o)&&o.startTime+o.duration>t){const u=t-o.startTime,c=(o.values.length-1)/o.duration,f=Math.max(2,1+Math.ceil(u*c)),d=u/(f-1)*c,p=o.values.slice(0,f);if(d<1)for(let y=1;y<f;y+=1){const _=d*y%1;p[y]=o.values[y-1]*(1-_)+o.values[y]*_}this._automationEvents[this._automationEvents.length-1]=kx(p,o.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>mc(u)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&Sl(a)&&mc(a)+a.duration>t)return!1;const o=wh(e)?gv(e.value,e.endTime,this._currenTime):K1(e)?bv(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(o);else{if(Sl(e)&&t+e.duration>mc(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,o)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>mc(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];_1(a)&&s.unshift(Ym(J1(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>mc(u)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,o=this._automationEvents[a];if(o!==void 0&&_1(o)&&(s===void 0||!vc(s)||s.insertTime>e))return jx(e,J1(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(o!==void 0&&kg(o)&&(s===void 0||!vc(s)))return o.value;if(o!==void 0&&Sl(o)&&(s===void 0||!vc(s)||o.startTime+o.duration>e))return e<o.startTime+o.duration?cS(e,o):o.values[o.values.length-1];if(o!==void 0&&vc(o)&&(s===void 0||!vc(s)))return o.value;if(s!==void 0&&wh(s)){const[u,c]=vv(this._automationEvents,a,o,s,this._defaultValue);return yv(e,u,c,s)}if(s!==void 0&&K1(s)){const[u,c]=vv(this._automationEvents,a,o,s,this._defaultValue);return xv(e,u,c,s)}return this._defaultValue}}const hS=r=>({cancelTime:r,type:"cancelAndHold"}),fS=r=>({cancelTime:r,type:"cancelScheduledValues"}),dS=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),pS=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),mS=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),gS=()=>new DOMException("","AbortError"),bS=r=>(e,t,[s,a,o],u)=>{r(e[a],[t,s,o],c=>c[0]===t&&c[1]===s,u)},vS=r=>(e,t,s)=>{const a=[];for(let o=0;o<s.numberOfInputs;o+=1)a.push(new Set);r.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},yS=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Lh=new WeakSet,Ex=new WeakMap,jg=new WeakMap,Mx=new WeakMap,Eg=new WeakMap,Tp=new WeakMap,Lx=new WeakMap,Zm=new WeakMap,Qm=new WeakMap,Km=new WeakMap,Ox={construct(){return Ox}},xS=r=>{try{const e=new Proxy(r,Ox);new e}catch{return!1}return!0},wv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_v=(r,e)=>{const t=[];let s=r.replace(/^[\s]+/,""),a=s.match(wv);for(;a!==null;){const o=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());t.push(u),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(wv)}return[t.join(";"),s]},Sv=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Nv=r=>{if(!xS(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},wS=(r,e,t,s,a,o,u,c,f,d,p,y,_)=>{let b=0;return(N,A,k={credentials:"omit"})=>{const T=p.get(N);if(T!==void 0&&T.has(A))return Promise.resolve();const R=d.get(N);if(R!==void 0){const I=R.get(A);if(I!==void 0)return I}const O=o(N),V=O.audioWorklet===void 0?a(A).then(([I,W])=>{const[U,L]=_v(I,W),B=`${U};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${L}
})})(window,'_AWGS')`;return t(B)}).then(()=>{const I=_._AWGS.pop();if(I===void 0)throw new SyntaxError;s(O.currentTime,O.sampleRate,()=>I(class{},void 0,(W,U)=>{if(W.trim()==="")throw e();const L=Qm.get(O);if(L!==void 0){if(L.has(W))throw e();Nv(U),Sv(U.parameterDescriptors),L.set(W,U)}else Nv(U),Sv(U.parameterDescriptors),Qm.set(O,new Map([[W,U]]))},O.sampleRate,void 0,void 0))}):Promise.all([a(A),Promise.resolve(r(y,y))]).then(([[I,W],U])=>{const L=b+1;b=L;const[B,ee]=_v(I,W),te=`${B};((AudioWorkletProcessor,registerProcessor)=>{${ee}
})(${U?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${U?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${U?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${L}',class extends AudioWorkletProcessor{process(){return !1}})`,ae=new Blob([te],{type:"application/javascript; charset=utf-8"}),H=URL.createObjectURL(ae);return O.audioWorklet.addModule(H,k).then(()=>{if(c(O))return O;const se=u(O);return se.audioWorklet.addModule(H,k).then(()=>se)}).then(se=>{if(f===null)throw new SyntaxError;try{new f(se,`__sac${L}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(H))});return R===void 0?d.set(N,new Map([[A,V]])):R.set(A,V),V.then(()=>{const I=p.get(N);I===void 0?p.set(N,new Set([A])):I.add(A)}).finally(()=>{const I=d.get(N);I!==void 0&&I.delete(A)}),V}},co=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},kp=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return r.delete(s),s},Dx=(r,e,t,s)=>{const a=co(r,e),o=kp(a,u=>u[0]===t&&u[1]===s);return a.size===0&&r.delete(e),o},dd=r=>co(Lx,r),Oh=r=>{if(Lh.has(r))throw new Error("The AudioNode is already stored.");Lh.add(r),dd(r).forEach(e=>e(!0))},Rx=r=>"port"in r,pd=r=>{if(!Lh.has(r))throw new Error("The AudioNode is not stored.");Lh.delete(r),dd(r).forEach(e=>e(!1))},Jm=(r,e)=>{!Rx(r)&&e.every(t=>t.size===0)&&pd(r)},_S=(r,e,t,s,a,o,u,c,f,d,p,y,_)=>{const b=new WeakMap;return(N,A,k,T,R)=>{const{activeInputs:O,passiveInputs:V}=o(A),{outputs:I}=o(N),W=c(N),U=L=>{const B=f(A),ee=f(N);if(L){const M=Dx(V,N,k,T);r(O,N,M,!1),!R&&!y(N)&&t(ee,B,k,T),_(A)&&Oh(A)}else{const M=s(O,N,k,T);e(V,T,M,!1),!R&&!y(N)&&a(ee,B,k,T);const F=u(A);if(F===0)p(A)&&Jm(A,O);else{const J=b.get(A);J!==void 0&&clearTimeout(J),b.set(A,setTimeout(()=>{p(A)&&Jm(A,O)},F*1e3))}}};return d(I,[A,k,T],L=>L[0]===A&&L[1]===k&&L[2]===T,!0)?(W.add(U),p(N)?r(O,N,[k,T,U],!0):e(V,T,[N,k,U],!0),!0):!1}},SS=r=>(e,t,[s,a,o],u)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[a,t,o]])):r(c,[a,t,o],f=>f[0]===a&&f[1]===t,u)},NS=r=>(e,t)=>{const s=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},AS=r=>(e,t)=>{r(e).add(t)},CS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},TS=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=a(c),p={...CS,...f},y=s(d,p),_=o(d)?e():null;super(c,!1,y,_),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=f,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},oi=(r,e)=>r.context===e,kS=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!oi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=r(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},ep=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Go=()=>new DOMException("","IndexSizeError"),Mg=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(s){throw s.code===12?Go():s}})(r.getChannelData)},jS={numberOfChannels:1},ES=(r,e,t,s,a,o,u,c)=>{let f=null;return class Ix{constructor(p){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:_,sampleRate:b}={...jS,...p};f===null&&(f=new a(1,1,44100));const N=s!==null&&e(o,o)?new s({length:y,numberOfChannels:_,sampleRate:b}):f.createBuffer(_,y,b);if(N.numberOfChannels===0)throw t();return typeof N.copyFromChannel!="function"?(u(N),Mg(N)):e(ep,()=>ep(N))||c(N),r.add(N),N}static[Symbol.hasInstance](p){return p!==null&&typeof p=="object"&&Object.getPrototypeOf(p)===Ix.prototype||r.has(p)}}},qi=-34028234663852886e22,bi=-qi,Tl=r=>Lh.has(r),MS={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},LS=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,p){const y=o(d),_={...MS,...p},b=a(y,_),N=u(y),A=N?e():null;super(d,!1,b,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=_.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,N,b.playbackRate,bi,qi)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?c(this,d):null;this._nativeAudioBufferSourceNode.onended=p;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===p?d:y}get playbackRate(){return this._playbackRate}start(d=0,p=0,y){if(this._nativeAudioBufferSourceNode.start(d,p,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[d,p]:[d,p,y]),this.context.state!=="closed"){Oh(this);const _=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",_),Tl(this)&&pd(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",_)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},OS=(r,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const f=async(d,p)=>{let y=t(d);const _=oi(y,p);if(!_){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=e(p,b),u!==null&&y.start(...u),c!==null&&y.stop(c)}return o.set(p,y),_?await r(p,d.playbackRate,y.playbackRate):await s(p,d.playbackRate,y.playbackRate),await a(d,p,y),y};return{set start(d){u=d},set stop(d){c=d},render(d,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):f(d,p)}}},DS=r=>"playbackRate"in r,RS=r=>"frequency"in r&&"gain"in r,IS=r=>"offset"in r,FS=r=>!("frequency"in r)&&"gain"in r,VS=r=>"detune"in r&&"frequency"in r&&!("gain"in r),BS=r=>"pan"in r,vi=r=>co(Ex,r),md=r=>co(Mx,r),eg=(r,e)=>{const{activeInputs:t}=vi(r);t.forEach(a=>a.forEach(([o])=>{e.includes(r)||eg(o,[...e,r])}));const s=DS(r)?[r.playbackRate]:Rx(r)?Array.from(r.parameters.values()):RS(r)?[r.Q,r.detune,r.frequency,r.gain]:IS(r)?[r.offset]:FS(r)?[r.gain]:VS(r)?[r.detune,r.frequency]:BS(r)?[r.pan]:[];for(const a of s){const o=md(a);o!==void 0&&o.activeInputs.forEach(([u])=>eg(u,e))}Tl(r)&&pd(r)},Fx=r=>{eg(r.destination,[])},zS=r=>r===void 0||typeof r=="number"||typeof r=="string"&&(r==="balanced"||r==="interactive"||r==="playback"),PS=(r,e,t,s,a,o,u,c,f)=>class extends r{constructor(p={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new f(p)}catch(N){throw N.code===12&&N.message==="sampleRate is not in range"?t():N}if(y===null)throw s();if(!zS(p.latencyHint))throw new TypeError(`The provided value '${p.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(p.sampleRate!==void 0&&y.sampleRate!==p.sampleRate)throw t();super(y,2);const{latencyHint:_}=p,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:_==="balanced"?512/b:_==="interactive"||_===void 0?256/b:_==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(_*b/128)))*128/b,this._nativeAudioContext=y,f.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const N=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",N)};y.addEventListener("statechange",N)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Fx(this)}))}createMediaElementSource(p){return new a(this,{mediaElement:p})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(p){return new u(this,{mediaStream:p})}createMediaStreamTrackSource(p){return new c(this,{mediaStreamTrack:p})}resume(){return this._state==="suspended"?new Promise((p,y)=>{const _=()=>{this._nativeAudioContext.removeEventListener("statechange",_),this._nativeAudioContext.state==="running"?p():this.resume().then(p,y)};this._nativeAudioContext.addEventListener("statechange",_)}):this._nativeAudioContext.resume().catch(p=>{throw p===void 0||p.code===15?e():p})}suspend(){return this._nativeAudioContext.suspend().catch(p=>{throw p===void 0?e():p})}},qS=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,p){const y=o(d),_=u(y),b=a(y,p,_),N=_?e(c):null;super(d,!1,b,N),this._isNodeOfNativeOfflineAudioContext=_,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},US=r=>{const e=new WeakMap,t=async(s,a)=>{const o=a.destination;return e.set(a,o),await r(s,a,o),o};return{render(s,a){const o=e.get(a);return o!==void 0?Promise.resolve(o):t(s,a)}}},HS=(r,e,t,s,a,o,u,c)=>(f,d)=>{const p=d.listener,y=()=>{const I=new Float32Array(1),W=e(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),U=u(d);let L=!1,B=[0,0,-1,0,1,0],ee=[0,0,0];const M=()=>{if(L)return;L=!0;const ae=s(d,256,9,0);ae.onaudioprocess=({inputBuffer:H})=>{const se=[o(H,I,0),o(H,I,1),o(H,I,2),o(H,I,3),o(H,I,4),o(H,I,5)];se.some((ge,ue)=>ge!==B[ue])&&(p.setOrientation(...se),B=se);const Q=[o(H,I,6),o(H,I,7),o(H,I,8)];Q.some((ge,ue)=>ge!==ee[ue])&&(p.setPosition(...Q),ee=Q)},W.connect(ae)},F=ae=>H=>{H!==B[ae]&&(B[ae]=H,p.setOrientation(...B))},J=ae=>H=>{H!==ee[ae]&&(ee[ae]=H,p.setPosition(...ee))},te=(ae,H,se)=>{const Q=t(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:H});Q.connect(W,0,ae),Q.start(),Object.defineProperty(Q.offset,"defaultValue",{get(){return H}});const ge=r({context:f},U,Q.offset,bi,qi);return c(ge,"value",ue=>()=>ue.call(ge),ue=>G=>{try{ue.call(ge,G)}catch(j){if(j.code!==9)throw j}M(),U&&se(G)}),ge.cancelAndHoldAtTime=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.cancelAndHoldAtTime),ge.cancelScheduledValues=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.cancelScheduledValues),ge.exponentialRampToValueAtTime=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.exponentialRampToValueAtTime),ge.linearRampToValueAtTime=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.linearRampToValueAtTime),ge.setTargetAtTime=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.setTargetAtTime),ge.setValueAtTime=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.setValueAtTime),ge.setValueCurveAtTime=(ue=>U?()=>{throw a()}:(...G)=>{const j=ue.apply(ge,G);return M(),j})(ge.setValueCurveAtTime),ge};return{forwardX:te(0,0,F(0)),forwardY:te(1,0,F(1)),forwardZ:te(2,-1,F(2)),positionX:te(6,0,J(0)),positionY:te(7,0,J(1)),positionZ:te(8,0,J(2)),upX:te(3,0,F(3)),upY:te(4,1,F(4)),upZ:te(5,0,F(5))}},{forwardX:_,forwardY:b,forwardZ:N,positionX:A,positionY:k,positionZ:T,upX:R,upY:O,upZ:V}=p.forwardX===void 0?y():p;return{get forwardX(){return _},get forwardY(){return b},get forwardZ(){return N},get positionX(){return A},get positionY(){return k},get positionZ(){return T},get upX(){return R},get upY(){return O},get upZ(){return V}}},tp=r=>"context"in r,gd=r=>tp(r[0]),wu=(r,e,t,s)=>{for(const a of r)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},Av=(r,e,[t,s],a)=>{wu(r,[e,t,s],o=>o[0]===e&&o[1]===t,a)},Cv=(r,[e,t,s],a)=>{const o=r.get(e);o===void 0?r.set(e,new Set([[t,s]])):wu(o,[t,s],u=>u[0]===t,a)},Bh=r=>"inputs"in r,np=(r,e,t,s)=>{if(Bh(e)){const a=e.inputs[s];return r.connect(a,t,0),[a,t,0]}return r.connect(e,t,s),[e,t,s]},Vx=(r,e,t)=>{for(const s of r)if(s[0]===e&&s[1]===t)return r.delete(s),s;return null},GS=(r,e,t)=>kp(r,s=>s[0]===e&&s[1]===t),Bx=(r,e)=>{if(!dd(r).delete(e))throw new Error("Missing the expected event listener.")},zx=(r,e,t)=>{const s=co(r,e),a=kp(s,o=>o[0]===t);return s.size===0&&r.delete(e),a},rp=(r,e,t,s)=>{Bh(e)?r.disconnect(e.inputs[s],t,0):r.disconnect(e,t,s)},Nr=r=>co(jg,r),Jf=r=>co(Eg,r),gu=r=>Zm.has(r),B1=r=>!Lh.has(r),Tv=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=r.createScriptProcessor(256,1,1),a=r.createGain(),o=r.createBuffer(1,2,44100),u=o.getChannelData(0);u[0]=1,u[1]=1;const c=r.createBufferSource();c.buffer=o,c.loop=!0,c.connect(s).connect(r.destination),c.connect(a),c.disconnect(a),s.onaudioprocess=f=>{const d=f.inputBuffer.getChannelData(0);Array.prototype.some.call(d,p=>p===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(r.destination)},c.start()}}),ym=(r,e)=>{const t=new Map;for(const s of r)for(const a of s){const o=t.get(a);t.set(a,o===void 0?1:o+1)}t.forEach((s,a)=>e(a,s))},sp=r=>"context"in r,WS=r=>{const e=new Map;r.connect=(t=>(s,a=0,o=0)=>{const u=sp(s)?t(s,a,o):t(s,a),c=e.get(s);return c===void 0?e.set(s,[{input:o,output:a}]):c.every(f=>f.input!==o||f.output!==a)&&c.push({input:o,output:a}),u})(r.connect.bind(r)),r.disconnect=(t=>(s,a,o)=>{if(t.apply(r),s===void 0)e.clear();else if(typeof s=="number")for(const[u,c]of e){const f=c.filter(d=>d.output!==s);f.length===0?e.delete(u):e.set(u,f)}else if(e.has(s))if(a===void 0)e.delete(s);else{const u=e.get(s);if(u!==void 0){const c=u.filter(f=>f.output!==a&&(f.input!==o||o===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[u,c]of e)c.forEach(f=>{sp(u)?r.connect(u,f.output,f.input):r.connect(u,f.output)})})(r.disconnect)},YS=(r,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=md(e),{outputs:u}=vi(r),c=dd(r),f=d=>{const p=Nr(r),y=Jf(e);if(d){const _=zx(o,r,t);Av(a,r,_,!1),!s&&!gu(r)&&p.connect(y,t)}else{const _=GS(a,r,t);Cv(o,_,!1),!s&&!gu(r)&&p.disconnect(y,t)}};return wu(u,[e,t],d=>d[0]===e&&d[1]===t,!0)?(c.add(f),Tl(r)?Av(a,r,[t,f],!0):Cv(o,[r,t,f],!0),!0):!1},$S=(r,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=vi(e),u=Vx(a[s],r,t);return u===null?[Dx(o,r,t,s)[2],!1]:[u[2],!0]},XS=(r,e,t)=>{const{activeInputs:s,passiveInputs:a}=md(e),o=Vx(s,r,t);return o===null?[zx(a,r,t)[1],!1]:[o[2],!0]},Lg=(r,e,t,s,a)=>{const[o,u]=$S(r,t,s,a);if(o!==null&&(Bx(r,o),u&&!e&&!gu(r)&&rp(Nr(r),Nr(t),s,a)),Tl(t)){const{activeInputs:c}=vi(t);Jm(t,c)}},Og=(r,e,t,s)=>{const[a,o]=XS(r,t,s);a!==null&&(Bx(r,a),o&&!e&&!gu(r)&&Nr(r).disconnect(Jf(t),s))},ZS=(r,e)=>{const t=vi(r),s=[];for(const a of t.outputs)gd(a)?Lg(r,e,...a):Og(r,e,...a),s.push(a[0]);return t.outputs.clear(),s},QS=(r,e,t)=>{const s=vi(r),a=[];for(const o of s.outputs)o[1]===t&&(gd(o)?Lg(r,e,...o):Og(r,e,...o),a.push(o[0]),s.outputs.delete(o));return a},KS=(r,e,t,s,a)=>{const o=vi(r);return Array.from(o.outputs).filter(u=>u[0]===t&&(s===void 0||u[1]===s)&&(a===void 0||u[2]===a)).map(u=>(gd(u)?Lg(r,e,...u):Og(r,e,...u),o.outputs.delete(u),u[0]))},JS=(r,e,t,s,a,o,u,c,f,d,p,y,_,b,N,A)=>class extends d{constructor(T,R,O,V){super(O),this._context=T,this._nativeAudioNode=O;const I=p(T);y(I)&&t(Tv,()=>Tv(I,A))!==!0&&WS(O),jg.set(this,O),Lx.set(this,new Set),T.state!=="closed"&&R&&Oh(this),r(this,V,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,R=0,O=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw a();const V=p(this._context),I=N(V);if(_(T)||b(T))throw o();if(tp(T)){const L=Nr(T);try{const ee=np(this._nativeAudioNode,L,R,O),M=B1(this);(I||M)&&this._nativeAudioNode.disconnect(...ee),this.context.state!=="closed"&&!M&&B1(T)&&Oh(T)}catch(ee){throw ee.code===12?o():ee}if(e(this,T,R,O,I)){const ee=f([this],T);ym(ee,s(I))}return T}const W=Jf(T);if(W.name==="playbackRate"&&W.maxValue===1024)throw u();try{this._nativeAudioNode.connect(W,R),(I||B1(this))&&this._nativeAudioNode.disconnect(W,R)}catch(L){throw L.code===12?o():L}if(YS(this,T,R,I)){const L=f([this],T);ym(L,s(I))}}disconnect(T,R,O){let V;const I=p(this._context),W=N(I);if(T===void 0)V=ZS(this,W);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw a();V=QS(this,W,T)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||tp(T)&&O!==void 0&&(O<0||O>=T.numberOfInputs))throw a();if(V=KS(this,W,T,R,O),V.length===0)throw o()}for(const U of V){const L=f([this],U);ym(L,c)}}},e6=(r,e,t,s,a,o,u,c,f,d,p,y,_)=>(b,N,A,k=null,T=null)=>{const R=A.value,O=new uS(R),V=N?s(O):null,I={get defaultValue(){return R},get maxValue(){return k===null?A.maxValue:k},get minValue(){return T===null?A.minValue:T},get value(){return A.value},set value(W){A.value=W,I.setValueAtTime(W,b.context.currentTime)},cancelAndHoldAtTime(W){if(typeof A.cancelAndHoldAtTime=="function")V===null&&O.flush(b.context.currentTime),O.add(a(W)),A.cancelAndHoldAtTime(W);else{const U=Array.from(O).pop();V===null&&O.flush(b.context.currentTime),O.add(a(W));const L=Array.from(O).pop();A.cancelScheduledValues(W),U!==L&&L!==void 0&&(L.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(L.value,L.endTime):L.type==="linearRampToValue"?A.linearRampToValueAtTime(L.value,L.endTime):L.type==="setValue"?A.setValueAtTime(L.value,L.startTime):L.type==="setValueCurve"&&A.setValueCurveAtTime(L.values,L.startTime,L.duration))}return I},cancelScheduledValues(W){return V===null&&O.flush(b.context.currentTime),O.add(o(W)),A.cancelScheduledValues(W),I},exponentialRampToValueAtTime(W,U){if(W===0)throw new RangeError;if(!Number.isFinite(U)||U<0)throw new RangeError;const L=b.context.currentTime;return V===null&&O.flush(L),Array.from(O).length===0&&(O.add(d(R,L)),A.setValueAtTime(R,L)),O.add(u(W,U)),A.exponentialRampToValueAtTime(W,U),I},linearRampToValueAtTime(W,U){const L=b.context.currentTime;return V===null&&O.flush(L),Array.from(O).length===0&&(O.add(d(R,L)),A.setValueAtTime(R,L)),O.add(c(W,U)),A.linearRampToValueAtTime(W,U),I},setTargetAtTime(W,U,L){return V===null&&O.flush(b.context.currentTime),O.add(f(W,U,L)),A.setTargetAtTime(W,U,L),I},setValueAtTime(W,U){return V===null&&O.flush(b.context.currentTime),O.add(d(W,U)),A.setValueAtTime(W,U),I},setValueCurveAtTime(W,U,L){const B=W instanceof Float32Array?W:new Float32Array(W);if(y!==null&&y.name==="webkitAudioContext"){const ee=U+L,M=b.context.sampleRate,F=Math.ceil(U*M),J=Math.floor(ee*M),te=J-F,ae=new Float32Array(te);for(let se=0;se<te;se+=1){const Q=(B.length-1)/L*((F+se)/M-U),ge=Math.floor(Q),ue=Math.ceil(Q);ae[se]=ge===ue?B[ge]:(1-(Q-ge))*B[ge]+(1-(ue-Q))*B[ue]}V===null&&O.flush(b.context.currentTime),O.add(p(ae,U,L)),A.setValueCurveAtTime(ae,U,L);const H=J/M;H<ee&&_(I,ae[ae.length-1],H),_(I,B[B.length-1],ee)}else V===null&&O.flush(b.context.currentTime),O.add(p(B,U,L)),A.setValueCurveAtTime(B,U,L);return I}};return t.set(I,A),e.set(I,b),r(I,V),I},t6=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:o}=t;e.setTargetAtTime(a,s,o)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:o}=t;e.setValueCurveAtTime(o,a,s)}else throw new Error("Can't apply an unknown automation.")}});class Px{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const n6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},r6=(r,e,t,s,a,o,u,c,f,d,p,y,_,b)=>class extends e{constructor(A,k,T){var R;const O=c(A),V=f(O),I=p({...n6,...T});_(I);const W=Qm.get(O),U=W?.get(k),L=V||O.state!=="closed"?O:(R=u(O))!==null&&R!==void 0?R:O,B=a(L,V?null:A.baseLatency,d,k,U,I),ee=V?s(k,I,U):null;super(A,!0,B,ee);const M=[];B.parameters.forEach((J,te)=>{const ae=t(this,V,J);M.push([te,ae])}),this._nativeAudioWorkletNode=B,this._onprocessorerror=null,this._parameters=new Px(M),V&&r(O,this);const{activeInputs:F}=o(this);y(B,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const k=typeof A=="function"?b(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=k;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===k?A:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ip(r,e,t,s,a){if(typeof r.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),r.copyFromChannel(e[t],s,a);else{const o=r.getChannelData(s);if(e[t].byteLength===0)e[t]=o.slice(a,a+128);else{const u=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const qx=(r,e,t,s,a)=>{typeof r.copyToChannel=="function"?e[t].byteLength!==0&&r.copyToChannel(e[t],s,a):e[t].byteLength!==0&&r.getChannelData(s).set(e[t],a)},ap=(r,e)=>{const t=[];for(let s=0;s<r;s+=1){const a=[],o=typeof e=="number"?e:e[s];for(let u=0;u<o;u+=1)a.push(new Float32Array(128));t.push(a)}return t},s6=(r,e)=>{const t=co(Km,r),s=Nr(e);return co(t,s)},i6=async(r,e,t,s,a,o,u)=>{const c=e===null?Math.ceil(r.context.length/128)*128:e.length,f=s.channelCount*s.numberOfInputs,d=a.reduce((k,T)=>k+T,0),p=d===0?null:t.createBuffer(d,c,t.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const y=vi(r),_=await s6(t,r),b=ap(s.numberOfInputs,s.channelCount),N=ap(s.numberOfOutputs,a),A=Array.from(r.parameters.keys()).reduce((k,T)=>({...k,[T]:new Float32Array(128)}),{});for(let k=0;k<c;k+=128){if(s.numberOfInputs>0&&e!==null)for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<s.channelCount;R+=1)ip(e,b[T],R,R,k);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:T},R)=>{ip(e,A,T,f+R,k)});for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<a[T];R+=1)N[T][R].byteLength===0&&(N[T][R]=new Float32Array(128));try{const T=b.map((O,V)=>y.activeInputs[V].size===0?[]:O),R=u(k/t.sampleRate,t.sampleRate,()=>_.process(T,N,A));if(p!==null)for(let O=0,V=0;O<s.numberOfOutputs;O+=1){for(let I=0;I<a[O];I+=1)qx(p,N[O],I,V+I,k);V+=a[O]}if(!R)break}catch(T){r.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return p},a6=(r,e,t,s,a,o,u,c,f,d,p,y,_,b,N,A)=>(k,T,R)=>{const O=new WeakMap;let V=null;const I=async(W,U)=>{let L=p(W),B=null;const ee=oi(L,U),M=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(y===null){const F=M.reduce((H,se)=>H+se,0),J=a(U,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),te=[];for(let H=0;H<W.numberOfOutputs;H+=1)te.push(s(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[H]}));const ae=u(U,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});ae.connect=e.bind(null,te),ae.disconnect=f.bind(null,te),B=[J,te,ae]}else ee||(L=new y(U,k));if(O.set(U,B===null?L:B[2]),B!==null){if(V===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const se=W.channelCount*W.numberOfInputs,Q=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,ge=se+Q;V=i6(W,ge===0?null:await(async()=>{const G=new _(ge,Math.ceil(W.context.length/128)*128,U.sampleRate),j=[],z=[];for(let ce=0;ce<T.numberOfInputs;ce+=1)j.push(u(G,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),z.push(a(G,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const X=await Promise.all(Array.from(W.parameters.values()).map(async ce=>{const pe=o(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ce.value});return await b(G,ce,pe.offset),pe})),ie=s(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,se+Q)});for(let ce=0;ce<T.numberOfInputs;ce+=1){j[ce].connect(z[ce]);for(let pe=0;pe<T.channelCount;pe+=1)z[ce].connect(ie,pe,ce*T.channelCount+pe)}for(const[ce,pe]of X.entries())pe.connect(ie,0,se+ce),pe.start(0);return ie.connect(G.destination),await Promise.all(j.map(ce=>N(W,G,ce))),A(G)})(),U,T,M,R,d)}const F=await V,J=t(U,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[te,ae,H]=B;F!==null&&(J.buffer=F,J.start(0)),J.connect(te);for(let se=0,Q=0;se<W.numberOfOutputs;se+=1){const ge=ae[se];for(let ue=0;ue<M[se];ue+=1)te.connect(ge,Q+ue,ue);Q+=M[se]}return H}if(ee)for(const[F,J]of W.parameters.entries())await r(U,J,L.parameters.get(F));else for(const[F,J]of W.parameters.entries())await b(U,J,L.parameters.get(F));return await N(W,U,L),L};return{render(W,U){c(U,W);const L=O.get(U);return L!==void 0?Promise.resolve(L):I(W,U)}}},o6=(r,e,t,s,a,o,u,c,f,d,p,y,_,b,N,A,k,T,R,O)=>class extends N{constructor(I,W){super(I,W),this._nativeContext=I,this._audioWorklet=r===void 0?void 0:{addModule:(U,L)=>r(this,U,L)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(I,W,U){return new t({length:W,numberOfChannels:I,sampleRate:U})}createBufferSource(){return new s(this)}createChannelMerger(I=6){return new o(this,{numberOfInputs:I})}createChannelSplitter(I=6){return new u(this,{numberOfOutputs:I})}createConstantSource(){return new c(this)}createConvolver(){return new f(this)}createDelay(I=1){return new p(this,{maxDelayTime:I})}createDynamicsCompressor(){return new y(this)}createGain(){return new _(this)}createIIRFilter(I,W){return new b(this,{feedback:W,feedforward:I})}createOscillator(){return new A(this)}createPanner(){return new k(this)}createPeriodicWave(I,W,U={disableNormalization:!1}){return new T(this,{...U,imag:W,real:I})}createStereoPanner(){return new R(this)}createWaveShaper(){return new O(this)}decodeAudioData(I,W,U){return d(this._nativeContext,I).then(L=>(typeof W=="function"&&W(L),L),L=>{throw typeof U=="function"&&U(L),L})}},l6={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},c6=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,p){const y=o(d),_={...l6,...p},b=a(y,_),N=u(y),A=N?t():null;super(d,!1,b,A),this._Q=e(this,N,b.Q,bi,qi),this._detune=e(this,N,b.detune,1200*Math.log2(bi),-1200*Math.log2(bi)),this._frequency=e(this,N,b.frequency,d.sampleRate/2,0),this._gain=e(this,N,b.gain,40*Math.log10(bi),qi),this._nativeBiquadFilterNode=b,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,p,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,p,y)}catch(_){throw _.code===11?s():_}if(d.length!==p.length||p.length!==y.length)throw s()}},u6=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=oi(d,f);if(!p){const y={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=e(f,y)}return o.set(f,d),p?(await r(f,c.Q,d.Q),await r(f,c.detune,d.detune),await r(f,c.frequency,d.frequency),await r(f,c.gain,d.gain)):(await s(f,c.Q,d.Q),await s(f,c.detune,d.detune),await s(f,c.frequency,d.frequency),await s(f,c.gain,d.gain)),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},h6=(r,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const o=r.get(t);if(o!==void 0)return o;try{const u=s();return u instanceof Promise?(r.set(t,u),u.catch(()=>!1).then(c=>(r.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},f6={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},d6=(r,e,t,s,a)=>class extends r{constructor(u,c){const f=s(u),d={...f6,...c},p=t(f,d),y=a(f)?e():null;super(u,!1,p,y)}},p6=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!oi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=r(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},m6={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},g6=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=s(c),p=o({...m6,...f}),y=t(d,p),_=a(d)?e():null;super(c,!1,y,_)}},b6=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!oi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=r(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},v6=r=>(e,t,s)=>r(t,e,s),y6=r=>(e,t,s=0,a=0)=>{const o=e[s];if(o===void 0)throw r();return sp(t)?o.connect(t,0,a):o.connect(t,0)},x6=r=>(e,t)=>{const s=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},w6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},_6=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const p=a(f),y={...w6,...d},_=s(p,y),b=o(p),N=b?t():null;super(f,!1,_,N),this._constantSourceNodeRenderer=N,this._nativeConstantSourceNode=_,this._offset=e(this,b,_.offset,bi,qi),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const d=typeof f=="function"?u(this,f):null;this._nativeConstantSourceNode.onended=d;const p=this._nativeConstantSourceNode.onended;this._onended=p!==null&&p===d?f:p}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){Oh(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),Tl(this)&&pd(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},S6=(r,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const f=async(d,p)=>{let y=t(d);const _=oi(y,p);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=e(p,b),u!==null&&y.start(u),c!==null&&y.stop(c)}return o.set(p,y),_?await r(p,d.offset,y.offset):await s(p,d.offset,y.offset),await a(d,p,y),y};return{set start(d){u=d},set stop(d){c=d},render(d,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):f(d,p)}}},N6=r=>e=>(r[0]=e,r[0]),A6={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},C6=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=s(c),p={...A6,...f},y=t(d,p),b=a(d)?e():null;super(c,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,p.buffer!==null&&o(this,p.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},T6=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!oi(c,u)){const d={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(u,d)}return s.set(u,c),Bh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},k6=(r,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(o){throw o.name==="SyntaxError"?r():o}},j6=()=>new DOMException("","DataCloneError"),kv=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(r,[r])}catch{}finally{a()}})},E6=(r,e,t,s,a,o,u,c,f,d,p)=>(y,_)=>{const b=u(y)?y:o(y);if(a.has(_)){const N=t();return Promise.reject(N)}try{a.add(_)}catch{}return e(f,()=>f(b))?b.decodeAudioData(_).then(N=>(kv(_).catch(()=>{}),e(c,()=>c(N))||p(N),r.add(N),N)):new Promise((N,A)=>{const k=async()=>{try{await kv(_)}catch{}},T=R=>{A(R),k()};try{b.decodeAudioData(_,R=>{typeof R.copyFromChannel!="function"&&(d(R),Mg(R)),r.add(R),k().then(()=>N(R))},R=>{T(R===null?s():R)})}catch(R){T(R)}})},M6=(r,e,t,s,a,o,u,c)=>(f,d)=>{const p=e.get(f);if(p===void 0)throw new Error("Missing the expected cycle count.");const y=o(f.context),_=c(y);if(p===d){if(e.delete(f),!_&&u(f)){const b=s(f),{outputs:N}=t(f);for(const A of N)if(gd(A)){const k=s(A[0]);r(b,k,A[1],A[2])}else{const k=a(A[0]);b.connect(k,A[1])}}}else e.set(f,p-d)},L6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},O6=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const p=a(f),y={...L6,...d},_=s(p,y),b=o(p),N=b?t(y.maxDelayTime):null;super(f,!1,_,N),this._delayTime=e(this,b,_.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},D6=(r,e,t,s,a)=>o=>{const u=new WeakMap,c=async(f,d)=>{let p=t(f);const y=oi(p,d);if(!y){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,delayTime:p.delayTime.value,maxDelayTime:o};p=e(d,_)}return u.set(d,p),y?await r(d,f.delayTime,p.delayTime):await s(d,f.delayTime,p.delayTime),await a(f,d,p),p};return{render(f,d){const p=u.get(d);return p!==void 0?Promise.resolve(p):c(f,d)}}},R6=r=>(e,t,s,a)=>r(e[a],o=>o[0]===t&&o[1]===s),I6=r=>(e,t)=>{r(e).delete(t)},F6=r=>"delayTime"in r,V6=(r,e,t)=>function s(a,o){const u=tp(o)?o:t(r,o);if(F6(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(f=>s([...a,u],f[0])).reduce((f,d)=>f.concat(d),[])},S1=(r,e,t)=>{const s=e[t];if(s===void 0)throw r();return s},B6=r=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(o=>o.disconnect()):typeof t=="number"?S1(r,e,t).disconnect():sp(t)?s===void 0?e.forEach(o=>o.disconnect(t)):a===void 0?S1(r,e,s).disconnect(t,0):S1(r,e,s).disconnect(t,0,a):s===void 0?e.forEach(o=>o.disconnect(t)):S1(r,e,s).disconnect(t,0),z6={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},P6=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,p){const y=o(d),_={...z6,...p},b=s(y,_),N=u(y),A=N?t():null;super(d,!1,b,A),this._attack=e(this,N,b.attack),this._knee=e(this,N,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,N,b.ratio),this._release=e(this,N,b.release),this._threshold=e(this,N,b.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const p=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=p,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const p=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=p,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},q6=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=oi(d,f);if(!p){const y={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=e(f,y)}return o.set(f,d),p?(await r(f,c.attack,d.attack),await r(f,c.knee,d.knee),await r(f,c.ratio,d.ratio),await r(f,c.release,d.release),await r(f,c.threshold,d.threshold)):(await s(f,c.attack,d.attack),await s(f,c.knee,d.knee),await s(f,c.ratio,d.ratio),await s(f,c.release,d.release),await s(f,c.threshold,d.threshold)),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},U6=()=>new DOMException("","EncodingError"),H6=r=>e=>new Promise((t,s)=>{if(r===null){s(new SyntaxError);return}const a=r.document.head;if(a===null)s(new SyntaxError);else{const o=r.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),f=r.onerror,d=()=>{r.onerror=f,URL.revokeObjectURL(c)};r.onerror=(p,y,_,b,N)=>{if(y===c||y===r.location.href&&_===1&&b===1)return d(),s(N),!1;if(f!==null)return f(p,y,_,b,N)},o.onerror=()=>{d(),s(new SyntaxError)},o.onload=()=>{d(),t()},o.src=c,o.type="module",a.appendChild(o)}}),G6=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let o=this._listeners.get(s);o===void 0&&(o=r(this,s),typeof s=="function"&&this._listeners.set(s,o)),this._nativeEventTarget.addEventListener(t,o,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const o=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,o===void 0?null:o,a)}},W6=r=>(e,t,s)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},Y6=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},$6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},X6=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=a(c),p={...$6,...f},y=s(d,p),_=o(d),b=_?t():null;super(c,!1,y,b),this._gain=e(this,_,y.gain,bi,qi)}get gain(){return this._gain}},Z6=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=oi(d,f);if(!p){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=e(f,y)}return o.set(f,d),p?await r(f,c.gain,d.gain):await s(f,c.gain,d.gain),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},Q6=(r,e)=>t=>e(r,t),K6=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},J6=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},eN=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},tN=r=>e=>r.get(e),zs=()=>new DOMException("","InvalidStateError"),nN=r=>e=>{const t=r.get(e);if(t===void 0)throw zs();return t},rN=(r,e)=>t=>{let s=r.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),r.set(t,s),s},sN=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},jp=()=>new DOMException("","InvalidAccessError"),iN=r=>{r.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw jp();return e.call(r,t,s,a)})(r.getFrequencyResponse)},aN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},oN=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=s(c),p=a(d),y={...aN,...f},_=e(d,p?null:c.baseLatency,y),b=p?t(y.feedback,y.feedforward):null;super(c,!1,_,b),iN(_),this._nativeIIRFilterNode=_,o(this,1)}getFrequencyResponse(c,f,d){return this._nativeIIRFilterNode.getFrequencyResponse(c,f,d)}},Ux=(r,e,t,s,a,o,u,c,f,d,p)=>{const y=d.length;let _=c;for(let b=0;b<y;b+=1){let N=t[0]*d[b];for(let A=1;A<a;A+=1){const k=_-A&f-1;N+=t[A]*o[k],N-=r[A]*u[k]}for(let A=a;A<s;A+=1)N+=t[A]*o[_-A&f-1];for(let A=a;A<e;A+=1)N-=r[A]*u[_-A&f-1];o[_]=d[b],u[_]=N,_=_+1&f-1,p[b]=N}return _},lN=(r,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),o=s instanceof Float64Array?s:new Float64Array(s),u=a.length,c=o.length,f=Math.min(u,c);if(a[0]!==1){for(let N=0;N<u;N+=1)o[N]/=a[0];for(let N=1;N<c;N+=1)a[N]/=a[0]}const d=32,p=new Float32Array(d),y=new Float32Array(d),_=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),b=r.numberOfChannels;for(let N=0;N<b;N+=1){const A=r.getChannelData(N),k=_.getChannelData(N);p.fill(0),y.fill(0),Ux(a,u,o,c,f,p,y,0,d,A,k)}return _},cN=(r,e,t,s,a)=>(o,u)=>{const c=new WeakMap;let f=null;const d=async(p,y)=>{let _=null,b=e(p);const N=oi(b,y);if(y.createIIRFilter===void 0?_=r(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):N||(b=y.createIIRFilter(u,o)),c.set(y,_===null?b:_),_!==null){if(f===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new t(p.context.destination.channelCount,p.context.length,y.sampleRate);f=(async()=>{await s(p,k,k.destination);const T=await a(k);return lN(T,y,o,u)})()}const A=await f;return _.buffer=A,_.start(0),_}return await s(p,y,b),b};return{render(p,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):d(p,y)}}},uN=(r,e,t,s,a,o)=>u=>(c,f)=>{const d=r.get(c);if(d===void 0){if(!u&&o(c)){const p=s(c),{outputs:y}=t(c);for(const _ of y)if(gd(_)){const b=s(_[0]);e(p,b,_[1],_[2])}else{const b=a(_[0]);p.disconnect(b,_[1])}}r.set(c,f)}else r.set(c,d+f)},hN=(r,e)=>t=>{const s=r.get(t);return e(s)||e(t)},fN=(r,e)=>t=>r.has(t)||e(t),dN=(r,e)=>t=>r.has(t)||e(t),pN=(r,e)=>t=>{const s=r.get(t);return e(s)||e(t)},mN=r=>e=>r!==null&&e instanceof r,gN=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,bN=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,vN=(r,e)=>t=>r(t)||e(t),yN=r=>e=>r!==null&&e instanceof r,xN=r=>r!==null&&r.isSecureContext,wN=(r,e,t,s)=>class extends r{constructor(o,u){const c=t(o),f=e(c,u);if(s(c))throw TypeError();super(o,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},_N={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},SN=(r,e,t,s)=>class extends r{constructor(o,u){const c=t(o);if(s(c))throw new TypeError;const f={..._N,...u},d=e(c,f);super(o,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},NN=(r,e,t,s)=>class extends r{constructor(o,u){const c=t(o),f=e(c,u);if(s(c))throw new TypeError;super(o,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},AN=(r,e,t)=>class extends r{constructor(a,o){const u=t(a),c=e(u,o);super(a,!0,c,null)}},CN=(r,e,t,s,a,o)=>class extends t{constructor(c,f){super(c),this._nativeContext=c,Tp.set(this,c),s(c)&&a.set(c,new Set),this._destination=new r(this,f),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const f=typeof c=="function"?o(this,c):null;this._nativeContext.onstatechange=f;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===f?c:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ed=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},TN=(r,e)=>(t,s,a)=>{const o=new Set;return t.connect=(u=>(c,f=0,d=0)=>{const p=o.size===0;if(e(c))return u.call(t,c,f,d),r(o,[c,f,d],y=>y[0]===c&&y[1]===f&&y[2]===d,!0),p&&s(),c;u.call(t,c,f),r(o,[c,f],y=>y[0]===c&&y[1]===f,!0),p&&s()})(t.connect),t.disconnect=(u=>(c,f,d)=>{const p=o.size>0;if(c===void 0)u.apply(t),o.clear();else if(typeof c=="number"){u.call(t,c);for(const _ of o)_[1]===c&&o.delete(_)}else{e(c)?u.call(t,c,f,d):u.call(t,c,f);for(const _ of o)_[0]===c&&(f===void 0||_[1]===f)&&(d===void 0||_[2]===d)&&o.delete(_)}const y=o.size===0;p&&y&&a()})(t.disconnect),t},Or=(r,e,t)=>{const s=e[t];s!==void 0&&s!==r[t]&&(r[t]=s)},ks=(r,e)=>{Or(r,e,"channelCount"),Or(r,e,"channelCountMode"),Or(r,e,"channelInterpretation")},jv=r=>typeof r.getFloatTimeDomainData=="function",kN=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const s=Math.max(t.length,r.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},jN=(r,e)=>(t,s)=>{const a=t.createAnalyser();if(ks(a,s),!(s.maxDecibels>s.minDecibels))throw e();return Or(a,s,"fftSize"),Or(a,s,"maxDecibels"),Or(a,s,"minDecibels"),Or(a,s,"smoothingTimeConstant"),r(jv,()=>jv(a))||kN(a),a},EN=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,Qr=(r,e,t)=>{const s=e[t];s!==void 0&&s!==r[t].value&&(r[t].value=s)},MN=r=>{r.start=(e=>{let t=!1;return(s=0,a=0,o)=>{if(t)throw zs();e.call(r,s,a,o),t=!0}})(r.start)},Dg=r=>{r.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,s,a)})(r.start)},Rg=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},LN=(r,e,t,s,a,o,u,c,f,d,p)=>(y,_)=>{const b=y.createBufferSource();return ks(b,_),Qr(b,_,"playbackRate"),Or(b,_,"buffer"),Or(b,_,"loop"),Or(b,_,"loopEnd"),Or(b,_,"loopStart"),e(t,()=>t(y))||MN(b),e(s,()=>s(y))||f(b),e(a,()=>a(y))||d(b,y),e(o,()=>o(y))||Dg(b),e(u,()=>u(y))||p(b,y),e(c,()=>c(y))||Rg(b),r(y,b),b},ON=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,DN=(r,e)=>(t,s,a)=>{const o=t.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}a&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:s});const u=r(t,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>f=>{c.call(u,f);try{o.channelCount=f}catch(d){if(f>o.maxChannelCount)throw d}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>f=>{c.call(u,f),o.channelCountMode=f}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>f=>{c.call(u,f),o.channelInterpretation=f}),Object.defineProperty(u,"maxChannelCount",{get:()=>o.maxChannelCount}),u.connect(o),u},RN=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,IN=r=>{const{port1:e}=new MessageChannel;try{e.postMessage(r)}finally{e.close()}},FN=(r,e,t,s,a)=>(o,u,c,f,d,p)=>{if(c!==null)try{const y=new c(o,f,p),_=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>p.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>b,set:N=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof N=="function"?N:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(N=>(...A)=>{if(A[0]==="processorerror"){const k=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(k!==null){const T=_.get(A[1]);T!==void 0?A[1]=T:(A[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),k(R)):k(new ErrorEvent(A[0],{...R}))},_.set(k,A[1]))}}return N.call(y,"error",A[1],A[2]),N.call(y,...A)})(y.addEventListener),y.removeEventListener=(N=>(...A)=>{if(A[0]==="processorerror"){const k=_.get(A[1]);k!==void 0&&(_.delete(A[1]),A[1]=k)}return N.call(y,"error",A[1],A[2]),N.call(y,A[0],A[1],A[2])})(y.removeEventListener),p.numberOfOutputs!==0){const N=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(N).connect(o.destination),a(y,()=>N.disconnect(),()=>N.connect(o.destination))}return y}catch(y){throw y.code===11?s():y}if(d===void 0)throw s();return IN(p),e(o,u,d,p)},Hx=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),VN=r=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:o})=>{s.close(),a.close(),e(o)},s.onmessageerror=({data:o})=>{s.close(),a.close(),t(o)},a.postMessage(r)}),BN=async(r,e)=>{const t=await VN(e);return new r(t)},zN=(r,e,t,s)=>{let a=Km.get(r);a===void 0&&(a=new WeakMap,Km.set(r,a));const o=BN(t,s);return a.set(e,o),o},PN=(r,e,t,s,a,o,u,c,f,d,p,y,_)=>(b,N,A,k)=>{if(k.numberOfInputs===0&&k.numberOfOutputs===0)throw f();const T=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(T.some(Y=>Y<1))throw f();if(T.length!==k.numberOfOutputs)throw e();if(k.channelCountMode!=="explicit")throw f();const R=k.channelCount*k.numberOfInputs,O=T.reduce((Y,De)=>Y+De,0),V=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(R+V>6||O>6)throw f();const I=new MessageChannel,W=[],U=[];for(let Y=0;Y<k.numberOfInputs;Y+=1)W.push(u(b,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),U.push(a(b,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const L=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:Y,maxValue:De,minValue:dt,name:et}of A.parameterDescriptors){const Me=o(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k.parameterData[et]!==void 0?k.parameterData[et]:Y===void 0?0:Y});Object.defineProperties(Me.offset,{defaultValue:{get:()=>Y===void 0?0:Y},maxValue:{get:()=>De===void 0?bi:De},minValue:{get:()=>dt===void 0?qi:dt}}),L.push(Me)}const B=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+V)}),ee=Hx(N,b.sampleRate),M=c(b,ee,R+V,Math.max(1,O)),F=a(b,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),J=[];for(let Y=0;Y<k.numberOfOutputs;Y+=1)J.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[Y]}));for(let Y=0;Y<k.numberOfInputs;Y+=1){W[Y].connect(U[Y]);for(let De=0;De<k.channelCount;De+=1)U[Y].connect(B,De,Y*k.channelCount+De)}const te=new Px(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:Y},De)=>{const dt=L[De];return dt.connect(B,0,R+De),dt.start(0),[Y,dt.offset]}));B.connect(M);let ae=k.channelInterpretation,H=null;const se=k.numberOfOutputs===0?[M]:J,Q={get bufferSize(){return ee},get channelCount(){return k.channelCount},set channelCount(Y){throw t()},get channelCountMode(){return k.channelCountMode},set channelCountMode(Y){throw t()},get channelInterpretation(){return ae},set channelInterpretation(Y){for(const De of W)De.channelInterpretation=Y;ae=Y},get context(){return M.context},get inputs(){return W},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get onprocessorerror(){return H},set onprocessorerror(Y){typeof H=="function"&&Q.removeEventListener("processorerror",H),H=typeof Y=="function"?Y:null,typeof H=="function"&&Q.addEventListener("processorerror",H)},get parameters(){return te},get port(){return I.port2},addEventListener(...Y){return M.addEventListener(Y[0],Y[1],Y[2])},connect:r.bind(null,se),disconnect:d.bind(null,se),dispatchEvent(...Y){return M.dispatchEvent(Y[0])},removeEventListener(...Y){return M.removeEventListener(Y[0],Y[1],Y[2])}},ge=new Map;I.port1.addEventListener=(Y=>(...De)=>{if(De[0]==="message"){const dt=typeof De[1]=="function"?De[1]:typeof De[1]=="object"&&De[1]!==null&&typeof De[1].handleEvent=="function"?De[1].handleEvent:null;if(dt!==null){const et=ge.get(De[1]);et!==void 0?De[1]=et:(De[1]=Me=>{p(b.currentTime,b.sampleRate,()=>dt(Me))},ge.set(dt,De[1]))}}return Y.call(I.port1,De[0],De[1],De[2])})(I.port1.addEventListener),I.port1.removeEventListener=(Y=>(...De)=>{if(De[0]==="message"){const dt=ge.get(De[1]);dt!==void 0&&(ge.delete(De[1]),De[1]=dt)}return Y.call(I.port1,De[0],De[1],De[2])})(I.port1.removeEventListener);let ue=null;Object.defineProperty(I.port1,"onmessage",{get:()=>ue,set:Y=>{typeof ue=="function"&&I.port1.removeEventListener("message",ue),ue=typeof Y=="function"?Y:null,typeof ue=="function"&&(I.port1.addEventListener("message",ue),I.port1.start())}}),A.prototype.port=I.port1;let G=null;zN(b,Q,A,k).then(Y=>G=Y);const z=ap(k.numberOfInputs,k.channelCount),X=ap(k.numberOfOutputs,T),ie=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((Y,{name:De})=>({...Y,[De]:new Float32Array(128)}),{});let ce=!0;const pe=()=>{k.numberOfOutputs>0&&M.disconnect(F);for(let Y=0,De=0;Y<k.numberOfOutputs;Y+=1){const dt=J[Y];for(let et=0;et<T[Y];et+=1)F.disconnect(dt,De+et,et);De+=T[Y]}},me=new Map;M.onaudioprocess=({inputBuffer:Y,outputBuffer:De})=>{if(G!==null){const dt=y(Q);for(let et=0;et<ee;et+=128){for(let Me=0;Me<k.numberOfInputs;Me+=1)for(let it=0;it<k.channelCount;it+=1)ip(Y,z[Me],it,it,et);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:Me},it)=>{ip(Y,ie,Me,R+it,et)});for(let Me=0;Me<k.numberOfInputs;Me+=1)for(let it=0;it<T[Me];it+=1)X[Me][it].byteLength===0&&(X[Me][it]=new Float32Array(128));try{const Me=z.map((We,ot)=>{if(dt[ot].size>0)return me.set(ot,ee/128),We;const Fe=me.get(ot);return Fe===void 0?[]:(We.every(tt=>tt.every(Ke=>Ke===0))&&(Fe===1?me.delete(ot):me.set(ot,Fe-1)),We)});ce=p(b.currentTime+et/b.sampleRate,b.sampleRate,()=>G.process(Me,X,ie));for(let We=0,ot=0;We<k.numberOfOutputs;We+=1){for(let rt=0;rt<T[We];rt+=1)qx(De,X[We],rt,ot+rt,et);ot+=T[We]}}catch(Me){ce=!1,Q.dispatchEvent(new ErrorEvent("processorerror",{colno:Me.colno,filename:Me.filename,lineno:Me.lineno,message:Me.message}))}if(!ce){for(let Me=0;Me<k.numberOfInputs;Me+=1){W[Me].disconnect(U[Me]);for(let it=0;it<k.channelCount;it+=1)U[et].disconnect(B,it,Me*k.channelCount+it)}if(A.parameterDescriptors!==void 0){const Me=A.parameterDescriptors.length;for(let it=0;it<Me;it+=1){const We=L[it];We.disconnect(B,0,R+it),We.stop()}}B.disconnect(M),M.onaudioprocess=null,Ne?pe():Ge();break}}}};let Ne=!1;const we=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ve=()=>M.connect(we).connect(b.destination),Ge=()=>{M.disconnect(we),we.disconnect()},nt=()=>{if(ce){Ge(),k.numberOfOutputs>0&&M.connect(F);for(let Y=0,De=0;Y<k.numberOfOutputs;Y+=1){const dt=J[Y];for(let et=0;et<T[Y];et+=1)F.connect(dt,De+et,et);De+=T[Y]}}Ne=!0},st=()=>{ce&&(Ve(),pe()),Ne=!1};return Ve(),_(Q,nt,st)},Gx=(r,e)=>{const t=r.createBiquadFilter();return ks(t,e),Qr(t,e,"Q"),Qr(t,e,"detune"),Qr(t,e,"frequency"),Qr(t,e,"gain"),Or(t,e,"type"),t},qN=(r,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,a),ks(a,s),a},UN=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw zs()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw zs()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw zs()}})},bd=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return ks(t,e),UN(t),t},HN=(r,e,t,s,a)=>(o,u)=>{if(o.createConstantSource===void 0)return t(o,u);const c=o.createConstantSource();return ks(c,u),Qr(c,u,"offset"),e(s,()=>s(o))||Dg(c),e(a,()=>a(o))||Rg(c),r(o,c),c},zh=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),GN=(r,e,t,s)=>(a,{offset:o,...u})=>{const c=a.createBuffer(1,2,44100),f=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=t(a,{...u,gain:o}),p=c.getChannelData(0);p[0]=1,p[1]=1,f.buffer=c,f.loop=!0;const y={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(N){d.channelCount=N},get channelCountMode(){return d.channelCountMode},set channelCountMode(N){d.channelCountMode=N},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(N){d.channelInterpretation=N},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return f.onended},set onended(N){f.onended=N},addEventListener(...N){return f.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return f.dispatchEvent(N[0])},removeEventListener(...N){return f.removeEventListener(N[0],N[1],N[2])},start(N=0){f.start.call(f,N)},stop(N=0){f.stop.call(f,N)}},_=()=>f.connect(d),b=()=>f.disconnect(d);return r(a,f),s(zh(y,d),_,b)},WN=(r,e)=>(t,s)=>{const a=t.createConvolver();if(ks(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),Or(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",o=>()=>o.call(a),o=>u=>{if(u>2)throw r();return o.call(a,u)}),s.channelCountMode==="max"))throw r();return e(a,"channelCountMode",o=>()=>o.call(a),o=>u=>{if(u==="max")throw r();return o.call(a,u)}),a},Wx=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return ks(t,e),Qr(t,e,"delayTime"),t},YN=r=>(e,t)=>{const s=e.createDynamicsCompressor();if(ks(s,t),t.channelCount>2||t.channelCountMode==="max")throw r();return Qr(s,t,"attack"),Qr(s,t,"knee"),Qr(s,t,"ratio"),Qr(s,t,"release"),Qr(s,t,"threshold"),s},Hi=(r,e)=>{const t=r.createGain();return ks(t,e),Qr(t,e,"gain"),t},$N=r=>(e,t,s)=>{if(e.createIIRFilter===void 0)return r(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return ks(a,s),a};function XN(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function ZN(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function Ev(r,e){let t=[0,0];for(let s=r.length-1;s>=0;s-=1)t=ZN(t,e),t[0]+=r[s];return t}const QN=(r,e,t,s)=>(a,o,{channelCount:u,channelCountMode:c,channelInterpretation:f,feedback:d,feedforward:p})=>{const y=Hx(o,a.sampleRate),_=d instanceof Float64Array?d:new Float64Array(d),b=p instanceof Float64Array?p:new Float64Array(p),N=_.length,A=b.length,k=Math.min(N,A);if(N===0||N>20)throw s();if(_[0]===0)throw e();if(A===0||A>20)throw s();if(b[0]===0)throw e();if(_[0]!==1){for(let L=0;L<A;L+=1)b[L]/=_[0];for(let L=1;L<N;L+=1)_[L]/=_[0]}const T=t(a,y,u,u);T.channelCount=u,T.channelCountMode=c,T.channelInterpretation=f;const R=32,O=[],V=[],I=[];for(let L=0;L<u;L+=1){O.push(0);const B=new Float32Array(R),ee=new Float32Array(R);B.fill(0),ee.fill(0),V.push(B),I.push(ee)}T.onaudioprocess=L=>{const B=L.inputBuffer,ee=L.outputBuffer,M=B.numberOfChannels;for(let F=0;F<M;F+=1){const J=B.getChannelData(F),te=ee.getChannelData(F);O[F]=Ux(_,N,b,A,k,V[F],I[F],O[F],R,J,te)}};const W=a.sampleRate/2;return zh({get bufferSize(){return y},get channelCount(){return T.channelCount},set channelCount(L){T.channelCount=L},get channelCountMode(){return T.channelCountMode},set channelCountMode(L){T.channelCountMode=L},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(L){T.channelInterpretation=L},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...L){return T.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return T.dispatchEvent(L[0])},getFrequencyResponse(L,B,ee){if(L.length!==B.length||B.length!==ee.length)throw r();const M=L.length;for(let F=0;F<M;F+=1){const J=-Math.PI*(L[F]/W),te=[Math.cos(J),Math.sin(J)],ae=Ev(b,te),H=Ev(_,te),se=XN(ae,H);B[F]=Math.sqrt(se[0]*se[0]+se[1]*se[1]),ee[F]=Math.atan2(se[1],se[0])}},removeEventListener(...L){return T.removeEventListener(L[0],L[1],L[2])}},T)},KN=(r,e)=>r.createMediaElementSource(e.mediaElement),JN=(r,e)=>{const t=r.createMediaStreamDestination();return ks(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},eA=(r,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((o,u)=>o.id<u.id?-1:o.id>u.id?1:0);const s=t.slice(0,1),a=r.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},tA=(r,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),o=t.createMediaStreamSource(a);if(s.kind!=="audio")throw r();if(e(t))throw new TypeError;return o},nA=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,rA=(r,e,t,s,a,o)=>(u,c)=>{const f=u.createOscillator();return ks(f,c),Qr(f,c,"detune"),Qr(f,c,"frequency"),c.periodicWave!==void 0?f.setPeriodicWave(c.periodicWave):Or(f,c,"type"),e(t,()=>t(u))||Dg(f),e(s,()=>s(u))||o(f,u),e(a,()=>a(u))||Rg(f),r(u,f),f},sA=r=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?r(e,t):(ks(s,t),Qr(s,t,"orientationX"),Qr(s,t,"orientationY"),Qr(s,t,"orientationZ"),Qr(s,t,"positionX"),Qr(s,t,"positionY"),Qr(s,t,"positionZ"),Or(s,t,"coneInnerAngle"),Or(s,t,"coneOuterAngle"),Or(s,t,"coneOuterGain"),Or(s,t,"distanceModel"),Or(s,t,"maxDistance"),Or(s,t,"panningModel"),Or(s,t,"refDistance"),Or(s,t,"rolloffFactor"),s)},iA=(r,e,t,s,a,o,u,c,f,d)=>(p,{coneInnerAngle:y,coneOuterAngle:_,coneOuterGain:b,distanceModel:N,maxDistance:A,orientationX:k,orientationY:T,orientationZ:R,panningModel:O,positionX:V,positionY:I,positionZ:W,refDistance:U,rolloffFactor:L,...B})=>{const ee=p.createPanner();if(B.channelCount>2||B.channelCountMode==="max")throw u();ks(ee,B);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=t(p,{...M,channelInterpretation:"speakers",numberOfInputs:6}),J=s(p,{...B,gain:1}),te=s(p,{...M,gain:1}),ae=s(p,{...M,gain:0}),H=s(p,{...M,gain:0}),se=s(p,{...M,gain:0}),Q=s(p,{...M,gain:0}),ge=s(p,{...M,gain:0}),ue=a(p,256,6,1),G=o(p,{...M,curve:new Float32Array([1,1]),oversample:"none"});let j=[k,T,R],z=[V,I,W];const X=new Float32Array(1);ue.onaudioprocess=({inputBuffer:me})=>{const Ne=[f(me,X,0),f(me,X,1),f(me,X,2)];Ne.some((Ve,Ge)=>Ve!==j[Ge])&&(ee.setOrientation(...Ne),j=Ne);const we=[f(me,X,3),f(me,X,4),f(me,X,5)];we.some((Ve,Ge)=>Ve!==z[Ge])&&(ee.setPosition(...we),z=we)},Object.defineProperty(ae.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ge.gain,"defaultValue",{get:()=>0});const ie={get bufferSize(){},get channelCount(){return ee.channelCount},set channelCount(me){if(me>2)throw u();J.channelCount=me,ee.channelCount=me},get channelCountMode(){return ee.channelCountMode},set channelCountMode(me){if(me==="max")throw u();J.channelCountMode=me,ee.channelCountMode=me},get channelInterpretation(){return ee.channelInterpretation},set channelInterpretation(me){J.channelInterpretation=me,ee.channelInterpretation=me},get coneInnerAngle(){return ee.coneInnerAngle},set coneInnerAngle(me){ee.coneInnerAngle=me},get coneOuterAngle(){return ee.coneOuterAngle},set coneOuterAngle(me){ee.coneOuterAngle=me},get coneOuterGain(){return ee.coneOuterGain},set coneOuterGain(me){if(me<0||me>1)throw e();ee.coneOuterGain=me},get context(){return ee.context},get distanceModel(){return ee.distanceModel},set distanceModel(me){ee.distanceModel=me},get inputs(){return[J]},get maxDistance(){return ee.maxDistance},set maxDistance(me){if(me<0)throw new RangeError;ee.maxDistance=me},get numberOfInputs(){return ee.numberOfInputs},get numberOfOutputs(){return ee.numberOfOutputs},get orientationX(){return te.gain},get orientationY(){return ae.gain},get orientationZ(){return H.gain},get panningModel(){return ee.panningModel},set panningModel(me){ee.panningModel=me},get positionX(){return se.gain},get positionY(){return Q.gain},get positionZ(){return ge.gain},get refDistance(){return ee.refDistance},set refDistance(me){if(me<0)throw new RangeError;ee.refDistance=me},get rolloffFactor(){return ee.rolloffFactor},set rolloffFactor(me){if(me<0)throw new RangeError;ee.rolloffFactor=me},addEventListener(...me){return J.addEventListener(me[0],me[1],me[2])},dispatchEvent(...me){return J.dispatchEvent(me[0])},removeEventListener(...me){return J.removeEventListener(me[0],me[1],me[2])}};y!==ie.coneInnerAngle&&(ie.coneInnerAngle=y),_!==ie.coneOuterAngle&&(ie.coneOuterAngle=_),b!==ie.coneOuterGain&&(ie.coneOuterGain=b),N!==ie.distanceModel&&(ie.distanceModel=N),A!==ie.maxDistance&&(ie.maxDistance=A),k!==ie.orientationX.value&&(ie.orientationX.value=k),T!==ie.orientationY.value&&(ie.orientationY.value=T),R!==ie.orientationZ.value&&(ie.orientationZ.value=R),O!==ie.panningModel&&(ie.panningModel=O),V!==ie.positionX.value&&(ie.positionX.value=V),I!==ie.positionY.value&&(ie.positionY.value=I),W!==ie.positionZ.value&&(ie.positionZ.value=W),U!==ie.refDistance&&(ie.refDistance=U),L!==ie.rolloffFactor&&(ie.rolloffFactor=L),(j[0]!==1||j[1]!==0||j[2]!==0)&&ee.setOrientation(...j),(z[0]!==0||z[1]!==0||z[2]!==0)&&ee.setPosition(...z);const ce=()=>{J.connect(ee),r(J,G,0,0),G.connect(te).connect(F,0,0),G.connect(ae).connect(F,0,1),G.connect(H).connect(F,0,2),G.connect(se).connect(F,0,3),G.connect(Q).connect(F,0,4),G.connect(ge).connect(F,0,5),F.connect(ue).connect(p.destination)},pe=()=>{J.disconnect(ee),c(J,G,0,0),G.disconnect(te),te.disconnect(F),G.disconnect(ae),ae.disconnect(F),G.disconnect(H),H.disconnect(F),G.disconnect(se),se.disconnect(F),G.disconnect(Q),Q.disconnect(F),G.disconnect(ge),ge.disconnect(F),F.disconnect(ue),ue.disconnect(p.destination)};return d(zh(ie,ee),ce,pe)},aA=r=>(e,{disableNormalization:t,imag:s,real:a})=>{const o=s instanceof Float32Array?s:new Float32Array(s),u=a instanceof Float32Array?a:new Float32Array(a),c=e.createPeriodicWave(u,o,{disableNormalization:t});if(Array.from(s).length<2)throw r();return c},vd=(r,e,t,s)=>r.createScriptProcessor(e,t,s),oA=(r,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,s);const o=t.createStereoPanner();return ks(o,s),Qr(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw e()}}),o},lA=(r,e,t,s,a,o)=>{const c=new Float32Array([1,1]),f=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},p={...d,oversample:"none"},y=(N,A,k,T)=>{const R=new Float32Array(16385),O=new Float32Array(16385);for(let B=0;B<16385;B+=1){const ee=B/16384*f;R[B]=Math.cos(ee),O[B]=Math.sin(ee)}const V=t(N,{...d,gain:0}),I=s(N,{...p,curve:R}),W=s(N,{...p,curve:c}),U=t(N,{...d,gain:0}),L=s(N,{...p,curve:O});return{connectGraph(){A.connect(V),A.connect(W.inputs===void 0?W:W.inputs[0]),A.connect(U),W.connect(k),k.connect(I.inputs===void 0?I:I.inputs[0]),k.connect(L.inputs===void 0?L:L.inputs[0]),I.connect(V.gain),L.connect(U.gain),V.connect(T,0,0),U.connect(T,0,1)},disconnectGraph(){A.disconnect(V),A.disconnect(W.inputs===void 0?W:W.inputs[0]),A.disconnect(U),W.disconnect(k),k.disconnect(I.inputs===void 0?I:I.inputs[0]),k.disconnect(L.inputs===void 0?L:L.inputs[0]),I.disconnect(V.gain),L.disconnect(U.gain),V.disconnect(T,0,0),U.disconnect(T,0,1)}}},_=(N,A,k,T)=>{const R=new Float32Array(16385),O=new Float32Array(16385),V=new Float32Array(16385),I=new Float32Array(16385),W=Math.floor(16385/2);for(let se=0;se<16385;se+=1)if(se>W){const Q=(se-W)/(16384-W)*f;R[se]=Math.cos(Q),O[se]=Math.sin(Q),V[se]=0,I[se]=1}else{const Q=se/(16384-W)*f;R[se]=1,O[se]=0,V[se]=Math.cos(Q),I[se]=Math.sin(Q)}const U=e(N,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),L=t(N,{...d,gain:0}),B=s(N,{...p,curve:R}),ee=t(N,{...d,gain:0}),M=s(N,{...p,curve:O}),F=s(N,{...p,curve:c}),J=t(N,{...d,gain:0}),te=s(N,{...p,curve:V}),ae=t(N,{...d,gain:0}),H=s(N,{...p,curve:I});return{connectGraph(){A.connect(U),A.connect(F.inputs===void 0?F:F.inputs[0]),U.connect(L,0),U.connect(ee,0),U.connect(J,1),U.connect(ae,1),F.connect(k),k.connect(B.inputs===void 0?B:B.inputs[0]),k.connect(M.inputs===void 0?M:M.inputs[0]),k.connect(te.inputs===void 0?te:te.inputs[0]),k.connect(H.inputs===void 0?H:H.inputs[0]),B.connect(L.gain),M.connect(ee.gain),te.connect(J.gain),H.connect(ae.gain),L.connect(T,0,0),J.connect(T,0,0),ee.connect(T,0,1),ae.connect(T,0,1)},disconnectGraph(){A.disconnect(U),A.disconnect(F.inputs===void 0?F:F.inputs[0]),U.disconnect(L,0),U.disconnect(ee,0),U.disconnect(J,1),U.disconnect(ae,1),F.disconnect(k),k.disconnect(B.inputs===void 0?B:B.inputs[0]),k.disconnect(M.inputs===void 0?M:M.inputs[0]),k.disconnect(te.inputs===void 0?te:te.inputs[0]),k.disconnect(H.inputs===void 0?H:H.inputs[0]),B.disconnect(L.gain),M.disconnect(ee.gain),te.disconnect(J.gain),H.disconnect(ae.gain),L.disconnect(T,0,0),J.disconnect(T,0,0),ee.disconnect(T,0,1),ae.disconnect(T,0,1)}}},b=(N,A,k,T,R)=>{if(A===1)return y(N,k,T,R);if(A===2)return _(N,k,T,R);throw a()};return(N,{channelCount:A,channelCountMode:k,pan:T,...R})=>{if(k==="max")throw a();const O=r(N,{...R,channelCount:1,channelCountMode:k,numberOfInputs:2}),V=t(N,{...R,channelCount:A,channelCountMode:k,gain:1}),I=t(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:W,disconnectGraph:U}=b(N,A,V,I,O);Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"maxValue",{get:()=>1}),Object.defineProperty(I.gain,"minValue",{get:()=>-1});const L={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(F){V.channelCount!==F&&(B&&U(),{connectGraph:W,disconnectGraph:U}=b(N,F,V,I,O),B&&W()),V.channelCount=F},get channelCountMode(){return V.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw a();V.channelCountMode=F},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(F){V.channelInterpretation=F},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return I.gain},addEventListener(...F){return V.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return V.dispatchEvent(F[0])},removeEventListener(...F){return V.removeEventListener(F[0],F[1],F[2])}};let B=!1;const ee=()=>{W(),B=!0},M=()=>{U(),B=!1};return o(zh(L,O),ee,M)}},cA=(r,e,t,s,a,o,u)=>(c,f)=>{const d=c.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,f);ks(d,f);const p=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(p!==null&&p.length<2)throw e();Or(d,{curve:p},"curve"),Or(d,f,"oversample");let y=null,_=!1;return u(d,"curve",A=>()=>A.call(d),A=>k=>(A.call(d,k),_&&(s(k)&&y===null?y=r(c,d):!s(k)&&y!==null&&(y(),y=null)),k)),a(d,()=>{_=!0,s(d.curve)&&(y=r(c,d))},()=>{_=!1,y!==null&&(y(),y=null)})},uA=(r,e,t,s,a)=>(o,{curve:u,oversample:c,...f})=>{const d=o.createWaveShaper(),p=o.createWaveShaper();ks(d,f),ks(p,f);const y=t(o,{...f,gain:1}),_=t(o,{...f,gain:-1}),b=t(o,{...f,gain:1}),N=t(o,{...f,gain:-1});let A=null,k=!1,T=null;const R={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(I){y.channelCount=I,_.channelCount=I,d.channelCount=I,b.channelCount=I,p.channelCount=I,N.channelCount=I},get channelCountMode(){return d.channelCountMode},set channelCountMode(I){y.channelCountMode=I,_.channelCountMode=I,d.channelCountMode=I,b.channelCountMode=I,p.channelCountMode=I,N.channelCountMode=I},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(I){y.channelInterpretation=I,_.channelInterpretation=I,d.channelInterpretation=I,b.channelInterpretation=I,p.channelInterpretation=I,N.channelInterpretation=I},get context(){return d.context},get curve(){return T},set curve(I){if(I!==null&&I.length<2)throw e();if(I===null)d.curve=I,p.curve=I;else{const W=I.length,U=new Float32Array(W+2-W%2),L=new Float32Array(W+2-W%2);U[0]=I[0],L[0]=-I[W-1];const B=Math.ceil((W+1)/2),ee=(W+1)/2-1;for(let M=1;M<B;M+=1){const F=M/B*ee,J=Math.floor(F),te=Math.ceil(F);U[M]=J===te?I[J]:(1-(F-J))*I[J]+(1-(te-F))*I[te],L[M]=J===te?-I[W-1-J]:-((1-(F-J))*I[W-1-J])-(1-(te-F))*I[W-1-te]}U[B]=W%2===1?I[B-1]:(I[B-2]+I[B-1])/2,d.curve=U,p.curve=L}T=I,k&&(s(T)&&A===null?A=r(o,y):A!==null&&(A(),A=null))},get inputs(){return[y]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(I){d.oversample=I,p.oversample=I},addEventListener(...I){return y.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return y.dispatchEvent(I[0])},removeEventListener(...I){return y.removeEventListener(I[0],I[1],I[2])}};u!==null&&(R.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==R.oversample&&(R.oversample=c);const O=()=>{y.connect(d).connect(b),y.connect(_).connect(p).connect(N).connect(b),k=!0,s(T)&&(A=r(o,y))},V=()=>{y.disconnect(d),d.disconnect(b),y.disconnect(_),_.disconnect(p),p.disconnect(N),N.disconnect(b),k=!1,A!==null&&(A(),A=null)};return a(zh(R,b),O,V)},xi=()=>new DOMException("","NotSupportedError"),hA={numberOfChannels:1},fA=(r,e,t,s,a)=>class extends r{constructor(u,c,f){let d;if(typeof u=="number"&&c!==void 0&&f!==void 0)d={length:c,numberOfChannels:u,sampleRate:f};else if(typeof u=="object")d=u;else throw new Error("The given parameters are not valid.");const{length:p,numberOfChannels:y,sampleRate:_}={...hA,...d},b=s(y,p,_);e(ed,()=>ed(b))||b.addEventListener("statechange",(()=>{let N=0;const A=k=>{this._state==="running"&&(N>0?(b.removeEventListener("statechange",A),k.stopImmediatePropagation(),this._waitForThePromiseToSettle(k)):N+=1)};return A})()),super(b,y),this._length=p,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Fx(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},dA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},pA=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const p=a(f),y={...dA,...d},_=t(p,y),b=o(p),N=b?s():null,A=f.sampleRate/2;super(f,!1,_,N),this._detune=e(this,b,_.detune,153600,-153600),this._frequency=e(this,b,_.frequency,A,-A),this._nativeOscillatorNode=_,this._onended=null,this._oscillatorNodeRenderer=N,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const d=typeof f=="function"?u(this,f):null;this._nativeOscillatorNode.onended=d;const p=this._nativeOscillatorNode.onended;this._onended=p!==null&&p===d?f:p}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){Oh(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),Tl(this)&&pd(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},mA=(r,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null,f=null;const d=async(p,y)=>{let _=t(p);const b=oi(_,y);if(!b){const N={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,periodicWave:u===null?void 0:u,type:_.type};_=e(y,N),c!==null&&_.start(c),f!==null&&_.stop(f)}return o.set(y,_),b?(await r(y,p.detune,_.detune),await r(y,p.frequency,_.frequency)):(await s(y,p.detune,_.detune),await s(y,p.frequency,_.frequency)),await a(p,y,_),_};return{set periodicWave(p){u=p},set start(p){c=p},set stop(p){f=p},render(p,y){const _=o.get(y);return _!==void 0?Promise.resolve(_):d(p,y)}}},gA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},bA=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const p=a(f),y={...gA,...d},_=t(p,y),b=o(p),N=b?s():null;super(f,!1,_,N),this._nativePannerNode=_,this._orientationX=e(this,b,_.orientationX,bi,qi),this._orientationY=e(this,b,_.orientationY,bi,qi),this._orientationZ=e(this,b,_.orientationZ,bi,qi),this._positionX=e(this,b,_.positionX,bi,qi),this._positionY=e(this,b,_.positionY,bi,qi),this._positionZ=e(this,b,_.positionZ,bi,qi),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},vA=(r,e,t,s,a,o,u,c,f,d)=>()=>{const p=new WeakMap;let y=null;const _=async(b,N)=>{let A=null,k=o(b);const T={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},R={...T,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},O=oi(k,N);if("bufferSize"in k)A=s(N,{...T,gain:1});else if(!O){const V={...R,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=a(N,V)}if(p.set(N,A===null?k:A),A!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new u(6,b.context.length,N.sampleRate),F=e(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(M.destination),y=(async()=>{const J=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(te,ae)=>{const H=t(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ae===0?1:0});return await c(M,te,H.offset),H}));for(let te=0;te<6;te+=1)J[te].connect(F,0,te),J[te].start(0);return d(M)})()}const V=await y,I=s(N,{...T,gain:1});await f(b,N,I);const W=[];for(let M=0;M<V.numberOfChannels;M+=1)W.push(V.getChannelData(M));let U=[W[0][0],W[1][0],W[2][0]],L=[W[3][0],W[4][0],W[5][0]],B=s(N,{...T,gain:1}),ee=a(N,{...R,orientationX:U[0],orientationY:U[1],orientationZ:U[2],positionX:L[0],positionY:L[1],positionZ:L[2]});I.connect(B).connect(ee.inputs[0]),ee.connect(A);for(let M=128;M<V.length;M+=128){const F=[W[0][M],W[1][M],W[2][M]],J=[W[3][M],W[4][M],W[5][M]];if(F.some((te,ae)=>te!==U[ae])||J.some((te,ae)=>te!==L[ae])){U=F,L=J;const te=M/N.sampleRate;B.gain.setValueAtTime(0,te),B=s(N,{...T,gain:0}),ee=a(N,{...R,orientationX:U[0],orientationY:U[1],orientationZ:U[2],positionX:L[0],positionY:L[1],positionZ:L[2]}),B.gain.setValueAtTime(1,te),I.connect(B).connect(ee.inputs[0]),ee.connect(A)}}return A}return O?(await r(N,b.orientationX,k.orientationX),await r(N,b.orientationY,k.orientationY),await r(N,b.orientationZ,k.orientationZ),await r(N,b.positionX,k.positionX),await r(N,b.positionY,k.positionY),await r(N,b.positionZ,k.positionZ)):(await c(N,b.orientationX,k.orientationX),await c(N,b.orientationY,k.orientationY),await c(N,b.orientationZ,k.orientationZ),await c(N,b.positionX,k.positionX),await c(N,b.positionY,k.positionY),await c(N,b.positionZ,k.positionZ)),Bh(k)?await f(b,N,k.inputs[0]):await f(b,N,k),k};return{render(b,N){const A=p.get(N);return A!==void 0?Promise.resolve(A):_(b,N)}}},yA={disableNormalization:!1},xA=(r,e,t,s)=>class Yx{constructor(o,u){const c=e(o),f=s({...yA,...u}),d=r(c,f);return t.add(d),d}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===Yx.prototype||t.has(o)}},wA=(r,e)=>(t,s,a)=>(r(s).replay(a),e(s,t,a)),_A=(r,e,t)=>async(s,a,o)=>{const u=r(s);await Promise.all(u.activeInputs.map((c,f)=>Array.from(c).map(async([d,p])=>{const _=await e(d).render(d,a),b=s.context.destination;!t(d)&&(s!==b||!t(s))&&_.connect(o,p,f)})).reduce((c,f)=>[...c,...f],[]))},SA=(r,e,t)=>async(s,a,o)=>{const u=e(s);await Promise.all(Array.from(u.activeInputs).map(async([c,f])=>{const p=await r(c).render(c,a);t(c)||p.connect(o,f)}))},NA=(r,e,t,s)=>a=>r(ed,()=>ed(a))?Promise.resolve(r(s,s)).then(o=>{if(!o){const u=t(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(o=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{u.disconnect(),o(c.renderedBuffer)},u.connect(a.destination),a.startRendering()}),AA=r=>(e,t)=>{r.set(e,t)},CA=r=>(e,t)=>r.set(e,t),TA=(r,e,t,s,a,o,u,c)=>(f,d)=>t(f).render(f,d).then(()=>Promise.all(Array.from(s(d)).map(p=>t(p).render(p,d)))).then(()=>a(d)).then(p=>(typeof p.copyFromChannel!="function"?(u(p),Mg(p)):e(o,()=>o(p))||c(p),r.add(p),p)),kA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},jA=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=a(c),p={...kA,...f},y=t(d,p),_=o(d),b=_?s():null;super(c,!1,y,b),this._pan=e(this,_,y.pan)}get pan(){return this._pan}},EA=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=oi(d,f);if(!p){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=e(f,y)}return o.set(f,d),p?await r(f,c.pan,d.pan):await s(f,c.pan,d.pan),Bh(d)?await a(c,f,d.inputs[0]):await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},MA=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},LA=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let o=!1,u=!1;try{await s.audioWorklet.addModule(a);const c=new r(s,"a",{numberOfOutputs:0}),f=s.createOscillator();c.port.onmessage=()=>o=!0,c.onprocessorerror=()=>u=!0,f.connect(c),f.start(0),await s.startRendering(),await new Promise(d=>setTimeout(d))}catch{}finally{URL.revokeObjectURL(a)}return o&&!u},OA=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},DA=()=>new DOMException("","UnknownError"),RA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},IA=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const p=a(f),y={...RA,...d},_=t(p,y),N=o(p)?s():null;super(f,!0,_,N),this._isCurveNullified=!1,this._nativeWaveShaperNode=_,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},FA=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!oi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=r(u,d)}return s.set(u,c),Bh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},VA=()=>typeof window>"u"?null:window,BA=(r,e)=>t=>{t.copyFromChannel=(s,a,o=0)=>{const u=r(o),c=r(a);if(c>=t.numberOfChannels)throw e();const f=t.length,d=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<f&&y<p;y+=1)s[y]=d[y+u]},t.copyToChannel=(s,a,o=0)=>{const u=r(o),c=r(a);if(c>=t.numberOfChannels)throw e();const f=t.length,d=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<f&&y<p;y+=1)d[y+u]=s[y]}},zA=r=>e=>{e.copyFromChannel=(t=>(s,a,o=0)=>{const u=r(o),c=r(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,o=0)=>{const u=r(o),c=r(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyToChannel)},PA=r=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),r(e,"buffer",a=>()=>{const o=a.call(e);return o===s?null:o},a=>o=>a.call(e,o===null?s:o))},qA=(r,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const a=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let f=0;f<c;f+=1)a.connect(s,0,f)},()=>a.disconnect(s))},$x=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),Xx=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},yd=(r,e,t,s)=>{let a=r;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:o,set:u}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(r,e,{get:t(o),set:s(u)})},UA=r=>({...r,outputChannelCount:r.outputChannelCount!==void 0?r.outputChannelCount:r.numberOfInputs===1&&r.numberOfOutputs===1?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}),HA=r=>({...r,channelCount:r.numberOfOutputs}),GA=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},Zx=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Zx(r,e,t+1e-7)}},WA=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},YA=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},$A=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Ig=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Qx=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Fg=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},XA=r=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(r)}finally{e.close(),t.close()}},ZA=r=>{r.start=(e=>(t=0,s=0,a)=>{const o=r.buffer,u=o===null?s:Math.min(o.duration,s);o!==null&&u>o.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,u,a)})(r.start)},Kx=(r,e)=>{const t=e.createGain();r.connect(t);const s=(a=>()=>{a.call(r,t),r.removeEventListener("ended",s)})(r.disconnect);r.addEventListener("ended",s),zh(r,t),r.stop=(a=>{let o=!1;return(u=0)=>{if(o)try{a.call(r,u)}catch{t.gain.setValueAtTime(0,u)}else a.call(r,u),o=!0}})(r.stop)},Ph=(r,e)=>t=>{const s={value:r};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},QA=bS(wu),KA=SS(wu),JA=R6(kp),Jx=new WeakMap,e8=J6(Jx),po=h6(new Map,new WeakMap),Uo=VA(),e3=jN(po,Go),Vg=K6(vi),Zs=_A(vi,Vg,gu),t8=kS(e3,Nr,Zs),gr=nN(Tp),Ll=nA(Uo),or=yN(Ll),t3=new WeakMap,n3=G6(Ph),xd=ON(Uo),Bg=mN(xd),zg=gN(Uo),r3=bN(Uo),td=RN(Uo),is=JS(vS(Ex),_S(QA,KA,np,JA,rp,vi,e8,dd,Nr,wu,Tl,gu,B1),po,uN(Zm,rp,vi,Nr,Jf,Tl),Go,jp,xi,M6(np,Zm,vi,Nr,Jf,gr,Tl,or),V6(t3,vi,co),n3,gr,Bg,zg,r3,or,td),n8=TS(is,t8,Go,e3,gr,or),Pg=new WeakSet,Mv=EN(Uo),s3=N6(new Uint32Array(1)),qg=BA(s3,Go),Ug=zA(s3),i3=ES(Pg,po,xi,Mv,Ll,MA(Mv),qg,Ug),Ep=NS(Hi),a3=SA(Vg,md,gu),Wo=v6(a3),qh=LN(Ep,po,WA,YA,$A,Ig,Qx,Fg,ZA,PA(yd),Kx),Yo=wA(eN(md),a3),r8=OS(Wo,qh,Nr,Yo,Zs),mo=e6(yS(Mx),t3,Eg,t6,hS,fS,dS,pS,mS,Ym,kx,xd,Zx),s8=LS(is,r8,mo,zs,qh,gr,or,Ph),i8=qS(is,US,Go,zs,DN(Hi,yd),gr,or,Zs),a8=u6(Wo,Gx,Nr,Yo,Zs),_u=CA(Jx),o8=c6(is,mo,a8,jp,Gx,gr,or,_u),Ec=TN(wu,zg),l8=qA(zs,Ec),Mc=qN(xd,l8),c8=p6(Mc,Nr,Zs),u8=d6(is,c8,Mc,gr,or),h8=b6(bd,Nr,Zs),f8=g6(is,h8,bd,gr,or,HA),d8=GN(Ep,qh,Hi,Ec),Uh=HN(Ep,po,d8,Ig,Fg),p8=S6(Wo,Uh,Nr,Yo,Zs),m8=_6(is,mo,p8,Uh,gr,or,Ph),o3=WN(xi,yd),g8=T6(o3,Nr,Zs),b8=C6(is,g8,o3,gr,or,_u),v8=D6(Wo,Wx,Nr,Yo,Zs),y8=O6(is,mo,v8,Wx,gr,or,_u),l3=YN(xi),x8=q6(Wo,l3,Nr,Yo,Zs),w8=P6(is,mo,x8,l3,xi,gr,or,_u),_8=Z6(Wo,Hi,Nr,Yo,Zs),S8=X6(is,mo,_8,Hi,gr,or),N8=QN(jp,zs,vd,xi),Mp=NA(po,Hi,vd,OA(Hi,Ll)),A8=cN(qh,Nr,Ll,Zs,Mp),C8=$N(N8),T8=oN(is,C8,A8,gr,or,_u),k8=HS(mo,Mc,Uh,vd,xi,$x,or,yd),c3=new WeakMap,j8=CN(i8,k8,n3,or,c3,Ph),u3=rA(Ep,po,Ig,Qx,Fg,Kx),E8=mA(Wo,u3,Nr,Yo,Zs),M8=pA(is,mo,u3,E8,gr,or,Ph),h3=x6(qh),L8=uA(h3,zs,Hi,Xx,Ec),Lp=cA(h3,zs,L8,Xx,Ec,xd,yd),O8=iA(np,zs,Mc,Hi,vd,Lp,xi,rp,$x,Ec),f3=sA(O8),D8=vA(Wo,Mc,Uh,Hi,f3,Nr,Ll,Yo,Zs,Mp),R8=bA(is,mo,f3,D8,gr,or,_u),I8=aA(Go),F8=xA(I8,gr,new WeakSet,GA),V8=lA(Mc,bd,Hi,Lp,xi,Ec),d3=oA(V8,xi),B8=EA(Wo,d3,Nr,Yo,Zs),z8=jA(is,mo,d3,B8,gr,or),P8=FA(Lp,Nr,Zs),q8=IA(is,zs,Lp,P8,gr,or,_u),p3=xN(Uo),Hg=W6(Uo),m3=new WeakMap,U8=rN(m3,Ll),H8=p3?wS(po,xi,H6(Uo),Hg,Y6(gS),gr,U8,or,td,new WeakMap,new WeakMap,LA(td,Ll),Uo):void 0,G8=vN(Bg,or),W8=E6(Pg,po,j6,U6,new WeakSet,gr,G8,ep,ed,qg,Ug),g3=o6(H8,n8,i3,s8,o8,u8,f8,m8,b8,W8,y8,w8,S8,T8,j8,M8,R8,F8,z8,q8),Y8=wN(is,KN,gr,or),$8=SN(is,JN,gr,or),X8=NN(is,eA,gr,or),Z8=tA(zs,or),Q8=AN(is,Z8,gr),K8=PS(g3,zs,xi,DA,Y8,$8,X8,Q8,xd),Gg=sN(c3),J8=AS(Gg),b3=y6(Go),eC=I6(Gg),v3=B6(Go),y3=new WeakMap,tC=Q6(y3,co),nC=PN(b3,Go,zs,Mc,bd,Uh,Hi,vd,xi,v3,Hg,tC,Ec),rC=FN(zs,nC,Hi,xi,Ec),sC=a6(Wo,b3,qh,Mc,bd,Uh,Hi,eC,v3,Hg,Nr,td,Ll,Yo,Zs,Mp),iC=tN(m3),aC=AA(y3),Lv=p3?r6(J8,is,mo,sC,rC,vi,iC,gr,or,td,UA,aC,XA,Ph):void 0,oC=k6(xi,Ll),lC=TA(Pg,po,Vg,Gg,Mp,ep,qg,Ug),cC=fA(g3,po,zs,oC,lC),uC=hN(Tp,Bg),hC=fN(jg,zg),fC=dN(Eg,r3),dC=pN(Tp,or);function Ea(r){return r===void 0}function Mn(r){return r!==void 0}function pC(r){return typeof r=="function"}function kl(r){return typeof r=="number"}function du(r){return Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object}function mC(r){return typeof r=="boolean"}function ca(r){return Array.isArray(r)}function jl(r){return typeof r=="string"}function N1(r){return jl(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Xt(r,e){if(!r)throw new Error(e)}function El(r,e,t=1/0){if(!(e<=r&&r<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${r}`)}function x3(r){!r.isOffline&&r.state!=="running"&&Op('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let w3=!1,Ov=!1;function Dv(r){w3=r}function gC(r){Ea(r)&&w3&&!Ov&&(Ov=!0,Op("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let _3=console;function bC(...r){_3.log(...r)}function Op(...r){_3.warn(...r)}function vC(r){return new K8(r)}function yC(r,e,t){return new cC(r,e,t)}const aa=typeof self=="object"?self:null,xC=aa&&(aa.hasOwnProperty("AudioContext")||aa.hasOwnProperty("webkitAudioContext"));function wC(r,e,t){return Xt(Mn(Lv),"AudioWorkletNode only works in a secure context (https or localhost)"),new(r instanceof aa?.BaseAudioContext?aa?.AudioWorkletNode:Lv)(r,e,t)}function go(r,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,s);else for(var c=r.length-1;c>=0;c--)(u=r[c])&&(o=(a<3?u(o):a>3?u(e,t,o):u(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function ds(r,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(p){try{d(s.next(p))}catch(y){u(y)}}function f(p){try{d(s.throw(p))}catch(y){u(y)}}function d(p){p.done?o(p.value):a(p.value).then(c,f)}d((s=s.apply(r,e||[])).next())})}class _C{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function bu(r){return fC(r)}function _c(r){return hC(r)}function z1(r){return dC(r)}function vh(r){return uC(r)}function SC(r){return r instanceof i3}function NC(r,e){return r==="value"||bu(e)||_c(e)||SC(e)}function pu(r,...e){if(!e.length)return r;const t=e.shift();if(du(r)&&du(t))for(const s in t)NC(s,t[s])?r[s]=t[s]:du(t[s])?(r[s]||Object.assign(r,{[s]:{}}),pu(r[s],t[s])):Object.assign(r,{[s]:t[s]});return pu(r,...e)}function AC(r,e){return r.length===e.length&&r.every((t,s)=>e[s]===t)}function Wt(r,e,t=[],s){const a={},o=Array.from(e);if(du(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some(c=>Reflect.has(r,c))||(pu(a,{[s]:o[0]}),t.splice(t.indexOf(s),1),o.shift())),o.length===1&&du(o[0]))pu(a,o[0]);else for(let u=0;u<t.length;u++)Mn(o[u])&&(a[t[u]]=o[u]);return pu(r,a)}function CC(r){return r.constructor.getDefaults()}function Ah(r,e){return Ea(r)?e:r}function ao(r,e){return e.forEach(t=>{Reflect.has(r,t)&&delete r[t]}),r}class Ol{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||aa&&this.toString()===aa.TONE_DEBUG_CLASS)&&bC(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ol.version=Tx;const Wg=1e-6;function Dh(r,e){return r>e+Wg}function tg(r,e){return Dh(r,e)||io(r,e)}function op(r,e){return r+Wg<e}function io(r,e){return Math.abs(r-e)<Wg}function TC(r,e,t){return Math.max(Math.min(r,t),e)}class Ma extends Ol{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Wt(Ma.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Xt(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Xt(tg(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(io(this._timeline[t].time,e)){for(let s=t;s>=0&&io(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&tg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let o=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<o;){let u=Math.floor(s+(o-s)/2);const c=this._timeline[u],f=this._timeline[u+1];if(io(c[t],e)){for(let d=u;d<this._timeline.length;d++){const p=this._timeline[d];if(io(p[t],e))u=d;else break}return u}else{if(op(c[t],e)&&Dh(f[t],e))return u;Dh(c[t],e)?o=u:s=u+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),o=this._search(t);return a!==-1&&o!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[o].time===t&&(o-=1),this._iterate(s,a,o)):a===-1&&this._iterate(s,0,o),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&io(this._timeline[s].time,e)){let a=s;for(let o=s;o>=0&&io(this._timeline[o].time,e);o--)a=o;this._iterate(o=>{t(o)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const S3=[];function Dp(r){S3.push(r)}function kC(r){S3.forEach(e=>e(r))}const N3=[];function Rp(r){N3.push(r)}function jC(r){N3.forEach(e=>e(r))}class wd extends Ol{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{Ea(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(Ea(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Ea(t))this._events[a]=[];else{const o=this._events[a];for(let u=o.length-1;u>=0;u--)o[u]===t&&o.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,o=s.length;a<o;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(wd.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class A3 extends wd{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let Yg=class C3 extends A3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ma,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Wt(C3.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=vC({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new _C(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(kC(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Xt(vh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Xt(vh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Xt(vh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Xt(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Xt(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Xt(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Xt(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return wC(this.rawContext,e,t)}addAudioWorkletModule(e){return ds(this,void 0,void 0,function*(){Xt(Mn(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ds(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return vh(this._context)?this._context.resume():Promise.resolve()}close(){return ds(this,void 0,void 0,function*(){vh(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&jC(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let o=0;o<s.length;o++)s[o]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const o=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:o+t})};return a(),s}};class EC extends A3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ds(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ar(r,e){ca(e)?e.forEach(t=>Ar(r,t)):Object.defineProperty(r,e,{enumerable:!0,writable:!1})}function $g(r,e){ca(e)?e.forEach(t=>$g(r,t)):Object.defineProperty(r,e,{writable:!0})}const ar=()=>{};class _r extends Ol{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ar;const e=Wt(_r.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,jl(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ar,onload:ar,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:oo().sampleRate}set(e){return e instanceof _r?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ds(this,void 0,void 0,function*(){const t=_r.load(e).then(s=>{this.set(s),this.onload(this)});_r.downloads.push(t);try{yield t}finally{const s=_r.downloads.indexOf(t);_r.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ca(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,o=oo(),u=o.createBuffer(s,a,o.sampleRate),c=!t&&s===1?[e]:e;for(let f=0;f<s;f++)u.copyToChannel(c[f],f);return this._buffer=u,this}toMono(e){if(kl(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const o=this.toArray(a);for(let u=0;u<o.length;u++)t[u]+=o[u]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(kl(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Xt(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);Xt(s<a,"The start time must be less than the end time");const o=a-s,u=oo().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(s,a),c);return new _r(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new _r().fromArray(e)}static fromUrl(e){return ds(this,void 0,void 0,function*(){return yield new _r().load(e)})}static load(e){return ds(this,void 0,void 0,function*(){const t=_r.baseUrl===""||_r.baseUrl.endsWith("/")?_r.baseUrl:_r.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield oo().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return ds(this,void 0,void 0,function*(){for(yield Promise.resolve();_r.downloads.length;)yield _r.downloads[0]})}}_r.baseUrl="";_r.downloads=[];class Xg extends Yg{constructor(){super({clockSource:"offline",context:z1(arguments[0])?arguments[0]:yC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:z1(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=z1(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ds(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return ds(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new _r(t)})}close(){return Promise.resolve()}}const T3=new EC;let hu=T3;function oo(){return hu===T3&&xC&&MC(new Yg),hu}function MC(r,e=!1){e&&hu.dispose(),vh(r)?hu=new Yg(r):z1(r)?hu=new Xg(r):hu=r}function Su(){return hu.resume()}if(aa&&!aa.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Tx} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function LC(r){return Math.pow(10,r/20)}function OC(r){return 20*(Math.log(r)/Math.LN10)}function k3(r){return Math.pow(2,r/12)}let Ip=440;function DC(){return Ip}function RC(r){Ip=r}function fu(r){return Math.round(j3(r))}function j3(r){return 69+12*Math.log2(r/Ip)}function E3(r){return Ip*Math.pow(2,(r-69)/12)}class Zg extends Ol{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Zg&&this.fromType(this._val),Ea(this._val))return this._noArg();if(jl(this._val)&&Ea(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(du(this._val)){let e=0;for(const t in this._val)if(Mn(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(Mn(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return jl(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class lo extends Zg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new lo(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),c=Math.round(a/s)*s-a;return a+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let o=1;o<9;o++){const u=Math.pow(2,o);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let s=t[0],a=new lo(this.context,t[0]).toSeconds();return t.forEach(o=>{const u=new lo(this.context,o).toSeconds();Math.abs(u-e)<Math.abs(a-e)&&(s=o,a=u)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const o=a.toString();return o.length>3&&(a=parseFloat(parseFloat(o).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return fu(this.toFrequency())}_now(){return this.context.now()}}class oa extends lo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return DC()}static set A4(e){RC(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:oa.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=IC[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:oa.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new oa(this.context,this.valueOf()*k3(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return fu(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/oa.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),FC[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return E3(e)}static ftom(e){return fu(e)}}const IC={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},FC=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Uf extends lo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ui extends Ol{constructor(){super();const e=Wt(Ui.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:oo()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return gC(e),new lo(this.context,e).toSeconds()}toFrequency(e){return new oa(this.context,e).toFrequency()}toTicks(e){return new Uf(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Ea(e[s])&&delete t[s]}),t}get(){const e=CC(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Mn(s)&&Mn(s.value)&&Mn(s.setValueAtTime)?e[t]=s.value:s instanceof Ui?e[t]=s._getPartialProperties(e[t]):ca(s)||kl(s)||jl(s)||mC(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Mn(this[t])&&(this[t]&&Mn(this[t].value)&&Mn(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ui?this[t].set(e[t]):this[t]=e[t])}),this}}class Qg extends Ma{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return El(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const o=this._timeline[a];if(o.state===e)return o}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const o=this._timeline[a];if(o.state===e)return o}}}class pr extends Ui{constructor(){const e=Wt(pr.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Xt(Mn(e.param)&&(bu(e.param)||e.param instanceof pr),"param must be an AudioParam");!bu(e.param);)e.param=e.param._param;this._swappable=Mn(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ma(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Mn(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ui.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Mn(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Mn(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Mn(this.maxValue)&&Mn(this.minValue)&&El(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?LC(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?OC(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return Xt(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let o=this._initialValue;if(a===null)o=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let c;u===null?c=this._initialValue:c=u.value,a.type==="setTargetAtTime"&&(o=this._exponentialApproach(a.time,c,a.value,a.constant,t))}else if(s===null)o=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?u=this._initialValue:u=c.value}s.type==="linearRampToValueAtTime"?o=this._linearInterpolate(a.time,u,s.time,s.value,t):o=this._exponentialInterpolate(a.time,u,s.time,s.value,t)}else o=a.value;return this._toType(o)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return Xt(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=io(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return Xt(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);Xt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(t);return this._assertRange(a),Xt(isFinite(a)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:o,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,o,s),this._param.setTargetAtTime(a,o,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const o=this._fromType(e[0])*a;this.setValueAtTime(this._toType(o),t);const u=s/(e.length-1);for(let c=1;c<e.length;c++){const f=this._fromType(e[c])*a;this.linearRampToValueAtTime(this._toType(f),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Xt(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Xt(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),o=this._events.getAfter(t);return a&&io(a.time,t)?o?(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):o&&(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time),o.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):o.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),o=a?a.time:t+2,u=(o-t)/10;for(let c=t;c<o;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){Xt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,o){return s+(t-s)*Math.exp(-(o-e)/a)}_linearInterpolate(e,t,s,a,o){return t+(a-t)*((o-e)/(s-e))}_exponentialInterpolate(e,t,s,a,o){return t*Math.pow(a/t,(o-e)/(s-e))}}class nn extends Ui{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Mn(this.input)?bu(this.input)||this.input instanceof pr?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Mn(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Mn(e)&&(e instanceof nn||_c(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Xt(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Hh(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Op("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return VC(this,e,t,s),this}chain(...e){return nd(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Mn(this.input)&&(this.input instanceof nn?this.input.dispose():_c(this.input)&&this.input.disconnect()),Mn(this.output)&&(this.output instanceof nn?this.output.dispose():_c(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function nd(...r){const e=r.shift();r.reduce((t,s)=>(t instanceof nn?t.connect(s):_c(t)&&Hh(t,s),s),e)}function Hh(r,e,t=0,s=0){for(Xt(Mn(r),"Cannot connect from undefined node"),Xt(Mn(e),"Cannot connect to undefined node"),(e instanceof nn||_c(e))&&Xt(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Xt(r.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof nn||e instanceof pr;)Mn(e.input)&&(e=e.input);for(;r instanceof nn;)Mn(r.output)&&(r=r.output);bu(e)?r.connect(e,t):r.connect(e,t,s)}function VC(r,e,t=0,s=0){if(Mn(e))for(;e instanceof nn;)e=e.input;for(;!_c(r);)Mn(r.output)&&(r=r.output);bu(e)?r.disconnect(e,t):_c(e)?r.disconnect(e,t,s):r.disconnect()}class ps extends nn{constructor(){const e=Wt(ps.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new pr({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ar(this,"gain")}static getDefaults(){return Object.assign(nn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Rh extends nn{constructor(e){super(e),this.onended=ar,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ps({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(nn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ar})}_startGain(e,t=1){Xt(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Xt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ar&&(this.onended(this),this.onended=ar,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Xt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ar,this}}class Kg extends Rh{constructor(){const e=Wt(Kg.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Hh(this._source,this._gainNode),this.offset=new pr({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Rh.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class mr extends nn{constructor(){const e=Wt(mr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Kg({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(nn.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return Jg(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Jg(r,e,t,s){(e instanceof pr||bu(e)||e instanceof mr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof mr&&(e.overridden=!0)),Hh(r,e,t,s)}class e2 extends pr{constructor(){const e=Wt(e2.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Ma(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(pr.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),o=this._events.get(t),u=Math.round(Math.max(1/s,1));for(let c=0;c<=u;c++){const f=s*c+t,d=this._exponentialApproach(o.time,o.value,a,s,f);this.linearRampToValueAtTime(this._toType(d),f)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),o=Math.round(Math.max((t-a.time)*10,1)),u=(t-a.time)/o;for(let c=0;c<=o;c++){const f=u*c+a.time,d=this._exponentialInterpolate(a.time,a.value,t,s,f);this.linearRampToValueAtTime(this._toType(d),f)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ea(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const o=this._events.get(t);return o&&o.time===t&&o.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),c=Math.sqrt(Math.pow(a,2)-2*u*(t.ticks-e)),f=(-a+c)/u,d=(-a-c)/u;return(f>0?f:d)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),o=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-o}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class t2 extends mr{constructor(){const e=Wt(t2.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new e2({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(mr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class n2 extends Ui{constructor(){const e=Wt(n2.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Qg,this._tickOffset=new Ma,this._ticksAtTime=new Ma,this._secondsAtTime=new Ma,this.frequency=new t2({context:this.context,units:e.units,value:e.frequency}),Ar(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ui.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Mn(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),o={state:"paused",time:t};this._state.add(o);let u=a||s,c=a?a.ticks:0,f=null;return this._state.forEachBetween(u.time,t+this.sampleTime,d=>{let p=u.time;const y=this._tickOffset.get(d.time);y&&y.time>=u.time&&(c=y.ticks,p=y.time),u.state==="started"&&d.state!=="started"&&(c+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(p),d.time!==o.time&&(f={state:d.state,time:d.time,ticks:c})),u=d}),this._state.remove(o),f&&this._ticksAtTime.add(f),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let o=a||t,u=a?a.seconds:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,f=>{let d=o.time;const p=this._tickOffset.get(f.time);p&&p.time>=o.time&&(u=p.seconds,d=p.time),o.state==="started"&&f.state!=="started"&&(u+=f.time-d,f.time!==s.time&&(c={state:f.state,time:f.time,seconds:u})),o=f}),this._state.remove(s),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),o=Math.max(s.time,a.time),u=this.frequency.getTicksAtTime(o)+e-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),u.time-this.sampleTime,s),a=u});let o=null;if(a&&a.state==="started"){const u=Math.max(a.time,e),c=this.frequency.getTicksAtTime(u),f=this.frequency.getTicksAtTime(a.time),d=c-f;let p=Math.ceil(d)-d;p=io(p,1)?0:p;let y=this.frequency.getTimeOfTick(c+p);for(;y<t;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(_){o=_;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let M3=class L3 extends Ui{constructor(){const e=Wt(L3.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=ar,this._lastUpdate=0,this._state=new Qg("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new n2({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ar(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ui.getDefaults(),{callback:ar,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){x3(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};wd.mixin(M3);class Gh extends nn{constructor(){const e=Wt(Gh.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new ps({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ar(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(nn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class r2 extends nn{constructor(){const e=Wt(r2.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Gh({context:this.context}),this.output=new ps({context:this.context}),this.volume=this.input.volume,nd(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(nn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),nd(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Dp(r=>{r.destination=new r2({context:r})});Rp(r=>{r.destination.dispose()});class BC extends nn{constructor(){super(...arguments),this.name="Listener",this.positionX=new pr({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new pr({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new pr({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new pr({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new pr({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new pr({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new pr({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new pr({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new pr({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(nn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Dp(r=>{r.listener=new BC({context:r})});Rp(r=>{r.listener.dispose()});class s2 extends Ol{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Wt(s2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ar,onload:ar,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Xt(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=ar,a=ar){return jl(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new _r(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new _r(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class lp extends oa{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return fu(super._frequencyToUnits(e))}_ticksToUnits(e){return fu(super._ticksToUnits(e))}_beatsToUnits(e){return fu(super._beatsToUnits(e))}_secondsToUnits(e){return fu(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return E3(this.toMidi())}transpose(e){return new lp(this.context,this.toMidi()+e)}}class _h extends Uf{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class zC extends Ui{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ma,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Dp(r=>{r.draw=new zC({context:r})});Rp(r=>{r.draw.dispose()});class PC extends Ol{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Xt(Mn(e.time),"Events must have a time property"),Xt(Mn(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new qC(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class qC{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class UC extends Ol{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ma({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Sc extends nn{constructor(){super(Wt(Sc.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return Jg(this,e,t,s),this}}class _d extends Sc{constructor(){const e=Wt(_d.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ca(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):pC(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(mr.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,o=t;a<o;a++){const u=a/(o-1)*2-1;s[a]=e(u,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Xt(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Fp extends Sc{constructor(){const e=Wt(Fp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new _d({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Sc.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Nc{constructor(e,t){this.id=Nc._eventId++,this._remainderTime=0;const s=Object.assign(Nc.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:ar,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Nc._eventId=0;class i2 extends Nc{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(i2.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Nc.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return op(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new _h(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){op(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new _h(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Dh(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Vp extends Ui{constructor(){const e=Wt(Vp.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new UC(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ma,this._repeatedEvents=new PC,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new M3({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ar(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ui.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new _h(this.context,this._swingTicks*2/3).toSeconds()*a}Dv(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),Dv(!1)}schedule(e,t){const s=new Nc(this,{callback:e,time:new Uf(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const o=new i2(this,{callback:e,duration:new lo(this.context,a).toTicks(),interval:new lo(this.context,t).toTicks(),time:new Uf(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(e,t){const s=new Nc(this,{callback:e,once:!0,time:new Uf(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new _h(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Mn(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ca(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new lo(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new lo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new _h(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new _h(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),o=t+a;this.emit("stop",o),this._clock.setTicksAtTime(e,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,o=1/(60/a.getValueAtTime(s)/this.PPQ),u=[];if(e.units==="time"){const f=.015625/o,d=new ps(f),p=new Fp(-1),y=new ps(f);a.chain(d,p,y),a=y,o=1/o,u=[d,p,y]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/o:t=0);const c=new ps(t);return a.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),$g(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}wd.mixin(Vp);Dp(r=>{r.transport=new Vp({context:r})});Rp(r=>{r.transport.dispose()});class ai extends nn{constructor(e){super(e),this.input=void 0,this._state=new Qg("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ar,this._syncedStop=ar,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Gh({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ar(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(nn.getDefaults(),{mute:!1,onstop:ar,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=Ea(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Xt(Dh(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const o=this._state.get(a);o&&(o.offset=this.toSeconds(Ah(t,0)),o.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,s)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else x3(this.context),this._start(a,t,s);return this}stop(e){let t=Ea(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Mn(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Dh(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,o)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ar,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bp extends Rh{constructor(){const e=Wt(Bp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Hh(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new pr({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new _r(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Rh.getDefaults(),{url:new _r,loop:!1,loopEnd:0,loopStart:0,onload:ar,onerror:ar,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){Xt(this.buffer.loaded,"buffer is either not set or not loaded");const o=this.toSeconds(e);this._startGain(o,a),this.loop?t=Ah(t,this.loopStart):t=Ah(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),d=c-f;tg(u,c)&&(u=(u-f)%d+f),io(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,op(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),Mn(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(o+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Nu(r,e){return ds(this,void 0,void 0,function*(){const t=e/r.context.sampleRate,s=new Xg(1,t,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class a2 extends Rh{constructor(){const e=Wt(a2.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Hh(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new pr({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new pr({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ar(this,["frequency","detune"])}static getDefaults(){return Object.assign(Rh.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class fs extends ai{constructor(){const e=Wt(fs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new mr({context:this.context,units:"frequency",value:e.frequency}),Ar(this,"frequency"),this.detune=new mr({context:this.context,units:"cents",value:e.detune}),Ar(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ai.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new a2({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return fs._periodicWaveCache.find(t=>t.phase===this._phase&&AC(t.partials,this._partials));{const e=fs._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Mn(s)){const{partials:a,wave:o}=s;this._wave=o,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,o]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(a,o);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),fs._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),fs._periodicWaveCache.length>100&&fs._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){El(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((o,u)=>a[u]=o),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const o=new Float32Array(a),u=new Float32Array(a);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[o,u]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(c=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let f=1;f<a;++f){const d=2/(f*Math.PI);let p;switch(e){case"sine":p=f<=c?1:0,this._partials[f-1]=p;break;case"square":p=f&1?2*d:0,this._partials[f-1]=p;break;case"sawtooth":p=d*(f&1?1:-1),this._partials[f-1]=p;break;case"triangle":f&1?p=2*(d*d)*(f-1>>1&1?-1:1):p=0,this._partials[f-1]=p;break;case"custom":p=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}p!==0?(o[f]=-p*Math.sin(t*f),u[f]=p*Math.cos(t*f)):(o[f]=0,u[f]=0)}return[o,u]}_inverseFFT(e,t,s){let a=0;const o=e.length;for(let u=0;u<o;u++)a+=e[u]*Math.cos(u*s)+t[u]*Math.sin(u*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,o=32;for(let u=0;u<o;u++)s=Math.max(this._inverseFFT(e,t,u/o*a),s);return TC(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}fs._periodicWaveCache=[];class O3 extends Sc{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new _d({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ml extends mr{constructor(){const e=Wt(Ml.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ps({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(mr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class zp extends ai{constructor(){const e=Wt(zp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new O3({context:this.context}),this._modulationNode=new ps({context:this.context}),this._carrier=new fs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new fs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ml({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ar(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Pp extends ai{constructor(){const e=Wt(Pp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new ps({context:this.context,gain:0}),this._carrier=new fs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new mr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new fs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ml({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ml({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ar(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Sd extends ai{constructor(){const e=Wt(Sd.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new ps({context:this.context,gain:0}),this._thresh=new _d({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new mr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new fs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ar(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ai.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class qp extends ai{constructor(){const e=Wt(qp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new mr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new mr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ar(this,["frequency","detune"])}static getDefaults(){return Object.assign(fs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,o)=>a.detune.value=t+s*o)}}get count(){return this._oscillators.length}set count(e){if(El(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new fs({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ar});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Up extends ai{constructor(){const e=Wt(Up.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ml({context:this.context,value:2}),this._pulse=new Sd({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new fs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ar(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ai.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Rv={am:zp,fat:qp,fm:Pp,oscillator:fs,pulse:Sd,pwm:Up};class Ac extends ai{constructor(){const e=Wt(Ac.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new mr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new mr({context:this.context,units:"cents",value:e.detune}),Ar(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(fs.getDefaults(),Pp.getDefaults(),zp.getDefaults(),qp.getDefaults(),Sd.getDefaults(),Up.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Rv[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Rv[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&kl(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&kl(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&jl(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Nu(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class o2 extends mr{constructor(){super(Wt(o2.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ps({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,nd(this._constantSource,this._sum)}static getDefaults(){return Object.assign(mr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class l2 extends Sc{constructor(){const e=Wt(l2.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ml({context:this.context,value:e.max-e.min}),this._add=this.output=new o2({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Sc.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function D3(r,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){El(o,r,e),t.set(this,o)}})}}function Dl(r,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){El(this.toSeconds(o),r,e),t.set(this,o)}})}}class Hp extends ai{constructor(){const e=Wt(Hp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new _r({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ai.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ar,onerror:ar,playbackRate:1,reverse:!1})}load(e){return ds(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ar){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Ah(t,this._loopStart):t=Ah(t,0);const a=this.toSeconds(t),o=s;s=Ah(s,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(s);u=u/this._playbackRate,e=this.toSeconds(e);const c=new Bp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Ea(o)?c.start(e,a):c.start(e,a,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&El(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&El(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}go([Dl(0)],Hp.prototype,"fadeIn",void 0);go([Dl(0)],Hp.prototype,"fadeOut",void 0);class ua extends nn{constructor(){const e=Wt(ua.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new mr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(nn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(jl(e))return e;{let s;for(s in A1)if(A1[s][t]===e)return s;return e}}_setCurve(e,t,s){if(jl(s)&&Reflect.has(A1,s)){const a=A1[s];du(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(ca(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const o=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/a;a=(1-u)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let f=1;f<c.length;f++)if(c[f-1]<=u&&u<=c[f]){c=this._attackCurve.slice(f),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,a,t)}if(o&&this.sustain<1){const c=t*this.sustain,f=e+a;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,o+f):this._sig.exponentialApproachValueAtTime(c,f,o)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Xt(ca(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return Jg(this,e,t,s),this}asArray(){return ds(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new Xg(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o*.1,c=o+u,f=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return f._sig.toDestination(),f.triggerAttackRelease(t*(a+u)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}go([Dl(0)],ua.prototype,"attack",void 0);go([Dl(0)],ua.prototype,"decay",void 0);go([D3(0,1)],ua.prototype,"sustain",void 0);go([Dl(0)],ua.prototype,"release",void 0);const A1=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],o=6.4;for(e=0;e<127;e++){t=e/127;const _=Math.sin(t*(Math.PI*2)*o-Math.PI/2)+1;a[e]=_/10+t*.83}a[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const f=[];for(e=0;e<128;e++)t=e/127,f[e]=.5*(1-Math.cos(Math.PI*t));const d=[];for(e=0;e<128;e++){t=e/127;const _=Math.pow(t,3)*4+.2,b=Math.cos(_*Math.PI*2*t);d[e]=Math.abs(b*(1-t))}function p(_){const b=new Array(_.length);for(let N=0;N<_.length;N++)b[N]=1-_[N];return b}function y(_){return _.slice(0).reverse()}return{bounce:{In:p(d),Out:d},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:p(a)},sine:{In:f,Out:p(f)},step:{In:u,Out:p(u)}}})();class Cc extends nn{constructor(){const e=Wt(Cc.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Gh({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ar(this,"volume")}static getDefaults(){return Object.assign(nn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const o=a[t],u=this.context.transport.schedule(c=>{a[t]=c,s.apply(this,a)},o);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s),u=this.toSeconds(t);return this.triggerAttack(e,o,a),this.triggerRelease(o+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class uo extends Cc{constructor(){const e=Wt(uo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Cc.getDefaults(),{detune:0,onsilence:ar,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof oa?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,o,s)}else this.frequency.setValueAtTime(a,s);return this}}go([Dl(0)],uo.prototype,"portamento",void 0);class Gp extends ua{constructor(){super(Wt(Gp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ps({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ja extends uo{constructor(){const e=Wt(ja.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Ac(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Gp(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ar(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(uo.getDefaults(),{envelope:Object.assign(ao(ua.getDefaults(),Object.keys(nn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ao(Ac.getDefaults(),[...Object.keys(ai.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class rd extends uo{constructor(){const e=Wt(rd.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new ja({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new ja({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new mr({context:this.context,units:"frequency"}),this.detune=new mr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Ml({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new ps({context:this.context,gain:0}),Ar(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(uo.getDefaults(),{harmonicity:3,oscillator:Object.assign(ao(Ac.getDefaults(),[...Object.keys(ai.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(ao(ua.getDefaults(),Object.keys(nn.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(ao(Ac.getDefaults(),[...Object.keys(ai.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(ao(ua.getDefaults(),Object.keys(nn.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class cp extends rd{constructor(){super(Wt(cp.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new O3({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class up extends nn{constructor(){const e=Wt(up.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new pr({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new pr({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new pr({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new pr({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(nn.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Xt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const f=Math.pow(u/e,2)*19980+20;t[u]=f}const s=new Float32Array(e),a=new Float32Array(e),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class hp extends nn{constructor(){const e=Wt(hp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new ps({context:this.context}),this.output=new ps({context:this.context}),this._filters=[],this._filters=[],this.Q=new mr({context:this.context,units:"positive",value:e.Q}),this.frequency=new mr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new mr({context:this.context,units:"cents",value:e.detune}),this.gain=new mr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ar(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(nn.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Xt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=kl(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);Xt(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(o=>o.disconnect()),this._filters=new Array(a);for(let o=0;o<a;o++){const u=new up({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[o]=u}this._internalChannels=this._filters,nd(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new up({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((o,u)=>s[u]*=o)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),$g(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class fp extends ua{constructor(){const e=Wt(fp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Fp({context:this.context,value:e.exponent}),this._scale=this.output=new l2({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ua.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);El(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class dp extends uo{constructor(){const e=Wt(dp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new Ac(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new hp(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new fp(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Gp(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ar(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(uo.getDefaults(),{envelope:Object.assign(ao(ua.getDefaults(),Object.keys(nn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ao(hp.getDefaults(),Object.keys(nn.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ao(fp.getDefaults(),Object.keys(nn.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ao(Ac.getDefaults(),Object.keys(ai.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Hf extends rd{constructor(){const e=Wt(Hf.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Ml({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(rd.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class Wp extends ja{constructor(){const e=Wt(Wp.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ar(this,["oscillator","envelope"])}static getDefaults(){return pu(uo.getDefaults(),ja.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof oa?e.toFrequency():e),o=a*this.octaves;return this.oscillator.frequency.setValueAtTime(o,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}go([D3(0)],Wp.prototype,"octaves",void 0);go([Dl(0)],Wp.prototype,"pitchDecay",void 0);const R3=new Set;function c2(r){R3.add(r)}function I3(r,e){const t=`registerProcessor("${r}", ${e})`;R3.add(t)}const HC=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;c2(HC);const GC=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;c2(GC);const WC=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;c2(WC);const YC="feedback-comb-filter",$C=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;I3(YC,$C);class zi extends Cc{constructor(){const e=Wt(zi.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),Xt(!kl(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Cc.getDefaults(),{maxPolyphony:32,options:{},voice:ja})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Xt(e instanceof uo,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Op("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const o=new lp(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,t,s),this._activeVoices.push({midi:o,voice:u,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new lp(this.context,s).toMidi(),o=this._activeVoices.find(({midi:u,released:c})=>u===a&&!c);o&&(o.voice.triggerRelease(t),o.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){Xt(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s);if(this.triggerAttack(e,o,a),ca(t)){Xt(ca(e),"If the duration is an array, the notes must also be an array"),e=e;for(let u=0;u<e.length;u++){const c=t[Math.min(u,t.length-1)],f=this.toSeconds(c);Xt(f>0,"The duration must be greater than 0"),this.triggerRelease(e[u],o+f)}}else{const u=this.toSeconds(t);Xt(u>0,"The duration must be greater than 0"),this.triggerRelease(e,o+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=ao(e,["onsilence","context"]);return this.options=pu(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Nd extends Cc{constructor(){const e=Wt(Nd.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(Xt(N1(s)||kl(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),N1(s)){const o=new oa(this.context,s).toMidi();t[o]=e.urls[s]}else kl(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new s2({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Cc.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ar,onerror:ar,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const o=j3(new oa(this.context,a).toFrequency()),u=Math.round(o),c=o-u,f=this._findClosest(u),d=u-f,p=this._buffers.get(d),y=k3(f+c),_=new Bp({url:p,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);_.start(t,0,p.duration/y,s),ca(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(_),_.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),N=b.indexOf(_);N!==-1&&b.splice(N,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new oa(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const o=this._activeSources.get(a);t=this.toSeconds(t),o.forEach(u=>{u.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const o=this.toSeconds(s);return this.triggerAttack(e,o,a),ca(t)?(Xt(ca(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const f=t[Math.min(c,t.length-1)];this.triggerRelease(u,o+this.toSeconds(f))})):this.triggerRelease(e,o+this.toSeconds(t)),this}add(e,t,s){if(Xt(N1(e)||isFinite(e),`note must be a pitch or midi: ${e}`),N1(e)){const a=new oa(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}go([Dl(0)],Nd.prototype,"attack",void 0);go([Dl(0)],Nd.prototype,"release",void 0);class u2 extends nn{constructor(){const e=Wt(u2.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new pr({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ar(this,"pan")}static getDefaults(){return Object.assign(nn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const XC="bit-crusher",ZC=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;I3(XC,ZC);class hs extends nn{constructor(){const e=Wt(hs.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new ps({context:this.context}),hs._allSolos.has(this.context)||hs._allSolos.set(this.context,new Set),hs._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(nn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),hs._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){hs._soloed.has(this.context)||hs._soloed.set(this.context,new Set),hs._soloed.get(this.context).add(this)}_removeSolo(){hs._soloed.has(this.context)&&hs._soloed.get(this.context).delete(this)}_isSoloed(){return hs._soloed.has(this.context)&&hs._soloed.get(this.context).has(this)}_noSolos(){return!hs._soloed.has(this.context)||hs._soloed.has(this.context)&&hs._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),hs._allSolos.get(this.context).delete(this),this._removeSolo(),this}}hs._allSolos=new Map;hs._soloed=new Map;class h2 extends nn{constructor(){const e=Wt(h2.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new u2({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Gh({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ar(this,["pan","volume"])}static getDefaults(){return Object.assign(nn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Sh extends nn{constructor(){const e=Wt(Sh.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new hs({solo:e.solo,context:this.context}),this._panVol=this.output=new h2({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ar(this,["pan","volume"])}static getDefaults(){return Object.assign(nn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Sh.buses.has(e)||Sh.buses.set(e,new ps({context:this.context})),Sh.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new ps({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Sh.buses=new Map;const yi=oo().transport,F3=oo().destination;oo().destination;oo().listener;const QC=oo().draw,Ts=oo();function KC(){return _r.loaded()}const C1=({cx:r,cy:e,innerRadius:t,outerRadius:s,startAngle:a,endAngle:o,color:u,label:c,chord:f,isSelected:d,isDiatonic:p,isSecondary:y=!1,onClick:_,onDoubleClick:b,ringType:N="major",wheelRotation:A=0,romanNumeral:k,voicingSuggestion:T,segmentId:R="seg",onHover:O})=>{const V=oS(r,e,t,s,a,o),I=(a+o)/2,W=Yn.useRef(0),U=Yn.useRef(null),[L,B]=Yn.useState(!1),ee=Yn.useRef(null),M=Yn.useRef(!1),F=Yn.useRef(!1),J=-A,te=s-t,ae=t+te*.5,H=t+te*.18,se=xc(r,e,ae,I),Q=xc(r,e,H,I),ge=s-6,ue=aS(r,e,ge,a+1,o-1),G=`voicing-arc-${R}`,j=`clip-${R}`,X=(()=>{let We=.35,ot=.5;p?(We=1,ot=1):y&&(We=.7,ot=.65);const rt=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(rt){const Fe=parseInt(rt[1]),tt=Math.round(parseInt(rt[2])*ot),Ke=parseInt(rt[3]);let ct=Ke;return N==="minor"?ct=Math.max(Ke-8,30):N==="diminished"&&(ct=Math.max(Ke-15,25)),{fill:`hsl(${Fe}, ${tt}%, ${ct}%)`,opacity:We}}return{fill:u,opacity:We}})(),ie=()=>N==="diminished"?"10px":N==="minor"?"12px":"14px",ce=p||y,pe=ce?"#000000":"rgba(255,255,255,0.7)",me=p?"bold":y?"600":"normal",Ne=N==="diminished"||N==="minor"?"6px":"8px",we=N==="major"?ce?6:5:N==="minor"?ce?4:3.25:ce?3.5:3,Ve=ce?1:.95,Ge=We=>{if(B(!0),We.touches.length>=2){F.current=!0,ee.current=null;return}We.touches.length===1&&!F.current&&(ee.current={x:We.touches[0].clientX,y:We.touches[0].clientY},M.current=!1)},nt=We=>{if(We.touches.length>=2){F.current=!0,M.current=!0;return}if(ee.current&&We.touches.length===1&&!F.current){const ot=We.touches[0],rt=ot.clientX-ee.current.x,Fe=ot.clientY-ee.current.y;Math.sqrt(rt*rt+Fe*Fe)>15&&(M.current=!0)}},st=async We=>{We.preventDefault(),We.stopPropagation(),B(!1);const ot=F.current,rt=M.current;if(ee.current=null,M.current=!1,We.touches.length===0&&(F.current=!1),ot||rt)return;Ts.state!=="running"&&await Su();const Fe=Date.now(),tt=Fe-W.current;U.current&&(clearTimeout(U.current),U.current=null),tt<300&&tt>0?(W.current=0,b&&b(f)):(W.current=Fe,U.current=setTimeout(()=>{_(f),U.current=null},300))},Y=()=>{B(!1),ee.current=null,M.current=!1,F.current=!1,U.current&&(clearTimeout(U.current),U.current=null)},De=We=>{We.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),O&&O(null,0,0),_(f)},dt=We=>{We.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),O&&O(null,0,0),b&&b(f)},et=Yn.useRef(null),Me=We=>{if(!O)return;const ot=We.clientX,rt=We.clientY;et.current=setTimeout(()=>{O("Select a chord slot in the timeline, then double-click a chord or chord voicing to add to the timeline.",ot,rt)},3e3)},it=()=>{et.current&&(clearTimeout(et.current),et.current=null),O&&O(null,0,0)};return x.jsxs("g",{className:Ot("cursor-pointer transition-all duration-200",!ce&&"hover:opacity-70",L&&"opacity-80"),onClick:De,onDoubleClick:dt,onTouchStart:Ge,onTouchMove:nt,onTouchEnd:st,onTouchCancel:Y,onMouseEnter:Me,onMouseLeave:it,style:{pointerEvents:"all",WebkitTapHighlightColor:"transparent"},children:[(p||y)&&T&&x.jsx("defs",{children:x.jsx("path",{id:G,d:ue,fill:"none"})}),x.jsx("defs",{children:x.jsx("clipPath",{id:j,children:x.jsx("path",{d:V})})}),x.jsx("path",{d:V,fill:X.fill,opacity:X.opacity,stroke:k==="I"?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",strokeWidth:k==="I"?2.5:1,className:Ot("transition-all duration-200 hover:brightness-110",d&&"brightness-125 stroke-white stroke-2",ce&&"hover:brightness-105"),style:{pointerEvents:"all"}}),d&&x.jsx("path",{d:V,fill:"none",stroke:"white",strokeWidth:we,opacity:Ve,filter:"url(#segment-glow)",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none",clipPath:`url(#${j})`}),(p||y)&&T&&N==="major"&&x.jsx("text",{fill:"rgba(0,0,0,0.6)",fontSize:"6px",className:"pointer-events-none select-none",children:x.jsx("textPath",{href:`#${G}`,startOffset:"50%",textAnchor:"middle",children:T})}),p&&T&&N==="minor"&&x.jsx("text",{fill:"rgba(0,0,0,0.55)",fontSize:"5px",className:"pointer-events-none select-none",children:x.jsx("textPath",{href:`#${G}`,startOffset:"50%",textAnchor:"middle",children:T})}),p&&T&&N==="diminished"&&x.jsx("text",{fill:"rgba(0,0,0,0.5)",fontSize:"5px",className:"pointer-events-none select-none",children:x.jsx("textPath",{href:`#${G}`,startOffset:"50%",textAnchor:"middle",children:T})}),x.jsx("text",{x:se.x,y:se.y,textAnchor:"middle",dominantBaseline:"middle",fill:pe,fontWeight:me,fontSize:ie(),className:"pointer-events-none select-none",transform:`rotate(${J}, ${se.x}, ${se.y})`,children:Zr(c)}),(p||y)&&k&&x.jsx("text",{x:Q.x,y:Q.y,textAnchor:"middle",dominantBaseline:"middle",fill:"rgba(0,0,0,0.6)",fontSize:Ne,fontStyle:"italic",className:"pointer-events-none select-none",transform:`rotate(${J}, ${Q.x}, ${Q.y})`,children:k})]})};const JC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Iv=r=>{const e=eT(r);return e.charAt(0).toUpperCase()+e.slice(1)},V3=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),tT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var nT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rT=re.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:u,...c},f)=>re.createElement("svg",{ref:f,...nT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:V3("lucide",a),...!o&&!tT(c)&&{"aria-hidden":"true"},...c},[...u.map(([d,p])=>re.createElement(d,p)),...Array.isArray(o)?o:[o]]));const mn=(r,e)=>{const t=re.forwardRef(({className:s,...a},o)=>re.createElement(rT,{ref:o,iconNode:e,className:V3(`lucide-${JC(Iv(r))}`,`lucide-${r}`,s),...a}));return t.displayName=Iv(r),t};const sT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gf=mn("chevron-down",sT);const iT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ih=mn("chevron-right",iT);const aT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fh=mn("chevron-left",aT);const oT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],B3=mn("chevron-up",oT);const lT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sd=mn("circle-question-mark",lT);const cT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uT=mn("circle",cT);const hT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fT=mn("clock",hT);const dT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pT=mn("copy",dT);const mT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],f2=mn("download",mT);const gT=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],bT=mn("eraser",gT);const vT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],yT=mn("file-plus",vT);const xT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],wT=mn("folder-open",xT);const _T=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],z3=mn("grip-vertical",_T);const ST=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],P3=mn("hand",ST);const NT=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],AT=mn("hash",NT);const CT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],TT=mn("info",CT);const kT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jT=mn("layers",kT);const ET=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],q3=mn("list-music",ET);const MT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],U3=mn("loader-circle",MT);const LT=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],pp=mn("map",LT);const OT=[["path",{d:"M5 12h14",key:"1ays0h"}]],ng=mn("minus",OT);const DT=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],RT=mn("mouse-pointer-2",DT);const IT=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],d2=mn("music",IT);const FT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],H3=mn("panel-right-close",FT);const VT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],BT=mn("panel-right",VT);const zT=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],G3=mn("pause",zT);const PT=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Wh=mn("play",PT);const qT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tc=mn("plus",qT);const UT=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],W3=mn("repeat",UT);const HT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mp=mn("rotate-ccw",HT);const GT=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Vh=mn("rotate-cw",GT);const WT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Fv=mn("save",WT);const YT=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Vv=mn("settings-2",YT);const $T=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Y3=mn("skip-back",$T);const XT=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],$3=mn("skip-forward",XT);const ZT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],QT=mn("sparkles",ZT);const KT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],X3=mn("square",KT);const JT=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ek=mn("tag",JT);const tk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rg=mn("trash-2",tk);const nk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],sg=mn("volume-2",nk);const rk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],sk=mn("volume-x",rk);const ik=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vu=mn("x",ik);let kc={piano:null,epiano:null,guitar:null,organ:null,synth:null,strings:null,pad:null,brass:null,marimba:null,bell:null,lead:null,bass:null,choir:null},p2="piano",Ff=null,P1=[],gp={},Bv=!1,Pi=null;const m2=()=>{if(Pi)return;if("audioSession"in navigator)try{navigator.audioSession.type="playback",console.log("[iOS Audio] Set audioSession.type to playback")}catch(t){console.warn("[iOS Audio] Could not set audioSession type:",t)}const r=["/+NIxAAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/","40jEAA8AAAANIAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU"].join("");Pi=document.createElement("audio"),Pi.src="data:audio/mpeg;base64,"+r,Pi.loop=!0,Pi.volume=.001,Pi.muted=!1,Pi.setAttribute("playsinline","true"),Pi.setAttribute("x-webkit-airplay","deny"),Pi.preload="auto",document.body.appendChild(Pi);const e=Pi.play();e!==void 0&&e.then(()=>{console.log("[iOS Audio] Silent media started - ringer switch workaround active")}).catch(t=>{console.log("[iOS Audio] Silent audio deferred until user gesture:",t.message)})},Yp=async()=>{if(!Bv){if(console.log("[iOS Audio] Starting unlock sequence..."),m2(),Pi&&Pi.paused)try{await Pi.play(),console.log("[iOS Audio] Silent audio now playing")}catch(r){console.warn("[iOS Audio] Silent audio play failed:",r)}try{await Su(),console.log("[iOS Audio] Tone.start() completed, state:",Ts.state)}catch(r){console.warn("[iOS Audio] Tone.start() failed:",r)}if(Ts.state!=="running")try{await Ts.resume(),console.log("[iOS Audio] Context resumed, state:",Ts.state)}catch(r){console.warn("[iOS Audio] Context resume failed:",r)}Bv=!0,console.log("[iOS Audio] Unlock sequence complete")}},g2=r=>{r in kc&&(p2=r)},Z3=r=>{const e=r<=0?-1/0:20*Math.log10(r);try{F3.volume.rampTo(e,.1)}catch(t){console.error("Error setting volume:",t)}},Q3=r=>{F3.mute=r},Lc=async()=>{if(Ff)return Ff;Ff=(async()=>{const r="https://tonejs.github.io/audio/salamander/",e=(t,s)=>{if(!kc[t])try{const a=s();a&&(kc[t]=a)}catch(a){console.error(`Failed to init instrument "${t}"`,a)}};e("piano",()=>new Nd({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:r}).toDestination()),e("guitar",()=>new zi(ja,{oscillator:{type:"triangle"},envelope:{attack:.002,decay:.25,sustain:.3,release:1.2},filter:{type:"lowpass",frequency:2400,rolloff:-12,Q:1.2},filterEnvelope:{attack:.002,decay:.25,sustain:.2,release:.8,baseFrequency:800,octaves:2.5}}).toDestination()),e("organ",()=>new zi(cp,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("synth",()=>new zi(Hf,{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("epiano",()=>new zi(cp,{harmonicity:2,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.7,release:.8},modulation:{type:"sine"},modulationEnvelope:{attack:.2,decay:.1,sustain:.6,release:.6}}).toDestination()),e("strings",()=>new zi(ja,{oscillator:{type:"sawtooth"},envelope:{attack:.2,decay:.2,sustain:.8,release:1.2}}).toDestination()),e("pad",()=>new zi(Hf,{harmonicity:1.5,modulationIndex:8,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.9,release:1.5},modulation:{type:"triangle"},modulationEnvelope:{attack:.8,decay:.3,sustain:.8,release:1.2}}).toDestination()),e("brass",()=>new zi(dp,{oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.02,decay:.25,sustain:.6,release:.7},filterEnvelope:{attack:.01,decay:.2,sustain:.8,release:.4,baseFrequency:200,octaves:2.5}}).toDestination()),e("marimba",()=>new zi(ja,{oscillator:{type:"triangle"},envelope:{attack:.001,decay:.35,sustain:0,release:.6}}).toDestination()),e("bell",()=>new zi(Hf,{harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:1.2,sustain:0,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:0,release:1.2}}).toDestination()),e("lead",()=>new zi(ja,{oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.15,sustain:.6,release:.35}}).toDestination()),e("bass",()=>new zi(dp,{oscillator:{type:"square"},filter:{type:"lowpass",rolloff:-24,Q:2},envelope:{attack:.01,decay:.2,sustain:.6,release:.4},filterEnvelope:{attack:.001,decay:.15,sustain:.4,release:.2,baseFrequency:80,octaves:3}}).toDestination()),e("choir",()=>new zi(ja,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),await KC()})();try{await Ff}catch(r){Ff=null,console.error("Failed to initialize audio",r)}},zv=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Xs=async(r,e="1n",t)=>{if(Ts.state!=="running"&&await Su(),Ts.state==="suspended"&&await Ts.resume(),await Lc(),!r||r.length===0)return;const s=r[0],a=zv.indexOf(s.replace(/\d/,"")),o=r.map((c,f)=>{if(c.match(/\d/))return c;const d=c,p=zv.indexOf(d);if(f===0)return`${d}3`;let y=3;return(p<a||p-a>6)&&(y=4),f>=4&&(y=4),f>=5&&(y=5),`${d}${y}`});let u=kc[p2];if(u||(u=kc.piano),!u){console.error("No instrument available to play!");return}try{u.triggerAttackRelease(o,e,t)}catch(c){console.error("Failed to play chord",c)}},K3=async(r,e=4,t="8n")=>{Ts.state!=="running"&&await Su(),Ts.state==="suspended"&&await Ts.resume(),await Lc();let s=kc[p2];if(s||(s=kc.piano),!s){console.error("No instrument available to play!");return}const a=`${r}${e}`;try{s.triggerAttackRelease(a,t)}catch(o){console.error(`Failed to play note ${a}`,o)}},J3=()=>{Object.values(kc).forEach(t=>t?.releaseAll()),yi.stop();const{setPlayingSlot:r,setIsPlaying:e}=pn.getState();r(null,null),e(!1)},id=r=>{const e=Math.floor(r/4),t=Math.floor(r%4),s=Math.floor(r%1*4);return`${e}:${t}:${s}`},b2=r=>{yi.cancel(0),P1=[],gp={},yi.timeSignature=4;let e=0;r.sections.forEach(s=>{gp[s.id]=e,s.measures.forEach(a=>{a.beats.forEach(o=>{const u=id(e),c=o.duration,f=c*4,d=`${Math.floor(f/16)}:${Math.floor(f%16/4)}:${f%4}`,p=yi.schedule(y=>{QC.schedule(()=>{pn.getState().setPlayingSlot(s.id,o.id)},y),o.chord&&Xs(o.chord.notes,d,y)},u);P1.push(p),e+=c})})});const t=yi.schedule(()=>{pn.getState().isLooping||J3()},id(e));P1.push(t)},ak=async()=>{await Lc()},v2=async()=>{await Lc(),Ts.state!=="running"&&await Ts.resume();const{tempo:r,currentSong:e}=pn.getState();yi.bpm.value=r,P1.length===0&&b2(e),yi.start()},y2=()=>{yi.pause()},ew=r=>{yi.bpm.value=r},x2=r=>{const{currentSong:e,playingSectionId:t}=pn.getState(),s=e.sections.map(p=>p.id);let a=t?s.indexOf(t):-1;a===-1&&(a=0);let o=r==="next"?a+1:a-1;o>=s.length&&(o=0),o<0&&(o=0);const u=s[o],c=gp[u]||0,f=id(c);yi.position=f;const d=e.sections[o].measures[0]?.beats[0];d&&pn.getState().setPlayingSlot(u,d.id)},tw=()=>{const{isLooping:r,playingSectionId:e,selectedSectionId:t,currentSong:s}=pn.getState();if(r){const a=e||t,o=s.sections.find(u=>u.id===a);if(o){const u=gp[o.id]??0;let c=0;o.measures.forEach(d=>d.beats.forEach(p=>c+=p.duration));const f=u+c;yi.loopStart=id(u),yi.loopEnd=id(f),yi.loop=!0;return}}yi.loop=!1},ok=Object.freeze(Object.defineProperty({__proto__:null,initAudio:Lc,pauseSong:y2,playChord:Xs,playNote:K3,playSong:v2,preloadAudio:ak,scheduleSong:b2,setInstrument:g2,setMute:Q3,setTempo:ew,setVolume:Z3,skipToSection:x2,startSilentAudioForIOS:m2,stopAudio:J3,toggleLoopMode:tw,unlockAudioForIOS:Yp},Symbol.toStringTag,{value:"Module"})),bp=768;function w2(){const[r,e]=re.useState(()=>typeof window<"u"?window.innerWidth<bp:!1);return re.useEffect(()=>{const t=()=>e(window.innerWidth<bp);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),r}function Yh(){const[r,e]=re.useState(()=>typeof window<"u"?window.innerWidth<bp||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[t,s]=re.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1);return re.useEffect(()=>{const a=()=>{const o=window.innerWidth,u=window.innerHeight,c=o<bp||u<500&&u<o,f=u<o&&u<500;e(c),s(f)};return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),{isMobile:r,isLandscape:t}}var Cl=Ax();const lk=7e3,ck=({isOpen:r,onClose:e,onSelect:t,onAddToTimeline:s,onOpenDetails:a,chordRoot:o,voicings:u,selectedQuality:c,portraitWithPanel:f=!1})=>{const d=re.useRef(null),{isMobile:p,isLandscape:y}=Yh(),_=p&&y,[b,N]=re.useState(c),A=re.useRef(null),k=re.useRef(null);re.useEffect(()=>{r&&N(c)},[r,c]);const T=re.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{e()},lk)},[e]);if(re.useEffect(()=>(r&&T(),()=>{k.current&&clearTimeout(k.current)}),[r,T]),re.useEffect(()=>{if(!r)return;const O=I=>{d.current&&!d.current.contains(I.target)&&e()},V=setTimeout(()=>{document.addEventListener("mousedown",O),document.addEventListener("touchstart",O)},100);return()=>{clearTimeout(V),document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[r,e]),re.useEffect(()=>{if(!r)return;const O=V=>{V.key==="Escape"&&e()};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[r,e]),!r)return null;const R=O=>{const V=Date.now();if(T(),A.current&&A.current.quality===O&&V-A.current.time<400){s&&s(O),e(),A.current=null;return}const I=ka(o,O);Xs(I),N(O),t(O),A.current={quality:O,time:V}};return Cl.createPortal(x.jsxs("div",{ref:d,className:Ot("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row flex-nowrap items-center justify-center","animate-in fade-in zoom-in-95 duration-150",u.length>5||_?"p-1 gap-1":"p-2 gap-2"),style:{bottom:_?"56px":f?"6%":p?"13%":"220px",top:"auto",..._?{left:"24%",transform:"translateX(-50%)",maxWidth:"min(55vw, fit-content)"}:p?{left:"50%",transform:"translateX(-50%)",maxWidth:"calc(100vw - 32px)"}:{right:"340px",left:"auto",transform:"none",maxWidth:"calc(100vw - 400px)"},zIndex:99999},children:[u.map(O=>{const V=O.quality===b,I=u.length>4||_,W=u.length>=6;return x.jsx("button",{onClick:U=>{U.stopPropagation(),R(O.quality)},onTouchEnd:U=>{U.stopPropagation()},className:Ot("flex items-center justify-center rounded-lg transition-all shrink-0",W?"min-w-[32px] h-9 px-0.5":I?"min-w-[40px] h-10 px-1.5":"min-w-[48px] h-12 px-2",V?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`Tap to preview, double-tap to add ${o}${O.label}`,children:x.jsx("span",{className:Ot("font-semibold",W?"text-[10px]":I?"text-xs":V?"text-sm":"text-xs"),children:O.label||"maj"})},O.quality)}),u.length>0&&x.jsx("div",{className:"w-px bg-border-subtle self-stretch my-1 shrink-0"}),a&&x.jsx("button",{onClick:O=>{O.stopPropagation(),a(),e()},onTouchEnd:O=>{O.preventDefault(),O.stopPropagation(),a(),e()},className:Ot("flex items-center justify-center rounded-lg transition-all shrink-0","text-text-tertiary hover:text-text-secondary hover:bg-bg-tertiary",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Open chord details",children:x.jsx(TT,{size:u.length>=6?12:u.length>4||_?14:16})}),s&&x.jsx("button",{onClick:O=>{O.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},onTouchEnd:O=>{O.preventDefault(),O.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},className:Ot("flex items-center justify-center rounded-lg transition-all shrink-0","text-accent-primary hover:text-white hover:bg-accent-primary/20",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Add to timeline",children:x.jsx(Tc,{size:u.length>=6?14:u.length>4||_?16:18})})]}),document.body)};function uk(r,e){if(!r)return[];const t=r.split(/,\s*|\s+or\s+/).map(a=>a.trim()).filter(Boolean),s=[];e==="major"?s.push({quality:"major",label:""}):e==="minor"?s.push({quality:"minor",label:"m"}):e==="diminished"&&s.push({quality:"diminished",label:""});for(const a of t){let o=a,u=a;a==="6"?(o="major6",u="6"):a==="m6"?(o="minor6",u="m6"):a==="m75 (7)"?(o="halfDiminished7",u="7"):a==="m7"?(o="minor7",u="m7"):a==="m9"?(o="minor9",u="m9"):a==="m11"?(o="minor11",u="m11"):a==="sus4"?(o="sus4",u="sus4"):a==="7"?(o="dominant7",u="7"):a==="9"?(o="dominant9",u="9"):a==="11"?(o="dominant11",u="11"):a==="13"?(o="dominant13",u="13"):a==="maj7"?(o="major7",u="maj7"):a==="maj9"?(o="major9",u="maj9"):a==="maj13"&&(o="major13",u="maj13"),s.push({quality:o,label:u})}return s}const hk=({zoomScale:r,zoomOriginY:e,onZoomChange:t,panOffset:s,onPanChange:a,rotationOffset:o=0,disableModeToggle:u=!1})=>{const{selectedKey:c,setKey:f,wheelRotation:d,wheelMode:p,rotateWheel:y,toggleWheelMode:_,addChordToSlot:b,selectedSectionId:N,selectedSlotId:A,setSelectedChord:k,selectedChord:T,selectNextSlotAfter:R,setSelectedSlot:O,timelineVisible:V,openTimeline:I,chordPanelVisible:W,toggleChordPanel:U,pulseChordPanel:L,chordPanelGuitarExpanded:B,chordPanelVoicingsExpanded:ee}=pn(),M=qf.indexOf(c),F=-(M*30);let J;o!==0?J=F+o:p==="rotating"?J=d:J=0;const te=re.useRef(null),ae=re.useRef(null),[H,se]=re.useState(null),[Q,ge]=re.useState({x:0,y:0}),[ue,G]=re.useState({isOpen:!1,chord:null,voicingSuggestion:"",baseQuality:""}),j=s??Q,z=re.useCallback(Se=>{a?a(Se):ge(Se)},[a]),X=w2(),{isLandscape:ie}=Yh();re.useEffect(()=>{const Se=T?.segmentId??null;se(Se)},[T]);const ce=re.useRef(null),pe=re.useRef(null),[me,Ne]=re.useState(!1),we=re.useRef(0),Ve=re.useRef(0),[Ge,nt]=re.useState(!1),st=re.useRef(null),Y=re.useCallback((Se,Re)=>{if(!pe.current)return 0;const $e=pe.current.getBoundingClientRect(),gt=$e.left+$e.width/2,$t=$e.top+$e.height/2,Bt=Se-gt,wn=Re-$t;return Math.atan2(wn,Bt)*(180/Math.PI)},[]),De=re.useCallback(Se=>{for(;Se>180;)Se-=360;for(;Se<-180;)Se+=360;return Se},[]),dt=re.useCallback(Se=>{const Re=qf.indexOf(c),$e=Se==="cw"?(Re+1)%12:(Re-1+12)%12;f(qf[$e]),y(Se)},[c,f,y]),et=re.useRef(null),Me=re.useRef(!1),it=re.useCallback(Se=>{if(X||!pe.current||!ce.current)return;const Re=pe.current.getBoundingClientRect(),$e=Re.width/2,gt=Re.height/2,$t=Se.clientX-Re.left-$e,Bt=Se.clientY-Re.top-gt,wn=Math.sqrt($t*$t+Bt*Bt),Jn=Re.width/600*70,cr=Re.width/600*250;wn>Jn&&wn<=cr?(Ne(!0),we.current=Y(Se.clientX,Se.clientY),Ve.current=d,Se.preventDefault()):wn>cr&&r>1&&(nt(!0),st.current={x:Se.clientX,y:Se.clientY},Se.preventDefault())},[Y,d,X,r]),We=re.useCallback(Se=>{if(Se.touches.length!==1)return;const Re=Se.touches[0];if(et.current={x:Re.clientX,y:Re.clientY},Me.current=!1,!pe.current)return;const $e=pe.current.getBoundingClientRect(),gt=$e.width/2,$t=$e.height/2,Bt=Re.clientX-$e.left-gt,wn=Re.clientY-$e.top-$t,Jn=Math.sqrt(Bt*Bt+wn*wn),cr=$e.width/600*70;Jn>cr&&(we.current=Y(Re.clientX,Re.clientY),Ve.current=d)},[Y,d]),ot=re.useCallback(Se=>{if(Se.touches.length!==1||!et.current)return;const Re=Se.touches[0],$e=Re.clientX-et.current.x,gt=Re.clientY-et.current.y;if(Math.sqrt($e*$e+gt*gt)>10){if(Me.current=!0,Se.preventDefault(),!pe.current)return;const Bt=pe.current.getBoundingClientRect(),wn=Bt.width/2,Jn=Bt.height/2,cr=Re.clientX-Bt.left,Tn=Re.clientY-Bt.top,li=Math.sqrt(Math.pow(cr-wn,2)+Math.pow(Tn-Jn,2)),Dr=Bt.width/600*70;if(li>Dr&&we.current!==0){const Pr=Y(Re.clientX,Re.clientY),Kr=De(Pr-we.current);if(Math.abs(Kr)>=15){const ms=Math.round(Kr/30);if(ms!==0){const ci=p==="fixed"?ms>0?"cw":"ccw":ms>0?"ccw":"cw",ui=Math.abs(ms);for(let wi=0;wi<ui;wi++)dt(ci);we.current=Pr}}}}},[Y,dt,p,De]),rt=re.useCallback(Se=>{if(!me)return;const Re=Y(Se.clientX,Se.clientY),$e=De(Re-we.current);if(Math.abs($e)>=15){const gt=Math.round($e/30);if(gt!==0){let $t;p==="fixed"?$t=gt>0?"cw":"ccw":$t=gt>0?"ccw":"cw";const Bt=Math.abs(gt);for(let wn=0;wn<Bt;wn++)dt($t);we.current=Re}}},[me,Y,dt,p,De]),Fe=re.useCallback(()=>{Ne(!1)},[]);re.useEffect(()=>{if(me)return document.addEventListener("mousemove",rt),document.addEventListener("mouseup",Fe),()=>{document.removeEventListener("mousemove",rt),document.removeEventListener("mouseup",Fe)}},[me,rt,Fe]);const tt=re.useCallback((Se,Re,$e)=>{if(!ce.current||$e<=1)return{x:0,y:0};const{clientWidth:gt,clientHeight:$t}=ce.current,Bt=12,wn=gt*($e-1)/2+Bt,Jn=$t*($e-1)/2+Bt;return{x:Math.max(-wn,Math.min(wn,Se)),y:Math.max(-Jn,Math.min(Jn,Re))}},[]);re.useEffect(()=>{z(tt(j.x,j.y,r))},[r,tt,j.x,j.y,z]);const Ke=re.useCallback(Se=>{if(!Ge||!st.current)return;const Re=Se.clientX-st.current.x,$e=Se.clientY-st.current.y;z(tt(j.x+Re,j.y+$e,r)),st.current={x:Se.clientX,y:Se.clientY}},[Ge,r,tt,j,z]),ct=re.useCallback(()=>{nt(!1),st.current=null},[]);re.useEffect(()=>{if(Ge)return document.addEventListener("mousemove",Ke),document.addEventListener("mouseup",ct),()=>{document.removeEventListener("mousemove",Ke),document.removeEventListener("mouseup",ct)}},[Ge,Ke,ct]);const yt=Se=>({x:(Se[0].clientX+Se[1].clientX)/2,y:(Se[0].clientY+Se[1].clientY)/2}),mt=re.useCallback(Se=>{if(Se.touches.length===2){Se.preventDefault();const Re=Se.touches[0].clientX-Se.touches[1].clientX,$e=Se.touches[0].clientY-Se.touches[1].clientY;te.current=Math.sqrt(Re*Re+$e*$e),ae.current=yt(Se.touches)}},[]),bt=re.useCallback(Se=>{if(Se.touches.length===2&&te.current!==null){Se.preventDefault(),Se.stopPropagation();const Re=Se.touches[0].clientX-Se.touches[1].clientX,$e=Se.touches[0].clientY-Se.touches[1].clientY,gt=Math.sqrt(Re*Re+$e*$e),$t=gt/te.current,Bt=Math.max(1,Math.min(2.5,r*$t)),wn=Bt>1.3?38:50,Jn=yt(Se.touches);if(ae.current){const cr=Jn.x-ae.current.x,Tn=Jn.y-ae.current.y;z(tt(j.x+cr,j.y+Tn,Bt))}te.current=gt,ae.current=Jn,t(Bt,wn)}},[r,t,tt,j,z]),ut=re.useCallback(Se=>{te.current=null,ae.current=null,Se.touches.length===0&&Se.preventDefault()},[]),rn=re.useCallback(Se=>{if(Se.ctrlKey||Se.metaKey){Se.preventDefault();const Re=Se.deltaY>0?.9:1.1,$e=Math.max(1,Math.min(2.5,r*Re)),gt=$e>1.3?38:50;t($e,gt)}},[r,t]),Vt=fd(),Nt=600,xt=Nt/2,Tt=Nt/2,vt=60,an=vt+8,Et=145,Ft=Et,gn=210,At=gn,ft=250,le=re.useMemo(()=>Q_(c),[c]),Pe=re.useMemo(()=>le.sharps>0?`${le.sharps}`:le.flats>0?`${le.flats}`:"",[le]),Qe=re.useRef(0),ht=Se=>{const Re=Se,$e=Date.now();if($e-Qe.current<300)return;Qe.current=$e,Xs(Se.notes),se(Re.segmentId??null),k(Se);let gt="";Re.positionIndex!==void 0&&Re.ringType&&(gt=Kt(Re.positionIndex,Re.ringType==="major"?"major":Re.ringType==="minor"?Re.numeral==="ii"||Re.numeral==="vi"?"ii":"iii":"dim")),(!(X&&!ie)||!W||!B&&!ee)&&G({isOpen:!0,chord:Re,voicingSuggestion:gt,baseQuality:Re.quality})},wt=Se=>{const Re=Se;let $e=N,gt=A;if(!$e||!gt){I();const Bt=pn.getState();if($e=Bt.selectedSectionId,gt=Bt.selectedSlotId,!$e||!gt)return}b(Se,$e,gt),R($e,gt)||(O($e,gt),se(Re.segmentId??null),k(Se)),V||I()},lt=Se=>(Se-M+12)%12,Zt=(Se,Re)=>{const $e=lt(Se);return Re==="major"?$e===0||$e===1||$e===11:Re==="ii"||Re==="iii"||Re==="dim"?$e===0:!1},Cn=Se=>lt(Se)===1,xn=Se=>{const Re=lt(Se);return Re===2||Re===4},tn=(Se,Re)=>{const $e=lt(Se);if(Re==="major"){if($e===0)return"I";if($e===1)return"V";if($e===11)return"IV";if($e===2)return"II";if($e===4)return"III"}if(Re==="ii"){if($e===0)return"ii";if($e===1)return"vi"}return Re==="iii"&&$e===0?"iii":Re==="dim"&&$e===0?"vii":""},Kt=(Se,Re)=>{const $e=lt(Se);if(Re==="major"){if($e===0)return"maj7, maj9, maj13 or 6";if($e===1)return"7, 9, 11, sus4, 13";if($e===11)return"maj7, maj9, maj13 or 6";if($e===2||$e===4)return"7, sus4"}if(Re==="ii"){if($e===0)return"m7, m9, m11, m6";if($e===1)return"m7, m9, m11"}return Re==="iii"&&$e===0?"m7":Re==="dim"&&$e===0?"m75 (7)":""},fn=Se=>{if(H)return H===Se.segmentId;const Re=T?.segmentId;return Re?Re===Se.segmentId:T&&!Re?T.root===Se.root&&T.quality===Se.quality:!1},Qt=re.useCallback(Se=>{Se.touches.length===2?mt(Se):Se.touches.length===1&&We(Se)},[mt,We]),$n=re.useCallback(Se=>{Se.touches.length===2?bt(Se):Se.touches.length===1&&ot(Se)},[bt,ot]),lr=re.useCallback(Se=>{et.current=null,Me.current=!1,ut(Se)},[ut]),[vn,Bn]=re.useState(null),dn=re.useCallback((Se,Re,$e)=>{Bn(Se?{text:Se,x:Re,y:$e}:null)},[]),sn=vn?{position:"fixed",left:vn.x,top:vn.y,transform:"translate(-50%, -100%) translateY(-12px)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"11px",pointerEvents:"none",zIndex:9999,whiteSpace:"normal",textAlign:"center",maxWidth:"220px",lineHeight:"1.4",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}:{};return x.jsxs("div",{ref:ce,"data-chord-wheel":!0,className:`relative flex flex-col items-center justify-center w-full h-full p-1 sm:p-2 select-none ${Ge?"cursor-grabbing":r>1&&!X?"cursor-grab":""}`,onTouchStart:Qt,onTouchMove:$n,onTouchEnd:lr,onWheel:rn,onMouseDown:it,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"none"},children:[vn&&x.jsx("div",{style:sn,children:vn.text}),x.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out overflow-hidden",style:{transform:`translate(${j.x}px, ${j.y}px) scale(${r})`,transformOrigin:`center ${e}%`},children:x.jsxs("svg",{ref:pe,width:"100%",height:"100%",viewBox:`0 0 ${Nt} ${Nt}`,className:`w-full h-full select-none ${me?"cursor-grabbing":"cursor-grab"}`,onMouseDown:it,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[x.jsxs("defs",{children:[x.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[x.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),x.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),x.jsx("filter",{id:"segment-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:x.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#ffffff",floodOpacity:"0.9"})})]}),x.jsx("g",{style:{transform:`rotate(${J}deg)`,transformOrigin:`${xt}px ${Tt}px`,transition:"transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:W_.map((Se,Re)=>{const gt=Re*30-15,$t=gt+30,Bt=Vt[Se.major]||Vt.C,wn=Se.ii.replace("m",""),Jn=Se.iii.replace("m",""),cr=Se.diminished.replace("",""),Tn=Zt(Re,"major"),li=xn(Re),Dr=Zt(Re,"ii")||Cn(Re),Pr=Zt(Re,"iii"),Kr=Zt(Re,"dim"),ms={root:Se.major,quality:"major",numeral:tn(Re,"major"),notes:ka(Se.major,"major"),symbol:Se.major,segmentId:`major-${Re}`,ringType:"major",positionIndex:Re},ci={root:wn,quality:"minor",numeral:tn(Re,"ii"),notes:ka(wn,"minor"),symbol:Se.ii,segmentId:`ii-${Re}`,ringType:"minor",positionIndex:Re},ui={root:Jn,quality:"minor",numeral:tn(Re,"iii"),notes:ka(Jn,"minor"),symbol:Se.iii,segmentId:`iii-${Re}`,ringType:"minor",positionIndex:Re},wi={root:cr,quality:"diminished",numeral:tn(Re,"dim"),notes:ka(cr,"diminished"),symbol:Se.diminished,segmentId:`dim-${Re}`,ringType:"diminished",positionIndex:Re},js=15,Qs=gt+-7.5,kn=Qs+js,yo=kn,_i=yo+js,Yi=15,xo=gt+(30-Yi)/2,gs=xo+Yi,Rr=Se.major,Cr=Se.ii,wo=Se.iii,Rl=Se.diminished;return x.jsxs("g",{children:[x.jsx(C1,{cx:xt,cy:Tt,innerRadius:an,outerRadius:Et,startAngle:gt,endAngle:$t,color:Bt,label:Rr,chord:ms,isSelected:fn(ms),isDiatonic:Tn,isSecondary:li,onClick:ht,onDoubleClick:wt,ringType:"major",wheelRotation:J,romanNumeral:Tn||li?tn(Re,"major"):void 0,voicingSuggestion:Tn||li?Kt(Re,"major"):void 0,segmentId:`major-${Re}`,onHover:dn}),x.jsx(C1,{cx:xt,cy:Tt,innerRadius:Ft,outerRadius:gn,startAngle:Qs,endAngle:kn,color:Bt,label:Cr,chord:ci,isSelected:fn(ci),isDiatonic:Dr,onClick:ht,onDoubleClick:wt,ringType:"minor",wheelRotation:J,romanNumeral:Dr?tn(Re,"ii"):void 0,voicingSuggestion:Dr?Kt(Re,"ii"):void 0,segmentId:`ii-${Re}`,onHover:dn}),x.jsx(C1,{cx:xt,cy:Tt,innerRadius:Ft,outerRadius:gn,startAngle:yo,endAngle:_i,color:Bt,label:wo,chord:ui,isSelected:fn(ui),isDiatonic:Pr,onClick:ht,onDoubleClick:wt,ringType:"minor",wheelRotation:J,romanNumeral:Pr?tn(Re,"iii"):void 0,voicingSuggestion:Pr?Kt(Re,"iii"):void 0,segmentId:`iii-${Re}`,onHover:dn}),x.jsx(C1,{cx:xt,cy:Tt,innerRadius:At,outerRadius:ft,startAngle:xo,endAngle:gs,color:Bt,label:Rl,chord:wi,isSelected:fn(wi),isDiatonic:Kr,onClick:ht,onDoubleClick:wt,ringType:"diminished",wheelRotation:J,romanNumeral:Kr?tn(Re,"dim"):void 0,voicingSuggestion:Kr?Kt(Re,"dim"):void 0,segmentId:`dim-${Re}`,onHover:dn})]},Se.major)})}),x.jsx("circle",{cx:xt,cy:Tt,r:vt,fill:"#1a1a24",stroke:"#3a3a4a",strokeWidth:"2",style:{pointerEvents:"none"}}),x.jsx("text",{x:xt,y:Tt-25,textAnchor:"middle",fill:"#6366f1",fontSize:"9",fontWeight:"bold",letterSpacing:"2",children:"KEY"}),x.jsx("text",{x:xt,y:Tt+3,textAnchor:"middle",fill:"white",fontSize:"26",fontWeight:"bold",children:Zr(c)}),x.jsx("text",{x:xt,y:Tt+21,textAnchor:"middle",fill:"#9898a6",fontSize:"11",children:Pe||"No /"}),x.jsxs("g",{transform:`translate(${xt-22}, ${Tt+40})`,onClick:()=>dt("ccw"),onTouchEnd:Se=>{Se.preventDefault(),Se.stopPropagation(),dt("ccw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[x.jsx("circle",{r:X?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),x.jsx("g",{transform:X?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:x.jsx(mp,{size:X?12:9,color:"#9898a6"})})]}),x.jsxs("g",{transform:`translate(${xt+22}, ${Tt+40})`,onClick:()=>dt("cw"),onTouchEnd:Se=>{Se.preventDefault(),Se.stopPropagation(),dt("cw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[x.jsx("circle",{r:X?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),x.jsx("g",{transform:X?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:x.jsx(Vh,{size:X?12:9,color:"#9898a6"})})]}),x.jsxs("g",{transform:`translate(${xt}, ${Tt+40})`,onClick:u?void 0:_,onTouchEnd:u?void 0:Se=>{Se.preventDefault(),Se.stopPropagation(),_()},className:u?"":"cursor-pointer",style:{pointerEvents:u?"none":"all",cursor:u?"default":"pointer",opacity:u?.5:1},children:[x.jsx("circle",{r:X?16:11,fill:u||p==="rotating"?"#252535":"#3f2e2e",className:"transition-colors",style:{pointerEvents:u?"none":"all",transition:"fill 0.3s ease"},children:x.jsx("title",{children:u?"Mode locked in this view":p==="rotating"?"Lock wheel (C at top)":"Pin current key to top"})}),x.jsxs("g",{style:{pointerEvents:"none",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:o!==0?`rotate(${o}deg)`:p==="rotating"?"rotate(0deg)":`rotate(${M*30}deg)`,transformOrigin:"0px 0px"},children:[x.jsx("polygon",{points:X?"0,-10 4,0 0,1.5 -4,0":"0,-7 2.5,0 0,1 -2.5,0",fill:"#ef4444",stroke:"#b91c1c",strokeWidth:"0.5"}),x.jsx("polygon",{points:X?"0,10 4,0 0,-1.5 -4,0":"0,7 2.5,0 0,-1 -2.5,0",fill:"#f1f5f9",stroke:"#94a3b8",strokeWidth:"0.5"}),x.jsx("circle",{cx:0,cy:0,r:X?2:1.5,fill:p==="rotating"?"#fef2f2":"#6b7280"})]})]})]})}),x.jsx(ck,{isOpen:ue.isOpen,onClose:()=>G({...ue,isOpen:!1}),onSelect:Se=>{if(ue.chord){const Re=ka(ue.chord.root,Se),$e={...ue.chord,quality:Se,notes:Re,symbol:`${ue.chord.root}${Se==="major"?"":Se==="minor"?"m":Se}`};k($e)}},onAddToTimeline:Se=>{if(ue.chord){const Re=ka(ue.chord.root,Se),$e={...ue.chord,quality:Se,notes:Re,symbol:`${ue.chord.root}${Se==="major"?"":Se==="minor"?"m":Se}`};let gt=N,$t=A;if(!gt||!$t){I();const Bt=pn.getState();if(gt=Bt.selectedSectionId,$t=Bt.selectedSlotId,!gt||!$t)return}b($e,gt,$t),O(gt,$t),k($e),V||I()}},onOpenDetails:()=>{W?L():U()},chordRoot:ue.chord?.root||"C",voicings:uk(ue.voicingSuggestion,ue.baseQuality),selectedQuality:ue.chord?.quality,portraitWithPanel:X&&!ie&&W&&!B&&!ee}),X&&!ie&&!W&&T&&(()=>{const Se=Vt[T.root]||"#6366f1",Re=T.quality;let $e;return Re==="major"||Re==="maj"?$e=Zr(T.root):Re==="minor"||Re==="m"?$e=Zr(`${T.root}m`):Re==="diminished"||Re==="dim"?$e=Zr(`${T.root}dim`):$e=Zr(`${T.root}${Re}`),x.jsxs("div",{className:"fixed flex items-center gap-1 z-10 cursor-pointer touch-feedback active:scale-95",style:{bottom:V?"260px":"175px",right:"12px",backgroundColor:"transparent",color:Se,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${Se}`,backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.4)",transition:"bottom 0.25s ease-out"},onClick:gt=>{gt.stopPropagation(),gt.preventDefault(),Xs(T.notes)},onTouchStart:gt=>{gt.stopPropagation()},onTouchEnd:gt=>{gt.stopPropagation(),gt.preventDefault(),Xs(T.notes)},children:[x.jsx("span",{className:"text-sm font-bold leading-none",children:$e}),T.numeral&&x.jsx("span",{className:"text-xs font-serif italic opacity-70",children:Zr(T.numeral)})]})})()]})},ig=({type:r,size:e=20,className:t})=>{const s=e>16?1.5:1;switch(r){case"whole":return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:x.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"4",fill:"none",stroke:"currentColor",strokeWidth:s*1.5})});case"half":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 10, 16)"}),x.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-half":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 8, 16)"}),x.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"quarter":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"currentColor",transform:"rotate(-20, 10, 16)"}),x.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-quarter":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 8, 16)"}),x.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"eighth":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),x.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("path",{d:"M13 4 Q18 6 16 11",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"sixteenth":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),x.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("path",{d:"M13 3 Q18 5 16 9",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("path",{d:"M13 7 Q18 9 16 13",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]})}};function ag(r,e){const[t]=e;if(t%3===0&&t>3){if(r===1)return"dotted-half";if(r===2)return"dotted-quarter";if(r===3)return"quarter";if(r===6)return"eighth";if(r===12)return"sixteenth"}if(t===3){if(r===1)return"dotted-half";if(r===3)return"quarter";if(r===6)return"eighth";if(r===12)return"sixteenth"}return r===1?"whole":r===2?"half":r===4?"quarter":r===8?"eighth":r===16?"sixteenth":r<=1?"whole":r<=2?"half":r<=4?"quarter":r<=8?"eighth":"sixteenth"}function nw(r){const[e]=r;return e%3===0?[1,3,6].filter(t=>t<=8):[1,2,4,8]}const fk=({value:r,onChange:e,timeSignature:t,isCompact:s=!1})=>{const[a,o]=re.useState(!1),u=re.useRef(null),c=re.useRef(null),f=nw(t);re.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&c.current&&!c.current.contains(_.target)&&o(!1)};if(a)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[a]),re.useEffect(()=>{if(a){const y=()=>o(!1);return window.addEventListener("scroll",y,!0),()=>window.removeEventListener("scroll",y,!0)}},[a]);const d=ag(r,t),p=s?12:16;return x.jsxs("div",{className:"relative",children:[x.jsx("button",{ref:u,onClick:()=>o(!a),className:Ot("flex items-center justify-center rounded transition-all","hover:bg-accent-primary/20 active:scale-95","text-text-muted hover:text-accent-primary",s?"w-4 h-5":"w-5 h-6",a&&"bg-accent-primary/20 text-accent-primary"),title:`${r} step${r>1?"s":""} per measure`,children:x.jsx(ig,{type:d,size:p})}),a&&Cl.createPortal(x.jsx("div",{ref:c,className:Ot("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row gap-2 p-2","animate-in fade-in zoom-in-95 duration-150"),style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",zIndex:99999},children:f.map(y=>{const _=ag(y,t),b=y===r;return x.jsx("button",{onClick:()=>{e(y),o(!1)},className:Ot("flex items-center justify-center rounded-lg transition-all","w-12 h-12",b?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`${y} step${y>1?"s":""}`,children:x.jsx(ig,{type:_,size:26})},y)})}),document.body)]})},Pv={intro:{bg:"bg-purple-500/15",border:"border-purple-500/40",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/15",border:"border-blue-500/40",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/15",border:"border-cyan-500/40",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/15",border:"border-amber-500/40",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/15",border:"border-emerald-500/40",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/15",border:"border-rose-500/40",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/15",border:"border-slate-500/40",accent:"bg-slate-500"}},dk=({section:r,songTimeSignature:e,className:t,onSlotClick:s})=>{const{tempo:a}=pn(),o=fd(),u=Pv[r.type]||Pv.custom,c=r.timeSignature||e,f=c[0],d=r.measures.length,[p,y]=re.useState(!1),[_,b]=re.useState(null),N=re.useRef([]),A=252,k=15,T=52,R=Math.floor(A/d),O=Math.max(k,Math.min(T,R)),V=d>8,I=d>12,W=()=>{N.current.forEach(L=>clearTimeout(L)),N.current=[],y(!1),b(null)};re.useEffect(()=>(W(),()=>{N.current.forEach(L=>clearTimeout(L)),N.current=[]}),[r.id]);const U=async()=>{if(p){W();return}Ts.state!=="running"&&await Su(),Ts.state==="suspended"&&await Ts.resume(),await Lc(),y(!0);const L=60/a*1e3,B=r.measures[0]?.beats.length||f,ee=f/B,M=ee*L;let F=0;r.measures.forEach(ae=>{ae.beats.forEach(H=>{const se=F*M,Q=window.setTimeout(()=>{b(H.id)},se);if(N.current.push(Q),H.chord&&H.chord.notes&&H.chord.notes.length>0){const ge=window.setTimeout(()=>{const j=`${4/Math.min(ee,f)}n`;Xs(H.chord.notes,j)},se);N.current.push(ge)}F++})});const J=r.measures.reduce((ae,H)=>ae+H.beats.length,0),te=window.setTimeout(()=>{y(!1),b(null),N.current=[]},J*M);N.current.push(te)};return x.jsx("div",{className:Ot("w-full",t),children:x.jsxs("div",{className:Ot("rounded-lg border overflow-hidden transition-all",u.bg,u.border),children:[x.jsx("div",{className:Ot("h-1 w-full",u.accent)}),x.jsx("div",{className:"pl-2 pr-3 py-2 overflow-hidden",style:{maxHeight:I?"80px":V?"100px":"120px"},children:x.jsx("div",{className:"flex gap-0.5",style:{minWidth:"min-content",width:"100%"},children:r.measures.map((L,B)=>{const ee=L.beats.length;return x.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",style:{minWidth:`${O}px`,maxWidth:`${O}px`},children:[!I&&x.jsxs("div",{className:"h-3 flex items-center justify-between px-0.5",children:[x.jsx("span",{className:Ot("font-mono text-white/30",V?"text-[6px]":"text-[8px]"),children:B+1}),!V&&x.jsx("div",{className:"flex gap-px",children:Array.from({length:Math.min(ee,f)}).map((M,F)=>x.jsx("div",{className:"w-0.5 h-1 bg-white/15 rounded-full"},F))})]}),x.jsx("div",{className:"flex-1 rounded overflow-hidden flex gap-px",style:{minHeight:I?"28px":V?"36px":"48px"},children:L.beats.map(M=>{const F=M.chord&&M.chord.notes&&M.chord.notes.length>0,J=M.chord,te=F&&o[J.root]||"#666",ae=_===M.id,H=L.beats.length;let se="9px";return I?se=H>2?"5px":"6px":V?se=H>2?"6px":"7px":se=H>2?"7px":H>1?"8px":"9px",F?x.jsx("div",{onClick:()=>s?.(M.id),className:Ot("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold truncate transition-all duration-150",ae&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:brightness-110 active:scale-95"),style:{backgroundColor:ae?te:"rgba(0, 0, 0, 0.35)",border:`1.5px solid ${te}`,color:ae?"#fff":te,fontSize:se,padding:"0 2px",textShadow:ae?"0 1px 3px rgba(0,0,0,0.7)":"0 1px 2px rgba(0,0,0,0.5)",boxShadow:ae?`0 0 12px ${te}, 0 0 4px ${te}`:"none"},title:J.symbol,children:Zr(J.symbol)},M.id):x.jsx("div",{onClick:()=>s?.(M.id),className:Ot("flex-1 min-w-0 rounded-sm flex items-center justify-center transition-all duration-150",ae&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:bg-white/10 active:scale-95"),style:{backgroundColor:ae?"rgba(99, 102, 241, 0.5)":"rgba(255, 255, 255, 0.03)",border:ae?"1.5px solid rgba(99, 102, 241, 0.8)":"1px dashed rgba(255, 255, 255, 0.1)",boxShadow:ae?"0 0 8px rgba(99, 102, 241, 0.5)":"none"},children:x.jsx("span",{className:Ot("transition-colors duration-150",ae?"text-white/60":"text-white/10",V?"text-[6px]":"text-[8px]"),children:""})},M.id)})})]},L.id)})})}),x.jsxs("div",{className:"px-2 py-1.5 bg-black/20 border-t border-white/5 flex items-center gap-2",children:[x.jsx("button",{onClick:U,className:Ot("w-5 h-5 rounded-full flex items-center justify-center transition-all","hover:scale-110 active:scale-95",p?"bg-red-500/80 text-white":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"),title:p?"Stop":"Play section once",children:p?x.jsx(X3,{size:8}):x.jsx(Wh,{size:10,className:"ml-0.5"})}),x.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3",children:[x.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[c[0],"/",c[1]]}),x.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-white/20"}),x.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[d," bar",d!==1?"s":""]})]})]})]})})},pk=[[4,4],[3,4],[5,4],[2,4],[6,8]],qv=[{name:"Intro",type:"intro"},{name:"Verse",type:"verse"},{name:"Pre-Chorus",type:"pre-chorus"},{name:"Chorus",type:"chorus"},{name:"Bridge",type:"bridge"},{name:"Interlude",type:"interlude"},{name:"Solo",type:"solo"},{name:"Breakdown",type:"breakdown"},{name:"Tag",type:"tag"},{name:"Hook",type:"hook"},{name:"Outro",type:"outro"}],mk=({section:r,isOpen:e,onClose:t,onTimeSignatureChange:s,onBarsChange:a,onStepCountChange:o,onNameChange:u,onCopy:c,onClear:f,onDelete:d,songTimeSignature:p,onNavigatePrev:y,onNavigateNext:_,hasPrev:b=!1,hasNext:N=!1,sectionIndex:A,totalSections:k,onSlotClick:T})=>{const R=re.useRef(null),O=r.timeSignature||p,V=`${O[0]}/${O[1]}`,I=r.measures.length,W=r.measures[0]?.beats.length??1,U=nw(O);return re.useEffect(()=>{if(!e)return;const L=B=>{B.key==="Escape"&&t()};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[e,t]),e?Cl.createPortal(x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:t}),y&&x.jsx("button",{onClick:y,disabled:!b,className:Ot("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{left:"calc(50% - min(150px, 45vw) - 52px)"},title:"Previous Section",children:x.jsx(Fh,{size:24})}),_&&x.jsx("button",{onClick:_,disabled:!N,className:Ot("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",N?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{right:"calc(50% - min(150px, 45vw) - 52px)"},title:"Next Section",children:x.jsx(Ih,{size:24})}),x.jsxs("div",{ref:R,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"260px",maxWidth:"300px",width:"90vw"},children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[A!==void 0&&k!==void 0&&x.jsxs("div",{className:"h-5 px-2 rounded-full flex items-center justify-center gap-0.5 font-bold text-white shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99,102,241,0.4)"},title:`Section ${A+1} of ${k}`,children:[x.jsx("span",{className:"text-[10px]",children:A+1}),x.jsx("span",{className:"text-[6px] opacity-60 font-medium",children:"of"}),x.jsx("span",{className:"text-[10px]",children:k})]}),(A===void 0||k===void 0)&&x.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),u?x.jsx("select",{value:r.name,onChange:L=>{const B=qv.find(ee=>ee.name===L.target.value);B&&u(B.name,B.type)},className:`bg-transparent text-sm font-bold text-text-primary 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                           appearance-none cursor-pointer pr-5`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0 center"},children:qv.map(L=>x.jsx("option",{value:L.name,className:"bg-bg-secondary",children:L.name},L.type))}):x.jsx("span",{className:"text-sm font-bold text-text-primary",children:r.name})]}),x.jsx("button",{onClick:t,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:x.jsx(vu,{size:14})})]}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Sig"}),x.jsx("div",{className:"relative",children:x.jsx("select",{value:V,onChange:L=>s(L.target.value),className:`w-full h-8 bg-bg-tertiary text-text-primary text-xs font-bold rounded-lg 
                                               px-3 border border-border-subtle 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"24px"},children:pk.map(([L,B])=>x.jsxs("option",{value:`${L}/${B}`,className:"bg-bg-secondary",children:[L,"/",B]},`${L}/${B}`))})})]}),x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Length"}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:()=>a(Math.max(1,I-1)),disabled:I<=1,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:""}),x.jsx("span",{className:"flex-1 text-center text-sm font-bold text-text-primary tabular-nums",children:I}),x.jsx("button",{onClick:()=>a(Math.min(16,I+1)),disabled:I>=16,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:"+"})]})]})]}),o&&x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-center text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Steps Per Bar"}),x.jsx("div",{className:"flex items-center gap-1.5 justify-center",children:U.map(L=>{const B=ag(L,O),ee=L===W;return x.jsx("button",{onClick:()=>o(L),className:Ot("flex items-center justify-center rounded-lg transition-all","w-11 h-11 active:scale-95",ee?"bg-accent-primary text-white shadow-lg border-2 border-accent-primary":"bg-bg-tertiary border border-border-subtle text-text-muted hover:text-text-primary hover:bg-bg-secondary"),title:`${L} step${L>1?"s":""} per measure`,children:x.jsx(ig,{type:B,size:24})},L)})})]}),x.jsx(dk,{section:r,songTimeSignature:p,className:"pt-1",onSlotClick:T}),x.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[x.jsxs("button",{onClick:()=>{c(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-accent-primary/10 border border-accent-primary/30
                                       text-accent-primary hover:bg-accent-primary/20
                                       transition-all text-xs font-bold active:scale-95`,children:[x.jsx(pT,{size:14}),"Duplicate"]}),x.jsxs("button",{onClick:()=>{f(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-yellow-500/10 border border-yellow-500/30
                                       text-yellow-400 hover:bg-yellow-500/20
                                       transition-all text-xs font-bold active:scale-95`,children:[x.jsx(bT,{size:14}),"Clear"]}),x.jsxs("button",{onClick:()=>{d(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-red-500/10 border border-red-500/30
                                       text-red-400 hover:bg-red-500/20
                                       transition-all text-xs font-bold active:scale-95`,children:[x.jsx(rg,{size:14}),"Remove"]})]})]})]})]}),document.body):null},gk={intro:"Intro",verse:"Verse","pre-chorus":"Pre-Chorus",chorus:"Chorus",bridge:"Bridge",interlude:"Interlude",solo:"Solo",breakdown:"Breakdown",tag:"Tag",hook:"Hook",outro:"Outro"};function Wf(r,e){const t=gk[r.type],s=e.filter(o=>o.type===r.type);if(s.length<=1)return t;const a=s.findIndex(o=>o.id===r.id);return`${t} ${a+1}`}const og=({isOpen:r,onToggle:e,hideCloseButton:t=!1,isCompact:s=!1,isLandscape:a=!1})=>{const{currentSong:o,selectedSectionId:u,selectedSlotId:c,setSelectedSlot:f,selectSlotOnly:d,setSelectedChord:p,playingSectionId:y,playingSlotId:_,isPlaying:b,addSuggestedSection:N,setSectionTimeSignature:A,setSectionMeasures:k,setSectionSubdivision:T,removeSection:R,duplicateSection:O,clearSection:V,setMeasureSubdivision:I,selectedChord:W,addChordToSlot:U,toggleSongMap:L,updateSection:B,undo:ee,redo:M,canUndo:F,canRedo:J,clearSlot:te}=pn(),ae=o.timeSignature,H=fd(),se=re.useRef(null),Q=re.useRef(null),{isMobile:ge}=Yh(),ue=!ge,[G,j]=Yn.useState(0),z=re.useRef(0),[X,ie]=Yn.useState(0),ce=re.useRef(0),[pe,me]=Yn.useState(0),Ne=re.useRef(!1),[we,Ve]=Yn.useState(null),Ge=re.useRef(null);re.useEffect(()=>{if(!b&&u&&Q.current){const Fe=o.sections.findIndex(tt=>tt.id===u);Fe!==-1&&(j(Fe),setTimeout(()=>{if(Q.current){const tt=Q.current.querySelector(`[data-section-id="${u}"]`);tt&&tt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100))}},[u,o.sections,b]),re.useEffect(()=>{if(b&&y){const Fe=o.sections.findIndex(tt=>tt.id===y);Fe!==-1&&Fe!==G&&j(Fe)}},[b,y,o.sections,G]),re.useEffect(()=>{if(_&&se.current){const Fe=se.current.querySelector(`[data-slot-id="${_}"]`);Fe&&Fe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[_]),re.useEffect(()=>{if(!r||!c||b)return;const Fe=setTimeout(()=>{if(se.current){const tt=se.current.querySelector(`[data-slot-id="${c}"]`);tt&&tt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},250);return()=>clearTimeout(Fe)},[c,b,r]);const nt=Fe=>{z.current=Fe.touches[0].clientY},st=Fe=>{const tt=Fe.touches[0].clientY-z.current;tt>0&&ie(Math.min(tt,100))},Y=()=>{X>50&&e(),ie(0)},De=Fe=>{ce.current=Fe.touches[0].clientY},dt=Fe=>{const tt=ce.current-Fe.touches[0].clientY;tt>0&&me(Math.min(tt,60))},et=()=>{pe>30&&e(),me(0)},Me=Fe=>{Ne.current=!0,ce.current=Fe.clientY,Fe.preventDefault()};re.useEffect(()=>{const Fe=Ke=>{if(!Ne.current)return;const ct=ce.current-Ke.clientY;ct>0&&me(Math.min(ct,60))},tt=()=>{Ne.current&&(pe>30&&e(),me(0),Ne.current=!1)};return document.addEventListener("mousemove",Fe),document.addEventListener("mouseup",tt),()=>{document.removeEventListener("mousemove",Fe),document.removeEventListener("mouseup",tt)}},[pe,e]);const it=Fe=>{if(H[Fe])return H[Fe];const tt=Mh(Fe);for(const Ke of Object.keys(H))if(Mh(Ke)===tt)return H[Ke];return"hsl(230, 60%, 50%)"},We=(Fe,tt,Ke)=>{const ct=u===Fe&&c===tt,yt=Date.now();if(Ke&&Ge.current&&Ge.current.slotId===tt&&yt-Ge.current.time<400){W&&(U(W,Fe,tt),d(Fe,tt)),Ge.current=null;return}Ke?(Ke.notes&&Ke.notes.length>0&&Xs(Ke.notes),ct?p(Ke):d(Fe,tt),Ge.current={slotId:tt,time:yt}):(ct&&W?U(W,Fe,tt):d(Fe,tt),Ge.current=null)},ot=Fe=>{const tt=Fe==="prev"?Math.max(0,G-1):Math.min(o.sections.length-1,G+1);j(tt);const Ke=o.sections[tt];Ke&&Ke.measures[0]?.beats[0]&&f(Ke.id,Ke.measures[0].beats[0].id)},rt=o.sections[G];return r?x.jsxs("div",{"data-mobile-timeline":!0,className:Ot("relative w-full bg-bg-secondary border-t-2 border-border-subtle overflow-hidden flex flex-col mobile-timeline-drawer",a&&"h-full",t&&"h-full border-t-0"),style:{maxHeight:a||t?void 0:"140px",transform:X>0?`translateY(${X}px)`:void 0,opacity:X>0?Math.max(.5,1-X/150):1,transition:X===0?"all 0.2s ease-out":"none"},children:[!t&&x.jsx("div",{className:"flex flex-col items-center pt-2 pb-2.5 cursor-grab active:cursor-grabbing shrink-0",onTouchStart:nt,onTouchMove:st,onTouchEnd:Y,children:x.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})}),s?x.jsxs("div",{className:"relative flex items-center justify-center shrink-0 px-1 py-1",children:[x.jsx("button",{onClick:()=>L(!0),className:"absolute left-1 rounded text-text-muted hover:text-accent-primary touch-feedback flex items-center justify-center w-5 h-5",title:"Song Overview",children:x.jsx(pp,{size:12})}),x.jsxs("div",{className:"flex items-center justify-center gap-1",children:[x.jsx("button",{onClick:()=>ot("prev"),disabled:G===0,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:x.jsx(Fh,{size:14})}),x.jsxs("button",{onClick:()=>rt&&Ve(rt.id),className:"flex items-center justify-center gap-0.5 px-2 py-1 rounded-full text-white font-semibold text-[10px]",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)",border:"1px solid rgba(255,255,255,0.2)"},title:rt?Wf(rt,o.sections):"Section",children:[x.jsxs("span",{className:"flex items-baseline",children:[x.jsx("span",{children:rt?Wf(rt,o.sections).charAt(0).toUpperCase():"S"}),x.jsx("span",{className:"text-[7px] opacity-60 ml-0.5",children:G+1})]}),x.jsx(Vv,{size:10,className:"opacity-70 shrink-0"})]}),x.jsx("button",{onClick:()=>ot("next"),disabled:G===o.sections.length-1,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:x.jsx(Ih,{size:14})})]}),x.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5",children:[x.jsx("button",{onClick:ee,disabled:!F,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:x.jsx(mp,{size:10})}),x.jsx("button",{onClick:M,disabled:!J,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:x.jsx(Vh,{size:10})})]})]}):x.jsxs("div",{className:Ot("flex items-center justify-between shrink-0",ue?"px-3 py-1":"px-2 pb-1.5"),children:[x.jsxs("div",{className:"flex items-center shrink-0",children:[x.jsx("button",{onClick:()=>L(!0),className:Ot("no-touch-enlarge rounded text-text-muted hover:text-accent-primary touch-feedback shrink-0 mr-0.5",ue?"p-2":"p-1.5"),title:"Song Overview",children:x.jsx(pp,{size:ue?18:16})}),x.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[x.jsx("button",{onClick:ee,disabled:!F,className:Ot("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",ue?"w-8 h-8":"w-7 h-7"),title:"Undo",children:x.jsx(mp,{size:ue?14:12})}),x.jsx("button",{onClick:M,disabled:!J,className:Ot("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",ue?"w-8 h-8":"w-7 h-7"),title:"Redo",children:x.jsx(Vh,{size:ue?14:12})})]})]}),x.jsx("button",{onClick:()=>ot("prev"),disabled:G===0,className:Ot("no-touch-enlarge rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback",ue?"p-2":"p-1.5"),children:x.jsx(Fh,{size:ue?18:16})}),x.jsxs("div",{ref:Q,className:Ot("flex-1 flex items-center overflow-x-auto scrollbar-hide px-1 mx-1",ue?"gap-2":"gap-1.5"),children:[o.sections.map((Fe,tt)=>{const Ke=tt===G,ct=Wf(Fe,o.sections),yt=ct.charAt(0).toUpperCase();return x.jsx("button",{"data-section-id":Fe.id,onClick:()=>{if(Ke){Ve(Fe.id);return}j(tt),Fe.measures[0]?.beats[0]&&f(Fe.id,Fe.measures[0].beats[0].id)},className:Ot("no-touch-enlarge relative font-semibold transition-all touch-feedback shrink-0","flex items-center justify-center",Ke?Ot("rounded-full text-white shadow-lg whitespace-nowrap overflow-hidden",ue?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"):Ot("rounded-full text-text-secondary hover:text-text-primary border border-border-medium hover:border-border-subtle hover:bg-bg-tertiary",ue?"w-9 h-9 text-sm":"w-8 h-8 text-xs")),style:Ke?{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 16px rgba(99, 102, 241, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.2)"}:void 0,title:ct,children:Ke?x.jsxs("span",{className:"flex items-center gap-1 px-2 truncate",children:[x.jsx("span",{className:"truncate",children:ct}),x.jsx(Vv,{size:ue?14:12,className:"opacity-70 shrink-0"})]}):yt},Fe.id)}),x.jsx("button",{onClick:()=>N(),className:Ot("no-touch-enlarge rounded-full text-text-muted hover:text-accent-primary touch-feedback shrink-0 border border-dashed border-border-medium hover:border-accent-primary/50 transition-all hover:bg-accent-primary/10 flex items-center justify-center",ue?"w-9 h-9":"w-8 h-8"),title:"Add section",children:x.jsx(Tc,{size:ue?14:12})})]}),x.jsx("button",{onClick:()=>ot("next"),disabled:G===o.sections.length-1,className:Ot("no-touch-enlarge rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback",ue?"p-2":"p-1.5"),children:x.jsx(Ih,{size:ue?18:16})}),!t&&x.jsx("button",{onClick:e,className:"p-2 min-w-[40px] min-h-[40px] hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center ml-1",title:"Close timeline",children:x.jsx(H3,{size:18,className:"text-text-muted rotate-90"})})]}),x.jsx("div",{ref:se,className:Ot("flex-1",ue?"px-3 pb-2 pt-3":"px-1 pb-1 pt-3",a?"overflow-y-auto overflow-x-hidden":"overflow-x-auto overflow-y-hidden"),children:rt&&x.jsx("div",{className:Ot(a?s?"flex flex-col gap-0":"grid grid-cols-4 gap-0.5":Ot("flex flex-row items-center",ue?"gap-1.5":"gap-0.5")),children:rt.measures.map((Fe,tt)=>x.jsxs(Yn.Fragment,{children:[x.jsxs("div",{className:Ot("flex items-center",a?s?"gap-0.5 w-full min-w-0":"gap-0.5":ue?"gap-1 shrink-0":"gap-0.5 shrink-0"),children:[x.jsxs("div",{className:Ot("flex flex-col items-center justify-center shrink-0",a?"gap-0 w-4":ue?"gap-0 w-6":"gap-0 w-5"),children:[x.jsx("span",{className:Ot("font-mono text-text-muted text-center leading-none",ue?"text-[9px]":a?"text-[7px]":"text-[8px]"),children:tt+1}),x.jsx(fk,{value:Fe.beats.length,onChange:Ke=>I(rt.id,Fe.id,Ke),timeSignature:rt.timeSignature||[4,4],isCompact:a})]}),x.jsx("div",{className:Ot("flex items-center",a?s?`flex-1 gap-0.5 min-w-0 ${Fe.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:`flex-1 gap-0.5 min-w-0 ${Fe.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:"gap-0.5"),children:Fe.beats.map(Ke=>{const ct=u===rt.id&&c===Ke.id,yt=y===rt.id&&_===Ke.id,mt=Ke.chord?it(Ke.chord.root):void 0,bt=Fe.beats.length;let ut,rn;a&&bt>4&&(ut=Math.max(22,Math.floor(160/bt)),rn=Math.max(18,Math.floor(120/bt)));const Vt=ue?48:36,Nt=4/bt,xt=Math.round(Vt*Nt),Tt=Math.max(ue?36:28,Math.min(ue?192:144,xt)),vt=ue?40:a&&s?bt<=4?26:24:32;return x.jsxs("button",{"data-slot-id":Ke.id,onClick:()=>We(rt.id,Ke.id,Ke.chord),className:Ot("no-touch-enlarge relative flex items-center justify-center rounded-md transition-all touch-feedback group",a&&bt<=4?"flex-1 min-w-0":"shrink-0",yt&&"ring-2 ring-green-500 ring-offset-1 ring-offset-bg-primary shadow-[0_0_12px_rgba(34,197,94,0.5)] scale-105 z-10",ct&&!yt&&"ring-2 ring-accent-primary ring-offset-1 ring-offset-bg-primary",!Ke.chord&&"border-2 border-dashed border-border-medium bg-bg-elevated hover:border-text-muted"),style:{height:`${vt}px`,...a&&ut?{width:`${ut}px`,minWidth:`${rn}px`}:{},...a?{}:{width:`${Tt}px`,minWidth:`${Tt}px`},...Ke.chord?{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${mt}`}:{}},children:[Ke.chord?x.jsx("span",{className:Ot("font-bold px-0.5 truncate",ue?"text-xs":a?bt>=8?"text-[7px]":bt>=4?"text-[8px]":"text-[9px]":"text-[10px]"),style:{color:mt},children:Zr(Ke.chord.symbol)}):x.jsx("span",{className:Ot("text-text-muted font-light",a?bt>=8?"text-xs":"text-sm":"text-base"),children:"+"}),yt&&x.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 flex items-center justify-center",children:x.jsx(Wh,{size:6,fill:"white",className:"text-white"})}),Ke.chord&&!yt&&(ct||ue)&&x.jsx("div",{onClick:an=>{an.stopPropagation(),te(rt.id,Ke.id)},className:Ot("absolute rounded-full bg-black/70 backdrop-blur-sm flex items-center justify-center cursor-pointer border border-white/30 active:bg-white/30",ue?"w-4 h-4 -top-2 -right-2 opacity-0 group-hover:opacity-100 hover:bg-white/20 hover:border-white/50 transition-all z-30":"w-5 h-5 -top-2.5 -right-2.5 opacity-100 z-30"),title:"Remove chord",children:x.jsx("span",{className:Ot("text-white/90 font-bold leading-none",ue?"text-[10px]":"text-xs"),children:""})})]},Ke.id)})})]}),!s&&!a&&tt<rt.measures.length-1&&x.jsx("div",{className:"w-px h-5 bg-border-medium shrink-0"})]},Fe.id))})}),we&&(()=>{const Fe=o.sections.findIndex(ct=>ct.id===we),tt=Fe>0,Ke=Fe<o.sections.length-1;return x.jsx(mk,{section:o.sections.find(ct=>ct.id===we),isOpen:!0,onClose:()=>Ve(null),onTimeSignatureChange:ct=>{const[yt,mt]=ct.split("/").map(bt=>parseInt(bt,10));yt&&mt&&we&&A(we,[yt,mt])},onBarsChange:ct=>{we&&k(we,ct)},onStepCountChange:ct=>{we&&T(we,ct)},onNameChange:(ct,yt)=>{we&&B(we,{name:ct,type:yt})},onCopy:()=>{we&&O(we)},onClear:()=>{we&&V(we)},onDelete:()=>{we&&R(we)},songTimeSignature:ae||[4,4],onNavigatePrev:()=>{if(tt){const ct=o.sections[Fe-1];Ve(ct.id),j(Fe-1)}},onNavigateNext:()=>{if(Ke){const ct=o.sections[Fe+1];Ve(ct.id),j(Fe+1)}},hasPrev:tt,hasNext:Ke,sectionIndex:Fe,totalSections:o.sections.length,onSlotClick:ct=>{Ve(null),j(Fe),d(we,ct)}})})()]}):x.jsxs("div",{"data-mobile-timeline":!0,className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing touch-feedback select-none",onClick:()=>{!Ne.current&&pe===0&&e()},onTouchStart:De,onTouchMove:dt,onTouchEnd:et,onMouseDown:Me,style:{transform:pe>0?`translateY(-${pe}px)`:void 0,opacity:pe>0?Math.min(1,.7+pe/100):1,transition:pe===0?"all 0.2s ease-out":"none"},children:[x.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),x.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Timeline"})]})},bk=({highlightedNotes:r,rootNote:e,bassNote:t,color:s="#6366f1",octave:a=4,onNotePlay:o})=>{const u=["C","D","E","F","G","A","B"],c=T=>{const R={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},O=T.replace(/\d+/g,"");return R[O]??-1},f=r.map(T=>c(T)),d=e?c(e):-1,p=t?c(t):-1,y=T=>{const R=c(T);return R!==-1&&f.includes(R)},_=T=>d===-1?!1:c(T)===d,b=T=>p===-1?!1:c(T)===p,N=(T,R)=>{o&&o(T,R)},A=()=>{const T=[];for(let O=0;O<2;O++){const V=a+O;u.forEach(I=>{const W=y(I),U=_(I),L=b(I);T.push(x.jsx("div",{className:"h-full rounded-b-md relative border-x border-b border-gray-400 cursor-pointer hover:brightness-95 active:brightness-90 transition-all",style:{width:`${100/14}%`,background:"linear-gradient(180deg, #fafafa 0%, #e8e8e8 70%, #d0d0d0 100%)",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.08)"},onClick:()=>N(I,V),children:W&&x.jsxs(x.Fragment,{children:[U&&x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"3px",transform:"translateX(-50%)",width:"18px",height:"18px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"6px",transform:"translateX(-50%)",width:L?"14px":U?"12px":"9px",height:L?"14px":U?"12px":"9px",background:s,border:L?"3px solid #000":"2px solid #000",boxShadow:L?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`white-${O}-${I}`))})}return T},k=()=>{const T=[],R=[{note:"C#",offset:7.14},{note:"D#",offset:14.28},{note:"F#",offset:28.57},{note:"G#",offset:35.71},{note:"A#",offset:42.85}];for(let O=0;O<2;O++){const V=O*50,I=a+O;R.forEach(({note:W,offset:U})=>{const L=y(W),B=_(W),ee=b(W),M=V+U;T.push(x.jsx("div",{className:"absolute top-0 rounded-b-md cursor-pointer hover:brightness-125 active:brightness-150 transition-all",style:{left:`${M}%`,width:"5.5%",height:"58%",transform:"translateX(-50%)",background:"linear-gradient(180deg, #333 0%, #1a1a1a 70%, #0a0a0a 100%)",boxShadow:"0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08)",pointerEvents:"auto"},onClick:()=>N(W,I),children:L&&x.jsxs(x.Fragment,{children:[B&&x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"1px",transform:"translateX(-50%)",width:"16px",height:"16px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"4px",transform:"translateX(-50%)",width:ee?"12px":B?"10px":"8px",height:ee?"12px":B?"10px":"8px",background:s,border:ee?"3px solid #fff":"2px solid #fff",boxShadow:ee?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`black-${O}-${W}`))})}return T};return x.jsx("div",{className:"relative w-full rounded-lg select-none overflow-hidden",style:{height:"80px",minHeight:"80px",background:"#1a1a22",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.6)",padding:"3px 2px 2px 2px"},children:x.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[x.jsx("div",{className:"flex w-full h-full gap-[1px]",style:{position:"relative",zIndex:0},children:A()}),x.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"},children:k()})]})})},vk={C:{maj:[{frets:[-1,3,2,0,1,0],fingers:[0,3,2,0,1,0],barres:[],baseFret:1}],m:[{frets:[-1,3,1,0,1,3],fingers:[0,3,1,0,2,4],barres:[],baseFret:1}],7:[{frets:[-1,3,2,3,1,0],fingers:[0,3,2,4,1,0],barres:[],baseFret:1}],maj7:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj9:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,3,2,2,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],m7:[{frets:[-1,3,1,3,1,3],fingers:[0,2,1,3,1,4],barres:[1],baseFret:3}],m9:[{frets:[-1,3,1,3,3,3],fingers:[0,2,1,3,4,4],barres:[],baseFret:3}],m11:[{frets:[-1,3,1,3,3,1],fingers:[0,2,1,3,4,1],barres:[1],baseFret:3}],m6:[{frets:[-1,3,1,2,1,3],fingers:[0,3,1,2,1,4],barres:[1],baseFret:1}],sus2:[{frets:[-1,3,0,0,1,3],fingers:[0,2,0,0,1,3],barres:[],baseFret:1}],sus4:[{frets:[-1,3,3,0,1,1],fingers:[0,3,4,0,1,1],barres:[1],baseFret:1}],dim:[{frets:[-1,3,1,-1,1,2],fingers:[0,4,1,0,2,3],barres:[],baseFret:1}],6:[{frets:[-1,3,2,2,1,0],fingers:[0,4,2,3,1,0],barres:[],baseFret:1}],add9:[{frets:[-1,3,2,0,3,0],fingers:[0,2,1,0,3,0],barres:[],baseFret:1}],9:[{frets:[-1,3,2,3,3,0],fingers:[0,2,1,3,4,0],barres:[],baseFret:1}],11:[{frets:[-1,3,2,3,3,3],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],13:[{frets:[-1,3,2,3,3,5],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,3,4,3,4,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},"C#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},Db:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},D:{maj:[{frets:[-1,-1,0,2,3,2],fingers:[0,0,0,1,3,2],barres:[],baseFret:1}],m:[{frets:[-1,-1,0,2,3,1],fingers:[0,0,0,2,3,1],barres:[],baseFret:1}],7:[{frets:[-1,-1,0,2,1,2],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],maj7:[{frets:[-1,-1,0,2,2,2],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],maj9:[{frets:[-1,-1,0,2,2,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],maj13:[{frets:[-1,-1,0,2,2,4],fingers:[0,0,0,1,1,3],barres:[2],baseFret:1}],m7:[{frets:[-1,-1,0,2,1,1],fingers:[0,0,0,2,1,1],barres:[1],baseFret:1}],m9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],m11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m6:[{frets:[-1,-1,0,2,0,1],fingers:[0,0,0,2,0,1],barres:[],baseFret:1}],sus2:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],sus4:[{frets:[-1,-1,0,2,3,3],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,1,3,1],fingers:[0,0,0,1,4,2],barres:[],baseFret:1}],6:[{frets:[-1,-1,0,2,0,2],fingers:[0,0,0,1,0,2],barres:[],baseFret:1}],add9:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],13:[{frets:[-1,-1,0,2,1,4],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,1,1,1],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}]},"D#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},Eb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},E:{maj:[{frets:[0,2,2,1,0,0],fingers:[0,2,3,1,0,0],barres:[],baseFret:1}],m:[{frets:[0,2,2,0,0,0],fingers:[0,2,3,0,0,0],barres:[],baseFret:1}],7:[{frets:[0,2,0,1,0,0],fingers:[0,2,0,1,0,0],barres:[],baseFret:1}],maj7:[{frets:[0,2,1,1,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],maj9:[{frets:[0,2,1,1,0,2],fingers:[0,2,1,1,0,3],barres:[1],baseFret:1}],maj13:[{frets:[0,2,1,1,2,2],fingers:[0,2,1,1,3,3],barres:[],baseFret:1}],m7:[{frets:[0,2,0,0,0,0],fingers:[0,1,0,0,0,0],barres:[],baseFret:1}],m9:[{frets:[0,2,0,0,0,2],fingers:[0,2,0,0,0,3],barres:[],baseFret:1}],m11:[{frets:[0,2,0,0,3,0],fingers:[0,2,0,0,4,0],barres:[],baseFret:1}],m6:[{frets:[0,2,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],sus2:[{frets:[0,2,4,4,0,0],fingers:[0,1,3,4,0,0],barres:[],baseFret:1}],sus4:[{frets:[0,2,2,2,0,0],fingers:[0,2,3,4,0,0],barres:[],baseFret:1}],dim:[{frets:[0,1,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],6:[{frets:[0,2,2,1,2,0],fingers:[0,2,3,1,4,0],barres:[],baseFret:1}],add9:[{frets:[0,2,2,1,0,2],fingers:[0,2,3,1,0,4],barres:[],baseFret:1}],9:[{frets:[0,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],11:[{frets:[0,2,0,1,3,0],fingers:[0,2,0,1,4,0],barres:[],baseFret:1}],13:[{frets:[0,2,0,1,2,2],fingers:[0,2,0,1,3,4],barres:[],baseFret:1}],m7b5:[{frets:[0,1,0,0,2,0],fingers:[0,1,0,0,2,0],barres:[],baseFret:1}]},F:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:1}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:1}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,-1,3,2,1,0],fingers:[0,0,3,2,1,0],barres:[],baseFret:1}],maj9:[{frets:[1,0,3,0,1,0],fingers:[1,0,3,0,2,0],barres:[],baseFret:1}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:1}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:1}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:1}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,-1,3,0,1,1],fingers:[0,0,3,0,1,1],barres:[1],baseFret:1}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:1}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:1}],6:[{frets:[1,-1,0,2,1,1],fingers:[1,0,0,3,1,1],barres:[1],baseFret:1}],add9:[{frets:[-1,-1,3,2,1,3],fingers:[0,0,3,2,1,4],barres:[],baseFret:1}],9:[{frets:[1,3,1,2,1,3],fingers:[1,3,1,2,1,4],barres:[1],baseFret:1}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:1}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:1}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}]},"F#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},Gb:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},G:{maj:[{frets:[3,2,0,0,0,3],fingers:[2,1,0,0,0,3],barres:[],baseFret:1}],m:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],7:[{frets:[3,2,0,0,0,1],fingers:[3,2,0,0,0,1],barres:[],baseFret:1}],maj7:[{frets:[3,2,0,0,0,2],fingers:[3,1,0,0,0,2],barres:[],baseFret:1}],maj9:[{frets:[3,0,0,0,0,2],fingers:[2,0,0,0,0,1],barres:[],baseFret:1}],maj13:[{frets:[3,2,0,0,2,2],fingers:[3,1,0,0,2,2],barres:[2],baseFret:1}],m7:[{frets:[3,1,0,0,3,0],fingers:[2,1,0,0,3,0],barres:[],baseFret:1}],m9:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],m11:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],m6:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],sus2:[{frets:[3,0,0,0,3,3],fingers:[1,0,0,0,2,3],barres:[],baseFret:1}],sus4:[{frets:[3,3,0,0,1,3],fingers:[2,3,0,0,1,4],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],6:[{frets:[3,2,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],add9:[{frets:[3,0,0,0,0,3],fingers:[2,0,0,0,0,3],barres:[],baseFret:1}],9:[{frets:[3,2,0,1,0,1],fingers:[3,2,0,1,0,1],barres:[1],baseFret:1}],11:[{frets:[3,2,0,1,3,1],fingers:[3,2,0,1,4,1],barres:[1],baseFret:1}],13:[{frets:[3,2,0,1,0,5],fingers:[2,1,0,1,0,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}]},"G#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},Ab:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},A:{maj:[{frets:[-1,0,2,2,2,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],m:[{frets:[-1,0,2,2,1,0],fingers:[0,0,2,3,1,0],barres:[],baseFret:1}],7:[{frets:[-1,0,2,0,2,0],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}],maj7:[{frets:[-1,0,2,1,2,0],fingers:[0,0,2,1,3,0],barres:[],baseFret:1}],maj9:[{frets:[-1,0,2,1,0,0],fingers:[0,0,2,1,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,0,2,1,2,4],fingers:[0,0,2,1,3,4],barres:[],baseFret:1}],m7:[{frets:[-1,0,2,0,1,0],fingers:[0,0,2,0,1,0],barres:[],baseFret:1}],m9:[{frets:[-1,0,2,0,1,3],fingers:[0,0,2,0,1,4],barres:[],baseFret:1}],m11:[{frets:[-1,0,0,0,1,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],m6:[{frets:[-1,0,2,2,1,2],fingers:[0,0,2,3,1,4],barres:[],baseFret:1}],sus2:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],sus4:[{frets:[-1,0,2,2,3,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],dim:[{frets:[-1,0,1,2,1,-1],fingers:[0,0,1,3,2,0],barres:[],baseFret:1}],6:[{frets:[-1,0,2,2,2,2],fingers:[0,0,1,1,1,1],barres:[2],baseFret:1}],add9:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],9:[{frets:[-1,0,2,4,2,3],fingers:[0,0,1,3,1,2],barres:[2],baseFret:1}],11:[{frets:[-1,0,0,0,2,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],13:[{frets:[-1,0,2,0,2,4],fingers:[0,0,1,0,2,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,0,1,0,1,-1],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}]},"A#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},Bb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},B:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:2}],7:[{frets:[-1,2,1,2,0,2],fingers:[0,2,1,3,0,4],barres:[],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:2}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:2}],m7:[{frets:[-1,2,0,2,0,2],fingers:[0,1,0,2,0,3],barres:[],baseFret:1}],m9:[{frets:[-1,2,0,2,2,2],fingers:[0,1,0,2,3,4],barres:[],baseFret:1}],m11:[{frets:[-1,2,0,2,0,0],fingers:[0,1,0,2,0,0],barres:[],baseFret:1}],m6:[{frets:[-1,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:2}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:2}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,2,1,2,2,2],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],11:[{frets:[-1,2,1,2,0,0],fingers:[0,2,1,3,0,0],barres:[],baseFret:1}],13:[{frets:[-1,2,1,2,2,4],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:2}]}};function yk(r){return{"C":"C#","D":"Db","D":"D#","E":"Eb","F":"F#","G":"Gb","G":"G#","A":"Ab","A":"A#","B":"Bb"}[r]||r.replace("","#").replace("","b")}function xk(r){return{major:"maj",major7:"maj7",major9:"maj9",major11:"maj11",major13:"maj13",major6:"6",minor:"m",min:"m",minor7:"m7",min7:"m7",minor9:"m9",min9:"m9",minor11:"m11",min11:"m11",minor13:"m13",min13:"m13",minor6:"m6",min6:"m6",dom7:"7",dominant7:"7",dom9:"9",dominant9:"9",dom11:"11",dominant11:"11",dom13:"13",dominant13:"13",suspended2:"sus2",suspended4:"sus4",diminished:"dim","half-diminished":"m7b5",halfDiminished7:"m7b5","m75":"m7b5",sixth:"6",ninth:"9",added9:"add9"}[r]||r}function rw(r,e){const t=yk(r),s=xk(e),a=vk[t];if(!a)return null;const o=a[s];return!o||o.length===0?null:o[0]}const wk=({root:r,quality:e,color:t="#6366f1",onClick:s,onDoubleClick:a})=>{const o=w2(),u=rw(r,e),c=re.useRef(0),f=re.useRef(null),d=Zr(`${r}${e==="maj"?"":e}`),p=()=>{const A=Date.now(),k=A-c.current;f.current&&(clearTimeout(f.current),f.current=null),k<300&&k>0?(c.current=0,a&&a()):(c.current=A,f.current=setTimeout(()=>{s&&s(),f.current=null},300))},y=re.useRef(0),_=re.useRef(null),b=A=>{A.preventDefault(),A.stopPropagation();const k=Date.now(),T=k-y.current;_.current&&(clearTimeout(_.current),_.current=null),T<300&&T>0?(y.current=0,a&&a()):(y.current=k,_.current=setTimeout(()=>{s&&s(),_.current=null},300))};if(!u)return x.jsxs("div",{className:"flex items-center justify-center text-text-muted text-xs py-4",children:["No guitar diagram available for ",r,e]});const N=s||a;return x.jsxs("div",{className:`flex flex-col items-center ${N?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,onClick:N?p:void 0,onTouchEnd:N?b:void 0,onTouchStart:N?A=>A.stopPropagation():void 0,children:[x.jsx("span",{className:`${o?"text-xs":"text-[11px]"} font-bold mb-1 text-center`,style:{backgroundColor:"transparent",color:t,padding:"4px 12px",borderRadius:"10px",border:`2px solid ${t}`},children:d}),x.jsx("svg",{viewBox:"0 0 100 120",className:`w-full ${o?"max-w-[110px]":"max-w-[120px]"}`,style:{minHeight:o?110:120,pointerEvents:"none"},children:x.jsx(_k,{chord:u,color:t})})]})},_k=({chord:r,color:e})=>{const{frets:t,fingers:s,barres:a,baseFret:o}=r,u=20,c=25,f=12,d=18,p=4,y=6,_=4.5,b=Array.from({length:y},(R,O)=>u+O*f),N=Array.from({length:p+1},(R,O)=>c+O*d),A=o===1,k=f*(y-1)+16,T=d*p+8;return x.jsxs(x.Fragment,{children:[x.jsx("rect",{x:u-8,y:c-4,width:k,height:T,fill:"#3d2817",rx:3}),A?x.jsx("rect",{x:u-2,y:c-3,width:f*(y-1)+4,height:4,fill:"#f5f5f5",rx:1}):x.jsx("text",{x:u-14,y:c+d/2+4,fontSize:"12",fill:"#e0e0e0",textAnchor:"middle",fontWeight:"700",children:o}),N.map((R,O)=>x.jsx("line",{x1:u,y1:R,x2:u+f*(y-1),y2:R,stroke:"#b8b8b8",strokeWidth:O===0&&!A?2:1},`fret-${O}`)),b.map((R,O)=>x.jsx("line",{x1:R,y1:c,x2:R,y2:c+d*p,stroke:"#d4d4d4",strokeWidth:1.2+(5-O)*.25},`string-${O}`)),a.map((R,O)=>{const V=t.map((L,B)=>({fret:L,idx:B})).filter(({fret:L})=>L===R);if(V.length<2)return null;const I=Math.min(...V.map(L=>L.idx)),W=Math.max(...V.map(L=>L.idx)),U=c+(R-.5)*d;return x.jsx("rect",{x:b[I]-_,y:U-_,width:b[W]-b[I]+_*2,height:_*2,fill:"white",stroke:e,strokeWidth:2,rx:_},`barre-${O}`)}),t.map((R,O)=>{const V=b[O];if(R===-1)return x.jsx("text",{x:V,y:c-10,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:""},`mute-${O}`);if(R===0)return x.jsx("circle",{cx:V,cy:c-8,r:4,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:1.5},`open-${O}`);const I=a.includes(R),W=s[O];if(I){const L=t.findIndex(B=>B===R);if(O!==L)return null}const U=c+(R-.5)*d;return x.jsxs("g",{children:[x.jsx("circle",{cx:V,cy:U,r:_,fill:"white",stroke:e,strokeWidth:2}),W>0&&!I&&x.jsx("text",{x:V,y:U+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:W})]},`finger-${O}`)}),a.map((R,O)=>{const V=t.map((L,B)=>({fret:L,idx:B})).filter(({fret:L})=>L===R);if(V.length<2)return null;const I=Math.min(...V.map(L=>L.idx)),W=c+(R-.5)*d,U=s[I];return U>0?x.jsx("text",{x:b[I],y:W+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:U},`barre-finger-${O}`):null})]})},Uv=({notes:r,rootNote:e,color:t="#6366f1",width:s,numerals:a,onNotePlay:o,compact:u=!1})=>{const c=w2(),f=W=>{const U=W.replace(/[0-9]/g,"");let L=U[0],B="";U.includes("")||U.includes("#")?B="":(U.includes("")||U.includes("b"))&&(B="");let M={C:-6,D:-5,E:-4,F:-3,G:-2,A:-1,B:0}[L]??0;const F="CDEFGAB".indexOf(L),J="CDEFGAB".indexOf(e[0]);return F<J&&J-F>3&&(M+=7),{line:M,accidental:B}},d=W=>{o&&o(W,4)},y=s||(u?180:c?280:340),_=u?70:c?110:115,b=u?6:12,N=b,A=_*(u?.28:.22),k=u?7:10,T=Math.max(80,y-b*2),R=A+(u?32:50),O=A+(u?42:62),V=r.map((W,U)=>{const{line:L,accidental:B}=f(W),ee=u?40:60,M=T-ee-15,F=u?18:25,J=M/Math.max(r.length-1,1),te=Math.max(J,F),ae=te*Math.max(r.length-1,0),H=(M-ae)/2,se=N+ee+H+U*te,Q=A-L*k/2;return{note:W,x:se,y:Q,line:L,accidental:B,needsLedgerLines:L<-4||L>4}}),I=W=>{const U=[];if(W.line<-4)for(let B=-6;B>=W.line;B-=2)B<-4&&U.push(x.jsx("line",{x1:W.x-28/2,y1:A-B*k/2,x2:W.x+28/2,y2:A-B*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-below-${B}`));else if(W.line>4)for(let B=6;B<=W.line;B+=2)B>4&&U.push(x.jsx("line",{x1:W.x-28/2,y1:A-B*k/2,x2:W.x+28/2,y2:A-B*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-above-${B}`));return U};return x.jsx("div",{className:`flex justify-center items-center ${u?"":"w-full"}`,children:x.jsxs("svg",{viewBox:`0 0 ${y} ${_}`,className:u?"":"w-full",style:{minHeight:u?60:c?95:100,width:u?y:void 0},children:[[-2,-1,0,1,2].map(W=>x.jsx("line",{x1:N,y1:A-W*k,x2:N+T,y2:A-W*k,stroke:"#777",strokeWidth:u?1.5:2},`staff-${W}`)),x.jsx("text",{x:N-(u?2:3),y:A+(u?14:20),fontSize:u?"38":c?"56":"62",fill:t,fontFamily:"serif",fontWeight:"bold",children:""}),V.map(W=>I(W)),V.map((W,U)=>x.jsxs("g",{children:[W.accidental&&x.jsx("text",{x:W.x-(u?12:20),y:W.y+(u?3:5),fontSize:u?"12":c?"18":"20",fill:"#ccc",fontFamily:"serif",fontWeight:"bold",children:W.accidental}),o&&x.jsx("circle",{cx:W.x,cy:W.y,r:16,fill:"transparent",style:{cursor:"pointer"},onClick:()=>d(W.note),onTouchEnd:L=>{L.preventDefault(),d(W.note)}}),x.jsx("ellipse",{cx:W.x,cy:W.y,rx:u?5:7,ry:u?4:5.5,fill:U===0?t:"#ddd",stroke:U===0?t:"#ddd",strokeWidth:1,style:o?{cursor:"pointer"}:void 0,className:o?"hover:opacity-80 active:scale-110 transition-transform":""}),x.jsx("text",{x:W.x,y:R,fontSize:u?"7":c?"10":"11",fill:"#999",textAnchor:"middle",fontWeight:"600",children:W.note}),a&&a[U]&&x.jsx("text",{x:W.x,y:O,fontSize:u?"7":c?"9":"10",fill:U===0?t:"#777",textAnchor:"middle",fontWeight:"700",children:a[U]})]},`note-${U}`))]})})},lg=({variant:r="sidebar",onScrollChange:e,forceVisible:t=!1})=>{const{selectedChord:s,selectedKey:a,chordPanelVisible:o,toggleChordPanel:u,selectedSectionId:c,selectedSlotId:f,addChordToSlot:d,setSelectedChord:p,selectNextSlotAfter:y,setSelectedSlot:_,timelineVisible:b,openTimeline:N,setChordPanelGuitarExpanded:A,setChordPanelVoicingsExpanded:k,chordPanelAttention:T}=pn(),R=fd(),[O,V]=re.useState(null),[I,W]=re.useState([]),[U,L]=re.useState(320),[B,ee]=re.useState(!1),M=re.useRef(0),F=r==="drawer",[J,te]=re.useState(s),ae=s??J,{isMobile:H}=Yh(),se=r==="landscape-panel"||r==="landscape-expanded",Q=r==="landscape-panel",ge=!F&&!se&&U<360,ue=!F&&!se&&U<290,[G,j]=re.useState(!1),[z,X]=re.useState(!1),[ie,ce]=re.useState(!H||se),[pe,me]=re.useState(0),Ne=4,we=le=>{j(le),k(le)},Ve=le=>{ce(le),A(le)};re.useEffect(()=>{A(ie),k(G)},[]);const Ge=re.useRef(0),nt=re.useRef(0),[st,Y]=re.useState(0),De=re.useRef(null),dt=re.useRef(null),et=re.useRef(null),Me=re.useRef(null),it=le=>{if(le.current&&Me.current){const Pe=Me.current,ht=le.current.offsetTop-Pe.offsetTop;Pe.scrollTo({top:ht,behavior:"smooth"})}},We=re.useCallback(le=>{!F||!H||(Ge.current=le.touches[0].clientY,nt.current=le.touches[0].clientY)},[F,H]),ot=re.useCallback(le=>{if(!F||!H)return;nt.current=le.touches[0].clientY;const Pe=nt.current-Ge.current;Pe>0&&Y(Math.min(Pe,150))},[F,H]),rt=re.useCallback(()=>{!F||!H||(st>80?(Y(300),setTimeout(()=>{u(),Y(0)},200)):Y(0))},[F,H,st,u]),Fe=()=>{if(!ae)return"Chord Details";const le=O||ae.quality;return Zr(le==="major"||le==="maj"?ae.root:le==="minor"||le==="m"?`${ae.root}m`:le==="diminished"||le==="dim"?`${ae.root}dim`:`${ae.root}${le}`)},tt=re.useCallback((le,Pe)=>{K3(le,Pe)},[]),Ke={maj:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',major:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',maj7:"Smooth and sophisticated, the major 7th adds a dreamy, floating quality. Think Burt Bacharach, neo-soul, and late-night jazz.",maj9:"Builds on maj7 with a crystalline 9th. Modern, airy, and introspective  perfect for R&B ballads and ambient textures.",maj13:"The full major palette: lush, orchestral, and complex. Great for endings or when you want maximum harmonic richness.",6:"Warm and vintage  the major 6th has an old-Hollywood or country sweetness. Softer resolution than maj7.",add9:"A major triad with added sparkle from the 9th, but no 7th. Clean, modern, and ubiquitous in pop and worship music.",7:"The dominant 7th creates bluesy tension begging for resolution. The engine behind the ii-V-I and the soul of rock & blues.",9:"Dominant 7 with a colorful 9th. Funky, jazzy, and sophisticated  think Stevie Wonder, Earth Wind & Fire, and neo-soul.",11:"Suspended, modal quality over dominant function. Creates an open, unresolved tension that floats before landing.",13:"The dominant chord at its richest: soulful 13th on top of bluesy 7th. Perfect for jazz turnarounds and R&B grooves.",m7:"The workhorse minor chord: soulful, laid-back, and endlessly versatile. The default for jazz ii chords and R&B grooves.",minor:"The basic minor triad: melancholic, introspective, and emotionally direct. Minor keys are built on this sound.",m9:"Lush and cinematic  adds depth and width to the minor sound. Evokes late-night cityscapes and emotional introspection.",m11:"Spacious and modal, with an open 11th suspension. Great for grooves, vamps, and creating atmospheric tension.",m6:"Bittersweet with a film-noir quality. The 6th adds sophistication to minor  a nice alternative to m7 for tonic chords.",sus2:"Neither major nor minor  the open 2nd creates an ambient, neutral quality. Ubiquitous in pop, rock, and modern worship.",sus4:"Suspended tension from the 4th wants to fall to the 3rd. Creates expectation and movement  classic resolution technique.",dim:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",diminished:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",m7b5:"Half-diminished: dark and sophisticated. The natural ii chord in minor keys, essential for minor ii-V-i progressions."},ct=["maj","7","maj7","maj9","maj13","6","13","m7","m9","m11","m6","sus2","sus4","dim","m7b5","add9","9","11"],yt=le=>{if(!ae?.root)return"-";const Pe=Cn=>Cn.replace(/[\d]/g,"").replace(//,"b").replace(//,"#"),Qe={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},ht=Qe[Pe(ae.root)],wt=Qe[Pe(le)];if(ht===void 0||wt===void 0)return"-";const lt=(wt-ht+12)%12;return{0:"R",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[lt]??"-"},mt=re.useCallback(le=>{F||(le.preventDefault(),ee(!0))},[F]);re.useEffect(()=>{if(!B||F)return;const le=ht=>{const wt=window.innerWidth-ht.clientX;L(Math.max(280,Math.min(500,wt)))},Pe=ht=>{if(ht.touches.length===1){const wt=window.innerWidth-ht.touches[0].clientX;L(Math.max(280,Math.min(500,wt)))}},Qe=()=>{ee(!1)};return document.addEventListener("mousemove",le),document.addEventListener("mouseup",Qe),document.addEventListener("touchmove",Pe),document.addEventListener("touchend",Qe),()=>{document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",Qe),document.removeEventListener("touchmove",Pe),document.removeEventListener("touchend",Qe)}},[B,F]),re.useEffect(()=>{s&&te(s)},[s]),re.useEffect(()=>{V(null),W([]),me(0)},[ae?.root,ae?.quality]),re.useEffect(()=>{se&&ie&&De.current&&Me.current&&setTimeout(()=>{if(De.current&&Me.current){const le=De.current,Pe=Me.current,Qe=le.offsetTop-Pe.offsetTop;Pe.scrollTo({top:Qe+35,behavior:"smooth"})}},100)},[se,ie]),re.useEffect(()=>{if(!F||!e)return;const le=Me.current;if(!le)return;const Pe=()=>{const Qe=le.scrollHeight-le.scrollTop-le.clientHeight<20;e(Qe)};return le.addEventListener("scroll",Pe),Pe(),()=>le.removeEventListener("scroll",Pe)},[F,e]);const bt=ae&&R[ae.root]||"#6366f1",ut=I.length>0?I:ae?.notes||[],rn=iu(ut,pe),Vt=X_(ut),Nt=le=>{const Pe=Date.now();if(Pe-M.current<300||(M.current=Pe,!ae))return;const Qe=ka(ae.root,le),ht=iu(Qe,pe);Xs(ht),V(le),W(Qe)},xt=le=>{if(M.current=0,!b){N();return}if(!ae||!c||!f)return;const Pe=ka(ae.root,le),Qe=hv(ae.root,le,Pe,pe),ht={...ae,quality:le,symbol:Qe,notes:Pe,inversion:pe};d(ht,c,f),y(c,f)||(_(c,f),p(ht))},Tt=re.useCallback(()=>{if(!ae)return;const le=O||ae.quality,Pe=ka(ae.root,le),Qe=iu(Pe,pe);Xs(Qe)},[ae,O,pe]),vt=re.useCallback(()=>{if(!b){N();return}if(!ae||!c||!f)return;const le=O||ae.quality,Pe=ka(ae.root,le),Qe=hv(ae.root,le,Pe,pe),ht={...ae,quality:le,symbol:Qe,notes:Pe,inversion:pe};d(ht,c,f),y(c,f)||(_(c,f),p(ht))},[ae,O,pe,c,f,d,y,_,p,b,N]),an=re.useRef(0),Et=re.useRef(null),Ft=re.useCallback(le=>{if(!ae)return;le.preventDefault(),le.stopPropagation();const Pe=Date.now(),Qe=Pe-an.current;Et.current&&(clearTimeout(Et.current),Et.current=null),Qe<300&&Qe>0?(an.current=0,vt()):(an.current=Pe,Et.current=setTimeout(()=>{Tt(),Et.current=null},300))},[ae,Tt,vt]),gn=()=>{if(!ae)return{extensions:[],description:""};let le=ae.numeral;if(le&&le.includes("(")){const Qe=le.match(/^(.+?)\s*\(/);Qe&&(le=Qe[1].trim())}return{I:{extensions:["maj","maj7","maj9","maj13","6"],description:"The tonic  your home base and resting point. This is where phrases resolve and songs often begin and end. Its stability makes it perfect for choruses and moments of arrival."},IV:{extensions:["maj","maj7","maj9","maj13","6"],description:'The subdominant  warm, hopeful, and slightly floating. It gently pulls away from home without creating urgency. Great for pre-choruses and that "lifting" feeling before a chorus.'},V:{extensions:["maj","7","9","11","sus4","13"],description:`The dominant  maximum tension wanting to resolve back to I. This chord creates expectation and forward motion. It's the "question" that begs for an "answer."`},ii:{extensions:["m","m7","m9","m11","m6"],description:"The supertonic  a natural setup chord that leads smoothly to V or IV. It's the workhorse of the ii-V-I progression and adds sophistication to any verse."},iii:{extensions:["m","m7"],description:"The mediant  mysterious and chameleon-like. It can substitute for I (they share two notes) or lead to vi. Use it for unexpected color and emotional complexity."},vi:{extensions:["m","m7","m9","m11"],description:'The relative minor  emotional depth and melancholy without leaving the key. This is the "sad" chord in major keys and the foundation of countless pop progressions (vi-IV-I-V).'},"vii":{extensions:["dim","m75"],description:"The leading tone chord  highly unstable and restless. Every note wants to move somewhere, making it a powerful passing chord that pulls strongly toward I."},II:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of V)  borrowed tension that points toward V. Use it to create a dramatic runway before landing on V."},III:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of vi)  creates an unexpected dramatic pull toward vi. Perfect for adding tension before a minor chord moment."}}[le||""]||{extensions:[],description:`This chord doesn't fit in the key of ${a}, but it may add color and interest to your progression.`}};if(!o&&!t)return F?x.jsxs("div",{className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-pointer touch-feedback active:bg-bg-tertiary",onClick:u,onTouchStart:le=>{Ge.current=le.touches[0].clientY,nt.current=le.touches[0].clientY},onTouchMove:le=>{nt.current=le.touches[0].clientY},onTouchEnd:()=>{Ge.current-nt.current>30&&u()},title:"Swipe up or tap to open",children:[x.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),x.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Chord Details"})]}):x.jsx("button",{onClick:u,className:"h-full px-2 flex items-center justify-center bg-bg-secondary border-l border-border-subtle hover:bg-bg-tertiary transition-colors shrink-0",title:"Show chord details",children:x.jsx(BT,{size:18,className:"text-text-muted"})});const At=r==="landscape-panel",ft=r==="landscape-expanded";return x.jsxs("div",{className:`${ft||At?"h-full w-full flex flex-col bg-bg-secondary overflow-hidden":F?`${H?"relative w-full":"fixed inset-x-3 bottom-[88px]"} ${H?"max-h-[60vh]":"max-h-[70vh]"} bg-bg-secondary ${H?"border-t-2 border-border-subtle":"border-2 border-border-subtle rounded-2xl"} shadow-2xl overflow-hidden ${H?"":"z-40"} flex`:"h-full flex bg-bg-secondary border-l border-border-subtle overflow-x-hidden"}${T?" chord-panel-attention":""}`,style:{...!F&&!At&&!ft?{width:U,minWidth:0,maxWidth:"100%"}:{},...F?{transform:st>0?`translateY(${st}px)`:void 0,opacity:st>0?Math.max(0,1-st/300):1,transition:st===0||st>=150?"all 0.2s ease-out":"none"}:{},...T?{boxShadow:"0 0 20px 4px rgba(99, 102, 241, 0.4), inset 0 0 10px rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 0.6)",transition:"box-shadow 0.3s ease-out, border-color 0.3s ease-out"}:{}},children:[!F&&!At&&x.jsx("div",{className:`w-3 flex items-center justify-center cursor-ew-resize hover:bg-bg-tertiary active:bg-accent-primary/20 transition-colors ${B?"bg-accent-primary/20":""} relative z-[60] touch-none`,onMouseDown:mt,onTouchStart:mt,children:x.jsx(z3,{size:12,className:"text-text-muted"})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 relative",children:[F&&H&&x.jsx("div",{className:"flex flex-col items-center shrink-0 cursor-grab active:cursor-grabbing",onTouchStart:We,onTouchMove:ot,onTouchEnd:rt,children:x.jsx("div",{className:"pt-2.5 pb-1 flex flex-col items-center",children:x.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})})}),x.jsxs("div",{className:`${se?"px-3 py-2":H&&F?"px-2 py-2":"px-4 py-3"} border-b border-border-subtle ${ue?"flex flex-col gap-2":"grid grid-cols-[1fr_auto_1fr] items-center gap-2"} shrink-0 ${F?"bg-bg-secondary/80 backdrop-blur-md":""}`,children:[x.jsx("div",{className:`flex items-center min-w-0 ${ue?"justify-center":""}`,style:{gap:"8px"},children:Q&&ae?x.jsx(x.Fragment,{children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs font-bold cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all",style:{backgroundColor:"transparent",color:bt,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${bt}`},onClick:Tt,onDoubleClick:vt,children:Fe()}),ae.numeral&&x.jsx("span",{className:"text-sm font-serif italic text-text-muted shrink-0",children:Zr(ae.numeral)}),x.jsxs("div",{className:"flex items-center shrink-0",title:"Chord inversion",children:[x.jsx("button",{onClick:()=>{const le=Math.max(0,pe-1);me(le);const Pe=iu(ut,le);Xs(Pe)},disabled:pe<=0,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:x.jsx(Fh,{size:10})}),x.jsx("span",{className:"text-[9px] font-bold text-text-secondary w-3 text-center",children:pe}),x.jsx("button",{onClick:()=>{const le=Math.min(Vt,pe+1);me(le);const Pe=iu(ut,le);Xs(Pe)},disabled:pe>=Vt,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:x.jsx(Ih,{size:10})})]})]})}):x.jsx(x.Fragment,{children:x.jsxs("span",{className:`flex items-center shrink-0 min-w-0 ${ae?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,style:ae?{gap:"4px",backgroundColor:"transparent",color:bt,padding:"3px 8px",borderRadius:"6px",border:`1.5px solid ${bt}`}:{gap:"4px"},onClick:ae?Tt:void 0,onDoubleClick:ae?vt:void 0,onTouchEnd:ae?Ft:void 0,onTouchStart:ae?le=>le.stopPropagation():void 0,children:[x.jsx("span",{className:`${se?"text-lg":H?"text-sm":"text-xs sm:text-sm"} font-bold leading-none truncate`,children:H&&F?Fe():ae?Zr(`${ae.root}${(O||ae.quality)==="maj"?"":" "+(O||ae.quality)}`):"Chord Details"}),ae?.numeral&&x.jsx("span",{className:`${se?"text-sm":"text-[10px]"} font-serif italic opacity-70 shrink-0`,children:Zr(ae.numeral)})]})})}),!ue&&x.jsx("div",{className:"flex items-center justify-center",children:ae&&!Q&&x.jsxs("div",{className:"flex items-center bg-bg-tertiary/40 rounded-full px-0.5 ml-3",title:"Chord inversion - which note is in the bass",children:[x.jsx("button",{onClick:()=>{const le=Math.max(0,pe-1);me(le);const Pe=iu(ut,le);Xs(Pe)},disabled:pe<=0,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous inversion",children:x.jsx(Fh,{size:8})}),x.jsx("span",{className:"text-[11px] font-semibold text-text-secondary min-w-[20px] text-center",children:Z_(pe)}),x.jsx("button",{onClick:()=>{const le=Math.min(Vt,pe+1);me(le);const Pe=iu(ut,le);Xs(Pe)},disabled:pe>=Vt,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next inversion",children:x.jsx(Ih,{size:8})})]})}),x.jsxs("div",{className:`flex items-center gap-2 shrink-0 ${ue?"justify-center w-full":"justify-end"}`,children:[ae&&x.jsxs("button",{onClick:vt,className:`${ue?"flex-1 py-2":H?"px-3 py-1.5":"px-2.5 py-1"} bg-gradient-to-r from-accent-primary to-purple-600 hover:opacity-90 rounded-lg transition-all touch-feedback flex items-center justify-center gap-1.5 shadow-md shadow-accent-primary/20 active:scale-95`,title:"Add chord to timeline",children:[x.jsx(Tc,{size:ue?16:H?14:12,className:"text-white"}),x.jsx("span",{className:`${ue?"text-sm":H?"text-xs":"text-[11px]"} font-semibold text-white`,children:"Add"})]}),!se&&x.jsx("button",{onClick:u,className:`${ue?"p-2 bg-bg-tertiary/60 rounded-lg":H?"p-2 min-w-[40px] min-h-[40px]":"p-1"} hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center`,title:"Hide panel",children:x.jsx(H3,{size:ue||H?18:16,className:`text-text-muted ${H&&F?"rotate-90":""}`})})]})]}),ae?x.jsxs("div",{ref:Me,className:`flex-1 ${ft?"flex flex-row overflow-hidden":"overflow-y-auto overflow-x-hidden"} min-h-0 overscroll-contain`,children:[!ft&&x.jsxs("div",{className:`${H?"px-5 pt-4 pb-4":"px-5 py-4"} border-b border-border-subtle`,children:[x.jsx(bk,{highlightedNotes:rn,rootNote:ae.root,bassNote:rn[0],color:bt,octave:Ne,onNotePlay:tt}),x.jsx("div",{className:`${H?"mt-4":"mt-5"} w-full`,children:x.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`${H?"56px":"72px"} repeat(${rn.length}, minmax(0, 1fr))`},children:[x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Notes"}),rn.map((le,Pe)=>x.jsx("div",{className:`text-center ${H?"text-xs":"text-sm"} font-bold text-text-primary flex items-center justify-center`,style:{height:"16px"},children:le},`note-${Pe}`)),x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Absolute"}),rn.map((le,Pe)=>x.jsx("div",{className:`text-center ${H?"text-[11px]":"text-xs"} text-text-primary font-semibold flex items-center justify-center`,style:{height:"16px"},children:yt(le)},`abs-${Pe}`)),x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Relative"}),rn.map((le,Pe)=>x.jsx("div",{className:`text-center ${H?"text-[11px]":"text-xs"} text-text-secondary flex items-center justify-center`,style:{height:"16px"},children:K_(a,le).replace(/^1/,"R")},`rel-${Pe}`))]})})]}),x.jsxs("div",{className:`flex flex-col ${ft?"flex-1 overflow-y-auto":""}`,children:[x.jsxs("div",{ref:De,className:`${se?"px-2 py-1":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[x.jsxs("button",{onClick:()=>{const le=!ie;Ve(le),le&&setTimeout(()=>it(De),50)},className:`w-full flex items-center justify-between ${ie?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[x.jsx("h3",{className:`${Q?"text-[9px]":H?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide whitespace-nowrap`,children:Q?"Guitar & Suggested":`Guitar & Suggested Voicings for ${Zr(ae.numeral||ae.symbol)}`}),x.jsx(Gf,{size:Q?8:H?14:12,className:`text-text-secondary transition-transform ${ie?"rotate-180":""}`})]}),ie&&x.jsx(x.Fragment,{children:x.jsxs("div",{className:`flex items-start ${Q?"gap-1":"gap-2"} px-3`,style:{marginTop:Q?"4px":"8px"},children:[x.jsxs("div",{className:"flex flex-col items-center shrink-0",style:{minWidth:Q?"70px":"100px"},children:[x.jsx(wk,{root:ae.root,quality:O||ae.quality,color:bt,onClick:Tt,onDoubleClick:vt}),!Q&&x.jsx("p",{className:`${H?"text-[10px]":"text-[9px]"} text-text-muted leading-relaxed text-center ${H?"mb-1 px-1":"mb-1 px-0.5"}`,style:{maxWidth:Q?"70px":"100px"},children:Ke[O||ae.quality]||"Select a voicing to see its description."})]}),x.jsx("div",{className:"w-px bg-border-subtle self-stretch"}),x.jsx("div",{className:"flex-1 flex flex-col justify-start pl-1",children:gn().extensions.length>0?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:`grid ${Q||ge?"grid-cols-1":"grid-cols-2"}`,style:{gap:Q?"3px":ge?"4px":H?"6px":"5px",marginBottom:Q?"2px":"4px",marginRight:ge?"12px":void 0},children:gn().extensions.map(le=>x.jsxs("button",{className:`relative group ${Q?"px-1 py-0.5 text-[8px] min-h-[20px]":ge?"px-2 py-1.5 text-[9px] min-h-[26px]":H?"px-2 py-2 text-xs min-h-[36px]":"px-1.5 py-1 text-[10px]"} rounded font-semibold transition-colors touch-feedback text-center`,style:{width:Q?"60px":ge?"70px":H?"80px":"70px",...O===le?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#f0f0f5",border:"1px solid rgba(255,255,255,0.08)"}},onClick:()=>Nt(le),onDoubleClick:()=>xt(le),children:[Zr(`${ae.root}${le}`),!H&&Ke[le]&&x.jsxs("span",{className:"pointer-events-none absolute -top-6 -translate-y-full left-1/2 -translate-x-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[Ke[le]?x.jsxs(x.Fragment,{children:[Ke[le],x.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},le))}),!ge&&x.jsx("div",{style:{marginTop:Q?"2px":"6px"},children:x.jsx(Uv,{notes:rn,rootNote:ae.root,color:bt,numerals:rn.map(le=>yt(le)),onNotePlay:tt,compact:!0})})]}):x.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[x.jsx(Uv,{notes:rn,rootNote:ae.root,color:bt,numerals:rn.map(le=>yt(le)),onNotePlay:tt,compact:!1}),x.jsxs("p",{className:`${Q?"text-[8px]":H?"text-[10px]":"text-[9px]"} text-text-muted italic text-center mt-1`,children:["Out of key  see ",x.jsx("span",{className:"font-semibold text-text-secondary",children:"Voicings"})," below"]})]})})]})})]}),x.jsxs("div",{ref:dt,className:`${ft?"px-3 py-1":H?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[x.jsxs("button",{onClick:()=>{const le=!G;we(le),le&&setTimeout(()=>it(dt),50)},className:`w-full flex items-center justify-between ${G?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[x.jsx("h3",{className:`${Q?"text-[9px]":H?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Voicings"}),x.jsx(Gf,{size:Q?8:H?14:12,className:`text-text-secondary transition-transform ${G?"rotate-180":""}`})]}),G&&x.jsx("div",{className:`grid ${Q?"grid-cols-4":H?"grid-cols-3":"grid-cols-2 sm:grid-cols-3"} ${Q?"gap-2":H?"gap-3":"gap-2.5"}`,children:ct.map((le,Pe)=>{const ht=Pe%2===0?{left:"calc(100% + 10px)"}:{right:"calc(100% + 10px)"};return x.jsxs("button",{className:`relative group ${Q?"px-1.5 py-1 min-h-[22px] text-[8px]":H?"px-3 py-3 min-h-[48px] text-xs":"px-2 py-1.5 text-[10px]"} rounded font-medium transition-colors touch-feedback`,style:O===le?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#9898a6",border:"1px solid rgba(255,255,255,0.08)"},onClick:()=>Nt(le),onDoubleClick:()=>xt(le),children:[le,!H&&Ke[le]&&x.jsxs("span",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{...ht,backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[Ke[le]?x.jsxs(x.Fragment,{children:[Ke[le],x.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},le)})})]}),x.jsxs("div",{ref:et,className:`${ft?"px-3 py-1":H?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[x.jsxs("button",{onClick:()=>{const le=!z;X(le),le&&setTimeout(()=>it(et),50)},className:`w-full flex items-center justify-between cursor-pointer ${z?"mb-3":"mb-0"} rounded-none`,style:{backgroundColor:"transparent"},children:[x.jsx("h3",{className:`${Q?"text-[9px]":H?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Theory"}),x.jsx(Gf,{size:Q?8:H?14:12,className:`text-text-secondary transition-transform ${z?"rotate-180":""}`})]}),z&&x.jsx("div",{className:`${H?"p-3":"p-4"} bg-bg-elevated rounded-none`,children:x.jsx("p",{className:`${H?"text-sm":"text-xs"} text-text-secondary leading-relaxed`,children:gn().description})})]})]}),H&&x.jsx("div",{className:"h-12 shrink-0"})]}):x.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-purple-600/20 flex items-center justify-center border border-accent-primary/30",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-primary",children:[x.jsx("circle",{cx:"8",cy:"18",r:"4"}),x.jsx("path",{d:"M12 18V2l7 4"})]})}),x.jsxs("div",{className:"text-center space-y-2",children:[x.jsx("p",{className:`${H?"text-base":"text-sm"} font-semibold text-text-primary`,children:"No chord selected"}),x.jsx("p",{className:`${H?"text-sm":"text-xs"} text-text-muted max-w-[200px]`,children:"Tap a chord on the wheel or select one from the timeline"})]})]})]})]})},Sk="modulepreload",Nk=function(r){return"/chord-wheel-writer/"+r},Hv={},q1=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(t.map(d=>{if(d=Nk(d),d in Hv)return;Hv[d]=!0;const p=d.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":Sk,p||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),p)return new Promise((b,N)=>{_.addEventListener("load",b),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},sw=()=>{const{currentSong:r,isPlaying:e,tempo:t,volume:s,setTempo:a,setVolume:o,instrument:u,setInstrument:c,isMuted:f,toggleMute:d,toggleLoop:p,isLooping:y,playingSectionId:_,selectedSectionId:b}=pn(),{isMobile:N,isLandscape:A}=Yh(),[k,T]=re.useState(!1),[R,O]=re.useState(!1),[V,I]=re.useState(t.toString()),W=re.useRef(null),[U,L]=re.useState(!1),B=re.useRef(null),ee=re.useRef(t),M=re.useRef(null);re.useEffect(()=>{b2(r)},[r]),re.useEffect(()=>{ew(t)},[t]),re.useEffect(()=>{g2(u)},[u]),re.useEffect(()=>{tw()},[y,r,_,b]),re.useEffect(()=>{q1(()=>Promise.resolve().then(()=>ok),void 0).then(z=>{T(!0),z.preloadAudio().finally(()=>T(!1))})},[]);const F=async()=>{try{await Yp(),e?(y2(),pn.getState().setIsPlaying(!1)):(T(!0),await v2(),pn.getState().setIsPlaying(!0))}catch(z){console.error("Playback error:",z)}finally{T(!1)}},J=z=>{x2(z)},te=()=>{p()},ae=[{value:"piano",label:"Piano"},{value:"epiano",label:"Electric Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"},{value:"guitar",label:"Guitar"}];ae.find(z=>z.value===u)||c("piano");const H=z=>{const X=ae.findIndex(ce=>ce.value===u);if(X===-1){c("piano");return}const ie=z==="next"?(X+1)%ae.length:(X-1+ae.length)%ae.length;c(ae[ie].value)},se=()=>{I(t.toString()),O(!0),setTimeout(()=>W.current?.focus(),0)},Q=()=>{const z=parseInt(V,10);!isNaN(z)&&z>=40&&z<=240?a(z):I(t.toString()),O(!1)},ge=z=>{z.key==="Enter"?Q():z.key==="Escape"&&(I(t.toString()),O(!1))},ue=z=>{B.current=z.touches[0].clientX,ee.current=t,L(!1),M.current=setTimeout(()=>{M.current=null},150)},G=z=>{if(B.current===null)return;const ie=z.touches[0].clientX-B.current;if(Math.abs(ie)>10){L(!0),M.current&&(clearTimeout(M.current),M.current=null);const ce=Math.round(ie/3),pe=Math.min(240,Math.max(40,ee.current+ce));a(pe)}},j=()=>{!U&&M.current&&(clearTimeout(M.current),se()),B.current=null,L(!1),M.current=null};return x.jsxs("div",{"data-playback-controls":!0,className:`${N&&A?"h-8":N?"h-11":"h-12"} bg-bg-elevated border-t border-border-subtle flex items-center justify-between ${N?"px-2 gap-1":"px-6"}`,children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("button",{onClick:()=>J("prev"),className:`${N&&A?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:x.jsx(Y3,{size:N&&A?12:16})}),x.jsx("button",{onClick:F,disabled:k,className:`${N&&A?"w-6 h-6":N?"w-8 h-8":"w-9 h-9"} rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95 touch-feedback`,children:k?x.jsx(U3,{size:N&&A?12:N?16:18,className:"animate-spin"}):e?x.jsx(G3,{size:N&&A?12:N?16:18,fill:"currentColor"}):x.jsx(Wh,{size:N&&A?12:N?16:18,fill:"currentColor",className:"ml-0.5"})}),x.jsx("button",{onClick:()=>J("next"),className:`${N&&A?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:x.jsx($3,{size:N&&A?12:16})}),!N&&x.jsx("button",{onClick:te,className:`p-1.5 transition-colors ml-1 ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:x.jsx(W3,{size:14})})]}),x.jsx("div",{className:"flex items-center",children:N?R?x.jsx("input",{ref:W,type:"number",inputMode:"numeric",value:V,onChange:z=>I(z.target.value),onBlur:Q,onKeyDown:ge,className:`${A?"w-10 text-[9px] h-4":"w-12 text-[11px] h-5"} bg-bg-tertiary border border-accent-primary rounded-sm px-1 text-center text-text-primary font-medium focus:outline-none`,min:40,max:240}):x.jsxs("div",{onTouchStart:ue,onTouchMove:G,onTouchEnd:j,onClick:se,className:`${A?"text-[9px] px-1.5 h-4":"text-[11px] px-2 h-5"} font-medium ${U?"text-accent-primary":"text-text-secondary"} hover:text-text-primary transition-colors touch-feedback whitespace-nowrap flex items-center cursor-ew-resize select-none`,children:[t," ",x.jsx("span",{className:`${U?"text-accent-primary/70":"text-text-muted"} ml-0.5`,children:"BPM"})]}):x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-text-secondary font-medium",children:"Tempo"}),x.jsx("input",{type:"number",value:t,onChange:z=>a(Number(z.target.value)),className:"w-14 bg-bg-tertiary border border-border-subtle rounded px-2 py-1 text-center text-text-primary text-[11px] font-medium",min:40,max:240}),x.jsx("span",{className:"text-text-muted",children:"BPM"})]})}),x.jsxs("div",{className:`flex items-center ${N?"gap-1.5":"gap-4"}`,children:[x.jsxs("div",{className:"flex items-center gap-1",children:[!N&&x.jsxs("div",{className:"flex items-center rounded bg-bg-tertiary/60 border border-border-subtle/70 h-7",children:[x.jsx("button",{onClick:()=>H("prev"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-l transition-colors flex items-center",title:"Previous instrument",children:x.jsx(Fh,{size:12})}),x.jsx("button",{onClick:()=>H("next"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-r transition-colors flex items-center",title:"Next instrument",children:x.jsx(Ih,{size:12})})]}),N&&!A&&x.jsx(d2,{size:14,className:"text-text-muted"}),x.jsx("select",{value:u,onChange:z=>c(z.target.value),className:`bg-bg-tertiary border border-border-subtle rounded ${N&&A?"px-3 py-1 h-6 text-[7px] min-w-[60px]":N?"px-1.5 h-7 text-[11px] min-w-[70px]":"px-2 h-7 text-[10px] min-w-[130px]"} text-text-secondary focus:outline-none focus:border-accent-primary cursor-pointer`,children:ae.map(z=>x.jsx("option",{value:z.value,children:z.label},z.value))})]}),x.jsxs("div",{className:`flex items-center ${N?"":"gap-2 w-28"}`,children:[x.jsx("button",{onClick:d,className:`${N?"p-1.5":"p-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center rounded`,title:f?"Unmute":"Mute",children:f||s===0?x.jsx(sk,{size:N?16:14}):x.jsx(sg,{size:N?16:14})}),!N&&x.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f?0:s,onChange:z=>{f&&d(),o(Number(z.target.value))},className:`w-full h-1 bg-bg-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full ${f?"opacity-50":""}`})]})]})]})};function Ak(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return re.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const $p=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $h(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function _2(r){return"nodeType"in r}function Gi(r){var e,t;return r?$h(r)?r:_2(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function S2(r){const{Document:e}=Gi(r);return r instanceof e}function Ad(r){return $h(r)?!1:r instanceof Gi(r).HTMLElement}function iw(r){return r instanceof Gi(r).SVGElement}function Xh(r){return r?$h(r)?r.document:_2(r)?S2(r)?r:Ad(r)||iw(r)?r.ownerDocument:document:document:document}const Ho=$p?re.useLayoutEffect:re.useEffect;function N2(r){const e=re.useRef(r);return Ho(()=>{e.current=r}),re.useCallback(function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function Ck(){const r=re.useRef(null),e=re.useCallback((s,a)=>{r.current=setInterval(s,a)},[]),t=re.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function ad(r,e){e===void 0&&(e=[r]);const t=re.useRef(r);return Ho(()=>{t.current!==r&&(t.current=r)},e),t}function Cd(r,e){const t=re.useRef();return re.useMemo(()=>{const s=r(t.current);return t.current=s,s},[...e])}function vp(r){const e=N2(r),t=re.useRef(null),s=re.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,s]}function cg(r){const e=re.useRef();return re.useEffect(()=>{e.current=r},[r]),e.current}let xm={};function Td(r,e){return re.useMemo(()=>{if(e)return e;const t=xm[r]==null?0:xm[r]+1;return xm[r]=t,r+"-"+t},[r,e])}function aw(r){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((o,u)=>{const c=Object.entries(u);for(const[f,d]of c){const p=o[f];p!=null&&(o[f]=p+r*d)}return o},{...e})}}const Ch=aw(1),od=aw(-1);function Tk(r){return"clientX"in r&&"clientY"in r}function A2(r){if(!r)return!1;const{KeyboardEvent:e}=Gi(r.target);return e&&r instanceof e}function kk(r){if(!r)return!1;const{TouchEvent:e}=Gi(r.target);return e&&r instanceof e}function ug(r){if(kk(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return Tk(r)?{x:r.clientX,y:r.clientY}:null}const ld=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[ld.Translate.toString(r),ld.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:s}=r;return e+" "+t+"ms "+s}}}),Gv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function jk(r){return r.matches(Gv)?r:r.querySelector(Gv)}const Ek={display:"none"};function Mk(r){let{id:e,value:t}=r;return Yn.createElement("div",{id:e,style:Ek},t)}function Lk(r){let{id:e,announcement:t,ariaLiveType:s="assertive"}=r;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Yn.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},t)}function Ok(){const[r,e]=re.useState("");return{announce:re.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const ow=re.createContext(null);function Dk(r){const e=re.useContext(ow);re.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function Rk(){const[r]=re.useState(()=>new Set),e=re.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[re.useCallback(s=>{let{type:a,event:o}=s;r.forEach(u=>{var c;return(c=u[a])==null?void 0:c.call(u,o)})},[r]),e]}const Ik={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fk={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Vk(r){let{announcements:e=Fk,container:t,hiddenTextDescribedById:s,screenReaderInstructions:a=Ik}=r;const{announce:o,announcement:u}=Ok(),c=Td("DndLiveRegion"),[f,d]=re.useState(!1);if(re.useEffect(()=>{d(!0)},[]),Dk(re.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:b}=y;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(y){let{active:_,over:b}=y;o(e.onDragOver({active:_,over:b}))},onDragEnd(y){let{active:_,over:b}=y;o(e.onDragEnd({active:_,over:b}))},onDragCancel(y){let{active:_,over:b}=y;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!f)return null;const p=Yn.createElement(Yn.Fragment,null,Yn.createElement(Mk,{id:s,value:a.draggable}),Yn.createElement(Lk,{id:c,announcement:u}));return t?Cl.createPortal(p,t):p}var Cs;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Cs||(Cs={}));function yp(){}function Wv(r,e){return re.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function Bk(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return re.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const ho=Object.freeze({x:0,y:0});function lw(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function cw(r,e){let{data:{value:t}}=r,{data:{value:s}}=e;return t-s}function zk(r,e){let{data:{value:t}}=r,{data:{value:s}}=e;return s-t}function Yv(r){let{left:e,top:t,height:s,width:a}=r;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+s},{x:e+a,y:t+s}]}function uw(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function $v(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}const Pk=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const a=$v(e,e.left,e.top),o=[];for(const u of s){const{id:c}=u,f=t.get(c);if(f){const d=lw($v(f),a);o.push({id:c,data:{droppableContainer:u,value:d}})}}return o.sort(cw)},qk=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const a=Yv(e),o=[];for(const u of s){const{id:c}=u,f=t.get(c);if(f){const d=Yv(f),p=a.reduce((_,b,N)=>_+lw(d[N],b),0),y=Number((p/4).toFixed(4));o.push({id:c,data:{droppableContainer:u,value:y}})}}return o.sort(cw)};function Uk(r,e){const t=Math.max(e.top,r.top),s=Math.max(e.left,r.left),a=Math.min(e.left+e.width,r.left+r.width),o=Math.min(e.top+e.height,r.top+r.height),u=a-s,c=o-t;if(s<a&&t<o){const f=e.width*e.height,d=r.width*r.height,p=u*c,y=p/(f+d-p);return Number(y.toFixed(4))}return 0}const Hk=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const a=[];for(const o of s){const{id:u}=o,c=t.get(u);if(c){const f=Uk(c,e);f>0&&a.push({id:u,data:{droppableContainer:o,value:f}})}}return a.sort(zk)};function Gk(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function hw(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:ho}function Wk(r){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((u,c)=>({...u,top:u.top+r*c.y,bottom:u.bottom+r*c.y,left:u.left+r*c.x,right:u.right+r*c.x}),{...t})}}const Yk=Wk(1);function $k(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Xk(r,e,t){const s=$k(e);if(!s)return r;const{scaleX:a,scaleY:o,x:u,y:c}=s,f=r.left-u-(1-a)*parseFloat(t),d=r.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=a?r.width/a:r.width,y=o?r.height/o:r.height;return{width:p,height:y,top:d,right:f+p,bottom:d+y,left:f}}const Zk={ignoreTransform:!1};function Zh(r,e){e===void 0&&(e=Zk);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Gi(r).getComputedStyle(r);d&&(t=Xk(t,d,p))}const{top:s,left:a,width:o,height:u,bottom:c,right:f}=t;return{top:s,left:a,width:o,height:u,bottom:c,right:f}}function Xv(r){return Zh(r,{ignoreTransform:!0})}function Qk(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Kk(r,e){return e===void 0&&(e=Gi(r).getComputedStyle(r)),e.position==="fixed"}function Jk(r,e){e===void 0&&(e=Gi(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?t.test(o):!1})}function Xp(r,e){const t=[];function s(a){if(e!=null&&t.length>=e||!a)return t;if(S2(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!Ad(a)||iw(a)||t.includes(a))return t;const o=Gi(r).getComputedStyle(a);return a!==r&&Jk(a,o)&&t.push(a),Kk(a,o)?t:s(a.parentNode)}return r?s(r):t}function fw(r){const[e]=Xp(r,1);return e??null}function wm(r){return!$p||!r?null:$h(r)?r:_2(r)?S2(r)||r===Xh(r).scrollingElement?window:Ad(r)?r:null:null}function dw(r){return $h(r)?r.scrollX:r.scrollLeft}function pw(r){return $h(r)?r.scrollY:r.scrollTop}function hg(r){return{x:dw(r),y:pw(r)}}var Vs;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Vs||(Vs={}));function mw(r){return!$p||!r?!1:r===document.scrollingElement}function gw(r){const e={x:0,y:0},t=mw(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},a=r.scrollTop<=e.y,o=r.scrollLeft<=e.x,u=r.scrollTop>=s.y,c=r.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:u,isRight:c,maxScroll:s,minScroll:e}}const e7={x:.2,y:.2};function t7(r,e,t,s,a){let{top:o,left:u,right:c,bottom:f}=t;s===void 0&&(s=10),a===void 0&&(a=e7);const{isTop:d,isBottom:p,isLeft:y,isRight:_}=gw(r),b={x:0,y:0},N={x:0,y:0},A={height:e.height*a.y,width:e.width*a.x};return!d&&o<=e.top+A.height?(b.y=Vs.Backward,N.y=s*Math.abs((e.top+A.height-o)/A.height)):!p&&f>=e.bottom-A.height&&(b.y=Vs.Forward,N.y=s*Math.abs((e.bottom-A.height-f)/A.height)),!_&&c>=e.right-A.width?(b.x=Vs.Forward,N.x=s*Math.abs((e.right-A.width-c)/A.width)):!y&&u<=e.left+A.width&&(b.x=Vs.Backward,N.x=s*Math.abs((e.left+A.width-u)/A.width)),{direction:b,speed:N}}function n7(r){if(r===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:e,left:t,right:s,bottom:a}=r.getBoundingClientRect();return{top:e,left:t,right:s,bottom:a,width:r.clientWidth,height:r.clientHeight}}function bw(r){return r.reduce((e,t)=>Ch(e,hg(t)),ho)}function r7(r){return r.reduce((e,t)=>e+dw(t),0)}function s7(r){return r.reduce((e,t)=>e+pw(t),0)}function i7(r,e){if(e===void 0&&(e=Zh),!r)return;const{top:t,left:s,bottom:a,right:o}=e(r);fw(r)&&(a<=0||o<=0||t>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const a7=[["x",["left","right"],r7],["y",["top","bottom"],s7]];class C2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Xp(t),a=bw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,u,c]of a7)for(const f of u)Object.defineProperty(this,f,{get:()=>{const d=c(s),p=a[o]-d;return this.rect[f]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yf{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var a;(a=this.target)==null||a.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function o7(r){const{EventTarget:e}=Gi(r);return r instanceof e?r:Xh(r)}function _m(r,e){const t=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var Ta;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Ta||(Ta={}));function Zv(r){r.preventDefault()}function l7(r){r.stopPropagation()}var Rn;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Rn||(Rn={}));const vw={start:[Rn.Space,Rn.Enter],cancel:[Rn.Esc],end:[Rn.Space,Rn.Enter,Rn.Tab]},c7=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case Rn.Right:return{...t,x:t.x+25};case Rn.Left:return{...t,x:t.x-25};case Rn.Down:return{...t,y:t.y+25};case Rn.Up:return{...t,y:t.y-25}}};class T2{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Yf(Xh(t)),this.windowListeners=new Yf(Gi(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ta.Resize,this.handleCancel),this.windowListeners.add(Ta.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ta.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&i7(s),t(ho)}handleKeyDown(e){if(A2(e)){const{active:t,context:s,options:a}=this.props,{keyboardCodes:o=vw,coordinateGetter:u=c7,scrollBehavior:c="smooth"}=a,{code:f}=e;if(o.end.includes(f)){this.handleEnd(e);return}if(o.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:d}=s.current,p=d?{x:d.left,y:d.top}:ho;this.referenceCoordinates||(this.referenceCoordinates=p);const y=u(e,{active:t,context:s.current,currentCoordinates:p});if(y){const _=od(y,p),b={x:0,y:0},{scrollableAncestors:N}=s.current;for(const A of N){const k=e.code,{isTop:T,isRight:R,isLeft:O,isBottom:V,maxScroll:I,minScroll:W}=gw(A),U=n7(A),L={x:Math.min(k===Rn.Right?U.right-U.width/2:U.right,Math.max(k===Rn.Right?U.left:U.left+U.width/2,y.x)),y:Math.min(k===Rn.Down?U.bottom-U.height/2:U.bottom,Math.max(k===Rn.Down?U.top:U.top+U.height/2,y.y))},B=k===Rn.Right&&!R||k===Rn.Left&&!O,ee=k===Rn.Down&&!V||k===Rn.Up&&!T;if(B&&L.x!==y.x){const M=A.scrollLeft+_.x,F=k===Rn.Right&&M<=I.x||k===Rn.Left&&M>=W.x;if(F&&!_.y){A.scrollTo({left:M,behavior:c});return}F?b.x=A.scrollLeft-M:b.x=k===Rn.Right?A.scrollLeft-I.x:A.scrollLeft-W.x,b.x&&A.scrollBy({left:-b.x,behavior:c});break}else if(ee&&L.y!==y.y){const M=A.scrollTop+_.y,F=k===Rn.Down&&M<=I.y||k===Rn.Up&&M>=W.y;if(F&&!_.x){A.scrollTo({top:M,behavior:c});return}F?b.y=A.scrollTop-M:b.y=k===Rn.Down?A.scrollTop-I.y:A.scrollTop-W.y,b.y&&A.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Ch(od(y,this.referenceCoordinates),b))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}T2.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:s=vw,onActivation:a}=e,{active:o}=t;const{code:u}=r.nativeEvent;if(s.start.includes(u)){const c=o.activatorNode.current;return c&&r.target!==c?!1:(r.preventDefault(),a?.({event:r.nativeEvent}),!0)}return!1}}];function Qv(r){return!!(r&&"distance"in r)}function Kv(r){return!!(r&&"delay"in r)}class k2{constructor(e,t,s){var a;s===void 0&&(s=o7(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:u}=o;this.props=e,this.events=t,this.document=Xh(u),this.documentListeners=new Yf(this.document),this.listeners=new Yf(s),this.windowListeners=new Yf(Gi(u)),this.initialCoordinates=(a=ug(o))!=null?a:ho,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ta.Resize,this.handleCancel),this.windowListeners.add(Ta.DragStart,Zv),this.windowListeners.add(Ta.VisibilityChange,this.handleCancel),this.windowListeners.add(Ta.ContextMenu,Zv),this.documentListeners.add(Ta.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Kv(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Qv(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ta.Click,l7,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ta.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:u,options:{activationConstraint:c}}=o;if(!a)return;const f=(t=ug(e))!=null?t:ho,d=od(a,f);if(!s&&c){if(Qv(c)){if(c.tolerance!=null&&_m(d,c.tolerance))return this.handleCancel();if(_m(d,c.distance))return this.handleStart()}if(Kv(c)&&_m(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),u(f)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Rn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const u7={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class j2 extends k2{constructor(e){const{event:t}=e,s=Xh(t.target);super(e,u7,s)}}j2.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const h7={move:{name:"mousemove"},end:{name:"mouseup"}};var fg;(function(r){r[r.RightClick=2]="RightClick"})(fg||(fg={}));class f7 extends k2{constructor(e){super(e,h7,Xh(e.event.target))}}f7.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;return t.button===fg.RightClick?!1:(s?.({event:t}),!0)}}];const Sm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class d7 extends k2{constructor(e){super(e,Sm)}static setup(){return window.addEventListener(Sm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Sm.move.name,e)};function e(){}}}d7.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;const{touches:a}=t;return a.length>1?!1:(s?.({event:t}),!0)}}];var $f;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})($f||($f={}));var xp;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(xp||(xp={}));function p7(r){let{acceleration:e,activator:t=$f.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:u=5,order:c=xp.TreeOrder,pointerCoordinates:f,scrollableAncestors:d,scrollableAncestorRects:p,delta:y,threshold:_}=r;const b=g7({delta:y,disabled:!o}),[N,A]=Ck(),k=re.useRef({x:0,y:0}),T=re.useRef({x:0,y:0}),R=re.useMemo(()=>{switch(t){case $f.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case $f.DraggableRect:return a}},[t,a,f]),O=re.useRef(null),V=re.useCallback(()=>{const W=O.current;if(!W)return;const U=k.current.x*T.current.x,L=k.current.y*T.current.y;W.scrollBy(U,L)},[]),I=re.useMemo(()=>c===xp.TreeOrder?[...d].reverse():d,[c,d]);re.useEffect(()=>{if(!o||!d.length||!R){A();return}for(const W of I){if(s?.(W)===!1)continue;const U=d.indexOf(W),L=p[U];if(!L)continue;const{direction:B,speed:ee}=t7(W,L,R,e,_);for(const M of["x","y"])b[M][B[M]]||(ee[M]=0,B[M]=0);if(ee.x>0||ee.y>0){A(),O.current=W,N(V,u),k.current=ee,T.current=B;return}}k.current={x:0,y:0},T.current={x:0,y:0},A()},[e,V,s,A,o,u,JSON.stringify(R),JSON.stringify(b),N,d,I,p,JSON.stringify(_)])}const m7={x:{[Vs.Backward]:!1,[Vs.Forward]:!1},y:{[Vs.Backward]:!1,[Vs.Forward]:!1}};function g7(r){let{delta:e,disabled:t}=r;const s=cg(e);return Cd(a=>{if(t||!s||!a)return m7;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Vs.Backward]:a.x[Vs.Backward]||o.x===-1,[Vs.Forward]:a.x[Vs.Forward]||o.x===1},y:{[Vs.Backward]:a.y[Vs.Backward]||o.y===-1,[Vs.Forward]:a.y[Vs.Forward]||o.y===1}}},[t,e,s])}function b7(r,e){const t=e!=null?r.get(e):void 0,s=t?t.node.current:null;return Cd(a=>{var o;return e==null?null:(o=s??a)!=null?o:null},[s,e])}function v7(r,e){return re.useMemo(()=>r.reduce((t,s)=>{const{sensor:a}=s,o=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...o]},[]),[r,e])}var cd;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(cd||(cd={}));var dg;(function(r){r.Optimized="optimized"})(dg||(dg={}));const Jv=new Map;function y7(r,e){let{dragging:t,dependencies:s,config:a}=e;const[o,u]=re.useState(null),{frequency:c,measure:f,strategy:d}=a,p=re.useRef(r),y=k(),_=ad(y),b=re.useCallback(function(T){T===void 0&&(T=[]),!_.current&&u(R=>R===null?T:R.concat(T.filter(O=>!R.includes(O))))},[_]),N=re.useRef(null),A=Cd(T=>{if(y&&!t)return Jv;if(!T||T===Jv||p.current!==r||o!=null){const R=new Map;for(let O of r){if(!O)continue;if(o&&o.length>0&&!o.includes(O.id)&&O.rect.current){R.set(O.id,O.rect.current);continue}const V=O.node.current,I=V?new C2(f(V),V):null;O.rect.current=I,I&&R.set(O.id,I)}return R}return T},[r,o,t,y,f]);return re.useEffect(()=>{p.current=r},[r]),re.useEffect(()=>{y||b()},[t,y]),re.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),re.useEffect(()=>{y||typeof c!="number"||N.current!==null||(N.current=setTimeout(()=>{b(),N.current=null},c))},[c,y,b,...s]),{droppableRects:A,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(d){case cd.Always:return!1;case cd.BeforeDragging:return t;default:return!t}}}function yw(r,e){return Cd(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function x7(r,e){return yw(r,e)}function w7(r){let{callback:e,disabled:t}=r;const s=N2(e),a=re.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,t]);return re.useEffect(()=>()=>a?.disconnect(),[a]),a}function Zp(r){let{callback:e,disabled:t}=r;const s=N2(e),a=re.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[t]);return re.useEffect(()=>()=>a?.disconnect(),[a]),a}function _7(r){return new C2(Zh(r),r)}function ey(r,e,t){e===void 0&&(e=_7);const[s,a]=re.useState(null);function o(){a(f=>{if(!r)return null;if(r.isConnected===!1){var d;return(d=f??t)!=null?d:null}const p=e(r);return JSON.stringify(f)===JSON.stringify(p)?f:p})}const u=w7({callback(f){if(r)for(const d of f){const{type:p,target:y}=d;if(p==="childList"&&y instanceof HTMLElement&&y.contains(r)){o();break}}}}),c=Zp({callback:o});return Ho(()=>{o(),r?(c?.observe(r),u?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),u?.disconnect())},[r]),s}function S7(r){const e=yw(r);return hw(r,e)}const ty=[];function N7(r){const e=re.useRef(r),t=Cd(s=>r?s&&s!==ty&&r&&e.current&&r.parentNode===e.current.parentNode?s:Xp(r):ty,[r]);return re.useEffect(()=>{e.current=r},[r]),t}function A7(r){const[e,t]=re.useState(null),s=re.useRef(r),a=re.useCallback(o=>{const u=wm(o.target);u&&t(c=>c?(c.set(u,hg(u)),new Map(c)):null)},[]);return re.useEffect(()=>{const o=s.current;if(r!==o){u(o);const c=r.map(f=>{const d=wm(f);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,hg(d)]):null}).filter(f=>f!=null);t(c.length?new Map(c):null),s.current=r}return()=>{u(r),u(o)};function u(c){c.forEach(f=>{const d=wm(f);d?.removeEventListener("scroll",a)})}},[a,r]),re.useMemo(()=>r.length?e?Array.from(e.values()).reduce((o,u)=>Ch(o,u),ho):bw(r):ho,[r,e])}function ny(r,e){e===void 0&&(e=[]);const t=re.useRef(null);return re.useEffect(()=>{t.current=null},e),re.useEffect(()=>{const s=r!==ho;s&&!t.current&&(t.current=r),!s&&t.current&&(t.current=null)},[r]),t.current?od(r,t.current):ho}function C7(r){re.useEffect(()=>{if(!$p)return;const e=r.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function T7(r,e){return re.useMemo(()=>r.reduce((t,s)=>{let{eventName:a,handler:o}=s;return t[a]=u=>{o(u,e)},t},{}),[r,e])}function xw(r){return re.useMemo(()=>r?Qk(r):null,[r])}const ry=[];function k7(r,e){e===void 0&&(e=Zh);const[t]=r,s=xw(t?Gi(t):null),[a,o]=re.useState(ry);function u(){o(()=>r.length?r.map(f=>mw(f)?s:new C2(e(f),f)):ry)}const c=Zp({callback:u});return Ho(()=>{c?.disconnect(),u(),r.forEach(f=>c?.observe(f))},[r]),a}function j7(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Ad(e)?e:r}function E7(r){let{measure:e}=r;const[t,s]=re.useState(null),a=re.useCallback(d=>{for(const{target:p}of d)if(Ad(p)){s(y=>{const _=e(p);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=Zp({callback:a}),u=re.useCallback(d=>{const p=j7(d);o?.disconnect(),p&&o?.observe(p),s(p?e(p):null)},[e,o]),[c,f]=vp(u);return re.useMemo(()=>({nodeRef:c,rect:t,setRef:f}),[t,c,f])}const M7=[{sensor:j2,options:{}},{sensor:T2,options:{}}],L7={current:{}},U1={draggable:{measure:Xv},droppable:{measure:Xv,strategy:cd.WhileDragging,frequency:dg.Optimized},dragOverlay:{measure:Zh}};class Xf extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const O7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:U1,measureDroppableContainers:yp,windowRect:null,measuringScheduled:!1},D7={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yp,draggableNodes:new Map,over:null,measureDroppableContainers:yp},Qp=re.createContext(D7),ww=re.createContext(O7);function R7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xf}}}function I7(r,e){switch(e.type){case Cs.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Cs.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case Cs.DragEnd:case Cs.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Cs.RegisterDroppable:{const{element:t}=e,{id:s}=t,a=new Xf(r.droppable.containers);return a.set(s,t),{...r,droppable:{...r.droppable,containers:a}}}case Cs.SetDroppableDisabled:{const{id:t,key:s,disabled:a}=e,o=r.droppable.containers.get(t);if(!o||s!==o.key)return r;const u=new Xf(r.droppable.containers);return u.set(t,{...o,disabled:a}),{...r,droppable:{...r.droppable,containers:u}}}case Cs.UnregisterDroppable:{const{id:t,key:s}=e,a=r.droppable.containers.get(t);if(!a||s!==a.key)return r;const o=new Xf(r.droppable.containers);return o.delete(t),{...r,droppable:{...r.droppable,containers:o}}}default:return r}}function F7(r){let{disabled:e}=r;const{active:t,activatorEvent:s,draggableNodes:a}=re.useContext(Qp),o=cg(s),u=cg(t?.id);return re.useEffect(()=>{if(!e&&!s&&o&&u!=null){if(!A2(o)||document.activeElement===o.target)return;const c=a.get(u);if(!c)return;const{activatorNode:f,node:d}=c;if(!f.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[f.current,d.current]){if(!p)continue;const y=jk(p);if(y){y.focus();break}}})}},[s,e,a,u,o]),null}function V7(r,e){let{transform:t,...s}=e;return r!=null&&r.length?r.reduce((a,o)=>o({transform:a,...s}),t):t}function B7(r){return re.useMemo(()=>({draggable:{...U1.draggable,...r?.draggable},droppable:{...U1.droppable,...r?.droppable},dragOverlay:{...U1.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function z7(r){let{activeNode:e,measure:t,initialRect:s,config:a=!0}=r;const o=re.useRef(!1),{x:u,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Ho(()=>{if(!u&&!c||!e){o.current=!1;return}if(o.current||!s)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const p=t(d),y=hw(p,s);if(u||(y.x=0),c||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=fw(d);_&&_.scrollBy({top:y.y,left:y.x})}},[e,u,c,s,t])}const _w=re.createContext({...ho,scaleX:1,scaleY:1});var yc;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(yc||(yc={}));const P7=re.memo(function(e){var t,s,a,o;let{id:u,accessibility:c,autoScroll:f=!0,children:d,sensors:p=M7,collisionDetection:y=Hk,measuring:_,modifiers:b,...N}=e;const A=re.useReducer(I7,void 0,R7),[k,T]=A,[R,O]=Rk(),[V,I]=re.useState(yc.Uninitialized),W=V===yc.Initialized,{draggable:{active:U,nodes:L,translate:B},droppable:{containers:ee}}=k,M=U!=null?L.get(U):null,F=re.useRef({initial:null,translated:null}),J=re.useMemo(()=>{var At;return U!=null?{id:U,data:(At=M?.data)!=null?At:L7,rect:F}:null},[U,M]),te=re.useRef(null),[ae,H]=re.useState(null),[se,Q]=re.useState(null),ge=ad(N,Object.values(N)),ue=Td("DndDescribedBy",u),G=re.useMemo(()=>ee.getEnabled(),[ee]),j=B7(_),{droppableRects:z,measureDroppableContainers:X,measuringScheduled:ie}=y7(G,{dragging:W,dependencies:[B.x,B.y],config:j.droppable}),ce=b7(L,U),pe=re.useMemo(()=>se?ug(se):null,[se]),me=gn(),Ne=x7(ce,j.draggable.measure);z7({activeNode:U!=null?L.get(U):null,config:me.layoutShiftCompensation,initialRect:Ne,measure:j.draggable.measure});const we=ey(ce,j.draggable.measure,Ne),Ve=ey(ce?ce.parentElement:null),Ge=re.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:ee,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),nt=ee.getNodeFor((t=Ge.current.over)==null?void 0:t.id),st=E7({measure:j.dragOverlay.measure}),Y=(s=st.nodeRef.current)!=null?s:ce,De=W?(a=st.rect)!=null?a:we:null,dt=!!(st.nodeRef.current&&st.rect),et=S7(dt?null:we),Me=xw(Y?Gi(Y):null),it=N7(W?nt??ce:null),We=k7(it),ot=V7(b,{transform:{x:B.x-et.x,y:B.y-et.y,scaleX:1,scaleY:1},activatorEvent:se,active:J,activeNodeRect:we,containerNodeRect:Ve,draggingNodeRect:De,over:Ge.current.over,overlayNodeRect:st.rect,scrollableAncestors:it,scrollableAncestorRects:We,windowRect:Me}),rt=pe?Ch(pe,B):null,Fe=A7(it),tt=ny(Fe),Ke=ny(Fe,[we]),ct=Ch(ot,tt),yt=De?Yk(De,ot):null,mt=J&&yt?y({active:J,collisionRect:yt,droppableRects:z,droppableContainers:G,pointerCoordinates:rt}):null,bt=uw(mt,"id"),[ut,rn]=re.useState(null),Vt=dt?ot:Ch(ot,Ke),Nt=Gk(Vt,(o=ut?.rect)!=null?o:null,we),xt=re.useRef(null),Tt=re.useCallback((At,ft)=>{let{sensor:le,options:Pe}=ft;if(te.current==null)return;const Qe=L.get(te.current);if(!Qe)return;const ht=At.nativeEvent,wt=new le({active:te.current,activeNode:Qe,event:ht,options:Pe,context:Ge,onAbort(Zt){if(!L.get(Zt))return;const{onDragAbort:xn}=ge.current,tn={id:Zt};xn?.(tn),R({type:"onDragAbort",event:tn})},onPending(Zt,Cn,xn,tn){if(!L.get(Zt))return;const{onDragPending:fn}=ge.current,Qt={id:Zt,constraint:Cn,initialCoordinates:xn,offset:tn};fn?.(Qt),R({type:"onDragPending",event:Qt})},onStart(Zt){const Cn=te.current;if(Cn==null)return;const xn=L.get(Cn);if(!xn)return;const{onDragStart:tn}=ge.current,Kt={activatorEvent:ht,active:{id:Cn,data:xn.data,rect:F}};Cl.unstable_batchedUpdates(()=>{tn?.(Kt),I(yc.Initializing),T({type:Cs.DragStart,initialCoordinates:Zt,active:Cn}),R({type:"onDragStart",event:Kt}),H(xt.current),Q(ht)})},onMove(Zt){T({type:Cs.DragMove,coordinates:Zt})},onEnd:lt(Cs.DragEnd),onCancel:lt(Cs.DragCancel)});xt.current=wt;function lt(Zt){return async function(){const{active:xn,collisions:tn,over:Kt,scrollAdjustedTranslate:fn}=Ge.current;let Qt=null;if(xn&&fn){const{cancelDrop:$n}=ge.current;Qt={activatorEvent:ht,active:xn,collisions:tn,delta:fn,over:Kt},Zt===Cs.DragEnd&&typeof $n=="function"&&await Promise.resolve($n(Qt))&&(Zt=Cs.DragCancel)}te.current=null,Cl.unstable_batchedUpdates(()=>{T({type:Zt}),I(yc.Uninitialized),rn(null),H(null),Q(null),xt.current=null;const $n=Zt===Cs.DragEnd?"onDragEnd":"onDragCancel";if(Qt){const lr=ge.current[$n];lr?.(Qt),R({type:$n,event:Qt})}})}}},[L]),vt=re.useCallback((At,ft)=>(le,Pe)=>{const Qe=le.nativeEvent,ht=L.get(Pe);if(te.current!==null||!ht||Qe.dndKit||Qe.defaultPrevented)return;const wt={active:ht};At(le,ft.options,wt)===!0&&(Qe.dndKit={capturedBy:ft.sensor},te.current=Pe,Tt(le,ft))},[L,Tt]),an=v7(p,vt);C7(p),Ho(()=>{we&&V===yc.Initializing&&I(yc.Initialized)},[we,V]),re.useEffect(()=>{const{onDragMove:At}=ge.current,{active:ft,activatorEvent:le,collisions:Pe,over:Qe}=Ge.current;if(!ft||!le)return;const ht={active:ft,activatorEvent:le,collisions:Pe,delta:{x:ct.x,y:ct.y},over:Qe};Cl.unstable_batchedUpdates(()=>{At?.(ht),R({type:"onDragMove",event:ht})})},[ct.x,ct.y]),re.useEffect(()=>{const{active:At,activatorEvent:ft,collisions:le,droppableContainers:Pe,scrollAdjustedTranslate:Qe}=Ge.current;if(!At||te.current==null||!ft||!Qe)return;const{onDragOver:ht}=ge.current,wt=Pe.get(bt),lt=wt&&wt.rect.current?{id:wt.id,rect:wt.rect.current,data:wt.data,disabled:wt.disabled}:null,Zt={active:At,activatorEvent:ft,collisions:le,delta:{x:Qe.x,y:Qe.y},over:lt};Cl.unstable_batchedUpdates(()=>{rn(lt),ht?.(Zt),R({type:"onDragOver",event:Zt})})},[bt]),Ho(()=>{Ge.current={activatorEvent:se,active:J,activeNode:ce,collisionRect:yt,collisions:mt,droppableRects:z,draggableNodes:L,draggingNode:Y,draggingNodeRect:De,droppableContainers:ee,over:ut,scrollableAncestors:it,scrollAdjustedTranslate:ct},F.current={initial:De,translated:yt}},[J,ce,mt,yt,L,Y,De,z,ee,ut,it,ct]),p7({...me,delta:B,draggingRect:yt,pointerCoordinates:rt,scrollableAncestors:it,scrollableAncestorRects:We});const Et=re.useMemo(()=>({active:J,activeNode:ce,activeNodeRect:we,activatorEvent:se,collisions:mt,containerNodeRect:Ve,dragOverlay:st,draggableNodes:L,droppableContainers:ee,droppableRects:z,over:ut,measureDroppableContainers:X,scrollableAncestors:it,scrollableAncestorRects:We,measuringConfiguration:j,measuringScheduled:ie,windowRect:Me}),[J,ce,we,se,mt,Ve,st,L,ee,z,ut,X,it,We,j,ie,Me]),Ft=re.useMemo(()=>({activatorEvent:se,activators:an,active:J,activeNodeRect:we,ariaDescribedById:{draggable:ue},dispatch:T,draggableNodes:L,over:ut,measureDroppableContainers:X}),[se,an,J,we,T,ue,L,ut,X]);return Yn.createElement(ow.Provider,{value:O},Yn.createElement(Qp.Provider,{value:Ft},Yn.createElement(ww.Provider,{value:Et},Yn.createElement(_w.Provider,{value:Nt},d)),Yn.createElement(F7,{disabled:c?.restoreFocus===!1})),Yn.createElement(Vk,{...c,hiddenTextDescribedById:ue}));function gn(){const At=ae?.autoScrollEnabled===!1,ft=typeof f=="object"?f.enabled===!1:f===!1,le=W&&!At&&!ft;return typeof f=="object"?{...f,enabled:le}:{enabled:le}}}),q7=re.createContext(null),sy="button",U7="Draggable";function H7(r){let{id:e,data:t,disabled:s=!1,attributes:a}=r;const o=Td(U7),{activators:u,activatorEvent:c,active:f,activeNodeRect:d,ariaDescribedById:p,draggableNodes:y,over:_}=re.useContext(Qp),{role:b=sy,roleDescription:N="draggable",tabIndex:A=0}=a??{},k=f?.id===e,T=re.useContext(k?_w:q7),[R,O]=vp(),[V,I]=vp(),W=T7(u,e),U=ad(t);Ho(()=>(y.set(e,{id:e,key:o,node:R,activatorNode:V,data:U}),()=>{const B=y.get(e);B&&B.key===o&&y.delete(e)}),[y,e]);const L=re.useMemo(()=>({role:b,tabIndex:A,"aria-disabled":s,"aria-pressed":k&&b===sy?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[s,b,A,k,N,p.draggable]);return{active:f,activatorEvent:c,activeNodeRect:d,attributes:L,isDragging:k,listeners:s?void 0:W,node:R,over:_,setNodeRef:O,setActivatorNodeRef:I,transform:T}}function G7(){return re.useContext(ww)}const W7="Droppable",Y7={timeout:25};function $7(r){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:a}=r;const o=Td(W7),{active:u,dispatch:c,over:f,measureDroppableContainers:d}=re.useContext(Qp),p=re.useRef({disabled:t}),y=re.useRef(!1),_=re.useRef(null),b=re.useRef(null),{disabled:N,updateMeasurementsFor:A,timeout:k}={...Y7,...a},T=ad(A??s),R=re.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{d(Array.isArray(T.current)?T.current:[T.current]),b.current=null},k)},[k]),O=Zp({callback:R,disabled:N||!u}),V=re.useCallback((L,B)=>{O&&(B&&(O.unobserve(B),y.current=!1),L&&O.observe(L))},[O]),[I,W]=vp(V),U=ad(e);return re.useEffect(()=>{!O||!I.current||(O.disconnect(),y.current=!1,O.observe(I.current))},[I,O]),re.useEffect(()=>(c({type:Cs.RegisterDroppable,element:{id:s,key:o,disabled:t,node:I,rect:_,data:U}}),()=>c({type:Cs.UnregisterDroppable,key:o,id:s})),[s]),re.useEffect(()=>{t!==p.current.disabled&&(c({type:Cs.SetDroppableDisabled,id:s,key:o,disabled:t}),p.current.disabled=t)},[s,o,t,c]),{active:u,rect:_,isOver:f?.id===s,node:I,over:f,setNodeRef:W}}function E2(r,e,t){const s=r.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function X7(r,e){return r.reduce((t,s,a)=>{const o=e.get(s);return o&&(t[a]=o),t},Array(r.length))}function T1(r){return r!==null&&r>=0}function Z7(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Q7(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const k1={scaleX:1,scaleY:1},K7=r=>{var e;let{rects:t,activeNodeRect:s,activeIndex:a,overIndex:o,index:u}=r;const c=(e=t[a])!=null?e:s;if(!c)return null;const f=J7(t,u,a);if(u===a){const d=t[o];return d?{x:a<o?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...k1}:null}return u>a&&u<=o?{x:-c.width-f,y:0,...k1}:u<a&&u>=o?{x:c.width+f,y:0,...k1}:{x:0,y:0,...k1}};function J7(r,e,t){const s=r[e],a=r[e-1],o=r[e+1];return!s||!a&&!o?0:t<e?a?s.left-(a.left+a.width):o.left-(s.left+s.width):o?o.left-(s.left+s.width):s.left-(a.left+a.width)}const Sw=r=>{let{rects:e,activeIndex:t,overIndex:s,index:a}=r;const o=E2(e,s,t),u=e[a],c=o[a];return!c||!u?null:{x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height}},Nw="Sortable",Aw=Yn.createContext({activeIndex:-1,containerId:Nw,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Sw,disabled:{draggable:!1,droppable:!1}});function ej(r){let{children:e,id:t,items:s,strategy:a=Sw,disabled:o=!1}=r;const{active:u,dragOverlay:c,droppableRects:f,over:d,measureDroppableContainers:p}=G7(),y=Td(Nw,t),_=c.rect!==null,b=re.useMemo(()=>s.map(W=>typeof W=="object"&&"id"in W?W.id:W),[s]),N=u!=null,A=u?b.indexOf(u.id):-1,k=d?b.indexOf(d.id):-1,T=re.useRef(b),R=!Z7(b,T.current),O=k!==-1&&A===-1||R,V=Q7(o);Ho(()=>{R&&N&&p(b)},[R,b,N,p]),re.useEffect(()=>{T.current=b},[b]);const I=re.useMemo(()=>({activeIndex:A,containerId:y,disabled:V,disableTransforms:O,items:b,overIndex:k,useDragOverlay:_,sortedRects:X7(b,f),strategy:a}),[A,y,V.draggable,V.droppable,O,b,k,f,_,a]);return Yn.createElement(Aw.Provider,{value:I},e)}const tj=r=>{let{id:e,items:t,activeIndex:s,overIndex:a}=r;return E2(t,s,a).indexOf(e)},nj=r=>{let{containerId:e,isSorting:t,wasDragging:s,index:a,items:o,newIndex:u,previousItems:c,previousContainerId:f,transition:d}=r;return!d||!s||c!==o&&a===u?!1:t?!0:u!==a&&e===f},rj={duration:200,easing:"ease"},Cw="transform",sj=ld.Transition.toString({property:Cw,duration:0,easing:"linear"}),ij={roleDescription:"sortable"};function aj(r){let{disabled:e,index:t,node:s,rect:a}=r;const[o,u]=re.useState(null),c=re.useRef(t);return Ho(()=>{if(!e&&t!==c.current&&s.current){const f=a.current;if(f){const d=Zh(s.current,{ignoreTransform:!0}),p={x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height};(p.x||p.y)&&u(p)}}t!==c.current&&(c.current=t)},[e,t,s,a]),re.useEffect(()=>{o&&u(null)},[o]),o}function oj(r){let{animateLayoutChanges:e=nj,attributes:t,disabled:s,data:a,getNewIndex:o=tj,id:u,strategy:c,resizeObserverConfig:f,transition:d=rj}=r;const{items:p,containerId:y,activeIndex:_,disabled:b,disableTransforms:N,sortedRects:A,overIndex:k,useDragOverlay:T,strategy:R}=re.useContext(Aw),O=lj(s,b),V=p.indexOf(u),I=re.useMemo(()=>({sortable:{containerId:y,index:V,items:p},...a}),[y,a,V,p]),W=re.useMemo(()=>p.slice(p.indexOf(u)),[p,u]),{rect:U,node:L,isOver:B,setNodeRef:ee}=$7({id:u,data:I,disabled:O.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...f}}),{active:M,activatorEvent:F,activeNodeRect:J,attributes:te,setNodeRef:ae,listeners:H,isDragging:se,over:Q,setActivatorNodeRef:ge,transform:ue}=H7({id:u,data:I,attributes:{...ij,...t},disabled:O.draggable}),G=Ak(ee,ae),j=!!M,z=j&&!N&&T1(_)&&T1(k),X=!T&&se,ie=X&&z?ue:null,pe=z?ie??(c??R)({rects:A,activeNodeRect:J,activeIndex:_,overIndex:k,index:V}):null,me=T1(_)&&T1(k)?o({id:u,items:p,activeIndex:_,overIndex:k}):V,Ne=M?.id,we=re.useRef({activeId:Ne,items:p,newIndex:me,containerId:y}),Ve=p!==we.current.items,Ge=e({active:M,containerId:y,isDragging:se,isSorting:j,id:u,index:V,items:p,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:d,wasDragging:we.current.activeId!=null}),nt=aj({disabled:!Ge,index:V,node:L,rect:U});return re.useEffect(()=>{j&&we.current.newIndex!==me&&(we.current.newIndex=me),y!==we.current.containerId&&(we.current.containerId=y),p!==we.current.items&&(we.current.items=p)},[j,me,y,p]),re.useEffect(()=>{if(Ne===we.current.activeId)return;if(Ne!=null&&we.current.activeId==null){we.current.activeId=Ne;return}const Y=setTimeout(()=>{we.current.activeId=Ne},50);return()=>clearTimeout(Y)},[Ne]),{active:M,activeIndex:_,attributes:te,data:I,rect:U,index:V,newIndex:me,items:p,isOver:B,isSorting:j,isDragging:se,listeners:H,node:L,overIndex:k,over:Q,setNodeRef:G,setActivatorNodeRef:ge,setDroppableNodeRef:ee,setDraggableNodeRef:ae,transform:nt??pe,transition:st()};function st(){if(nt||Ve&&we.current.newIndex===V)return sj;if(!(X&&!A2(F)||!d)&&(j||Ge))return ld.Transition.toString({...d,property:Cw})}}function lj(r,e){var t,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(s=r?.droppable)!=null?s:e.droppable}}function wp(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const cj=[Rn.Down,Rn.Right,Rn.Up,Rn.Left],uj=(r,e)=>{let{context:{active:t,collisionRect:s,droppableRects:a,droppableContainers:o,over:u,scrollableAncestors:c}}=e;if(cj.includes(r.code)){if(r.preventDefault(),!t||!s)return;const f=[];o.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const _=a.get(y.id);if(_)switch(r.code){case Rn.Down:s.top<_.top&&f.push(y);break;case Rn.Up:s.top>_.top&&f.push(y);break;case Rn.Left:s.left>_.left&&f.push(y);break;case Rn.Right:s.left<_.left&&f.push(y);break}});const d=qk({collisionRect:s,droppableRects:a,droppableContainers:f});let p=uw(d,"id");if(p===u?.id&&d.length>1&&(p=d[1].id),p!=null){const y=o.get(t.id),_=o.get(p),b=_?a.get(_.id):null,N=_?.node.current;if(N&&b&&y&&_){const k=Xp(N).some((W,U)=>c[U]!==W),T=Tw(y,_),R=hj(y,_),O=k||!T?{x:0,y:0}:{x:R?s.width-b.width:0,y:R?s.height-b.height:0},V={x:b.left,y:b.top};return O.x&&O.y?V:od(V,O)}}}};function Tw(r,e){return!wp(r)||!wp(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function hj(r,e){return!wp(r)||!wp(e)||!Tw(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}const fj={intro:{bg:"bg-purple-500/10",headers:"bg-purple-500/30 text-purple-100",border:"border-purple-500/30",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/10",headers:"bg-blue-500/30 text-blue-100",border:"border-blue-500/30",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/10",headers:"bg-cyan-500/30 text-cyan-100",border:"border-cyan-500/30",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/10",headers:"bg-amber-500/30 text-amber-100",border:"border-amber-500/30",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/10",headers:"bg-emerald-500/30 text-emerald-100",border:"border-emerald-500/30",accent:"bg-emerald-500"},interlude:{bg:"bg-teal-500/10",headers:"bg-teal-500/30 text-teal-100",border:"border-teal-500/30",accent:"bg-teal-500"},solo:{bg:"bg-orange-500/10",headers:"bg-orange-500/30 text-orange-100",border:"border-orange-500/30",accent:"bg-orange-500"},breakdown:{bg:"bg-red-500/10",headers:"bg-red-500/30 text-red-100",border:"border-red-500/30",accent:"bg-red-500"},tag:{bg:"bg-pink-500/10",headers:"bg-pink-500/30 text-pink-100",border:"border-pink-500/30",accent:"bg-pink-500"},hook:{bg:"bg-yellow-500/10",headers:"bg-yellow-500/30 text-yellow-100",border:"border-yellow-500/30",accent:"bg-yellow-500"},outro:{bg:"bg-rose-500/10",headers:"bg-rose-500/30 text-rose-100",border:"border-rose-500/30",accent:"bg-rose-500"}},dj=60,iy=.35,pj={bg:"bg-slate-500/10",headers:"bg-slate-500/30 text-slate-100",border:"border-slate-500/30",accent:"bg-slate-500"},mj=({section:r,allSections:e,onSelect:t,isActive:s,chordColors:a,measureWidth:o,isCompact:u})=>{const{attributes:c,listeners:f,setNodeRef:d,transform:p,transition:y,isDragging:_}=oj({id:r.id}),b={transform:ld.Transform.toString(p),transition:y},N=fj[r.type]||pj,A=r.measures,k=Wf(r,e),R=Math.max(u?40:100,A.length*o),O=u?60:140;return u?x.jsxs("div",{ref:d,style:{...b,width:R,height:O},className:Ot("relative flex flex-col rounded-lg overflow-hidden shrink-0 transition-all border cursor-pointer",N.bg,N.border,_?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-70 hover:scale-[1.02]",s?"ring-2 ring-white/30":""),onClick:t,...c,...f,children:[x.jsx("div",{className:Ot("h-1.5 w-full",N.accent)}),x.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 py-1",children:[x.jsx("span",{className:"font-bold uppercase tracking-wide text-center leading-tight text-sm",children:r.type.charAt(0).toUpperCase()}),x.jsxs("span",{className:"text-[8px] font-mono text-white/40 mt-0.5",children:[A.length,"b"]})]})]}):x.jsxs("div",{ref:d,style:{...b,width:R,height:O},className:Ot("relative flex flex-col pt-8 pb-2 rounded-xl overflow-hidden shrink-0 transition-all border group",N.bg,N.border,_?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-50",s?"ring-2 ring-white/20":""),children:[x.jsxs("div",{className:Ot("absolute top-0 left-0 right-0 h-8 flex items-center justify-between px-3 select-none border-b border-white/5",N.headers,"cursor-grab active:cursor-grabbing"),...c,...f,children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(z3,{size:14,className:"opacity-50"}),x.jsx("span",{className:"font-bold text-xs uppercase tracking-wider truncate max-w-[100px]",children:k})]}),o>=70&&x.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-80",children:x.jsxs("span",{children:[A.length," bars"]})})]}),x.jsx("div",{className:"flex-1 flex px-2 pt-2 gap-1 overflow-hidden",onClick:t,children:A.map((V,I)=>x.jsxs("div",{className:"flex-1 min-w-[32px] h-full flex flex-col gap-1",children:[x.jsxs("div",{className:"h-4 flex items-end justify-between px-0.5 border-b border-white/10 pb-0.5",children:[x.jsx("span",{className:"text-[9px] font-mono text-white/30",children:I+1}),x.jsx("div",{className:"flex gap-0.5",children:V.beats.map((W,U)=>x.jsx("div",{className:"w-0.5 h-1.5 bg-white/20 rounded-full"},U))})]}),(()=>{const W=V.beats.filter(L=>L.chord),U=W.length;return U===0?x.jsx("div",{className:"flex-1 rounded bg-white/5 border border-dashed border-white/10 flex items-center justify-center",children:x.jsx("span",{className:"text-[10px] text-white/10",children:"-"})}):x.jsx("div",{className:"flex gap-0.5 flex-1 items-stretch",children:W.map(L=>{const B=a[L.chord.root]||"#666",ee=U<=2?"10px":U<=4?"8px":"7px",M=U<=2?"0 4px":"0 2px";return x.jsx("div",{className:"flex-1 min-w-0 rounded flex items-center justify-center font-bold shadow-sm truncate transition-all",style:{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${B}`,color:B,fontSize:ee,padding:M,minHeight:"24px"},title:L.chord.symbol,children:Zr(L.chord.symbol)},L.id)})})})()]},V.id))}),x.jsx("div",{className:"absolute inset-0 top-8 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none",children:x.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-white/80 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Go to Section"})})]})},gj=()=>{const{currentSong:r,songMapVisible:e,toggleSongMap:t,setSelectedSlot:s,reorderSections:a,isPlaying:o,tempo:u,setTempo:c,instrument:f,setInstrument:d,isLooping:p,toggleLoop:y,playingSectionId:_}=pn(),[b,N]=re.useState(!1),[A,k]=re.useState(1),{isMobile:T,isLandscape:R}=Yh(),O=fd(),V=r.sections.reduce((ue,G)=>ue+G.measures.length,0),W=r.sections.reduce((ue,G)=>{const z=(G.timeSignature||r.timeSignature)[0];return ue+G.measures.length*z},0)/u*60,U=Math.floor(W/60),L=Math.floor(W%60),B=`${U}:${L.toString().padStart(2,"0")}`,ee=dj*A,M=ue=>{k(Number(ue.target.value))},F=async()=>{try{await Yp(),o?(y2(),pn.getState().setIsPlaying(!1)):(N(!0),await v2(),pn.getState().setIsPlaying(!0))}catch(ue){console.error("Playback error:",ue)}finally{N(!1)}},J=ue=>{x2(ue)},te=()=>{y()},ae=[{value:"piano",label:"Piano"},{value:"epiano",label:"E.Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"},{value:"guitar",label:"Guitar"}],H=Bk(Wv(j2,{activationConstraint:{distance:8}}),Wv(T2,{coordinateGetter:uj})),se=ue=>{const{active:G,over:j}=ue;if(j&&G.id!==j.id){const z=r.sections.findIndex(ie=>ie.id===G.id),X=r.sections.findIndex(ie=>ie.id===j.id);a(E2(r.sections,z,X))}},[Q,ge]=re.useState(0);return re.useEffect(()=>{if(!e||!o)return;const ue=()=>{const j=yi.position.toString().split(":"),z=parseFloat(j[0]),X=parseFloat(j[1]),ie=parseFloat(j[2]),ce=z*4+X+ie/4;let pe=0,me=0;const Ne=16;for(const we of r.sections){const Ve=we.measures.length*4;if(ce<me+Ve){const nt=(ce-me)/Ve,st=we.measures.length*ee;pe+=nt*st;break}else{const Ge=we.measures.length*ee;pe+=Ge+Ne,me+=Ve}}ge(pe),requestAnimationFrame(ue)},G=requestAnimationFrame(ue);return()=>cancelAnimationFrame(G)},[e,o,r,ee]),re.useEffect(()=>{const ue=G=>{G.key==="Escape"&&t(!1)};return e&&window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[e,t]),e?x.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-black/80 backdrop-blur-md animate-in fade-in duration-200",style:{paddingTop:"max(20px, env(safe-area-inset-top))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))",paddingBottom:"max(16px, env(safe-area-inset-bottom))"},onClick:()=>t(!1),children:[x.jsxs("div",{className:Ot("shrink-0 bg-transparent text-white transition-all",R?"px-4 py-1.5":"px-4 py-2"),onClick:ue=>ue.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("h2",{className:Ot("font-bold tracking-tight",R?"text-base":"text-lg"),children:"Song Map"}),x.jsx("span",{className:"text-white/40",children:""}),x.jsx("span",{className:Ot("text-white/60 font-medium",R?"text-xs":"text-sm"),children:r.title})]}),x.jsx("button",{onClick:()=>t(!1),className:Ot("bg-white/10 hover:bg-white/20 active:bg-white/30 rounded-full transition-all flex items-center justify-center active:scale-95",R?"w-7 h-7":"w-8 h-8"),children:x.jsx(vu,{size:R?14:16})})]}),x.jsx("div",{className:"flex justify-center mb-2",children:x.jsxs("div",{className:Ot("flex items-center gap-2 text-white/50 bg-white/5 rounded-full px-3 py-1",R?"text-[9px]":"text-[10px]"),children:[x.jsx("span",{className:"font-mono",children:B}),x.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),x.jsxs("span",{children:[r.sections.length," sections"]}),x.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),x.jsxs("span",{children:[V," bars"]}),x.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),x.jsxs("span",{children:[r.tempo," BPM"]})]})}),x.jsx("div",{className:"flex justify-center",children:x.jsxs("div",{className:"flex items-center gap-2 bg-white/5 rounded-full px-2 py-1",children:[x.jsx("button",{onClick:()=>k(Math.max(.15,A-.1)),className:Ot("flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 active:bg-white/30 text-white/70 hover:text-white transition-all active:scale-95",R?"w-5 h-5":"w-6 h-6"),children:x.jsx(ng,{size:R?10:12})}),x.jsx("div",{className:Ot("relative flex items-center",R?"w-28 h-5":"w-32 h-6"),children:x.jsx("input",{type:"range",min:"0.15",max:"2",step:"0.05",value:A,onChange:M,className:Ot("w-full bg-white/20 rounded-full appearance-none cursor-pointer h-1.5",`[&::-webkit-slider-thumb]:appearance-none
                                    [&::-webkit-slider-thumb]:bg-white
                                    [&::-webkit-slider-thumb]:rounded-full
                                    [&::-webkit-slider-thumb]:shadow-md
                                    [&::-webkit-slider-thumb]:shadow-black/30
                                    [&::-webkit-slider-thumb]:cursor-grab
                                    [&::-webkit-slider-thumb]:active:cursor-grabbing
                                    [&::-webkit-slider-thumb]:active:scale-110
                                    [&::-webkit-slider-thumb]:transition-transform
                                    [&::-webkit-slider-thumb]:hover:scale-110
                                    [&::-moz-range-thumb]:appearance-none
                                    [&::-moz-range-thumb]:bg-white
                                    [&::-moz-range-thumb]:rounded-full
                                    [&::-moz-range-thumb]:border-none
                                    [&::-moz-range-thumb]:shadow-md
                                    [&::-moz-range-thumb]:cursor-grab
                                    focus:outline-none`,R?"[&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4":"[&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5"),style:{touchAction:"manipulation"}})}),x.jsx("button",{onClick:()=>k(Math.min(2,A+.1)),className:Ot("flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 active:bg-white/30 text-white/70 hover:text-white transition-all active:scale-95",R?"w-5 h-5":"w-6 h-6"),children:x.jsx(Tc,{size:R?10:12})}),x.jsxs("span",{className:Ot("text-white/50 font-mono ml-1",R?"text-[9px]":"text-[10px]"),children:[Math.round(A*100),"%"]})]})})]}),x.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden px-4 flex items-center relative scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",onClick:ue=>ue.stopPropagation(),children:x.jsxs("div",{className:Ot("flex relative h-full items-center pt-2 pb-2 transition-all",A<iy?"gap-2 min-h-[80px]":"gap-4 min-h-[156px]"),children:[o&&x.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-[60] shadow-[0_0_12px_#ef4444] transition-transform duration-75 will-change-transform pointer-events-none",style:{transform:`translateX(${Q}px)`},children:x.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3.5 h-3.5 bg-red-500 rounded-full shadow-sm"})}),x.jsx(P7,{sensors:H,collisionDetection:Pk,onDragEnd:se,children:x.jsx(ej,{items:r.sections.map(ue=>ue.id),strategy:K7,children:r.sections.map(ue=>x.jsx(mj,{section:ue,allSections:r.sections,onSelect:()=>{ue.measures[0]?.beats[0]&&s(ue.id,ue.measures[0].beats[0].id),t(!1)},isActive:o&&r.sections.findIndex(G=>G.id===ue.id)===r.sections.findIndex(G=>G.id===_),chordColors:O,measureWidth:ee,isCompact:A<iy},ue.id))})})]})}),x.jsx("div",{className:Ot("shrink-0 bg-bg-elevated border-t border-border-subtle z-[110] flex flex-col justify-center",R?"pb-0":T?"px-4 py-3 pb-6 gap-3":"px-6 py-3 pb-6"),onClick:ue=>ue.stopPropagation(),children:T&&!R?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex items-center gap-3 mx-auto",children:[x.jsx("button",{onClick:()=>J("prev"),className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:x.jsx(Y3,{size:22})}),x.jsx("button",{onClick:F,disabled:b,className:"w-12 h-12 rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95",children:b?x.jsx(U3,{size:24,className:"animate-spin"}):o?x.jsx(G3,{size:24,fill:"currentColor"}):x.jsx(Wh,{size:24,fill:"currentColor",className:"ml-0.5"})}),x.jsx("button",{onClick:()=>J("next"),className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:x.jsx($3,{size:22})})]})}),x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:te,className:Ot("p-2 rounded-full transition-colors",p?"text-accent-primary bg-accent-primary/10":"text-text-secondary hover:text-text-primary"),children:x.jsx(W3,{size:18})}),x.jsxs("div",{className:"flex items-center gap-1 bg-bg-tertiary rounded-lg border border-border-subtle p-1 pr-2",children:[x.jsx("button",{onClick:()=>c(Math.max(40,u-5)),className:"p-1 px-2 text-text-secondary hover:text-text-primary",children:x.jsx(ng,{size:14})}),x.jsxs("div",{className:"flex flex-col items-center min-w-[32px]",children:[x.jsx("span",{className:"text-[9px] uppercase tracking-wider text-text-muted font-bold leading-none",children:"BPM"}),x.jsx("span",{className:"text-sm font-mono font-medium text-text-primary leading-none",children:u})]}),x.jsx("button",{onClick:()=>c(Math.min(240,u+5)),className:"p-1 px-2 text-text-secondary hover:text-text-primary",children:x.jsx(Tc,{size:14})})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-7 h-7 rounded bg-bg-tertiary flex items-center justify-center text-text-muted shrink-0",children:x.jsx(d2,{size:14})}),x.jsx("select",{value:f,onChange:ue=>d(ue.target.value),className:"bg-bg-tertiary border border-border-subtle rounded-lg px-3 py-1.5 text-xs text-text-primary focus:outline-none focus:border-accent-primary cursor-pointer",children:ae.map(ue=>x.jsx("option",{value:ue.value,children:ue.label},ue.value))})]})]})]}):x.jsx(sw,{})})]}):null},bj=({className:r="",size:e=24})=>x.jsx("div",{className:`relative flex items-center justify-center ${r}`,style:{width:e,height:e},children:x.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=20,f=48,d=s<=4||s>=10;let p;d?s===0?p="rgba(234, 179, 8, 0.95)":s===1?p="rgba(163, 190, 60, 0.9)":s===2?p="rgba(132, 204, 22, 0.85)":s===3?p="rgba(74, 222, 128, 0.75)":s===4?p="rgba(45, 212, 191, 0.65)":s===11?p="rgba(251, 146, 60, 0.9)":s===10?p="rgba(168, 162, 158, 0.65)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+f*Math.cos(o),N=50+f*Math.sin(o),A=50+f*Math.cos(u),k=50+f*Math.sin(u),T=50+c*Math.cos(u),R=50+c*Math.sin(u);return x.jsx("path",{d:`M ${y} ${_} L ${b} ${N} A ${f} ${f} 0 0 1 ${A} ${k} L ${T} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),x.jsx("circle",{cx:"50",cy:"50",r:"18",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.15)",strokeWidth:"1"})]})});function Kn(r){"@babel/helpers - typeof";return Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(r)}var fo=Uint8Array,la=Uint16Array,M2=Int32Array,L2=new fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),O2=new fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ay=new fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kw=function(r,e){for(var t=new la(31),s=0;s<31;++s)t[s]=e+=1<<r[s-1];for(var a=new M2(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},jw=kw(L2,2),vj=jw.b,pg=jw.r;vj[28]=258,pg[258]=28;var yj=kw(O2,0),oy=yj.r,mg=new la(32768);for(var Sr=0;Sr<32768;++Sr){var gc=(Sr&43690)>>1|(Sr&21845)<<1;gc=(gc&52428)>>2|(gc&13107)<<2,gc=(gc&61680)>>4|(gc&3855)<<4,mg[Sr]=((gc&65280)>>8|(gc&255)<<8)>>1}var Zf=(function(r,e,t){for(var s=r.length,a=0,o=new la(e);a<s;++a)r[a]&&++o[r[a]-1];var u=new la(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(t){c=new la(1<<e);var f=15-e;for(a=0;a<s;++a)if(r[a])for(var d=a<<4|r[a],p=e-r[a],y=u[r[a]-1]++<<p,_=y|(1<<p)-1;y<=_;++y)c[mg[y]>>f]=d}else for(c=new la(s),a=0;a<s;++a)r[a]&&(c[a]=mg[u[r[a]-1]++]>>15-r[a]);return c}),yu=new fo(288);for(var Sr=0;Sr<144;++Sr)yu[Sr]=8;for(var Sr=144;Sr<256;++Sr)yu[Sr]=9;for(var Sr=256;Sr<280;++Sr)yu[Sr]=7;for(var Sr=280;Sr<288;++Sr)yu[Sr]=8;var _p=new fo(32);for(var Sr=0;Sr<32;++Sr)_p[Sr]=5;var xj=Zf(yu,9,0),wj=Zf(_p,5,0),Ew=function(r){return(r+7)/8|0},_j=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new fo(r.subarray(e,t))},wl=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8},Vf=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8,r[s+2]|=t>>16},Nm=function(r,e){for(var t=[],s=0;s<r.length;++s)r[s]&&t.push({s,f:r[s]});var a=t.length,o=t.slice();if(!a)return{t:Lw,l:0};if(a==1){var u=new fo(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(I,W){return I.f-W.f}),t.push({s:-1,f:25001});var c=t[0],f=t[1],d=0,p=1,y=2;for(t[0]={s:-1,f:c.f+f.f,l:c,r:f};p!=a-1;)c=t[t[d].f<t[y].f?d++:y++],f=t[d!=p&&t[d].f<t[y].f?d++:y++],t[p++]={s:-1,f:c.f+f.f,l:c,r:f};for(var _=o[0].s,s=1;s<a;++s)o[s].s>_&&(_=o[s].s);var b=new la(_+1),N=gg(t[p-1],b,0);if(N>e){var s=0,A=0,k=N-e,T=1<<k;for(o.sort(function(W,U){return b[U.s]-b[W.s]||W.f-U.f});s<a;++s){var R=o[s].s;if(b[R]>e)A+=T-(1<<N-b[R]),b[R]=e;else break}for(A>>=k;A>0;){var O=o[s].s;b[O]<e?A-=1<<e-b[O]++-1:++s}for(;s>=0&&A;--s){var V=o[s].s;b[V]==e&&(--b[V],++A)}N=e}return{t:new fo(b),l:N}},gg=function(r,e,t){return r.s==-1?Math.max(gg(r.l,e,t+1),gg(r.r,e,t+1)):e[r.s]=t},ly=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new la(++e),s=0,a=r[0],o=1,u=function(f){t[s++]=f},c=1;c<=e;++c)if(r[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=r[c]}return{c:t.subarray(0,s),n:e}},Bf=function(r,e){for(var t=0,s=0;s<e.length;++s)t+=r[s]*e[s];return t},Mw=function(r,e,t){var s=t.length,a=Ew(e+2);r[a]=s&255,r[a+1]=s>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var o=0;o<s;++o)r[a+o+4]=t[o];return(a+4+s)*8},cy=function(r,e,t,s,a,o,u,c,f,d,p){wl(e,p++,t),++a[256];for(var y=Nm(a,15),_=y.t,b=y.l,N=Nm(o,15),A=N.t,k=N.l,T=ly(_),R=T.c,O=T.n,V=ly(A),I=V.c,W=V.n,U=new la(19),L=0;L<R.length;++L)++U[R[L]&31];for(var L=0;L<I.length;++L)++U[I[L]&31];for(var B=Nm(U,7),ee=B.t,M=B.l,F=19;F>4&&!ee[ay[F-1]];--F);var J=d+5<<3,te=Bf(a,yu)+Bf(o,_p)+u,ae=Bf(a,_)+Bf(o,A)+u+14+3*F+Bf(U,ee)+2*U[16]+3*U[17]+7*U[18];if(f>=0&&J<=te&&J<=ae)return Mw(e,p,r.subarray(f,f+d));var H,se,Q,ge;if(wl(e,p,1+(ae<te)),p+=2,ae<te){H=Zf(_,b,0),se=_,Q=Zf(A,k,0),ge=A;var ue=Zf(ee,M,0);wl(e,p,O-257),wl(e,p+5,W-1),wl(e,p+10,F-4),p+=14;for(var L=0;L<F;++L)wl(e,p+3*L,ee[ay[L]]);p+=3*F;for(var G=[R,I],j=0;j<2;++j)for(var z=G[j],L=0;L<z.length;++L){var X=z[L]&31;wl(e,p,ue[X]),p+=ee[X],X>15&&(wl(e,p,z[L]>>5&127),p+=z[L]>>12)}}else H=xj,se=yu,Q=wj,ge=_p;for(var L=0;L<c;++L){var ie=s[L];if(ie>255){var X=ie>>18&31;Vf(e,p,H[X+257]),p+=se[X+257],X>7&&(wl(e,p,ie>>23&31),p+=L2[X]);var ce=ie&31;Vf(e,p,Q[ce]),p+=ge[ce],ce>3&&(Vf(e,p,ie>>5&8191),p+=O2[ce])}else Vf(e,p,H[ie]),p+=se[ie]}return Vf(e,p,H[256]),p+se[256]},Sj=new M2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lw=new fo(0),Nj=function(r,e,t,s,a,o){var u=o.z||r.length,c=new fo(s+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(s,c.length-a),d=o.l,p=(o.r||0)&7;if(e){p&&(f[0]=o.r>>3);for(var y=Sj[e-1],_=y>>13,b=y&8191,N=(1<<t)-1,A=o.p||new la(32768),k=o.h||new la(N+1),T=Math.ceil(t/3),R=2*T,O=function(st){return(r[st]^r[st+1]<<T^r[st+2]<<R)&N},V=new M2(25e3),I=new la(288),W=new la(32),U=0,L=0,B=o.i||0,ee=0,M=o.w||0,F=0;B+2<u;++B){var J=O(B),te=B&32767,ae=k[J];if(A[te]=ae,k[J]=te,M<=B){var H=u-B;if((U>7e3||ee>24576)&&(H>423||!d)){p=cy(r,f,0,V,I,W,L,ee,F,B-F,p),ee=U=L=0,F=B;for(var se=0;se<286;++se)I[se]=0;for(var se=0;se<30;++se)W[se]=0}var Q=2,ge=0,ue=b,G=te-ae&32767;if(H>2&&J==O(B-G))for(var j=Math.min(_,H)-1,z=Math.min(32767,B),X=Math.min(258,H);G<=z&&--ue&&te!=ae;){if(r[B+Q]==r[B+Q-G]){for(var ie=0;ie<X&&r[B+ie]==r[B+ie-G];++ie);if(ie>Q){if(Q=ie,ge=G,ie>j)break;for(var ce=Math.min(G,ie-2),pe=0,se=0;se<ce;++se){var me=B-G+se&32767,Ne=A[me],we=me-Ne&32767;we>pe&&(pe=we,ae=me)}}}te=ae,ae=A[te],G+=te-ae&32767}if(ge){V[ee++]=268435456|pg[Q]<<18|oy[ge];var Ve=pg[Q]&31,Ge=oy[ge]&31;L+=L2[Ve]+O2[Ge],++I[257+Ve],++W[Ge],M=B+Q,++U}else V[ee++]=r[B],++I[r[B]]}}for(B=Math.max(B,M);B<u;++B)V[ee++]=r[B],++I[r[B]];p=cy(r,f,d,V,I,W,L,ee,F,B-F,p),d||(o.r=p&7|f[p/8|0]<<3,p-=7,o.h=k,o.p=A,o.i=B,o.w=M)}else{for(var B=o.w||0;B<u+d;B+=65535){var nt=B+65535;nt>=u&&(f[p/8|0]=d,nt=u),p=Mw(f,p+1,r.subarray(B,nt))}o.i=u}return _j(c,0,s+Ew(p)+a)},Ow=function(){var r=1,e=0;return{p:function(t){for(var s=r,a=e,o=t.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}r=s,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},Aj=function(r,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new fo(o.length+r.length);u.set(o),u.set(r,o.length),r=u,a.w=o.length}return Nj(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,s,a)},Dw=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},Cj=function(r,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=s<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=Ow();a.p(e.dictionary),Dw(r,2,a.d())}};function bg(r,e){e||(e={});var t=Ow();t.p(r);var s=Aj(r,e,e.dictionary?6:2,4);return Cj(s,e),Dw(s,s.length-4,t.d()),s}var Tj=typeof TextDecoder<"u"&&new TextDecoder,kj=0;try{Tj.decode(Lw,{stream:!0}),kj=1}catch{}function jj(r){if(Array.isArray(r))return r}function Ej(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,a,o,u,c=[],f=!0,d=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(f=(s=o.call(t)).done)&&(c.push(s.value),c.length!==e);f=!0);}catch(p){d=!0,a=p}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw a}}return c}}function uy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function Mj(r,e){if(r){if(typeof r=="string")return uy(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?uy(r,e):void 0}}function Lj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hy(r,e){return jj(r)||Ej(r,e)||Mj(r,e)||Lj()}function fy(r,e="utf8"){return new TextDecoder(e).decode(r)}const Oj=new TextEncoder;function Dj(r){return Oj.encode(r)}const Rj=1024*8,Ij=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Am={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class D2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Rj,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof D2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Am[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===Ij&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+s));c.reverse();const f=new Am[t](c.buffer);return this.offset+=s,f.reverse(),f}const u=new Am[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return fy(this.readBytes(e))}decodeText(e=1,t="utf8"){return fy(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Dj(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Qh(r){let e=r.length;for(;--e>=0;)r[e]=0}const Fj=3,Vj=258,Rw=29,Bj=256,zj=Bj+1+Rw,Iw=30,Pj=512,qj=new Array((zj+2)*2);Qh(qj);const Uj=new Array(Iw*2);Qh(Uj);const Hj=new Array(Pj);Qh(Hj);const Gj=new Array(Vj-Fj+1);Qh(Gj);const Wj=new Array(Rw);Qh(Wj);const Yj=new Array(Iw);Qh(Yj);const $j=(r,e,t,s)=>{let a=r&65535|0,o=r>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var vg=$j;const Xj=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},Zj=new Uint32Array(Xj()),Qj=(r,e,t,s)=>{const a=Zj,o=s+t;r^=-1;for(let u=s;u<o;u++)r=r>>>8^a[(r^e[u])&255];return r^-1};var zo=Qj,yg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Fw={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Kj=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var Jj=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)Kj(t,s)&&(r[s]=t[s])}}return r},eE=r=>{let e=0;for(let s=0,a=r.length;s<a;s++)e+=r[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=r.length;s<o;s++){let u=r[s];t.set(u,a),a+=u.length}return t},Vw={assign:Jj,flattenChunks:eE};let Bw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Bw=!1}const ud=new Uint8Array(256);for(let r=0;r<256;r++)ud[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;ud[254]=ud[254]=1;var tE=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,s,a,o,u=r.length,c=0;for(a=0;a<u;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const nE=(r,e)=>{if(e<65534&&r.subarray&&Bw)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(r[s]);return t};var rE=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=r[s++];if(u<128){o[a++]=u;continue}let c=ud[u];if(c>4){o[a++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<t;)u=u<<6|r[s++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return nE(o,a)},sE=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+ud[r[t]]>e?t:e},xg={string2buf:tE,buf2string:rE,utf8border:sE};function iE(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var aE=iE;const j1=16209,oE=16191;var lE=function(e,t){let s,a,o,u,c,f,d,p,y,_,b,N,A,k,T,R,O,V,I,W,U,L,B,ee;const M=e.state;s=e.next_in,B=e.input,a=s+(e.avail_in-5),o=e.next_out,ee=e.output,u=o-(t-e.avail_out),c=o+(e.avail_out-257),f=M.dmax,d=M.wsize,p=M.whave,y=M.wnext,_=M.window,b=M.hold,N=M.bits,A=M.lencode,k=M.distcode,T=(1<<M.lenbits)-1,R=(1<<M.distbits)-1;e:do{N<15&&(b+=B[s++]<<N,N+=8,b+=B[s++]<<N,N+=8),O=A[b&T];t:for(;;){if(V=O>>>24,b>>>=V,N-=V,V=O>>>16&255,V===0)ee[o++]=O&65535;else if(V&16){I=O&65535,V&=15,V&&(N<V&&(b+=B[s++]<<N,N+=8),I+=b&(1<<V)-1,b>>>=V,N-=V),N<15&&(b+=B[s++]<<N,N+=8,b+=B[s++]<<N,N+=8),O=k[b&R];n:for(;;){if(V=O>>>24,b>>>=V,N-=V,V=O>>>16&255,V&16){if(W=O&65535,V&=15,N<V&&(b+=B[s++]<<N,N+=8,N<V&&(b+=B[s++]<<N,N+=8)),W+=b&(1<<V)-1,W>f){e.msg="invalid distance too far back",M.mode=j1;break e}if(b>>>=V,N-=V,V=o-u,W>V){if(V=W-V,V>p&&M.sane){e.msg="invalid distance too far back",M.mode=j1;break e}if(U=0,L=_,y===0){if(U+=d-V,V<I){I-=V;do ee[o++]=_[U++];while(--V);U=o-W,L=ee}}else if(y<V){if(U+=d+y-V,V-=y,V<I){I-=V;do ee[o++]=_[U++];while(--V);if(U=0,y<I){V=y,I-=V;do ee[o++]=_[U++];while(--V);U=o-W,L=ee}}}else if(U+=y-V,V<I){I-=V;do ee[o++]=_[U++];while(--V);U=o-W,L=ee}for(;I>2;)ee[o++]=L[U++],ee[o++]=L[U++],ee[o++]=L[U++],I-=3;I&&(ee[o++]=L[U++],I>1&&(ee[o++]=L[U++]))}else{U=o-W;do ee[o++]=ee[U++],ee[o++]=ee[U++],ee[o++]=ee[U++],I-=3;while(I>2);I&&(ee[o++]=ee[U++],I>1&&(ee[o++]=ee[U++]))}}else if((V&64)===0){O=k[(O&65535)+(b&(1<<V)-1)];continue n}else{e.msg="invalid distance code",M.mode=j1;break e}break}}else if((V&64)===0){O=A[(O&65535)+(b&(1<<V)-1)];continue t}else if(V&32){M.mode=oE;break e}else{e.msg="invalid literal/length code",M.mode=j1;break e}break}}while(s<a&&o<c);I=N>>3,s-=I,N-=I<<3,b&=(1<<N)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<c?257+(c-o):257-(o-c),M.hold=b,M.bits=N};const mh=15,dy=852,py=592,my=0,Cm=1,gy=2,cE=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uE=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dE=(r,e,t,s,a,o,u,c)=>{const f=c.bits;let d=0,p=0,y=0,_=0,b=0,N=0,A=0,k=0,T=0,R=0,O,V,I,W,U,L=null,B;const ee=new Uint16Array(mh+1),M=new Uint16Array(mh+1);let F=null,J,te,ae;for(d=0;d<=mh;d++)ee[d]=0;for(p=0;p<s;p++)ee[e[t+p]]++;for(b=f,_=mh;_>=1&&ee[_]===0;_--);if(b>_&&(b=_),_===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<_&&ee[y]===0;y++);for(b<y&&(b=y),k=1,d=1;d<=mh;d++)if(k<<=1,k-=ee[d],k<0)return-1;if(k>0&&(r===my||_!==1))return-1;for(M[1]=0,d=1;d<mh;d++)M[d+1]=M[d]+ee[d];for(p=0;p<s;p++)e[t+p]!==0&&(u[M[e[t+p]]++]=p);if(r===my?(L=F=u,B=20):r===Cm?(L=cE,F=uE,B=257):(L=hE,F=fE,B=0),R=0,p=0,d=y,U=o,N=b,A=0,I=-1,T=1<<b,W=T-1,r===Cm&&T>dy||r===gy&&T>py)return 1;for(;;){J=d-A,u[p]+1<B?(te=0,ae=u[p]):u[p]>=B?(te=F[u[p]-B],ae=L[u[p]-B]):(te=96,ae=0),O=1<<d-A,V=1<<N,y=V;do V-=O,a[U+(R>>A)+V]=J<<24|te<<16|ae|0;while(V!==0);for(O=1<<d-1;R&O;)O>>=1;if(O!==0?(R&=O-1,R+=O):R=0,p++,--ee[d]===0){if(d===_)break;d=e[t+u[p]]}if(d>b&&(R&W)!==I){for(A===0&&(A=b),U+=y,N=d-A,k=1<<N;N+A<_&&(k-=ee[N+A],!(k<=0));)N++,k<<=1;if(T+=1<<N,r===Cm&&T>dy||r===gy&&T>py)return 1;I=R&W,a[I]=b<<24|N<<16|U-o|0}}return R!==0&&(a[U+R]=d-A<<24|64<<16|0),c.bits=b,0};var Qf=dE;const pE=0,zw=1,Pw=2,{Z_FINISH:by,Z_BLOCK:mE,Z_TREES:E1,Z_OK:xu,Z_STREAM_END:gE,Z_NEED_DICT:bE,Z_STREAM_ERROR:La,Z_DATA_ERROR:qw,Z_MEM_ERROR:Uw,Z_BUF_ERROR:vE,Z_DEFLATED:vy}=Fw,Kp=16180,yy=16181,xy=16182,wy=16183,_y=16184,Sy=16185,Ny=16186,Ay=16187,Cy=16188,Ty=16189,Sp=16190,_l=16191,Tm=16192,ky=16193,km=16194,jy=16195,Ey=16196,My=16197,Ly=16198,M1=16199,L1=16200,Oy=16201,Dy=16202,Ry=16203,Iy=16204,Fy=16205,jm=16206,Vy=16207,By=16208,Lr=16209,Hw=16210,Gw=16211,yE=852,xE=592,wE=15,_E=wE,zy=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function SE(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Au=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Kp||e.mode>Gw?1:0},Ww=r=>{if(Au(r))return La;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Kp,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(yE),e.distcode=e.distdyn=new Int32Array(xE),e.sane=1,e.back=-1,xu},Yw=r=>{if(Au(r))return La;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Ww(r)},$w=(r,e)=>{let t;if(Au(r))return La;const s=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?La:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Yw(r))},Xw=(r,e)=>{if(!r)return La;const t=new SE;r.state=t,t.strm=r,t.window=null,t.mode=Kp;const s=$w(r,e);return s!==xu&&(r.state=null),s},NE=r=>Xw(r,_E);let Py=!0,Em,Mm;const AE=r=>{if(Py){Em=new Int32Array(512),Mm=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Qf(zw,r.lens,0,288,Em,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Qf(Pw,r.lens,0,32,Mm,0,r.work,{bits:5}),Py=!1}r.lencode=Em,r.lenbits=9,r.distcode=Mm,r.distbits=5},Zw=(r,e,t,s)=>{let a;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},CE=(r,e)=>{let t,s,a,o,u,c,f,d,p,y,_,b,N,A,k=0,T,R,O,V,I,W,U,L;const B=new Uint8Array(4);let ee,M;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Au(r)||!r.output||!r.input&&r.avail_in!==0)return La;t=r.state,t.mode===_l&&(t.mode=Tm),u=r.next_out,a=r.output,f=r.avail_out,o=r.next_in,s=r.input,c=r.avail_in,d=t.hold,p=t.bits,y=c,_=f,L=xu;e:for(;;)switch(t.mode){case Kp:if(t.wrap===0){t.mode=Tm;break}for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,B[0]=d&255,B[1]=d>>>8&255,t.check=zo(t.check,B,2,0),d=0,p=0,t.mode=yy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=Lr;break}if((d&15)!==vy){r.msg="unknown compression method",t.mode=Lr;break}if(d>>>=4,p-=4,U=(d&15)+8,t.wbits===0&&(t.wbits=U),U>15||U>t.wbits){r.msg="invalid window size",t.mode=Lr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?Ty:_l,d=0,p=0;break;case yy:for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.flags=d,(t.flags&255)!==vy){r.msg="unknown compression method",t.mode=Lr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Lr;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,t.check=zo(t.check,B,2,0)),d=0,p=0,t.mode=xy;case xy:for(;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,B[2]=d>>>16&255,B[3]=d>>>24&255,t.check=zo(t.check,B,4,0)),d=0,p=0,t.mode=wy;case wy:for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,t.check=zo(t.check,B,2,0)),d=0,p=0,t.mode=_y;case _y:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,t.check=zo(t.check,B,2,0)),d=0,p=0}else t.head&&(t.head.extra=null);t.mode=Sy;case Sy:if(t.flags&1024&&(b=t.length,b>c&&(b=c),b&&(t.head&&(U=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+b),U)),t.flags&512&&t.wrap&4&&(t.check=zo(t.check,s,b,o)),c-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=Ny;case Ny:if(t.flags&2048){if(c===0)break e;b=0;do U=s[o+b++],t.head&&U&&t.length<65536&&(t.head.name+=String.fromCharCode(U));while(U&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=zo(t.check,s,b,o)),c-=b,o+=b,U)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Ay;case Ay:if(t.flags&4096){if(c===0)break e;b=0;do U=s[o+b++],t.head&&U&&t.length<65536&&(t.head.comment+=String.fromCharCode(U));while(U&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=zo(t.check,s,b,o)),c-=b,o+=b,U)break e}else t.head&&(t.head.comment=null);t.mode=Cy;case Cy:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Lr;break}d=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=_l;break;case Ty:for(;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}r.adler=t.check=zy(d),d=0,p=0,t.mode=Sp;case Sp:if(t.havedict===0)return r.next_out=u,r.avail_out=f,r.next_in=o,r.avail_in=c,t.hold=d,t.bits=p,bE;r.adler=t.check=1,t.mode=_l;case _l:if(e===mE||e===E1)break e;case Tm:if(t.last){d>>>=p&7,p-=p&7,t.mode=jm;break}for(;p<3;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}switch(t.last=d&1,d>>>=1,p-=1,d&3){case 0:t.mode=ky;break;case 1:if(AE(t),t.mode=M1,e===E1){d>>>=2,p-=2;break e}break;case 2:t.mode=Ey;break;case 3:r.msg="invalid block type",t.mode=Lr}d>>>=2,p-=2;break;case ky:for(d>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Lr;break}if(t.length=d&65535,d=0,p=0,t.mode=km,e===E1)break e;case km:t.mode=jy;case jy:if(b=t.length,b){if(b>c&&(b=c),b>f&&(b=f),b===0)break e;a.set(s.subarray(o,o+b),u),c-=b,o+=b,f-=b,u+=b,t.length-=b;break}t.mode=_l;break;case Ey:for(;p<14;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.nlen=(d&31)+257,d>>>=5,p-=5,t.ndist=(d&31)+1,d>>>=5,p-=5,t.ncode=(d&15)+4,d>>>=4,p-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Lr;break}t.have=0,t.mode=My;case My:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.lens[F[t.have++]]=d&7,d>>>=3,p-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ee={bits:t.lenbits},L=Qf(pE,t.lens,0,19,t.lencode,0,t.work,ee),t.lenbits=ee.bits,L){r.msg="invalid code lengths set",t.mode=Lr;break}t.have=0,t.mode=Ly;case Ly:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[d&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,O=k&65535,!(T<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(O<16)d>>>=T,p-=T,t.lens[t.have++]=O;else{if(O===16){for(M=T+2;p<M;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(d>>>=T,p-=T,t.have===0){r.msg="invalid bit length repeat",t.mode=Lr;break}U=t.lens[t.have-1],b=3+(d&3),d>>>=2,p-=2}else if(O===17){for(M=T+3;p<M;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=T,p-=T,U=0,b=3+(d&7),d>>>=3,p-=3}else{for(M=T+7;p<M;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=T,p-=T,U=0,b=11+(d&127),d>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Lr;break}for(;b--;)t.lens[t.have++]=U}}if(t.mode===Lr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Lr;break}if(t.lenbits=9,ee={bits:t.lenbits},L=Qf(zw,t.lens,0,t.nlen,t.lencode,0,t.work,ee),t.lenbits=ee.bits,L){r.msg="invalid literal/lengths set",t.mode=Lr;break}if(t.distbits=6,t.distcode=t.distdyn,ee={bits:t.distbits},L=Qf(Pw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ee),t.distbits=ee.bits,L){r.msg="invalid distances set",t.mode=Lr;break}if(t.mode=M1,e===E1)break e;case M1:t.mode=L1;case L1:if(c>=6&&f>=258){r.next_out=u,r.avail_out=f,r.next_in=o,r.avail_in=c,t.hold=d,t.bits=p,lE(r,_),u=r.next_out,a=r.output,f=r.avail_out,o=r.next_in,s=r.input,c=r.avail_in,d=t.hold,p=t.bits,t.mode===_l&&(t.back=-1);break}for(t.back=0;k=t.lencode[d&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,O=k&65535,!(T<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(R&&(R&240)===0){for(V=T,I=R,W=O;k=t.lencode[W+((d&(1<<V+I)-1)>>V)],T=k>>>24,R=k>>>16&255,O=k&65535,!(V+T<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=V,p-=V,t.back+=V}if(d>>>=T,p-=T,t.back+=T,t.length=O,R===0){t.mode=Fy;break}if(R&32){t.back=-1,t.mode=_l;break}if(R&64){r.msg="invalid literal/length code",t.mode=Lr;break}t.extra=R&15,t.mode=Oy;case Oy:if(t.extra){for(M=t.extra;p<M;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Dy;case Dy:for(;k=t.distcode[d&(1<<t.distbits)-1],T=k>>>24,R=k>>>16&255,O=k&65535,!(T<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if((R&240)===0){for(V=T,I=R,W=O;k=t.distcode[W+((d&(1<<V+I)-1)>>V)],T=k>>>24,R=k>>>16&255,O=k&65535,!(V+T<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=V,p-=V,t.back+=V}if(d>>>=T,p-=T,t.back+=T,R&64){r.msg="invalid distance code",t.mode=Lr;break}t.offset=O,t.extra=R&15,t.mode=Ry;case Ry:if(t.extra){for(M=t.extra;p<M;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Lr;break}t.mode=Iy;case Iy:if(f===0)break e;if(b=_-f,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Lr;break}b>t.wnext?(b-=t.wnext,N=t.wsize-b):N=t.wnext-b,b>t.length&&(b=t.length),A=t.window}else A=a,N=u-t.offset,b=t.length;b>f&&(b=f),f-=b,t.length-=b;do a[u++]=A[N++];while(--b);t.length===0&&(t.mode=L1);break;case Fy:if(f===0)break e;a[u++]=t.length,f--,t.mode=L1;break;case jm:if(t.wrap){for(;p<32;){if(c===0)break e;c--,d|=s[o++]<<p,p+=8}if(_-=f,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?zo(t.check,a,_,u-_):vg(t.check,a,_,u-_)),_=f,t.wrap&4&&(t.flags?d:zy(d))!==t.check){r.msg="incorrect data check",t.mode=Lr;break}d=0,p=0}t.mode=Vy;case Vy:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Lr;break}d=0,p=0}t.mode=By;case By:L=gE;break e;case Lr:L=qw;break e;case Hw:return Uw;case Gw:default:return La}return r.next_out=u,r.avail_out=f,r.next_in=o,r.avail_in=c,t.hold=d,t.bits=p,(t.wsize||_!==r.avail_out&&t.mode<Lr&&(t.mode<jm||e!==by))&&Zw(r,r.output,r.next_out,_-r.avail_out),y-=r.avail_in,_-=r.avail_out,r.total_in+=y,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?zo(t.check,a,_,r.next_out-_):vg(t.check,a,_,r.next_out-_)),r.data_type=t.bits+(t.last?64:0)+(t.mode===_l?128:0)+(t.mode===M1||t.mode===km?256:0),(y===0&&_===0||e===by)&&L===xu&&(L=vE),L},TE=r=>{if(Au(r))return La;let e=r.state;return e.window&&(e.window=null),r.state=null,xu},kE=(r,e)=>{if(Au(r))return La;const t=r.state;return(t.wrap&2)===0?La:(t.head=e,e.done=!1,xu)},jE=(r,e)=>{const t=e.length;let s,a,o;return Au(r)||(s=r.state,s.wrap!==0&&s.mode!==Sp)?La:s.mode===Sp&&(a=1,a=vg(a,e,t,0),a!==s.check)?qw:(o=Zw(r,e,t,t),o?(s.mode=Hw,Uw):(s.havedict=1,xu))};var EE=Yw,ME=$w,LE=Ww,OE=NE,DE=Xw,RE=CE,IE=TE,FE=kE,VE=jE,BE="pako inflate (from Nodeca project)",Nl={inflateReset:EE,inflateReset2:ME,inflateResetKeep:LE,inflateInit:OE,inflateInit2:DE,inflate:RE,inflateEnd:IE,inflateGetHeader:FE,inflateSetDictionary:VE,inflateInfo:BE};function zE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var PE=zE;const Qw=Object.prototype.toString,{Z_NO_FLUSH:qE,Z_FINISH:UE,Z_OK:hd,Z_STREAM_END:Lm,Z_NEED_DICT:Om,Z_STREAM_ERROR:HE,Z_DATA_ERROR:qy,Z_MEM_ERROR:GE}=Fw;function kd(r){this.options=Vw.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aE,this.strm.avail_out=0;let t=Nl.inflateInit2(this.strm,e.windowBits);if(t!==hd)throw new Error(yg[t]);if(this.header=new PE,Nl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=xg.string2buf(e.dictionary):Qw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Nl.inflateSetDictionary(this.strm,e.dictionary),t!==hd)))throw new Error(yg[t])}kd.prototype.push=function(r,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?UE:qE,Qw.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=Nl.inflate(t,u),o===Om&&a&&(o=Nl.inflateSetDictionary(t,a),o===hd?o=Nl.inflate(t,u):o===qy&&(o=Om));t.avail_in>0&&o===Lm&&t.state.wrap>0&&r[t.next_in]!==0;)Nl.inflateReset(t),o=Nl.inflate(t,u);switch(o){case HE:case qy:case Om:case GE:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===Lm))if(this.options.to==="string"){let f=xg.utf8border(t.output,t.next_out),d=t.next_out-f,p=xg.buf2string(t.output,f);t.next_out=d,t.avail_out=s-d,d&&t.output.set(t.output.subarray(f,f+d),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===hd&&c===0)){if(o===Lm)return o=Nl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};kd.prototype.onData=function(r){this.chunks.push(r)};kd.prototype.onEnd=function(r){r===hd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vw.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function WE(r,e){const t=new kd(e);if(t.push(r),t.err)throw t.msg||yg[t.err];return t.result}var YE=kd,$E=WE,XE={Inflate:YE,inflate:$E};const{Inflate:ZE,inflate:QE}=XE;var Uy=ZE,KE=QE;const Kw=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Kw[r]=e}const Hy=4294967295;function JE(r,e,t){let s=r;for(let a=0;a<t;a++)s=Kw[(s^e[a])&255]^s>>>8;return s}function eM(r,e){return(JE(Hy,r,e)^Hy)>>>0}function Gy(r,e,t){const s=r.readUint32(),a=eM(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Jw(r,e,t){for(let s=0;s<t;s++)e[s]=r[s]}function e4(r,e,t,s){let a=0;for(;a<s;a++)e[a]=r[a];for(;a<t;a++)e[a]=r[a]+e[a-s]&255}function t4(r,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=r[a];else for(;a<s;a++)e[a]=r[a]+t[a]&255}function n4(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=r[o]+(e[o-a]+t[o]>>1)&255}}function r4(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=r[o]+t[o]&255;for(;o<s;o++)e[o]=r[o]+tM(e[o-a],t[o],t[o-a])&255}}function tM(r,e,t){const s=r+e-t,a=Math.abs(s-r),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?r:o<=u?e:t}function nM(r,e,t,s,a,o){switch(r){case 0:Jw(e,t,a);break;case 1:e4(e,t,a,o);break;case 2:t4(e,t,s,a);break;case 3:n4(e,t,s,a,o);break;case 4:r4(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const rM=new Uint16Array([255]),sM=new Uint8Array(rM.buffer),iM=sM[0]===255;function aM(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(s*t*c);let d=0;for(let p=0;p<7;p++){const y=u[p],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((s-y.y)/y.yStep);if(_<=0||b<=0)continue;const N=_*c,A=new Uint8Array(N);for(let k=0;k<b;k++){const T=e[d++],R=e.subarray(d,d+N);d+=N;const O=new Uint8Array(N);nM(T,R,O,A,N,c),A.set(O);for(let V=0;V<_;V++){const I=y.x+V*y.xStep,W=y.y+k*y.yStep;if(!(I>=t||W>=s))for(let U=0;U<c;U++)f[(W*t+I)*c+U]=O[V*c+U]}}}if(o===16){const p=new Uint16Array(f.buffer);if(iM)for(let y=0;y<p.length;y++)p[y]=oM(p[y]);return p}else return f}function oM(r){return(r&255)<<8|r>>8&255}const lM=new Uint16Array([255]),cM=new Uint8Array(lM.buffer),uM=cM[0]===255,hM=new Uint8Array(0);function Wy(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*t),f=new Uint8Array(s*c);let d=hM,p=0,y,_;for(let b=0;b<s;b++){switch(y=e.subarray(p+1,p+1+c),_=f.subarray(b*c,(b+1)*c),e[p]){case 0:Jw(y,_,c);break;case 1:e4(y,_,c,u);break;case 2:t4(y,_,d,c);break;case 3:n4(y,_,d,c,u);break;case 4:r4(y,_,d,c,u);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}d=_,p+=c+1}if(o===16){const b=new Uint16Array(f.buffer);if(uM)for(let N=0;N<b.length;N++)b[N]=fM(b[N]);return b}else return f}function fM(r){return(r&255)<<8|r>>8&255}const H1=Uint8Array.of(137,80,78,71,13,10,26,10);function Yy(r){if(!dM(r.readBytes(H1.length)))throw new Error("wrong PNG signature")}function dM(r){if(r.length<H1.length)return!1;for(let e=0;e<H1.length;e++)if(r[e]!==H1[e])return!1;return!0}const pM="tEXt",mM=0,s4=new TextDecoder("latin1");function gM(r){if(vM(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const bM=/^[\u0000-\u00FF]*$/;function vM(r){if(!bM.test(r))throw new Error("invalid latin1 text")}function yM(r,e,t){const s=i4(e);r[s]=xM(e,t-s.length-1)}function i4(r){for(r.mark();r.readByte()!==mM;);const e=r.offset;r.reset();const t=s4.decode(r.readBytes(e-r.offset-1));return r.skip(1),gM(t),t}function xM(r,e){return s4.decode(r.readBytes(e))}const ia={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Dm={UNKNOWN:-1,DEFLATE:0},$y={UNKNOWN:-1,ADAPTIVE:0},Rm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},O1={NONE:0,BACKGROUND:1,PREVIOUS:2},Im={SOURCE:0,OVER:1};class wM extends D2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new Uy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Dm.UNKNOWN,this._filterMethod=$y.UNKNOWN,this._interlaceMethod=Rm.UNKNOWN,this._colorType=ia.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Yy(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Yy(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case pM:yM(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Gy(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Gy(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=_M(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case ia.GREYSCALE:s=1;break;case ia.TRUECOLOUR:s=3;break;case ia.INDEXED_COLOUR:s=1;break;case ia.GREYSCALE_ALPHA:s=2;break;case ia.TRUECOLOUR_ALPHA:s=4;break;case ia.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Dm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ia.GREYSCALE:case ia.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ia.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ia.UNKNOWN:case ia.GREYSCALE_ALPHA:case ia.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=i4(this),s=this.readUint8();if(s!==Dm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:KE(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=Wy({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case O1.NONE:break;case O1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[u+c]=0}break;case O1.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const c=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(t.blendOp){case Im.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let d=0;d<this._png.channels;d++)e.data[c+d]=t.data[f+d]}break;case Im.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let d=0;d<this._png.channels;d++){const p=t.data[f+this._png.channels-1]/s,y=d%(this._png.channels-1)===0?1:t.data[f+d],_=Math.floor(p*y+(1-p)*e.data[c+d]);e.data[c+d]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==$y.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Rm.NO_INTERLACE)this._png.data=Wy({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Rm.ADAM7)this._png.data=aM({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:O1.NONE,blendOp:Im.SOURCE,data:e}),this._inflator=new Uy,this._writingDataChunks=!1}}function _M(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Xy;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Xy||(Xy={}));function SM(r,e){return new wM(r,e).decode()}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Fm(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var dr={log:Fm,warn:function(r){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):Fm.call(null,arguments))},error:function(r){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):Fm(r))}};function Vm(r,e,t){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){lu(s.response,e,t)},s.onerror=function(){dr.error("could not download file")},s.send()}function Zy(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function D1(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var lu=en.saveAs||((typeof window>"u"?"undefined":Kn(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var s=en.URL||en.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?Zy(a.href)?Vm(r,e,t):D1(a,a.target="_blank"):D1(a)):(a.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){D1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Zy(r))Vm(r,e,t);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){D1(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Kn(o)!=="object"&&(dr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,t),e)}:function(r,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof r=="string")return Vm(r,e,t);var a=r.type==="application/octet-stream",o=/constructor/i.test(en.HTMLElement)||en.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Kn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=u?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},c.readAsDataURL(r)}else{var f=en.URL||en.webkitURL,d=f.createObjectURL(r);s?s.location=d:location.href=d,s=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});function a4(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(r);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+c+f+d}}var G1=en.atob.bind(en),Qy=en.btoa.bind(en);function Bm(r,e){var t=r[0],s=r[1],a=r[2],o=r[3];t=ni(t,s,a,o,e[0],7,-680876936),o=ni(o,t,s,a,e[1],12,-389564586),a=ni(a,o,t,s,e[2],17,606105819),s=ni(s,a,o,t,e[3],22,-1044525330),t=ni(t,s,a,o,e[4],7,-176418897),o=ni(o,t,s,a,e[5],12,1200080426),a=ni(a,o,t,s,e[6],17,-1473231341),s=ni(s,a,o,t,e[7],22,-45705983),t=ni(t,s,a,o,e[8],7,1770035416),o=ni(o,t,s,a,e[9],12,-1958414417),a=ni(a,o,t,s,e[10],17,-42063),s=ni(s,a,o,t,e[11],22,-1990404162),t=ni(t,s,a,o,e[12],7,1804603682),o=ni(o,t,s,a,e[13],12,-40341101),a=ni(a,o,t,s,e[14],17,-1502002290),t=ri(t,s=ni(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ri(o,t,s,a,e[6],9,-1069501632),a=ri(a,o,t,s,e[11],14,643717713),s=ri(s,a,o,t,e[0],20,-373897302),t=ri(t,s,a,o,e[5],5,-701558691),o=ri(o,t,s,a,e[10],9,38016083),a=ri(a,o,t,s,e[15],14,-660478335),s=ri(s,a,o,t,e[4],20,-405537848),t=ri(t,s,a,o,e[9],5,568446438),o=ri(o,t,s,a,e[14],9,-1019803690),a=ri(a,o,t,s,e[3],14,-187363961),s=ri(s,a,o,t,e[8],20,1163531501),t=ri(t,s,a,o,e[13],5,-1444681467),o=ri(o,t,s,a,e[2],9,-51403784),a=ri(a,o,t,s,e[7],14,1735328473),t=si(t,s=ri(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=si(o,t,s,a,e[8],11,-2022574463),a=si(a,o,t,s,e[11],16,1839030562),s=si(s,a,o,t,e[14],23,-35309556),t=si(t,s,a,o,e[1],4,-1530992060),o=si(o,t,s,a,e[4],11,1272893353),a=si(a,o,t,s,e[7],16,-155497632),s=si(s,a,o,t,e[10],23,-1094730640),t=si(t,s,a,o,e[13],4,681279174),o=si(o,t,s,a,e[0],11,-358537222),a=si(a,o,t,s,e[3],16,-722521979),s=si(s,a,o,t,e[6],23,76029189),t=si(t,s,a,o,e[9],4,-640364487),o=si(o,t,s,a,e[12],11,-421815835),a=si(a,o,t,s,e[15],16,530742520),t=ii(t,s=si(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=ii(o,t,s,a,e[7],10,1126891415),a=ii(a,o,t,s,e[14],15,-1416354905),s=ii(s,a,o,t,e[5],21,-57434055),t=ii(t,s,a,o,e[12],6,1700485571),o=ii(o,t,s,a,e[3],10,-1894986606),a=ii(a,o,t,s,e[10],15,-1051523),s=ii(s,a,o,t,e[1],21,-2054922799),t=ii(t,s,a,o,e[8],6,1873313359),o=ii(o,t,s,a,e[15],10,-30611744),a=ii(a,o,t,s,e[6],15,-1560198380),s=ii(s,a,o,t,e[13],21,1309151649),t=ii(t,s,a,o,e[4],6,-145523070),o=ii(o,t,s,a,e[11],10,-1120210379),a=ii(a,o,t,s,e[2],15,718787259),s=ii(s,a,o,t,e[9],21,-343485551),r[0]=wc(t,r[0]),r[1]=wc(s,r[1]),r[2]=wc(a,r[2]),r[3]=wc(o,r[3])}function Jp(r,e,t,s,a,o){return e=wc(wc(e,r),wc(s,o)),wc(e<<a|e>>>32-a,t)}function ni(r,e,t,s,a,o,u){return Jp(e&t|~e&s,r,e,a,o,u)}function ri(r,e,t,s,a,o,u){return Jp(e&s|t&~s,r,e,a,o,u)}function si(r,e,t,s,a,o,u){return Jp(e^t^s,r,e,a,o,u)}function ii(r,e,t,s,a,o,u){return Jp(t^(e|~s),r,e,a,o,u)}function o4(r){var e,t=r.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Bm(s,NM(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Bm(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Bm(s,a),s}function NM(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var Ky="0123456789abcdef".split("");function AM(r){for(var e="",t=0;t<4;t++)e+=Ky[r>>8*t+4&15]+Ky[r>>8*t&15];return e}function CM(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function wg(r){return o4(r).map(CM).join("")}var TM=(function(r){for(var e=0;e<r.length;e++)r[e]=AM(r[e]);return r.join("")})(o4("hello"))!="5d41402abc4b2a76b9719d911017c592";function wc(r,e){if(TM){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}function _g(r,e){var t,s,a,o;if(r!==t){for(var u=(a=r,o=1+(256/r.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var d=0;for(f=0;f<256;f++){var p=c[f];d=(d+p+u.charCodeAt(f))%256,c[f]=c[d],c[d]=p}t=r,s=c}else c=s;var y=e.length,_=0,b=0,N="";for(f=0;f<y;f++)b=(b+(p=c[_=(_+1)%256]))%256,c[_]=c[b],c[b]=p,u=c[(c[_]+c[b])%256],N+=String.fromCharCode(e.charCodeAt(f)^u);return N}var Jy={print:4,modify:8,copy:16,"annot-forms":32};function yh(r,e,t,s){this.v=1,this.r=2;var a=192;r.forEach(function(c){if(Jy.perm!==void 0)throw new Error("Invalid permission: "+c);a+=Jy[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=wg(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=_g(this.encryptionKey,this.padding)}function xh(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,s=0;s<t;s++){var a=r.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[s]}return e}function ex(r){if(Kn(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(r,s)}catch(c){en.console&&dr.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Np(r){if(!(this instanceof Np))return new Np(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function l4(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function uu(r,e,t,s,a){if(!(this instanceof uu))return new uu(r,e,t,s,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,l4.call(this,s,a)}function Nh(r,e,t,s,a){if(!(this instanceof Nh))return new Nh(r,e,t,s,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,l4.call(this,s,a)}function It(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,d="S",p=null;Kn(r=r||{})==="object"&&(t=r.orientation,s=r.unit||s,a=r.format||a,o=r.compress||r.compressPdf||o,(p=r.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(f=r.floatPrecision),d=r.defaultPathOperation||"S"),u=r.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var y=r.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=ex;var N="1.3",A=b.__private__.getPdfVersion=function(){return N};b.__private__.setPdfVersion=function(S){N=S};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var T=b.__private__.getPageFormat=function(S){return k[S]};a=a||"a4";var R="compat",O="advanced",V=R;function I(){this.saveGraphicsState(),Y(new lt(bt,0,0,-bt,0,Ba()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),d="n",V=O}function W(){this.restoreGraphicsState(),d="S",V=R}var U=b.__private__.combineFontStyleAndFontWeight=function(S,P){if(S=="bold"&&P=="normal"||S=="bold"&&P==400||S=="normal"&&P=="italic"||S=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(S=P==400||P==="normal"?S==="italic"?"italic":"normal":P!=700&&P!=="bold"||S!=="normal"?(P==700?"bold":P)+""+S:"bold"),S};b.advancedAPI=function(S){var P=V===R;return P&&I.call(this),typeof S!="function"||(S(this),P&&W.call(this)),this},b.compatAPI=function(S){var P=V===O;return P&&W.call(this),typeof S!="function"||(S(this),P&&I.call(this)),this},b.isAdvancedAPI=function(){return V===O};var L,B=function(S){if(V!==O)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=b.roundToPrecision=b.__private__.roundToPrecision=function(S,P){var de=e||P;if(isNaN(S)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(de).replace(/0+$/,"")};L=b.hpf=b.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(S,16)};var M=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return ee(S,2)},F=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return ee(S,3)},J=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return V===R?S*bt:V===O?S:void 0},te=function(S){return J((function(P){return V===R?Ba()-P:V===O?P:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var ae,H="00000000000000000000000000000000",se=b.__private__.getFileId=function(){return H},Q=b.__private__.setFileId=function(S){return H=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Rr=new yh(p.userPermissions,p.userPassword,p.ownerPassword,H)),H};b.setFileId=function(S){return Q(S),this},b.getFileId=function(){return se()};var ge=b.__private__.convertDateToPDFDate=function(S){var P=S.getTimezoneOffset(),de=P<0?"+":"-",ve=Math.floor(Math.abs(P/60)),Ae=Math.abs(P%60),Ue=[de,X(ve),"'",X(Ae),"'"].join("");return["D:",S.getFullYear(),X(S.getMonth()+1),X(S.getDate()),X(S.getHours()),X(S.getMinutes()),X(S.getSeconds()),Ue].join("")},ue=b.__private__.convertPDFDateToDate=function(S){var P=parseInt(S.substr(2,4),10),de=parseInt(S.substr(6,2),10)-1,ve=parseInt(S.substr(8,2),10),Ae=parseInt(S.substr(10,2),10),Ue=parseInt(S.substr(12,2),10),Je=parseInt(S.substr(14,2),10);return new Date(P,de,ve,Ae,Ue,Je,0)},G=b.__private__.setCreationDate=function(S){var P;if(S===void 0&&(S=new Date),S instanceof Date)P=ge(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=S}return ae=P},j=b.__private__.getCreationDate=function(S){var P=ae;return S==="jsDate"&&(P=ue(ae)),P};b.setCreationDate=function(S){return G(S),this},b.getCreationDate=function(S){return j(S)};var z,X=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ie=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ce=0,pe=[],me=[],Ne=0,we=[],Ve=[],Ge=!1,nt=me;b.__private__.setCustomOutputDestination=function(S){Ge=!0,nt=S};var st=function(S){Ge||(nt=S)};b.__private__.resetCustomOutputDestination=function(){Ge=!1,nt=me};var Y=b.__private__.out=function(S){return S=S.toString(),Ne+=S.length+1,nt.push(S),nt},De=b.__private__.write=function(S){return Y(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},dt=b.__private__.getArrayBuffer=function(S){for(var P=S.length,de=new ArrayBuffer(P),ve=new Uint8Array(de);P--;)ve[P]=S.charCodeAt(P);return de},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return et};var Me=r.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return Me=V===O?S/bt:S,this};var it,We=b.__private__.getFontSize=b.getFontSize=function(){return V===R?Me:Me*bt},ot=r.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return ot=S,this},b.__private__.getR2L=b.getR2L=function(){return ot};var rt,Fe=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))it=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');it=S}else it=parseInt(S,10)};b.__private__.getZoomMode=function(){return it};var tt,Ke=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');rt=S};b.__private__.getPageMode=function(){return rt};var ct=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');tt=S};b.__private__.getLayoutMode=function(){return tt},b.__private__.setDisplayMode=b.setDisplayMode=function(S,P,de){return Fe(S),ct(P),Ke(de),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(yt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[S]},b.__private__.getDocumentProperties=function(){return yt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var P in yt)yt.hasOwnProperty(P)&&S[P]&&(yt[P]=S[P]);return this},b.__private__.setDocumentProperty=function(S,P){if(Object.keys(yt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[S]=P};var mt,bt,ut,rn,Vt,Nt={},xt={},Tt=[],vt={},an={},Et={},Ft={},gn=null,At=0,ft=[],le=new ex(b),Pe=r.hotfixes||[],Qe={},ht={},wt=[],lt=function S(P,de,ve,Ae,Ue,Je){if(!(this instanceof S))return new S(P,de,ve,Ae,Ue,Je);isNaN(P)&&(P=1),isNaN(de)&&(de=0),isNaN(ve)&&(ve=0),isNaN(Ae)&&(Ae=1),isNaN(Ue)&&(Ue=0),isNaN(Je)&&(Je=0),this._matrix=[P,de,ve,Ae,Ue,Je]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(S)},lt.prototype.multiply=function(S){var P=S.sx*this.sx+S.shy*this.shx,de=S.sx*this.shy+S.shy*this.sy,ve=S.shx*this.sx+S.sy*this.shx,Ae=S.shx*this.shy+S.sy*this.sy,Ue=S.tx*this.sx+S.ty*this.shx+this.tx,Je=S.tx*this.shy+S.ty*this.sy+this.ty;return new lt(P,de,ve,Ae,Ue,Je)},lt.prototype.decompose=function(){var S=this.sx,P=this.shy,de=this.shx,ve=this.sy,Ae=this.tx,Ue=this.ty,Je=Math.sqrt(S*S+P*P),kt=(S/=Je)*de+(P/=Je)*ve;de-=S*kt,ve-=P*kt;var Dt=Math.sqrt(de*de+ve*ve);return kt/=Dt,S*(ve/=Dt)<P*(de/=Dt)&&(S=-S,P=-P,kt=-kt,Je=-Je),{scale:new lt(Je,0,0,Dt,0,0),translate:new lt(1,0,0,1,Ae,Ue),rotate:new lt(S,P,-P,S,0,0),skew:new lt(1,0,kt,1,0,0)}},lt.prototype.toString=function(S){return this.join(" ")},lt.prototype.inversed=function(){var S=this.sx,P=this.shy,de=this.shx,ve=this.sy,Ae=this.tx,Ue=this.ty,Je=1/(S*ve-P*de),kt=ve*Je,Dt=-P*Je,Yt=-de*Je,on=S*Je;return new lt(kt,Dt,Yt,on,-kt*Ae-Yt*Ue,-Dt*Ae-on*Ue)},lt.prototype.applyToPoint=function(S){var P=S.x*this.sx+S.y*this.shx+this.tx,de=S.x*this.shy+S.y*this.sy+this.ty;return new Ni(P,de)},lt.prototype.applyToRectangle=function(S){var P=this.applyToPoint(S),de=this.applyToPoint(new Ni(S.x+S.w,S.y+S.h));return new Da(P.x,P.y,de.x-P.x,de.y-P.y)},lt.prototype.clone=function(){var S=this.sx,P=this.shy,de=this.shx,ve=this.sy,Ae=this.tx,Ue=this.ty;return new lt(S,P,de,ve,Ae,Ue)},b.Matrix=lt;var Zt=b.matrixMult=function(S,P){return P.multiply(S)},Cn=new lt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Cn;var xn=function(S,P){if(!an[S]){var de=(P instanceof uu?"Sh":"P")+(Object.keys(vt).length+1).toString(10);P.id=de,an[S]=de,vt[de]=P,le.publish("addPattern",P)}};b.ShadingPattern=uu,b.TilingPattern=Nh,b.addShadingPattern=function(S,P){return B("addShadingPattern()"),xn(S,P),this},b.beginTilingPattern=function(S){B("beginTilingPattern()"),Jo(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,P){B("endTilingPattern()"),P.stream=Ve[z].join(`
`),xn(S,P),le.publish("endTilingPattern",P),wt.pop().restore()};var tn,Kt=b.__private__.newObject=function(){var S=fn();return Qt(S,!0),S},fn=b.__private__.newObjectDeferred=function(){return ce++,pe[ce]=function(){return Ne},ce},Qt=function(S,P){return P=typeof P=="boolean"&&P,pe[S]=Ne,P&&Y(S+" 0 obj"),S},$n=b.__private__.newAdditionalObject=function(){var S={objId:fn(),content:""};return we.push(S),S},lr=fn(),vn=fn(),Bn=b.__private__.decodeColorString=function(S){var P=S.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length!==5||P[4]!=="k"&&P[4]!=="K"||(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var de=parseFloat(P[0]);P=[de,de,de,"r"]}for(var ve="#",Ae=0;Ae<3;Ae++)ve+=("0"+Math.floor(255*parseFloat(P[Ae])).toString(16)).slice(-2);return ve},dn=b.__private__.encodeColorString=function(S){var P;typeof S=="string"&&(S={ch1:S});var de=S.ch1,ve=S.ch2,Ae=S.ch3,Ue=S.ch4,Je=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var kt=new a4(de);if(kt.ok)de=kt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var Dt=parseInt(de.substr(1),16);de=Dt>>16&255,ve=Dt>>8&255,Ae=255&Dt}if(ve===void 0||Ue===void 0&&de===ve&&ve===Ae)P=typeof de=="string"?de+" "+Je[0]:S.precision===2?M(de/255)+" "+Je[0]:F(de/255)+" "+Je[0];else if(Ue===void 0||Kn(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return["1.","1.","1.",Je[1]].join(" ");P=typeof de=="string"?[de,ve,Ae,Je[1]].join(" "):S.precision===2?[M(de/255),M(ve/255),M(Ae/255),Je[1]].join(" "):[F(de/255),F(ve/255),F(Ae/255),Je[1]].join(" ")}else P=typeof de=="string"?[de,ve,Ae,Ue,Je[2]].join(" "):S.precision===2?[M(de),M(ve),M(Ae),M(Ue),Je[2]].join(" "):[F(de),F(ve),F(Ae),F(Ue),Je[2]].join(" ");return P},sn=b.__private__.getFilters=function(){return u},Se=b.__private__.putStream=function(S){var P=(S=S||{}).data||"",de=S.filters||sn(),ve=S.alreadyAppliedFilters||[],Ae=S.addLength1||!1,Ue=P.length,Je=S.objectId,kt=function(Jr){return Jr};if(p!==null&&Je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(kt=Rr.encryptor(Je,0));var Dt={};de===!0&&(de=["FlateEncode"]);var Yt=S.additionalKeyValues||[],on=(Dt=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(P,de):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(Dt.data.length!==0&&(Yt.push({key:"Length",value:Dt.data.length}),Ae===!0&&Yt.push({key:"Length1",value:Ue})),on.length!=0)if(on.split("/").length-1==1)Yt.push({key:"Filter",value:on});else{Yt.push({key:"Filter",value:"["+on+"]"});for(var Ln=0;Ln<Yt.length;Ln+=1)if(Yt[Ln].key==="DecodeParms"){for(var br=[],Ir=0;Ir<Dt.reverseChain.split("/").length-1;Ir+=1)br.push("null");br.push(Yt[Ln].value),Yt[Ln].value="["+br.join(" ")+"]"}}Y("<<");for(var er=0;er<Yt.length;er++)Y("/"+Yt[er].key+" "+Yt[er].value);Y(">>"),Dt.data.length!==0&&(Y("stream"),Y(kt(Dt.data)),Y("endstream"))},Re=b.__private__.putPage=function(S){var P=S.number,de=S.data,ve=S.objId,Ae=S.contentsObjId;Qt(ve,!0),Y("<</Type /Page"),Y("/Parent "+S.rootDictionaryObjId+" 0 R"),Y("/Resources "+S.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(L(S.mediaBox.bottomLeftX))+" "+parseFloat(L(S.mediaBox.bottomLeftY))+" "+L(S.mediaBox.topRightX)+" "+L(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&Y("/CropBox ["+L(S.cropBox.bottomLeftX)+" "+L(S.cropBox.bottomLeftY)+" "+L(S.cropBox.topRightX)+" "+L(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&Y("/BleedBox ["+L(S.bleedBox.bottomLeftX)+" "+L(S.bleedBox.bottomLeftY)+" "+L(S.bleedBox.topRightX)+" "+L(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&Y("/TrimBox ["+L(S.trimBox.bottomLeftX)+" "+L(S.trimBox.bottomLeftY)+" "+L(S.trimBox.topRightX)+" "+L(S.trimBox.topRightY)+"]"),S.artBox!==null&&Y("/ArtBox ["+L(S.artBox.bottomLeftX)+" "+L(S.artBox.bottomLeftY)+" "+L(S.artBox.topRightX)+" "+L(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&Y("/UserUnit "+S.userUnit),le.publish("putPage",{objId:ve,pageContext:ft[P],pageNumber:P,page:de}),Y("/Contents "+Ae+" 0 R"),Y(">>"),Y("endobj");var Ue=de.join(`
`);return V===O&&(Ue+=`
Q`),Qt(Ae,!0),Se({data:Ue,filters:sn(),objectId:Ae}),Y("endobj"),ve},$e=b.__private__.putPages=function(){var S,P,de=[];for(S=1;S<=At;S++)ft[S].objId=fn(),ft[S].contentsObjId=fn();for(S=1;S<=At;S++)de.push(Re({number:S,data:Ve[S],objId:ft[S].objId,contentsObjId:ft[S].contentsObjId,mediaBox:ft[S].mediaBox,cropBox:ft[S].cropBox,bleedBox:ft[S].bleedBox,trimBox:ft[S].trimBox,artBox:ft[S].artBox,userUnit:ft[S].userUnit,rootDictionaryObjId:lr,resourceDictionaryObjId:vn}));Qt(lr,!0),Y("<</Type /Pages");var ve="/Kids [";for(P=0;P<At;P++)ve+=de[P]+" 0 R ";Y(ve+"]"),Y("/Count "+At),Y(">>"),Y("endobj"),le.publish("postPutPages")},gt=function(S){le.publish("putFont",{font:S,out:Y,newObject:Kt,putStream:Se}),S.isAlreadyPutted!==!0&&(S.objectNumber=Kt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+xh(S.postScriptName)),Y("/Subtype /Type1"),typeof S.encoding=="string"&&Y("/Encoding /"+S.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},$t=function(S){S.objectNumber=Kt();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[L(S.x),L(S.y),L(S.x+S.width),L(S.y+S.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var de=S.pages[1].join(`
`);Se({data:de,additionalKeyValues:P,objectId:S.objectNumber}),Y("endobj")},Bt=function(S,P){P||(P=21);var de=Kt(),ve=(function(Je,kt){var Dt,Yt=[],on=1/(kt-1);for(Dt=0;Dt<1;Dt+=on)Yt.push(Dt);if(Yt.push(1),Je[0].offset!=0){var Ln={offset:0,color:Je[0].color};Je.unshift(Ln)}if(Je[Je.length-1].offset!=1){var br={offset:1,color:Je[Je.length-1].color};Je.push(br)}for(var Ir="",er=0,Jr=0;Jr<Yt.length;Jr++){for(Dt=Yt[Jr];Dt>Je[er+1].offset;)er++;var qr=Je[er].offset,vs=(Dt-qr)/(Je[er+1].offset-qr),za=Je[er].color,Zi=Je[er+1].color;Ir+=ie(Math.round((1-vs)*za[0]+vs*Zi[0]).toString(16))+ie(Math.round((1-vs)*za[1]+vs*Zi[1]).toString(16))+ie(Math.round((1-vs)*za[2]+vs*Zi[2]).toString(16))}return Ir.trim()})(S.colors,P),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+P+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Se({data:ve,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),Y("endobj"),S.objectNumber=Kt(),Y("<< /ShadingType "+S.type),Y("/ColorSpace /DeviceRGB");var Ue="/Coords ["+L(parseFloat(S.coords[0]))+" "+L(parseFloat(S.coords[1]))+" ";S.type===2?Ue+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3])):Ue+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3]))+" "+L(parseFloat(S.coords[4]))+" "+L(parseFloat(S.coords[5])),Y(Ue+="]"),S.matrix&&Y("/Matrix ["+S.matrix.toString()+"]"),Y("/Function "+de+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},wn=function(S,P){var de=fn(),ve=Kt();P.push({resourcesOid:de,objectOid:ve}),S.objectNumber=ve;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+S.boundingBox.map(L).join(" ")+"]"}),Ae.push({key:"XStep",value:L(S.xStep)}),Ae.push({key:"YStep",value:L(S.yStep)}),Ae.push({key:"Resources",value:de+" 0 R"}),S.matrix&&Ae.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Se({data:S.stream,additionalKeyValues:Ae,objectId:S.objectNumber}),Y("endobj")},Jn=function(S){for(var P in S.objectNumber=Kt(),Y("<<"),S)switch(P){case"opacity":Y("/ca "+M(S[P]));break;case"stroke-opacity":Y("/CA "+M(S[P]))}Y(">>"),Y("endobj")},cr=function(S){Qt(S.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var P in Y("/Font <<"),Nt)Nt.hasOwnProperty(P)&&(y===!1||y===!0&&_.hasOwnProperty(P))&&Y("/"+P+" "+Nt[P].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(vt).length>0){for(var P in Y("/Shading <<"),vt)vt.hasOwnProperty(P)&&vt[P]instanceof uu&&vt[P].objectNumber>=0&&Y("/"+P+" "+vt[P].objectNumber+" 0 R");le.publish("putShadingPatternDict"),Y(">>")}})(),(function(P){if(Object.keys(vt).length>0){for(var de in Y("/Pattern <<"),vt)vt.hasOwnProperty(de)&&vt[de]instanceof b.TilingPattern&&vt[de].objectNumber>=0&&vt[de].objectNumber<P&&Y("/"+de+" "+vt[de].objectNumber+" 0 R");le.publish("putTilingPatternDict"),Y(">>")}})(S.objectOid),(function(){if(Object.keys(Et).length>0){var P;for(P in Y("/ExtGState <<"),Et)Et.hasOwnProperty(P)&&Et[P].objectNumber>=0&&Y("/"+P+" "+Et[P].objectNumber+" 0 R");le.publish("putGStateDict"),Y(">>")}})(),(function(){for(var P in Y("/XObject <<"),Qe)Qe.hasOwnProperty(P)&&Qe[P].objectNumber>=0&&Y("/"+P+" "+Qe[P].objectNumber+" 0 R");le.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},Tn=function(S){xt[S.fontName]=xt[S.fontName]||{},xt[S.fontName][S.fontStyle]=S.id},li=function(S,P,de,ve,Ae){var Ue={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:S,fontName:P,fontStyle:de,encoding:ve,isStandardFont:Ae||!1,metadata:{}};return le.publish("addFont",{font:Ue,instance:this}),Nt[Ue.id]=Ue,Tn(Ue),Ue.id},Dr=b.__private__.pdfEscape=b.pdfEscape=function(S,P){return(function(de,ve){var Ae,Ue,Je,kt,Dt,Yt,on,Ln,br;if(Je=(ve=ve||{}).sourceEncoding||"Unicode",Dt=ve.outputEncoding,(ve.autoencode||Dt)&&Nt[mt].metadata&&Nt[mt].metadata[Je]&&Nt[mt].metadata[Je].encoding&&(kt=Nt[mt].metadata[Je].encoding,!Dt&&Nt[mt].encoding&&(Dt=Nt[mt].encoding),!Dt&&kt.codePages&&(Dt=kt.codePages[0]),typeof Dt=="string"&&(Dt=kt[Dt]),Dt)){for(on=!1,Yt=[],Ae=0,Ue=de.length;Ae<Ue;Ae++)(Ln=Dt[de.charCodeAt(Ae)])?Yt.push(String.fromCharCode(Ln)):Yt.push(de[Ae]),Yt[Ae].charCodeAt(0)>>8&&(on=!0);de=Yt.join("")}for(Ae=de.length;on===void 0&&Ae!==0;)de.charCodeAt(Ae-1)>>8&&(on=!0),Ae--;if(!on)return de;for(Yt=ve.noBOM?[]:[254,255],Ae=0,Ue=de.length;Ae<Ue;Ae++){if((br=(Ln=de.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yt.push(br),Yt.push(Ln-(br<<8))}return String.fromCharCode.apply(void 0,Yt)})(S,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pr=b.__private__.beginPage=function(S){Ve[++At]=[],ft[At]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},ci(At),st(Ve[z])},Kr=function(S,P){var de,ve,Ae;switch(t=P||t,typeof S=="string"&&(de=T(S.toLowerCase()),Array.isArray(de)&&(ve=de[0],Ae=de[1])),Array.isArray(S)&&(ve=S[0]*bt,Ae=S[1]*bt),isNaN(ve)&&(ve=a[0],Ae=a[1]),(ve>14400||Ae>14400)&&(dr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Ae=Math.min(14400,Ae)),a=[ve,Ae],t.substr(0,1)){case"l":Ae>ve&&(a=[Ae,ve]);break;case"p":ve>Ae&&(a=[Ae,ve])}Pr(a),Ut(Zo),Y(fi),Fl!==0&&Y(Fl+" J"),as!==0&&Y(as+" j"),le.publish("addPage",{pageNumber:At})},ms=function(S){S>0&&S<=At&&(Ve.splice(S,1),ft.splice(S,1),At--,z>At&&(z=At),this.setPage(z))},ci=function(S){S>0&&S<=At&&(z=S)},ui=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ve.length-1},wi=function(S,P,de){var ve,Ae=void 0;return de=de||{},S=S!==void 0?S:Nt[mt].fontName,P=P!==void 0?P:Nt[mt].fontStyle,ve=S.toLowerCase(),xt[ve]!==void 0&&xt[ve][P]!==void 0?Ae=xt[ve][P]:xt[S]!==void 0&&xt[S][P]!==void 0?Ae=xt[S][P]:de.disableWarning===!1&&dr.warn("Unable to look up font label for font '"+S+"', '"+P+"'. Refer to getFontList() for available fonts."),Ae||de.noFallback||(Ae=xt.times[P])==null&&(Ae=xt.times.normal),Ae},js=b.__private__.putInfo=function(){var S=Kt(),P=function(ve){return ve};for(var de in p!==null&&(P=Rr.encryptor(S,0)),Y("<<"),Y("/Producer ("+Dr(P("jsPDF "+It.version))+")"),yt)yt.hasOwnProperty(de)&&yt[de]&&Y("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+Dr(P(yt[de]))+")");Y("/CreationDate ("+Dr(P(ae))+")"),Y(">>"),Y("endobj")},ha=b.__private__.putCatalog=function(S){var P=(S=S||{}).rootDictionaryObjId||lr;switch(Kt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+P+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+it;de.substr(de.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+M(it)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}rt&&Y("/PageMode /"+rt),le.publish("putCatalog"),Y(">>"),Y("endobj")},Qs=b.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(ce+1)),Y("/Root "+ce+" 0 R"),Y("/Info "+(ce-1)+" 0 R"),p!==null&&Y("/Encrypt "+Rr.oid+" 0 R"),Y("/ID [ <"+H+"> <"+H+"> ]"),Y(">>")},kn=b.__private__.putHeader=function(){Y("%PDF-"+N),Y("%")},yo=b.__private__.putXRef=function(){var S="0000000000";Y("xref"),Y("0 "+(ce+1)),Y("0000000000 65535 f ");for(var P=1;P<=ce;P++)typeof pe[P]=="function"?Y((S+pe[P]()).slice(-10)+" 00000 n "):pe[P]!==void 0?Y((S+pe[P]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},_i=b.__private__.buildDocument=function(){var S;ce=0,Ne=0,me=[],pe=[],we=[],lr=fn(),vn=fn(),st(me),le.publish("buildDocument"),kn(),$e(),(function(){le.publish("putAdditionalObjects");for(var de=0;de<we.length;de++){var ve=we[de];Qt(ve.objId,!0),Y(ve.content),Y("endobj")}le.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var de in Nt)Nt.hasOwnProperty(de)&&(y===!1||y===!0&&_.hasOwnProperty(de))&&gt(Nt[de])})(),(function(){var de;for(de in Et)Et.hasOwnProperty(de)&&Jn(Et[de])})(),(function(){for(var de in Qe)Qe.hasOwnProperty(de)&&$t(Qe[de])})(),(function(de){var ve;for(ve in vt)vt.hasOwnProperty(ve)&&(vt[ve]instanceof uu?Bt(vt[ve]):vt[ve]instanceof Nh&&wn(vt[ve],de))})(S),le.publish("putResources"),S.forEach(cr),cr({resourcesOid:vn,objectOid:Number.MAX_SAFE_INTEGER}),le.publish("postPutResources"),p!==null&&(Rr.oid=Kt(),Y("<<"),Y("/Filter /Standard"),Y("/V "+Rr.v),Y("/R "+Rr.r),Y("/U <"+Rr.toHexString(Rr.U)+">"),Y("/O <"+Rr.toHexString(Rr.O)+">"),Y("/P "+Rr.P),Y(">>"),Y("endobj")),js(),ha();var P=Ne;return yo(),Qs(),Y("startxref"),Y(""+P),Y("%%EOF"),st(Ve[z]),me.join(`
`)},Yi=b.__private__.getBlob=function(S){return new Blob([dt(S)],{type:"application/pdf"})},xo=b.output=b.__private__.output=(tn=function(S,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",S){case void 0:return _i();case"save":b.save(P.filename);break;case"arraybuffer":return dt(_i());case"blob":return Yi(_i());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(Yi(_i()))||void 0;dr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",ve=_i();try{de=Qy(ve)}catch{de=Qy(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+P.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(Ae=P.pdfObjectUrl,Ue="");var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",kt=en.open();return kt!==null&&kt.document.write(Je),kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',Yt=en.open();if(Yt!==null){Yt.document.write(Dt);var on=this;Yt.document.documentElement.querySelector("#pdfViewer").onload=function(){Yt.document.title=P.filename,Yt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(on.output("bloburl"))}}return Yt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',br=en.open();if(br!==null&&(br.document.write(Ln),br.document.title=P.filename),br||typeof safari>"u")return br;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",P);default:return null}},tn.foo=function(){try{return tn.apply(this,arguments)}catch(de){var S=de.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var P="Error in function "+S.split(`
`)[0].split("<")[0]+": "+de.message;if(!en.console)throw new Error(P);en.console.error(P,de),en.alert&&alert(P)}},tn.foo.bar=tn,tn.foo),gs=function(S){return Array.isArray(Pe)===!0&&Pe.indexOf(S)>-1};switch(s){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=gs("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);bt=s}var Rr=null;G(),Q();var Cr=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ft[S].objId,pageNumber:S,pageContext:ft[S]}},wo=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in ft)if(ft[P].objId===S)break;return Cr(P)},Rl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:ft[z].objId,pageNumber:z,pageContext:ft[z]}};b.addPage=function(){return Kr.apply(this,arguments),this},b.setPage=function(){return ci.apply(this,arguments),st.call(this,Ve[z]),this},b.insertPage=function(S){return this.addPage(),this.movePage(z,S),this},b.movePage=function(S,P){var de,ve;if(S>P){de=Ve[S],ve=ft[S];for(var Ae=S;Ae>P;Ae--)Ve[Ae]=Ve[Ae-1],ft[Ae]=ft[Ae-1];Ve[P]=de,ft[P]=ve,this.setPage(P)}else if(S<P){de=Ve[S],ve=ft[S];for(var Ue=S;Ue<P;Ue++)Ve[Ue]=Ve[Ue+1],ft[Ue]=ft[Ue+1];Ve[P]=de,ft[P]=ve,this.setPage(P)}return this},b.deletePage=function(){return ms.apply(this,arguments),this},b.__private__.text=b.text=function(S,P,de,ve,Ae){var Ue,Je,kt,Dt,Yt,on,Ln,br,Ir,er=(ve=ve||{}).scope||this;if(typeof S=="number"&&typeof P=="number"&&(typeof de=="string"||Array.isArray(de))){var Jr=de;de=P,P=S,S=Jr}if(arguments[3]instanceof lt==0?(kt=arguments[4],Dt=arguments[5],Kn(Ln=arguments[3])==="object"&&Ln!==null||(typeof kt=="string"&&(Dt=kt,kt=null),typeof Ln=="string"&&(Dt=Ln,Ln=null),typeof Ln=="number"&&(kt=Ln,Ln=null),ve={flags:Ln,angle:kt,align:Dt})):(B("The transform parameter of text() with a Matrix value"),Ir=Ae),isNaN(P)||isNaN(de)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return er;var qr,vs="",za=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:Oa,Zi=er.internal.scaleFactor;function Pa(zn){return zn=zn.split("	").join(Array(ve.TabLen||9).join(" ")),Dr(zn,Ln)}function Pc(zn){for(var On,tr=zn.concat(),Vr=[],wa=tr.length;wa--;)typeof(On=tr.shift())=="string"?Vr.push(On):Array.isArray(zn)&&(On.length===1||On[1]===void 0&&On[2]===void 0)?Vr.push(On[0]):Vr.push([On[0],On[1],On[2]]);return Vr}function Bl(zn,On){var tr;if(typeof zn=="string")tr=On(zn)[0];else if(Array.isArray(zn)){for(var Vr,wa,ea=zn.concat(),rl=[],Hc=ea.length;Hc--;)typeof(Vr=ea.shift())=="string"?rl.push(On(Vr)[0]):Array.isArray(Vr)&&typeof Vr[0]=="string"&&(wa=On(Vr[0],Vr[1],Vr[2]),rl.push([wa[0],wa[1],wa[2]]));tr=rl}return tr}var pa=!1,Qi=!0;if(typeof S=="string")pa=!0;else if(Array.isArray(S)){var tl=S.concat();Je=[];for(var qa,os=tl.length;os--;)(typeof(qa=tl.shift())!="string"||Array.isArray(qa)&&typeof qa[0]!="string")&&(Qi=!1);pa=Qi}if(pa===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var So=Me/er.internal.scaleFactor,No=So*(za-1);switch(ve.baseline){case"bottom":de-=No;break;case"top":de+=So-No;break;case"hanging":de+=So-2*No;break;case"middle":de+=So/2-No}if((on=ve.maxWidth||0)>0&&(typeof S=="string"?S=er.splitTextToSize(S,on):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(zn,On){return zn.concat(er.splitTextToSize(On,on))},[]))),Ue={text:S,x:P,y:de,options:ve,mutex:{pdfEscape:Dr,activeFontKey:mt,fonts:Nt,activeFontSize:Me}},le.publish("preProcessText",Ue),S=Ue.text,kt=(ve=Ue.options).angle,Ir instanceof lt==0&&kt&&typeof kt=="number"){kt*=Math.PI/180,ve.rotationDirection===0&&(kt=-kt),V===O&&(kt=-kt);var zl=Math.cos(kt),ma=Math.sin(kt);Ir=new lt(zl,ma,-ma,zl,0,0)}else kt&&kt instanceof lt&&(Ir=kt);V!==O||Ir||(Ir=Cn),(Yt=ve.charSpace||Si)!==void 0&&(vs+=L(J(Yt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(br=ve.horizontalScale)!==void 0&&(vs+=L(100*br)+` Tz
`),ve.lang;var qs=-1,Ua=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Pl=er.internal.getCurrentPageInfo().pageContext;switch(Ua){case 0:case!1:case"fill":qs=0;break;case 1:case!0:case"stroke":qs=1;break;case 2:case"fillThenStroke":qs=2;break;case 3:case"invisible":qs=3;break;case 4:case"fillAndAddForClipping":qs=4;break;case 5:case"strokeAndAddPathForClipping":qs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qs=6;break;case 7:case"addToPathForClipping":qs=7}var qc=Pl.usedRenderingMode!==void 0?Pl.usedRenderingMode:-1;qs!==-1?vs+=qs+` Tr
`:qc!==-1&&(vs+=`0 Tr
`),qs!==-1&&(Pl.usedRenderingMode=qs),Dt=ve.align||"left";var di,Ki=Me*za,Ha=er.internal.pageSize.getWidth(),Uc=Nt[mt];Yt=ve.charSpace||Si,on=ve.maxWidth||0,Ln=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var Ji=[],Ao=function(zn){return er.getStringUnitWidth(zn,{font:Uc,charSpace:Yt,fontSize:Me,doKerning:!1})*Me/Zi};if(Object.prototype.toString.call(S)==="[object Array]"){var Js;Je=Pc(S),Dt!=="left"&&(di=Je.map(Ao));var Us,ga=0;if(Dt==="right"){P-=di[0],S=[],os=Je.length;for(var ba=0;ba<os;ba++)ba===0?(Us=hi(P),Js=bs(de)):(Us=J(ga-di[ba]),Js=-Ki),S.push([Je[ba],Us,Js]),ga=di[ba]}else if(Dt==="center"){P-=di[0]/2,S=[],os=Je.length;for(var Ga=0;Ga<os;Ga++)Ga===0?(Us=hi(P),Js=bs(de)):(Us=J((ga-di[Ga])/2),Js=-Ki),S.push([Je[Ga],Us,Js]),ga=di[Ga]}else if(Dt==="left"){S=[],os=Je.length;for(var ql=0;ql<os;ql++)S.push(Je[ql])}else if(Dt==="justify"&&Uc.encoding==="Identity-H"){S=[],os=Je.length,on=on!==0?on:Ha;for(var Ul=0,Fr=0;Fr<os;Fr++)if(Js=Fr===0?bs(de):-Ki,Us=Fr===0?hi(P):Ul,Fr<os-1){var Ru=J((on-di[Fr])/(Je[Fr].split(" ").length-1)),va=Je[Fr].split(" ");S.push([va[0]+" ",Us,Js]),Ul=0;for(var ya=1;ya<va.length;ya++){var ys=(Ao(va[ya-1]+" "+va[ya])-Ao(va[ya]))*Zi+Ru;ya==va.length-1?S.push([va[ya],ys,0]):S.push([va[ya]+" ",ys,0]),Ul-=ys}}else S.push([Je[Fr],Us,Js]);S.push(["",Ul,0])}else{if(Dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],os=Je.length,on=on!==0?on:Ha,Fr=0;Fr<os;Fr++){Js=Fr===0?bs(de):-Ki,Us=Fr===0?hi(P):0;var Wa=Je[Fr].split(" ").length-1,Hl=Wa>0?(on-di[Fr])/Wa:0;Fr<os-1?Ji.push(L(J(Hl))):Ji.push(0),S.push([Je[Fr],Us,Js])}}}(typeof ve.R2L=="boolean"?ve.R2L:ot)===!0&&(S=Bl(S,function(zn,On,tr){return[zn.split("").reverse().join(""),On,tr]})),Ue={text:S,x:P,y:de,options:ve,mutex:{pdfEscape:Dr,activeFontKey:mt,fonts:Nt,activeFontSize:Me}},le.publish("postProcessText",Ue),S=Ue.text,qr=Ue.mutex.isHex||!1;var Gl=Nt[mt].encoding;Gl!=="WinAnsiEncoding"&&Gl!=="StandardEncoding"||(S=Bl(S,function(zn,On,tr){return[Pa(zn),On,tr]})),Je=Pc(S),S=[];for(var Ya,$a,xa,nl=Array.isArray(Je[0])?1:0,pi="",Xa=function(zn,On,tr){var Vr="";return tr instanceof lt?(tr=typeof ve.angle=="number"?Zt(tr,new lt(1,0,0,1,zn,On)):Zt(new lt(1,0,0,1,zn,On),tr),V===O&&(tr=Zt(new lt(1,0,0,-1,0,0),tr)),Vr=tr.join(" ")+` Tm
`):Vr=L(zn)+" "+L(On)+` Td
`,Vr},Es=0;Es<Je.length;Es++){switch(pi="",nl){case 1:xa=(qr?"<":"(")+Je[Es][0]+(qr?">":")"),Ya=parseFloat(Je[Es][1]),$a=parseFloat(Je[Es][2]);break;case 0:xa=(qr?"<":"(")+Je[Es]+(qr?">":")"),Ya=hi(P),$a=bs(de)}Ji!==void 0&&Ji[Es]!==void 0&&(pi=Ji[Es]+` Tw
`),Es===0?S.push(pi+Xa(Ya,$a,Ir)+xa):nl===0?S.push(pi+xa):nl===1&&S.push(pi+Xa(Ya,$a,Ir)+xa)}S=nl===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ai=`BT
/`;return Ai+=mt+" "+Me+` Tf
`,Ai+=L(Me*za)+` TL
`,Ai+=fa+`
`,Ai+=vs,Ai+=S,Y(Ai+="ET"),_[mt]=!0,er};var Oc=b.__private__.clip=b.clip=function(S){return Y(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Oc("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Y("n"),this};var Ps=b.__private__.isValidStyle=function(S){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(P=!0),P};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return Ps(S)&&(d=S),this};var Dc=b.__private__.getStyle=b.getStyle=function(S){var P=d;switch(S){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=S}return P},Rc=b.close=function(){return Y("h"),this};b.stroke=function(){return Y("S"),this},b.fill=function(S){return $i("f",S),this},b.fillEvenOdd=function(S){return $i("f*",S),this},b.fillStroke=function(S){return $i("B",S),this},b.fillStrokeEvenOdd=function(S){return $i("B*",S),this};var $i=function(S,P){Kn(P)==="object"?ku(P,S):Y(S)},Xo=function(S){S===null||V===O&&S===void 0||(S=Dc(S),Y(S))};function Tu(S,P,de,ve,Ae){var Ue=new Nh(P||this.boundingBox,de||this.xStep,ve||this.yStep,this.gState,Ae||this.matrix);Ue.stream=this.stream;var Je=S+"$$"+this.cloneIndex+++"$$";return xn(Je,Ue),Ue}var ku=function(S,P){var de=an[S.key],ve=vt[de];if(ve instanceof uu)Y("q"),Y(Ic(P)),ve.gState&&b.setGState(ve.gState),Y(S.matrix.toString()+" cm"),Y("/"+de+" sh"),Y("Q");else if(ve instanceof Nh){var Ae=new lt(1,0,0,-1,0,Ba());S.matrix&&(Ae=Ae.multiply(S.matrix||Cn),de=Tu.call(ve,S.key,S.boundingBox,S.xStep,S.yStep,Ae).id),Y("q"),Y("/Pattern cs"),Y("/"+de+" scn"),ve.gState&&b.setGState(ve.gState),Y(P),Y("Q")}},Ic=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fc=b.moveTo=function(S,P){return Y(L(J(S))+" "+L(te(P))+" m"),this},ju=b.lineTo=function(S,P){return Y(L(J(S))+" "+L(te(P))+" l"),this},Ks=b.curveTo=function(S,P,de,ve,Ae,Ue){return Y([L(J(S)),L(te(P)),L(J(de)),L(te(ve)),L(J(Ae)),L(te(Ue)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,P,de,ve,Ae){if(isNaN(S)||isNaN(P)||isNaN(de)||isNaN(ve)||!Ps(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return V===R?this.lines([[de-S,ve-P]],S,P,[1,1],Ae||"S"):this.lines([[de-S,ve-P]],S,P,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,P,de,ve,Ae,Ue){var Je,kt,Dt,Yt,on,Ln,br,Ir,er,Jr,qr,vs;if(typeof S=="number"&&(vs=de,de=P,P=S,S=vs),ve=ve||[1,1],Ue=Ue||!1,isNaN(P)||isNaN(de)||!Array.isArray(S)||!Array.isArray(ve)||!Ps(Ae)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fc(P,de),Je=ve[0],kt=ve[1],Yt=S.length,Jr=P,qr=de,Dt=0;Dt<Yt;Dt++)(on=S[Dt]).length===2?(Jr=on[0]*Je+Jr,qr=on[1]*kt+qr,ju(Jr,qr)):(Ln=on[0]*Je+Jr,br=on[1]*kt+qr,Ir=on[2]*Je+Jr,er=on[3]*kt+qr,Jr=on[4]*Je+Jr,qr=on[5]*kt+qr,Ks(Ln,br,Ir,er,Jr,qr));return Ue&&Rc(),Xo(Ae),this},b.path=function(S){for(var P=0;P<S.length;P++){var de=S[P],ve=de.c;switch(de.op){case"m":Fc(ve[0],ve[1]);break;case"l":ju(ve[0],ve[1]);break;case"c":Ks.apply(this,ve);break;case"h":Rc()}}return this},b.__private__.rect=b.rect=function(S,P,de,ve,Ae){if(isNaN(S)||isNaN(P)||isNaN(de)||isNaN(ve)||!Ps(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R&&(ve=-ve),Y([L(J(S)),L(te(P)),L(J(de)),L(J(ve)),"re"].join(" ")),Xo(Ae),this},b.__private__.triangle=b.triangle=function(S,P,de,ve,Ae,Ue,Je){if(isNaN(S)||isNaN(P)||isNaN(de)||isNaN(ve)||isNaN(Ae)||isNaN(Ue)||!Ps(Je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-S,ve-P],[Ae-de,Ue-ve],[S-Ae,P-Ue]],S,P,[1,1],Je,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,P,de,ve,Ae,Ue,Je){if(isNaN(S)||isNaN(P)||isNaN(de)||isNaN(ve)||isNaN(Ae)||isNaN(Ue)||!Ps(Je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*de),Ue=Math.min(Ue,.5*ve),this.lines([[de-2*Ae,0],[Ae*kt,0,Ae,Ue-Ue*kt,Ae,Ue],[0,ve-2*Ue],[0,Ue*kt,-Ae*kt,Ue,-Ae,Ue],[2*Ae-de,0],[-Ae*kt,0,-Ae,-Ue*kt,-Ae,-Ue],[0,2*Ue-ve],[0,-Ue*kt,Ae*kt,-Ue,Ae,-Ue]],S+Ae,P,[1,1],Je,!0),this},b.__private__.ellipse=b.ellipse=function(S,P,de,ve,Ae){if(isNaN(S)||isNaN(P)||isNaN(de)||isNaN(ve)||!Ps(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*de,Je=4/3*(Math.SQRT2-1)*ve;return Fc(S+de,P),Ks(S+de,P-Je,S+Ue,P-ve,S,P-ve),Ks(S-Ue,P-ve,S-de,P-Je,S-de,P),Ks(S-de,P+Je,S-Ue,P+ve,S,P+ve),Ks(S+Ue,P+ve,S+de,P+Je,S+de,P),Xo(Ae),this},b.__private__.circle=b.circle=function(S,P,de,ve){if(isNaN(S)||isNaN(P)||isNaN(de)||!Ps(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,P,de,de,ve)},b.setFont=function(S,P,de){return de&&(P=U(P,de)),mt=wi(S,P,{disableWarning:!1}),this};var Xi=b.__private__.getFont=b.getFont=function(){return Nt[wi.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,P,de={};for(S in xt)if(xt.hasOwnProperty(S))for(P in de[S]=[],xt[S])xt[S].hasOwnProperty(P)&&de[S].push(P);return de},b.addFont=function(S,P,de,ve,Ae){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(de=U(de,ve)),li.call(this,S,P,de,Ae=Ae||"Identity-H")};var Oa,Zo=r.lineWidth||.200025,_o=b.__private__.getLineWidth=b.getLineWidth=function(){return Zo},Ut=b.__private__.setLineWidth=b.setLineWidth=function(S){return Zo=S,Y(L(J(S))+" w"),this};b.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(S,P){if(S=S||[],P=P||0,isNaN(P)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(de){return L(J(de))}).join(" "),P=L(J(P)),Y("["+S+"] "+P+" d"),this};var Eu=b.__private__.getLineHeight=b.getLineHeight=function(){return Me*Oa};b.__private__.getLineHeight=b.getLineHeight=function(){return Me*Oa};var Vc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Oa=S),this},Mu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Oa};Vc(r.lineHeight);var hi=b.__private__.getHorizontalCoordinate=function(S){return J(S)},bs=b.__private__.getVerticalCoordinate=function(S){return V===O?S:ft[z].mediaBox.topRightY-ft[z].mediaBox.bottomLeftY-J(S)},Bc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return L(hi(S))},Qo=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return L(bs(S))},fi=r.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Bn(fi)},b.__private__.setStrokeColor=b.setDrawColor=function(S,P,de,ve){return fi=dn({ch1:S,ch2:P,ch3:de,ch4:ve,pdfColorType:"draw",precision:2}),Y(fi),this};var Ko=r.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Bn(Ko)},b.__private__.setFillColor=b.setFillColor=function(S,P,de,ve){return Ko=dn({ch1:S,ch2:P,ch3:de,ch4:ve,pdfColorType:"fill",precision:2}),Y(Ko),this};var fa=r.textColor||"0 g",Lu=b.__private__.getTextColor=b.getTextColor=function(){return Bn(fa)};b.__private__.setTextColor=b.setTextColor=function(S,P,de,ve){return fa=dn({ch1:S,ch2:P,ch3:de,ch4:ve,pdfColorType:"text",precision:3}),this};var Si=r.charSpace,Il=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Si||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Si=S,this};var Fl=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var P=b.CapJoinStyles[S];if(P===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fl=P,Y(P+" J"),this};var as=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var P=b.CapJoinStyles[S];if(P===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return as=P,Y(P+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(L(J(S))+" M"),this},b.GState=Np,b.setGState=function(S){(S=typeof S=="string"?Et[Ft[S]]:da(null,S)).equals(gn)||(Y("/"+S.id+" gs"),gn=S)};var da=function(S,P){if(!S||!Ft[S]){var de=!1;for(var ve in Et)if(Et.hasOwnProperty(ve)&&Et[ve].equals(P)){de=!0;break}if(de)P=Et[ve];else{var Ae="GS"+(Object.keys(Et).length+1).toString(10);Et[Ae]=P,P.id=Ae}return S&&(Ft[S]=P.id),le.publish("addGState",P),P}};b.addGState=function(S,P){return da(S,P),this},b.saveGraphicsState=function(){return Y("q"),Tt.push({key:mt,size:Me,color:fa}),this},b.restoreGraphicsState=function(){Y("Q");var S=Tt.pop();return mt=S.key,Me=S.size,fa=S.color,gn=null,this},b.setCurrentTransformationMatrix=function(S){return Y(S.toString()+" cm"),this},b.comment=function(S){return Y("#"+S),this};var Ni=function(S,P){var de=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Ue){isNaN(Ue)||(de=parseFloat(Ue))}});var ve=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(Ue){isNaN(Ue)||(ve=parseFloat(Ue))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Ue){Ae=Ue.toString()}}),this},Da=function(S,P,de,ve){Ni.call(this,S,P),this.type="rect";var Ae=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Je){isNaN(Je)||(Ae=parseFloat(Je))}});var Ue=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function(Je){isNaN(Je)||(Ue=parseFloat(Je))}}),this},Vl=function(){this.page=At,this.currentPage=z,this.pages=Ve.slice(0),this.pagesContext=ft.slice(0),this.x=ut,this.y=rn,this.matrix=Vt,this.width=Ia(z),this.height=zc(z),this.outputDestination=nt,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){At=this.page,z=this.currentPage,ft=this.pagesContext,Ve=this.pages,ut=this.x,rn=this.y,Vt=this.matrix,el(z,this.width),Fa(z,this.height),nt=this.outputDestination};var Jo=function(S,P,de,ve,Ae){wt.push(new Vl),At=z=0,Ve=[],ut=S,rn=P,Vt=Ae,Pr([de,ve])};for(var Ra in b.beginFormObject=function(S,P,de,ve,Ae){return Jo(S,P,de,ve,Ae),this},b.endFormObject=function(S){return(function(P){if(ht[P])wt.pop().restore();else{var de=new Vl,ve="Xo"+(Object.keys(Qe).length+1).toString(10);de.id=ve,ht[P]=ve,Qe[ve]=de,le.publish("addFormObject",de),wt.pop().restore()}})(S),this},b.doFormObject=function(S,P){var de=Qe[ht[S]];return Y("q"),Y(P.toString()+" cm"),Y("/"+de.id+" Do"),Y("Q"),this},b.getFormObject=function(S){var P=Qe[ht[S]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},b.save=function(S,P){return S=S||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(lu(Yi(_i()),S),typeof lu.unload=="function"&&en.setTimeout&&setTimeout(lu.unload,911),this):new Promise(function(de,ve){try{var Ae=lu(Yi(_i()),S);typeof lu.unload=="function"&&en.setTimeout&&setTimeout(lu.unload,911),de(Ae)}catch(Ue){ve(Ue.message)}})},It.API)It.API.hasOwnProperty(Ra)&&(Ra==="events"&&It.API.events.length?(function(S,P){var de,ve,Ae;for(Ae=P.length-1;Ae!==-1;Ae--)de=P[Ae][0],ve=P[Ae][1],S.subscribe.apply(S,[de].concat(typeof ve=="function"?[ve]:ve))})(le,It.API.events):b[Ra]=It.API[Ra]);function Ia(S){return ft[S].mediaBox.topRightX-ft[S].mediaBox.bottomLeftX}function el(S,P){ft[S].mediaBox.topRightX=P+ft[S].mediaBox.bottomLeftX}function zc(S){return ft[S].mediaBox.topRightY-ft[S].mediaBox.bottomLeftY}function Fa(S,P){ft[S].mediaBox.topRightY=P+ft[S].mediaBox.bottomLeftY}var Va=b.getPageWidth=function(S){return Ia(S=S||z)/bt},Ou=b.setPageWidth=function(S,P){el(S,P*bt)},Ba=b.getPageHeight=function(S){return zc(S=S||z)/bt},Du=b.setPageHeight=function(S,P){Fa(S,P*bt)};return b.internal={pdfEscape:Dr,getStyle:Dc,getFont:Xi,getFontSize:We,getCharSpace:Il,getTextColor:Lu,getLineHeight:Eu,getLineHeightFactor:Mu,getLineWidth:_o,write:De,getHorizontalCoordinate:hi,getVerticalCoordinate:bs,getCoordinateString:Bc,getVerticalCoordinateString:Qo,collections:{},newObject:Kt,newAdditionalObject:$n,newObjectDeferred:fn,newObjectDeferredBegin:Qt,getFilters:sn,putStream:Se,events:le,scaleFactor:bt,pageSize:{getWidth:function(){return Va(z)},setWidth:function(S){Ou(z,S)},getHeight:function(){return Ba(z)},setHeight:function(S){Du(z,S)}},encryptionOptions:p,encryption:Rr,getEncryptor:function(S){return p!==null?Rr.encryptor(S,0):function(P){return P}},output:xo,getNumberOfPages:ui,get pages(){return Ve},out:Y,f2:M,f3:F,getPageInfo:Cr,getPageInfoByObjId:wo,getCurrentPageInfo:Rl,getPDFVersion:A,Point:Ni,Rectangle:Da,Matrix:lt,hasHotfix:gs},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Va(z)},set:function(S){Ou(z,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Ba(z)},set:function(S){Du(z,S)},enumerable:!0,configurable:!0}),(function(S){for(var P=0,de=et.length;P<de;P++){var ve=li.call(this,S[P][0],S[P][1],S[P][2],et[P][3],!0);y===!1&&(_[ve]=!0);var Ae=S[P][0].split("-");Tn({id:ve,fontName:Ae[0],fontStyle:Ae[1]||""})}le.publish("addFonts",{fonts:Nt,dictionary:xt})}).call(b,et),mt="F1",Kr(a,t),le.publish("initialized"),b}yh.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},yh.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yh.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},yh.prototype.processOwnerPassword=function(r,e){return _g(wg(e).substr(0,5),r)},yh.prototype.encryptor=function(r,e){var t=wg(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return _g(t,s)}},Np.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Kn(r)!==Kn(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;s++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},It.API={events:[]},It.version="3.0.4";var Xr=It.API,R2=1,Cu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gh=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},un=function(r){return r.toFixed(2)},bc=function(r){return r.toFixed(5)};Xr.__acroform__={};var Wi=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},tx=function(r){return r*R2},Po=function(r){var e=new u4,t=Lt.internal.getHeight(r)||0,s=Lt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(un(s)),Number(un(t))],e},kM=Xr.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},jM=Xr.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},EM=Xr.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},ns=Xr.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return EM(r,e-1)},rs=Xr.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kM(r,e-1)},ss=Xr.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jM(r,e-1)},MM=Xr.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=r[0],o=r[1],u=r[2],c=r[3],f={};return f.lowerLeft_X=t(a)||0,f.lowerLeft_Y=s(o+c)||0,f.upperRight_X=t(a+u)||0,f.upperRight_Y=s(o)||0,[Number(un(f.lowerLeft_X)),Number(un(f.lowerLeft_Y)),Number(un(f.upperRight_X)),Number(un(f.upperRight_Y))]},LM=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,s=Sg(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+un(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Po(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},Sg=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(M){return M.split(`
`)}):a.map(function(M){return[M]});var o=t,u=Lt.internal.getHeight(r)||0;u=u<0?-u:u;var c=Lt.internal.getWidth(r)||0;c=c<0?-c:c;var f=function(M,F,J){if(M+1<a.length){var te=F+" "+a[M+1][0];return R1(te,r,J).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var d,p,y=R1("3",r,o).height,_=r.multiline?u-o:(u-y)/2,b=_+=2,N=0,A=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+R1(e,r,o=12).width+", FieldWidth:"+c+`
`;break}for(var T="",R=0,O=0;O<a.length;O++)if(a.hasOwnProperty(O)){var V=!1;if(a[O].length!==1&&k!==a[O].length-1){if((y+2)*(R+2)+2>u)continue e;T+=a[O][k],V=!0,A=O,O--}else{T=(T+=a[O][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var I=parseInt(O),W=f(I,T,o),U=O>=a.length-1;if(W&&!U){T+=" ",k=0;continue}if(W||U){if(U)A=I;else if(r.multiline&&(y+2)*(R+2)+2>u)continue e}else{if(!r.multiline||(y+2)*(R+2)+2>u)continue e;A=I}}for(var L="",B=N;B<=A;B++){var ee=a[B];if(r.multiline){if(B===A){L+=ee[k]+" ",k=(k+1)%ee.length;continue}if(B===N){L+=ee[ee.length-1]+" ";continue}}L+=ee[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,p=R1(L,r,o).width,r.textAlign){case"right":d=c-p-2;break;case"center":d=(c-p)/2;break;default:d=2}e+=un(d)+" "+un(b)+` Td
`,e+="("+Cu(L)+`) Tj
`,e+=-un(d)+` 0 Td
`,b=-(o+2),p=0,N=V?A:A+1,R++,T=""}break}return s.text=e,s.fontSize=o,s},R1=function(r,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},OM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},DM=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},RM=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(bo.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(OM)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");R2=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new h4,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&DM(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var c=s[u],f=[],d=c.Rect;if(c.Rect&&(c.Rect=MM(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Lt.createDefaultAppearanceStream(c),Kn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=LM(c);f.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var b=c.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var N=b[u];typeof N=="function"&&(N=N.call(a,c)),y+="/"+u+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=b)=="function"&&(N=N.call(a,c)),y+="/"+u+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(A,k){for(var T in A)if(A.hasOwnProperty(T)){var R=T,O=A[T];k.internal.newObjectDeferredBegin(O.objId,!0),Kn(O)==="object"&&typeof O.putStream=="function"&&O.putStream(),delete A[R]}})(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},c4=Xr.__acroform__.arrayToPdfArray=function(r,e,t){var s=function(u){return u};if(Array.isArray(r)){for(var a="[",o=0;o<r.length;o++)switch(o!==0&&(a+=" "),Kn(r[o])){case"boolean":case"number":case"object":a+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Cu(s(r[o].toString()))+")"):a+=r[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zm=function(r,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Cu(s(r))+")"},qo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qo.prototype.toString=function(){return this.objId+" 0 R"},qo.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},qo.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?r.push({key:s,value:c4(a,this.objId,this.scope)}):a instanceof qo?(a.scope=this.scope,r.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:s,value:a}))}return r};var u4=function(){qo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Wi(u4,qo);var h4=function(){qo.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Cu(t(r))+")"}},set:function(t){r=t}})};Wi(h4,qo);var bo=function r(){qo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ns(e,3)},set:function(T){T?this.F=rs(e,3):this.F=ss(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(T){s=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(T){s[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(T){s[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(T){s[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(T){s[3]=T}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Ap)return;o="FieldObject"+r.FieldNum++}var T=function(R){return R};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Cu(T(o))+")"},set:function(T){o=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(T){o=T}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(T){c=T}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(T){f=T}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/R2:d},set:function(T){d=T}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(T){p=T}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Ap||this instanceof mu))return zm(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=T}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Bs==0?zm(_,this.objId,this.scope):_},set:function(T){T=T.toString(),_=this instanceof Bs==0?T.substr(0,1)==="("?gh(T.substr(1,T.length-2)):gh(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bs==1?gh(_.substr(1,_.length-1)):_},set:function(T){T=T.toString(),_=this instanceof Bs==1?"/"+T:T}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Bs==0?zm(b,this.objId,this.scope):b},set:function(T){T=T.toString(),b=this instanceof Bs==0?T.substr(0,1)==="("?gh(T.substr(1,T.length-2)):gh(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bs==1?gh(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof Bs==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(T){T=!!T,A=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(T){N=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,1)},set:function(T){T?this.Ff=rs(this.Ff,1):this.Ff=ss(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,2)},set:function(T){T?this.Ff=rs(this.Ff,2):this.Ff=ss(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,3)},set:function(T){T?this.Ff=rs(this.Ff,3):this.Ff=ss(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Wi(bo,qo);var Th=function(){bo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return c4(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,d=[];f=u.exec(o);)d.push(f[c]);return d})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,18)},set:function(t){t?this.Ff=rs(this.Ff,18):this.Ff=ss(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=rs(this.Ff,19):this.Ff=ss(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,20)},set:function(t){t?(this.Ff=rs(this.Ff,20),e.sort()):this.Ff=ss(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,22)},set:function(t){t?this.Ff=rs(this.Ff,22):this.Ff=ss(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,23)},set:function(t){t?this.Ff=rs(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,27)},set:function(t){t?this.Ff=rs(this.Ff,27):this.Ff=ss(this.Ff,27)}}),this.hasAppearanceStream=!1};Wi(Th,bo);var kh=function(){Th.call(this),this.fontName="helvetica",this.combo=!1};Wi(kh,Th);var jh=function(){kh.call(this),this.combo=!0};Wi(jh,kh);var W1=function(){jh.call(this),this.edit=!0};Wi(W1,jh);var Bs=function(){bo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,15)},set:function(t){t?this.Ff=rs(this.Ff,15):this.Ff=ss(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,16)},set:function(t){t?this.Ff=rs(this.Ff,16):this.Ff=ss(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,17)},set:function(t){t?this.Ff=rs(this.Ff,17):this.Ff=ss(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,26)},set:function(t){t?this.Ff=rs(this.Ff,26):this.Ff=ss(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Cu(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){Kn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Wi(Bs,bo);var Y1=function(){Bs.call(this),this.pushButton=!0};Wi(Y1,Bs);var Eh=function(){Bs.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Wi(Eh,Bs);var Ap=function(){var r,e;bo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Cu(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Kn(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wi(Ap,bo),Eh.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Eh.prototype.createOption=function(r){var e=new Ap;return e.Parent=this,e.optionName=r,this.Kids.push(e),IM.call(this.scope,e),e};var $1=function(){Bs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lt.CheckBox.createAppearanceStream()};Wi($1,Bs);var mu=function(){bo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,13)},set:function(e){e?this.Ff=rs(this.Ff,13):this.Ff=ss(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,21)},set:function(e){e?this.Ff=rs(this.Ff,21):this.Ff=ss(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,23)},set:function(e){e?this.Ff=rs(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,24)},set:function(e){e?this.Ff=rs(this.Ff,24):this.Ff=ss(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,25)},set:function(e){e?this.Ff=rs(this.Ff,25):this.Ff=ss(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,26)},set:function(e){e?this.Ff=rs(this.Ff,26):this.Ff=ss(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wi(mu,bo);var X1=function(){mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,14)},set:function(r){r?this.Ff=rs(this.Ff,14):this.Ff=ss(this.Ff,14)}}),this.password=!0};Wi(X1,mu);var Lt={CheckBox:{createAppearanceStream:function(){return{N:{On:Lt.CheckBox.YesNormal},D:{On:Lt.CheckBox.YesPushDown,Off:Lt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Po(r);e.scope=r.scope;var t=[],s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),o=Sg(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+un(Lt.internal.getWidth(r))+" "+un(Lt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+un(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Po(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),a=[],o=Lt.internal.getHeight(r),u=Lt.internal.getWidth(r),c=Sg(r,r.caption);return a.push("1 g"),a.push("0 0 "+un(u)+" "+un(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+un(u-1)+" "+un(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+un(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=Po(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+un(Lt.internal.getWidth(r))+" "+un(Lt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:Lt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=Lt.RadioButton.Circle.YesNormal,e.D[r]=Lt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Po(r);e.scope=r.scope;var t=[],s=Lt.internal.getWidth(r)<=Lt.internal.getHeight(r)?Lt.internal.getWidth(r)/4:Lt.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Lt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+bc(Lt.internal.getWidth(r)/2)+" "+bc(Lt.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Po(r);e.scope=r.scope;var t=[],s=Lt.internal.getWidth(r)<=Lt.internal.getHeight(r)?Lt.internal.getWidth(r)/4:Lt.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Lt.internal.Bezier_C).toFixed(5)),u=Number((s*Lt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+bc(Lt.internal.getWidth(r)/2)+" "+bc(Lt.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+bc(Lt.internal.getWidth(r)/2)+" "+bc(Lt.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Po(r);e.scope=r.scope;var t=[],s=Lt.internal.getWidth(r)<=Lt.internal.getHeight(r)?Lt.internal.getWidth(r)/4:Lt.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Lt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+bc(Lt.internal.getWidth(r)/2)+" "+bc(Lt.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:Lt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=Lt.RadioButton.Cross.YesNormal,e.D[r]=Lt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Po(r);e.scope=r.scope;var t=[],s=Lt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+un(Lt.internal.getWidth(r)-2)+" "+un(Lt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(un(s.x1.x)+" "+un(s.x1.y)+" m"),t.push(un(s.x2.x)+" "+un(s.x2.y)+" l"),t.push(un(s.x4.x)+" "+un(s.x4.y)+" m"),t.push(un(s.x3.x)+" "+un(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Po(r);e.scope=r.scope;var t=Lt.internal.calculateCross(r),s=[];return s.push("0.749023 g"),s.push("0 0 "+un(Lt.internal.getWidth(r))+" "+un(Lt.internal.getHeight(r))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+un(Lt.internal.getWidth(r)-2)+" "+un(Lt.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push(un(t.x1.x)+" "+un(t.x1.y)+" m"),s.push(un(t.x2.x)+" "+un(t.x2.y)+" l"),s.push(un(t.x4.x)+" "+un(t.x4.y)+" m"),s.push(un(t.x3.x)+" "+un(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(r){var e=Po(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+un(Lt.internal.getWidth(r))+" "+un(Lt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};Lt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=Lt.internal.getWidth(r),t=Lt.internal.getHeight(r),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},Lt.internal.getWidth=function(r){var e=0;return Kn(r)==="object"&&(e=tx(r.Rect[2])),e},Lt.internal.getHeight=function(r){var e=0;return Kn(r)==="object"&&(e=tx(r.Rect[3])),e};var IM=Xr.addField=function(r){if(RM(this,r),!(r instanceof bo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Xr.AcroFormChoiceField=Th,Xr.AcroFormListBox=kh,Xr.AcroFormComboBox=jh,Xr.AcroFormEditBox=W1,Xr.AcroFormButton=Bs,Xr.AcroFormPushButton=Y1,Xr.AcroFormRadioButton=Eh,Xr.AcroFormCheckBox=$1,Xr.AcroFormTextField=mu,Xr.AcroFormPasswordField=X1,Xr.AcroFormAppearance=Lt,Xr.AcroForm={ChoiceField:Th,ListBox:kh,ComboBox:jh,EditBox:W1,Button:Bs,PushButton:Y1,RadioButton:Eh,CheckBox:$1,TextField:mu,PasswordField:X1,Appearance:Lt},It.AcroForm={ChoiceField:Th,ListBox:kh,ComboBox:jh,EditBox:W1,Button:Bs,PushButton:Y1,RadioButton:Eh,CheckBox:$1,TextField:mu,PasswordField:X1,Appearance:Lt};It.AcroForm;function f4(r){return r.reduce(function(e,t,s){return e[t]=s,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(M,F){var J,te,ae,H,se,Q=t;if((F=F||t)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(W(M))for(se in s)for(ae=s[se],J=0;J<ae.length;J+=1){for(H=!0,te=0;te<ae[J].length;te+=1)if(ae[J][te]!==void 0&&ae[J][te]!==M[te]){H=!1;break}if(H===!0){Q=se;break}}else for(se in s)for(ae=s[se],J=0;J<ae.length;J+=1){for(H=!0,te=0;te<ae[J].length;te+=1)if(ae[J][te]!==void 0&&ae[J][te]!==M.charCodeAt(te)){H=!1;break}if(H===!0){Q=se;break}}return Q===t&&F!==t&&(Q=F),Q},o=function M(F){for(var J=this.internal.write,te=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:F.width}),H.push({key:"Height",value:F.height}),F.colorSpace===T.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===T.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var se="",Q=0,ge=F.transparency.length;Q<ge;Q++)se+=F.transparency[Q]+" "+F.transparency[Q]+" ";H.push({key:"Mask",value:"["+se+"]"})}F.sMask!==void 0&&H.push({key:"SMask",value:F.objectId+1+" 0 R"});var ue=F.filter!==void 0?["/"+F.filter]:void 0;if(te({data:F.data,additionalKeyValues:H,alreadyAppliedFilters:ue,objectId:F.objectId}),J("endobj"),"sMask"in F&&F.sMask!==void 0){var G,j=(G=F.sMaskBitsPerComponent)!==null&&G!==void 0?G:F.bitsPerComponent,z={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:F.sMask};"filter"in F&&(z.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(F.width),z.filter=F.filter),M.call(this,z)}if(F.colorSpace===T.INDEXED){var X=this.internal.newObject();te({data:L(new Uint8Array(F.palette)),objectId:X}),J("endobj")}},u=function(){var M=this.internal.collections[e+"images"];for(var F in M)o.call(this,M[F])},c=function(){var M,F=this.internal.collections[e+"images"],J=this.internal.write;for(var te in F)J("/I"+(M=F[te]).index,M.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var M=this.internal.collections[e+"images"];return f.call(this),M},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(M){return typeof r["process"+M.toUpperCase()]=="function"},_=function(M){return Kn(M)==="object"&&M.nodeType===1},b=function(M,F){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var J=""+M.getAttribute("src");if(J.indexOf("data:image/")===0)return G1(unescape(J).split("base64,").pop());var te=r.loadFile(J,!0);if(te!==void 0)return te}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var ae;switch(F){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return G1(M.toDataURL(ae,1).split("base64,").pop())}},N=function(M){var F=this.internal.collections[e+"images"];if(F){for(var J in F)if(M===F[J].alias)return F[J]}},A=function(M,F,J){return M||F||(M=-96,F=-96),M<0&&(M=-1*J.width*72/M/this.internal.scaleFactor),F<0&&(F=-1*J.height*72/F/this.internal.scaleFactor),M===0&&(M=F*J.width/J.height),F===0&&(F=M*J.height/J.width),[M,F]},k=function(M,F,J,te,ae,H){var se=A.call(this,J,te,ae),Q=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,ue=d.call(this);if(J=se[0],te=se[1],ue[ae.index]=ae,H){H*=Math.PI/180;var G=Math.cos(H),j=Math.sin(H),z=function(ie){return ie.toFixed(4)},X=[z(G),z(j),z(-1*j),z(G),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,Q(M),ge(F+te),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([Q(J),"0","0",Q(te),"0","0","cm"].join(" "))):this.internal.write([Q(J),"0","0",Q(te),Q(M),ge(F+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},T=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=r.__addimage__.sHashCode=function(M){var F,J,te=0;if(typeof M=="string")for(J=M.length,F=0;F<J;F++)te=(te<<5)-te+M.charCodeAt(F),te|=0;else if(W(M))for(J=M.byteLength/2,F=0;F<J;F++)te=(te<<5)-te+M[F],te|=0;return te},V=r.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var F=!0;return M.length===0&&(F=!1),M.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(F=!1),F},I=r.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var F=M.indexOf(",");return F<0?null:M.substring(0,F).trim().endsWith("base64")?M.substring(F+1):null};r.__addimage__.isArrayBuffer=function(M){return M instanceof ArrayBuffer};var W=r.__addimage__.isArrayBufferView=function(M){return M instanceof Int8Array||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array},U=r.__addimage__.binaryStringToUint8Array=function(M){for(var F=M.length,J=new Uint8Array(F),te=0;te<F;te++)J[te]=M.charCodeAt(te);return J},L=r.__addimage__.arrayBufferToBinaryString=function(M){for(var F="",J=W(M)?M:new Uint8Array(M),te=0;te<J.length;te+=8192)F+=String.fromCharCode.apply(null,J.subarray(te,te+8192));return F};r.addImage=function(){var M,F,J,te,ae,H,se,Q,ge;if(typeof arguments[1]=="number"?(F=t,J=arguments[1],te=arguments[2],ae=arguments[3],H=arguments[4],se=arguments[5],Q=arguments[6],ge=arguments[7]):(F=arguments[1],J=arguments[2],te=arguments[3],ae=arguments[4],H=arguments[5],se=arguments[6],Q=arguments[7],ge=arguments[8]),Kn(M=arguments[0])==="object"&&!_(M)&&"imageData"in M){var ue=M;M=ue.imageData,F=ue.format||F||t,J=ue.x||J||0,te=ue.y||te||0,ae=ue.w||ue.width||ae,H=ue.h||ue.height||H,se=ue.alias||se,Q=ue.compression||Q,ge=ue.rotation||ue.angle||ge}var G=this.internal.getFilters();if(Q===void 0&&G.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(J)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var j=B.call(this,M,F,se,Q);return k.call(this,J,te,ae,H,j,ge),this};var B=function(M,F,J,te){var ae,H,se;if(typeof M=="string"&&a(M)===t){M=unescape(M);var Q=ee(M,!1);(Q!==""||(Q=r.loadFile(M,!0))!==void 0)&&(M=Q)}if(_(M)&&(M=b(M,F)),F=a(M,F),!y(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((se=J)==null||se.length===0)&&(J=(function(ge){return typeof ge=="string"||W(ge)?O(ge):W(ge.data)?O(ge.data):null})(M)),(ae=N.call(this,J))||(M instanceof Uint8Array||F==="RGBA"||(H=M,M=U(M)),ae=this["process"+F.toUpperCase()](M,p.call(this),J,(function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in r.image_compression?ge:R.NONE})(te),H)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},ee=r.__addimage__.convertBase64ToBinaryString=function(M,F){F=typeof F!="boolean"||F;var J,te="";if(typeof M=="string"){var ae;J=(ae=I(M))!==null&&ae!==void 0?ae:M;try{te=G1(J)}catch(H){if(F)throw V(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};r.getImageProperties=function(M){var F,J,te="";if(_(M)&&(M=b(M)),typeof M=="string"&&a(M)===t&&((te=ee(M,!1))===""&&(te=r.loadFile(M)||""),M=te),J=a(M),!y(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(M instanceof Uint8Array||(M=U(M)),!(F=this["process"+J.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=J,F}})(It.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,p=!1,y=0;y<d.length&&!p;y++)switch((s=d[y]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<d.length;_++){s=d[_];var b=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(A.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+b(T(s.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+b(T(R))+") >>",A.content=o;var O=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+O,s.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(A.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var V=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(N(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var I=this.annotations._nameMap[s.options.name];s.options.pageNumber=I.page,s.options.top=I.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(N(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var W=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+W+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},r.link=function(t,s,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(t),y:d(s),w:f(t+a),h:d(s+o)},options:u,type:"link"})},r.textWithLink=function(t,s,a,o){var u,c,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(t,c).length;u=Math.ceil(d*p)}else c=f,u=d;return this.text(t,s,a,o),a+=.2*d,o.align==="center"&&(s-=f/2),o.align==="right"&&(s-=f),this.link(s,a-d,c,u,o),f},r.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(It.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},u=r.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},c=r.__arabicParser__.isArabicEndLetter=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},f=r.__arabicParser__.isArabicAlfLetter=function(A){return u(A)&&a.indexOf(A.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var p=r.__arabicParser__.arabicLetterHasMedialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length==4},y=r.__arabicParser__.resolveLigatures=function(A){var k=0,T=t,R="",O=0;for(k=0;k<A.length;k+=1)T[A.charCodeAt(k)]!==void 0?(O++,typeof(T=T[A.charCodeAt(k)])=="number"&&(R+=String.fromCharCode(T),T=t,O=0),k===A.length-1&&(T=t,R+=A.charAt(k-(O-1)),k-=O-1,O=0)):(T=t,R+=A.charAt(k-O),k-=O,O=0);return R};r.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&s[A.charCodeAt(0)]!==void 0};var _=r.__arabicParser__.getCorrectForm=function(A,k,T){return u(A)?o(A)===!1?-1:!d(A)||!u(k)&&!u(T)||!u(T)&&c(k)||c(A)&&!u(k)||c(A)&&f(k)||c(A)&&c(k)?0:p(A)&&u(k)&&!c(k)&&u(T)&&d(T)?3:c(A)||!u(T)?1:2:-1},b=function(A){var k=0,T=0,R=0,O="",V="",I="",W=(A=A||"").split("\\s+"),U=[];for(k=0;k<W.length;k+=1){for(U.push(""),T=0;T<W[k].length;T+=1)O=W[k][T],V=W[k][T-1],I=W[k][T+1],u(O)?(R=_(O,V,I),U[k]+=R!==-1?String.fromCharCode(e[O.charCodeAt(0)][R]):O):U[k]+=O;U[k]=y(U[k])}return U.join(" ")},N=r.__arabicParser__.processArabic=r.processArabic=function(){var A,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var R=0;for(T=[],R=0;R<k.length;R+=1)Array.isArray(k[R])?T.push([b(k[R][0]),k[R][1],k[R][2]]):T.push([b(k[R])]);A=T}else A=b(k);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};r.events.push(["preProcessText",N])})(It.API),It.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(It.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(A){f=A}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(A){d=A}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(A){p=A}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(A){_=A}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(A){b=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},r.getTextDimensions=function(f,d){s.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),_=d.scaleFactor||this.internal.scaleFactor,b=0,N=0,A=0,k=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var T=d.maxWidth;T>0?typeof f=="string"?f=this.splitTextToSize(f,T):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(O,V){return O.concat(k.splitTextToSize(V,T))},[])):f=Array.isArray(f)?f:[f];for(var R=0;R<f.length;R++)b<(A=this.getStringUnitWidth(f[R],{font:y})*p)&&(b=A);return b!==0&&(N=f.length),{w:b/=_,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},r.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=r.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,b&&_&&(this.printHeaderRow(f.lineNumber,!0),f.y+=_[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-p,f.y+p,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+p,{align:"center",baseline:"top",maxWidth:f.width-p-p}):this.text(f.text,f.x+p,f.y+p,{align:"left",baseline:"top",maxWidth:f.width-p-p})),this.internal.__cell__.lastCell=f,this};r.table=function(f,d,p,y,_){if(s.call(this),!p)throw new Error("No data for PDF table.");var b,N,A,k,T=[],R=[],O=[],V={},I={},W=[],U=[],L=(_=_||{}).autoSize||!1,B=_.printHeaders!==!1,ee=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,M=_.margins||Object.assign({width:this.getPageWidth()},e),F=typeof _.padding=="number"?_.padding:3,J=_.headerBackgroundColor||"#c8c8c8",te=_.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=ee,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=te,this.setFontSize(ee),y==null)R=T=Object.keys(p[0]),O=T.map(function(){return"left"});else if(Array.isArray(y)&&Kn(y[0])==="object")for(T=y.map(function(ue){return ue.name}),R=y.map(function(ue){return ue.prompt||ue.name||""}),O=y.map(function(ue){return ue.align||"left"}),b=0;b<y.length;b+=1)I[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(R=T=y,O=T.map(function(){return"left"}));if(L||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<T.length;b+=1){for(V[k=T[b]]=p.map(function(ue){return ue[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=V[k],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)W.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[k]=Math.max.apply(null,W)+F+F,W=[]}if(B){var ae={};for(b=0;b<T.length;b+=1)ae[T[b]]={},ae[T[b]].text=R[b],ae[T[b]].align=O[b];var H=c.call(this,ae,I);U=T.map(function(ue){return new o(f,d,I[ue],H,ae[ue].text,void 0,ae[ue].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var se=y.reduce(function(ue,G){return ue[G.name]=G.align,ue},{});for(b=0;b<p.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:p[b]},this);var Q=c.call(this,p[b],I);for(A=0;A<T.length;A+=1){var ge=p[b][T[A]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:A,data:ge},this),u.call(this,new o(f,d,I[T[A]],Q,ge,b+2,se[T[A]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var c=function(f,d){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(f).map(function(b){var N=f[b];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+p+p},this).reduce(function(b,N){return Math.max(b,N)},0)};r.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},r.printHeaderRow=function(f,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=f;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,p),this.setTextColor(N)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(It.API);var d4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ng=f4(p4),m4=[100,200,300,400,500,600,700,800,900],FM=f4(m4);function Pm(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return d4[o=o||"normal"]?o:"normal"})(r.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),a=(function(o){return typeof Ng[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:s,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,s].join(" ")}}}function nx(r,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(r[e[a]])return r[e[a]]}var VM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},rx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function sx(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function ix(r){return r.trimLeft()}function BM(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function zM(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var I1,ax,ox,bh,F1,lx,cx,ux,qm=["times"];function hx(r,e,t,s,a){var o=4,u=dx;switch(a){case It.API.image_compression.FAST:o=1,u=fx;break;case It.API.image_compression.MEDIUM:o=6,u=px;break;case It.API.image_compression.SLOW:o=9,u=mx}r=(function(f,d,p,y){for(var _,b=f.length/d,N=new Uint8Array(f.length+b),A=[PM,fx,dx,px,mx],k=0;k<b;k+=1){var T=k*d,R=f.subarray(T,T+d);if(y)N.set(y(R,p,_),T+k);else{for(var O=A.length,V=[],I=0;I<O;I+=1)V[I]=A[I](R,p,_);var W=UM(V.concat());N.set(V[W],T+k)}_=R}return N})(r,e,Math.ceil(t*s/8),u);var c=bg(r,{level:o});return It.API.__addimage__.arrayBufferToBinaryString(c)}function PM(r){var e=Array.apply([],r);return e.unshift(0),e}function fx(r,e){var t=r.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=r[a-e]||0;s[a+1]=r[a]-o+256&255}return s}function dx(r,e,t){var s=r.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=r[o]-u+256&255}return a}function px(r,e,t){var s=r.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=r[o-e]||0,c=t&&t[o]||0;a[o+1]=r[o]+256-(u+c>>>1)&255}return a}function mx(r,e,t){var s=r.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=qM(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=r[o]-u+256&255}return a}function qM(r,e,t){if(r===e&&e===t)return r;var s=Math.abs(e-t),a=Math.abs(r-t),o=Math.abs(r+e-t-t);return s<=a&&s<=o?r:a<=o?e:t}function UM(r){var e=r.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function Um(r,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return g4(r,a)>>o&u}function gx(r,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),c=(1<<s)-1,f=(e&c)<<u;(function(d,p,y){if(p+1<d.byteLength)d.setUint16(p,y,!1);else{var _=y>>8&255;d.setUint8(p,_)}})(r,o,g4(r,o)&~(c<<u)&65535|f)}function g4(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function HM(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,s=r[e++]|r[e++]<<8,a=r[e++],o=a>>7,u=1<<1+(7&a);r[e++],r[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var d=!0,p=[],y=0,_=null,b=0,N=null;for(this.width=t,this.height=s;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,N=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=r[e++];y=r[e++]|r[e++]<<8,_=r[e++],1&A||(_=null),b=A>>2&7,e++;break;case 254:for(;;){if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var k=r[e++]|r[e++]<<8,T=r[e++]|r[e++]<<8,R=r[e++]|r[e++]<<8,O=r[e++]|r[e++]<<8,V=r[e++],I=V>>6&1,W=1<<1+(7&V),U=c,L=f,B=!1;V>>7&&(B=!0,U=e,L=W,e+=3*W);var ee=e;for(e++;;){var M;if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}p.push({x:k,y:T,width:R,height:O,has_local_palette:B,palette_offset:U,palette_size:L,data_offset:ee,data_length:e-ee,transparent_index:_,interlaced:!!I,delay:y,disposal:b});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(F){if(F<0||F>=p.length)throw new Error("Frame index out of range.");return p[F]},this.decodeAndBlitFrameBGRA=function(F,J){var te=this.frameInfo(F),ae=te.width*te.height,H=new Uint8Array(ae);bx(r,te.data_offset,H,ae);var se=te.palette_offset,Q=te.transparent_index;Q===null&&(Q=256);var ge=te.width,ue=t-ge,G=ge,j=4*(te.y*t+te.x),z=4*((te.y+te.height)*t+te.x),X=j,ie=4*ue;te.interlaced===!0&&(ie+=4*t*7);for(var ce=8,pe=0,me=H.length;pe<me;++pe){var Ne=H[pe];if(G===0&&(G=ge,(X+=ie)>=z&&(ie=4*ue+4*t*(ce-1),X=j+(ge+ue)*(ce<<1),ce>>=1)),Ne===Q)X+=4;else{var we=r[se+3*Ne],Ve=r[se+3*Ne+1],Ge=r[se+3*Ne+2];J[X++]=Ge,J[X++]=Ve,J[X++]=we,J[X++]=255}--G}},this.decodeAndBlitFrameRGBA=function(F,J){var te=this.frameInfo(F),ae=te.width*te.height,H=new Uint8Array(ae);bx(r,te.data_offset,H,ae);var se=te.palette_offset,Q=te.transparent_index;Q===null&&(Q=256);var ge=te.width,ue=t-ge,G=ge,j=4*(te.y*t+te.x),z=4*((te.y+te.height)*t+te.x),X=j,ie=4*ue;te.interlaced===!0&&(ie+=4*t*7);for(var ce=8,pe=0,me=H.length;pe<me;++pe){var Ne=H[pe];if(G===0&&(G=ge,(X+=ie)>=z&&(ie=4*ue+4*t*(ce-1),X=j+(ge+ue)*(ce<<1),ce>>=1)),Ne===Q)X+=4;else{var we=r[se+3*Ne],Ve=r[se+3*Ne+1],Ge=r[se+3*Ne+2];J[X++]=we,J[X++]=Ve,J[X++]=Ge,J[X++]=255}--G}}}function bx(r,e,t,s){for(var a=r[e++],o=1<<a,u=o+1,c=u+1,f=a+1,d=(1<<f)-1,p=0,y=0,_=0,b=r[e++],N=new Int32Array(4096),A=null;;){for(;p<16&&b!==0;)y|=r[e++]<<p,p+=8,b===1?b=r[e++]:--b;if(p<f)break;var k=y&d;if(y>>=f,p-=f,k!==o){if(k===u)break;for(var T=k<c?k:A,R=0,O=T;O>o;)O=N[O]>>8,++R;var V=O;if(_+R+(T!==k?1:0)>s)return void dr.log("Warning, gif stream longer than expected.");t[_++]=V;var I=_+=R;for(T!==k&&(t[_++]=V),O=T;R--;)O=N[O],t[--I]=255&O,O>>=8;A!==null&&c<4096&&(N[c++]=A<<8|V,c>=d+1&&f<12&&(++f,d=d<<1|1)),A=k}else c=u+1,d=(1<<(f=a+1))-1,A=null}return _!==s&&dr.log("Warning, gif stream shorter than expected."),t}function Hm(r){var e,t,s,a,o,u=Math.floor,c=new Array(64),f=new Array(64),d=new Array(64),p=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),N=new Array(64),A=[],k=0,T=7,R=new Array(64),O=new Array(64),V=new Array(64),I=new Array(256),W=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(j,z){for(var X=0,ie=0,ce=new Array,pe=1;pe<=16;pe++){for(var me=1;me<=j[pe];me++)ce[z[ie]]=[],ce[z[ie]][0]=X,ce[z[ie]][1]=pe,ie++,X++;X*=2}return ce}function se(j){for(var z=j[0],X=j[1]-1;X>=0;)z&1<<X&&(k|=1<<T),X--,--T<0&&(k==255?(Q(255),Q(0)):Q(k),T=7,k=0)}function Q(j){A.push(j)}function ge(j){Q(j>>8&255),Q(255&j)}function ue(j,z,X,ie,ce){for(var pe,me=ce[0],Ne=ce[240],we=(function(Me,it){var We,ot,rt,Fe,tt,Ke,ct,yt,mt,bt,ut=0;for(mt=0;mt<8;++mt){We=Me[ut],ot=Me[ut+1],rt=Me[ut+2],Fe=Me[ut+3],tt=Me[ut+4],Ke=Me[ut+5],ct=Me[ut+6];var rn=We+(yt=Me[ut+7]),Vt=We-yt,Nt=ot+ct,xt=ot-ct,Tt=rt+Ke,vt=rt-Ke,an=Fe+tt,Et=Fe-tt,Ft=rn+an,gn=rn-an,At=Nt+Tt,ft=Nt-Tt;Me[ut]=Ft+At,Me[ut+4]=Ft-At;var le=.707106781*(ft+gn);Me[ut+2]=gn+le,Me[ut+6]=gn-le;var Pe=.382683433*((Ft=Et+vt)-(ft=xt+Vt)),Qe=.5411961*Ft+Pe,ht=1.306562965*ft+Pe,wt=.707106781*(At=vt+xt),lt=Vt+wt,Zt=Vt-wt;Me[ut+5]=Zt+Qe,Me[ut+3]=Zt-Qe,Me[ut+1]=lt+ht,Me[ut+7]=lt-ht,ut+=8}for(ut=0,mt=0;mt<8;++mt){We=Me[ut],ot=Me[ut+8],rt=Me[ut+16],Fe=Me[ut+24],tt=Me[ut+32],Ke=Me[ut+40],ct=Me[ut+48];var Cn=We+(yt=Me[ut+56]),xn=We-yt,tn=ot+ct,Kt=ot-ct,fn=rt+Ke,Qt=rt-Ke,$n=Fe+tt,lr=Fe-tt,vn=Cn+$n,Bn=Cn-$n,dn=tn+fn,sn=tn-fn;Me[ut]=vn+dn,Me[ut+32]=vn-dn;var Se=.707106781*(sn+Bn);Me[ut+16]=Bn+Se,Me[ut+48]=Bn-Se;var Re=.382683433*((vn=lr+Qt)-(sn=Kt+xn)),$e=.5411961*vn+Re,gt=1.306562965*sn+Re,$t=.707106781*(dn=Qt+Kt),Bt=xn+$t,wn=xn-$t;Me[ut+40]=wn+$e,Me[ut+24]=wn-$e,Me[ut+8]=Bt+gt,Me[ut+56]=Bt-gt,ut++}for(mt=0;mt<64;++mt)bt=Me[mt]*it[mt],b[mt]=bt>0?bt+.5|0:bt-.5|0;return b})(j,z),Ve=0;Ve<64;++Ve)N[U[Ve]]=we[Ve];var Ge=N[0]-X;X=N[0],Ge==0?se(ie[0]):(se(ie[_[pe=32767+Ge]]),se(y[pe]));for(var nt=63;nt>0&&N[nt]==0;)nt--;if(nt==0)return se(me),X;for(var st,Y=1;Y<=nt;){for(var De=Y;N[Y]==0&&Y<=nt;)++Y;var dt=Y-De;if(dt>=16){st=dt>>4;for(var et=1;et<=st;++et)se(Ne);dt&=15}pe=32767+N[Y],se(ce[(dt<<4)+_[pe]]),se(y[pe]),Y++}return nt!=63&&se(me),X}function G(j){j=Math.min(Math.max(j,1),100),o!=j&&((function(z){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ce=u((X[ie]*z+50)/100);ce=Math.min(Math.max(ce,1),255),c[U[ie]]=ce}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var Ne=u((pe[me]*z+50)/100);Ne=Math.min(Math.max(Ne,1),255),f[U[me]]=Ne}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,Ge=0;Ge<8;Ge++)for(var nt=0;nt<8;nt++)d[Ve]=1/(c[U[Ve]]*we[Ge]*we[nt]*8),p[Ve]=1/(f[U[Ve]]*we[Ge]*we[nt]*8),Ve++})(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),o=j)}this.encode=function(j,z){z&&G(z),A=new Array,k=0,T=7,ge(65496),ge(65504),ge(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),ge(1),ge(1),Q(0),Q(0),(function(){ge(65499),ge(132),Q(0);for(var ot=0;ot<64;ot++)Q(c[ot]);Q(1);for(var rt=0;rt<64;rt++)Q(f[rt])})(),(function(ot,rt){ge(65472),ge(17),Q(8),ge(rt),ge(ot),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)})(j.width,j.height),(function(){ge(65476),ge(418),Q(0);for(var ot=0;ot<16;ot++)Q(L[ot+1]);for(var rt=0;rt<=11;rt++)Q(B[rt]);Q(16);for(var Fe=0;Fe<16;Fe++)Q(ee[Fe+1]);for(var tt=0;tt<=161;tt++)Q(M[tt]);Q(1);for(var Ke=0;Ke<16;Ke++)Q(F[Ke+1]);for(var ct=0;ct<=11;ct++)Q(J[ct]);Q(17);for(var yt=0;yt<16;yt++)Q(te[yt+1]);for(var mt=0;mt<=161;mt++)Q(ae[mt])})(),ge(65498),ge(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var X=0,ie=0,ce=0;k=0,T=7,this.encode.displayName="_encode_";for(var pe,me,Ne,we,Ve,Ge,nt,st,Y,De=j.data,dt=j.width,et=j.height,Me=4*dt,it=0;it<et;){for(pe=0;pe<Me;){for(Ve=Me*it+pe,nt=-1,st=0,Y=0;Y<64;Y++)Ge=Ve+(st=Y>>3)*Me+(nt=4*(7&Y)),it+st>=et&&(Ge-=Me*(it+1+st-et)),pe+nt>=Me&&(Ge-=pe+nt-Me+4),me=De[Ge++],Ne=De[Ge++],we=De[Ge++],R[Y]=(W[me]+W[Ne+256|0]+W[we+512|0]>>16)-128,O[Y]=(W[me+768|0]+W[Ne+1024|0]+W[we+1280|0]>>16)-128,V[Y]=(W[me+1280|0]+W[Ne+1536|0]+W[we+1792|0]>>16)-128;X=ue(R,d,X,e,s),ie=ue(O,p,ie,t,a),ce=ue(V,p,ce,t,a),pe+=32}it+=8}if(T>=0){var We=[];We[1]=T+1,We[0]=(1<<T+1)-1,se(We)}return ge(65497),new Uint8Array(A)},r=r||50,(function(){for(var j=String.fromCharCode,z=0;z<256;z++)I[z]=j(z)})(),e=H(L,B),t=H(F,J),s=H(ee,M),a=H(te,ae),(function(){for(var j=1,z=2,X=1;X<=15;X++){for(var ie=j;ie<z;ie++)_[32767+ie]=X,y[32767+ie]=[],y[32767+ie][1]=X,y[32767+ie][0]=ie;for(var ce=-(z-1);ce<=-j;ce++)_[32767+ce]=X,y[32767+ce]=[],y[32767+ce][1]=X,y[32767+ce][0]=z-1+ce;j<<=1,z<<=1}})(),(function(){for(var j=0;j<256;j++)W[j]=19595*j,W[j+256|0]=38470*j,W[j+512|0]=7471*j+32768,W[j+768|0]=-11059*j,W[j+1024|0]=-21709*j,W[j+1280|0]=32768*j+8421375,W[j+1536|0]=-27439*j,W[j+1792|0]=-5329*j})(),G(r)}function so(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function vx(r){function e(B){if(!B)throw Error("assert :P")}function t(B,ee,M){for(var F=0;4>F;F++)if(B[ee+F]!=M.charCodeAt(F))return!0;return!1}function s(B,ee,M,F,J){for(var te=0;te<J;te++)B[ee+te]=M[F+te]}function a(B,ee,M,F){for(var J=0;J<F;J++)B[ee+J]=M}function o(B){return new Int32Array(B)}function u(B,ee){for(var M=[],F=0;F<B;F++)M.push(new ee);return M}function c(B,ee){var M=[];return(function F(J,te,ae){for(var H=ae[te],se=0;se<H&&(J.push(ae.length>te+1?[]:new ee),!(ae.length<te+1));se++)F(J[se],te+1,ae)})(M,0,B),M}var f=function(){var B=this;function ee(m,v){for(var C=1<<v-1>>>0;m&C;)C>>>=1;return C?(m&C-1)+C:m}function M(m,v,C,E,q){e(!(E%C));do m[v+(E-=C)]=q;while(0<E)}function F(m,v,C,E,q){if(e(2328>=q),512>=q)var $=o(512);else if(($=o(q))==null)return 0;return(function(Z,ne,oe,fe,ye,je){var he,_e,Te=ne,ze=1<<oe,ke=o(16),Be=o(16);for(e(ye!=0),e(fe!=null),e(Z!=null),e(0<oe),_e=0;_e<ye;++_e){if(15<fe[_e])return 0;++ke[fe[_e]]}if(ke[0]==ye)return 0;for(Be[1]=0,he=1;15>he;++he){if(ke[he]>1<<he)return 0;Be[he+1]=Be[he]+ke[he]}for(_e=0;_e<ye;++_e)he=fe[_e],0<fe[_e]&&(je[Be[he]++]=_e);if(Be[15]==1)return(fe=new J).g=0,fe.value=je[0],M(Z,Te,1,ze,fe),ze;var He,at=-1,Ze=ze-1,Mt=0,_t=1,Jt=1,Ct=1<<oe;for(_e=0,he=1,ye=2;he<=oe;++he,ye<<=1){if(_t+=Jt<<=1,0>(Jt-=ke[he]))return 0;for(;0<ke[he];--ke[he])(fe=new J).g=he,fe.value=je[_e++],M(Z,Te+Mt,ye,Ct,fe),Mt=ee(Mt,he)}for(he=oe+1,ye=2;15>=he;++he,ye<<=1){if(_t+=Jt<<=1,0>(Jt-=ke[he]))return 0;for(;0<ke[he];--ke[he]){if(fe=new J,(Mt&Ze)!=at){for(Te+=Ct,He=1<<(at=he)-oe;15>at&&!(0>=(He-=ke[at]));)++at,He<<=1;ze+=Ct=1<<(He=at-oe),Z[ne+(at=Mt&Ze)].g=He+oe,Z[ne+at].value=Te-ne-at}fe.g=he-oe,fe.value=je[_e++],M(Z,Te+(Mt>>oe),ye,Ct,fe),Mt=ee(Mt,he)}}return _t!=2*Be[15]-1?0:ze})(m,v,C,E,q,$)}function J(){this.value=this.g=0}function te(){this.value=this.g=0}function ae(){this.G=u(5,J),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ao,te)}function H(m,v,C,E){e(m!=null),e(v!=null),e(2147483648>E),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=v,m.pa=C,m.Jd=v,m.Yc=C+E,m.Zc=4<=E?C+E-4+1:C,me(m)}function se(m,v){for(var C=0;0<v--;)C|=we(m,128)<<v;return C}function Q(m,v){var C=se(m,v);return Ne(m)?-C:C}function ge(m,v,C,E){var q,$=0;for(e(m!=null),e(v!=null),e(4294967288>E),m.Sb=E,m.Ra=0,m.u=0,m.h=0,4<E&&(E=4),q=0;q<E;++q)$+=v[C+q]<<8*q;m.Ra=$,m.bb=E,m.oa=v,m.pa=C}function ue(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<ga-8>>>0,++m.bb,m.u-=8;ie(m)&&(m.h=1,m.u=0)}function G(m,v){if(e(0<=v),!m.h&&v<=Us){var C=X(m)&Js[v];return m.u+=v,ue(m),C}return m.h=1,m.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(m){return m.Ra>>>(m.u&ga-1)>>>0}function ie(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>ga}function ce(m,v){m.u=v,m.h=ie(m)}function pe(m){m.u>=ba&&(e(m.u>=ba),ue(m))}function me(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function Ne(m){return se(m,1)}function we(m,v){var C=m.Ca;0>m.b&&me(m);var E=m.b,q=C*v>>>8,$=(m.I>>>E>q)+0;for($?(C-=q,m.I-=q+1<<E>>>0):C=q+1,E=C,q=0;256<=E;)q+=8,E>>=8;return E=7^q+Ga[E],m.b-=E,m.Ca=(C<<E)-1,$}function Ve(m,v,C){m[v+0]=C>>24&255,m[v+1]=C>>16&255,m[v+2]=C>>8&255,m[v+3]=255&C}function Ge(m,v){return m[v+0]|m[v+1]<<8}function nt(m,v){return Ge(m,v)|m[v+2]<<16}function st(m,v){return Ge(m,v)|Ge(m,v+2)<<16}function Y(m,v){var C=1<<v;return e(m!=null),e(0<v),m.X=o(C),m.X==null?0:(m.Mb=32-v,m.Xa=v,1)}function De(m,v){e(m!=null),e(v!=null),e(m.Xa==v.Xa),s(v.X,0,m.X,0,1<<v.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function et(m,v,C,E){e(C!=null),e(E!=null);var q=C[0],$=E[0];return q==0&&(q=(m*$+v/2)/v),$==0&&($=(v*q+m/2)/m),0>=q||0>=$?0:(C[0]=q,E[0]=$,1)}function Me(m,v){return m+(1<<v)-1>>>v}function it(m,v){return((4278255360&m)+(4278255360&v)>>>0&4278255360)+((16711935&m)+(16711935&v)>>>0&16711935)>>>0}function We(m,v){B[v]=function(C,E,q,$,Z,ne,oe){var fe;for(fe=0;fe<Z;++fe){var ye=B[m](ne[oe+fe-1],q,$+fe);ne[oe+fe]=it(C[E+fe],ye)}}}function ot(){this.ud=this.hd=this.jd=0}function rt(m,v){return((4278124286&(m^v))>>>1)+(m&v)>>>0}function Fe(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function tt(m,v){return Fe(m+(m-v+.5>>1))}function Ke(m,v,C){return Math.abs(v-C)-Math.abs(m-C)}function ct(m,v,C,E,q,$,Z){for(E=$[Z-1],C=0;C<q;++C)$[Z+C]=E=it(m[v+C],E)}function yt(m,v,C,E,q){var $;for($=0;$<C;++$){var Z=m[v+$],ne=Z>>8&255,oe=16711935&(oe=(oe=16711935&Z)+((ne<<16)+ne));E[q+$]=(4278255360&Z)+oe>>>0}}function mt(m,v){v.jd=255&m,v.hd=m>>8&255,v.ud=m>>16&255}function bt(m,v,C,E,q,$){var Z;for(Z=0;Z<E;++Z){var ne=v[C+Z],oe=ne>>>8,fe=ne,ye=255&(ye=(ye=ne>>>16)+((m.jd<<24>>24)*(oe<<24>>24)>>>5));fe=255&(fe=(fe+=(m.hd<<24>>24)*(oe<<24>>24)>>>5)+((m.ud<<24>>24)*(ye<<24>>24)>>>5)),q[$+Z]=(4278255360&ne)+(ye<<16)+fe}}function ut(m,v,C,E,q){B[v]=function($,Z,ne,oe,fe,ye,je,he,_e){for(oe=je;oe<he;++oe)for(je=0;je<_e;++je)fe[ye++]=q(ne[E($[Z++])])},B[m]=function($,Z,ne,oe,fe,ye,je){var he=8>>$.b,_e=$.Ea,Te=$.K[0],ze=$.w;if(8>he)for($=(1<<$.b)-1,ze=(1<<he)-1;Z<ne;++Z){var ke,Be=0;for(ke=0;ke<_e;++ke)ke&$||(Be=E(oe[fe++])),ye[je++]=q(Te[Be&ze]),Be>>=he}else B["VP8LMapColor"+C](oe,fe,Te,ze,ye,je,Z,ne,_e)}}function rn(m,v,C,E,q){for(C=v+C;v<C;){var $=m[v++];E[q++]=$>>16&255,E[q++]=$>>8&255,E[q++]=255&$}}function Vt(m,v,C,E,q){for(C=v+C;v<C;){var $=m[v++];E[q++]=$>>16&255,E[q++]=$>>8&255,E[q++]=255&$,E[q++]=$>>24&255}}function Nt(m,v,C,E,q){for(C=v+C;v<C;){var $=(Z=m[v++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;E[q++]=$,E[q++]=Z}}function xt(m,v,C,E,q){for(C=v+C;v<C;){var $=(Z=m[v++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;E[q++]=$,E[q++]=Z}}function Tt(m,v,C,E,q){for(C=v+C;v<C;){var $=m[v++];E[q++]=255&$,E[q++]=$>>8&255,E[q++]=$>>16&255}}function vt(m,v,C,E,q,$){if($==0)for(C=v+C;v<C;)Ve(E,(($=m[v++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),q+=32;else s(E,q,m,v,C)}function an(m,v){B[v][0]=B[m+"0"],B[v][1]=B[m+"1"],B[v][2]=B[m+"2"],B[v][3]=B[m+"3"],B[v][4]=B[m+"4"],B[v][5]=B[m+"5"],B[v][6]=B[m+"6"],B[v][7]=B[m+"7"],B[v][8]=B[m+"8"],B[v][9]=B[m+"9"],B[v][10]=B[m+"10"],B[v][11]=B[m+"11"],B[v][12]=B[m+"12"],B[v][13]=B[m+"13"],B[v][14]=B[m+"0"],B[v][15]=B[m+"0"]}function Et(m){return m==Zc||m==zu||m==Yl||m==Pu}function Ft(){this.eb=[],this.size=this.A=this.fb=0}function gn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function At(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ft,this.f.kb=new gn,this.sd=null}function ft(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pe(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Qe(m,v){var C=m.T,E=v.ba.f.RGBA,q=E.eb,$=E.fb+m.ka*E.A,Z=_s[v.ba.S],ne=m.y,oe=m.O,fe=m.f,ye=m.N,je=m.ea,he=m.W,_e=v.cc,Te=v.dc,ze=v.Mc,ke=v.Nc,Be=m.ka,He=m.ka+m.T,at=m.U,Ze=at+1>>1;for(Be==0?Z(ne,oe,null,null,fe,ye,je,he,fe,ye,je,he,q,$,null,null,at):(Z(v.ec,v.fc,ne,oe,_e,Te,ze,ke,fe,ye,je,he,q,$-E.A,q,$,at),++C);Be+2<He;Be+=2)_e=fe,Te=ye,ze=je,ke=he,ye+=m.Rc,he+=m.Rc,$+=2*E.A,Z(ne,(oe+=2*m.fa)-m.fa,ne,oe,_e,Te,ze,ke,fe,ye,je,he,q,$-E.A,q,$,at);return oe+=m.fa,m.j+He<m.o?(s(v.ec,v.fc,ne,oe,at),s(v.cc,v.dc,fe,ye,Ze),s(v.Mc,v.Nc,je,he,Ze),C--):1&He||Z(ne,oe,null,null,fe,ye,je,he,fe,ye,je,he,q,$+E.A,null,null,at),C}function ht(m,v,C){var E=m.F,q=[m.J];if(E!=null){var $=m.U,Z=v.ba.S,ne=Z==Xc||Z==Yl;v=v.ba.f.RGBA;var oe=[0],fe=m.ka;oe[0]=m.T,m.Kb&&(fe==0?--oe[0]:(--fe,q[0]-=m.width),m.j+m.ka+m.T==m.o&&(oe[0]=m.o-m.j-fe));var ye=v.eb;fe=v.fb+fe*v.A,m=Gc(E,q[0],m.width,$,oe,ye,fe+(ne?0:3),v.A),e(C==oe),m&&Et(Z)&&sl(ye,fe,ne,$,oe,v.A)}return 0}function wt(m){var v=m.ma,C=v.ba.S,E=11>C,q=C==Ls||C==Ti||C==Xc||C==Wl||C==12||Et(C);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Ha(v.Oa,m,q?11:12))return 0;if(q&&Et(C)&&Pc(),m.da)alert("todo:use_scaling");else{if(E){if(v.Ib=Pe,m.Kb){if(C=m.U+1>>1,v.memory=o(m.U+2*C),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+m.U,v.Mc=v.cc,v.Nc=v.dc+C,v.Ib=Qe,Pc()}}else alert("todo:EmitYUV");q&&(v.Jb=ht,E&&Zi())}if(E&&!Lo){for(m=0;256>m;++m)Ss[m]=89858*(m-128)+Zl>>Oi,e0[m]=-22014*(m-128)+Zl,Dd[m]=-45773*(m-128),Wu[m]=113618*(m-128)+Zl>>Oi;for(m=ll;m<Mo;++m)v=76283*(m-16)+Zl>>Oi,t0[m-ll]=js(v,255),n0[m-ll]=js(v+8>>4,15);Lo=1}return 1}function lt(m){var v=m.ma,C=m.U,E=m.T;return e(!(1&m.ka)),0>=C||0>=E?0:(C=v.Ib(m,v),v.Jb!=null&&v.Jb(m,v,C),v.Dc+=C,1)}function Zt(m){m.ma.memory=null}function Cn(m,v,C,E){return G(m,8)!=47?0:(v[0]=G(m,14)+1,C[0]=G(m,14)+1,E[0]=G(m,1),G(m,3)!=0?0:!m.h)}function xn(m,v){if(4>m)return m+1;var C=m-2>>1;return(2+(1&m)<<C)+G(v,C)+1}function tn(m,v){return 120<v?v-120:1<=(C=((C=ji[v-1])>>4)*m+(8-(15&C)))?C:1;var C}function Kt(m,v,C){var E=X(C),q=m[v+=255&E].g-8;return 0<q&&(ce(C,C.u+8),E=X(C),v+=m[v].value,v+=E&(1<<q)-1),ce(C,C.u+m[v].g),m[v].value}function fn(m,v,C){return C.g+=m.g,C.value+=m.value<<v>>>0,e(8>=C.g),m.g}function Qt(m,v,C){var E=m.xc;return e((v=E==0?0:m.vc[m.md*(C>>E)+(v>>E)])<m.Wb),m.Ya[v]}function $n(m,v,C,E){var q=m.ab,$=m.c*v,Z=m.C;v=Z+v;var ne=C,oe=E;for(E=m.Ta,C=m.Ua;0<q--;){var fe=m.gc[q],ye=Z,je=v,he=ne,_e=oe,Te=(oe=E,ne=C,fe.Ea);switch(e(ye<je),e(je<=fe.nc),fe.hc){case 2:Fr(he,_e,(je-ye)*Te,oe,ne);break;case 0:var ze=ye,ke=je,Be=oe,He=ne,at=(Ct=fe).Ea;ze==0&&(ql(he,_e,null,null,1,Be,He),ct(he,_e+1,0,0,at-1,Be,He+1),_e+=at,He+=at,++ze);for(var Ze=1<<Ct.b,Mt=Ze-1,_t=Me(at,Ct.b),Jt=Ct.K,Ct=Ct.w+(ze>>Ct.b)*_t;ze<ke;){var _n=Jt,hr=Ct,ln=1;for(Ul(he,_e,Be,He-at,1,Be,He);ln<at;){var St=(ln&~Mt)+Ze;St>at&&(St=at),(0,Wa[_n[hr++]>>8&15])(he,_e+ +ln,Be,He+ln-at,St-ln,Be,He+ln),ln=St}_e+=at,He+=at,++ze&Mt||(Ct+=_t)}je!=fe.nc&&s(oe,ne-Te,oe,ne+(je-ye-1)*Te,Te);break;case 1:for(Te=he,ke=_e,at=(he=fe.Ea)-(He=he&~(Be=(_e=1<<fe.b)-1)),ze=Me(he,fe.b),Ze=fe.K,fe=fe.w+(ye>>fe.b)*ze;ye<je;){for(Mt=Ze,_t=fe,Jt=new ot,Ct=ke+He,_n=ke+he;ke<Ct;)mt(Mt[_t++],Jt),Hl(Jt,Te,ke,_e,oe,ne),ke+=_e,ne+=_e;ke<_n&&(mt(Mt[_t++],Jt),Hl(Jt,Te,ke,at,oe,ne),ke+=at,ne+=at),++ye&Be||(fe+=ze)}break;case 3:if(he==oe&&_e==ne&&0<fe.b){for(ke=oe,he=Te=ne+(je-ye)*Te-(He=(je-ye)*Me(fe.Ea,fe.b)),_e=oe,Be=ne,ze=[],He=(at=He)-1;0<=He;--He)ze[He]=_e[Be+He];for(He=at-1;0<=He;--He)ke[he+He]=ze[He];Ru(fe,ye,je,oe,Te,oe,ne)}else Ru(fe,ye,je,he,_e,oe,ne)}ne=E,oe=C}oe!=C&&s(E,C,ne,oe,$)}function lr(m,v){var C=m.V,E=m.Ba+m.c*m.C,q=v-m.C;if(e(v<=m.l.o),e(16>=q),0<q){var $=m.l,Z=m.Ta,ne=m.Ua,oe=$.width;if($n(m,q,C,E),q=ne=[ne],e((C=m.C)<(E=v)),e($.v<$.va),E>$.o&&(E=$.o),C<$.j){var fe=$.j-C;C=$.j,q[0]+=fe*oe}if(C>=E?C=0:(q[0]+=4*$.v,$.ka=C-$.j,$.U=$.va-$.v,$.T=E-C,C=1),C){if(ne=ne[0],11>(C=m.ca).S){var ye=C.f.RGBA,je=(E=C.S,q=$.U,$=$.T,fe=ye.eb,ye.A),he=$;for(ye=ye.fb+m.Ma*ye.A;0<he--;){var _e=Z,Te=ne,ze=q,ke=fe,Be=ye;switch(E){case Vu:Gl(_e,Te,ze,ke,Be);break;case Ls:Ya(_e,Te,ze,ke,Be);break;case Zc:Ya(_e,Te,ze,ke,Be),sl(ke,Be,0,ze,1,0);break;case Bu:nl(_e,Te,ze,ke,Be);break;case Ti:vt(_e,Te,ze,ke,Be,1);break;case zu:vt(_e,Te,ze,ke,Be,1),sl(ke,Be,0,ze,1,0);break;case Xc:vt(_e,Te,ze,ke,Be,0);break;case Yl:vt(_e,Te,ze,ke,Be,0),sl(ke,Be,1,ze,1,0);break;case Wl:$a(_e,Te,ze,ke,Be);break;case Pu:$a(_e,Te,ze,ke,Be),Ci(ke,Be,ze,1,0);break;case Co:xa(_e,Te,ze,ke,Be);break;default:e(0)}ne+=oe,ye+=je}m.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=C.height)}}m.C=v,e(m.C<=m.i)}function vn(m){var v;if(0<m.ua)return 0;for(v=0;v<m.Wb;++v){var C=m.Ya[v].G,E=m.Ya[v].H;if(0<C[1][E[1]+0].g||0<C[2][E[2]+0].g||0<C[3][E[3]+0].g)return 0}return 1}function Bn(m,v,C,E,q,$){if(m.Z!=0){var Z=m.qd,ne=m.rd;for(e(Qa[m.Z]!=null);v<C;++v)Qa[m.Z](Z,ne,E,q,E,q,$),Z=E,ne=q,q+=$;m.qd=Z,m.rd=ne}}function dn(m,v){var C=m.l.ma,E=C.Z==0||C.Z==1?m.l.j:m.C;if(E=m.C<E?E:m.C,e(v<=m.l.o),v>E){var q=m.l.width,$=C.ca,Z=C.tb+q*E,ne=m.V,oe=m.Ba+m.c*E,fe=m.gc;e(m.ab==1),e(fe[0].hc==3),ya(fe[0],E,v,ne,oe,$,Z),Bn(C,E,v,$,Z,q)}m.C=m.Ma=v}function sn(m,v,C,E,q,$,Z){var ne=m.$/E,oe=m.$%E,fe=m.m,ye=m.s,je=C+m.$,he=je;q=C+E*q;var _e=C+E*$,Te=280+ye.ua,ze=m.Pb?ne:16777216,ke=0<ye.ua?ye.Wa:null,Be=ye.wc,He=je<_e?Qt(ye,oe,ne):null;e(m.C<$),e(_e<=q);var at=!1;e:for(;;){for(;at||je<_e;){var Ze=0;if(ne>=ze){var Mt=je-C;e((ze=m).Pb),ze.wd=ze.m,ze.xd=Mt,0<ze.s.ua&&De(ze.s.Wa,ze.s.vb),ze=ne+To}if(oe&Be||(He=Qt(ye,oe,ne)),e(He!=null),He.Qb&&(v[je]=He.qb,at=!0),!at)if(pe(fe),He.jc){Ze=fe,Mt=v;var _t=je,Jt=He.pd[X(Ze)&Ao-1];e(He.jc),256>Jt.g?(ce(Ze,Ze.u+Jt.g),Mt[_t]=Jt.value,Ze=0):(ce(Ze,Ze.u+Jt.g-256),e(256<=Jt.value),Ze=Jt.value),Ze==0&&(at=!0)}else Ze=Kt(He.G[0],He.H[0],fe);if(fe.h)break;if(at||256>Ze){if(!at)if(He.nd)v[je]=(He.qb|Ze<<8)>>>0;else{if(pe(fe),at=Kt(He.G[1],He.H[1],fe),pe(fe),Mt=Kt(He.G[2],He.H[2],fe),_t=Kt(He.G[3],He.H[3],fe),fe.h)break;v[je]=(_t<<24|at<<16|Ze<<8|Mt)>>>0}if(at=!1,++je,++oe>=E&&(oe=0,++ne,Z!=null&&ne<=$&&!(ne%16)&&Z(m,ne),ke!=null))for(;he<je;)Ze=v[he++],ke.X[(506832829*Ze&4294967295)>>>ke.Mb]=Ze}else if(280>Ze){if(Ze=xn(Ze-256,fe),Mt=Kt(He.G[4],He.H[4],fe),pe(fe),Mt=tn(E,Mt=xn(Mt,fe)),fe.h)break;if(je-C<Mt||q-je<Ze)break e;for(_t=0;_t<Ze;++_t)v[je+_t]=v[je+_t-Mt];for(je+=Ze,oe+=Ze;oe>=E;)oe-=E,++ne,Z!=null&&ne<=$&&!(ne%16)&&Z(m,ne);if(e(je<=q),oe&Be&&(He=Qt(ye,oe,ne)),ke!=null)for(;he<je;)Ze=v[he++],ke.X[(506832829*Ze&4294967295)>>>ke.Mb]=Ze}else{if(!(Ze<Te))break e;for(at=Ze-280,e(ke!=null);he<je;)Ze=v[he++],ke.X[(506832829*Ze&4294967295)>>>ke.Mb]=Ze;Ze=je,e(!(at>>>(Mt=ke).Xa)),v[Ze]=Mt.X[at],at=!0}at||e(fe.h==ie(fe))}if(m.Pb&&fe.h&&je<q)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&De(m.s.vb,m.s.Wa);else{if(fe.h)break e;Z?.(m,ne>$?$:ne),m.a=0,m.$=je-C}return 1}return m.a=3,0}function Se(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var v=m.Wa;v!=null&&(v.X=null),m.vb=null,e(m!=null)}function Re(){var m=new Yt;return m==null?null:(m.a=0,m.xb=nf,an("Predictor","VP8LPredictors"),an("Predictor","VP8LPredictors_C"),an("PredictorAdd","VP8LPredictorsAdd"),an("PredictorAdd","VP8LPredictorsAdd_C"),Fr=yt,Hl=bt,Gl=rn,Ya=Vt,$a=Nt,xa=xt,nl=Tt,B.VP8LMapColor32b=va,B.VP8LMapColor8b=ys,m)}function $e(m,v,C,E,q){var $=1,Z=[m],ne=[v],oe=E.m,fe=E.s,ye=null,je=0;e:for(;;){if(C)for(;$&&G(oe,1);){var he=Z,_e=ne,Te=E,ze=1,ke=Te.m,Be=Te.gc[Te.ab],He=G(ke,2);if(Te.Oc&1<<He)$=0;else{switch(Te.Oc|=1<<He,Be.hc=He,Be.Ea=he[0],Be.nc=_e[0],Be.K=[null],++Te.ab,e(4>=Te.ab),He){case 0:case 1:Be.b=G(ke,3)+2,ze=$e(Me(Be.Ea,Be.b),Me(Be.nc,Be.b),0,Te,Be.K),Be.K=Be.K[0];break;case 3:var at,Ze=G(ke,8)+1,Mt=16<Ze?0:4<Ze?1:2<Ze?2:3;if(he[0]=Me(Be.Ea,Mt),Be.b=Mt,at=ze=$e(Ze,1,0,Te,Be.K)){var _t,Jt=Ze,Ct=Be,_n=1<<(8>>Ct.b),hr=o(_n);if(hr==null)at=0;else{var ln=Ct.K[0],St=Ct.w;for(hr[0]=Ct.K[0][0],_t=1;_t<1*Jt;++_t)hr[_t]=it(ln[St+_t],hr[_t-1]);for(;_t<4*_n;++_t)hr[_t]=0;Ct.K[0]=null,Ct.K[0]=hr,at=1}}ze=at;break;case 2:break;default:e(0)}$=ze}}if(Z=Z[0],ne=ne[0],$&&G(oe,1)&&!($=1<=(je=G(oe,4))&&11>=je)){E.a=3;break e}var pt;if(pt=$)t:{var vr,Ht,hn,Hn=E,es=Z,Ns=ne,nr=je,Ur=C,Os=Hn.m,Hr=Hn.s,yn=[null],In=1,yr=0,Pn=Ei[nr];n:for(;;){if(Ur&&G(Os,1)){var ts=G(Os,3)+2,xr=Me(es,ts),Fn=Me(Ns,ts),zr=xr*Fn;if(!$e(xr,Fn,0,Hn,yn))break n;for(yn=yn[0],Hr.xc=ts,vr=0;vr<zr;++vr){var Gn=yn[vr]>>8&65535;yn[vr]=Gn,Gn>=In&&(In=Gn+1)}}if(Os.h)break n;for(Ht=0;5>Ht;++Ht){var Gr=al[Ht];!Ht&&0<nr&&(Gr+=1<<nr),yr<Gr&&(yr=Gr)}var Wr=u(In*Pn,J),Xn=In,Dn=u(Xn,ae);if(Dn==null)var Ds=null;else e(65536>=Xn),Ds=Dn;var kr=o(yr);if(Ds==null||kr==null||Wr==null){Hn.a=1;break n}var zt=Wr;for(vr=hn=0;vr<In;++vr){var Pt=Ds[vr],Vn=Pt.G,ei=Pt.H,Di=0,Gs=1,Yr=0;for(Ht=0;5>Ht;++Ht){Gr=al[Ht],Vn[Ht]=zt,ei[Ht]=hn,!Ht&&0<nr&&(Gr+=1<<nr);s:{var Oo,Do=Gr,$u=Hn,rr=kr,sf=zt,af=hn,Xu=0,Ka=$u.m,r0=G(Ka,1);if(a(rr,0,0,Do),r0){var of=G(Ka,1)+1,lf=G(Ka,1),Zu=G(Ka,lf==0?1:8);rr[Zu]=1,of==2&&(rr[Zu=G(Ka,8)]=1);var ls=1}else{var jr=o(19),eu=G(Ka,4)+4;if(19<eu){$u.a=3;var Ro=0;break s}for(Oo=0;Oo<eu;++Oo)jr[Qc[Oo]]=G(Ka,3);var Kl=void 0,cl=void 0,Sa=$u,Qu=jr,Jl=Do,Ku=rr,Ju=0,Ja=Sa.m,cf=8,uf=u(128,J);r:for(;F(uf,0,7,Qu,19);){if(G(Ja,1)){var Rd=2+2*G(Ja,3);if((Kl=2+G(Ja,Rd))>Jl)break r}else Kl=Jl;for(cl=0;cl<Jl&&Kl--;){pe(Ja);var hf=uf[0+(127&X(Ja))];ce(Ja,Ja.u+hf.g);var Io=hf.value;if(16>Io)Ku[cl++]=Io,Io!=0&&(cf=Io);else{var Id=Io==16,Fd=Io-16,Vd=$l[Fd],ff=G(Ja,ki[Fd])+Vd;if(cl+ff>Jl)break r;for(var Bd=Id?cf:0;0<ff--;)Ku[cl++]=Bd}}Ju=1;break r}Ju||(Sa.a=3),ls=Ju}(ls=ls&&!Ka.h)&&(Xu=F(sf,af,8,rr,Do)),ls&&Xu!=0?Ro=Xu:($u.a=3,Ro=0)}if(Ro==0)break n;if(Gs&&qu[Ht]==1&&(Gs=zt[hn].g==0),Di+=zt[hn].g,hn+=Ro,3>=Ht){var ul,eh=kr[0];for(ul=1;ul<Gr;++ul)kr[ul]>eh&&(eh=kr[ul]);Yr+=eh}}if(Pt.nd=Gs,Pt.Qb=0,Gs&&(Pt.qb=(Vn[3][ei[3]+0].value<<24|Vn[1][ei[1]+0].value<<16|Vn[2][ei[2]+0].value)>>>0,Di==0&&256>Vn[0][ei[0]+0].value&&(Pt.Qb=1,Pt.qb+=Vn[0][ei[0]+0].value<<8)),Pt.jc=!Pt.Qb&&6>Yr,Pt.jc){var tu,Na=Pt;for(tu=0;tu<Ao;++tu){var eo=tu,to=Na.pd[eo],th=Na.G[0][Na.H[0]+eo];256<=th.value?(to.g=th.g+256,to.value=th.value):(to.g=0,to.value=0,eo>>=fn(th,8,to),eo>>=fn(Na.G[1][Na.H[1]+eo],16,to),eo>>=fn(Na.G[2][Na.H[2]+eo],0,to),fn(Na.G[3][Na.H[3]+eo],24,to))}}}Hr.vc=yn,Hr.Wb=In,Hr.Ya=Ds,Hr.yc=Wr,pt=1;break t}pt=0}if(!($=pt)){E.a=3;break e}if(0<je){if(fe.ua=1<<je,!Y(fe.Wa,je)){E.a=1,$=0;break e}}else fe.ua=0;var nh=E,hl=Z,zd=ne,ec=nh.s,tc=ec.xc;if(nh.c=hl,nh.i=zd,ec.md=Me(hl,tc),ec.wc=tc==0?-1:(1<<tc)-1,C){E.xb=ko;break e}if((ye=o(Z*ne))==null){E.a=1,$=0;break e}$=($=sn(E,ye,0,Z,ne,ne,null))&&!oe.h;break e}return $?(q!=null?q[0]=ye:(e(ye==null),e(C)),E.$=0,C||Se(fe)):Se(fe),$}function gt(m,v){var C=m.c*m.i,E=C+v+16*v;return e(m.c<=v),m.V=o(E),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+C+v,1)}function $t(m,v){var C=m.C,E=v-C,q=m.V,$=m.Ba+m.c*C;for(e(v<=m.l.o);0<E;){var Z=16<E?16:E,ne=m.l.ma,oe=m.l.width,fe=oe*Z,ye=ne.ca,je=ne.tb+oe*C,he=m.Ta,_e=m.Ua;$n(m,Z,q,$),mi(he,_e,ye,je,fe),Bn(ne,C,C+Z,ye,je,oe),E-=Z,q+=Z*m.c,C+=Z}e(C==v),m.C=m.Ma=v}function Bt(){this.ub=this.yd=this.td=this.Rb=0}function wn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function cr(){this.Yb=(function(){var m=[];return(function v(C,E,q){for(var $=q[E],Z=0;Z<$&&(C.push(q.length>E+1?[]:0),!(q.length<E+1));Z++)v(C[Z],E+1,q)})(m,0,[3,11]),m})()}function Tn(){this.jb=o(3),this.Wc=c([4,8],cr),this.Xc=c([4,17],cr)}function li(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Dr(){this.ld=this.La=this.dd=this.tc=0}function Pr(){this.Na=this.la=0}function Kr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ms(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ci(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dr),this.Y=0,this.ya=Array(new ms),this.aa=0,this.l=new ha}function ui(){this.y=o(16),this.f=o(8),this.ea=o(8)}function wi(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new Bt,this.Kc=new wn,this.ed=new li,this.Qa=new Jn,this.Ic=this.$c=this.Aa=0,this.D=new ci,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,j),this.ia=0,this.pb=u(4,Kr),this.Pa=new Tn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ui),this.Hd=0,this.rb=Array(new Pr),this.sb=0,this.wa=Array(new Dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ms),this.L=this.aa=0,this.gd=c([4,2],Dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function js(m,v){return 0>m?0:m>v?v:m}function ha(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qs(){var m=new wi;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,gi||(gi=Yi)),m}function kn(m,v,C){return m.a==0&&(m.a=v,m.sc=C,m.cb=0),0}function yo(m,v,C){return 3<=C&&m[v+0]==157&&m[v+1]==1&&m[v+2]==42}function _i(m,v){if(m==null)return 0;if(m.a=0,m.sc="OK",v==null)return kn(m,2,"null VP8Io passed to VP8GetHeaders()");var C=v.data,E=v.w,q=v.ha;if(4>q)return kn(m,7,"Truncated header.");var $=C[E+0]|C[E+1]<<8|C[E+2]<<16,Z=m.Od;if(Z.Rb=!(1&$),Z.td=$>>1&7,Z.yd=$>>4&1,Z.ub=$>>5,3<Z.td)return kn(m,3,"Incorrect keyframe parameters.");if(!Z.yd)return kn(m,4,"Frame not displayable.");E+=3,q-=3;var ne=m.Kc;if(Z.Rb){if(7>q)return kn(m,7,"cannot parse picture header");if(!yo(C,E,q))return kn(m,3,"Bad code word");ne.c=16383&(C[E+4]<<8|C[E+3]),ne.Td=C[E+4]>>6,ne.i=16383&(C[E+6]<<8|C[E+5]),ne.Ud=C[E+6]>>6,E+=7,q-=7,m.za=ne.c+15>>4,m.Ub=ne.i+15>>4,v.width=ne.c,v.height=ne.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,a(($=m.Pa).jb,0,255,$.jb.length),e(($=m.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,a($.Zb,0,0,$.Zb.length),a($.Lb,0,0,$.Lb)}if(Z.ub>q)return kn(m,7,"bad partition length");H($=m.m,C,E,Z.ub),E+=Z.ub,q-=Z.ub,Z.Rb&&(ne.Ld=Ne($),ne.Kd=Ne($)),ne=m.Qa;var oe,fe=m.Pa;if(e($!=null),e(ne!=null),ne.Cb=Ne($),ne.Cb){if(ne.Bb=Ne($),Ne($)){for(ne.Fb=Ne($),oe=0;4>oe;++oe)ne.Zb[oe]=Ne($)?Q($,7):0;for(oe=0;4>oe;++oe)ne.Lb[oe]=Ne($)?Q($,6):0}if(ne.Bb)for(oe=0;3>oe;++oe)fe.jb[oe]=Ne($)?se($,8):255}else ne.Bb=0;if($.Ka)return kn(m,3,"cannot parse segment header");if((ne=m.ed).zd=Ne($),ne.Tb=se($,6),ne.wb=se($,3),ne.Pc=Ne($),ne.Pc&&Ne($)){for(fe=0;4>fe;++fe)Ne($)&&(ne.vd[fe]=Q($,6));for(fe=0;4>fe;++fe)Ne($)&&(ne.od[fe]=Q($,6))}if(m.L=ne.Tb==0?0:ne.zd?1:2,$.Ka)return kn(m,3,"cannot parse filter header");var ye=q;if(q=oe=E,E=oe+ye,ne=ye,m.Xb=(1<<se(m.m,2))-1,ye<3*(fe=m.Xb))C=7;else{for(oe+=3*fe,ne-=3*fe,ye=0;ye<fe;++ye){var je=C[q+0]|C[q+1]<<8|C[q+2]<<16;je>ne&&(je=ne),H(m.Jc[+ye],C,oe,je),oe+=je,ne-=je,q+=3}H(m.Jc[+fe],C,oe,ne),C=oe<E?0:5}if(C!=0)return kn(m,C,"cannot parse partitions");for(C=se(oe=m.m,7),q=Ne(oe)?Q(oe,4):0,E=Ne(oe)?Q(oe,4):0,ne=Ne(oe)?Q(oe,4):0,fe=Ne(oe)?Q(oe,4):0,oe=Ne(oe)?Q(oe,4):0,ye=m.Qa,je=0;4>je;++je){if(ye.Cb){var he=ye.Zb[je];ye.Fb||(he+=C)}else{if(0<je){m.pb[je]=m.pb[0];continue}he=C}var _e=m.pb[je];_e.Sc[0]=Mi[js(he+q,127)],_e.Sc[1]=Li[js(he+0,127)],_e.Eb[0]=2*Mi[js(he+E,127)],_e.Eb[1]=101581*Li[js(he+ne,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=Mi[js(he+fe,117)],_e.Qc[1]=Li[js(he+oe,127)],_e.lc=he+oe}if(!Z.Rb)return kn(m,4,"Not a key frame.");for(Ne($),Z=m.Pa,C=0;4>C;++C){for(q=0;8>q;++q)for(E=0;3>E;++E)for(ne=0;11>ne;++ne)fe=we($,ur[C][q][E][ne])?se($,8):Od[C][q][E][ne],Z.Wc[C][q].Yb[E][ne]=fe;for(q=0;17>q;++q)Z.Xc[C][q]=Z.Wc[C][Sn[q]]}return m.kc=Ne($),m.kc&&(m.Bd=se($,8)),m.cb=1}function Yi(m,v,C,E,q,$,Z){var ne=v[q].Yb[C];for(C=0;16>q;++q){if(!we(m,ne[C+0]))return q;for(;!we(m,ne[C+1]);)if(ne=v[++q].Yb[0],C=0,q==16)return 16;var oe=v[q+1].Yb;if(we(m,ne[C+2])){var fe=m,ye=0;if(we(fe,(he=ne)[(je=C)+3]))if(we(fe,he[je+6])){for(ne=0,je=2*(ye=we(fe,he[je+8]))+(he=we(fe,he[je+9+ye])),ye=0,he=Ld[je];he[ne];++ne)ye+=ye+we(fe,he[ne]);ye+=3+(8<<je)}else we(fe,he[je+7])?(ye=7+2*we(fe,165),ye+=we(fe,145)):ye=5+we(fe,159);else ye=we(fe,he[je+4])?3+we(fe,he[je+5]):2;ne=oe[2]}else ye=1,ne=oe[1];oe=Z+tf[q],0>(fe=m).b&&me(fe);var je,he=fe.b,_e=(je=fe.Ca>>1)-(fe.I>>he)>>31;--fe.b,fe.Ca+=_e,fe.Ca|=1,fe.I-=(je+1&_e)<<he,$[oe]=((ye^_e)-_e)*E[(0<q)+0]}return 16}function xo(m){var v=m.rb[m.sb-1];v.la=0,v.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function gs(m,v,C,E,q){q=m[v+C+32*E]+(q>>3),m[v+C+32*E]=-256&q?0>q?0:255:q}function Rr(m,v,C,E,q,$){gs(m,v,0,C,E+q),gs(m,v,1,C,E+$),gs(m,v,2,C,E-$),gs(m,v,3,C,E-q)}function Cr(m){return(20091*m>>16)+m}function wo(m,v,C,E){var q,$=0,Z=o(16);for(q=0;4>q;++q){var ne=m[v+0]+m[v+8],oe=m[v+0]-m[v+8],fe=(35468*m[v+4]>>16)-Cr(m[v+12]),ye=Cr(m[v+4])+(35468*m[v+12]>>16);Z[$+0]=ne+ye,Z[$+1]=oe+fe,Z[$+2]=oe-fe,Z[$+3]=ne-ye,$+=4,v++}for(q=$=0;4>q;++q)ne=(m=Z[$+0]+4)+Z[$+8],oe=m-Z[$+8],fe=(35468*Z[$+4]>>16)-Cr(Z[$+12]),gs(C,E,0,0,ne+(ye=Cr(Z[$+4])+(35468*Z[$+12]>>16))),gs(C,E,1,0,oe+fe),gs(C,E,2,0,oe-fe),gs(C,E,3,0,ne-ye),$++,E+=32}function Rl(m,v,C,E){var q=m[v+0]+4,$=35468*m[v+4]>>16,Z=Cr(m[v+4]),ne=35468*m[v+1]>>16;Rr(C,E,0,q+Z,m=Cr(m[v+1]),ne),Rr(C,E,1,q+$,m,ne),Rr(C,E,2,q-$,m,ne),Rr(C,E,3,q-Z,m,ne)}function Oc(m,v,C,E,q){wo(m,v,C,E),q&&wo(m,v+16,C,E+4)}function Ps(m,v,C,E){Xa(m,v+0,C,E,1),Xa(m,v+32,C,E+128,1)}function Dc(m,v,C,E){var q;for(m=m[v+0]+4,q=0;4>q;++q)for(v=0;4>v;++v)gs(C,E,v,q,m)}function Rc(m,v,C,E){m[v+0]&&zn(m,v+0,C,E),m[v+16]&&zn(m,v+16,C,E+4),m[v+32]&&zn(m,v+32,C,E+128),m[v+48]&&zn(m,v+48,C,E+128+4)}function $i(m,v,C,E){var q,$=o(16);for(q=0;4>q;++q){var Z=m[v+0+q]+m[v+12+q],ne=m[v+4+q]+m[v+8+q],oe=m[v+4+q]-m[v+8+q],fe=m[v+0+q]-m[v+12+q];$[0+q]=Z+ne,$[8+q]=Z-ne,$[4+q]=fe+oe,$[12+q]=fe-oe}for(q=0;4>q;++q)Z=(m=$[0+4*q]+3)+$[3+4*q],ne=$[1+4*q]+$[2+4*q],oe=$[1+4*q]-$[2+4*q],fe=m-$[3+4*q],C[E+0]=Z+ne>>3,C[E+16]=fe+oe>>3,C[E+32]=Z-ne>>3,C[E+48]=fe-oe>>3,E+=64}function Xo(m,v,C){var E,q=v-32,$=Ms,Z=255-m[q-1];for(E=0;E<C;++E){var ne,oe=$,fe=Z+m[v-1];for(ne=0;ne<C;++ne)m[v+ne]=oe[fe+m[q+ne]];v+=32}}function Tu(m,v){Xo(m,v,4)}function ku(m,v){Xo(m,v,8)}function Ic(m,v){Xo(m,v,16)}function Fc(m,v){var C;for(C=0;16>C;++C)s(m,v+32*C,m,v-32,16)}function ju(m,v){var C;for(C=16;0<C;--C)a(m,v,m[v-1],16),v+=32}function Ks(m,v,C){var E;for(E=0;16>E;++E)a(v,C+32*E,m,16)}function Xi(m,v){var C,E=16;for(C=0;16>C;++C)E+=m[v-1+32*C]+m[v+C-32];Ks(E>>5,m,v)}function Oa(m,v){var C,E=8;for(C=0;16>C;++C)E+=m[v-1+32*C];Ks(E>>4,m,v)}function Zo(m,v){var C,E=8;for(C=0;16>C;++C)E+=m[v+C-32];Ks(E>>4,m,v)}function _o(m,v){Ks(128,m,v)}function Ut(m,v,C){return m+2*v+C+2>>2}function Eu(m,v){var C,E=v-32;for(E=new Uint8Array([Ut(m[E-1],m[E+0],m[E+1]),Ut(m[E+0],m[E+1],m[E+2]),Ut(m[E+1],m[E+2],m[E+3]),Ut(m[E+2],m[E+3],m[E+4])]),C=0;4>C;++C)s(m,v+32*C,E,0,E.length)}function Vc(m,v){var C=m[v-1],E=m[v-1+32],q=m[v-1+64],$=m[v-1+96];Ve(m,v+0,16843009*Ut(m[v-1-32],C,E)),Ve(m,v+32,16843009*Ut(C,E,q)),Ve(m,v+64,16843009*Ut(E,q,$)),Ve(m,v+96,16843009*Ut(q,$,$))}function Mu(m,v){var C,E=4;for(C=0;4>C;++C)E+=m[v+C-32]+m[v-1+32*C];for(E>>=3,C=0;4>C;++C)a(m,v+32*C,E,4)}function hi(m,v){var C=m[v-1+0],E=m[v-1+32],q=m[v-1+64],$=m[v-1-32],Z=m[v+0-32],ne=m[v+1-32],oe=m[v+2-32],fe=m[v+3-32];m[v+0+96]=Ut(E,q,m[v-1+96]),m[v+1+96]=m[v+0+64]=Ut(C,E,q),m[v+2+96]=m[v+1+64]=m[v+0+32]=Ut($,C,E),m[v+3+96]=m[v+2+64]=m[v+1+32]=m[v+0+0]=Ut(Z,$,C),m[v+3+64]=m[v+2+32]=m[v+1+0]=Ut(ne,Z,$),m[v+3+32]=m[v+2+0]=Ut(oe,ne,Z),m[v+3+0]=Ut(fe,oe,ne)}function bs(m,v){var C=m[v+1-32],E=m[v+2-32],q=m[v+3-32],$=m[v+4-32],Z=m[v+5-32],ne=m[v+6-32],oe=m[v+7-32];m[v+0+0]=Ut(m[v+0-32],C,E),m[v+1+0]=m[v+0+32]=Ut(C,E,q),m[v+2+0]=m[v+1+32]=m[v+0+64]=Ut(E,q,$),m[v+3+0]=m[v+2+32]=m[v+1+64]=m[v+0+96]=Ut(q,$,Z),m[v+3+32]=m[v+2+64]=m[v+1+96]=Ut($,Z,ne),m[v+3+64]=m[v+2+96]=Ut(Z,ne,oe),m[v+3+96]=Ut(ne,oe,oe)}function Bc(m,v){var C=m[v-1+0],E=m[v-1+32],q=m[v-1+64],$=m[v-1-32],Z=m[v+0-32],ne=m[v+1-32],oe=m[v+2-32],fe=m[v+3-32];m[v+0+0]=m[v+1+64]=$+Z+1>>1,m[v+1+0]=m[v+2+64]=Z+ne+1>>1,m[v+2+0]=m[v+3+64]=ne+oe+1>>1,m[v+3+0]=oe+fe+1>>1,m[v+0+96]=Ut(q,E,C),m[v+0+64]=Ut(E,C,$),m[v+0+32]=m[v+1+96]=Ut(C,$,Z),m[v+1+32]=m[v+2+96]=Ut($,Z,ne),m[v+2+32]=m[v+3+96]=Ut(Z,ne,oe),m[v+3+32]=Ut(ne,oe,fe)}function Qo(m,v){var C=m[v+0-32],E=m[v+1-32],q=m[v+2-32],$=m[v+3-32],Z=m[v+4-32],ne=m[v+5-32],oe=m[v+6-32],fe=m[v+7-32];m[v+0+0]=C+E+1>>1,m[v+1+0]=m[v+0+64]=E+q+1>>1,m[v+2+0]=m[v+1+64]=q+$+1>>1,m[v+3+0]=m[v+2+64]=$+Z+1>>1,m[v+0+32]=Ut(C,E,q),m[v+1+32]=m[v+0+96]=Ut(E,q,$),m[v+2+32]=m[v+1+96]=Ut(q,$,Z),m[v+3+32]=m[v+2+96]=Ut($,Z,ne),m[v+3+64]=Ut(Z,ne,oe),m[v+3+96]=Ut(ne,oe,fe)}function fi(m,v){var C=m[v-1+0],E=m[v-1+32],q=m[v-1+64],$=m[v-1+96];m[v+0+0]=C+E+1>>1,m[v+2+0]=m[v+0+32]=E+q+1>>1,m[v+2+32]=m[v+0+64]=q+$+1>>1,m[v+1+0]=Ut(C,E,q),m[v+3+0]=m[v+1+32]=Ut(E,q,$),m[v+3+32]=m[v+1+64]=Ut(q,$,$),m[v+3+64]=m[v+2+64]=m[v+0+96]=m[v+1+96]=m[v+2+96]=m[v+3+96]=$}function Ko(m,v){var C=m[v-1+0],E=m[v-1+32],q=m[v-1+64],$=m[v-1+96],Z=m[v-1-32],ne=m[v+0-32],oe=m[v+1-32],fe=m[v+2-32];m[v+0+0]=m[v+2+32]=C+Z+1>>1,m[v+0+32]=m[v+2+64]=E+C+1>>1,m[v+0+64]=m[v+2+96]=q+E+1>>1,m[v+0+96]=$+q+1>>1,m[v+3+0]=Ut(ne,oe,fe),m[v+2+0]=Ut(Z,ne,oe),m[v+1+0]=m[v+3+32]=Ut(C,Z,ne),m[v+1+32]=m[v+3+64]=Ut(E,C,Z),m[v+1+64]=m[v+3+96]=Ut(q,E,C),m[v+1+96]=Ut($,q,E)}function fa(m,v){var C;for(C=0;8>C;++C)s(m,v+32*C,m,v-32,8)}function Lu(m,v){var C;for(C=0;8>C;++C)a(m,v,m[v-1],8),v+=32}function Si(m,v,C){var E;for(E=0;8>E;++E)a(v,C+32*E,m,8)}function Il(m,v){var C,E=8;for(C=0;8>C;++C)E+=m[v+C-32]+m[v-1+32*C];Si(E>>4,m,v)}function Fl(m,v){var C,E=4;for(C=0;8>C;++C)E+=m[v+C-32];Si(E>>3,m,v)}function as(m,v){var C,E=4;for(C=0;8>C;++C)E+=m[v-1+32*C];Si(E>>3,m,v)}function da(m,v){Si(128,m,v)}function Ni(m,v,C){var E=m[v-C],q=m[v+0],$=3*(q-E)+Za[1020+m[v-2*C]-m[v+C]],Z=$c[112+($+4>>3)];m[v-C]=Ms[255+E+$c[112+($+3>>3)]],m[v+0]=Ms[255+q-Z]}function Da(m,v,C,E){var q=m[v+0],$=m[v+C];return xs[255+m[v-2*C]-m[v-C]]>E||xs[255+$-q]>E}function Vl(m,v,C,E){return 4*xs[255+m[v-C]-m[v+0]]+xs[255+m[v-2*C]-m[v+C]]<=E}function Jo(m,v,C,E,q){var $=m[v-3*C],Z=m[v-2*C],ne=m[v-C],oe=m[v+0],fe=m[v+C],ye=m[v+2*C],je=m[v+3*C];return 4*xs[255+ne-oe]+xs[255+Z-fe]>E?0:xs[255+m[v-4*C]-$]<=q&&xs[255+$-Z]<=q&&xs[255+Z-ne]<=q&&xs[255+je-ye]<=q&&xs[255+ye-fe]<=q&&xs[255+fe-oe]<=q}function Ra(m,v,C,E){var q=2*E+1;for(E=0;16>E;++E)Vl(m,v+E,C,q)&&Ni(m,v+E,C)}function Ia(m,v,C,E){var q=2*E+1;for(E=0;16>E;++E)Vl(m,v+E*C,1,q)&&Ni(m,v+E*C,1)}function el(m,v,C,E){var q;for(q=3;0<q;--q)Ra(m,v+=4*C,C,E)}function zc(m,v,C,E){var q;for(q=3;0<q;--q)Ia(m,v+=4,C,E)}function Fa(m,v,C,E,q,$,Z,ne){for($=2*$+1;0<q--;){if(Jo(m,v,C,$,Z))if(Da(m,v,C,ne))Ni(m,v,C);else{var oe=m,fe=v,ye=C,je=oe[fe-2*ye],he=oe[fe-ye],_e=oe[fe+0],Te=oe[fe+ye],ze=oe[fe+2*ye],ke=27*(He=Za[1020+3*(_e-he)+Za[1020+je-Te]])+63>>7,Be=18*He+63>>7,He=9*He+63>>7;oe[fe-3*ye]=Ms[255+oe[fe-3*ye]+He],oe[fe-2*ye]=Ms[255+je+Be],oe[fe-ye]=Ms[255+he+ke],oe[fe+0]=Ms[255+_e-ke],oe[fe+ye]=Ms[255+Te-Be],oe[fe+2*ye]=Ms[255+ze-He]}v+=E}}function Va(m,v,C,E,q,$,Z,ne){for($=2*$+1;0<q--;){if(Jo(m,v,C,$,Z))if(Da(m,v,C,ne))Ni(m,v,C);else{var oe=m,fe=v,ye=C,je=oe[fe-ye],he=oe[fe+0],_e=oe[fe+ye],Te=$c[112+(4+(ze=3*(he-je))>>3)],ze=$c[112+(ze+3>>3)],ke=Te+1>>1;oe[fe-2*ye]=Ms[255+oe[fe-2*ye]+ke],oe[fe-ye]=Ms[255+je+ze],oe[fe+0]=Ms[255+he-Te],oe[fe+ye]=Ms[255+_e-ke]}v+=E}}function Ou(m,v,C,E,q,$){Fa(m,v,C,1,16,E,q,$)}function Ba(m,v,C,E,q,$){Fa(m,v,1,C,16,E,q,$)}function Du(m,v,C,E,q,$){var Z;for(Z=3;0<Z;--Z)Va(m,v+=4*C,C,1,16,E,q,$)}function S(m,v,C,E,q,$){var Z;for(Z=3;0<Z;--Z)Va(m,v+=4,1,C,16,E,q,$)}function P(m,v,C,E,q,$,Z,ne){Fa(m,v,q,1,8,$,Z,ne),Fa(C,E,q,1,8,$,Z,ne)}function de(m,v,C,E,q,$,Z,ne){Fa(m,v,1,q,8,$,Z,ne),Fa(C,E,1,q,8,$,Z,ne)}function ve(m,v,C,E,q,$,Z,ne){Va(m,v+4*q,q,1,8,$,Z,ne),Va(C,E+4*q,q,1,8,$,Z,ne)}function Ae(m,v,C,E,q,$,Z,ne){Va(m,v+4,1,q,8,$,Z,ne),Va(C,E+4,1,q,8,$,Z,ne)}function Ue(){this.ba=new At,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function kt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dt(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new J}function Yt(){this.xb=this.a=0,this.l=new ha,this.ca=new At,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dt,this.ab=0,this.gc=u(4,kt),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ha,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ln(m,v,C,E,q,$,Z){for(m=m==null?0:m[v+0],v=0;v<Z;++v)q[$+v]=m+C[E+v]&255,m=q[$+v]}function br(m,v,C,E,q,$,Z){var ne;if(m==null)Ln(null,null,C,E,q,$,Z);else for(ne=0;ne<Z;++ne)q[$+ne]=m[v+ne]+C[E+ne]&255}function Ir(m,v,C,E,q,$,Z){if(m==null)Ln(null,null,C,E,q,$,Z);else{var ne,oe=m[v+0],fe=oe,ye=oe;for(ne=0;ne<Z;++ne)fe=ye+(oe=m[v+ne])-fe,ye=C[E+ne]+(-256&fe?0>fe?0:255:fe)&255,fe=oe,q[$+ne]=ye}}function er(m,v,C,E){var q=v.width,$=v.o;if(e(m!=null&&v!=null),0>C||0>=E||C+E>$)return null;if(!m.Cc){if(m.ga==null){var Z;if(m.ga=new on,(Z=m.ga==null)||(Z=v.width*v.o,e(m.Gb.length==0),m.Gb=o(Z),m.Uc=0,m.Gb==null?Z=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Z=1),Z=!Z),!Z){Z=m.ga;var ne=m.Fa,oe=m.P,fe=m.qc,ye=m.mb,je=m.nb,he=oe+1,_e=fe-1,Te=Z.l;if(e(ne!=null&&ye!=null&&v!=null),Qa[0]=null,Qa[1]=Ln,Qa[2]=br,Qa[3]=Ir,Z.ca=ye,Z.tb=je,Z.c=v.width,Z.i=v.height,e(0<Z.c&&0<Z.i),1>=fe)v=0;else if(Z.$a=3&ne[oe+0],Z.Z=ne[oe+0]>>2&3,Z.Lc=ne[oe+0]>>4&3,oe=ne[oe+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||oe)v=0;else if(Te.put=lt,Te.ac=wt,Te.bc=Zt,Te.ma=Z,Te.width=v.width,Te.height=v.height,Te.Da=v.Da,Te.v=v.v,Te.va=v.va,Te.j=v.j,Te.o=v.o,Z.$a)e:{e(Z.$a==1),v=Re();t:for(;;){if(v==null){v=0;break e}if(e(Z!=null),Z.mc=v,v.c=Z.c,v.i=Z.i,v.l=Z.l,v.l.ma=Z,v.l.width=Z.c,v.l.height=Z.i,v.a=0,ge(v.m,ne,he,_e),!$e(Z.c,Z.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&vn(v.s)?(Z.ic=1,ne=v.c*v.i,v.Ta=null,v.Ua=0,v.V=o(ne),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(Z.ic=0,v=gt(v,Z.c)),!v))break t;v=1;break e}Z.mc=null,v=0}else v=_e>=Z.c*Z.i;Z=!v}if(Z)return null;m.ga.Lc!=1?m.Ga=0:E=$-C}e(m.ga!=null),e(C+E<=$);e:{if(v=(ne=m.ga).c,$=ne.l.o,ne.$a==0){if(he=m.rc,_e=m.Vc,Te=m.Fa,oe=m.P+1+C*v,fe=m.mb,ye=m.nb+C*v,e(oe<=m.P+m.qc),ne.Z!=0)for(e(Qa[ne.Z]!=null),Z=0;Z<E;++Z)Qa[ne.Z](he,_e,Te,oe,fe,ye,v),he=fe,_e=ye,ye+=v,oe+=v;else for(Z=0;Z<E;++Z)s(fe,ye,Te,oe,v),he=fe,_e=ye,ye+=v,oe+=v;m.rc=he,m.Vc=_e}else{if(e(ne.mc!=null),v=C+E,e((Z=ne.mc)!=null),e(v<=Z.i),Z.C>=v)v=1;else if(ne.ic||Zi(),ne.ic){ne=Z.V,he=Z.Ba,_e=Z.c;var ze=Z.i,ke=(Te=1,oe=Z.$/_e,fe=Z.$%_e,ye=Z.m,je=Z.s,Z.$),Be=_e*ze,He=_e*v,at=je.wc,Ze=ke<He?Qt(je,fe,oe):null;e(ke<=Be),e(v<=ze),e(vn(je));t:for(;;){for(;!ye.h&&ke<He;){if(fe&at||(Ze=Qt(je,fe,oe)),e(Ze!=null),pe(ye),256>(ze=Kt(Ze.G[0],Ze.H[0],ye)))ne[he+ke]=ze,++ke,++fe>=_e&&(fe=0,++oe<=v&&!(oe%16)&&dn(Z,oe));else{if(!(280>ze)){Te=0;break t}ze=xn(ze-256,ye);var Mt,_t=Kt(Ze.G[4],Ze.H[4],ye);if(pe(ye),!(ke>=(_t=tn(_e,_t=xn(_t,ye)))&&Be-ke>=ze)){Te=0;break t}for(Mt=0;Mt<ze;++Mt)ne[he+ke+Mt]=ne[he+ke+Mt-_t];for(ke+=ze,fe+=ze;fe>=_e;)fe-=_e,++oe<=v&&!(oe%16)&&dn(Z,oe);ke<He&&fe&at&&(Ze=Qt(je,fe,oe))}e(ye.h==ie(ye))}dn(Z,oe>v?v:oe);break t}!Te||ye.h&&ke<Be?(Te=0,Z.a=ye.h?5:3):Z.$=ke,v=Te}else v=sn(Z,Z.V,Z.Ba,Z.c,Z.i,v,$t);if(!v){E=0;break e}}C+E>=$&&(m.Cc=1),E=1}if(!E)return null;if(m.Cc&&((E=m.ga)!=null&&(E.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+C*q}function Jr(m,v,C,E,q,$){for(;0<q--;){var Z,ne=m,oe=v+(C?1:0),fe=m,ye=v+(C?0:3);for(Z=0;Z<E;++Z){var je=fe[ye+4*Z];je!=255&&(je*=32897,ne[oe+4*Z+0]=ne[oe+4*Z+0]*je>>23,ne[oe+4*Z+1]=ne[oe+4*Z+1]*je>>23,ne[oe+4*Z+2]=ne[oe+4*Z+2]*je>>23)}v+=$}}function qr(m,v,C,E,q){for(;0<E--;){var $;for($=0;$<C;++$){var Z=m[v+2*$+0],ne=15&(fe=m[v+2*$+1]),oe=4369*ne,fe=(240&fe|fe>>4)*oe>>16;m[v+2*$+0]=(240&Z|Z>>4)*oe>>16&240|(15&Z|Z<<4)*oe>>16>>4&15,m[v+2*$+1]=240&fe|ne}v+=q}}function vs(m,v,C,E,q,$,Z,ne){var oe,fe,ye=255;for(fe=0;fe<q;++fe){for(oe=0;oe<E;++oe){var je=m[v+oe];$[Z+4*oe]=je,ye&=je}v+=C,Z+=ne}return ye!=255}function za(m,v,C,E,q){var $;for($=0;$<q;++$)C[E+$]=m[v+$]>>8}function Zi(){sl=Jr,Ci=qr,Gc=vs,mi=za}function Pa(m,v,C){B[m]=function(E,q,$,Z,ne,oe,fe,ye,je,he,_e,Te,ze,ke,Be,He,at){var Ze,Mt=at-1>>1,_t=ne[oe+0]|fe[ye+0]<<16,Jt=je[he+0]|_e[Te+0]<<16;e(E!=null);var Ct=3*_t+Jt+131074>>2;for(v(E[q+0],255&Ct,Ct>>16,ze,ke),$!=null&&(Ct=3*Jt+_t+131074>>2,v($[Z+0],255&Ct,Ct>>16,Be,He)),Ze=1;Ze<=Mt;++Ze){var _n=ne[oe+Ze]|fe[ye+Ze]<<16,hr=je[he+Ze]|_e[Te+Ze]<<16,ln=_t+_n+Jt+hr+524296,St=ln+2*(_n+Jt)>>3;Ct=St+_t>>1,_t=(ln=ln+2*(_t+hr)>>3)+_n>>1,v(E[q+2*Ze-1],255&Ct,Ct>>16,ze,ke+(2*Ze-1)*C),v(E[q+2*Ze-0],255&_t,_t>>16,ze,ke+(2*Ze-0)*C),$!=null&&(Ct=ln+Jt>>1,_t=St+hr>>1,v($[Z+2*Ze-1],255&Ct,Ct>>16,Be,He+(2*Ze-1)*C),v($[Z+2*Ze+0],255&_t,_t>>16,Be,He+(2*Ze+0)*C)),_t=_n,Jt=hr}1&at||(Ct=3*_t+Jt+131074>>2,v(E[q+at-1],255&Ct,Ct>>16,ze,ke+(at-1)*C),$!=null&&(Ct=3*Jt+_t+131074>>2,v($[Z+at-1],255&Ct,Ct>>16,Be,He+(at-1)*C)))}}function Pc(){_s[Vu]=ol,_s[Ls]=Xl,_s[Bu]=rf,_s[Ti]=Hu,_s[Xc]=jo,_s[Wl]=_a,_s[Co]=Eo,_s[Zc]=Xl,_s[zu]=Hu,_s[Yl]=jo,_s[Pu]=_a}function Bl(m){return m&-16384?0>m?0:255:m>>Gu}function pa(m,v){return Bl((19077*m>>8)+(26149*v>>8)-14234)}function Qi(m,v,C){return Bl((19077*m>>8)-(6419*v>>8)-(13320*C>>8)+8708)}function tl(m,v){return Bl((19077*m>>8)+(33050*v>>8)-17685)}function qa(m,v,C,E,q){E[q+0]=pa(m,C),E[q+1]=Qi(m,v,C),E[q+2]=tl(m,v)}function os(m,v,C,E,q){E[q+0]=tl(m,v),E[q+1]=Qi(m,v,C),E[q+2]=pa(m,C)}function So(m,v,C,E,q){var $=Qi(m,v,C);v=$<<3&224|tl(m,v)>>3,E[q+0]=248&pa(m,C)|$>>5,E[q+1]=v}function No(m,v,C,E,q){var $=240&tl(m,v)|15;E[q+0]=240&pa(m,C)|Qi(m,v,C)>>4,E[q+1]=$}function zl(m,v,C,E,q){E[q+0]=255,qa(m,v,C,E,q+1)}function ma(m,v,C,E,q){os(m,v,C,E,q),E[q+3]=255}function qs(m,v,C,E,q){qa(m,v,C,E,q),E[q+3]=255}function Ua(m,v,C){B[m]=function(E,q,$,Z,ne,oe,fe,ye,je){for(var he=ye+(-2&je)*C;ye!=he;)v(E[q+0],$[Z+0],ne[oe+0],fe,ye),v(E[q+1],$[Z+0],ne[oe+0],fe,ye+C),q+=2,++Z,++oe,ye+=2*C;1&je&&v(E[q+0],$[Z+0],ne[oe+0],fe,ye)}}function Pl(m,v,C){return C==0?m==0?v==0?6:5:v==0?4:0:C}function qc(m,v,C,E,q){switch(m>>>30){case 3:Xa(v,C,E,q,0);break;case 2:Es(v,C,E,q);break;case 1:zn(v,C,E,q)}}function di(m,v){var C,E,q=v.M,$=v.Nb,Z=m.oc,ne=m.pc+40,oe=m.oc,fe=m.pc+584,ye=m.oc,je=m.pc+600;for(C=0;16>C;++C)Z[ne+32*C-1]=129;for(C=0;8>C;++C)oe[fe+32*C-1]=129,ye[je+32*C-1]=129;for(0<q?Z[ne-1-32]=oe[fe-1-32]=ye[je-1-32]=129:(a(Z,ne-32-1,127,21),a(oe,fe-32-1,127,9),a(ye,je-32-1,127,9)),E=0;E<m.za;++E){var he=v.ya[v.aa+E];if(0<E){for(C=-1;16>C;++C)s(Z,ne+32*C-4,Z,ne+32*C+12,4);for(C=-1;8>C;++C)s(oe,fe+32*C-4,oe,fe+32*C+4,4),s(ye,je+32*C-4,ye,je+32*C+4,4)}var _e=m.Gd,Te=m.Hd+E,ze=he.ad,ke=he.Hc;if(0<q&&(s(Z,ne-32,_e[Te].y,0,16),s(oe,fe-32,_e[Te].f,0,8),s(ye,je-32,_e[Te].ea,0,8)),he.Za){var Be=Z,He=ne-32+16;for(0<q&&(E>=m.za-1?a(Be,He,_e[Te].y[15],4):s(Be,He,_e[Te+1].y,0,4)),C=0;4>C;C++)Be[He+128+C]=Be[He+256+C]=Be[He+384+C]=Be[He+0+C];for(C=0;16>C;++C,ke<<=2)Be=Z,He=ne+Br[C],Tr[he.Ob[C]](Be,He),qc(ke,ze,16*+C,Be,He)}else if(Be=Pl(E,q,he.Ob[0]),Hs[Be](Z,ne),ke!=0)for(C=0;16>C;++C,ke<<=2)qc(ke,ze,16*+C,Z,ne+Br[C]);for(C=he.Gc,Be=Pl(E,q,he.Dd),ta[Be](oe,fe),ta[Be](ye,je),ke=ze,Be=oe,He=fe,255&(he=0|C)&&(170&he?Ai(ke,256,Be,He):On(ke,256,Be,He)),he=ye,ke=je,255&(C>>=8)&&(170&C?Ai(ze,320,he,ke):On(ze,320,he,ke)),q<m.Ub-1&&(s(_e[Te].y,0,Z,ne+480,16),s(_e[Te].f,0,oe,fe+224,8),s(_e[Te].ea,0,ye,je+224,8)),C=8*$*m.B,_e=m.sa,Te=m.ta+16*E+16*$*m.R,ze=m.qa,he=m.ra+8*E+C,ke=m.Ha,Be=m.Ia+8*E+C,C=0;16>C;++C)s(_e,Te+C*m.R,Z,ne+32*C,16);for(C=0;8>C;++C)s(ze,he+C*m.B,oe,fe+32*C,8),s(ke,Be+C*m.B,ye,je+32*C,8)}}function Ki(m,v,C,E,q,$,Z,ne,oe){var fe=[0],ye=[0],je=0,he=oe!=null?oe.kd:0,_e=oe??new Je;if(m==null||12>C)return 7;_e.data=m,_e.w=v,_e.ha=C,v=[v],C=[C],_e.gb=[_e.gb];e:{var Te=v,ze=C,ke=_e.gb;if(e(m!=null),e(ze!=null),e(ke!=null),ke[0]=0,12<=ze[0]&&!t(m,Te[0],"RIFF")){if(t(m,Te[0]+8,"WEBP")){ke=3;break e}var Be=st(m,Te[0]+4);if(12>Be||4294967286<Be){ke=3;break e}if(he&&Be>ze[0]-8){ke=7;break e}ke[0]=Be,Te[0]+=12,ze[0]-=12}ke=0}if(ke!=0)return ke;for(Be=0<_e.gb[0],C=C[0];;){e:{var He=m;ze=v,ke=C;var at=fe,Ze=ye,Mt=Te=[0];if((Ct=je=[je])[0]=0,8>ke[0])ke=7;else{if(!t(He,ze[0],"VP8X")){if(st(He,ze[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var _t=st(He,ze[0]+8),Jt=1+nt(He,ze[0]+12);if(2147483648<=Jt*(He=1+nt(He,ze[0]+15))){ke=3;break e}Mt!=null&&(Mt[0]=_t),at!=null&&(at[0]=Jt),Ze!=null&&(Ze[0]=He),ze[0]+=18,ke[0]-=18,Ct[0]=1}ke=0}}if(je=je[0],Te=Te[0],ke!=0)return ke;if(ze=!!(2&Te),!Be&&je)return 3;if($!=null&&($[0]=!!(16&Te)),Z!=null&&(Z[0]=ze),ne!=null&&(ne[0]=0),Z=fe[0],Te=ye[0],je&&ze&&oe==null){ke=0;break}if(4>C){ke=7;break}if(Be&&je||!Be&&!je&&!t(m,v[0],"ALPH")){C=[C],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{_t=m,ke=v,Be=C;var Ct=_e.gb;at=_e.na,Ze=_e.P,Mt=_e.Sa,Jt=22,e(_t!=null),e(Be!=null),He=ke[0];var _n=Be[0];for(e(at!=null),e(Mt!=null),at[0]=null,Ze[0]=null,Mt[0]=0;;){if(ke[0]=He,Be[0]=_n,8>_n){ke=7;break e}var hr=st(_t,He+4);if(4294967286<hr){ke=3;break e}var ln=8+hr+1&-2;if(Jt+=ln,0<Ct&&Jt>Ct){ke=3;break e}if(!t(_t,He,"VP8 ")||!t(_t,He,"VP8L")){ke=0;break e}if(_n[0]<ln){ke=7;break e}t(_t,He,"ALPH")||(at[0]=_t,Ze[0]=He+8,Mt[0]=hr),He+=ln,_n-=ln}}if(C=C[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],ke!=0)break}C=[C],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(Ct=m,ke=v,Be=C,at=_e.gb[0],Ze=_e.Ja,Mt=_e.xa,_t=ke[0],He=!t(Ct,_t,"VP8 "),Jt=!t(Ct,_t,"VP8L"),e(Ct!=null),e(Be!=null),e(Ze!=null),e(Mt!=null),8>Be[0])ke=7;else{if(He||Jt){if(Ct=st(Ct,_t+4),12<=at&&Ct>at-12){ke=3;break e}if(he&&Ct>Be[0]-8){ke=7;break e}Ze[0]=Ct,ke[0]+=8,Be[0]-=8,Mt[0]=Jt}else Mt[0]=5<=Be[0]&&Ct[_t+0]==47&&!(Ct[_t+4]>>5),Ze[0]=Be[0];ke=0}if(C=C[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],v=v[0],ke!=0)break;if(4294967286<_e.Ja)return 3;if(ne==null||ze||(ne[0]=_e.xa?2:1),Z=[Z],Te=[Te],_e.xa){if(5>C){ke=7;break}ne=Z,he=Te,ze=$,m==null||5>C?m=0:5<=C&&m[v+0]==47&&!(m[v+4]>>5)?(Be=[0],Ct=[0],at=[0],ge(Ze=new z,m,v,C),Cn(Ze,Be,Ct,at)?(ne!=null&&(ne[0]=Be[0]),he!=null&&(he[0]=Ct[0]),ze!=null&&(ze[0]=at[0]),m=1):m=0):m=0}else{if(10>C){ke=7;break}ne=Te,m==null||10>C||!yo(m,v+3,C-3)?m=0:(he=m[v+0]|m[v+1]<<8|m[v+2]<<16,ze=16383&(m[v+7]<<8|m[v+6]),m=16383&(m[v+9]<<8|m[v+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=_e.Ja||!ze||!m?m=0:(Z&&(Z[0]=ze),ne&&(ne[0]=m),m=1))}if(!m||(Z=Z[0],Te=Te[0],je&&(fe[0]!=Z||ye[0]!=Te)))return 3;oe!=null&&(oe[0]=_e,oe.offset=v-oe.w,e(4294967286>v-oe.w),e(oe.offset==oe.ha-C));break}return ke==0||ke==7&&je&&oe==null?($!=null&&($[0]|=_e.na!=null&&0<_e.na.length),E!=null&&(E[0]=Z),q!=null&&(q[0]=Te),0):ke}function Ha(m,v,C){var E=v.width,q=v.height,$=0,Z=0,ne=E,oe=q;if(v.Da=m!=null&&0<m.Da,v.Da&&(ne=m.cd,oe=m.bd,$=m.v,Z=m.j,11>C||($&=-2,Z&=-2),0>$||0>Z||0>=ne||0>=oe||$+ne>E||Z+oe>q))return 0;if(v.v=$,v.j=Z,v.va=$+ne,v.o=Z+oe,v.U=ne,v.T=oe,v.da=m!=null&&0<m.da,v.da){if(!et(ne,oe,C=[m.ib],$=[m.hb]))return 0;v.ib=C[0],v.hb=$[0]}return v.ob=m!=null&&m.ob,v.Kb=m==null||!m.Sd,v.da&&(v.ob=v.ib<3*E/4&&v.hb<3*q/4,v.Kb=0),1}function Uc(m){if(m==null)return 2;if(11>m.S){var v=m.f.RGBA;v.fb+=(m.height-1)*v.A,v.A=-v.A}else v=m.f.kb,m=m.height,v.O+=(m-1)*v.fa,v.fa=-v.fa,v.N+=(m-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(m-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(m-1)*v.lb,v.lb=-v.lb);return 0}function Ji(m,v,C,E){if(E==null||0>=m||0>=v)return 2;if(C!=null){if(C.Da){var q=C.cd,$=C.bd,Z=-2&C.v,ne=-2&C.j;if(0>Z||0>ne||0>=q||0>=$||Z+q>m||ne+$>v)return 2;m=q,v=$}if(C.da){if(!et(m,v,q=[C.ib],$=[C.hb]))return 2;m=q[0],v=$[0]}}E.width=m,E.height=v;e:{var oe=E.width,fe=E.height;if(m=E.S,0>=oe||0>=fe||!(m>=Vu&&13>m))m=2;else{if(0>=E.Rd&&E.sd==null){Z=$=q=v=0;var ye=(ne=oe*Yu[m])*fe;if(11>m||($=(fe+1)/2*(v=(oe+1)/2),m==12&&(Z=(q=oe)*fe)),(fe=o(ye+2*$+Z))==null){m=1;break e}E.sd=fe,11>m?((oe=E.f.RGBA).eb=fe,oe.fb=0,oe.A=ne,oe.size=ye):((oe=E.f.kb).y=fe,oe.O=0,oe.fa=ne,oe.Fd=ye,oe.f=fe,oe.N=0+ye,oe.Ab=v,oe.Cd=$,oe.ea=fe,oe.W=0+ye+$,oe.Db=v,oe.Ed=$,m==12&&(oe.F=fe,oe.J=0+ye+2*$),oe.Tc=Z,oe.lb=q)}if(v=1,q=E.S,$=E.width,Z=E.height,q>=Vu&&13>q)if(11>q)m=E.f.RGBA,v&=(ne=Math.abs(m.A))*(Z-1)+$<=m.size,v&=ne>=$*Yu[q],v&=m.eb!=null;else{m=E.f.kb,ne=($+1)/2,ye=(Z+1)/2,oe=Math.abs(m.fa),fe=Math.abs(m.Ab);var je=Math.abs(m.Db),he=Math.abs(m.lb),_e=he*(Z-1)+$;v&=oe*(Z-1)+$<=m.Fd,v&=fe*(ye-1)+ne<=m.Cd,v=(v&=je*(ye-1)+ne<=m.Ed)&oe>=$&fe>=ne&je>=ne,v&=m.y!=null,v&=m.f!=null,v&=m.ea!=null,q==12&&(v&=he>=$,v&=_e<=m.Tc,v&=m.F!=null)}else v=0;m=v?0:2}}return m!=0||C!=null&&C.fd&&(m=Uc(E)),m}var Ao=64,Js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Us=24,ga=32,ba=8,Ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(m){return m},B.Predictor2=function(m,v,C){return v[C+0]},B.Predictor3=function(m,v,C){return v[C+1]},B.Predictor4=function(m,v,C){return v[C-1]},B.Predictor5=function(m,v,C){return rt(rt(m,v[C+1]),v[C+0])},B.Predictor6=function(m,v,C){return rt(m,v[C-1])},B.Predictor7=function(m,v,C){return rt(m,v[C+0])},B.Predictor8=function(m,v,C){return rt(v[C-1],v[C+0])},B.Predictor9=function(m,v,C){return rt(v[C+0],v[C+1])},B.Predictor10=function(m,v,C){return rt(rt(m,v[C-1]),rt(v[C+0],v[C+1]))},B.Predictor11=function(m,v,C){var E=v[C+0];return 0>=Ke(E>>24&255,m>>24&255,(v=v[C-1])>>24&255)+Ke(E>>16&255,m>>16&255,v>>16&255)+Ke(E>>8&255,m>>8&255,v>>8&255)+Ke(255&E,255&m,255&v)?E:m},B.Predictor12=function(m,v,C){var E=v[C+0];return(Fe((m>>24&255)+(E>>24&255)-((v=v[C-1])>>24&255))<<24|Fe((m>>16&255)+(E>>16&255)-(v>>16&255))<<16|Fe((m>>8&255)+(E>>8&255)-(v>>8&255))<<8|Fe((255&m)+(255&E)-(255&v)))>>>0},B.Predictor13=function(m,v,C){var E=v[C-1];return(tt((m=rt(m,v[C+0]))>>24&255,E>>24&255)<<24|tt(m>>16&255,E>>16&255)<<16|tt(m>>8&255,E>>8&255)<<8|tt(255&m,255&E))>>>0};var ql=B.PredictorAdd0;B.PredictorAdd1=ct,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var Ul=B.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Fr,Ru=B.ColorIndexInverseTransform,va=B.MapARGB,ya=B.VP8LColorIndexInverseTransformAlpha,ys=B.MapAlpha,Wa=B.VP8LPredictorsAdd=[];Wa.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Hl,Gl,Ya,$a,xa,nl,pi,Xa,Es,Ai,zn,On,tr,Vr,wa,ea,rl,Hc,Kh,jd,Ed,Md,Jh,ef,sl,Ci,Gc,mi,il=o(511),Iu=o(2041),Wc=o(225),Yc=o(767),Fu=0,Za=Iu,$c=Wc,Ms=Yc,xs=il,Vu=0,Ls=1,Bu=2,Ti=3,Xc=4,Wl=5,Co=6,Zc=7,zu=8,Yl=9,Pu=10,ki=[2,3,7],$l=[3,3,11],al=[280,256,256,256,40],qu=[0,1,1,1,0],Qc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ji=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ei=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],To=8,Mi=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Li=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gi=null,Ld=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],tf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Uu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Od=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ws=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ur=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hs=[],Tr=[],ta=[],ko=1,nf=2,Qa=[],_s=[];Pa("UpsampleRgbLinePair",qa,3),Pa("UpsampleBgrLinePair",os,3),Pa("UpsampleRgbaLinePair",qs,4),Pa("UpsampleBgraLinePair",ma,4),Pa("UpsampleArgbLinePair",zl,4),Pa("UpsampleRgba4444LinePair",No,2),Pa("UpsampleRgb565LinePair",So,2);var ol=B.UpsampleRgbLinePair,rf=B.UpsampleBgrLinePair,Xl=B.UpsampleRgbaLinePair,Hu=B.UpsampleBgraLinePair,jo=B.UpsampleArgbLinePair,_a=B.UpsampleRgba4444LinePair,Eo=B.UpsampleRgb565LinePair,Oi=16,Zl=1<<Oi-1,ll=-227,Mo=482,Gu=6,Lo=0,Ss=o(256),Wu=o(256),Dd=o(256),e0=o(256),t0=o(Mo-ll),n0=o(Mo-ll);Ua("YuvToRgbRow",qa,3),Ua("YuvToBgrRow",os,3),Ua("YuvToRgbaRow",qs,4),Ua("YuvToBgraRow",ma,4),Ua("YuvToArgbRow",zl,4),Ua("YuvToRgba4444Row",No,2),Ua("YuvToRgb565Row",So,2);var Br=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ql=[0,2,8],Kc=[8,7,6,4,4,2,2,2,1,1,1,1],Jc=1;this.WebPDecodeRGBA=function(m,v,C,E,q){var $=Ls,Z=new Ue,ne=new At;Z.ba=ne,ne.S=$,ne.width=[ne.width],ne.height=[ne.height];var oe=ne.width,fe=ne.height,ye=new ft;if(ye==null||m==null)var je=2;else e(ye!=null),je=Ki(m,v,C,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(je!=0?oe=0:(oe!=null&&(oe[0]=ye.width[0]),fe!=null&&(fe[0]=ye.height[0]),oe=1),oe){ne.width=ne.width[0],ne.height=ne.height[0],E!=null&&(E[0]=ne.width),q!=null&&(q[0]=ne.height);e:{if(E=new ha,(q=new Je).data=m,q.w=v,q.ha=C,q.kd=1,v=[0],e(q!=null),((m=Ki(q.data,q.w,q.ha,null,null,null,v,null,q))==0||m==7)&&v[0]&&(m=4),(v=m)==0){if(e(Z!=null),E.data=q.data,E.w=q.w+q.offset,E.ha=q.ha-q.offset,E.put=lt,E.ac=wt,E.bc=Zt,E.ma=Z,q.xa){if((m=Re())==null){Z=1;break e}if((function(he,_e){var Te=[0],ze=[0],ke=[0];t:for(;;){if(he==null)return 0;if(_e==null)return he.a=2,0;if(he.l=_e,he.a=0,ge(he.m,_e.data,_e.w,_e.ha),!Cn(he.m,Te,ze,ke)){he.a=3;break t}if(he.xb=nf,_e.width=Te[0],_e.height=ze[0],!$e(Te[0],ze[0],1,he,null))break t;return 1}return e(he.a!=0),0})(m,E)){if(E=(v=Ji(E.width,E.height,Z.Oa,Z.ba))==0){t:{E=m;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((C=E.l)!=null),e((q=C.ma)!=null),E.xb!=0){if(E.ca=q.ba,E.tb=q.tb,e(E.ca!=null),!Ha(q.Oa,C,Ti)){E.a=2;break n}if(!gt(E,C.width)||C.da)break n;if((C.da||Et(E.ca.S))&&Zi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Zi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!Y(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!sn(E,E.V,E.Ba,E.c,E.i,C.o,lr))break n;q.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(v=m.a)}else v=m.a}else{if((m=new Qs)==null){Z=1;break e}if(m.Fa=q.na,m.P=q.P,m.qc=q.Sa,_i(m,E)){if((v=Ji(E.width,E.height,Z.Oa,Z.ba))==0){if(m.Aa=0,C=Z.Oa,e((q=m)!=null),C!=null){if(0<(oe=0>(oe=C.Md)?0:100<oe?255:255*oe/100)){for(fe=ye=0;4>fe;++fe)12>(je=q.pb[fe]).lc&&(je.ia=oe*Kc[0>je.lc?0:je.lc]>>3),ye|=je.ia;ye&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=C.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}(function(he,_e){if(he==null)return 0;if(_e==null)return kn(he,2,"NULL VP8Io parameter in VP8Decode().");if(!he.cb&&!_i(he,_e))return 0;if(e(he.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(he.L=0);var Te=Ql[he.L];if(he.L==2?(he.yb=0,he.zb=0):(he.yb=_e.v-Te>>4,he.zb=_e.j-Te>>4,0>he.yb&&(he.yb=0),0>he.zb&&(he.zb=0)),he.Va=_e.o+15+Te>>4,he.Hb=_e.va+15+Te>>4,he.Hb>he.za&&(he.Hb=he.za),he.Va>he.Ub&&(he.Va=he.Ub),0<he.L){var ze=he.ed;for(Te=0;4>Te;++Te){var ke;if(he.Qa.Cb){var Be=he.Qa.Lb[Te];he.Qa.Fb||(Be+=ze.Tb)}else Be=ze.Tb;for(ke=0;1>=ke;++ke){var He=he.gd[Te][ke],at=Be;if(ze.Pc&&(at+=ze.vd[0],ke&&(at+=ze.od[0])),0<(at=0>at?0:63<at?63:at)){var Ze=at;0<ze.wb&&(Ze=4<ze.wb?Ze>>2:Ze>>1)>9-ze.wb&&(Ze=9-ze.wb),1>Ze&&(Ze=1),He.dd=Ze,He.tc=2*at+Ze,He.ld=40<=at?2:15<=at?1:0}else He.tc=0;He.La=ke}}}Te=0}else kn(he,6,"Frame setup failed"),Te=he.a;if(Te=Te==0){if(Te){he.$c=0,0<he.Aa||(he.Ic=Jc);t:{Te=he.Ic,ze=4*(Ze=he.za);var Mt=32*Ze,_t=Ze+1,Jt=0<he.L?Ze*(0<he.Aa?2:1):0,Ct=(he.Aa==2?2:1)*Ze;if((He=ze+832+(ke=3*(16*Te+Ql[he.L])/2*Mt)+(Be=he.Fa!=null&&0<he.Fa.length?he.Kc.c*he.Kc.i:0))!=He)Te=0;else{if(He>he.Vb){if(he.Vb=0,he.Ec=o(He),he.Fc=0,he.Ec==null){Te=kn(he,1,"no memory during frame initialization.");break t}he.Vb=He}He=he.Ec,at=he.Fc,he.Ac=He,he.Bc=at,at+=ze,he.Gd=u(Mt,ui),he.Hd=0,he.rb=u(_t+1,Pr),he.sb=1,he.wa=Jt?u(Jt,Dr):null,he.Y=0,he.D.Nb=0,he.D.wa=he.wa,he.D.Y=he.Y,0<he.Aa&&(he.D.Y+=Ze),e(!0),he.oc=He,he.pc=at,at+=832,he.ya=u(Ct,ms),he.aa=0,he.D.ya=he.ya,he.D.aa=he.aa,he.Aa==2&&(he.D.aa+=Ze),he.R=16*Ze,he.B=8*Ze,Ze=(Mt=Ql[he.L])*he.R,Mt=Mt/2*he.B,he.sa=He,he.ta=at+Ze,he.qa=he.sa,he.ra=he.ta+16*Te*he.R+Mt,he.Ha=he.qa,he.Ia=he.ra+8*Te*he.B+Mt,he.$c=0,at+=ke,he.mb=Be?He:null,he.nb=Be?at:null,e(at+Be<=he.Fc+he.Vb),xo(he),a(he.Ac,he.Bc,0,ze),Te=1}}if(Te){if(_e.ka=0,_e.y=he.sa,_e.O=he.ta,_e.f=he.qa,_e.N=he.ra,_e.ea=he.Ha,_e.Vd=he.Ia,_e.fa=he.R,_e.Rc=he.B,_e.F=null,_e.J=0,!Fu){for(Te=-255;255>=Te;++Te)il[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)Iu[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Wc[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Yc[255+Te]=0>Te?0:255<Te?255:Te;Fu=1}pi=$i,Xa=Oc,Ai=Ps,zn=Dc,On=Rc,Es=Rl,tr=Ou,Vr=Ba,wa=P,ea=de,rl=Du,Hc=S,Kh=ve,jd=Ae,Ed=Ra,Md=Ia,Jh=el,ef=zc,Tr[0]=Mu,Tr[1]=Tu,Tr[2]=Eu,Tr[3]=Vc,Tr[4]=hi,Tr[5]=Bc,Tr[6]=bs,Tr[7]=Qo,Tr[8]=Ko,Tr[9]=fi,Hs[0]=Xi,Hs[1]=Ic,Hs[2]=Fc,Hs[3]=ju,Hs[4]=Oa,Hs[5]=Zo,Hs[6]=_o,ta[0]=Il,ta[1]=ku,ta[2]=fa,ta[3]=Lu,ta[4]=as,ta[5]=Fl,ta[6]=da,Te=1}else Te=0}Te&&(Te=(function(_n,hr){for(_n.M=0;_n.M<_n.Va;++_n.M){var ln,St=_n.Jc[_n.M&_n.Xb],pt=_n.m,vr=_n;for(ln=0;ln<vr.za;++ln){var Ht=pt,hn=vr,Hn=hn.Ac,es=hn.Bc+4*ln,Ns=hn.zc,nr=hn.ya[hn.aa+ln];if(hn.Qa.Bb?nr.$b=we(Ht,hn.Pa.jb[0])?2+we(Ht,hn.Pa.jb[2]):we(Ht,hn.Pa.jb[1]):nr.$b=0,hn.kc&&(nr.Ad=we(Ht,hn.Bd)),nr.Za=!we(Ht,145)+0,nr.Za){var Ur=nr.Ob,Os=0;for(hn=0;4>hn;++hn){var Hr,yn=Ns[0+hn];for(Hr=0;4>Hr;++Hr){yn=ws[Hn[es+Hr]][yn];for(var In=Uu[we(Ht,yn[0])];0<In;)In=Uu[2*In+we(Ht,yn[In])];yn=-In,Hn[es+Hr]=yn}s(Ur,Os,Hn,es,4),Os+=4,Ns[0+hn]=yn}}else yn=we(Ht,156)?we(Ht,128)?1:3:we(Ht,163)?2:0,nr.Ob[0]=yn,a(Hn,es,yn,4),a(Ns,0,yn,4);nr.Dd=we(Ht,142)?we(Ht,114)?we(Ht,183)?1:3:2:0}if(vr.m.Ka)return kn(_n,7,"Premature end-of-partition0 encountered.");for(;_n.ja<_n.za;++_n.ja){if(vr=St,Ht=(pt=_n).rb[pt.sb-1],Hn=pt.rb[pt.sb+pt.ja],ln=pt.ya[pt.aa+pt.ja],es=pt.kc?ln.Ad:0)Ht.la=Hn.la=0,ln.Za||(Ht.Na=Hn.Na=0),ln.Hc=0,ln.Gc=0,ln.ia=0;else{var yr,Pn;if(Ht=Hn,Hn=vr,es=pt.Pa.Xc,Ns=pt.ya[pt.aa+pt.ja],nr=pt.pb[Ns.$b],hn=Ns.ad,Ur=0,Os=pt.rb[pt.sb-1],yn=Hr=0,a(hn,Ur,0,384),Ns.Za)var ts=0,xr=es[3];else{In=o(16);var Fn=Ht.Na+Os.Na;if(Fn=gi(Hn,es[1],Fn,nr.Eb,0,In,0),Ht.Na=Os.Na=(0<Fn)+0,1<Fn)pi(In,0,hn,Ur);else{var zr=In[0]+3>>3;for(In=0;256>In;In+=16)hn[Ur+In]=zr}ts=1,xr=es[0]}var Gn=15&Ht.la,Gr=15&Os.la;for(In=0;4>In;++In){var Wr=1&Gr;for(zr=Pn=0;4>zr;++zr)Gn=Gn>>1|(Wr=(Fn=gi(Hn,xr,Fn=Wr+(1&Gn),nr.Sc,ts,hn,Ur))>ts)<<7,Pn=Pn<<2|(3<Fn?3:1<Fn?2:hn[Ur+0]!=0),Ur+=16;Gn>>=4,Gr=Gr>>1|Wr<<7,Hr=(Hr<<8|Pn)>>>0}for(xr=Gn,ts=Gr>>4,yr=0;4>yr;yr+=2){for(Pn=0,Gn=Ht.la>>4+yr,Gr=Os.la>>4+yr,In=0;2>In;++In){for(Wr=1&Gr,zr=0;2>zr;++zr)Fn=Wr+(1&Gn),Gn=Gn>>1|(Wr=0<(Fn=gi(Hn,es[2],Fn,nr.Qc,0,hn,Ur)))<<3,Pn=Pn<<2|(3<Fn?3:1<Fn?2:hn[Ur+0]!=0),Ur+=16;Gn>>=2,Gr=Gr>>1|Wr<<5}yn|=Pn<<4*yr,xr|=Gn<<4<<yr,ts|=(240&Gr)<<yr}Ht.la=xr,Os.la=ts,Ns.Hc=Hr,Ns.Gc=yn,Ns.ia=43690&yn?0:nr.ia,es=!(Hr|yn)}if(0<pt.L&&(pt.wa[pt.Y+pt.ja]=pt.gd[ln.$b][ln.Za],pt.wa[pt.Y+pt.ja].La|=!es),vr.Ka)return kn(_n,7,"Premature end-of-file encountered.")}if(xo(_n),pt=hr,vr=1,ln=(St=_n).D,Ht=0<St.L&&St.M>=St.zb&&St.M<=St.Va,St.Aa==0)t:{if(ln.M=St.M,ln.uc=Ht,di(St,ln),vr=1,ln=(Pn=St.D).Nb,Ht=(yn=Ql[St.L])*St.R,Hn=yn/2*St.B,In=16*ln*St.R,zr=8*ln*St.B,es=St.sa,Ns=St.ta-Ht+In,nr=St.qa,hn=St.ra-Hn+zr,Ur=St.Ha,Os=St.Ia-Hn+zr,Gr=(Gn=Pn.M)==0,Hr=Gn>=St.Va-1,St.Aa==2&&di(St,Pn),Pn.uc)for(Wr=(Fn=St).D.M,e(Fn.D.uc),Pn=Fn.yb;Pn<Fn.Hb;++Pn){ts=Pn,xr=Wr;var Xn=(Dn=(Yr=Fn).D).Nb;yr=Yr.R;var Dn=Dn.wa[Dn.Y+ts],Ds=Yr.sa,kr=Yr.ta+16*Xn*yr+16*ts,zt=Dn.dd,Pt=Dn.tc;if(Pt!=0)if(e(3<=Pt),Yr.L==1)0<ts&&Md(Ds,kr,yr,Pt+4),Dn.La&&ef(Ds,kr,yr,Pt),0<xr&&Ed(Ds,kr,yr,Pt+4),Dn.La&&Jh(Ds,kr,yr,Pt);else{var Vn=Yr.B,ei=Yr.qa,Di=Yr.ra+8*Xn*Vn+8*ts,Gs=Yr.Ha,Yr=Yr.Ia+8*Xn*Vn+8*ts;Xn=Dn.ld,0<ts&&(Vr(Ds,kr,yr,Pt+4,zt,Xn),ea(ei,Di,Gs,Yr,Vn,Pt+4,zt,Xn)),Dn.La&&(Hc(Ds,kr,yr,Pt,zt,Xn),jd(ei,Di,Gs,Yr,Vn,Pt,zt,Xn)),0<xr&&(tr(Ds,kr,yr,Pt+4,zt,Xn),wa(ei,Di,Gs,Yr,Vn,Pt+4,zt,Xn)),Dn.La&&(rl(Ds,kr,yr,Pt,zt,Xn),Kh(ei,Di,Gs,Yr,Vn,Pt,zt,Xn))}}if(St.ia&&alert("todo:DitherRow"),pt.put!=null){if(Pn=16*Gn,Gn=16*(Gn+1),Gr?(pt.y=St.sa,pt.O=St.ta+In,pt.f=St.qa,pt.N=St.ra+zr,pt.ea=St.Ha,pt.W=St.Ia+zr):(Pn-=yn,pt.y=es,pt.O=Ns,pt.f=nr,pt.N=hn,pt.ea=Ur,pt.W=Os),Hr||(Gn-=yn),Gn>pt.o&&(Gn=pt.o),pt.F=null,pt.J=null,St.Fa!=null&&0<St.Fa.length&&Pn<Gn&&(pt.J=er(St,pt,Pn,Gn-Pn),pt.F=St.mb,pt.F==null&&pt.F.length==0)){vr=kn(St,3,"Could not decode alpha data.");break t}Pn<pt.j&&(yn=pt.j-Pn,Pn=pt.j,e(!(1&yn)),pt.O+=St.R*yn,pt.N+=St.B*(yn>>1),pt.W+=St.B*(yn>>1),pt.F!=null&&(pt.J+=pt.width*yn)),Pn<Gn&&(pt.O+=pt.v,pt.N+=pt.v>>1,pt.W+=pt.v>>1,pt.F!=null&&(pt.J+=pt.v),pt.ka=Pn-pt.j,pt.U=pt.va-pt.v,pt.T=Gn-Pn,vr=pt.put(pt))}ln+1!=St.Ic||Hr||(s(St.sa,St.ta-Ht,es,Ns+16*St.R,Ht),s(St.qa,St.ra-Hn,nr,hn+8*St.B,Hn),s(St.Ha,St.Ia-Hn,Ur,Os+8*St.B,Hn))}if(!vr)return kn(_n,6,"Output aborted.")}return 1})(he,_e)),_e.bc!=null&&_e.bc(_e),Te&=1}return Te?(he.cb=0,Te):0})(m,E)||(v=m.a)}}else v=m.a}v==0&&Z.Oa!=null&&Z.Oa.fd&&(v=Uc(Z.ba))}Z=v}$=Z!=0?null:11>$?ne.f.RGBA.eb:ne.f.kb.y}else $=null;return $};var Yu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(B,ee){for(var M="",F=0;F<4;F++)M+=String.fromCharCode(B[ee++]);return M}function p(B,ee){return B[ee+0]|B[ee+1]<<8}function y(B,ee){return(B[ee+0]|B[ee+1]<<8|B[ee+2]<<16)>>>0}function _(B,ee){return(B[ee+0]|B[ee+1]<<8|B[ee+2]<<16|B[ee+3]<<24)>>>0}new f;var b=[0],N=[0],A=[],k=new f,T=r,R=(function(B,ee){var M={},F=0,J=!1,te=0,ae=0;if(M.frames=[],!(function(j,z){for(var X=0;X<4;X++)if(j[z+X]!="RIFF".charCodeAt(X))return!0;return!1})(B,ee)){for(_(B,ee+=4),ee+=8;ee<B.length;){var H=d(B,ee),se=_(B,ee+=4);ee+=4;var Q=se+(1&se);switch(H){case"VP8 ":case"VP8L":M.frames[F]===void 0&&(M.frames[F]={}),(G=M.frames[F]).src_off=J?ae:ee-8,G.src_size=te+se+8,F++,J&&(J=!1,te=0,ae=0);break;case"VP8X":(G=M.header={}).feature_flags=B[ee];var ge=ee+4;G.canvas_width=1+y(B,ge),ge+=3,G.canvas_height=1+y(B,ge),ge+=3;break;case"ALPH":J=!0,te=Q+8,ae=ee-8;break;case"ANIM":(G=M.header).bgcolor=_(B,ee),ge=ee+4,G.loop_count=p(B,ge),ge+=2;break;case"ANMF":var ue,G;(G=M.frames[F]={}).offset_x=2*y(B,ee),ee+=3,G.offset_y=2*y(B,ee),ee+=3,G.width=1+y(B,ee),ee+=3,G.height=1+y(B,ee),ee+=3,G.duration=y(B,ee),ee+=3,ue=B[ee++],G.dispose=1&ue,G.blend=ue>>1&1}H!="ANMF"&&(ee+=Q)}return M}})(T,0);R.response=T,R.rgbaoutput=!0,R.dataurl=!1;var O=R.header?R.header:null,V=R.frames?R.frames:null;if(O){O.loop_counter=O.loop_count,b=[O.canvas_height],N=[O.canvas_width];for(var I=0;I<V.length&&V[I].blend!=0;I++);}var W=V[0],U=k.WebPDecodeRGBA(T,W.src_off,W.src_size,N,b);W.rgba=U,W.imgwidth=N[0],W.imgheight=b[0];for(var L=0;L<N[0]*b[0]*4;L++)A[L]=U[L];return this.width=N,this.height=b,this.data=A,this}(function(r){var e,t,s,a,o,u,c,f,d,p=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new f,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new u,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new u,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,d=new p}]);var y=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=j;Object.defineProperty(this,"pdf",{get:function(){return z}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Y){X=!!Y}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Y){ie=!!Y}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Y){isNaN(Y)||(ce=Y)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Y){isNaN(Y)||(pe=Y)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Y){var De;typeof Y=="number"?De=[Y,Y,Y,Y]:((De=new Array(4))[0]=Y[0],De[1]=Y.length>=2?Y[1]:De[0],De[2]=Y.length>=3?Y[2]:De[0],De[3]=Y.length>=4?Y[3]:De[1]),d.margin=De}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Y){me=Y}});var Ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ne},set:function(Y){Ne=Y}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(Y){we=Y}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Y){Y instanceof p&&(d=Y)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Y){d.path=Y}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(Y){Ve=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var De;De=_(Y),this.ctx.fillStyle=De.style,this.ctx.isFillTransparent=De.a===0,this.ctx.fillOpacity=De.a,this.pdf.setFillColor(De.r,De.g,De.b,{a:De.a}),this.pdf.setTextColor(De.r,De.g,De.b,{a:De.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var De=_(Y);this.ctx.strokeStyle=De.style,this.ctx.isStrokeTransparent=De.a===0,this.ctx.strokeOpacity=De.a,De.a===0?this.pdf.setDrawColor(255,255,255):(De.a,this.pdf.setDrawColor(De.r,De.g,De.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var Ge=null,nt=null,st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(Y){Ge=null,nt=null,st=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var De;if(this.ctx.font=Y,(De=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var dt=De[1];De[2];var et=De[3],Me=De[4];De[5];var it=De[6],We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(We==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var ot=(function(ut){var rn,Vt,Nt=[],xt=ut.trim();if(xt==="")return qm;if(xt in rx)return[rx[xt]];for(;xt!=="";){switch(Vt=null,rn=(xt=ix(xt)).charAt(0)){case'"':case"'":Vt=BM(xt.substring(1),rn);break;default:Vt=zM(xt)}if(Vt===null||(Nt.push(Vt[0]),(xt=ix(Vt[1]))!==""&&xt.charAt(0)!==","))return qm;xt=xt.replace(/^,/,"")}return Nt})(it);if(this.fontFaces){var rt=(function(ut,rn){var Vt=ut.getFontList(),Nt=JSON.stringify(Vt);if(Ge===null||nt!==Nt){var xt=(function(Tt){var vt=[];return Object.keys(Tt).forEach(function(an){Tt[an].forEach(function(Et){var Ft=null;switch(Et){case"bold":Ft={family:an,weight:"bold"};break;case"italic":Ft={family:an,style:"italic"};break;case"bolditalic":Ft={family:an,weight:"bold",style:"italic"};break;case"":case"normal":Ft={family:an}}Ft!==null&&(Ft.ref={name:an,style:Et},vt.push(Ft))})}),vt})(Vt);Ge=(function(Tt){for(var vt={},an=0;an<Tt.length;++an){var Et=Pm(Tt[an]),Ft=Et.family,gn=Et.stretch,At=Et.style,ft=Et.weight;vt[Ft]=vt[Ft]||{},vt[Ft][gn]=vt[Ft][gn]||{},vt[Ft][gn][At]=vt[Ft][gn][At]||{},vt[Ft][gn][At][ft]=Et}return vt})(xt.concat(rn)),nt=Nt}return Ge})(this.pdf,this.fontFaces),Fe=ot.map(function(ut){return{family:ut,stretch:"normal",weight:et,style:dt}}),tt=(function(ut,rn,Vt){for(var Nt=(Vt=Vt||{}).defaultFontFamily||"times",xt=Object.assign({},VM,Vt.genericFontFamilies||{}),Tt=null,vt=null,an=0;an<rn.length;++an)if(xt[(Tt=Pm(rn[an])).family]&&(Tt.family=xt[Tt.family]),ut.hasOwnProperty(Tt.family)){vt=ut[Tt.family];break}if(!(vt=vt||ut[Nt]))throw new Error("Could not find a font-family for the rule '"+sx(Tt)+"' and default family '"+Nt+"'.");if(vt=(function(Et,Ft){if(Ft[Et])return Ft[Et];var gn=Ng[Et],At=gn<=Ng.normal?-1:1,ft=nx(Ft,p4,gn,At);if(!ft)throw new Error("Could not find a matching font-stretch value for "+Et);return ft})(Tt.stretch,vt),vt=(function(Et,Ft){if(Ft[Et])return Ft[Et];for(var gn=d4[Et],At=0;At<gn.length;++At)if(Ft[gn[At]])return Ft[gn[At]];throw new Error("Could not find a matching font-style for "+Et)})(Tt.style,vt),!(vt=(function(Et,Ft){if(Ft[Et])return Ft[Et];if(Et===400&&Ft[500])return Ft[500];if(Et===500&&Ft[400])return Ft[400];var gn=FM[Et],At=nx(Ft,m4,gn,Et<400?-1:1);if(!At)throw new Error("Could not find a matching font-weight for value "+Et);return At})(Tt.weight,vt)))throw new Error("Failed to resolve a font for the rule '"+sx(Tt)+"'.");return vt})(rt,Fe);this.pdf.setFont(tt.ref.name,tt.ref.style)}else{var Ke="";(et==="bold"||parseInt(et,10)>=700||dt==="bold")&&(Ke="bold"),dt==="italic"&&(Ke+="italic"),Ke.length===0&&(Ke="normal");for(var ct="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<ot.length;mt++){if(this.pdf.internal.getFont(ot[mt],Ke,{noFallback:!0,disableWarning:!0})!==void 0){ct=ot[mt];break}if(Ke==="bolditalic"&&this.pdf.internal.getFont(ot[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=ot[mt],Ke="bold";else if(this.pdf.internal.getFont(ot[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=ot[mt],Ke="normal";break}}if(ct===""){for(var bt=0;bt<ot.length;bt++)if(yt[ot[bt]]){ct=yt[ot[bt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,Ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};y.prototype.setLineDash=function(j){this.lineDash=j},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(j,z){if(isNaN(j)||isNaN(z))throw dr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new u(j,z));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new u(j,z)},y.prototype.closePath=function(){var j=new u(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Kn(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){j=new u(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(j.x,j.y)},y.prototype.lineTo=function(j,z){if(isNaN(j)||isNaN(z))throw dr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new u(j,z));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new u(X.x,X.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(j,z,X,ie){if(isNaN(X)||isNaN(ie)||isNaN(j)||isNaN(z))throw dr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new u(X,ie)),pe=this.ctx.transform.applyToPoint(new u(j,z));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new u(ce.x,ce.y)},y.prototype.bezierCurveTo=function(j,z,X,ie,ce,pe){if(isNaN(ce)||isNaN(pe)||isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie))throw dr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new u(ce,pe)),Ne=this.ctx.transform.applyToPoint(new u(j,z)),we=this.ctx.transform.applyToPoint(new u(X,ie));this.path.push({type:"bct",x1:Ne.x,y1:Ne.y,x2:we.x,y2:we.y,x:me.x,y:me.y}),this.ctx.lastPoint=new u(me.x,me.y)},y.prototype.arc=function(j,z,X,ie,ce,pe){if(isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie)||isNaN(ce))throw dr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new u(j,z));j=me.x,z=me.y;var Ne=this.ctx.transform.applyToPoint(new u(0,X)),we=this.ctx.transform.applyToPoint(new u(0,0));X=Math.sqrt(Math.pow(Ne.x-we.x,2)+Math.pow(Ne.y-we.y,2))}Math.abs(ce-ie)>=2*Math.PI&&(ie=0,ce=2*Math.PI),this.path.push({type:"arc",x:j,y:z,radius:X,startAngle:ie,endAngle:ce,counterclockwise:pe})},y.prototype.arcTo=function(j,z,X,ie,ce){throw new Error("arcTo not implemented.")},y.prototype.rect=function(j,z,X,ie){if(isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie))throw dr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,z),this.lineTo(j+X,z),this.lineTo(j+X,z+ie),this.lineTo(j,z+ie),this.lineTo(j,z),this.lineTo(j+X,z),this.lineTo(j,z)},y.prototype.fillRect=function(j,z,X,ie){if(isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie))throw dr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,z,X,ie),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},y.prototype.strokeRect=function(j,z,X,ie){if(isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie))throw dr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(j,z,X,ie),this.stroke())},y.prototype.clearRect=function(j,z,X,ie){if(isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie))throw dr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,z,X,ie))},y.prototype.save=function(j){j=typeof j!="boolean"||j;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},y.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(z),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(j){var z,X,ie,ce;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))z=0,X=0,ie=0,ce=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(pe!==null)z=parseInt(pe[1]),X=parseInt(pe[2]),ie=parseInt(pe[3]),ce=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)z=parseInt(pe[1]),X=parseInt(pe[2]),ie=parseInt(pe[3]),ce=parseFloat(pe[4]);else{if(ce=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new a4(j);j=me.ok?me.toHex():"#000000"}j.length===4?(z=j.substring(1,2),z+=z,X=j.substring(2,3),X+=X,ie=j.substring(3,4),ie+=ie):(z=j.substring(1,3),X=j.substring(3,5),ie=j.substring(5,7)),z=parseInt(z,16),X=parseInt(X,16),ie=parseInt(ie,16)}}return{r:z,g:X,b:ie,a:ce,style:j}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(j,z,X,ie){if(isNaN(z)||isNaN(X)||typeof j!="string")throw dr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!b.call(this)){var ce=Q(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;F.call(this,{text:j,x:z,y:X,scale:pe,angle:ce,align:this.textAlign,maxWidth:ie})}},y.prototype.strokeText=function(j,z,X,ie){if(isNaN(z)||isNaN(X)||typeof j!="string")throw dr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ie=isNaN(ie)?void 0:ie;var ce=Q(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;F.call(this,{text:j,x:z,y:X,scale:pe,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ie})}},y.prototype.measureText=function(j){if(typeof j!="string")throw dr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,X=this.pdf.internal.scaleFactor,ie=z.internal.getFontSize(),ce=z.getStringUnitWidth(j)*ie/z.internal.scaleFactor;return new function(pe){var me=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:ce*=Math.round(96*X/72*1e4)/1e4})},y.prototype.scale=function(j,z){if(isNaN(j)||isNaN(z))throw dr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new f(j,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},y.prototype.rotate=function(j){if(isNaN(j))throw dr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new f(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},y.prototype.translate=function(j,z){if(isNaN(j)||isNaN(z))throw dr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new f(1,0,0,1,j,z);this.ctx.transform=this.ctx.transform.multiply(X)},y.prototype.transform=function(j,z,X,ie,ce,pe){if(isNaN(j)||isNaN(z)||isNaN(X)||isNaN(ie)||isNaN(ce)||isNaN(pe))throw dr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new f(j,z,X,ie,ce,pe);this.ctx.transform=this.ctx.transform.multiply(me)},y.prototype.setTransform=function(j,z,X,ie,ce,pe){j=isNaN(j)?1:j,z=isNaN(z)?0:z,X=isNaN(X)?0:X,ie=isNaN(ie)?1:ie,ce=isNaN(ce)?0:ce,pe=isNaN(pe)?0:pe,this.ctx.transform=new f(j,z,X,ie,ce,pe)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(j,z,X,ie,ce,pe,me,Ne,we){var Ve=this.pdf.getImageProperties(j),Ge=1,nt=1,st=1,Y=1;ie!==void 0&&Ne!==void 0&&(st=Ne/ie,Y=we/ce,Ge=Ve.width/ie*Ne/ie,nt=Ve.height/ce*we/ce),pe===void 0&&(pe=z,me=X,z=0,X=0),ie!==void 0&&Ne===void 0&&(Ne=ie,we=ce),ie===void 0&&Ne===void 0&&(Ne=Ve.width,we=Ve.height);var De=this.ctx.transform.decompose(),dt=Q(De.rotate.shx),et=new f,Me=(et=(et=(et=et.multiply(De.translate)).multiply(De.skew)).multiply(De.scale)).applyToRectangle(new c(pe-z*st,me-X*Y,ie*Ge,ce*nt));if(this.autoPaging){for(var it,We=k.call(this,Me),ot=[],rt=0;rt<We.length;rt+=1)ot.indexOf(We[rt])===-1&&ot.push(We[rt]);O(ot);for(var Fe=ot[0],tt=ot[ot.length-1],Ke=Fe;Ke<tt+1;Ke++){this.pdf.setPage(Ke);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=Ke===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Ke===1?0:mt+(Ke-2)*bt;if(this.ctx.clip_path.length!==0){var rn=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(it,this.posX+this.margin[3],-ut+yt+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=rn}var Vt=JSON.parse(JSON.stringify(Me));Vt=R([Vt],this.posX+this.margin[3],-ut+yt+this.ctx.prevPageLastElemOffset)[0];var Nt=(Ke>Fe||Ke<tt)&&A.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,bt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,dt),Nt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(j,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,dt)};var k=function(j,z,X){var ie=[];z=z||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":ie.push(Math.floor((j.y+ce)/X)+1);break;case"arc":ie.push(Math.floor((j.y+ce-j.radius)/X)+1),ie.push(Math.floor((j.y+ce+j.radius)/X)+1);break;case"qct":var pe=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);ie.push(Math.floor((pe.y+ce)/X)+1),ie.push(Math.floor((pe.y+pe.h+ce)/X)+1);break;case"bct":var me=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);ie.push(Math.floor((me.y+ce)/X)+1),ie.push(Math.floor((me.y+me.h+ce)/X)+1);break;case"rect":ie.push(Math.floor((j.y+ce)/X)+1),ie.push(Math.floor((j.y+j.h+ce)/X)+1)}for(var Ne=0;Ne<ie.length;Ne+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Ne];)T.call(this);return ie},T=function(){var j=this.fillStyle,z=this.strokeStyle,X=this.font,ie=this.lineCap,ce=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=z,this.font=X,this.lineCap=ie,this.lineWidth=ce,this.lineJoin=pe},R=function(j,z,X){for(var ie=0;ie<j.length;ie++)switch(j[ie].type){case"bct":j[ie].x2+=z,j[ie].y2+=X;case"qct":j[ie].x1+=z,j[ie].y1+=X;default:j[ie].x+=z,j[ie].y+=X}return j},O=function(j){return j.sort(function(z,X){return z-X})},V=function(j,z){var X=this.fillStyle,ie=this.strokeStyle,ce=this.lineCap,pe=this.lineWidth,me=Math.abs(pe*this.ctx.transform.scaleX),Ne=this.lineJoin;if(this.autoPaging){for(var we,Ve,Ge=JSON.parse(JSON.stringify(this.path)),nt=JSON.parse(JSON.stringify(this.path)),st=[],Y=0;Y<nt.length;Y++)if(nt[Y].x!==void 0)for(var De=k.call(this,nt[Y]),dt=0;dt<De.length;dt+=1)st.indexOf(De[dt])===-1&&st.push(De[dt]);for(var et=0;et<st.length;et++)for(;this.pdf.internal.getNumberOfPages()<st[et];)T.call(this);O(st);for(var Me=st[0],it=st[st.length-1],We=Me;We<it+1;We++){this.pdf.setPage(We),this.fillStyle=X,this.strokeStyle=ie,this.lineCap=ce,this.lineWidth=me,this.lineJoin=Ne;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=We===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=We===1?0:Fe+(We-2)*tt;if(this.ctx.clip_path.length!==0){var ct=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(we,this.posX+this.margin[3],-Ke+rt+this.ctx.prevPageLastElemOffset),I.call(this,j,!0),this.path=ct}if(Ve=JSON.parse(JSON.stringify(Ge)),this.path=R(Ve,this.posX+this.margin[3],-Ke+rt+this.ctx.prevPageLastElemOffset),z===!1||We===0){var yt=(We>Me||We<it)&&A.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,tt,null).clip().discardPath()),I.call(this,j,z),yt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=Ge}else this.lineWidth=me,I.call(this,j,z),this.lineWidth=pe},I=function(j,z){if((j!=="stroke"||z||!N.call(this))&&(j==="stroke"||z||!b.call(this))){for(var X,ie,ce=[],pe=this.path,me=0;me<pe.length;me++){var Ne=pe[me];switch(Ne.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:Ne,deltas:[],abs:[]});break;case"lt":var we=ce.length;if(pe[me-1]&&!isNaN(pe[me-1].x)&&(X=[Ne.x-pe[me-1].x,Ne.y-pe[me-1].y],we>0)){for(;we>=0;we--)if(ce[we-1].close!==!0&&ce[we-1].begin!==!0){ce[we-1].deltas.push(X),ce[we-1].abs.push(Ne);break}}break;case"bct":X=[Ne.x1-pe[me-1].x,Ne.y1-pe[me-1].y,Ne.x2-pe[me-1].x,Ne.y2-pe[me-1].y,Ne.x-pe[me-1].x,Ne.y-pe[me-1].y],ce[ce.length-1].deltas.push(X);break;case"qct":var Ve=pe[me-1].x+2/3*(Ne.x1-pe[me-1].x),Ge=pe[me-1].y+2/3*(Ne.y1-pe[me-1].y),nt=Ne.x+2/3*(Ne.x1-Ne.x),st=Ne.y+2/3*(Ne.y1-Ne.y),Y=Ne.x,De=Ne.y;X=[Ve-pe[me-1].x,Ge-pe[me-1].y,nt-pe[me-1].x,st-pe[me-1].y,Y-pe[me-1].x,De-pe[me-1].y],ce[ce.length-1].deltas.push(X);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(Ne)}}ie=z?null:j==="stroke"?"stroke":"fill";for(var dt=!1,et=0;et<ce.length;et++)if(ce[et].arc)for(var Me=ce[et].abs,it=0;it<Me.length;it++){var We=Me[it];We.type==="arc"?L.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,z,!dt):J.call(this,We.x,We.y),dt=!0}else if(ce[et].close===!0)this.pdf.internal.out("h"),dt=!1;else if(ce[et].begin!==!0){var ot=ce[et].start.x,rt=ce[et].start.y;te.call(this,ce[et].deltas,ot,rt),dt=!0}ie&&B.call(this,ie),z&&ee.call(this)}},W=function(j){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-X;case"top":return j+z-X;case"hanging":return j+z-2*X;case"middle":return j+z/2-X;default:return j}},U=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(z,X){this.colorStops.push([z,X])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(j,z,X,ie,ce,pe,me,Ne,we){for(var Ve=H.call(this,X,ie,ce,pe),Ge=0;Ge<Ve.length;Ge++){var nt=Ve[Ge];Ge===0&&(we?M.call(this,nt.x1+j,nt.y1+z):J.call(this,nt.x1+j,nt.y1+z)),ae.call(this,j,z,nt.x2,nt.y2,nt.x3,nt.y3,nt.x4,nt.y4)}Ne?ee.call(this):B.call(this,me)},B=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ee=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(j,z){this.pdf.internal.out(t(j)+" "+s(z)+" m")},F=function(j){var z;switch(j.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var X,ie,ce,pe=this.pdf.getTextDimensions(j.text),me=W.call(this,j.y),Ne=U.call(this,me)-pe.h,we=this.ctx.transform.applyToPoint(new u(j.x,me));if(this.autoPaging){var Ve=this.ctx.transform.decompose(),Ge=new f;Ge=(Ge=(Ge=Ge.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var nt=this.ctx.transform.applyToRectangle(new c(j.x,me,pe.w,pe.h)),st=Ge.applyToRectangle(new c(j.x,Ne,pe.w,pe.h)),Y=k.call(this,st),De=[],dt=0;dt<Y.length;dt+=1)De.indexOf(Y[dt])===-1&&De.push(Y[dt]);O(De);for(var et=De[0],Me=De[De.length-1],it=et;it<Me+1;it++){this.pdf.setPage(it);var We=it===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[2],Fe=rt-this.margin[0],tt=this.pdf.internal.pageSize.width-this.margin[1],Ke=tt-this.margin[3],ct=it===1?0:ot+(it-2)*Fe;if(this.ctx.clip_path.length!==0){var yt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(X,this.posX+this.margin[3],-1*ct+We),I.call(this,"fill",!0),this.path=yt}var mt=R([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-ct+We+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*j.scale),ce=this.lineWidth,this.lineWidth=ce*j.scale);var bt=this.autoPaging!=="text";if(bt||mt.y+mt.h<=rt){if(bt||mt.y>=We&&mt.x<=tt){var ut=bt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||tt-mt.x)[0],rn=R([JSON.parse(JSON.stringify(nt))],this.posX+this.margin[3],-ct+We+this.ctx.prevPageLastElemOffset)[0],Vt=bt&&(it>et||it<Me)&&A.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,Fe,null).clip().discardPath()),this.pdf.text(ut,rn.x,rn.y,{angle:j.angle,align:z,renderingMode:j.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else mt.y<rt&&(this.ctx.prevPageLastElemOffset+=rt-mt.y);j.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ce)}}else j.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*j.scale),ce=this.lineWidth,this.lineWidth=ce*j.scale),this.pdf.text(j.text,we.x+this.posX,we.y+this.posY,{angle:j.angle,align:z,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ce)},J=function(j,z,X,ie){X=X||0,ie=ie||0,this.pdf.internal.out(t(j+X)+" "+s(z+ie)+" l")},te=function(j,z,X){return this.pdf.lines(j,z,X,null,null)},ae=function(j,z,X,ie,ce,pe,me,Ne){this.pdf.internal.out([e(a(X+j)),e(o(ie+z)),e(a(ce+j)),e(o(pe+z)),e(a(me+j)),e(o(Ne+z)),"c"].join(" "))},H=function(j,z,X,ie){for(var ce=2*Math.PI,pe=Math.PI/2;z>X;)z-=ce;var me=Math.abs(X-z);me<ce&&ie&&(me=ce-me);for(var Ne=[],we=ie?-1:1,Ve=z;me>1e-5;){var Ge=Ve+we*Math.min(me,pe);Ne.push(se.call(this,j,Ve,Ge)),me-=Math.abs(Ge-Ve),Ve=Ge}return Ne},se=function(j,z,X){var ie=(X-z)/2,ce=j*Math.cos(ie),pe=j*Math.sin(ie),me=ce,Ne=-pe,we=me*me+Ne*Ne,Ve=we+me*ce+Ne*pe,Ge=4/3*(Math.sqrt(2*we*Ve)-Ve)/(me*pe-Ne*ce),nt=me-Ge*Ne,st=Ne+Ge*me,Y=nt,De=-st,dt=ie+z,et=Math.cos(dt),Me=Math.sin(dt);return{x1:j*Math.cos(z),y1:j*Math.sin(z),x2:nt*et-st*Me,y2:nt*Me+st*et,x3:Y*et-De*Me,y3:Y*Me+De*et,x4:j*Math.cos(X),y4:j*Math.sin(X)}},Q=function(j){return 180*j/Math.PI},ge=function(j,z,X,ie,ce,pe){var me=j+.5*(X-j),Ne=z+.5*(ie-z),we=ce+.5*(X-ce),Ve=pe+.5*(ie-pe),Ge=Math.min(j,ce,me,we),nt=Math.max(j,ce,me,we),st=Math.min(z,pe,Ne,Ve),Y=Math.max(z,pe,Ne,Ve);return new c(Ge,st,nt-Ge,Y-st)},ue=function(j,z,X,ie,ce,pe,me,Ne){var we,Ve,Ge,nt,st,Y,De,dt,et,Me,it,We,ot,rt,Fe=X-j,tt=ie-z,Ke=ce-X,ct=pe-ie,yt=me-ce,mt=Ne-pe;for(Ve=0;Ve<41;Ve++)et=(De=(Ge=j+(we=Ve/40)*Fe)+we*((st=X+we*Ke)-Ge))+we*(st+we*(ce+we*yt-st)-De),Me=(dt=(nt=z+we*tt)+we*((Y=ie+we*ct)-nt))+we*(Y+we*(pe+we*mt-Y)-dt),Ve==0?(it=et,We=Me,ot=et,rt=Me):(it=Math.min(it,et),We=Math.min(We,Me),ot=Math.max(ot,et),rt=Math.max(rt,Me));return new c(Math.round(it),Math.round(We),Math.round(ot-it),Math.round(rt-We))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,z,X=(j=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:z}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(It.API),(function(r){var e=function(u){var c,f,d,p,y,_,b,N,A,k;for(f=[],d=0,p=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;p>d;d+=4)(y=(u.charCodeAt(d)<<24)+(u.charCodeAt(d+1)<<16)+(u.charCodeAt(d+2)<<8)+u.charCodeAt(d+3))!==0?(_=(y=((y=((y=((y=(y-(k=y%85))/85)-(A=y%85))/85)-(N=y%85))/85)-(b=y%85))/85)%85,f.push(_+33,b+33,N+33,A+33,k+33)):f.push(122);return(function(T,R){for(var O=R;O>0;O--)T.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var c,f,d,p,y,_=String,b="length",N=255,A="charCodeAt",k="slice",T="replace";for(u[k](-2),u=u[k](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),d=[],p=0,y=(u+=c="uuuuu"[k](u[b]%5||5))[b];y>p;p+=5)f=52200625*(u[A](p)-33)+614125*(u[A](p+1)-33)+7225*(u[A](p+2)-33)+85*(u[A](p+3)-33)+(u[A](p+4)-33),d.push(N&f>>24,N&f>>16,N&f>>8,N&f);return(function(R,O){for(var V=O;V>0;V--)R.pop()})(d,c[b]),_.fromCharCode.apply(_,d)},s=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",d=0;d<u.length;d+=2)f+=String.fromCharCode("0x"+(u[d]+u[d+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=bg(c)).reduce(function(d,p){return d+String.fromCharCode(p)},"")};r.processDataByFilters=function(u,c){var f=0,d=u||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:d,reverseChain:p.reverse().join(" ")}}})(It.API),(function(r){r.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,d,p){var y=new XMLHttpRequest,_=0,b=function(N){var A=N.length,k=[],T=String.fromCharCode;for(_=0;_<A;_+=1)k.push(T(255&N.charCodeAt(_)));return k.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?p(b(this.responseText)):p(void 0)}),y.send(null),d&&y.status===200)return b(y.responseText)})(a,o,u)}catch{}return c})(e,t,s)},r.loadImageFile=r.loadFile})(It.API),(function(r){function e(){return(en.html2canvas?Promise.resolve(en.html2canvas):q1(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):q1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var f=Kn(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var d=document.createElement(c);for(var p in f.className&&(d.className=f.className),f.innerHTML&&f.dompurify&&(d.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)d.style[p]=f.style[p];return d},o=function c(f,d){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)d!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p},u=function c(f){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),d);return(p=p.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(t).then(function(d){return this.set({src:a("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,f(this.prop.container,d)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var d=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var N=p[b],A=N.src.find(function(k){return k.format==="truetype"});A&&d.addFont(A.url,N.ref.name,N.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,d.context2d.save(!0),f(this.prop.container,_)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(s(c)!=="object")return this;var f=Object.keys(c||{}).map(function(d){if(d in u.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var d=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(d):d})},u.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(d,p){return Math.floor(d*p/72*96)}return this.then(function(){(c=c||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,d,p){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),d!=null&&(this.progress.n=d),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,d,p){return this.setProgress(c?this.progress.val+c:null,f||null,d?this.progress.n+d:null,p?this.progress.stack.concat(p):null)},u.prototype.then=function(c,f){var d=this;return this.thenCore(c,f,function(p,y){return d.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return d.updateProgress(null,p),_}).then(p,y).then(function(_){return d.updateProgress(1),_})})},u.prototype.thenCore=function(c,f,d){d=d||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),f&&(f=f.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:u.convert(Object.assign({},p),Promise.prototype),_=d.call(y,c,f);return u.convert(_,p.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(d){f=f.thenCore(d)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,It.getPageSize=function(c,f,d){if(Kn(c)==="object"){var p=c;c=p.orientation,f=p.unit||f,d=p.format||d}f=f||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var y,_=(""+d).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+f}var N,A=0,k=0;if(b.hasOwnProperty(_))A=b[_][1]/y,k=b[_][0]/y;else try{A=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",k>A&&(N=k,k=A,A=N);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",A>k&&(N=k,k=A,A=N)}return{width:k,height:A,unit:f,k:y,orientation:c}},r.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Pm):null;var d=new u(f);return f.worker?d:d.from(c).doCallback()}})(It.API),It.API.addJS=function(r){return ox=r,this.internal.events.subscribe("postPutResources",function(){I1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(I1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ax=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ox+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){I1!==void 0&&ax!==void 0&&this.internal.out("/Names <</JavaScript "+I1+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=s.exec(u);if(c!=null){var f=c[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(o=0;o<d;o++){var y=t.internal.newObject();p.push(y);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<p.length;o++)t.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(It.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,s,a,o,u,c){var f,d=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),N=y.length,A={width:0,height:0,numcomponents:1},k=4;k<N;k+=2){if(k+=b,e.indexOf(y.charCodeAt(k+1))!==-1){_=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),A={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:_,numcomponents:y.charCodeAt(k+9)};break}b=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return A})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:d,index:s,alias:a}}return p}})(It.API),It.API.processPNG=function(r,e,t,s){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,o=SM(r,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,d=o.palette,p=o.depth;a=d&&f===1?(function(L){for(var B=L.width,ee=L.height,M=L.data,F=L.palette,J=L.depth,te=!1,ae=[],H=[],se=void 0,Q=!1,ge=0,ue=0;ue<F.length;ue++){var G=hy(F[ue],4),j=G[0],z=G[1],X=G[2],ie=G[3];ae.push(j,z,X),ie!=null&&(ie===0?(ge++,H.length<1&&H.push(ue)):ie<255&&(Q=!0))}if(Q||ge>1){te=!0,H=void 0;var ce=B*ee;se=new Uint8Array(ce);for(var pe=new DataView(M.buffer),me=0;me<ce;me++){var Ne=Um(pe,me,J),we=hy(F[Ne],4)[3];se[me]=we}}else ge===0&&(H=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:M,alphaBytes:se,needSMask:te,palette:ae,mask:H}})(o):f===2||f===4?(function(L){for(var B=L.data,ee=L.width,M=L.height,F=L.channels,J=L.depth,te=F===2?"DeviceGray":"DeviceRGB",ae=F-1,H=ee*M,se=ae,Q=H*se,ge=1*H,ue=Math.ceil(Q*J/8),G=Math.ceil(ge*J/8),j=new Uint8Array(ue),z=new Uint8Array(G),X=new DataView(B.buffer),ie=new DataView(j.buffer),ce=new DataView(z.buffer),pe=!1,me=0;me<H;me++){for(var Ne=me*F,we=0;we<se;we++)gx(ie,Um(X,Ne+we,J),me*se+we,J);var Ve=Um(X,Ne+se,J);Ve<(1<<J)-1&&(pe=!0),gx(ce,Ve,1*me,J)}return{colorSpace:te,colorsPerPixel:ae,sMaskBitsPerComponent:pe?J:void 0,colorBytes:j,alphaBytes:z,needSMask:pe}})(o):(function(L){var B=L.data,ee=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ee,colorsPerPixel:ee==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?(function(M){for(var F=M.length,J=new Uint8Array(2*F),te=new DataView(J.buffer,J.byteOffset,J.byteLength),ae=0;ae<F;ae++)te.setUint16(2*ae,M[ae],!1);return J})(B):B,needSMask:!1}})(o);var y,_,b,N=a,A=N.colorSpace,k=N.colorsPerPixel,T=N.sMaskBitsPerComponent,R=N.colorBytes,O=N.alphaBytes,V=N.needSMask,I=N.palette,W=N.mask,U=null;return s!==It.API.image_compression.NONE&&typeof bg=="function"?(U=(function(L){var B;switch(L){case It.API.image_compression.FAST:B=11;break;case It.API.image_compression.MEDIUM:B=13;break;case It.API.image_compression.SLOW:B=14;break;default:B=12}return B})(s),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(U," /Colors ").concat(k," /BitsPerComponent ").concat(p," /Columns ").concat(u),r=hx(R,Math.ceil(u*k*p/8),k,p,s),V&&(b=hx(O,Math.ceil(u*T/8),1,T,s))):(y=void 0,_=void 0,r=R,V&&(b=O)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:r,index:e,filter:y,decodeParameters:_,transparency:W,palette:I,sMask:b,predictor:U,width:u,height:c,bitsPerComponent:p,sMaskBitsPerComponent:T,colorSpace:A}}},(function(r){r.processGIF89A=function(e,t,s,a){var o=new HM(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:u,height:c},p=new Hm(100).encode(d,100);return r.processJPEG.call(this,p,t,s,a)},r.processGIF87A=r.processGIF89A})(It.API),so.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},so.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){dr.log("bit decode error:"+t)}},so.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}t!==0&&(this.pos+=4-t)}},so.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,c=o>>4,f=15&o,d=this.palette[c];if(this.data[u]=d.blue,this.data[u+1]=d.green,this.data[u+2]=d.red,this.data[u+3]=255,2*a+1>=this.width)break;d=this.palette[f],this.data[u+4]=d.blue,this.data[u+4+1]=d.green,this.data[u+4+2]=d.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},so.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},so.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,d=o>>15?255:0,p=s*this.width*4+4*a;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=u,this.data[p+3]=d}this.pos+=r}},so.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,d=(u>>11)/e*255|0,p=a*this.width*4+4*o;this.data[p]=d,this.data[p+1]=f,this.data[p+2]=c,this.data[p+3]=255}this.pos+=r}},so.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},so.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}},so.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,s,a){var o=new so(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},d=new Hm(100).encode(f,100);return r.processJPEG.call(this,d,t,s,a)}})(It.API),vx.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,s,a){var o=new vx(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},d=new Hm(100).encode(f,100);return r.processJPEG.call(this,d,t,s,a)}})(It.API),It.API.processRGBA=function(r,e,t){for(var s=r.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,d=0;d<a;d+=4){var p=s[d],y=s[d+1],_=s[d+2],b=s[d+3];o[c++]=p,o[c++]=y,o[c++]=_,u[f++]=b}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},It.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bh=It.API,F1=bh.getCharWidthsArray=function(r,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,d=e.kerning?e.kerning:a.metadata.Unicode.kerning,p=d.fof?d.fof:1,y=e.doKerning!==!1,_=0,b=r.length,N=0,A=c[0]||f,k=[];for(t=0;t<b;t++)s=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(_=y&&Kn(d[s])==="object"&&!isNaN(parseInt(d[s][N],10))?d[s][N]/p:0,k.push((c[s]||A)/f+_)),N=s;return k},lx=bh.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return bh.processArabic&&(r=bh.processArabic(r)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(r,t,a)/t:F1.apply(this,arguments).reduce(function(o,u){return o+u},0)},cx=function(r,e,t,s){for(var a=[],o=0,u=r.length,c=0;o!==u&&c+e[o]<t;)c+=e[o],o++;a.push(r.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>s&&(a.push(r.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(r.slice(f,o)),a},ux=function(r,e,t){t||(t={});var s,a,o,u,c,f,d,p=[],y=[p],_=t.textIndent||0,b=0,N=0,A=r.split(" "),k=F1.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?A[0].length+2:t.lineIndent||0){var T=Array(f).join(" "),R=[];A.map(function(V){(V=V.split(/\s*\n/)).length>1?R=R.concat(V.map(function(I,W){return(W&&I.length?`
`:"")+I})):R.push(V[0])}),A=R,f=lx.apply(this,[T,t])}for(o=0,u=A.length;o<u;o++){var O=0;if(s=A[o],f&&s[0]==`
`&&(s=s.substr(1),O=1),_+b+(N=(a=F1.apply(this,[s,t])).reduce(function(V,I){return V+I},0))>e||O){if(N>e){for(c=cx.apply(this,[s,a,e-(_+b),e]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);N=a.slice(s.length-(p[0]?p[0].length:0)).reduce(function(V,I){return V+I},0)}else p=[s];y.push(p),_=N+f,b=k}else p.push(s),_+=b+N,b=k}return d=f?function(V,I){return(I?T:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(d)},bh.splitTextToSize=function(r,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(r)?r:String(r).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var c,f,d=[];for(c=0,f=s.length;c<f;c++)d=d.concat(ux.apply(this,[s[c],u,o]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},c=r.__fontmetrics__.compress=function(_){var b,N,A,k,T=["{"];for(var R in _){if(b=_[R],isNaN(parseInt(R,10))?N="'"+R+"'":(R=parseInt(R,10),N=(N=u(R).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof b=="number")b<0?(A=u(b).slice(3),k="-"):(A=u(b).slice(2),k=""),A=k+A.slice(0,-1)+a[A.slice(-1)];else{if(Kn(b)!=="object")throw new Error("Don't know what to do with value type "+Kn(b)+".");A=c(b)}T.push(N+A)}return T.push("}"),T.join("")},f=r.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,N,A,k,T={},R=1,O=T,V=[],I="",W="",U=_.length-1,L=1;L<U;L+=1)(k=_[L])=="'"?b?(A=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(V.push([O,A]),O={},A=void 0):k=="}"?((N=V.pop())[0][N[1]]=O,A=void 0,O=N[0]):k=="-"?R=-1:A===void 0?s.hasOwnProperty(k)?(I+=s[k],A=parseInt(I,16)*R,R=1,I=""):I+=k:s.hasOwnProperty(k)?(W+=s[k],O[A]=parseInt(W,16)*R,R=1,A=void 0,W=""):W+=k;return T},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},y={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(_){var b=_.font,N=y.Unicode[b.postScriptName];N&&(b.metadata.Unicode={},b.metadata.Unicode.widths=N.widths,b.metadata.Unicode.kerning=N.kerning);var A=p.Unicode[b.postScriptName];A&&(b.metadata.Unicode.encoding=A,b.encoding=A.codePages[0])}])})(It.API),(function(r){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};r.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(G1(c)),u.metadata=r.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(It),It.API.addSvgAsImage=function(r,e,t,s,a,o,u,c){if(isNaN(e)||isNaN(t))throw dr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw dr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(en.canvg?Promise.resolve(en.canvg):q1(()=>import("./index.es-Co5A3KCn.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(d,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){y.addImage(f.toDataURL("image/jpeg",1),e,t,s,a,u,c)})},It.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},It.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],d=0,p=0,y=0;function _(N,A){var k,T=!1;for(k=0;k<N.length;k+=1)N[k]===A&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var b=c.length;for(y=0;y<b;y+=1)t[c[y]].value=t[c[y]].defaultValue,t[c[y]].explicitSet=!1}if(Kn(r)==="object"){for(a in r)if(o=r[a],_(c,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&_(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(d=0;d<o.length;d+=1)if(s=!0,o[d].length===1&&typeof o[d][0]=="number")f.push(String(o[d]-1));else if(o[d].length>1){for(p=0;p<o[d].length;p+=1)typeof o[d][p]!="number"&&(s=!1);s===!0&&f.push([o[d][0]-1,o[d][1]-1].join(" "))}t[a].value="["+f.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,A=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?A.push("/"+N+" /"+t[N].value):A.push("/"+N+" "+t[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(It.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],y=0,_=o.length;y<_;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(d[4-c.length],c)}return p.join("")},s=function(o){var u,c,f,d,p,y,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,_=(c=Object.keys(o).sort(function(b,N){return b-N})).length;y<_;y++)u=c[y],f.length>=100&&(p+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(d=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+d+">"));return f.length&&(p+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,d=u.newObject,p=u.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",N=0;N<_.length;N++)b+=String.fromCharCode(_[N]);var A=d();p({data:b,addLength1:!0,objectId:A}),f("endobj");var k=d();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var T=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+xh(c.fontName)),f("/FontFile2 "+A+" 0 R"),f("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var R=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+xh(c.fontName)),f("/FontDescriptor "+T+" 0 R"),f("/W "+r.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+k+" 0 R"),f("/BaseFont /"+xh(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+R+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,d=u.newObject,p=u.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var N=d();p({data:_,addLength1:!0,objectId:N}),f("endobj");var A=d();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:A}),f("endobj");var k=d();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+N+" 0 R"),f("/Flags 96"),f("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+xh(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=d();for(var T=0;T<c.metadata.hmtx.widths.length;T++)c.metadata.hmtx.widths[T]=parseInt(c.metadata.hmtx.widths[T]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+xh(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,d=o.y,p=o.options||{},y=o.mutex||{},_=y.pdfEscape,b=y.activeFontKey,N=y.fonts,A=b,k="",T=0,R="",O=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:c,x:f,y:d,options:p,mutex:y};for(R=c,A=b,Array.isArray(c)&&(R=c[0]),T=0;T<R.length;T+=1)N[A].metadata.hasOwnProperty("cmap")&&(u=N[A].metadata.cmap.unicode.codeMap[R[T].charCodeAt(0)]),u||R[T].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?k+=R[T]:k+="";var V="";return parseInt(A.slice(1))<14||O==="WinAnsiEncoding"?V=_(k,A).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(V=t(k,N[A])),y.isHex=!0,{text:V,x:f,y:d,options:p,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var d=0;for(d=0;d<u.length;d+=1)Array.isArray(u[d])&&u[d].length===3?c.push([a(Object.assign({},f,{text:u[d][0]})).text,u[d][1],u[d][2]]):c.push(a(Object.assign({},f,{text:u[d]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(It),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(It.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(s){var a,o,u,c,f,d,p,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,O=0;this.__bidiEngine__={};var V=function(M){var F=M.charCodeAt(),J=F>>8,te=A[J];return te!==void 0?y[256*te+(255&F)]:J===252||J===253?"AL":T.test(J)?"L":J===8?"R":"N"},I=function(M){for(var F,J=0;J<M.length;J++){if((F=V(M.charAt(J)))==="L")return!1;if(F==="R")return!0}return!1},W=function(M,F,J,te){var ae,H,se,Q,ge=F[te];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(ge="AN");break;case"AL":R=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":te<1||te+1>=F.length||(ae=J[te-1])!=="EN"&&ae!=="AN"||(H=F[te+1])!=="EN"&&H!=="AN"?ge="N":R&&(H="AN"),ge=H===ae?H:"N";break;case"ES":ge=(ae=te>0?J[te-1]:"B")==="EN"&&te+1<F.length&&F[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&J[te-1]==="EN"){ge="EN";break}if(R){ge="N";break}for(se=te+1,Q=F.length;se<Q&&F[se]==="ET";)se++;ge=se<Q&&F[se]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(Q=F.length,se=te+1;se<Q&&F[se]==="NSM";)se++;if(se<Q){var ue=M[te],G=ue>=1425&&ue<=2303||ue===64286;if(ae=F[se],G&&(ae==="R"||ae==="AL")){ge="R";break}}}ge=te<1||(ae=F[te-1])==="B"?"N":J[te-1];break;case"B":R=!1,a=!0,ge=O;break;case"S":o=!0,ge="N"}return ge},U=function(M,F,J){var te=M.split("");return J&&L(te,J,{hiLevel:O}),te.reverse(),F&&F.reverse(),te.join("")},L=function(M,F,J){var te,ae,H,se,Q,ge=-1,ue=M.length,G=0,j=[],z=O?b:_,X=[];for(R=!1,a=!1,o=!1,ae=0;ae<ue;ae++)X[ae]=V(M[ae]);for(H=0;H<ue;H++){if(Q=G,j[H]=W(M,X,j,H),te=240&(G=z[Q][N[j[H]]]),G&=15,F[H]=se=z[G][5],te>0)if(te===16){for(ae=ge;ae<H;ae++)F[ae]=1;ge=-1}else ge=-1;if(z[G][6])ge===-1&&(ge=H);else if(ge>-1){for(ae=ge;ae<H;ae++)F[ae]=se;ge=-1}X[H]==="B"&&(F[H]=0),J.hiLevel|=se}o&&(function(ie,ce,pe){for(var me=0;me<pe;me++)if(ie[me]==="S"){ce[me]=O;for(var Ne=me-1;Ne>=0&&ie[Ne]==="WS";Ne--)ce[Ne]=O}})(X,F,ue)},B=function(M,F,J,te,ae){if(!(ae.hiLevel<M)){if(M===1&&O===1&&!a)return F.reverse(),void(J&&J.reverse());for(var H,se,Q,ge,ue=F.length,G=0;G<ue;){if(te[G]>=M){for(Q=G+1;Q<ue&&te[Q]>=M;)Q++;for(ge=G,se=Q-1;ge<se;ge++,se--)H=F[ge],F[ge]=F[se],F[se]=H,J&&(H=J[ge],J[ge]=J[se],J[se]=H);G=Q}G++}}},ee=function(M,F,J){var te=M.split(""),ae={hiLevel:O};return J||(J=[]),L(te,J,ae),(function(H,se,Q){if(Q.hiLevel!==0&&p)for(var ge,ue=0;ue<H.length;ue++)se[ue]===1&&(ge=k.indexOf(H[ue]))>=0&&(H[ue]=k[ge+1])})(te,J,ae),B(2,te,F,J,ae),B(1,te,F,J,ae),te.join("")};return this.__bidiEngine__.doBidiReorder=function(M,F,J){if((function(ae,H){if(H)for(var se=0;se<ae.length;se++)H[se]=se;c===void 0&&(c=I(ae)),d===void 0&&(d=I(ae))})(M,F),u||!f||d)if(u&&f&&c^d)O=c?1:0,M=U(M,F,J);else if(!u&&f&&d)O=c?1:0,M=ee(M,F,J),M=U(M,F);else if(!u||c||f||d){if(u&&!f&&c^d)M=U(M,F),c?(O=0,M=ee(M,F,J)):(O=1,M=ee(M,F,J),M=U(M,F));else if(u&&c&&!f&&d)O=1,M=ee(M,F,J),M=U(M,F);else if(!u&&!f&&c^d){var te=p;c?(O=1,M=ee(M,F,J),O=0,p=!1,M=ee(M,F,J),p=te):(O=0,M=ee(M,F,J),M=U(M,F),O=1,p=!1,M=ee(M,F,J),p=te,M=U(M,F))}}else O=0,M=ee(M,F,J);else O=c?1:0,M=ee(M,F,J);return M},this.__bidiEngine__.setOptions=function(M){M&&(u=M.isInputVisual,f=M.isOutputVisual,c=M.isInputRtl,d=M.isOutputRtl,p=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([t.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([t.doBidiReorder(a[c])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new jc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new iL(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new GM(this.contents),this.head=new YM(this),this.name=new KM(this),this.cmap=new b4(this),this.toUnicode={},this.hhea=new $M(this),this.maxp=new JM(this),this.hmtx=new eL(this),this.post=new ZM(this),this.os2=new XM(this),this.loca=new sL(this),this.glyf=new tL(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,d;for(d=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,s){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},r.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},r})();var vo,jc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},r.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,s,a,o,u,c,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*c+f},r.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},r.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},r})(),GM=(function(){var r;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,c,f,d,p,y,_,b,N,A;for(A in b=Object.keys(t).length,f=Math.log(2),y=16*Math.floor(Math.log(b)/f),u=Math.floor(y/f),p=16*b-y,(a=new jc).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(u),a.writeShort(p),o=16*b,d=a.pos+o,c=null,N=[],t)for(_=t[A],a.writeString(A),a.writeInt(r(_)),a.writeInt(d),a.writeInt(_.length),N=N.concat(_),A==="head"&&(c=d),d+=_.length;d%4;)N.push(0),d++;return a.write(N),s=2981146554-r(a.data),a.pos=c+8,a.writeUInt32(s),a.data},r=function(t){var s,a,o,u;for(t=v4.call(t);t.length%4;)t.push(0);for(o=new jc(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),WM={}.hasOwnProperty,$o=function(r,e){for(var t in e)WM.call(e,t)&&(r[t]=e[t]);function s(){this.constructor=r}return s.prototype=e.prototype,r.prototype=new s,r.__super__=e.prototype,r};vo=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var YM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new jc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),yx=(function(){function r(e,t){var s,a,o,u,c,f,d,p,y,_,b,N,A,k,T,R,O;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,o=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),e.pos+=2,A=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),d=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),p=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var V,I;for(I=[],f=V=0;0<=a?V<a:V>a;f=0<=a?++V:--V)I.push(e.readUInt16());return I})(),f=T=0,O=o.length;T<O;f=++T)for(k=o[f],s=R=N=A[f];N<=k?R<=k:R>=k;s=N<=k?++R:--R)p[f]===0?u=s+d[f]:(u=c[p[f]/2+(s-N)-(_-f)]||0)!==0&&(u+=d[f]),this.codeMap[s]=65535&u}e.pos=y}return r.encode=function(e,t){var s,a,o,u,c,f,d,p,y,_,b,N,A,k,T,R,O,V,I,W,U,L,B,ee,M,F,J,te,ae,H,se,Q,ge,ue,G,j,z,X,ie,ce,pe,me,Ne,we,Ve,Ge;switch(te=new jc,u=Object.keys(e).sort(function(nt,st){return nt-st}),t){case"macroman":for(A=0,k=(function(){var nt=[];for(N=0;N<256;++N)nt.push(0);return nt})(),R={0:0},o={},ae=0,ge=u.length;ae<ge;ae++)R[Ne=e[a=u[ae]]]==null&&(R[Ne]=++A),o[a]={old:e[a],new:R[e[a]]},k[a]=R[e[a]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(k),{charMap:o,subtable:te.data,maxGlyphID:A+1};case"unicode":for(F=[],y=[],O=0,R={},s={},T=d=null,H=0,ue=u.length;H<ue;H++)R[I=e[a=u[H]]]==null&&(R[I]=++O),s[a]={old:I,new:R[I]},c=R[I]-a,T!=null&&c===d||(T&&y.push(T),F.push(a),d=c),T=a;for(T&&y.push(T),y.push(65535),F.push(65535),ee=2*(B=F.length),L=2*Math.pow(Math.log(B)/Math.LN2,2),_=Math.log(L/2)/Math.LN2,U=2*B-L,f=[],W=[],b=[],N=se=0,G=F.length;se<G;N=++se){if(M=F[N],p=y[N],M===65535){f.push(0),W.push(0);break}if(M-(J=s[M].new)>=32768)for(f.push(0),W.push(2*(b.length+B-N)),a=Q=M;M<=p?Q<=p:Q>=p;a=M<=p?++Q:--Q)b.push(s[a].new);else f.push(J-M),W.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*B+2*b.length),te.writeUInt16(0),te.writeUInt16(ee),te.writeUInt16(L),te.writeUInt16(_),te.writeUInt16(U),pe=0,j=y.length;pe<j;pe++)a=y[pe],te.writeUInt16(a);for(te.writeUInt16(0),me=0,z=F.length;me<z;me++)a=F[me],te.writeUInt16(a);for(we=0,X=f.length;we<X;we++)c=f[we],te.writeUInt16(c);for(Ve=0,ie=W.length;Ve<ie;Ve++)V=W[Ve],te.writeUInt16(V);for(Ge=0,ce=b.length;Ge<ce;Ge++)A=b[Ge],te.writeUInt16(A);return{charMap:s,subtable:te.data,maxGlyphID:O+1}}},r})(),b4=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new yx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=yx.encode(e,t),(a=new jc).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},r})(),$M=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),XM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),ZM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="post",r.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},r})(),QM=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},KM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="name",r.prototype.parse=function(e){var t,s,a,o,u,c,f,d,p,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=p=0,y=s.length;p<y;o=++p)a=s[o],e.pos=a.offset,d=e.readString(a.length),u=new QM(d,a),f[_=a.nameID]==null&&(f[_]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},r})(),JM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),eL=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,s,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,p;for(p=[],t=d=0;0<=a?d<a:d>a;t=0<=a?++d:--d)p.push(e.readInt16());return p})(),this.widths=(function(){var d,p,y,_;for(_=[],d=0,p=(y=this.metrics).length;d<p;d++)o=y[d],_.push(o.advance);return _}).call(this),s=this.widths[this.widths.length-1],f=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)f.push(this.widths.push(s));return f},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),v4=[].slice,tL=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,s,a,o,u,c,f,d,p,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(c=new jc(t.read(a))).readShort(),d=c.readShort(),y=c.readShort(),f=c.readShort(),p=c.readShort(),this.cache[e]=u===-1?new rL(c,d,y,f,p):new nL(c,u,d,y,f,p),this.cache[e]))},r.prototype.encode=function(e,t,s){var a,o,u,c,f;for(u=[],o=[],c=0,f=t.length;c<f;c++)a=e[t[c]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},r})(),nL=(function(){function r(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),rL=(function(){function r(e,t,s,a,o){var u,c;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return r.prototype.encode=function(){var e,t,s;for(t=new jc(v4.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),sL=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return $o(r,vo),r.prototype.tag="loca",r.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var d=new Array(4*s.length),p=0;p<s.length;++p)d[4*p+3]=255&s[p],d[4*p+2]=(65280&s[p])>>8,d[4*p+1]=(16711680&s[p])>>16,d[4*p]=(4278190080&s[p])>>24;return d},r})(),iL=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},r.prototype.glyphsFor=function(e){var t,s,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))s=f[o],a[o]=s;return a},r.prototype.encode=function(e,t){var s,a,o,u,c,f,d,p,y,_,b,N,A,k,T;for(a in s=b4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},T=s.charMap)b[(f=T[a]).old]=f.new;for(N in _=s.maxGlyphID,u)N in b||(b[N]=_++);return p=(function(R){var O,V;for(O in V={},R)V[R[O]]=O;return V})(b),y=Object.keys(p).sort(function(R,O){return R-O}),A=(function(){var R,O,V;for(V=[],R=0,O=y.length;R<O;R++)c=y[R],V.push(p[c]);return V})(),o=this.font.glyf.encode(u,A,b),d=this.font.loca.encode(o.offsets,A),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},r})();It.API.PDFObject=(function(){var r;function e(){}return r=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var c,f,d;for(d=[],c=0,f=t.length;c<f;c++)s=t[c],d.push(e.convert(s));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();var Z1={exports:{}},aL=Z1.exports,xx;function oL(){return xx||(xx=1,(function(r,e){(function(t,s){s()})(aL,function(){function t(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,p,y){var _=new XMLHttpRequest;_.open("GET",d),_.responseType="blob",_.onload=function(){f(_.response,p,y)},_.onerror=function(){console.error("could not download file")},_.send()}function a(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof w1=="object"&&w1.global===w1?w1:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(d,p,y){var _=u.URL||u.webkitURL,b=document.createElement("a");p=p||d.name||"download",b.download=p,b.rel="noopener",typeof d=="string"?(b.href=d,b.origin===location.origin?o(b):a(b.href)?s(d,p,y):o(b,b.target="_blank")):(b.href=_.createObjectURL(d),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,y){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,y),p);else if(a(d))s(d,p,y);else{var _=document.createElement("a");_.href=d,_.target="_blank",setTimeout(function(){o(_)})}}:function(d,p,y,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof d=="string")return s(d,p,y);var b=d.type==="application/octet-stream",N=/constructor/i.test(u.HTMLElement)||u.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||b&&N||c)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var O=k.result;O=A?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=O:location=O,_=null},k.readAsDataURL(d)}else{var T=u.URL||u.webkitURL,R=T.createObjectURL(d);_?_.location=R:location.href=R,_=null,setTimeout(function(){T.revokeObjectURL(R)},4e4)}});u.saveAs=f.saveAs=f,r.exports=f})})(Z1)),Z1.exports}var lL=oL();const I2="chordWheelSongs",Ag="chordWheelCurrentSongId",Kf=()=>{try{const r=localStorage.getItem(I2);return r?JSON.parse(r).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch(r){return console.error("Error loading saved songs:",r),[]}},wx=r=>{try{const e=Kf(),t=e.findIndex(a=>a.id===r.id),s={...r,updatedAt:new Date().toISOString(),createdAt:r.createdAt instanceof Date?r.createdAt.toISOString():r.createdAt};t>=0?e[t]=s:e.push({...s,createdAt:new Date().toISOString()}),localStorage.setItem(I2,JSON.stringify(e)),localStorage.setItem(Ag,r.id)}catch(e){console.error("Error saving song:",e)}},cL=r=>{try{const t=Kf().filter(s=>s.id!==r);localStorage.setItem(I2,JSON.stringify(t)),localStorage.getItem(Ag)===r&&localStorage.removeItem(Ag)}catch(e){console.error("Error deleting song:",e)}},uL=({isOpen:r,onClose:e,onConfirm:t,title:s,message:a,confirmLabel:o="Confirm",cancelLabel:u="Cancel",isDestructive:c=!1})=>(re.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),re.useEffect(()=>{const f=d=>{d.key==="Escape"&&r&&e()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[r,e]),r?x.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),x.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-sm w-full overflow-hidden flex flex-col scale-100 opacity-100 transition-all",children:[x.jsxs("div",{className:"p-6",children:[x.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s}),x.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),x.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-[#22222e] border-t border-border-subtle",children:[x.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:u}),x.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg transition-transform active:scale-95 ${c?"bg-red-500 hover:bg-red-600":"bg-accent-primary hover:bg-accent-secondary"}`,children:o})]})]})]}):null),y4={I:{degree:0,quality:"major"},ii:{degree:1,quality:"minor"},iii:{degree:2,quality:"minor"},IV:{degree:3,quality:"major"},V:{degree:4,quality:"major"},vi:{degree:5,quality:"minor"},"vii":{degree:6,quality:"diminished"},iv:{degree:3,quality:"minor"},"VI":{degree:8,quality:"major"},bVI:{degree:8,quality:"major"},"VII":{degree:10,quality:"major"},bVII:{degree:10,quality:"major"}},hL=[0,2,4,5,7,9,11];function fL(r,e){const t=Mh(e),s=Al.indexOf(t);if(s===-1)return e;const a=y4[r];if(!a)return console.warn(`Unknown roman numeral: ${r}`),e;let o;a.degree<7?o=hL[a.degree]:o=a.degree;const u=(s+o)%12;return Al[u]}function dL(r,e){const t=y4[r]||{quality:"major"},s=fL(r,e),a=ka(s,t.quality);return{root:s,quality:t.quality,numeral:r,notes:a,symbol:`${s}${t.quality==="major"?"":t.quality==="minor"?"m":""}`}}function F2(r,e){return r.map(t=>dL(t,e))}let Q1=!1,Cp=[];function V2(){Q1=!1,Cp.forEach(r=>clearTimeout(r)),Cp=[]}async function x4(r,e,t=120,s=2,a){V2(),Q1=!0,Ts.state!=="running"&&await Su(),Ts.state==="suspended"&&await Ts.resume(),await Lc();const o=F2(r,e),c=60/t*1e3*s,d=`${4/s}n`;return new Promise(p=>{o.forEach((y,_)=>{const b=window.setTimeout(()=>{if(Q1&&(a?.(_,y),Xs(y.notes,d),_===o.length-1)){const N=window.setTimeout(()=>{Q1=!1,p()},c);Cp.push(N)}},_*c);Cp.push(b)})})}const pL=[{id:"pop-anthem",name:"Pop/Rock Anthem",description:"The most popular progression in modern music. Uplifting and anthemic.",numerals:["I","V","vi","IV"],genre:"Pop/Rock",artists:"U2, The Beatles, Blink-182",color:"accent-primary",sectionType:"chorus",sectionName:"Anthem",beatsPerChord:4},{id:"emotional-ballad",name:"Emotional Ballad",description:"Starts on the minor chord for a melancholic, emotional feel.",numerals:["vi","IV","I","V"],genre:"Ballad",artists:"Adele, John Legend",color:"purple-400",sectionType:"verse",sectionName:"Ballad",beatsPerChord:4},{id:"jazz-ii-v-i",name:"Jazz / R&B",description:"The foundation of jazz harmony. Smooth and sophisticated.",numerals:["ii","V","I"],genre:"Jazz/R&B",artists:"Maroon 5, Jazz Standards",color:"blue-400",sectionType:"verse",sectionName:"ii-V-I",beatsPerChord:4,totalBars:4},{id:"50s-progression",name:"50s Doo-Wop",description:"Classic rock and roll. Nostalgic and feel-good.",numerals:["I","vi","IV","V"],genre:"Oldies",artists:"Stand By Me, Earth Angel",color:"yellow-400",sectionType:"verse",sectionName:"Doo-Wop",beatsPerChord:4},{id:"andalusian",name:"Andalusian Cadence",description:"Dramatic descending progression. Spanish/Flamenco influenced.",numerals:["vi","V","IV","III"],genre:"Dramatic",artists:"Hit the Road Jack, Sultans of Swing",color:"red-400",sectionType:"verse",sectionName:"Andal.",beatsPerChord:4},{id:"pachelbel",name:"Pachelbel Canon",description:"The classical progression that influenced centuries of music.",numerals:["I","V","vi","iii","IV","I","IV","V"],genre:"Classical/Pop",artists:"Canon in D, Basket Case",color:"green-400",sectionType:"verse",sectionName:"Canon",beatsPerChord:2}],mL=[{id:"perfect",name:"Perfect Cadence",description:'The "Full Stop". Strongest resolution.',numerals:["V","I"],color:"green-500",emotion:"Conclusive"},{id:"plagal",name:"Plagal Cadence",description:'The "Amen". Softer, church-like resolution.',numerals:["IV","I"],color:"blue-500",emotion:"Peaceful"},{id:"half",name:"Half Cadence",description:'The "Comma". Leaves listeners wanting more.',numerals:["I","V"],color:"yellow-500",emotion:"Suspenseful"},{id:"deceptive",name:"Deceptive Cadence",description:'The "Surprise". Expecting I, getting vi.',numerals:["V","vi"],color:"purple-500",emotion:"Unexpected"}],gL=({preset:r,showAddButton:e=!0,compact:t=!1,onAddToTimeline:s})=>{const{selectedKey:a,currentSong:o,openTimeline:u}=pn(),c=pn(R=>R.addCustomSection),[f,d]=re.useState(!1),[p,y]=re.useState(null),[_,b]=re.useState(!1),N=F2(r.numerals,a),A=async()=>{if(f){V2(),d(!1),y(null);return}d(!0),y(0);try{await x4(r.numerals,a,o.tempo,r.beatsPerChord,R=>{y(R)})}finally{d(!1),y(null)}},k=async(R,O)=>{if(f)return;y(O);const V=r.beatsPerChord>=4?"1n":"2n";await Xs(R.notes,V),setTimeout(()=>y(null),400)},T=()=>{c&&(c(r.sectionName,r.sectionType,N,{beatsPerChord:r.beatsPerChord,totalBars:r.totalBars}),u(),b(!0),setTimeout(()=>b(!1),1500),s?.())};return x.jsxs("div",{className:`
                p-2.5 rounded bg-bg-tertiary transition-all duration-300 overflow-hidden
                ${t?"text-xs":"text-sm"}
                ${_?"ring-2 ring-green-500 bg-green-500/10":""}
            `,children:[x.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("span",{className:"font-bold text-white",children:r.name}),r.artists&&x.jsx("span",{className:"block text-xs text-gray-500 truncate",children:r.artists})]}),e&&x.jsxs("button",{onClick:T,className:`
                            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium shrink-0
                            transition-all duration-200
                            ${_?"bg-green-500 text-white":"bg-bg-elevated hover:bg-accent-primary/20 text-gray-400 hover:text-accent-primary"}
                        `,title:"Add to timeline",children:[x.jsx(Tc,{size:12}),x.jsx("span",{className:"hidden sm:inline",children:_?"Added!":"Add"})]})]}),x.jsxs("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"auto repeat(4, minmax(0, max-content))",justifyContent:"start"},children:[x.jsx("button",{onClick:A,className:`
                        flex items-center justify-center w-7 h-7 rounded-full shrink-0
                        transition-all duration-200
                        ${f?"bg-red-500 hover:bg-red-600 text-white":"bg-accent-primary/20 hover:bg-accent-primary/40 text-accent-primary"}
                    `,title:f?"Stop":"Play progression",children:f?x.jsx(X3,{size:12}):x.jsx(Wh,{size:12,className:"ml-0.5"})}),r.numerals.map((R,O)=>{const V=N[O],I=p===O,W=O<4?void 0:O%4+2;return x.jsx("button",{onClick:()=>k(V,O),disabled:f,className:`
                                text-xs px-2 py-1 rounded font-medium
                                transition-all duration-150
                                ${I?`bg-${r.color} text-white scale-110 shadow-lg shadow-${r.color}/30`:`bg-black/40 text-${r.color} hover:bg-black/60 hover:scale-105`}
                                ${f&&!I?"opacity-50":""}
                                disabled:cursor-not-allowed
                            `,style:{...I?{backgroundColor:`var(--color-${r.color})`}:{},...W?{gridColumn:W}:{}},title:`Play ${V.symbol}`,children:R},`${R}-${O}`)})]})]})},bL=({preset:r})=>{const{selectedKey:e,currentSong:t}=pn(),[s,a]=re.useState(!1),[o,u]=re.useState(null),c=F2(r.numerals,e),f=async()=>{if(s){V2(),a(!1),u(null);return}a(!0),u(0);try{await x4(r.numerals,e,t.tempo,2,y=>{u(y)})}finally{a(!1),u(null)}},d=async(y,_)=>{s||(u(_),await Xs(y.notes,"2n"),setTimeout(()=>u(null),400))},p=`text-${r.color.replace("-500","-400")}`;return x.jsxs("div",{className:`
                group p-3 rounded bg-bg-tertiary hover:bg-bg-tertiary/80 
                transition-all duration-200 border-l-2
            `,style:{borderColor:`var(--color-${r.color}, currentColor)`},children:[x.jsxs("div",{className:"flex justify-between items-center mb-1 gap-2",children:[x.jsx("span",{className:"font-bold text-white",children:r.name}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:f,className:`
                            w-6 h-6 rounded-full flex items-center justify-center
                            transition-all duration-200
                            ${s?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white/70 hover:text-white"}
                        `,title:s?"Stop":"Play cadence",children:s?x.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"}):x.jsx(Wh,{size:10,className:"ml-0.5"})}),x.jsx("div",{className:"flex gap-0.5",children:r.numerals.map((y,_)=>{const b=c[_],N=o===_;return x.jsxs(Yn.Fragment,{children:[x.jsx("button",{onClick:()=>d(b,_),disabled:s,className:`
                                            text-xs px-1.5 py-0.5 rounded
                                            transition-all duration-150
                                            ${N?"bg-white text-black scale-110":`bg-black/30 ${p} hover:bg-black/50 hover:scale-105`}
                                        `,style:N?{backgroundColor:`var(--color-${r.color})`,color:"white"}:void 0,title:`Play ${b.symbol}`,children:y}),_<r.numerals.length-1&&x.jsx("span",{className:"text-gray-500 text-xs flex items-center",children:""})]},`${y}-${_}`)})})]})]}),x.jsx("p",{className:"text-gray-400 text-xs",children:r.description})]})},_x=({size:r=32})=>x.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",style:{width:r,height:r},children:[[...Array(12)].map((e,t)=>{const s=t*30,a=(s-15-90)*Math.PI/180,o=(s+15-90)*Math.PI/180,u=18,c=46,f=t<=4||t>=10;let d;f?t===0?d="rgba(234, 179, 8, 0.9)":t===1?d="rgba(163, 190, 60, 0.85)":t===2?d="rgba(132, 204, 22, 0.8)":t===3?d="rgba(74, 222, 128, 0.7)":t===4?d="rgba(45, 212, 191, 0.6)":t===11?d="rgba(251, 146, 60, 0.85)":t===10?d="rgba(168, 162, 158, 0.6)":d="rgba(200, 180, 100, 0.7)":d=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][t%3];const p=50+u*Math.cos(a),y=50+u*Math.sin(a),_=50+c*Math.cos(a),b=50+c*Math.sin(a),N=50+c*Math.cos(o),A=50+c*Math.sin(o),k=50+u*Math.cos(o),T=50+u*Math.sin(o);return x.jsx("path",{d:`M ${p} ${y} L ${_} ${b} A ${c} ${c} 0 0 1 ${N} ${A} L ${k} ${T} A ${u} ${u} 0 0 0 ${p} ${y}`,fill:d,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},t)}),x.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]}),Sx=({onClose:r})=>{const{selectedKey:e}=pn();return x.jsxs(x.Fragment,{children:[x.jsxs("section",{className:"relative",children:[x.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-accent-primary/20 rounded-full blur-3xl pointer-events-none"}),x.jsx("div",{className:"absolute -bottom-5 -right-5 w-24 h-24 bg-purple-500/15 rounded-full blur-3xl pointer-events-none"}),x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2 relative",children:[x.jsx(uT,{size:12,className:"fill-accent-primary"}),"Quick Start"]}),x.jsxs("div",{className:"relative bg-gradient-to-b from-bg-elevated/60 to-bg-elevated/40 rounded-xl p-5 border border-white/5 space-y-4",children:[x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:x.jsx(P3,{size:18,className:"text-accent-primary"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:x.jsx(Vh,{size:18,className:"text-purple-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:x.jsx(q3,{size:18,className:"text-emerald-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",x.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:x.jsx(pp,{size:18,className:"text-amber-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",x.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:x.jsx(f2,{size:18,className:"text-sky-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),x.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"shrink-0 w-14 h-14 relative",children:x.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=18,f=46,d=s<=4||s>=10;let p;d?s===0?p="rgba(234, 179, 8, 0.9)":s===1?p="rgba(163, 190, 60, 0.85)":s===2?p="rgba(132, 204, 22, 0.8)":s===3?p="rgba(74, 222, 128, 0.7)":s===4?p="rgba(45, 212, 191, 0.6)":s===11?p="rgba(251, 146, 60, 0.85)":s===10?p="rgba(168, 162, 158, 0.6)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+f*Math.cos(o),N=50+f*Math.sin(o),A=50+f*Math.cos(u),k=50+f*Math.sin(u),T=50+c*Math.cos(u),R=50+c*Math.sin(u);return x.jsx("path",{d:`M ${y} ${_} L ${b} ${N} A ${f} ${f} 0 0 1 ${A} ${k} L ${T} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),x.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("strong",{className:"text-xs text-white block mb-1",children:"Understanding the Wheel"}),x.jsxs("div",{className:"text-[11px] text-gray-400 leading-snug space-y-0.5",children:[x.jsxs("div",{children:[x.jsx("strong",{className:"text-gray-300",children:"Highlighted"})," = in key"]}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-gray-300",children:"Inner"})," = Major (I, IV, V)"]}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-gray-300",children:"Middle"})," = Minor (ii, iii, vi)"]}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-gray-300",children:"Outer"})," = Dim (vii)"]})]})]})]})}),x.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:x.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[x.jsx(sd,{size:14,className:"text-accent-primary shrink-0"}),x.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[x.jsx("strong",{className:"text-accent-primary",children:"Tip:"})," Tap the",x.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded-full text-text-muted border border-border-subtle/60",children:x.jsx(sd,{size:10})}),"button anytime to reopen this guide."]})]})})]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[x.jsx(AT,{size:12}),"The Language of Music (Roman Numerals)"]}),x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[x.jsx("p",{className:"text-sm text-gray-300",children:'Musicians use roman numerals to talk about chords regardless of the specific key. This reveals the "DNA" of a song.'}),x.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:["I","ii","iii","IV","V","vi","vii"].map((t,s)=>x.jsxs("div",{className:`rounded p-2 flex flex-col items-center justify-between h-20 ${["I","IV","V"].includes(t)?"bg-accent-primary/20 border border-accent-primary/30":t==="vii"?"bg-red-500/10 border border-red-500/20":"bg-violet-500/15 border border-violet-500/25"}`,children:[x.jsx("span",{className:"font-bold text-white mb-1",children:t}),x.jsx("span",{className:"text-[10px] text-gray-400 leading-tight",children:s===0?"Tonic (Home)":s===3?"Subdom. (Away)":s===4?"Dominant (Tension)":s===5?"Rel. Minor":s===6?"Leading Tone":"Mediant"})]},t))}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-400",children:[x.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[x.jsx("strong",{className:"text-accent-primary block mb-1",children:"Tonic (I, vi, iii)"}),"Stable, home base. Where songs usually start and end."]}),x.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[x.jsx("strong",{className:"text-accent-primary block mb-1",children:"Subdominant (IV, ii)"}),"Movement, drifting away from home. Creates interest."]}),x.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[x.jsx("strong",{className:"text-accent-primary block mb-1",children:"Dominant (V, vii)"}),"Tension, needing resolution. Pulls strongly back to I."]})]})]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[x.jsx(jT,{size:12}),"Songwriting Toolkit"]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Emotional Cadences (How Phrases End)",x.jsx(sg,{size:12,className:"text-accent-primary/50"}),x.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e]})]}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:mL.map(t=>x.jsx(bL,{preset:t},t.id))})]}),x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Famous Progressions",x.jsx(sg,{size:12,className:"text-accent-primary/50"}),x.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e,"  tap to play  click + to add"]})]}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:pL.map(t=>x.jsx(gL,{preset:t,onAddToTimeline:r},t.id))})]})]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[x.jsx(d2,{size:12}),"Adding Spice (Advanced)"]}),x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-6",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm flex items-center gap-2",children:"1. Modal Interchange (Borrowed Chords)"}),x.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Steal chords from the parallel minor key to add "cinematic" emotion.'}),x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[x.jsx("strong",{className:"text-white block",children:"Minor IV (iv)"}),x.jsx("span",{className:"text-gray-500",children:'"The Beatles Cadence". Gives a nostalgic, bittersweet ending. (Fm in key of C).'})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[x.jsx("strong",{className:"text-white block",children:"Flat VI (VI)"}),x.jsx("span",{className:"text-gray-500",children:'Epic, heroic, fantasy feeling. "Lord of the Rings" sound. (Ab in key of C).'})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[x.jsx("strong",{className:"text-white block",children:"Picardy Third"}),x.jsx("span",{className:"text-gray-500",children:"Ending a sad, minor song on a happy Major I chord. Pure sunshine."})]})]})]}),x.jsx("div",{className:"w-full h-px bg-white/5"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"2. Secondary Dominants"}),x.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Make a minor chord Major to create a magnetic pull to another chord."}),x.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"In C Major, play ',x.jsx("strong",{className:"text-white",children:"E Major (III)"}),". It pulls hard to ",x.jsx("strong",{className:"text-white",children:"Am"}),'. (Radiohead - Creep)"']})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"3. Tritone Substitution"}),x.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Jazz trick: Replace the V chord with a dominant chord exactly halfway around the circle (a tritone away)."}),x.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"Instead of G7  C, try ',x.jsx("strong",{className:"text-white",children:"Db7  C"}),'. Smooth chromatic slide."']})]})]}),x.jsx("div",{className:"w-full h-px bg-white/5"}),x.jsxs("div",{children:[x.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["4. Secrets of the Pros",x.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold",children:"Expert"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[x.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"A"}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-white text-sm block",children:"Pedal Point"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Keep the bass note the same while changing chords on top. Creates massive tension and "floaty" feelings. (e.g., C/C  F/C  G/C).'})]})]}),x.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[x.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"B"}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-white text-sm block",children:"Line Clich"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'A single note moving down chromatically inside a static chord. think "Stairway to Heaven" or James Bond theme (Am  Am(maj7)  Am7  Am6).'})]})]}),x.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[x.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"C"}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-white text-sm block",children:"Relative Major/Minor Modulation"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching focus between I and vi. Use the exact same notes, but center your melody around Am instead of C to instantly change the mood from happy to sad."})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"5. Building Better Chords (Extensions)"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-center",children:[x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"maj7"}),x.jsx("span",{className:"text-gray-500",children:"Dreamy, Jazz, Lo-fi"})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"dom7"}),x.jsx("span",{className:"text-gray-500",children:"Blues, Funk, Tension"})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"sus4"}),x.jsx("span",{className:"text-gray-500",children:"Open, airy, delayed"})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"add9"}),x.jsx("span",{className:"text-gray-500",children:"Rich, cinematic pop"})]})]})]})]})]})]})},vL=({isOpen:r,onClose:e,isEmbedded:t=!1})=>r?t?x.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col bg-[#1a1a24]",children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-[#22222e] shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-6 h-6",children:x.jsx(_x,{size:24})}),x.jsx("h2",{className:"text-sm font-bold text-white",children:"Guide"})]}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-bg-tertiary rounded transition-colors text-text-muted hover:text-white",children:x.jsx(vu,{size:16})})]}),x.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-6 sm:py-6 space-y-8",children:x.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:x.jsx(Sx,{onClose:e})})})]}):x.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none",style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[x.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm cursor-pointer pointer-events-auto",onClick:e}),x.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-4xl w-full max-h-full overflow-hidden flex flex-col pointer-events-auto",children:[x.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-[#22222e]",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8",children:x.jsx(_x,{size:32})}),x.jsx("h2",{className:"text-lg font-bold text-white",children:"Chord Wheel Guide"})]}),x.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-tertiary rounded-lg transition-colors text-text-muted hover:text-white",children:x.jsx(vu,{size:20})})]}),x.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-8 sm:py-8 space-y-8",children:x.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:x.jsx(Sx,{onClose:e})})})]})]}):null,Nx="chordwheel_onboarding_seen",yL=({onDismiss:r,onOpenHelp:e})=>{const[t,s]=re.useState(!1),[a,o]=re.useState(!1);re.useEffect(()=>{if(!localStorage.getItem(Nx)){const f=setTimeout(()=>s(!0),800);return()=>clearTimeout(f)}},[]);const u=()=>{o(!0),localStorage.setItem(Nx,"true"),setTimeout(()=>{s(!1),r?.()},300)};return t?x.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 ${a?"opacity-0":"opacity-100"}`,style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[x.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer",onClick:u}),x.jsxs("div",{className:`relative max-w-md w-full bg-gradient-to-b from-[#1e1e2a] to-[#151520] border border-white/10 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 ${a?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[x.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-accent-primary/30 rounded-full blur-3xl pointer-events-none"}),x.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl pointer-events-none"}),x.jsxs("div",{className:"relative px-6 pt-6 pb-4 flex items-center justify-between border-b border-white/5",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center shadow-lg shadow-accent-primary/25",children:x.jsx(QT,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-bold text-white",children:"Welcome!"}),x.jsx("p",{className:"text-xs text-gray-400",children:"Quick start guide"})]})]}),x.jsx("button",{onClick:u,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:x.jsx(vu,{size:20})})]}),x.jsxs("div",{className:"relative px-6 py-5 space-y-4",children:[x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:x.jsx(P3,{size:18,className:"text-accent-primary"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:x.jsx(Vh,{size:18,className:"text-purple-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:x.jsx(q3,{size:18,className:"text-emerald-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",x.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:x.jsx(pp,{size:18,className:"text-amber-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",x.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:x.jsx(f2,{size:18,className:"text-sky-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),x.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[x.jsx(RT,{size:14,className:"text-accent-primary shrink-0"}),x.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[x.jsx("strong",{className:"text-gray-300",children:"Tip:"})," Tap the",x.jsx("button",{onClick:()=>{u(),setTimeout(()=>e?.(),350)},className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 hover:bg-bg-tertiary rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/60",title:"Open full guide",children:x.jsx(sd,{size:12})}),"button anytime for the full guide."]})]}),x.jsx("div",{className:"shrink-0 w-16 h-16 relative",children:x.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((c,f)=>{const d=f*30,p=(d-15-90)*Math.PI/180,y=(d+15-90)*Math.PI/180,_=18,b=46,N=f<=4||f>=10;let A;N?f===0?A="rgba(234, 179, 8, 0.9)":f===1?A="rgba(163, 190, 60, 0.85)":f===2?A="rgba(132, 204, 22, 0.8)":f===3?A="rgba(74, 222, 128, 0.7)":f===4?A="rgba(45, 212, 191, 0.6)":f===11?A="rgba(251, 146, 60, 0.85)":f===10?A="rgba(168, 162, 158, 0.6)":A="rgba(200, 180, 100, 0.7)":A=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][f%3];const k=50+_*Math.cos(p),T=50+_*Math.sin(p),R=50+b*Math.cos(p),O=50+b*Math.sin(p),V=50+b*Math.cos(y),I=50+b*Math.sin(y),W=50+_*Math.cos(y),U=50+_*Math.sin(y);return x.jsx("path",{d:`M ${k} ${T} L ${R} ${O} A ${b} ${b} 0 0 1 ${V} ${I} L ${W} ${U} A ${_} ${_} 0 0 0 ${k} ${T}`,fill:A,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},f)}),x.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})})]})})]}),x.jsx("div",{className:"relative px-6 pb-6",children:x.jsx("button",{onClick:u,className:"w-full py-3 px-4 rounded-xl bg-gradient-to-r from-accent-primary to-purple-600 text-white font-semibold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-accent-primary/25 active:scale-[0.98]",children:"Got it, let's go!"})})]})]}):null},xL=({isOpen:r,onClose:e,title:t,artist:s,tags:a,onSave:o})=>{const u=re.useRef(null),c=re.useRef(null),[f,d]=re.useState(t),[p,y]=re.useState(s),[_,b]=re.useState(a),[N,A]=re.useState("");if(re.useEffect(()=>{r&&(d(t),y(s),b(a),A(""),setTimeout(()=>{c.current?.focus(),c.current?.select()},100))},[r,t,s,a]),re.useEffect(()=>{if(!r)return;const I=W=>{W.key==="Escape"&&e()};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[r,e]),!r)return null;const k=()=>{const I=f.trim()||"Untitled Song";o(I,p.trim(),_),e()},T=()=>{const I=N.trim();I&&!_.includes(I)&&(b([..._,I]),A(""))},R=I=>{b(_.filter(W=>W!==I))},O=I=>{I.key==="Enter"&&(I.preventDefault(),T())},V=I=>{I.key==="Enter"&&(I.preventDefault(),k())};return Cl.createPortal(x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),x.jsxs("div",{ref:u,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"340px",width:"90vw"},children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[x.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),x.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Song Info"})]}),x.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:x.jsx(vu,{size:14})})]}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Song Title"}),x.jsx("input",{ref:c,type:"text",value:f,onChange:I=>d(I.target.value),onKeyDown:V,placeholder:"Untitled Song",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"By (Optional)"}),x.jsx("input",{type:"text",value:p,onChange:I=>y(I.target.value),onKeyDown:V,placeholder:"Artist or songwriter name",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),x.jsxs("div",{className:"space-y-1.5",children:[x.jsxs("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[x.jsx(ek,{size:10}),"Tags (Optional)"]}),_.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:_.map(I=>x.jsxs("span",{className:Ot("inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium","bg-accent-primary/15 text-accent-primary border border-accent-primary/30"),children:[I,x.jsx("button",{onClick:()=>R(I),className:"hover:text-red-400 transition-colors",title:`Remove "${I}"`,children:x.jsx(vu,{size:12})})]},I))}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"text",value:N,onChange:I=>A(I.target.value),onKeyDown:O,placeholder:"Add a tag...",maxLength:30,className:`flex-1 h-8 bg-bg-tertiary text-text-primary text-xs rounded-lg 
                                           px-3 border border-border-subtle 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`}),x.jsxs("button",{onClick:T,disabled:!N.trim(),className:Ot("h-8 px-3 rounded-lg text-xs font-medium transition-all","flex items-center gap-1",N.trim()?"bg-accent-primary/10 border border-accent-primary/30 text-accent-primary hover:bg-accent-primary/20 active:scale-95":"bg-bg-tertiary border border-border-subtle text-text-muted cursor-not-allowed"),children:[x.jsx(Tc,{size:12}),"Add"]})]}),x.jsx("p",{className:"text-[10px] text-text-muted",children:"Tags help you organize and filter your songs"})]}),x.jsx("button",{onClick:k,className:`w-full py-2.5 rounded-lg
                                   bg-accent-primary text-white font-bold text-sm
                                   hover:bg-accent-primary/90 active:scale-[0.98]
                                   transition-all shadow-lg shadow-accent-primary/25`,children:"Save"})]})]})]}),document.body)},wL=({mobileTimelineOpen:r,setMobileTimelineOpen:e,chordPanelVisible:t,setChordPanelScrolledToBottom:s})=>{const a=re.useRef(0),[o,u]=re.useState(0),c=re.useRef(!1),f=t,d=!t,p=450,y=V=>{a.current=V.touches[0].clientY,c.current=!0,u(0)},_=V=>{if(!c.current)return;const I=a.current-V.touches[0].clientY;u(I)},b=()=>{if(!c.current)return;c.current=!1;const V=40;f&&o<-V&&(t&&pn.getState().toggleChordPanel(),r&&e(!1)),d&&o>V&&(r||e(!0),t||pn.getState().toggleChordPanel()),u(0)},N=()=>{Math.abs(o)<15&&(f?(t&&pn.getState().toggleChordPanel(),r&&e(!1)):(r||e(!0),t||pn.getState().toggleChordPanel()))},A=o!==0,k=f&&o<0?Math.min(400,-o*1.5):0,T=d&&o>0?Math.min(p,o*2):0,R=T>0,O=k>0;return x.jsxs("div",{className:"shrink-0 flex flex-col overflow-hidden",style:{maxHeight:O?`calc(65vh - ${k}px)`:"65vh",opacity:O?Math.max(.3,1-k/500):1,transition:A?"none":"all 0.25s ease-out"},children:[x.jsx("div",{className:"h-6 flex items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing select-none",onTouchStart:y,onTouchMove:_,onTouchEnd:b,onClick:N,children:x.jsx(B3,{size:16,className:`text-text-muted transition-transform duration-200 ${f?"rotate-180":""}`})}),x.jsxs("div",{className:"flex-1 overflow-hidden",style:{maxHeight:R?`${T}px`:void 0,transition:A?"none":"max-height 0.25s ease-out"},children:[x.jsx(og,{isOpen:r||R,onToggle:()=>e(!r)}),x.jsx("div",{"data-chord-details":!0,className:"shrink-0 bg-bg-primary overflow-hidden",style:{maxHeight:r||R?"45vh":"55vh"},children:x.jsx(lg,{variant:"drawer",onScrollChange:s,forceVisible:R})})]})]})};function _L(){const{currentSong:r,selectedKey:e,timelineVisible:t,toggleTimeline:s,selectedSectionId:a,selectedSlotId:o,clearSlot:u,clearTimeline:c,setTitle:f,setArtist:d,setTags:p,loadSong:y,newSong:_,instrument:b,volume:N,isMuted:A,undo:k,redo:T,canUndo:R,canRedo:O,chordPanelVisible:V}=pn();re.useEffect(()=>{g2(b)},[b]),re.useEffect(()=>{Z3(N)},[N]),re.useEffect(()=>{Q3(A)},[A]);const[I,W]=re.useState(!1),[U,L]=re.useState(()=>{if(typeof window>"u")return 1;const le=window.innerWidth,Pe=window.innerHeight;return le<768||Pe<500&&Pe<le?1.25:1}),[B,ee]=re.useState(50),[M,F]=re.useState({x:0,y:0}),J=re.useRef(null),[te,ae]=re.useState(()=>typeof window>"u"?200:Math.max(200,Math.floor(window.innerWidth*.33))),[H,se]=re.useState(()=>{if(typeof window>"u")return 500;const le=window.innerWidth,Qe=window.innerHeight-48-56-152-32,ht=le-380-40;return Math.max(300,Math.min(ht,Qe))}),[Q,ge]=re.useState(()=>typeof window<"u"?window.innerWidth<768||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[ue,G]=re.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1),j=re.useRef(!1),z=re.useRef(!1),[X,ie]=re.useState(!1),ce=re.useRef(null),[pe,me]=re.useState(!1),[Ne,we]=re.useState(!1),Ve=re.useRef(null),Ge=re.useRef(!1);re.useEffect(()=>{if(!Q)return;if(ue&&!Ge.current)Ge.current=!0,Ve.current=pn.getState().chordPanelVisible,ie(!0),me(!0),pn.getState().chordPanelVisible||pn.getState().toggleChordPanel();else if(!ue&&Ge.current){Ge.current=!1;const ht=pn.getState().chordPanelVisible,wt=Ve.current;wt!==null&&ht!==wt&&pn.getState().toggleChordPanel(),me(!1),Ve.current=null}const le=()=>{ie(!0)},Pe=()=>{ce.current&&clearTimeout(ce.current),ce.current=setTimeout(le,1e4)},Qe=ht=>{const wt=ht.target,lt=wt.closest("[data-chord-details]"),Zt=wt.closest("[data-playback-controls]"),Cn=wt.closest("[data-mobile-timeline]"),xn=wt.closest("header"),tn=wt.closest("[data-wheel-background]"),Kt=wt.closest("button"),fn=wt.tagName==="path"||wt.tagName==="circle"||wt.tagName==="text"||wt.tagName==="polygon"||wt.tagName==="g"&&wt.style.cursor==="pointer"||wt.closest('g[style*="cursor: pointer"]')||wt.closest('g[class*="cursor-pointer"]'),Qt=!ue&&pn.getState().chordPanelVisible;tn&&!lt&&!Zt&&!Cn&&!xn&&!Kt&&!fn&&!Qt&&(ie($n=>!$n),ce.current&&clearTimeout(ce.current),Pe())};return document.addEventListener("touchstart",Qe),Pe(),()=>{document.removeEventListener("touchstart",Qe),ce.current&&clearTimeout(ce.current)}},[Q,ue]);const[nt,st]=re.useState(!1),Y=re.useRef(null),De=re.useCallback(()=>{!Q||!ue||(st(!0),Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{st(!1)},3e3))},[Q,ue]);re.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]),re.useEffect(()=>{if(!Q)return;const le=()=>{me(!0)};return window.addEventListener("openMobileTimeline",le),()=>window.removeEventListener("openMobileTimeline",le)},[Q]),re.useEffect(()=>{if(!Q)return;const le=pn.getState();pe&&!le.timelineVisible?pn.setState({timelineVisible:!0}):!pe&&le.timelineVisible&&pn.setState({timelineVisible:!1})},[Q,pe]),re.useEffect(()=>{const le=()=>{const Pe=window.innerWidth,Qe=window.innerHeight,ht=Pe<768||Qe<500&&Qe<Pe,wt=Qe<Pe&&Qe<500;if(ge(ht),G(wt),ht&&wt){const Zt=Math.max(200,Math.floor(Pe*.33));ae(Zt)}if(!ht){const Zt=pn.getState().timelineVisible?152:24,Cn=Qe-48-56-Zt-32,xn=Pe-380-40;se(Math.max(300,Math.min(xn,Cn)))}const lt=pn.getState();ht&&!z.current&&(lt.timelineVisible&&lt.toggleTimeline(),lt.chordPanelVisible&&lt.toggleChordPanel(),z.current=!0),!ht&&j.current&&!lt.chordPanelVisible&&(lt.toggleChordPanel(),j.current=!1)};return le(),window.addEventListener("resize",le),window.addEventListener("orientationchange",le),()=>{window.removeEventListener("resize",le),window.removeEventListener("orientationchange",le)}},[]),re.useEffect(()=>{if(Q)return;const le=window.innerWidth,Pe=window.innerHeight,Qe=t?152:24,ht=Pe-48-56-Qe-32,wt=le-380-40;se(Math.max(300,Math.min(wt,ht)))},[t,Q]);const dt=re.useCallback((le,Pe)=>{L(le),ee(Pe)},[]),et=re.useCallback(()=>{const le=Math.min(2.5,U+.2);L(le),ee(le>1.3?38:50)},[U]),Me=re.useCallback(()=>{const le=Math.max(.2,U-.2);L(le),ee(le>1.3?38:50)},[U]),it=re.useCallback(le=>{F(le)},[]),We=re.useMemo(()=>Q&&(ue||V)?90:0,[Q,ue,V]),ot=Q&&(ue||V);re.useEffect(()=>{if(Q)if(ot)if(J.current||(J.current={zoom:U,origin:B,pan:{...M}}),ue){const le=window.innerHeight,Pe=1.65,Qe=Math.max(.9,Math.min(1.1,le/400)),ht=Pe*Qe;L(ht),ee(48),F({x:-35,y:0})}else L(1.42),ee(42),F({x:-35,y:-30});else J.current&&(L(J.current.zoom),ee(J.current.origin),F(J.current.pan),J.current=null)},[ot,ue,Q]);const[rt,Fe]=re.useState(!1),tt=()=>{Fe(!0)},Ke=(le,Pe,Qe)=>{f(le),d(Pe),p(Qe)},ct=re.useMemo(()=>{const le=r.sections.reduce((lt,Zt)=>{const Cn=Zt.measures.reduce((xn,tn)=>xn+tn.beats.reduce((Kt,fn)=>Kt+fn.duration,0),0);return lt+Cn},0),Pe=r.tempo/60,Qe=le/Pe,ht=Math.floor(Qe/60),wt=Math.floor(Qe%60);return`${ht}:${wt.toString().padStart(2,"0")}`},[r.sections,r.tempo]),[yt,mt]=re.useState(!1);re.useEffect(()=>{const le=async()=>{try{m2(),await Su(),await Lc(),mt(!0)}catch(Qe){console.error("Audio initialization failed:",Qe)}},Pe=async()=>{yt||(await Yp(),le())};return document.addEventListener("touchstart",Pe,{once:!0}),document.addEventListener("click",Pe,{once:!0}),()=>{document.removeEventListener("touchstart",Pe),document.removeEventListener("click",Pe)}},[yt]),re.useEffect(()=>{const le=Pe=>{if((Pe.key==="Delete"||Pe.key==="Backspace")&&a&&o){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;Pe.preventDefault(),u(a,o)}};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[a,o,u]),re.useEffect(()=>{const le=Pe=>{const Qe=Pe.target;Qe?.tagName==="INPUT"||Qe?.tagName==="TEXTAREA"||Qe?.isContentEditable||Pe.metaKey&&Pe.key.toLowerCase()==="z"&&(Pe.preventDefault(),Pe.shiftKey?O&&T():R&&k())};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[k,T,R,O]);const[bt,ut]=re.useState(!1),[rn,Vt]=re.useState([]),Nt=re.useRef(null);re.useEffect(()=>{Vt(Kf())},[]),re.useEffect(()=>{const le=Pe=>{Nt.current&&!Nt.current.contains(Pe.target)&&ut(!1)};return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[]);const xt=()=>{if(r.title==="Untitled Song"||!r.title.trim()){const le=prompt("Please name your song:",r.title);if(le===null)return;const Pe=le.trim()||"Untitled Song";f(Pe);const Qe={...r,title:Pe};wx(Qe)}else wx(r);Vt(Kf()),ut(!1)},Tt=le=>{y(le),ut(!1)},[vt,an]=re.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),Et=()=>{an({isOpen:!0,title:"New Song",message:"Start a new song? Unsaved changes will be lost.",confirmLabel:"Start New",isDestructive:!0,onConfirm:()=>{_(),ut(!1)}})},Ft=(le,Pe,Qe)=>{Qe.stopPropagation(),an({isOpen:!0,title:"Delete Song",message:`Are you sure you want to delete "${Pe}"? This cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:()=>{cL(le),Vt(Kf())}})},gn=152,At=()=>{const le=new It,Pe=le.internal.pageSize.getWidth(),Qe=20,ht=4,lt=r.sections.reduce((dn,sn)=>{const Re=(sn.timeSignature||r.timeSignature)[0];return dn+sn.measures.length*Re},0)/r.tempo*60,Zt=Math.floor(lt/60),Cn=Math.floor(lt%60),xn=`${Zt}:${Cn.toString().padStart(2,"0")}`,tn=r.sections.reduce((dn,sn)=>dn+sn.measures.length,0),Kt=r.sections.length;if(le.setFontSize(22),le.setFont("helvetica","bold"),le.setTextColor(0,0,0),le.text(r.title,Qe,18),r.artist&&r.artist.trim()){const dn=le.getTextWidth(r.title);le.setFontSize(14),le.setFont("helvetica","italic"),le.setTextColor(100,100,100),le.text(`by ${r.artist}`,Qe+dn+6,18),le.setTextColor(0,0,0)}le.setDrawColor(0,0,0),le.setLineWidth(.5),le.line(Qe,22,Pe-Qe,22),le.setFontSize(10),le.setFont("helvetica","normal");const fn=[`Key: ${Zr(e)}`,`Tempo: ${r.tempo} BPM`,`Duration: ${xn}`,`${Kt} sections`,`${tn} bars`];le.text(fn.join("      "),Qe,30);let Qt=48;const $n=new Set;if(r.sections.forEach(dn=>{Qt>260&&(le.addPage(),Qt=20),le.setFontSize(14),le.setFont("helvetica","bold"),le.setTextColor(0,0,0),le.text(`[${Wf(dn,r.sections)}]`,Qe,Qt),Qt+=10;const sn=dn.measures.map(Se=>{const Re=Se.beats.length;return Se.beats.forEach($e=>{if($e.chord){const gt=$e.chord.root,Bt={major:"maj",minor:"m",diminished:"dim",augmented:"aug",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m7b5",sus2:"sus2",sus4:"sus4"}[$e.chord.quality]||$e.chord.quality||"maj";$n.add(`${gt}|${Bt}`)}}),Re===1?Se.beats[0]?.chord?.symbol||"":Re===2?Se.beats.map($e=>$e.chord?.symbol||"").join(" "):Se.beats.map($e=>$e.chord?.symbol||"").join(" ")});if(le.setFontSize(14),le.setFont("helvetica","normal"),sn.length===0)le.text("(No chords)",Qe,Qt),Qt+=12;else for(let Se=0;Se<sn.length;Se+=ht){Qt>275&&(le.addPage(),Qt=20);const $e=sn.slice(Se,Se+ht).join("  |  "),gt=Se>0?"    ":"";le.text(gt+$e,Qe,Qt),Qt+=10}Qt+=6}),$n.size>0){const dn=Array.from($n),sn=245,Se=5,gt=dn.length*(22+Se)>sn,$t=gt?18:22,Bt=gt?18:20,wn=gt?22:25,Jn=gt?155:170;let cr=0,Tn=35;const li=gt?Math.ceil(dn.length/2):dn.length;le.setPage(1),dn.forEach((Dr,Pr)=>{const[Kr,ms]=Dr.split("|"),ci=rw(Kr,ms);if(!ci)return;gt&&Pr===li&&(cr=1,Tn=35);const ui=cr*wn,wi=`${Kr}${ms==="maj"?"":ms}`;le.setFontSize(gt?6:7),le.setFont("helvetica","bold"),le.setTextColor(0,0,0),le.text(wi,Jn+ui+Bt/2+2,Tn,{align:"center"}),ft(le,ci,Jn+ui,Tn+3,gt),Tn+=$t+Se})}const lr=`${r.title.replace(/\s+/g,"-").toLowerCase()}.pdf`,vn=le.output("blob");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const dn=URL.createObjectURL(vn);window.open(dn,"_blank"),setTimeout(()=>URL.revokeObjectURL(dn),1e4)}else lL.saveAs(vn,lr)},ft=(le,Pe,Qe,ht,wt=!1)=>{const{frets:lt,barres:Zt,baseFret:Cn}=Pe,xn=wt?2.5:3,tn=wt?3:4,Kt=4,fn=6,Qt=wt?1:1.2,$n=Array.from({length:fn},(sn,Se)=>Qe+Se*xn),lr=Array.from({length:Kt+1},(sn,Se)=>ht+Se*tn),vn=Cn===1,Bn=xn*(fn-1),dn=tn*Kt;le.setDrawColor(0,0,0),vn?(le.setLineWidth(1),le.line(Qe,ht,Qe+Bn,ht)):(le.setLineWidth(.3),le.line(Qe,ht,Qe+Bn,ht),le.setFontSize(wt?6:7),le.setFont("helvetica","bold"),le.text(Cn.toString(),Qe-3,ht+tn/2+1)),le.setLineWidth(.2),lr.slice(1).forEach(sn=>{le.line(Qe,sn,Qe+Bn,sn)}),$n.forEach(sn=>{le.line(sn,ht,sn,ht+dn)}),Zt.forEach(sn=>{const Se=lt.map(($t,Bt)=>({fret:$t,idx:Bt})).filter(({fret:$t})=>$t===sn);if(Se.length<2)return;const Re=Math.min(...Se.map($t=>$t.idx)),$e=Math.max(...Se.map($t=>$t.idx)),gt=ht+(sn-.5)*tn;le.setLineWidth(Qt*1.4),le.line($n[Re],gt,$n[$e],gt),le.setLineWidth(.2)}),lt.forEach((sn,Se)=>{const Re=$n[Se];if(sn===-1){le.setFontSize(wt?6:7),le.setFont("helvetica","bold"),le.text("x",Re,ht-1,{align:"center"});return}if(sn===0){le.setLineWidth(.3),le.circle(Re,ht-1.5,.8,"S");return}if(Zt.includes(sn)){const $t=lt.findIndex(Bt=>Bt===sn);if(Se!==$t)return}const gt=ht+(sn-.5)*tn;le.setFillColor(0,0,0),le.circle(Re,gt,Qt,"F")})};return x.jsxs("div",{className:"h-full w-full flex flex-col bg-bg-primary text-text-primary overflow-hidden",children:[x.jsxs("header",{className:`${Q?"h-14":"h-12"} border-b border-border-subtle grid grid-cols-[1fr_auto_1fr] items-center ${Q?"px-4":"px-3"} bg-bg-secondary shrink-0 z-20 transition-all duration-300 ease-out ${Q&&!ue&&(X||V)||Q&&ue&&!nt?"opacity-0 -translate-y-full pointer-events-none absolute top-0 left-0 right-0":"relative"}`,children:[x.jsx("div",{className:"flex items-center gap-2 shrink-0",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"relative",children:x.jsx(bj,{size:Q?32:24})}),x.jsx("span",{className:`font-bold ${Q?"text-xs":"text-sm"} tracking-tight hidden sm:block text-text-muted`,children:"Songwriter's Wheel"})]})}),x.jsx("div",{className:"flex items-center justify-center overflow-hidden",children:x.jsx("span",{onClick:tt,className:`${Q?"text-xs":"text-sm"} font-medium text-text-primary cursor-pointer hover:text-accent-primary transition-colors px-2 py-1 rounded text-center truncate max-w-[70vw]`,title:"Click to edit song info",children:r.title})}),x.jsxs("div",{className:`flex items-center ${Q?"gap-3":"gap-4"} shrink-0 justify-self-end`,children:[!Q&&x.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[x.jsx(fT,{size:11,className:"shrink-0"}),x.jsx("span",{className:"leading-none",children:ct})]}),x.jsxs("div",{className:`flex items-center gap-2 p-[10px] ${Q?"text-xs":"text-[10px]"} text-text-muted`,children:[x.jsx("span",{className:"uppercase font-bold",children:"Key"}),x.jsx("span",{className:`font-bold text-accent-primary ${Q?"text-base":"text-sm"} min-w-[1.5rem] text-center inline-block`,children:Zr(e)})]}),x.jsxs("div",{className:"relative",ref:Nt,children:[x.jsxs("button",{onClick:()=>ut(!bt),className:`flex items-center gap-1.5 ${Q?"text-xs px-2 py-1.5 min-w-[44px]":"text-[11px] px-2 py-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback`,children:[x.jsx(Fv,{size:Q?16:12}),x.jsx("span",{className:"hidden sm:inline",children:"Save"}),x.jsx(Gf,{size:Q?12:10,className:`transition-transform ${bt?"rotate-180":""}`})]}),bt&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-[#1a1a24] border border-border-medium rounded-lg shadow-2xl z-50 overflow-hidden",children:[x.jsxs("div",{className:"p-1.5 border-b border-border-subtle bg-[#22222e]",children:[x.jsxs("button",{onClick:xt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[x.jsx(Fv,{size:14,className:"text-accent-primary"}),"Save Current Song"]}),x.jsxs("button",{onClick:Et,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[x.jsx(yT,{size:14,className:"text-green-400"}),"New Song"]})]}),x.jsx("div",{className:"max-h-48 overflow-y-auto bg-[#1a1a24]",children:rn.length===0?x.jsx("p",{className:"px-3 py-4 text-[10px] text-gray-500 text-center",children:"No saved songs yet"}):x.jsxs("div",{className:"p-1.5",children:[x.jsx("p",{className:"px-2 py-1 text-[9px] text-gray-500 uppercase tracking-wider",children:"Saved Songs"}),rn.map(le=>x.jsxs("div",{onClick:()=>Tt(le),className:`flex items-center justify-between px-3 py-2 text-xs rounded cursor-pointer transition-colors ${le.id===r.id?"bg-accent-primary/20 text-accent-primary":"text-gray-300 hover:bg-[#2a2a3a]"}`,children:[x.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[x.jsx(wT,{size:12,className:"shrink-0"}),x.jsx("span",{className:"truncate",children:le.title})]}),x.jsx("button",{onClick:Pe=>Ft(le.id,le.title,Pe),className:"p-1 hover:bg-red-500/20 rounded text-gray-500 hover:text-red-400 shrink-0",children:x.jsx(rg,{size:10})})]},le.id))]})})]})]}),x.jsxs("button",{onClick:At,className:`flex items-center justify-center ${Q?"text-xs px-3 py-1.5 min-w-[44px] min-h-[44px]":"text-[11px] px-2.5 py-1 gap-1.5"} bg-text-primary text-bg-primary rounded font-medium hover:bg-white transition-colors touch-feedback`,children:[x.jsx(f2,{size:Q?16:12}),x.jsx("span",{className:"hidden sm:inline sm:ml-1.5",children:"Export"})]})]})]}),x.jsxs("div",{className:`flex-1 flex ${Q?ue?"flex-row":"flex-col":"flex-row"} overflow-hidden min-h-0`,children:[x.jsxs("div",{"data-wheel-background":!0,className:`flex flex-col min-w-0 min-h-0 bg-gradient-to-b from-bg-primary to-bg-secondary/30 ${Q&&ue?"shrink-0":"flex-1"} ${Q?"overflow-hidden":""} relative`,style:Q&&ue?{width:`${te}px`,minWidth:"200px",height:"100%"}:void 0,children:[x.jsxs("div",{className:`flex-1 flex flex-col ${Q&&!ue?"justify-center":Q&&ue?"justify-center items-center":"justify-center items-center pt-2"} ${Q?"overflow-hidden":"overflow-visible"}`,children:[Q?null:x.jsxs("div",{className:"flex justify-between px-2 shrink-0 w-full",children:[x.jsx("button",{onClick:()=>W(!0),className:"no-touch-enlarge w-8 h-8 flex items-center justify-center bg-bg-secondary/60 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/40",title:"Chord Wheel Guide",children:x.jsx(sd,{size:16})}),x.jsxs("div",{className:"flex items-center bg-bg-secondary/60 backdrop-blur-sm rounded-full px-0.5 border border-border-subtle/40",children:[x.jsx("button",{onClick:Me,disabled:U<=.2,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom out",children:x.jsx(ng,{size:8})}),x.jsxs("span",{className:"text-[7px] w-5 text-text-muted text-center font-medium",children:[Math.round(U*100),"%"]}),x.jsx("button",{onClick:et,disabled:U>=2.5,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom in",children:x.jsx(Tc,{size:8})})]})]}),x.jsx("div",{className:`flex-1 flex justify-center ${Q?"items-center":""} ${Q&&ue?"p-1 overflow-hidden":Q&&!ue?"px-0 py-0":"p-2 overflow-visible"}`,onClick:De,children:x.jsx("div",{className:"relative flex items-center justify-center",style:Q&&ue?{width:"calc(100dvh - 60px)",height:"calc(100dvh - 60px)",maxWidth:"100%",maxHeight:"100%",aspectRatio:"1 / 1"}:Q&&!ue?{width:X?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",height:X?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxWidth:X?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxHeight:X?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",aspectRatio:"1 / 1"}:{width:`${H}px`,height:`${H}px`,aspectRatio:"1 / 1"},children:x.jsx(hk,{zoomScale:U,zoomOriginY:B,onZoomChange:dt,panOffset:M,onPanChange:it,rotationOffset:We,disableModeToggle:We!==0})})})]}),Q&&x.jsx("button",{onClick:()=>W(!0),onTouchEnd:le=>{le.preventDefault(),le.stopPropagation(),W(!0)},className:`absolute ${ue?"top-2 left-2 w-8 h-8":"top-3 left-3 w-11 h-11"} flex items-center justify-center bg-bg-secondary/90 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors shadow-lg border border-border-subtle z-50`,style:{touchAction:"auto",pointerEvents:"auto"},title:"Chord Wheel Guide",children:x.jsx(sd,{size:ue?14:20})}),Q?null:t?x.jsx(x.Fragment,{children:x.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle overflow-hidden flex flex-col",style:{height:gn},children:[x.jsxs("div",{className:"shrink-0 flex items-center justify-between px-2 py-1 border-b border-border-subtle/50 bg-bg-elevated/80",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsxs("button",{onClick:k,disabled:!R,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Z)",children:[x.jsx(mp,{size:12}),x.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Undo"})]}),x.jsxs("button",{onClick:T,disabled:!O,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Z)",children:[x.jsx(Vh,{size:12}),x.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Redo"})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsxs("button",{onClick:()=>{an({isOpen:!0,title:"Clear Timeline",message:"Are you sure you want to clear all chords from the timeline? This action cannot be undone.",confirmLabel:"Clear",isDestructive:!0,onConfirm:c})},className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-red-400 rounded hover:bg-red-400/10 transition-colors flex items-center gap-0.5",title:"Clear all chords from timeline",children:[x.jsx(rg,{size:8}),x.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Clear"})]}),x.jsxs("button",{onClick:s,className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-text-primary rounded hover:bg-bg-tertiary transition-colors flex items-center gap-0.5",title:"Hide timeline",children:[x.jsx(Gf,{size:8}),x.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Hide"})]})]})]}),x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:x.jsx(og,{isOpen:!0,onToggle:s,hideCloseButton:!0,isCompact:!1,isLandscape:!1})})]})}):x.jsx("div",{className:"h-6 bg-bg-secondary border-t border-border-subtle flex items-center justify-center shrink-0",children:x.jsxs("button",{onClick:s,className:"px-3 h-full flex items-center gap-1 text-[8px] text-text-muted hover:text-text-primary hover:bg-bg-tertiary transition-colors",title:"Show timeline",children:[x.jsx(B3,{size:10}),x.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Timeline"})]})})]}),Q&&ue?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:`flex h-full ${pe?"flex-1":"justify-end"} shrink-0`,style:{minWidth:pe?"100px":"28px",transition:"all 0.25s ease-out"},children:[x.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${pe?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{pe&&!V&&pn.getState().toggleChordPanel(),me(!pe)},children:[x.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),x.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:pe?"":"Timeline"})]}),pe&&x.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle",children:x.jsx(og,{isOpen:!0,onToggle:()=>me(!1),hideCloseButton:!0,isCompact:V,isLandscape:!0})})]}),x.jsxs("div",{className:`flex h-full ${V?"flex-1":""} shrink-0`,style:{minWidth:V?"100px":"28px",transition:"all 0.25s ease-out"},children:[V&&x.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle","data-chord-details":!0,children:x.jsx(lg,{variant:pe?"landscape-panel":"landscape-expanded"})}),x.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${V?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{V&&!pe&&me(!0),pn.getState().toggleChordPanel()},children:[x.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),x.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:V?"":"Details"})]})]})]}):Q?null:x.jsx(lg,{variant:"sidebar"})]}),Q&&!ue&&x.jsx(wL,{mobileTimelineOpen:pe,setMobileTimelineOpen:me,chordPanelVisible:V,setChordPanelScrolledToBottom:we}),!(Q&&!ue&&(X||V&&!Ne))&&x.jsx("div",{className:"shrink-0 z-30 relative",style:{paddingBottom:Q?"env(safe-area-inset-bottom)":void 0},children:x.jsx(sw,{})}),x.jsx(uL,{isOpen:vt.isOpen,onClose:()=>an(le=>({...le,isOpen:!1})),onConfirm:vt.onConfirm,title:vt.title,message:vt.message,confirmLabel:vt.confirmLabel,isDestructive:vt.isDestructive}),x.jsx(gj,{}),x.jsx(vL,{isOpen:I,onClose:()=>W(!1)}),x.jsx(xL,{isOpen:rt,onClose:()=>Fe(!1),title:r.title,artist:r.artist||"",tags:r.tags||[],onSave:Ke}),x.jsx(yL,{onOpenHelp:()=>W(!0)})]})}F_.createRoot(document.getElementById("root")).render(x.jsx(re.StrictMode,{children:x.jsx(_L,{})}));export{Kn as _,w1 as c,k_ as g};
