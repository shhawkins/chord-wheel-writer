(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var j1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Am={exports:{}},Ud={};var g5;function tS(){if(g5)return Ud;g5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:o}}return Ud.Fragment=e,Ud.jsx=t,Ud.jsxs=t,Ud}var b5;function nS(){return b5||(b5=1,Am.exports=tS()),Am.exports}var m=nS(),Cm={exports:{}},bn={};var v5;function rS(){if(v5)return bn;v5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function C(q,E,$){this.props=q,this.context=E,this.refs=k,this.updater=$||N}C.prototype.isReactComponent={},C.prototype.setState=function(q,E){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,E,"setState")},C.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function O(){}O.prototype=C.prototype;function R(q,E,$){this.props=q,this.context=E,this.refs=k,this.updater=$||N}var V=R.prototype=new O;V.constructor=R,A(V,C.prototype),V.isPureReactComponent=!0;var B=Array.isArray;function U(){}var z={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function F(q,E,$){var te=$.ref;return{$$typeof:n,type:q,key:E,ref:te!==void 0?te:null,props:$}}function J(q,E){return F(q.type,E,q.props)}function j(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function I(q){var E={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function($){return E[$]})}var X=/\/+/g;function P(q,E){return typeof q=="object"&&q!==null&&q.key!=null?I(""+q.key):E.toString(36)}function ie(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(E){q.status==="pending"&&(q.status="fulfilled",q.value=E)},function(E){q.status==="pending"&&(q.status="rejected",q.reason=E)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,E,$,te,ae){var re=typeof q;(re==="undefined"||re==="boolean")&&(q=null);var de=!1;if(q===null)de=!0;else switch(re){case"bigint":case"string":case"number":de=!0;break;case"object":switch(q.$$typeof){case n:case e:de=!0;break;case p:return de=q._init,Y(de(q._payload),E,$,te,ae)}}if(de)return ae=ae(q),de=te===""?"."+P(q,0):te,B(ae)?($="",de!=null&&($=de.replace(X,"$&/")+"/"),Y(ae,E,$,"",function(_e){return _e})):ae!=null&&(j(ae)&&(ae=J(ae,$+(ae.key==null||q&&q.key===ae.key?"":(""+ae.key).replace(X,"$&/")+"/")+de)),E.push(ae)),1;de=0;var ce=te===""?".":te+":";if(B(q))for(var ve=0;ve<q.length;ve++)te=q[ve],re=ce+P(te,ve),de+=Y(te,E,$,re,ae);else if(ve=b(q),typeof ve=="function")for(q=ve.call(q),ve=0;!(te=q.next()).done;)te=te.value,re=ce+P(te,ve++),de+=Y(te,E,$,re,ae);else if(re==="object"){if(typeof q.then=="function")return Y(ie(q),E,$,te,ae);throw E=String(q),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return de}function ne(q,E,$){if(q==null)return q;var te=[],ae=0;return Y(q,te,"","",function(re){return E.call($,re,ae++)}),te}function le(q){if(q._status===-1){var E=q._result;E=E(),E.then(function($){(q._status===0||q._status===-1)&&(q._status=1,q._result=$)},function($){(q._status===0||q._status===-1)&&(q._status=2,q._result=$)}),q._status===-1&&(q._status=0,q._result=E)}if(q._status===1)return q._result.default;throw q._result}var pe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},we={map:ne,forEach:function(q,E,$){ne(q,function(){E.apply(this,arguments)},$)},count:function(q){var E=0;return ne(q,function(){E++}),E},toArray:function(q){return ne(q,function(E){return E})||[]},only:function(q){if(!j(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return bn.Activity=y,bn.Children=we,bn.Component=C,bn.Fragment=t,bn.Profiler=a,bn.PureComponent=R,bn.StrictMode=s,bn.Suspense=h,bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,bn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return z.H.useMemoCache(q)}},bn.cache=function(q){return function(){return q.apply(null,arguments)}},bn.cacheSignal=function(){return null},bn.cloneElement=function(q,E,$){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var te=A({},q.props),ae=q.key;if(E!=null)for(re in E.key!==void 0&&(ae=""+E.key),E)!L.call(E,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&E.ref===void 0||(te[re]=E[re]);var re=arguments.length-2;if(re===1)te.children=$;else if(1<re){for(var de=Array(re),ce=0;ce<re;ce++)de[ce]=arguments[ce+2];te.children=de}return F(q.type,ae,te)},bn.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},bn.createElement=function(q,E,$){var te,ae={},re=null;if(E!=null)for(te in E.key!==void 0&&(re=""+E.key),E)L.call(E,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ae[te]=E[te]);var de=arguments.length-2;if(de===1)ae.children=$;else if(1<de){for(var ce=Array(de),ve=0;ve<de;ve++)ce[ve]=arguments[ve+2];ae.children=ce}if(q&&q.defaultProps)for(te in de=q.defaultProps,de)ae[te]===void 0&&(ae[te]=de[te]);return F(q,re,ae)},bn.createRef=function(){return{current:null}},bn.forwardRef=function(q){return{$$typeof:c,render:q}},bn.isValidElement=j,bn.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:le}},bn.memo=function(q,E){return{$$typeof:f,type:q,compare:E===void 0?null:E}},bn.startTransition=function(q){var E=z.T,$={};z.T=$;try{var te=q(),ae=z.S;ae!==null&&ae($,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(U,pe)}catch(re){pe(re)}finally{E!==null&&$.types!==null&&(E.types=$.types),z.T=E}},bn.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},bn.use=function(q){return z.H.use(q)},bn.useActionState=function(q,E,$){return z.H.useActionState(q,E,$)},bn.useCallback=function(q,E){return z.H.useCallback(q,E)},bn.useContext=function(q){return z.H.useContext(q)},bn.useDebugValue=function(){},bn.useDeferredValue=function(q,E){return z.H.useDeferredValue(q,E)},bn.useEffect=function(q,E){return z.H.useEffect(q,E)},bn.useEffectEvent=function(q){return z.H.useEffectEvent(q)},bn.useId=function(){return z.H.useId()},bn.useImperativeHandle=function(q,E,$){return z.H.useImperativeHandle(q,E,$)},bn.useInsertionEffect=function(q,E){return z.H.useInsertionEffect(q,E)},bn.useLayoutEffect=function(q,E){return z.H.useLayoutEffect(q,E)},bn.useMemo=function(q,E){return z.H.useMemo(q,E)},bn.useOptimistic=function(q,E){return z.H.useOptimistic(q,E)},bn.useReducer=function(q,E,$){return z.H.useReducer(q,E,$)},bn.useRef=function(q){return z.H.useRef(q)},bn.useState=function(q){return z.H.useState(q)},bn.useSyncExternalStore=function(q,E,$){return z.H.useSyncExternalStore(q,E,$)},bn.useTransition=function(){return z.H.useTransition()},bn.version="19.2.0",bn}var y5;function qg(){return y5||(y5=1,Cm.exports=rS()),Cm.exports}var K=qg();const An=eS(K);var Tm={exports:{}},Hd={},km={exports:{}},jm={};var x5;function sS(){return x5||(x5=1,(function(n){function e(Y,ne){var le=Y.length;Y.push(ne);e:for(;0<le;){var pe=le-1>>>1,we=Y[pe];if(0<a(we,ne))Y[pe]=ne,Y[le]=we,le=pe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ne=Y[0],le=Y.pop();if(le!==ne){Y[0]=le;e:for(var pe=0,we=Y.length,q=we>>>1;pe<q;){var E=2*(pe+1)-1,$=Y[E],te=E+1,ae=Y[te];if(0>a($,le))te<we&&0>a(ae,$)?(Y[pe]=ae,Y[te]=le,pe=te):(Y[pe]=$,Y[E]=le,pe=E);else if(te<we&&0>a(ae,le))Y[pe]=ae,Y[te]=le,pe=te;else break e}}return ne}function a(Y,ne){var le=Y.sortIndex-ne.sortIndex;return le!==0?le:Y.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();n.unstable_now=function(){return u.now()-c}}var h=[],f=[],p=1,y=null,_=3,b=!1,N=!1,A=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function V(Y){for(var ne=t(f);ne!==null;){if(ne.callback===null)s(f);else if(ne.startTime<=Y)s(f),ne.sortIndex=ne.expirationTime,e(h,ne);else break;ne=t(f)}}function B(Y){if(A=!1,V(Y),!N)if(t(h)!==null)N=!0,U||(U=!0,I());else{var ne=t(f);ne!==null&&ie(B,ne.startTime-Y)}}var U=!1,z=-1,L=5,F=-1;function J(){return k?!0:!(n.unstable_now()-F<L)}function j(){if(k=!1,U){var Y=n.unstable_now();F=Y;var ne=!0;try{e:{N=!1,A&&(A=!1,O(z),z=-1),b=!0;var le=_;try{t:{for(V(Y),y=t(h);y!==null&&!(y.expirationTime>Y&&J());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,_=y.priorityLevel;var we=pe(y.expirationTime<=Y);if(Y=n.unstable_now(),typeof we=="function"){y.callback=we,V(Y),ne=!0;break t}y===t(h)&&s(h),V(Y)}else s(h);y=t(h)}if(y!==null)ne=!0;else{var q=t(f);q!==null&&ie(B,q.startTime-Y),ne=!1}}break e}finally{y=null,_=le,b=!1}ne=void 0}}finally{ne?I():U=!1}}}var I;if(typeof R=="function")I=function(){R(j)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,P=X.port2;X.port1.onmessage=j,I=function(){P.postMessage(null)}}else I=function(){C(j,0)};function ie(Y,ne){z=C(function(){Y(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var le=_;_=ne;try{return Y()}finally{_=le}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var le=_;_=Y;try{return ne()}finally{_=le}},n.unstable_scheduleCallback=function(Y,ne,le){var pe=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?pe+le:pe):le=pe,Y){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=le+we,Y={id:p++,callback:ne,priorityLevel:Y,startTime:le,expirationTime:we,sortIndex:-1},le>pe?(Y.sortIndex=le,e(f,Y),t(h)===null&&Y===t(f)&&(A?(O(z),z=-1):A=!0,ie(B,le-pe))):(Y.sortIndex=we,e(h,Y),N||b||(N=!0,U||(U=!0,I()))),Y},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(Y){var ne=_;return function(){var le=_;_=ne;try{return Y.apply(this,arguments)}finally{_=le}}}})(jm)),jm}var w5;function iS(){return w5||(w5=1,km.exports=sS()),km.exports}var Em={exports:{}},oi={};var _5;function aS(){if(_5)return oi;_5=1;var n=qg();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,oi.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},oi.flushSync=function(h){var f=u.T,p=s.p;try{if(u.T=null,s.p=2,h)return h()}finally{u.T=f,s.p=p,s.d.f()}},oi.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},oi.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},oi.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&s.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},oi.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},oi.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);s.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},oi.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},oi.requestFormReset=function(h){s.d.r(h)},oi.unstable_batchedUpdates=function(h,f){return h(f)},oi.useFormState=function(h,f,p){return u.H.useFormState(h,f,p)},oi.useFormStatus=function(){return u.H.useHostTransitionStatus()},oi.version="19.2.0",oi}var S5;function Ux(){if(S5)return Em.exports;S5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Em.exports=aS(),Em.exports}var N5;function oS(){if(N5)return Hd;N5=1;var n=iS(),e=qg(),t=Ux();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function c(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(s(188))}function f(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,d=i;;){var v=l.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===l)return h(v),r;if(w===d)return h(v),i;w=w.sibling}throw Error(s(188))}if(l.return!==d.return)l=v,d=w;else{for(var D=!1,ee=v.child;ee;){if(ee===l){D=!0,l=v,d=w;break}if(ee===d){D=!0,d=v,l=w;break}ee=ee.sibling}if(!D){for(ee=w.child;ee;){if(ee===l){D=!0,l=w,d=v;break}if(ee===d){D=!0,d=w,l=v;break}ee=ee.sibling}if(!D)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function I(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case C:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case U:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case R:return r.displayName||"Context";case O:return(r._context.displayName||"Context")+".Consumer";case V:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return i=r.displayName||null,i!==null?i:P(r.type)||"Memo";case L:i=r._payload,r=r._init;try{return P(r(i))}catch{}}return null}var ie=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},pe=[],we=-1;function q(r){return{current:r}}function E(r){0>we||(r.current=pe[we],pe[we]=null,we--)}function $(r,i){we++,pe[we]=r.current,r.current=i}var te=q(null),ae=q(null),re=q(null),de=q(null);function ce(r,i){switch($(re,i),$(ae,r),$(te,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Bv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Bv(i),r=Pv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}E(te),$(te,r)}function ve(){E(te),E(ae),E(re)}function _e(r){r.memoizedState!==null&&$(de,r);var i=te.current,l=Pv(i,r.type);i!==l&&($(ae,r),$(te,l))}function Ve(r){ae.current===r&&(E(te),E(ae)),de.current===r&&(E(de),Bd._currentValue=le)}var Xe,Je;function at(r){if(Xe===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Xe=i&&i[1]||"",Je=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+r+Je}var G=!1;function Ee(r,i){if(!r||G)return"";G=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(Pe){var Fe=Pe}Reflect.construct(r,[],Ze)}else{try{Ze.call()}catch(Pe){Fe=Pe}r.call(Ze.prototype)}}else{try{throw Error()}catch(Pe){Fe=Pe}(Ze=r())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(Pe){if(Pe&&Fe&&typeof Pe.stack=="string")return[Pe.stack,Fe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),D=w[0],ee=w[1];if(D&&ee){var me=D.split(`
`),Ie=ee.split(`
`);for(v=d=0;d<me.length&&!me[d].includes("DetermineComponentFrameRoot");)d++;for(;v<Ie.length&&!Ie[v].includes("DetermineComponentFrameRoot");)v++;if(d===me.length||v===Ie.length)for(d=me.length-1,v=Ie.length-1;1<=d&&0<=v&&me[d]!==Ie[v];)v--;for(;1<=d&&0<=v;d--,v--)if(me[d]!==Ie[v]){if(d!==1||v!==1)do if(d--,v--,0>v||me[d]!==Ie[v]){var We=`
`+me[d].replace(" at new "," at ");return r.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",r.displayName)),We}while(1<=d&&0<=v);break}}}finally{G=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?at(l):""}function xt(r,i){switch(r.tag){case 26:case 27:case 5:return at(r.type);case 16:return at("Lazy");case 13:return r.child!==i&&i!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return Ee(r.type,!1);case 11:return Ee(r.type.render,!1);case 1:return Ee(r.type,!0);case 31:return at("Activity");default:return""}}function et(r){try{var i="",l=null;do i+=xt(r,l),l=r,r=r.return;while(r);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var De=Object.prototype.hasOwnProperty,rt=n.unstable_scheduleCallback,Ue=n.unstable_cancelCallback,ht=n.unstable_shouldYield,Ae=n.unstable_requestPaint,Ke=n.unstable_now,bt=n.unstable_getCurrentPriorityLevel,mt=n.unstable_ImmediatePriority,st=n.unstable_UserBlockingPriority,dt=n.unstable_NormalPriority,pt=n.unstable_LowPriority,Nt=n.unstable_IdlePriority,je=n.log,ft=n.unstable_setDisableYieldValue,ct=null,He=null;function ut(r){if(typeof je=="function"&&ft(r),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(ct,r)}catch{}}var vt=Math.clz32?Math.clz32:Et,ot=Math.log,ln=Math.LN2;function Et(r){return r>>>=0,r===0?32:31-(ot(r)/ln|0)|0}var Bt=256,pn=262144,Tt=4194304;function gt(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function zt(r,i,l){var d=r.pendingLanes;if(d===0)return 0;var v=0,w=r.suspendedLanes,D=r.pingedLanes;r=r.warmLanes;var ee=d&134217727;return ee!==0?(d=ee&~w,d!==0?v=gt(d):(D&=ee,D!==0?v=gt(D):l||(l=ee&~r,l!==0&&(v=gt(l))))):(ee=d&~w,ee!==0?v=gt(ee):D!==0?v=gt(D):l||(l=d&~r,l!==0&&(v=gt(l)))),v===0?0:i!==0&&i!==v&&(i&w)===0&&(w=v&-v,l=i&-i,w>=l||w===32&&(l&4194048)!==0)?i:v}function wn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Me(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var r=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),r}function Rt(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function it(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Te(r,i,l,d,v,w){var D=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var ee=r.entanglements,me=r.expirationTimes,Ie=r.hiddenUpdates;for(l=D&~l;0<l;){var We=31-vt(l),Ze=1<<We;ee[We]=0,me[We]=-1;var Fe=Ie[We];if(Fe!==null)for(Ie[We]=null,We=0;We<Fe.length;We++){var Pe=Fe[We];Pe!==null&&(Pe.lane&=-536870913)}l&=~Ze}d!==0&&_t(r,d,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(D&~i))}function _t(r,i,l){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-vt(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|l&261930}function St(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var d=31-vt(l),v=1<<d;v&i|r[d]&i&&(r[d]|=i),l&=~v}}function Mt(r,i){var l=i&-i;return l=(l&42)!==0?1:Ct(l),(l&(r.suspendedLanes|i))!==0?0:l}function Ct(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qt(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function cn(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:c5(r.type))}function nr(r,i){var l=ne.p;try{return ne.p=r,i()}finally{ne.p=l}}var Pn=Math.random().toString(36).slice(2),yn="__reactFiber$"+Pn,Sn="__reactProps$"+Pn,tr="__reactContainer$"+Pn,Ln="__reactEvents$"+Pn,gr="__reactListeners$"+Pn,Le="__reactHandles$"+Pn,Be="__reactResources$"+Pn,nt="__reactMarker$"+Pn;function It(r){delete r[yn],delete r[Sn],delete r[Ln],delete r[gr],delete r[Le]}function Gt(r){var i=r[yn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[tr]||l[yn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=$v(r);r!==null;){if(l=r[yn])return l;r=$v(r)}return i}r=l,l=r.parentNode}return null}function Ht(r){if(r=r[yn]||r[tr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function At(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function an(r){var i=r[Be];return i||(i=r[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function on(r){r[nt]=!0}var Hn=new Set,Wn={};function dn(r,i){Kn(r,i),Kn(r+"Capture",i)}function Kn(r,i){for(Wn[r]=i,r=0;r<i.length;r++)Hn.add(i[r])}var Gn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nr={},ds={};function fs(r){return De.call(ds,r)?!0:De.call(Nr,r)?!1:Gn.test(r)?ds[r]=!0:(Nr[r]=!0,!1)}function or(r,i,l){if(fs(i))if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+l)}}function ni(r,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+l)}}function ri(r,i,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(i,l,""+d)}}function Cn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Xi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ns(r,i,l){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return v.call(this)},set:function(D){l=""+D,w.call(this,D)}}),Object.defineProperty(r,i,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(D){l=""+D},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function pi(r){if(!r._valueTracker){var i=Xi(r)?"checked":"value";r._valueTracker=Ns(r,i,""+r[i])}}function Zi(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return r&&(d=Xi(r)?r.checked?"true":"false":r.value),r=d,r!==l?(i.setValue(r),!0):!1}function Xr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ur=/[\n"\\]/g;function Rr(r){return r.replace(Ur,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function So(r,i,l,d,v,w,D,ee){r.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.type=D:r.removeAttribute("type"),i!=null?D==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Cn(i)):r.value!==""+Cn(i)&&(r.value=""+Cn(i)):D!=="submit"&&D!=="reset"||r.removeAttribute("value"),i!=null?el(r,D,Cn(i)):l!=null?el(r,D,Cn(l)):d!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?r.name=""+Cn(ee):r.removeAttribute("name")}function zl(r,i,l,d,v,w,D,ee){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),i!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){pi(r);return}l=l!=null?""+Cn(l):"",i=i!=null?""+Cn(i):l,ee||i===r.value||(r.value=i),r.defaultValue=i}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=ee?r.checked:!!d,r.defaultChecked=!!d,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.name=D),pi(r)}function el(r,i,l){i==="number"&&Xr(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function $s(r,i,l,d){if(r=r.options,i){i={};for(var v=0;v<l.length;v++)i["$"+l[v]]=!0;for(l=0;l<r.length;l++)v=i.hasOwnProperty("$"+r[l].value),r[l].selected!==v&&(r[l].selected=v),v&&d&&(r[l].defaultSelected=!0)}else{for(l=""+Cn(l),i=null,v=0;v<r.length;v++){if(r[v].value===l){r[v].selected=!0,d&&(r[v].defaultSelected=!0);return}i!==null||r[v].disabled||(i=r[v])}i!==null&&(i.selected=!0)}}function Vc(r,i,l){if(i!=null&&(i=""+Cn(i),i!==r.value&&(r.value=i),l==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=l!=null?""+Cn(l):""}function Fc(r,i,l,d){if(i==null){if(d!=null){if(l!=null)throw Error(s(92));if(ie(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),i=l}l=Cn(i),r.defaultValue=l,d=r.textContent,d===l&&d!==""&&d!==null&&(r.value=d),pi(r)}function Ki(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var tl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(r,i,l){var d=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,l):typeof l!="number"||l===0||tl.has(i)?i==="float"?r.cssFloat=l:r[i]=(""+l).trim():r[i]=l+"px"}function Du(r,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var v in i)d=i[v],i.hasOwnProperty(v)&&l[v]!==d&&Ou(r,v,d)}else for(var w in i)i.hasOwnProperty(w)&&Ou(r,w,i[w])}function Bc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ru=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function si(r){return Ru.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Qi(){}var Ra=null;function nl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var No=null,Jt=null;function Iu(r){var i=Ht(r);if(i&&(r=i.stateNode)){var l=r[Sn]||null;e:switch(r=i.stateNode,i.type){case"input":if(So(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Rr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==r&&d.form===r.form){var v=d[Sn]||null;if(!v)throw Error(s(90));So(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(i=0;i<l.length;i++)d=l[i],d.form===r.form&&Zi(d)}break e;case"textarea":Vc(r,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&$s(r,!!l.multiple,i,!1)}}}var zc=!1;function Vu(r,i,l){if(zc)return r(i,l);zc=!0;try{var d=r(i);return d}finally{if(zc=!1,(No!==null||Jt!==null)&&(o1(),No&&(i=No,r=Jt,Jt=No=null,Iu(i),r)))for(i=0;i<r.length;i++)Iu(r[i])}}function mi(r,i){var l=r.stateNode;if(l===null)return null;var d=l[Sn]||null;if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(As)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){qc=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{qc=!1}var gi=null,sl=null,ga=null;function Fu(){if(ga)return ga;var r,i=sl,l=i.length,d,v="value"in gi?gi.value:gi.textContent,w=v.length;for(r=0;r<l&&i[r]===v[r];r++);var D=l-r;for(d=1;d<=D&&i[l-d]===v[w-d];d++);return ga=v.slice(r,1<d?1-d:void 0)}function Ci(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ql(){return!0}function Ul(){return!1}function ps(r){function i(l,d,v,w,D){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var ee in r)r.hasOwnProperty(ee)&&(l=r[ee],this[ee]=l?l(w):w[ee]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ql:Ul,this.isPropagationStopped=Ul,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),i}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=ps(ba),Ia=y({},ba,{view:0,detail:0}),Hl=ps(Ia),il,Va,Fa,al=y({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fa&&(Fa&&r.type==="mousemove"?(il=r.screenX-Fa.screenX,Va=r.screenY-Fa.screenY):Va=il=0,Fa=r),il)},movementY:function(r){return"movementY"in r?r.movementY:Va}}),Uc=ps(al),Ba=y({},al,{dataTransfer:0}),Pa=ps(Ba),Bu=y({},Ia,{relatedTarget:0}),za=ps(Bu),Pu=y({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),S=ps(Pu),H=y({},ba,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fe=ps(H),ge=y({},ba,{data:0}),Se=ps(ge),Ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ot={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qt(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Ot[r])?!!i[r]:!1}function rn(){return qt}var mn=y({},Ia,{key:function(r){if(r.key){var i=Ge[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ci(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?tt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rn,charCode:function(r){return r.type==="keypress"?Ci(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ci(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),In=ps(mn),Ar=y({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hr=ps(Ar),lr=y({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rn}),is=ps(lr),Zr=y({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cs=ps(Zr),qa=y({},al,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ji=ps(qa),Ua=y({},ba,{newState:0,oldState:0}),Hc=ps(Ua),Wl=[9,13,27,32],va=As&&"CompositionEvent"in window,ea=null;As&&"documentMode"in document&&(ea=document.documentMode);var ol=As&&"TextEvent"in window&&!ea,Ha=As&&(!va||ea&&8<ea&&11>=ea),ms=" ",Ao=!1;function Co(r,i){switch(r){case"keyup":return Wl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ya=!1;function Ys(r,i){switch(r){case"compositionend":return Gl(i);case"keypress":return i.which!==32?null:(Ao=!0,ms);case"textInput":return r=i.data,r===ms&&Ao?null:r;default:return null}}function Wa(r,i){if(ya)return r==="compositionend"||!va&&Co(r,i)?(r=Fu(),ga=sl=gi=null,ya=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ha&&i.locale!=="ko"?null:i.data;default:return null}}var $l={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!$l[r.type]:i==="textarea"}function bi(r,i,l,d){No?Jt?Jt.push(d):Jt=[d]:No=d,i=p1(i,"onChange"),0<i.length&&(l=new Ti("onChange","change",null,l,d),r.push({event:l,listeners:i}))}var ta=null,Ga=null;function Gc(r){Ov(r,0)}function na(r){var i=At(r);if(Zi(i))return r}function To(r,i){if(r==="change")return i}var ii=!1;if(As){var Xs;if(As){var xa="oninput"in document;if(!xa){var wa=document.createElement("div");wa.setAttribute("oninput","return;"),xa=typeof wa.oninput=="function"}Xs=xa}else Xs=!1;ii=Xs&&(!document.documentMode||9<document.documentMode)}function $a(){ta&&(ta.detachEvent("onpropertychange",Yl),Ga=ta=null)}function Yl(r){if(r.propertyName==="value"&&na(Ga)){var i=[];bi(i,Ga,r,nl(r)),Vu(Gc,i)}}function Xl(r,i,l){r==="focusin"?($a(),ta=i,Ga=l,ta.attachEvent("onpropertychange",Yl)):r==="focusout"&&$a()}function Wr(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return na(Ga)}function zu(r,i){if(r==="click")return na(i)}function _a(r,i){if(r==="input"||r==="change")return na(i)}function Sa(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ts=typeof Object.is=="function"?Object.is:Sa;function Ya(r,i){if(Ts(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!De.call(i,v)||!Ts(r[v],i[v]))return!1}return!0}function Zl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Kl(r,i){var l=Zl(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=i&&d>=i)return{node:l,offset:i-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zl(l)}}function Xa(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Xa(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Za(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Xr(r.document);i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=Xr(r.document)}return i}function Na(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var ll=As&&"documentMode"in document&&11>=document.documentMode,vi=null,Ka=null,Vs=null,ki=!1;function $n(r,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ki||vi==null||vi!==Xr(d)||(d=vi,"selectionStart"in d&&Na(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Vs&&Ya(Vs,d)||(Vs=d,d=p1(Ka,"onSelect"),0<d.length&&(i=new Ti("onSelect","select",null,i,l),r.push({event:i,listeners:d}),i.target=vi)))}function Vn(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var cr={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionrun:Vn("Transition","TransitionRun"),transitionstart:Vn("Transition","TransitionStart"),transitioncancel:Vn("Transition","TransitionCancel"),transitionend:Vn("Transition","TransitionEnd")},Gr={},Aa={};As&&(Aa=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function ra(r){if(Gr[r])return Gr[r];if(!cr[r])return r;var i=cr[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Aa)return Gr[r]=i[l];return r}var cl=ra("animationend"),$c=ra("animationiteration"),ld=ra("animationstart"),Vf=ra("transitionrun"),Ff=ra("transitionstart"),Bf=ra("transitioncancel"),cd=ra("transitionend"),ud=new Map,ul="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ul.push("scrollEnd");function ji(r,i){ud.set(r,i),dn(i,[r])}var Yc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},yi=[],hl=0,qu=0;function Xc(){for(var r=hl,i=qu=hl=0;i<r;){var l=yi[i];yi[i++]=null;var d=yi[i];yi[i++]=null;var v=yi[i];yi[i++]=null;var w=yi[i];if(yi[i++]=null,d!==null&&v!==null){var D=d.pending;D===null?v.next=v:(v.next=D.next,D.next=v),d.pending=v}w!==0&&Kc(l,v,w)}}function Zc(r,i,l,d){yi[hl++]=r,yi[hl++]=i,yi[hl++]=l,yi[hl++]=d,qu|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Uu(r,i,l,d){return Zc(r,i,l,d),Fs(r)}function Qa(r,i){return Zc(r,null,null,i),Fs(r)}function Kc(r,i,l){r.lanes|=l;var d=r.alternate;d!==null&&(d.lanes|=l);for(var v=!1,w=r.return;w!==null;)w.childLanes|=l,d=w.alternate,d!==null&&(d.childLanes|=l),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&i!==null&&(v=31-vt(l),r=w.hiddenUpdates,d=r[v],d===null?r[v]=[i]:d.push(i),i.lane=l|536870912),w):null}function Fs(r){if(50<Ld)throw Ld=0,X0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ks={};function Hu(r,i,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(r,i,l,d){return new Hu(r,i,l,d)}function Wu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ei(r,i){var l=r.alternate;return l===null?(l=Bs(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Qc(r,i){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Ql(r,i,l,d,v,w){var D=0;if(d=r,typeof r=="function")Wu(r)&&(D=1);else if(typeof r=="string")D=q_(r,l,te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case F:return r=Bs(31,l,i,v),r.elementType=F,r.lanes=w,r;case A:return ko(l.children,v,w,i);case k:D=8,v|=24;break;case C:return r=Bs(12,l,i,v|2),r.elementType=C,r.lanes=w,r;case B:return r=Bs(13,l,i,v),r.elementType=B,r.lanes=w,r;case U:return r=Bs(19,l,i,v),r.elementType=U,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case R:D=10;break e;case O:D=9;break e;case V:D=11;break e;case z:D=14;break e;case L:D=16,d=null;break e}D=29,l=Error(s(130,r===null?"null":typeof r,"")),d=null}return i=Bs(D,l,i,v),i.elementType=r,i.type=d,i.lanes=w,i}function ko(r,i,l,d){return r=Bs(7,r,d,i),r.lanes=l,r}function Jc(r,i,l){return r=Bs(6,r,null,i),r.lanes=l,r}function Gu(r){var i=Bs(18,null,null,0);return i.stateNode=r,i}function Jl(r,i,l){return i=Bs(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var $u=new WeakMap;function Mi(r,i){if(typeof r=="object"&&r!==null){var l=$u.get(r);return l!==void 0?l:(i={value:r,source:i,stack:et(i)},$u.set(r,i),i)}return{value:r,source:i,stack:et(i)}}var ec=[],dl=0,Yu=null,eu=0,Li=[],Oi=0,jo=null,Di=1,Ri="";function xi(r,i){ec[dl++]=eu,ec[dl++]=Yu,Yu=r,eu=i}function Pf(r,i,l){Li[Oi++]=Di,Li[Oi++]=Ri,Li[Oi++]=jo,jo=r;var d=Di;r=Ri;var v=32-vt(d)-1;d&=~(1<<v),l+=1;var w=32-vt(i)+v;if(30<w){var D=v-v%5;w=(d&(1<<D)-1).toString(32),d>>=D,v-=D,Di=1<<32-vt(i)+v|l<<v|d,Ri=w+r}else Di=1<<w|l<<v|d,Ri=r}function hd(r){r.return!==null&&(xi(r,1),Pf(r,1,0))}function Xu(r){for(;r===Yu;)Yu=ec[--dl],ec[dl]=null,eu=ec[--dl],ec[dl]=null;for(;r===jo;)jo=Li[--Oi],Li[Oi]=null,Ri=Li[--Oi],Li[Oi]=null,Di=Li[--Oi],Li[Oi]=null}function zf(r,i){Li[Oi++]=Di,Li[Oi++]=Ri,Li[Oi++]=jo,Di=i.id,Ri=i.overflow,jo=r}var js=null,br=null,kn=!1,Zs=null,Ir=!1,sa=Error(s(519));function Eo(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tc(Mi(i,r)),sa}function dd(r){var i=r.stateNode,l=r.type,d=r.memoizedProps;switch(i[yn]=r,i[Sn]=d,l){case"dialog":En("cancel",i),En("close",i);break;case"iframe":case"object":case"embed":En("load",i);break;case"video":case"audio":for(l=0;l<Dd.length;l++)En(Dd[l],i);break;case"source":En("error",i);break;case"img":case"image":case"link":En("error",i),En("load",i);break;case"details":En("toggle",i);break;case"input":En("invalid",i),zl(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":En("invalid",i);break;case"textarea":En("invalid",i),Fc(i,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||d.suppressHydrationWarning===!0||Vv(i.textContent,l)?(d.popover!=null&&(En("beforetoggle",i),En("toggle",i)),d.onScroll!=null&&En("scroll",i),d.onScrollEnd!=null&&En("scrollend",i),d.onClick!=null&&(i.onclick=Qi),i=!0):i=!1,i||Eo(r,!0)}function Ja(r){for(js=r.return;js;)switch(js.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:js=js.return}}function Es(r){if(r!==js)return!1;if(!kn)return Ja(r),kn=!0,!1;var i=r.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||um(r.type,r.memoizedProps)),l=!l),l&&br&&Eo(r),Ja(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));br=Gv(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));br=Gv(r)}else i===27?(i=br,mc(r.type)?(r=mm,mm=null,br=r):br=i):br=js?ja(r.stateNode.nextSibling):null;return!0}function fl(){br=js=null,kn=!1}function fd(){var r=Zs;return r!==null&&(zi===null?zi=r:zi.push.apply(zi,r),Zs=null),r}function tc(r){Zs===null?Zs=[r]:Zs.push(r)}var Zu=q(null),Mo=null,Ca=null;function Lo(r,i,l){$(Zu,i._currentValue),i._currentValue=l}function Ii(r){r._currentValue=Zu.current,E(Zu)}function nc(r,i,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===l)break;r=r.return}}function pl(r,i,l,d){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var D=v.child;w=w.firstContext;e:for(;w!==null;){var ee=w;w=v;for(var me=0;me<i.length;me++)if(ee.context===i[me]){w.lanes|=l,ee=w.alternate,ee!==null&&(ee.lanes|=l),nc(w.return,l,r),d||(D=null);break e}w=ee.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(s(341));D.lanes|=l,w=D.alternate,w!==null&&(w.lanes|=l),nc(D,l,r),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===r){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function Oo(r,i,l,d){r=null;for(var v=i,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(s(387));if(D=D.memoizedProps,D!==null){var ee=v.type;Ts(v.pendingProps.value,D.value)||(r!==null?r.push(ee):r=[ee])}}else if(v===de.current){if(D=v.alternate,D===null)throw Error(s(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Bd):r=[Bd])}v=v.return}r!==null&&pl(i,r,l,d),i.flags|=262144}function Ku(r){for(r=r.firstContext;r!==null;){if(!Ts(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Do(r){Mo=r,Ca=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ms(r){return qf(Mo,r)}function Qu(r,i){return Mo===null&&Do(r),qf(r,i)}function qf(r,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Ca===null){if(r===null)throw Error(s(308));Ca=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Ca=Ca.next=i;return l}var p0=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(l,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(l){return l()})}},m0=n.unstable_scheduleCallback,g0=n.unstable_NormalPriority,$r={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rc(){return{controller:new p0,data:new Map,refCount:0}}function tu(r){r.refCount--,r.refCount===0&&m0(g0,function(){r.controller.abort()})}var nu=null,Ju=0,g=0,x=null;function T(r,i){if(nu===null){var l=nu=[];Ju=0,g=tm(),x={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Ju++,i.then(M,M),i}function M(){if(--Ju===0&&nu!==null){x!==null&&(x.status="fulfilled");var r=nu;nu=null,g=0,x=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function W(r,i){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var v=0;v<l.length;v++)(0,l[v])(i)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var Z=Y.S;Y.S=function(r,i){ov=Ke(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&T(r,i),Z!==null&&Z(r,i)};var Q=q(null);function se(){var r=Q.current;return r!==null?r:yr.pooledCache}function oe(r,i){i===null?$(Q,Q.current):$(Q,i.pool)}function he(){var r=se();return r===null?null:{parent:$r._currentValue,pool:r}}var be=Error(s(460)),Oe=Error(s(474)),ue=Error(s(542)),xe={then:function(){}};function Ce(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qe(r,i,l){switch(l=r[l],l===void 0?r.push(i):l!==i&&(i.then(Qi,Qi),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lt(r),r;default:if(typeof i.status=="string")i.then(Qi,Qi);else{if(r=yr,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var v=i;v.status="fulfilled",v.value=d}},function(d){if(i.status==="pending"){var v=i;v.status="rejected",v.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lt(r),r}throw ze=i,be}}function ke(r){try{var i=r._init;return i(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ze=l,be):l}}var ze=null;function $e(){if(ze===null)throw Error(s(459));var r=ze;return ze=null,r}function lt(r){if(r===be||r===ue)throw Error(s(483))}var Qe=null,Vt=0;function kt(r){var i=Vt;return Vt+=1,Qe===null&&(Qe=[]),qe(Qe,r,i)}function un(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Lt(r,i){throw i.$$typeof===_?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Tn(r){function i(Ne,ye){if(r){var Re=Ne.deletions;Re===null?(Ne.deletions=[ye],Ne.flags|=16):Re.push(ye)}}function l(Ne,ye){if(!r)return null;for(;ye!==null;)i(Ne,ye),ye=ye.sibling;return null}function d(Ne){for(var ye=new Map;Ne!==null;)Ne.key!==null?ye.set(Ne.key,Ne):ye.set(Ne.index,Ne),Ne=Ne.sibling;return ye}function v(Ne,ye){return Ne=Ei(Ne,ye),Ne.index=0,Ne.sibling=null,Ne}function w(Ne,ye,Re){return Ne.index=Re,r?(Re=Ne.alternate,Re!==null?(Re=Re.index,Re<ye?(Ne.flags|=67108866,ye):Re):(Ne.flags|=67108866,ye)):(Ne.flags|=1048576,ye)}function D(Ne){return r&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function ee(Ne,ye,Re,Ye){return ye===null||ye.tag!==6?(ye=Jc(Re,Ne.mode,Ye),ye.return=Ne,ye):(ye=v(ye,Re),ye.return=Ne,ye)}function me(Ne,ye,Re,Ye){var Zt=Re.type;return Zt===A?We(Ne,ye,Re.props.children,Ye,Re.key):ye!==null&&(ye.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===L&&ke(Zt)===ye.type)?(ye=v(ye,Re.props),un(ye,Re),ye.return=Ne,ye):(ye=Ql(Re.type,Re.key,Re.props,null,Ne.mode,Ye),un(ye,Re),ye.return=Ne,ye)}function Ie(Ne,ye,Re,Ye){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Re.containerInfo||ye.stateNode.implementation!==Re.implementation?(ye=Jl(Re,Ne.mode,Ye),ye.return=Ne,ye):(ye=v(ye,Re.children||[]),ye.return=Ne,ye)}function We(Ne,ye,Re,Ye,Zt){return ye===null||ye.tag!==7?(ye=ko(Re,Ne.mode,Ye,Zt),ye.return=Ne,ye):(ye=v(ye,Re),ye.return=Ne,ye)}function Ze(Ne,ye,Re){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Jc(""+ye,Ne.mode,Re),ye.return=Ne,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Re=Ql(ye.type,ye.key,ye.props,null,Ne.mode,Re),un(Re,ye),Re.return=Ne,Re;case N:return ye=Jl(ye,Ne.mode,Re),ye.return=Ne,ye;case L:return ye=ke(ye),Ze(Ne,ye,Re)}if(ie(ye)||I(ye))return ye=ko(ye,Ne.mode,Re,null),ye.return=Ne,ye;if(typeof ye.then=="function")return Ze(Ne,kt(ye),Re);if(ye.$$typeof===R)return Ze(Ne,Qu(Ne,ye),Re);Lt(Ne,ye)}return null}function Fe(Ne,ye,Re,Ye){var Zt=ye!==null?ye.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Zt!==null?null:ee(Ne,ye,""+Re,Ye);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:return Re.key===Zt?me(Ne,ye,Re,Ye):null;case N:return Re.key===Zt?Ie(Ne,ye,Re,Ye):null;case L:return Re=ke(Re),Fe(Ne,ye,Re,Ye)}if(ie(Re)||I(Re))return Zt!==null?null:We(Ne,ye,Re,Ye,null);if(typeof Re.then=="function")return Fe(Ne,ye,kt(Re),Ye);if(Re.$$typeof===R)return Fe(Ne,ye,Qu(Ne,Re),Ye);Lt(Ne,Re)}return null}function Pe(Ne,ye,Re,Ye,Zt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ne=Ne.get(Re)||null,ee(ye,Ne,""+Ye,Zt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case b:return Ne=Ne.get(Ye.key===null?Re:Ye.key)||null,me(ye,Ne,Ye,Zt);case N:return Ne=Ne.get(Ye.key===null?Re:Ye.key)||null,Ie(ye,Ne,Ye,Zt);case L:return Ye=ke(Ye),Pe(Ne,ye,Re,Ye,Zt)}if(ie(Ye)||I(Ye))return Ne=Ne.get(Re)||null,We(ye,Ne,Ye,Zt,null);if(typeof Ye.then=="function")return Pe(Ne,ye,Re,kt(Ye),Zt);if(Ye.$$typeof===R)return Pe(Ne,ye,Re,Qu(ye,Ye),Zt);Lt(ye,Ye)}return null}function Dt(Ne,ye,Re,Ye){for(var Zt=null,Xn=null,Ut=ye,_n=ye=0,Dn=null;Ut!==null&&_n<Re.length;_n++){Ut.index>_n?(Dn=Ut,Ut=null):Dn=Ut.sibling;var Zn=Fe(Ne,Ut,Re[_n],Ye);if(Zn===null){Ut===null&&(Ut=Dn);break}r&&Ut&&Zn.alternate===null&&i(Ne,Ut),ye=w(Zn,ye,_n),Xn===null?Zt=Zn:Xn.sibling=Zn,Xn=Zn,Ut=Dn}if(_n===Re.length)return l(Ne,Ut),kn&&xi(Ne,_n),Zt;if(Ut===null){for(;_n<Re.length;_n++)Ut=Ze(Ne,Re[_n],Ye),Ut!==null&&(ye=w(Ut,ye,_n),Xn===null?Zt=Ut:Xn.sibling=Ut,Xn=Ut);return kn&&xi(Ne,_n),Zt}for(Ut=d(Ut);_n<Re.length;_n++)Dn=Pe(Ut,Ne,_n,Re[_n],Ye),Dn!==null&&(r&&Dn.alternate!==null&&Ut.delete(Dn.key===null?_n:Dn.key),ye=w(Dn,ye,_n),Xn===null?Zt=Dn:Xn.sibling=Dn,Xn=Dn);return r&&Ut.forEach(function(xc){return i(Ne,xc)}),kn&&xi(Ne,_n),Zt}function tn(Ne,ye,Re,Ye){if(Re==null)throw Error(s(151));for(var Zt=null,Xn=null,Ut=ye,_n=ye=0,Dn=null,Zn=Re.next();Ut!==null&&!Zn.done;_n++,Zn=Re.next()){Ut.index>_n?(Dn=Ut,Ut=null):Dn=Ut.sibling;var xc=Fe(Ne,Ut,Zn.value,Ye);if(xc===null){Ut===null&&(Ut=Dn);break}r&&Ut&&xc.alternate===null&&i(Ne,Ut),ye=w(xc,ye,_n),Xn===null?Zt=xc:Xn.sibling=xc,Xn=xc,Ut=Dn}if(Zn.done)return l(Ne,Ut),kn&&xi(Ne,_n),Zt;if(Ut===null){for(;!Zn.done;_n++,Zn=Re.next())Zn=Ze(Ne,Zn.value,Ye),Zn!==null&&(ye=w(Zn,ye,_n),Xn===null?Zt=Zn:Xn.sibling=Zn,Xn=Zn);return kn&&xi(Ne,_n),Zt}for(Ut=d(Ut);!Zn.done;_n++,Zn=Re.next())Zn=Pe(Ut,Ne,_n,Zn.value,Ye),Zn!==null&&(r&&Zn.alternate!==null&&Ut.delete(Zn.key===null?_n:Zn.key),ye=w(Zn,ye,_n),Xn===null?Zt=Zn:Xn.sibling=Zn,Xn=Zn);return r&&Ut.forEach(function(J_){return i(Ne,J_)}),kn&&xi(Ne,_n),Zt}function fr(Ne,ye,Re,Ye){if(typeof Re=="object"&&Re!==null&&Re.type===A&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:e:{for(var Zt=Re.key;ye!==null;){if(ye.key===Zt){if(Zt=Re.type,Zt===A){if(ye.tag===7){l(Ne,ye.sibling),Ye=v(ye,Re.props.children),Ye.return=Ne,Ne=Ye;break e}}else if(ye.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===L&&ke(Zt)===ye.type){l(Ne,ye.sibling),Ye=v(ye,Re.props),un(Ye,Re),Ye.return=Ne,Ne=Ye;break e}l(Ne,ye);break}else i(Ne,ye);ye=ye.sibling}Re.type===A?(Ye=ko(Re.props.children,Ne.mode,Ye,Re.key),Ye.return=Ne,Ne=Ye):(Ye=Ql(Re.type,Re.key,Re.props,null,Ne.mode,Ye),un(Ye,Re),Ye.return=Ne,Ne=Ye)}return D(Ne);case N:e:{for(Zt=Re.key;ye!==null;){if(ye.key===Zt)if(ye.tag===4&&ye.stateNode.containerInfo===Re.containerInfo&&ye.stateNode.implementation===Re.implementation){l(Ne,ye.sibling),Ye=v(ye,Re.children||[]),Ye.return=Ne,Ne=Ye;break e}else{l(Ne,ye);break}else i(Ne,ye);ye=ye.sibling}Ye=Jl(Re,Ne.mode,Ye),Ye.return=Ne,Ne=Ye}return D(Ne);case L:return Re=ke(Re),fr(Ne,ye,Re,Ye)}if(ie(Re))return Dt(Ne,ye,Re,Ye);if(I(Re)){if(Zt=I(Re),typeof Zt!="function")throw Error(s(150));return Re=Zt.call(Re),tn(Ne,ye,Re,Ye)}if(typeof Re.then=="function")return fr(Ne,ye,kt(Re),Ye);if(Re.$$typeof===R)return fr(Ne,ye,Qu(Ne,Re),Ye);Lt(Ne,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,ye!==null&&ye.tag===6?(l(Ne,ye.sibling),Ye=v(ye,Re),Ye.return=Ne,Ne=Ye):(l(Ne,ye),Ye=Jc(Re,Ne.mode,Ye),Ye.return=Ne,Ne=Ye),D(Ne)):l(Ne,ye)}return function(Ne,ye,Re,Ye){try{Vt=0;var Zt=fr(Ne,ye,Re,Ye);return Qe=null,Zt}catch(Ut){if(Ut===be||Ut===ue)throw Ut;var Xn=Bs(29,Ut,null,Ne.mode);return Xn.lanes=Ye,Xn.return=Ne,Xn}finally{}}}var vr=Tn(!0),gn=Tn(!1),jt=!1;function wt(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cr(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function en(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function xn(r,i,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(er&2)!==0){var v=d.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),d.pending=i,i=Fs(r),Kc(r,null,l),i}return Zc(r,d,i,l),Fs(r)}function Qn(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,l|=d,i.lanes=l,St(r,l)}}function as(r,i){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var D={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?v=w=D:w=w.next=D,l=l.next}while(l!==null);w===null?v=w=i:w=w.next=i}else v=w=i;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}var Ls=!1;function ur(){if(Ls){var r=x;if(r!==null)throw r}}function Kr(r,i,l,d){Ls=!1;var v=r.updateQueue;jt=!1;var w=v.firstBaseUpdate,D=v.lastBaseUpdate,ee=v.shared.pending;if(ee!==null){v.shared.pending=null;var me=ee,Ie=me.next;me.next=null,D===null?w=Ie:D.next=Ie,D=me;var We=r.alternate;We!==null&&(We=We.updateQueue,ee=We.lastBaseUpdate,ee!==D&&(ee===null?We.firstBaseUpdate=Ie:ee.next=Ie,We.lastBaseUpdate=me))}if(w!==null){var Ze=v.baseState;D=0,We=Ie=me=null,ee=w;do{var Fe=ee.lane&-536870913,Pe=Fe!==ee.lane;if(Pe?(On&Fe)===Fe:(d&Fe)===Fe){Fe!==0&&Fe===g&&(Ls=!0),We!==null&&(We=We.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Dt=r,tn=ee;Fe=i;var fr=l;switch(tn.tag){case 1:if(Dt=tn.payload,typeof Dt=="function"){Ze=Dt.call(fr,Ze,Fe);break e}Ze=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=tn.payload,Fe=typeof Dt=="function"?Dt.call(fr,Ze,Fe):Dt,Fe==null)break e;Ze=y({},Ze,Fe);break e;case 2:jt=!0}}Fe=ee.callback,Fe!==null&&(r.flags|=64,Pe&&(r.flags|=8192),Pe=v.callbacks,Pe===null?v.callbacks=[Fe]:Pe.push(Fe))}else Pe={lane:Fe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},We===null?(Ie=We=Pe,me=Ze):We=We.next=Pe,D|=Fe;if(ee=ee.next,ee===null){if(ee=v.shared.pending,ee===null)break;Pe=ee,ee=Pe.next,Pe.next=null,v.lastBaseUpdate=Pe,v.shared.pending=null}}while(!0);We===null&&(me=Ze),v.baseState=me,v.firstBaseUpdate=Ie,v.lastBaseUpdate=We,w===null&&(v.shared.lanes=0),uc|=D,r.lanes=D,r.memoizedState=Ze}}function Ps(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Qr(r,i){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Ps(l[r],i)}var Nn=q(null),zn=q(0);function Tr(r,i){r=Nl,$(zn,r),$(Nn,i),Nl=r|i.baseLanes}function Yn(){$(zn,Nl),$(Nn,Nn.current)}function os(){Nl=zn.current,E(Nn),E(zn)}var kr=q(null),qn=null;function Yr(r){var i=r.alternate;$(Fn,Fn.current&1),$(kr,r),qn===null&&(i===null||Nn.current!==null||i.memoizedState!==null)&&(qn=r)}function Jn(r){$(Fn,Fn.current),$(kr,r),qn===null&&(qn=r)}function Jr(r){r.tag===22?($(Fn,Fn.current),$(kr,r),qn===null&&(qn=r)):es()}function es(){$(Fn,Fn.current),$(kr,kr.current)}function rr(r){E(kr),qn===r&&(qn=null),E(Fn)}var Fn=q(0);function zs(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fm(l)||pm(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vr=0,Yt=null,Xt=null,Un=null,ai=!1,Vi=!1,Ks=!1,ts=0,Ro=0,Io=null,eh=0;function hr(){throw Error(s(321))}function pd(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Ts(r[l],i[l]))return!1;return!0}function md(r,i,l,d,v,w){return Vr=w,Yt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=r===null||r.memoizedState===null?vb:N0,Ks=!1,w=l(d,v),Ks=!1,Vi&&(w=eo(i,l,d,v)),th(r),w}function th(r){Y.H=Sd;var i=Xt!==null&&Xt.next!==null;if(Vr=0,Un=Xt=Yt=null,ai=!1,Ro=0,Io=null,i)throw Error(s(300));r===null||bs||(r=r.dependencies,r!==null&&Ku(r)&&(bs=!0))}function eo(r,i,l,d){Yt=r;var v=0;do{if(Vi&&(Io=null),Ro=0,Vi=!1,25<=v)throw Error(s(301));if(v+=1,Un=Xt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Y.H=yb,w=i(l,d)}while(Vi);return w}function b0(){var r=Y.H,i=r.useState()[0];return i=typeof i.then=="function"?Vo(i):i,r=r.useState()[0],(Xt!==null?Xt.memoizedState:null)!==r&&(Yt.flags|=1024),i}function gd(){var r=ts!==0;return ts=0,r}function bd(r,i,l){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~l}function nh(r){if(ai){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ai=!1}Vr=0,Un=Xt=Yt=null,Vi=!1,Ro=ts=0,Io=null}function gs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Yt.memoizedState=Un=r:Un=Un.next=r,Un}function Fr(){if(Xt===null){var r=Yt.alternate;r=r!==null?r.memoizedState:null}else r=Xt.next;var i=Un===null?Yt.memoizedState:Un.next;if(i!==null)Un=i,Xt=r;else{if(r===null)throw Yt.alternate===null?Error(s(467)):Error(s(310));Xt=r,r={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Un===null?Yt.memoizedState=Un=r:Un=Un.next=r}return Un}function ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(r){var i=Ro;return Ro+=1,Io===null&&(Io=[]),r=qe(Io,r,i),i=Yt,(Un===null?i.memoizedState:Un.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?vb:N0),r}function sc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Vo(r);if(r.$$typeof===R)return Ms(r)}throw Error(s(438,String(r)))}function ml(r){var i=null,l=Yt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=Yt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(v){return v.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ru(),Yt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(r),d=0;d<r;d++)l[d]=J;return i.index++,l}function Ta(r,i){return typeof i=="function"?i(r):i}function rh(r){var i=Fr();return ic(i,Xt,r)}function ic(r,i,l){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var v=r.baseQueue,w=d.pending;if(w!==null){if(v!==null){var D=v.next;v.next=w.next,w.next=D}i.baseQueue=v=w,d.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{i=v.next;var ee=D=null,me=null,Ie=i,We=!1;do{var Ze=Ie.lane&-536870913;if(Ze!==Ie.lane?(On&Ze)===Ze:(Vr&Ze)===Ze){var Fe=Ie.revertLane;if(Fe===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),Ze===g&&(We=!0);else if((Vr&Fe)===Fe){Ie=Ie.next,Fe===g&&(We=!0);continue}else Ze={lane:0,revertLane:Ie.revertLane,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},me===null?(ee=me=Ze,D=w):me=me.next=Ze,Yt.lanes|=Fe,uc|=Fe;Ze=Ie.action,Ks&&l(w,Ze),w=Ie.hasEagerState?Ie.eagerState:l(w,Ze)}else Fe={lane:Ze,revertLane:Ie.revertLane,gesture:Ie.gesture,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},me===null?(ee=me=Fe,D=w):me=me.next=Fe,Yt.lanes|=Ze,uc|=Ze;Ie=Ie.next}while(Ie!==null&&Ie!==i);if(me===null?D=w:me.next=ee,!Ts(w,r.memoizedState)&&(bs=!0,We&&(l=x,l!==null)))throw l;r.memoizedState=w,r.baseState=D,r.baseQueue=me,d.lastRenderedState=w}return v===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function sh(r){var i=Fr(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var d=l.dispatch,v=l.pending,w=i.memoizedState;if(v!==null){l.pending=null;var D=v=v.next;do w=r(w,D.action),D=D.next;while(D!==v);Ts(w,i.memoizedState)||(bs=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,d]}function ih(r,i,l){var d=Yt,v=Fr(),w=kn;if(w){if(l===void 0)throw Error(s(407));l=l()}else l=i();var D=!Ts((Xt||v).memoizedState,l);if(D&&(v.memoizedState=l,bs=!0),v=v.queue,v0(yd.bind(null,d,v,r),[r]),v.getSnapshot!==i||D||Un!==null&&Un.memoizedState.tag&1){if(d.flags|=2048,bl(9,{destroy:void 0},vd.bind(null,d,v,l,i),null),yr===null)throw Error(s(349));w||(Vr&127)!==0||to(d,i,l)}return l}function to(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Yt.updateQueue,i===null?(i=ru(),Yt.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function vd(r,i,l,d){i.value=l,i.getSnapshot=d,Uf(i)&&xd(r)}function yd(r,i,l){return l(function(){Uf(i)&&xd(r)})}function Uf(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Ts(r,l)}catch{return!0}}function xd(r){var i=Qa(r,2);i!==null&&qi(i,r,2)}function Fo(r){var i=gs();if(typeof r=="function"){var l=r;if(r=l(),Ks){ut(!0);try{l()}finally{ut(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:r},i}function Hf(r,i,l,d){return r.baseState=l,ic(r,Xt,typeof d=="function"?d:Ta)}function Wf(r,i,l,d,v){if(Xf(r))throw Error(s(485));if(r=i.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};Y.T!==null?l(!0):w.isTransition=!1,d(w),l=i.pending,l===null?(w.next=i.pending=w,Gf(i,w)):(w.next=l.next,i.pending=l.next=w)}}function Gf(r,i){var l=i.action,d=i.payload,v=r.state;if(i.isTransition){var w=Y.T,D={};Y.T=D;try{var ee=l(v,d),me=Y.S;me!==null&&me(D,ee),wd(r,i,ee)}catch(Ie){gl(r,i,Ie)}finally{w!==null&&D.types!==null&&(w.types=D.types),Y.T=w}}else try{w=l(v,d),wd(r,i,w)}catch(Ie){gl(r,i,Ie)}}function wd(r,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){$f(r,i,d)},function(d){return gl(r,i,d)}):$f(r,i,l)}function $f(r,i,l){i.status="fulfilled",i.value=l,ah(i),r.state=l,i=r.pending,i!==null&&(l=i.next,l===i?r.pending=null:(l=l.next,i.next=l,Gf(r,l)))}function gl(r,i,l){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,ah(i),i=i.next;while(i!==d)}r.action=null}function ah(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function su(r,i){return i}function ka(r,i){if(kn){var l=yr.formState;if(l!==null){e:{var d=Yt;if(kn){if(br){t:{for(var v=br,w=Ir;v.nodeType!==8;){if(!w){v=null;break t}if(v=ja(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){br=ja(v.nextSibling),d=v.data==="F!";break e}}Eo(d)}d=!1}d&&(i=l[0])}}return l=gs(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:i},l.queue=d,l=mb.bind(null,Yt,d),d.dispatch=l,d=Fo(!1),w=S0.bind(null,Yt,!1,d.queue),d=gs(),v={state:i,dispatch:null,action:r,pending:null},d.queue=v,l=Wf.bind(null,Yt,v,w,l),v.dispatch=l,d.memoizedState=r,[i,l,!1]}function no(r){var i=Fr();return ro(i,Xt,r)}function ro(r,i,l){if(i=ic(r,i,su)[0],r=rh(Ta)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Vo(i)}catch(D){throw D===be?ue:D}else d=i;i=Fr();var v=i.queue,w=v.dispatch;return l!==i.memoizedState&&(Yt.flags|=2048,bl(9,{destroy:void 0},oh.bind(null,v,l),null)),[d,w,r]}function oh(r,i){r.action=i}function lh(r){var i=Fr(),l=Xt;if(l!==null)return ro(i,l,r);Fr(),i=i.memoizedState,l=Fr();var d=l.queue.dispatch;return l.memoizedState=r,[i,d,!1]}function bl(r,i,l,d){return r={tag:r,create:l,deps:d,inst:i,next:null},i=Yt.updateQueue,i===null&&(i=ru(),Yt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,i.lastEffect=r),r}function Yf(){return Fr().memoizedState}function ac(r,i,l,d){var v=gs();Yt.flags|=r,v.memoizedState=bl(1|i,{destroy:void 0},l,d===void 0?null:d)}function oc(r,i,l,d){var v=Fr();d=d===void 0?null:d;var w=v.memoizedState.inst;Xt!==null&&d!==null&&pd(d,Xt.memoizedState.deps)?v.memoizedState=bl(i,w,l,d):(Yt.flags|=r,v.memoizedState=bl(1|i,w,l,d))}function tb(r,i){ac(8390656,8,r,i)}function v0(r,i){oc(2048,8,r,i)}function $4(r){Yt.flags|=4;var i=Yt.updateQueue;if(i===null)i=ru(),Yt.updateQueue=i,i.events=[r];else{var l=i.events;l===null?i.events=[r]:l.push(r)}}function nb(r){var i=Fr().memoizedState;return $4({ref:i,nextImpl:r}),function(){if((er&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function rb(r,i){return oc(4,2,r,i)}function sb(r,i){return oc(4,4,r,i)}function ib(r,i){if(typeof i=="function"){r=r();var l=i(r);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function ab(r,i,l){l=l!=null?l.concat([r]):null,oc(4,4,ib.bind(null,i,r),l)}function y0(){}function ob(r,i){var l=Fr();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&pd(i,d[1])?d[0]:(l.memoizedState=[r,i],r)}function lb(r,i){var l=Fr();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&pd(i,d[1]))return d[0];if(d=r(),Ks){ut(!0);try{r()}finally{ut(!1)}}return l.memoizedState=[d,i],d}function x0(r,i,l){return l===void 0||(Vr&1073741824)!==0&&(On&261930)===0?r.memoizedState=i:(r.memoizedState=l,r=cv(),Yt.lanes|=r,uc|=r,l)}function cb(r,i,l,d){return Ts(l,i)?l:Nn.current!==null?(r=x0(r,l,d),Ts(r,i)||(bs=!0),r):(Vr&42)===0||(Vr&1073741824)!==0&&(On&261930)===0?(bs=!0,r.memoizedState=l):(r=cv(),Yt.lanes|=r,uc|=r,i)}function ub(r,i,l,d,v){var w=ne.p;ne.p=w!==0&&8>w?w:8;var D=Y.T,ee={};Y.T=ee,S0(r,!1,i,l);try{var me=v(),Ie=Y.S;if(Ie!==null&&Ie(ee,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var We=W(me,d);_d(r,i,We,oa(r))}else _d(r,i,d,oa(r))}catch(Ze){_d(r,i,{then:function(){},status:"rejected",reason:Ze},oa())}finally{ne.p=w,D!==null&&ee.types!==null&&(D.types=ee.types),Y.T=D}}function Y4(){}function w0(r,i,l,d){if(r.tag!==5)throw Error(s(476));var v=hb(r).queue;ub(r,v,i,le,l===null?Y4:function(){return db(r),l(d)})}function hb(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:le},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:l},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function db(r){var i=hb(r);i.next===null&&(i=r.alternate.memoizedState),_d(r,i.next.queue,{},oa())}function _0(){return Ms(Bd)}function fb(){return Fr().memoizedState}function pb(){return Fr().memoizedState}function X4(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var l=oa();r=en(l);var d=xn(i,r,l);d!==null&&(qi(d,i,l),Qn(d,i,l)),i={cache:rc()},r.payload=i;return}i=i.return}}function Z4(r,i,l){var d=oa();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Xf(r)?gb(i,l):(l=Uu(r,i,l,d),l!==null&&(qi(l,r,d),bb(l,i,d)))}function mb(r,i,l){var d=oa();_d(r,i,l,d)}function _d(r,i,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Xf(r))gb(i,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var D=i.lastRenderedState,ee=w(D,l);if(v.hasEagerState=!0,v.eagerState=ee,Ts(ee,D))return Zc(r,i,v,0),yr===null&&Xc(),!1}catch{}finally{}if(l=Uu(r,i,v,d),l!==null)return qi(l,r,d),bb(l,i,d),!0}return!1}function S0(r,i,l,d){if(d={lane:2,revertLane:tm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Xf(r)){if(i)throw Error(s(479))}else i=Uu(r,l,d,2),i!==null&&qi(i,r,2)}function Xf(r){var i=r.alternate;return r===Yt||i!==null&&i===Yt}function gb(r,i){Vi=ai=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function bb(r,i,l){if((l&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,l|=d,i.lanes=l,St(r,l)}}var Sd={readContext:Ms,use:sc,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr,useHostTransitionStatus:hr,useFormState:hr,useActionState:hr,useOptimistic:hr,useMemoCache:hr,useCacheRefresh:hr};Sd.useEffectEvent=hr;var vb={readContext:Ms,use:sc,useCallback:function(r,i){return gs().memoizedState=[r,i===void 0?null:i],r},useContext:Ms,useEffect:tb,useImperativeHandle:function(r,i,l){l=l!=null?l.concat([r]):null,ac(4194308,4,ib.bind(null,i,r),l)},useLayoutEffect:function(r,i){return ac(4194308,4,r,i)},useInsertionEffect:function(r,i){ac(4,2,r,i)},useMemo:function(r,i){var l=gs();i=i===void 0?null:i;var d=r();if(Ks){ut(!0);try{r()}finally{ut(!1)}}return l.memoizedState=[d,i],d},useReducer:function(r,i,l){var d=gs();if(l!==void 0){var v=l(i);if(Ks){ut(!0);try{l(i)}finally{ut(!1)}}}else v=i;return d.memoizedState=d.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},d.queue=r,r=r.dispatch=Z4.bind(null,Yt,r),[d.memoizedState,r]},useRef:function(r){var i=gs();return r={current:r},i.memoizedState=r},useState:function(r){r=Fo(r);var i=r.queue,l=mb.bind(null,Yt,i);return i.dispatch=l,[r.memoizedState,l]},useDebugValue:y0,useDeferredValue:function(r,i){var l=gs();return x0(l,r,i)},useTransition:function(){var r=Fo(!1);return r=ub.bind(null,Yt,r.queue,!0,!1),gs().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,l){var d=Yt,v=gs();if(kn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),yr===null)throw Error(s(349));(On&127)!==0||to(d,i,l)}v.memoizedState=l;var w={value:l,getSnapshot:i};return v.queue=w,tb(yd.bind(null,d,w,r),[r]),d.flags|=2048,bl(9,{destroy:void 0},vd.bind(null,d,w,l,i),null),l},useId:function(){var r=gs(),i=yr.identifierPrefix;if(kn){var l=Ri,d=Di;l=(d&~(1<<32-vt(d)-1)).toString(32)+l,i="_"+i+"R_"+l,l=ts++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=eh++,i="_"+i+"r_"+l.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:_0,useFormState:ka,useActionState:ka,useOptimistic:function(r){var i=gs();i.memoizedState=i.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=S0.bind(null,Yt,!0,l),l.dispatch=i,[r,i]},useMemoCache:ml,useCacheRefresh:function(){return gs().memoizedState=X4.bind(null,Yt)},useEffectEvent:function(r){var i=gs(),l={impl:r};return i.memoizedState=l,function(){if((er&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},N0={readContext:Ms,use:sc,useCallback:ob,useContext:Ms,useEffect:v0,useImperativeHandle:ab,useInsertionEffect:rb,useLayoutEffect:sb,useMemo:lb,useReducer:rh,useRef:Yf,useState:function(){return rh(Ta)},useDebugValue:y0,useDeferredValue:function(r,i){var l=Fr();return cb(l,Xt.memoizedState,r,i)},useTransition:function(){var r=rh(Ta)[0],i=Fr().memoizedState;return[typeof r=="boolean"?r:Vo(r),i]},useSyncExternalStore:ih,useId:fb,useHostTransitionStatus:_0,useFormState:no,useActionState:no,useOptimistic:function(r,i){var l=Fr();return Hf(l,Xt,r,i)},useMemoCache:ml,useCacheRefresh:pb};N0.useEffectEvent=nb;var yb={readContext:Ms,use:sc,useCallback:ob,useContext:Ms,useEffect:v0,useImperativeHandle:ab,useInsertionEffect:rb,useLayoutEffect:sb,useMemo:lb,useReducer:sh,useRef:Yf,useState:function(){return sh(Ta)},useDebugValue:y0,useDeferredValue:function(r,i){var l=Fr();return Xt===null?x0(l,r,i):cb(l,Xt.memoizedState,r,i)},useTransition:function(){var r=sh(Ta)[0],i=Fr().memoizedState;return[typeof r=="boolean"?r:Vo(r),i]},useSyncExternalStore:ih,useId:fb,useHostTransitionStatus:_0,useFormState:lh,useActionState:lh,useOptimistic:function(r,i){var l=Fr();return Xt!==null?Hf(l,Xt,r,i):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:ml,useCacheRefresh:pb};yb.useEffectEvent=nb;function A0(r,i,l,d){i=r.memoizedState,l=l(d,i),l=l==null?i:y({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var C0={enqueueSetState:function(r,i,l){r=r._reactInternals;var d=oa(),v=en(d);v.payload=i,l!=null&&(v.callback=l),i=xn(r,v,d),i!==null&&(qi(i,r,d),Qn(i,r,d))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var d=oa(),v=en(d);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=xn(r,v,d),i!==null&&(qi(i,r,d),Qn(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=oa(),d=en(l);d.tag=2,i!=null&&(d.callback=i),i=xn(r,d,l),i!==null&&(qi(i,r,l),Qn(i,r,l))}};function xb(r,i,l,d,v,w,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,w,D):i.prototype&&i.prototype.isPureReactComponent?!Ya(l,d)||!Ya(v,w):!0}function wb(r,i,l,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==r&&C0.enqueueReplaceState(i,i.state,null)}function iu(r,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(r=r.defaultProps){l===i&&(l=y({},l));for(var v in r)l[v]===void 0&&(l[v]=r[v])}return l}function _b(r){Yc(r)}function Sb(r){console.error(r)}function Nb(r){Yc(r)}function Zf(r,i){try{var l=r.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Ab(r,i,l){try{var d=r.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function T0(r,i,l){return l=en(l),l.tag=3,l.payload={element:null},l.callback=function(){Zf(r,i)},l}function Cb(r){return r=en(r),r.tag=3,r}function Tb(r,i,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;r.payload=function(){return v(w)},r.callback=function(){Ab(i,l,d)}}var D=l.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(r.callback=function(){Ab(i,l,d),typeof v!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var ee=d.stack;this.componentDidCatch(d.value,{componentStack:ee!==null?ee:""})})}function K4(r,i,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&Oo(i,l,v,!0),l=kr.current,l!==null){switch(l.tag){case 31:case 13:return qn===null?l1():l.alternate===null&&ns===0&&(ns=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===xe?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),Q0(r,d,v)),!1;case 22:return l.flags|=65536,d===xe?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),Q0(r,d,v)),!1}throw Error(s(435,l.tag))}return Q0(r,d,v),l1(),!1}if(kn)return i=kr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=v,d!==sa&&(r=Error(s(422),{cause:d}),tc(Mi(r,l)))):(d!==sa&&(i=Error(s(423),{cause:d}),tc(Mi(i,l))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,d=Mi(d,l),v=T0(r.stateNode,d,v),as(r,v),ns!==4&&(ns=2)),!1;var w=Error(s(520),{cause:d});if(w=Mi(w,l),Md===null?Md=[w]:Md.push(w),ns!==4&&(ns=2),i===null)return!0;d=Mi(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,r=v&-v,l.lanes|=r,r=T0(l.stateNode,d,r),as(l,r),!1;case 1:if(i=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(hc===null||!hc.has(w))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Cb(v),Tb(v,r,l,d),as(l,v),!1}l=l.return}while(l!==null);return!1}var k0=Error(s(461)),bs=!1;function Qs(r,i,l,d){i.child=r===null?gn(i,null,l,d):vr(i,r.child,l,d)}function kb(r,i,l,d,v){l=l.render;var w=i.ref;if("ref"in d){var D={};for(var ee in d)ee!=="ref"&&(D[ee]=d[ee])}else D=d;return Do(i),d=md(r,i,l,D,w,v),ee=gd(),r!==null&&!bs?(bd(r,i,v),vl(r,i,v)):(kn&&ee&&hd(i),i.flags|=1,Qs(r,i,d,v),i.child)}function jb(r,i,l,d,v){if(r===null){var w=l.type;return typeof w=="function"&&!Wu(w)&&w.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=w,Eb(r,i,w,d,v)):(r=Ql(l.type,null,d,i,i.mode,v),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!I0(r,v)){var D=w.memoizedProps;if(l=l.compare,l=l!==null?l:Ya,l(D,d)&&r.ref===i.ref)return vl(r,i,v)}return i.flags|=1,r=Ei(w,d),r.ref=i.ref,r.return=i,i.child=r}function Eb(r,i,l,d,v){if(r!==null){var w=r.memoizedProps;if(Ya(w,d)&&r.ref===i.ref)if(bs=!1,i.pendingProps=d=w,I0(r,v))(r.flags&131072)!==0&&(bs=!0);else return i.lanes=r.lanes,vl(r,i,v)}return j0(r,i,l,d,v)}function Mb(r,i,l,d){var v=d.children,w=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,r!==null){for(d=i.child=r.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,i.child=null;return Lb(r,i,w,l,d)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oe(i,w!==null?w.cachePool:null),w!==null?Tr(i,w):Yn(),Jr(i);else return d=i.lanes=536870912,Lb(r,i,w!==null?w.baseLanes|l:l,l,d)}else w!==null?(oe(i,w.cachePool),Tr(i,w),es(),i.memoizedState=null):(r!==null&&oe(i,null),Yn(),es());return Qs(r,i,v,l),i.child}function Nd(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Lb(r,i,l,d,v){var w=se();return w=w===null?null:{parent:$r._currentValue,pool:w},i.memoizedState={baseLanes:l,cachePool:w},r!==null&&oe(i,null),Yn(),Jr(i),r!==null&&Oo(r,i,d,!0),i.childLanes=v,null}function Kf(r,i){return i=Jf({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Ob(r,i,l){return vr(i,r.child,null,l),r=Kf(i,i.pendingProps),r.flags|=2,rr(i),i.memoizedState=null,r}function Q4(r,i,l){var d=i.pendingProps,v=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(kn){if(d.mode==="hidden")return r=Kf(i,d),i.lanes=536870912,Nd(null,r);if(Jn(i),(r=br)?(r=Wv(r,Ir),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:jo!==null?{id:Di,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},l=Gu(r),l.return=i,i.child=l,js=i,br=null)):r=null,r===null)throw Eo(i);return i.lanes=536870912,null}return Kf(i,d)}var w=r.memoizedState;if(w!==null){var D=w.dehydrated;if(Jn(i),v)if(i.flags&256)i.flags&=-257,i=Ob(r,i,l);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(bs||Oo(r,i,l,!1),v=(l&r.childLanes)!==0,bs||v){if(d=yr,d!==null&&(D=Mt(d,l),D!==0&&D!==w.retryLane))throw w.retryLane=D,Qa(r,D),qi(d,r,D),k0;l1(),i=Ob(r,i,l)}else r=w.treeContext,br=ja(D.nextSibling),js=i,kn=!0,Zs=null,Ir=!1,r!==null&&zf(i,r),i=Kf(i,d),i.flags|=4096;return i}return r=Ei(r.child,{mode:d.mode,children:d.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Qf(r,i){var l=i.ref;if(l===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(i.flags|=4194816)}}function j0(r,i,l,d,v){return Do(i),l=md(r,i,l,d,void 0,v),d=gd(),r!==null&&!bs?(bd(r,i,v),vl(r,i,v)):(kn&&d&&hd(i),i.flags|=1,Qs(r,i,l,v),i.child)}function Db(r,i,l,d,v,w){return Do(i),i.updateQueue=null,l=eo(i,d,l,v),th(r),d=gd(),r!==null&&!bs?(bd(r,i,w),vl(r,i,w)):(kn&&d&&hd(i),i.flags|=1,Qs(r,i,l,w),i.child)}function Rb(r,i,l,d,v){if(Do(i),i.stateNode===null){var w=ks,D=l.contextType;typeof D=="object"&&D!==null&&(w=Ms(D)),w=new l(d,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=C0,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=d,w.state=i.memoizedState,w.refs={},wt(i),D=l.contextType,w.context=typeof D=="object"&&D!==null?Ms(D):ks,w.state=i.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(A0(i,l,D,d),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&C0.enqueueReplaceState(w,w.state,null),Kr(i,d,w,v),ur(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){w=i.stateNode;var ee=i.memoizedProps,me=iu(l,ee);w.props=me;var Ie=w.context,We=l.contextType;D=ks,typeof We=="object"&&We!==null&&(D=Ms(We));var Ze=l.getDerivedStateFromProps;We=typeof Ze=="function"||typeof w.getSnapshotBeforeUpdate=="function",ee=i.pendingProps!==ee,We||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ee||Ie!==D)&&wb(i,w,d,D),jt=!1;var Fe=i.memoizedState;w.state=Fe,Kr(i,d,w,v),ur(),Ie=i.memoizedState,ee||Fe!==Ie||jt?(typeof Ze=="function"&&(A0(i,l,Ze,d),Ie=i.memoizedState),(me=jt||xb(i,l,me,d,Fe,Ie,D))?(We||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=Ie),w.props=d,w.state=Ie,w.context=D,d=me):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,Cr(r,i),D=i.memoizedProps,We=iu(l,D),w.props=We,Ze=i.pendingProps,Fe=w.context,Ie=l.contextType,me=ks,typeof Ie=="object"&&Ie!==null&&(me=Ms(Ie)),ee=l.getDerivedStateFromProps,(Ie=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==Ze||Fe!==me)&&wb(i,w,d,me),jt=!1,Fe=i.memoizedState,w.state=Fe,Kr(i,d,w,v),ur();var Pe=i.memoizedState;D!==Ze||Fe!==Pe||jt||r!==null&&r.dependencies!==null&&Ku(r.dependencies)?(typeof ee=="function"&&(A0(i,l,ee,d),Pe=i.memoizedState),(We=jt||xb(i,l,We,d,Fe,Pe,me)||r!==null&&r.dependencies!==null&&Ku(r.dependencies))?(Ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Pe,me),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Pe,me)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Pe),w.props=d,w.state=Pe,w.context=me,d=We):(typeof w.componentDidUpdate!="function"||D===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&Fe===r.memoizedState||(i.flags|=1024),d=!1)}return w=d,Qf(r,i),d=(i.flags&128)!==0,w||d?(w=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,r!==null&&d?(i.child=vr(i,r.child,null,v),i.child=vr(i,null,l,v)):Qs(r,i,l,v),i.memoizedState=w.state,r=i.child):r=vl(r,i,v),r}function Ib(r,i,l,d){return fl(),i.flags|=256,Qs(r,i,l,d),i.child}var E0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function M0(r){return{baseLanes:r,cachePool:he()}}function L0(r,i,l){return r=r!==null?r.childLanes&~l:0,i&&(r|=aa),r}function Vb(r,i,l){var d=i.pendingProps,v=!1,w=(i.flags&128)!==0,D;if((D=w)||(D=r!==null&&r.memoizedState===null?!1:(Fn.current&2)!==0),D&&(v=!0,i.flags&=-129),D=(i.flags&32)!==0,i.flags&=-33,r===null){if(kn){if(v?Yr(i):es(),(r=br)?(r=Wv(r,Ir),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:jo!==null?{id:Di,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},l=Gu(r),l.return=i,i.child=l,js=i,br=null)):r=null,r===null)throw Eo(i);return pm(r)?i.lanes=32:i.lanes=536870912,null}var ee=d.children;return d=d.fallback,v?(es(),v=i.mode,ee=Jf({mode:"hidden",children:ee},v),d=ko(d,v,l,null),ee.return=i,d.return=i,ee.sibling=d,i.child=ee,d=i.child,d.memoizedState=M0(l),d.childLanes=L0(r,D,l),i.memoizedState=E0,Nd(null,d)):(Yr(i),O0(i,ee))}var me=r.memoizedState;if(me!==null&&(ee=me.dehydrated,ee!==null)){if(w)i.flags&256?(Yr(i),i.flags&=-257,i=D0(r,i,l)):i.memoizedState!==null?(es(),i.child=r.child,i.flags|=128,i=null):(es(),ee=d.fallback,v=i.mode,d=Jf({mode:"visible",children:d.children},v),ee=ko(ee,v,l,null),ee.flags|=2,d.return=i,ee.return=i,d.sibling=ee,i.child=d,vr(i,r.child,null,l),d=i.child,d.memoizedState=M0(l),d.childLanes=L0(r,D,l),i.memoizedState=E0,i=Nd(null,d));else if(Yr(i),pm(ee)){if(D=ee.nextSibling&&ee.nextSibling.dataset,D)var Ie=D.dgst;D=Ie,d=Error(s(419)),d.stack="",d.digest=D,tc({value:d,source:null,stack:null}),i=D0(r,i,l)}else if(bs||Oo(r,i,l,!1),D=(l&r.childLanes)!==0,bs||D){if(D=yr,D!==null&&(d=Mt(D,l),d!==0&&d!==me.retryLane))throw me.retryLane=d,Qa(r,d),qi(D,r,d),k0;fm(ee)||l1(),i=D0(r,i,l)}else fm(ee)?(i.flags|=192,i.child=r.child,i=null):(r=me.treeContext,br=ja(ee.nextSibling),js=i,kn=!0,Zs=null,Ir=!1,r!==null&&zf(i,r),i=O0(i,d.children),i.flags|=4096);return i}return v?(es(),ee=d.fallback,v=i.mode,me=r.child,Ie=me.sibling,d=Ei(me,{mode:"hidden",children:d.children}),d.subtreeFlags=me.subtreeFlags&65011712,Ie!==null?ee=Ei(Ie,ee):(ee=ko(ee,v,l,null),ee.flags|=2),ee.return=i,d.return=i,d.sibling=ee,i.child=d,Nd(null,d),d=i.child,ee=r.child.memoizedState,ee===null?ee=M0(l):(v=ee.cachePool,v!==null?(me=$r._currentValue,v=v.parent!==me?{parent:me,pool:me}:v):v=he(),ee={baseLanes:ee.baseLanes|l,cachePool:v}),d.memoizedState=ee,d.childLanes=L0(r,D,l),i.memoizedState=E0,Nd(r.child,d)):(Yr(i),l=r.child,r=l.sibling,l=Ei(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,r!==null&&(D=i.deletions,D===null?(i.deletions=[r],i.flags|=16):D.push(r)),i.child=l,i.memoizedState=null,l)}function O0(r,i){return i=Jf({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Jf(r,i){return r=Bs(22,r,null,i),r.lanes=0,r}function D0(r,i,l){return vr(i,r.child,null,l),r=O0(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Fb(r,i,l){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),nc(r.return,i,l)}function R0(r,i,l,d,v,w){var D=r.memoizedState;D===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:w}:(D.isBackwards=i,D.rendering=null,D.renderingStartTime=0,D.last=d,D.tail=l,D.tailMode=v,D.treeForkCount=w)}function Bb(r,i,l){var d=i.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var D=Fn.current,ee=(D&2)!==0;if(ee?(D=D&1|2,i.flags|=128):D&=1,$(Fn,D),Qs(r,i,d,l),d=kn?eu:0,!ee&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Fb(r,l,i);else if(r.tag===19)Fb(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(l=i.child,v=null;l!==null;)r=l.alternate,r!==null&&zs(r)===null&&(v=l),l=l.sibling;l=v,l===null?(v=i.child,i.child=null):(v=l.sibling,l.sibling=null),R0(i,!1,v,l,w,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=i.child,i.child=null;v!==null;){if(r=v.alternate,r!==null&&zs(r)===null){i.child=v;break}r=v.sibling,v.sibling=l,l=v,v=r}R0(i,!0,l,null,w,d);break;case"together":R0(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function vl(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),uc|=i.lanes,(l&i.childLanes)===0)if(r!==null){if(Oo(r,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=Ei(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Ei(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function I0(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Ku(r)))}function J4(r,i,l){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),Lo(i,$r,r.memoizedState.cache),fl();break;case 27:case 5:_e(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:Lo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Jn(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Yr(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Vb(r,i,l):(Yr(i),r=vl(r,i,l),r!==null?r.sibling:null);Yr(i);break;case 19:var v=(r.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(Oo(r,i,l,!1),d=(l&i.childLanes)!==0),v){if(d)return Bb(r,i,l);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),$(Fn,Fn.current),d)break;return null;case 22:return i.lanes=0,Mb(r,i,l,i.pendingProps);case 24:Lo(i,$r,r.memoizedState.cache)}return vl(r,i,l)}function Pb(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps)bs=!0;else{if(!I0(r,l)&&(i.flags&128)===0)return bs=!1,J4(r,i,l);bs=(r.flags&131072)!==0}else bs=!1,kn&&(i.flags&1048576)!==0&&Pf(i,eu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(r=ke(i.elementType),i.type=r,typeof r=="function")Wu(r)?(d=iu(r,d),i.tag=1,i=Rb(null,i,r,d,l)):(i.tag=0,i=j0(null,i,r,d,l));else{if(r!=null){var v=r.$$typeof;if(v===V){i.tag=11,i=kb(null,i,r,d,l);break e}else if(v===z){i.tag=14,i=jb(null,i,r,d,l);break e}}throw i=P(r)||r,Error(s(306,i,""))}}return i;case 0:return j0(r,i,i.type,i.pendingProps,l);case 1:return d=i.type,v=iu(d,i.pendingProps),Rb(r,i,d,v,l);case 3:e:{if(ce(i,i.stateNode.containerInfo),r===null)throw Error(s(387));d=i.pendingProps;var w=i.memoizedState;v=w.element,Cr(r,i),Kr(i,d,null,l);var D=i.memoizedState;if(d=D.cache,Lo(i,$r,d),d!==w.cache&&pl(i,[$r],l,!0),ur(),d=D.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:D.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=Ib(r,i,d,l);break e}else if(d!==v){v=Mi(Error(s(424)),i),tc(v),i=Ib(r,i,d,l);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(br=ja(r.firstChild),js=i,kn=!0,Zs=null,Ir=!0,l=gn(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(fl(),d===v){i=vl(r,i,l);break e}Qs(r,i,d,l)}i=i.child}return i;case 26:return Qf(r,i),r===null?(l=Kv(i.type,null,i.pendingProps,null))?i.memoizedState=l:kn||(l=i.type,r=i.pendingProps,d=m1(re.current).createElement(l),d[yn]=i,d[Sn]=r,Js(d,l,r),on(d),i.stateNode=d):i.memoizedState=Kv(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return _e(i),r===null&&kn&&(d=i.stateNode=Yv(i.type,i.pendingProps,re.current),js=i,Ir=!0,v=br,mc(i.type)?(mm=v,br=ja(d.firstChild)):br=v),Qs(r,i,i.pendingProps.children,l),Qf(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&kn&&((v=d=br)&&(d=j_(d,i.type,i.pendingProps,Ir),d!==null?(i.stateNode=d,js=i,br=ja(d.firstChild),Ir=!1,v=!0):v=!1),v||Eo(i)),_e(i),v=i.type,w=i.pendingProps,D=r!==null?r.memoizedProps:null,d=w.children,um(v,w)?d=null:D!==null&&um(v,D)&&(i.flags|=32),i.memoizedState!==null&&(v=md(r,i,b0,null,null,l),Bd._currentValue=v),Qf(r,i),Qs(r,i,d,l),i.child;case 6:return r===null&&kn&&((r=l=br)&&(l=E_(l,i.pendingProps,Ir),l!==null?(i.stateNode=l,js=i,br=null,r=!0):r=!1),r||Eo(i)),null;case 13:return Vb(r,i,l);case 4:return ce(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=vr(i,null,d,l):Qs(r,i,d,l),i.child;case 11:return kb(r,i,i.type,i.pendingProps,l);case 7:return Qs(r,i,i.pendingProps,l),i.child;case 8:return Qs(r,i,i.pendingProps.children,l),i.child;case 12:return Qs(r,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,Lo(i,i.type,d.value),Qs(r,i,d.children,l),i.child;case 9:return v=i.type._context,d=i.pendingProps.children,Do(i),v=Ms(v),d=d(v),i.flags|=1,Qs(r,i,d,l),i.child;case 14:return jb(r,i,i.type,i.pendingProps,l);case 15:return Eb(r,i,i.type,i.pendingProps,l);case 19:return Bb(r,i,l);case 31:return Q4(r,i,l);case 22:return Mb(r,i,l,i.pendingProps);case 24:return Do(i),d=Ms($r),r===null?(v=se(),v===null&&(v=yr,w=rc(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=l),v=w),i.memoizedState={parent:d,cache:v},wt(i),Lo(i,$r,v)):((r.lanes&l)!==0&&(Cr(r,i),Kr(i,null,null,l),ur()),v=r.memoizedState,w=i.memoizedState,v.parent!==d?(v={parent:d,cache:d},i.memoizedState=v,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=v),Lo(i,$r,d)):(d=w.cache,Lo(i,$r,d),d!==v.cache&&pl(i,[$r],l,!0))),Qs(r,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function yl(r){r.flags|=4}function V0(r,i,l,d,v){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(fv())r.flags|=8192;else throw ze=xe,Oe}else r.flags&=-16777217}function zb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!n5(i))if(fv())r.flags|=8192;else throw ze=xe,Oe}function e1(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?yt():536870912,r.lanes|=i,dh|=i)}function Ad(r,i){if(!kn)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function jr(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(i)for(var v=r.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=d,r.childLanes=l,i}function e_(r,i,l){var d=i.pendingProps;switch(Xu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(i),null;case 1:return jr(i),null;case 3:return l=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Ii($r),ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Es(i)?yl(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,fd())),jr(i),null;case 26:var v=i.type,w=i.memoizedState;return r===null?(yl(i),w!==null?(jr(i),zb(i,w)):(jr(i),V0(i,v,null,d,l))):w?w!==r.memoizedState?(yl(i),jr(i),zb(i,w)):(jr(i),i.flags&=-16777217):(r=r.memoizedProps,r!==d&&yl(i),jr(i),V0(i,v,r,d,l)),null;case 27:if(Ve(i),l=re.current,v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&yl(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return jr(i),null}r=te.current,Es(i)?dd(i):(r=Yv(v,d,l),i.stateNode=r,yl(i))}return jr(i),null;case 5:if(Ve(i),v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&yl(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return jr(i),null}if(w=te.current,Es(i))dd(i);else{var D=m1(re.current);switch(w){case 1:w=D.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=D.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=D.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?D.createElement("select",{is:d.is}):D.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?D.createElement(v,{is:d.is}):D.createElement(v)}}w[yn]=i,w[Sn]=d;e:for(D=i.child;D!==null;){if(D.tag===5||D.tag===6)w.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===i)break e;for(;D.sibling===null;){if(D.return===null||D.return===i)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}i.stateNode=w;e:switch(Js(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&yl(i)}}return jr(i),V0(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,l),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&yl(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(r=re.current,Es(i)){if(r=i.stateNode,l=i.memoizedProps,d=null,v=js,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}r[yn]=i,r=!!(r.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Vv(r.nodeValue,l)),r||Eo(i,!0)}else r=m1(r).createTextNode(d),r[yn]=i,i.stateNode=r}return jr(i),null;case 31:if(l=i.memoizedState,r===null||r.memoizedState!==null){if(d=Es(i),l!==null){if(r===null){if(!d)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[yn]=i}else fl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;jr(i),r=!1}else l=fd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return i.flags&256?(rr(i),i):(rr(i),null);if((i.flags&128)!==0)throw Error(s(558))}return jr(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Es(i),d!==null&&d.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[yn]=i}else fl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;jr(i),v=!1}else v=fd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return i.flags&256?(rr(i),i):(rr(i),null)}return rr(i),(i.flags&128)!==0?(i.lanes=l,i):(l=d!==null,r=r!==null&&r.memoizedState!==null,l&&(d=i.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),l!==r&&l&&(i.child.flags|=8192),e1(i,i.updateQueue),jr(i),null);case 4:return ve(),r===null&&im(i.stateNode.containerInfo),jr(i),null;case 10:return Ii(i.type),jr(i),null;case 19:if(E(Fn),d=i.memoizedState,d===null)return jr(i),null;if(v=(i.flags&128)!==0,w=d.rendering,w===null)if(v)Ad(d,!1);else{if(ns!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=zs(r),w!==null){for(i.flags|=128,Ad(d,!1),r=w.updateQueue,i.updateQueue=r,e1(i,r),i.subtreeFlags=0,r=l,l=i.child;l!==null;)Qc(l,r),l=l.sibling;return $(Fn,Fn.current&1|2),kn&&xi(i,d.treeForkCount),i.child}r=r.sibling}d.tail!==null&&Ke()>i1&&(i.flags|=128,v=!0,Ad(d,!1),i.lanes=4194304)}else{if(!v)if(r=zs(w),r!==null){if(i.flags|=128,v=!0,r=r.updateQueue,i.updateQueue=r,e1(i,r),Ad(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!kn)return jr(i),null}else 2*Ke()-d.renderingStartTime>i1&&l!==536870912&&(i.flags|=128,v=!0,Ad(d,!1),i.lanes=4194304);d.isBackwards?(w.sibling=i.child,i.child=w):(r=d.last,r!==null?r.sibling=w:i.child=w,d.last=w)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ke(),r.sibling=null,l=Fn.current,$(Fn,v?l&1|2:l&1),kn&&xi(i,d.treeForkCount),r):(jr(i),null);case 22:case 23:return rr(i),os(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(jr(i),i.subtreeFlags&6&&(i.flags|=8192)):jr(i),l=i.updateQueue,l!==null&&e1(i,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),r!==null&&E(Q),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ii($r),jr(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function t_(r,i){switch(Xu(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ii($r),ve(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ve(i),null;case 31:if(i.memoizedState!==null){if(rr(i),i.alternate===null)throw Error(s(340));fl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(rr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));fl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return E(Fn),null;case 4:return ve(),null;case 10:return Ii(i.type),null;case 22:case 23:return rr(i),os(),r!==null&&E(Q),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ii($r),null;case 25:return null;default:return null}}function qb(r,i){switch(Xu(i),i.tag){case 3:Ii($r),ve();break;case 26:case 27:case 5:Ve(i);break;case 4:ve();break;case 31:i.memoizedState!==null&&rr(i);break;case 13:rr(i);break;case 19:E(Fn);break;case 10:Ii(i.type);break;case 22:case 23:rr(i),os(),r!==null&&E(Q);break;case 24:Ii($r)}}function Cd(r,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&r)===r){d=void 0;var w=l.create,D=l.inst;d=w(),D.destroy=d}l=l.next}while(l!==v)}}catch(ee){ir(i,i.return,ee)}}function lc(r,i,l){try{var d=i.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&r)===r){var D=d.inst,ee=D.destroy;if(ee!==void 0){D.destroy=void 0,v=i;var me=l,Ie=ee;try{Ie()}catch(We){ir(v,me,We)}}}d=d.next}while(d!==w)}}catch(We){ir(i,i.return,We)}}function Ub(r){var i=r.updateQueue;if(i!==null){var l=r.stateNode;try{Qr(i,l)}catch(d){ir(r,r.return,d)}}}function Hb(r,i,l){l.props=iu(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(d){ir(r,i,d)}}function Td(r,i){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(v){ir(r,i,v)}}function Bo(r,i){var l=r.ref,d=r.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){ir(r,i,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ir(r,i,v)}else l.current=null}function Wb(r){var i=r.type,l=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){ir(r,r.return,v)}}function F0(r,i,l){try{var d=r.stateNode;S_(d,r.type,l,i),d[Sn]=i}catch(v){ir(r,r.return,v)}}function Gb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&mc(r.type)||r.tag===4}function B0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Gb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&mc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function P0(r,i,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(r),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Qi));else if(d!==4&&(d===27&&mc(r.type)&&(l=r.stateNode,i=null),r=r.child,r!==null))for(P0(r,i,l),r=r.sibling;r!==null;)P0(r,i,l),r=r.sibling}function t1(r,i,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(d!==4&&(d===27&&mc(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(t1(r,i,l),r=r.sibling;r!==null;)t1(r,i,l),r=r.sibling}function $b(r){var i=r.stateNode,l=r.memoizedProps;try{for(var d=r.type,v=i.attributes;v.length;)i.removeAttributeNode(v[0]);Js(i,d,l),i[yn]=r,i[Sn]=l}catch(w){ir(r,r.return,w)}}var xl=!1,vs=!1,z0=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,qs=null;function n_(r,i){if(r=r.containerInfo,lm=_1,r=Za(r),Na(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var D=0,ee=-1,me=-1,Ie=0,We=0,Ze=r,Fe=null;t:for(;;){for(var Pe;Ze!==l||v!==0&&Ze.nodeType!==3||(ee=D+v),Ze!==w||d!==0&&Ze.nodeType!==3||(me=D+d),Ze.nodeType===3&&(D+=Ze.nodeValue.length),(Pe=Ze.firstChild)!==null;)Fe=Ze,Ze=Pe;for(;;){if(Ze===r)break t;if(Fe===l&&++Ie===v&&(ee=D),Fe===w&&++We===d&&(me=D),(Pe=Ze.nextSibling)!==null)break;Ze=Fe,Fe=Ze.parentNode}Ze=Pe}l=ee===-1||me===-1?null:{start:ee,end:me}}else l=null}l=l||{start:0,end:0}}else l=null;for(cm={focusedElem:r,selectionRange:l},_1=!1,qs=i;qs!==null;)if(i=qs,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,qs=r;else for(;qs!==null;){switch(i=qs,w=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)v=r[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,l=i,v=w.memoizedProps,w=w.memoizedState,d=l.stateNode;try{var Dt=iu(l.type,v);r=d.getSnapshotBeforeUpdate(Dt,w),d.__reactInternalSnapshotBeforeUpdate=r}catch(tn){ir(l,l.return,tn)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,l=r.nodeType,l===9)dm(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":dm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,qs=r;break}qs=i.return}}function Xb(r,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:_l(r,l),d&4&&Cd(5,l);break;case 1:if(_l(r,l),d&4)if(r=l.stateNode,i===null)try{r.componentDidMount()}catch(D){ir(l,l.return,D)}else{var v=iu(l.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(v,i,r.__reactInternalSnapshotBeforeUpdate)}catch(D){ir(l,l.return,D)}}d&64&&Ub(l),d&512&&Td(l,l.return);break;case 3:if(_l(r,l),d&64&&(r=l.updateQueue,r!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Qr(r,i)}catch(D){ir(l,l.return,D)}}break;case 27:i===null&&d&4&&$b(l);case 26:case 5:_l(r,l),i===null&&d&4&&Wb(l),d&512&&Td(l,l.return);break;case 12:_l(r,l);break;case 31:_l(r,l),d&4&&Qb(r,l);break;case 13:_l(r,l),d&4&&Jb(r,l),d&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=h_.bind(null,l),M_(r,l))));break;case 22:if(d=l.memoizedState!==null||xl,!d){i=i!==null&&i.memoizedState!==null||vs,v=xl;var w=vs;xl=d,(vs=i)&&!w?Sl(r,l,(l.subtreeFlags&8772)!==0):_l(r,l),xl=v,vs=w}break;case 30:break;default:_l(r,l)}}function Zb(r){var i=r.alternate;i!==null&&(r.alternate=null,Zb(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&It(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Br=null,Fi=!1;function wl(r,i,l){for(l=l.child;l!==null;)Kb(r,i,l),l=l.sibling}function Kb(r,i,l){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(ct,l)}catch{}switch(l.tag){case 26:vs||Bo(l,i),wl(r,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:vs||Bo(l,i);var d=Br,v=Fi;mc(l.type)&&(Br=l.stateNode,Fi=!1),wl(r,i,l),Id(l.stateNode),Br=d,Fi=v;break;case 5:vs||Bo(l,i);case 6:if(d=Br,v=Fi,Br=null,wl(r,i,l),Br=d,Fi=v,Br!==null)if(Fi)try{(Br.nodeType===9?Br.body:Br.nodeName==="HTML"?Br.ownerDocument.body:Br).removeChild(l.stateNode)}catch(w){ir(l,i,w)}else try{Br.removeChild(l.stateNode)}catch(w){ir(l,i,w)}break;case 18:Br!==null&&(Fi?(r=Br,Uv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),xh(r)):Uv(Br,l.stateNode));break;case 4:d=Br,v=Fi,Br=l.stateNode.containerInfo,Fi=!0,wl(r,i,l),Br=d,Fi=v;break;case 0:case 11:case 14:case 15:lc(2,l,i),vs||lc(4,l,i),wl(r,i,l);break;case 1:vs||(Bo(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Hb(l,i,d)),wl(r,i,l);break;case 21:wl(r,i,l);break;case 22:vs=(d=vs)||l.memoizedState!==null,wl(r,i,l),vs=d;break;default:wl(r,i,l)}}function Qb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{xh(r)}catch(l){ir(i,i.return,l)}}}function Jb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{xh(r)}catch(l){ir(i,i.return,l)}}function r_(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Yb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Yb),i;default:throw Error(s(435,r.tag))}}function n1(r,i){var l=r_(r);i.forEach(function(d){if(!l.has(d)){l.add(d);var v=d_.bind(null,r,d);d.then(v,v)}})}function Bi(r,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],w=r,D=i,ee=D;e:for(;ee!==null;){switch(ee.tag){case 27:if(mc(ee.type)){Br=ee.stateNode,Fi=!1;break e}break;case 5:Br=ee.stateNode,Fi=!1;break e;case 3:case 4:Br=ee.stateNode.containerInfo,Fi=!0;break e}ee=ee.return}if(Br===null)throw Error(s(160));Kb(w,D,v),Br=null,Fi=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)ev(i,r),i=i.sibling}var so=null;function ev(r,i){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bi(i,r),Pi(r),d&4&&(lc(3,r,r.return),Cd(3,r),lc(5,r,r.return));break;case 1:Bi(i,r),Pi(r),d&512&&(vs||l===null||Bo(l,l.return)),d&64&&xl&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=so;if(Bi(i,r),Pi(r),d&512&&(vs||l===null||Bo(l,l.return)),d&4){var w=l!==null?l.memoizedState:null;if(d=r.memoizedState,l===null)if(d===null)if(r.stateNode===null){e:{d=r.type,l=r.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[nt]||w[yn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),Js(w,d,l),w[yn]=r,on(w),d=w;break e;case"link":var D=e5("link","href",v).get(d+(l.href||""));if(D){for(var ee=0;ee<D.length;ee++)if(w=D[ee],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){D.splice(ee,1);break t}}w=v.createElement(d),Js(w,d,l),v.head.appendChild(w);break;case"meta":if(D=e5("meta","content",v).get(d+(l.content||""))){for(ee=0;ee<D.length;ee++)if(w=D[ee],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){D.splice(ee,1);break t}}w=v.createElement(d),Js(w,d,l),v.head.appendChild(w);break;default:throw Error(s(468,d))}w[yn]=r,on(w),d=w}r.stateNode=d}else t5(v,r.type,r.stateNode);else r.stateNode=Jv(v,d,r.memoizedProps);else w!==d?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,d===null?t5(v,r.type,r.stateNode):Jv(v,d,r.memoizedProps)):d===null&&r.stateNode!==null&&F0(r,r.memoizedProps,l.memoizedProps)}break;case 27:Bi(i,r),Pi(r),d&512&&(vs||l===null||Bo(l,l.return)),l!==null&&d&4&&F0(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Bi(i,r),Pi(r),d&512&&(vs||l===null||Bo(l,l.return)),r.flags&32){v=r.stateNode;try{Ki(v,"")}catch(Dt){ir(r,r.return,Dt)}}d&4&&r.stateNode!=null&&(v=r.memoizedProps,F0(r,v,l!==null?l.memoizedProps:v)),d&1024&&(z0=!0);break;case 6:if(Bi(i,r),Pi(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,l=r.stateNode;try{l.nodeValue=d}catch(Dt){ir(r,r.return,Dt)}}break;case 3:if(v1=null,v=so,so=g1(i.containerInfo),Bi(i,r),so=v,Pi(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{xh(i.containerInfo)}catch(Dt){ir(r,r.return,Dt)}z0&&(z0=!1,tv(r));break;case 4:d=so,so=g1(r.stateNode.containerInfo),Bi(i,r),Pi(r),so=d;break;case 12:Bi(i,r),Pi(r);break;case 31:Bi(i,r),Pi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,n1(r,d)));break;case 13:Bi(i,r),Pi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(s1=Ke()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,n1(r,d)));break;case 22:v=r.memoizedState!==null;var me=l!==null&&l.memoizedState!==null,Ie=xl,We=vs;if(xl=Ie||v,vs=We||me,Bi(i,r),vs=We,xl=Ie,Pi(r),d&8192)e:for(i=r.stateNode,i._visibility=v?i._visibility&-2:i._visibility|1,v&&(l===null||me||xl||vs||au(r)),l=null,i=r;;){if(i.tag===5||i.tag===26){if(l===null){me=l=i;try{if(w=me.stateNode,v)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{ee=me.stateNode;var Ze=me.memoizedProps.style,Fe=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;ee.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Dt){ir(me,me.return,Dt)}}}else if(i.tag===6){if(l===null){me=i;try{me.stateNode.nodeValue=v?"":me.memoizedProps}catch(Dt){ir(me,me.return,Dt)}}}else if(i.tag===18){if(l===null){me=i;try{var Pe=me.stateNode;v?Hv(Pe,!0):Hv(me.stateNode,!1)}catch(Dt){ir(me,me.return,Dt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,n1(r,l))));break;case 19:Bi(i,r),Pi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,n1(r,d)));break;case 30:break;case 21:break;default:Bi(i,r),Pi(r)}}function Pi(r){var i=r.flags;if(i&2){try{for(var l,d=r.return;d!==null;){if(Gb(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var v=l.stateNode,w=B0(r);t1(r,w,v);break;case 5:var D=l.stateNode;l.flags&32&&(Ki(D,""),l.flags&=-33);var ee=B0(r);t1(r,ee,D);break;case 3:case 4:var me=l.stateNode.containerInfo,Ie=B0(r);P0(r,Ie,me);break;default:throw Error(s(161))}}catch(We){ir(r,r.return,We)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function tv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;tv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function _l(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Xb(r,i.alternate,i),i=i.sibling}function au(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:lc(4,i,i.return),au(i);break;case 1:Bo(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Hb(i,i.return,l),au(i);break;case 27:Id(i.stateNode);case 26:case 5:Bo(i,i.return),au(i);break;case 22:i.memoizedState===null&&au(i);break;case 30:au(i);break;default:au(i)}r=r.sibling}}function Sl(r,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,v=r,w=i,D=w.flags;switch(w.tag){case 0:case 11:case 15:Sl(v,w,l),Cd(4,w);break;case 1:if(Sl(v,w,l),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Ie){ir(d,d.return,Ie)}if(d=w,v=d.updateQueue,v!==null){var ee=d.stateNode;try{var me=v.shared.hiddenCallbacks;if(me!==null)for(v.shared.hiddenCallbacks=null,v=0;v<me.length;v++)Ps(me[v],ee)}catch(Ie){ir(d,d.return,Ie)}}l&&D&64&&Ub(w),Td(w,w.return);break;case 27:$b(w);case 26:case 5:Sl(v,w,l),l&&d===null&&D&4&&Wb(w),Td(w,w.return);break;case 12:Sl(v,w,l);break;case 31:Sl(v,w,l),l&&D&4&&Qb(v,w);break;case 13:Sl(v,w,l),l&&D&4&&Jb(v,w);break;case 22:w.memoizedState===null&&Sl(v,w,l),Td(w,w.return);break;case 30:break;default:Sl(v,w,l)}i=i.sibling}}function q0(r,i){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&tu(l))}function U0(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&tu(r))}function io(r,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)nv(r,i,l,d),i=i.sibling}function nv(r,i,l,d){var v=i.flags;switch(i.tag){case 0:case 11:case 15:io(r,i,l,d),v&2048&&Cd(9,i);break;case 1:io(r,i,l,d);break;case 3:io(r,i,l,d),v&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&tu(r)));break;case 12:if(v&2048){io(r,i,l,d),r=i.stateNode;try{var w=i.memoizedProps,D=w.id,ee=w.onPostCommit;typeof ee=="function"&&ee(D,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(me){ir(i,i.return,me)}}else io(r,i,l,d);break;case 31:io(r,i,l,d);break;case 13:io(r,i,l,d);break;case 23:break;case 22:w=i.stateNode,D=i.alternate,i.memoizedState!==null?w._visibility&2?io(r,i,l,d):kd(r,i):w._visibility&2?io(r,i,l,d):(w._visibility|=2,ch(r,i,l,d,(i.subtreeFlags&10256)!==0||!1)),v&2048&&q0(D,i);break;case 24:io(r,i,l,d),v&2048&&U0(i.alternate,i);break;default:io(r,i,l,d)}}function ch(r,i,l,d,v){for(v=v&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=r,D=i,ee=l,me=d,Ie=D.flags;switch(D.tag){case 0:case 11:case 15:ch(w,D,ee,me,v),Cd(8,D);break;case 23:break;case 22:var We=D.stateNode;D.memoizedState!==null?We._visibility&2?ch(w,D,ee,me,v):kd(w,D):(We._visibility|=2,ch(w,D,ee,me,v)),v&&Ie&2048&&q0(D.alternate,D);break;case 24:ch(w,D,ee,me,v),v&&Ie&2048&&U0(D.alternate,D);break;default:ch(w,D,ee,me,v)}i=i.sibling}}function kd(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=r,d=i,v=d.flags;switch(d.tag){case 22:kd(l,d),v&2048&&q0(d.alternate,d);break;case 24:kd(l,d),v&2048&&U0(d.alternate,d);break;default:kd(l,d)}i=i.sibling}}var jd=8192;function uh(r,i,l){if(r.subtreeFlags&jd)for(r=r.child;r!==null;)rv(r,i,l),r=r.sibling}function rv(r,i,l){switch(r.tag){case 26:uh(r,i,l),r.flags&jd&&r.memoizedState!==null&&U_(l,so,r.memoizedState,r.memoizedProps);break;case 5:uh(r,i,l);break;case 3:case 4:var d=so;so=g1(r.stateNode.containerInfo),uh(r,i,l),so=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=jd,jd=16777216,uh(r,i,l),jd=d):uh(r,i,l));break;default:uh(r,i,l)}}function sv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Ed(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];qs=d,av(d,r)}sv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iv(r),r=r.sibling}function iv(r){switch(r.tag){case 0:case 11:case 15:Ed(r),r.flags&2048&&lc(9,r,r.return);break;case 3:Ed(r);break;case 12:Ed(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,r1(r)):Ed(r);break;default:Ed(r)}}function r1(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];qs=d,av(d,r)}sv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:lc(8,i,i.return),r1(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,r1(i));break;default:r1(i)}r=r.sibling}}function av(r,i){for(;qs!==null;){var l=qs;switch(l.tag){case 0:case 11:case 15:lc(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:tu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,qs=d;else e:for(l=r;qs!==null;){d=qs;var v=d.sibling,w=d.return;if(Zb(d),d===l){qs=null;break e}if(v!==null){v.return=w,qs=v;break e}qs=w}}}var s_={getCacheForType:function(r){var i=Ms($r),l=i.data.get(r);return l===void 0&&(l=r(),i.data.set(r,l)),l},cacheSignal:function(){return Ms($r).controller.signal}},i_=typeof WeakMap=="function"?WeakMap:Map,er=0,yr=null,jn=null,On=0,sr=0,ia=null,cc=!1,hh=!1,H0=!1,Nl=0,ns=0,uc=0,ou=0,W0=0,aa=0,dh=0,Md=null,zi=null,G0=!1,s1=0,ov=0,i1=1/0,a1=null,hc=null,Os=0,dc=null,fh=null,Al=0,$0=0,Y0=null,lv=null,Ld=0,X0=null;function oa(){return(er&2)!==0&&On!==0?On&-On:Y.T!==null?tm():cn()}function cv(){if(aa===0)if((On&536870912)===0||kn){var r=pn;pn<<=1,(pn&3932160)===0&&(pn=262144),aa=r}else aa=536870912;return r=kr.current,r!==null&&(r.flags|=32),aa}function qi(r,i,l){(r===yr&&(sr===2||sr===9)||r.cancelPendingCommit!==null)&&(ph(r,0),fc(r,On,aa,!1)),it(r,l),((er&2)===0||r!==yr)&&(r===yr&&((er&2)===0&&(ou|=l),ns===4&&fc(r,On,aa,!1)),Po(r))}function uv(r,i,l){if((er&6)!==0)throw Error(s(327));var d=!l&&(i&127)===0&&(i&r.expiredLanes)===0||wn(r,i),v=d?l_(r,i):K0(r,i,!0),w=d;do{if(v===0){hh&&!d&&fc(r,i,0,!1);break}else{if(l=r.current.alternate,w&&!a_(l)){v=K0(r,i,!1),w=!1;continue}if(v===2){if(w=i,r.errorRecoveryDisabledLanes&w)var D=0;else D=r.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){i=D;e:{var ee=r;v=Md;var me=ee.current.memoizedState.isDehydrated;if(me&&(ph(ee,D).flags|=256),D=K0(ee,D,!1),D!==2){if(H0&&!me){ee.errorRecoveryDisabledLanes|=w,ou|=w,v=4;break e}w=zi,zi=v,w!==null&&(zi===null?zi=w:zi.push.apply(zi,w))}v=D}if(w=!1,v!==2)continue}}if(v===1){ph(r,0),fc(r,i,0,!0);break}e:{switch(d=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:fc(d,i,aa,!cc);break e;case 2:zi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(v=s1+300-Ke(),10<v)){if(fc(d,i,aa,!cc),zt(d,0,!0)!==0)break e;Al=i,d.timeoutHandle=zv(hv.bind(null,d,l,zi,a1,G0,i,aa,ou,dh,cc,w,"Throttled",-0,0),v);break e}hv(d,l,zi,a1,G0,i,aa,ou,dh,cc,w,null,-0,0)}}break}while(!0);Po(r)}function hv(r,i,l,d,v,w,D,ee,me,Ie,We,Ze,Fe,Pe){if(r.timeoutHandle=-1,Ze=i.subtreeFlags,Ze&8192||(Ze&16785408)===16785408){Ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},rv(i,w,Ze);var Dt=(w&62914560)===w?s1-Ke():(w&4194048)===w?ov-Ke():0;if(Dt=H_(Ze,Dt),Dt!==null){Al=w,r.cancelPendingCommit=Dt(yv.bind(null,r,i,w,l,d,v,D,ee,me,We,Ze,null,Fe,Pe)),fc(r,w,D,!Ie);return}}yv(r,i,w,l,d,v,D,ee,me)}function a_(r){for(var i=r;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],w=v.getSnapshot;v=v.value;try{if(!Ts(w(),v))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fc(r,i,l,d){i&=~W0,i&=~ou,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var v=i;0<v;){var w=31-vt(v),D=1<<w;d[w]=-1,v&=~D}l!==0&&_t(r,l,i)}function o1(){return(er&6)===0?(Od(0),!1):!0}function Z0(){if(jn!==null){if(sr===0)var r=jn.return;else r=jn,Ca=Mo=null,nh(r),Qe=null,Vt=0,r=jn;for(;r!==null;)qb(r.alternate,r),r=r.return;jn=null}}function ph(r,i){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,C_(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Al=0,Z0(),yr=r,jn=l=Ei(r.current,null),On=i,sr=0,ia=null,cc=!1,hh=wn(r,i),H0=!1,dh=aa=W0=ou=uc=ns=0,zi=Md=null,G0=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var v=31-vt(d),w=1<<v;i|=r[v],d&=~w}return Nl=i,Xc(),l}function dv(r,i){Yt=null,Y.H=Sd,i===be||i===ue?(i=$e(),sr=3):i===Oe?(i=$e(),sr=4):sr=i===k0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ia=i,jn===null&&(ns=1,Zf(r,Mi(i,r.current)))}function fv(){var r=kr.current;return r===null?!0:(On&4194048)===On?qn===null:(On&62914560)===On||(On&536870912)!==0?r===qn:!1}function pv(){var r=Y.H;return Y.H=Sd,r===null?Sd:r}function mv(){var r=Y.A;return Y.A=s_,r}function l1(){ns=4,cc||(On&4194048)!==On&&kr.current!==null||(hh=!0),(uc&134217727)===0&&(ou&134217727)===0||yr===null||fc(yr,On,aa,!1)}function K0(r,i,l){var d=er;er|=2;var v=pv(),w=mv();(yr!==r||On!==i)&&(a1=null,ph(r,i)),i=!1;var D=ns;e:do try{if(sr!==0&&jn!==null){var ee=jn,me=ia;switch(sr){case 8:Z0(),D=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(i=!0);var Ie=sr;if(sr=0,ia=null,mh(r,ee,me,Ie),l&&hh){D=0;break e}break;default:Ie=sr,sr=0,ia=null,mh(r,ee,me,Ie)}}o_(),D=ns;break}catch(We){dv(r,We)}while(!0);return i&&r.shellSuspendCounter++,Ca=Mo=null,er=d,Y.H=v,Y.A=w,jn===null&&(yr=null,On=0,Xc()),D}function o_(){for(;jn!==null;)gv(jn)}function l_(r,i){var l=er;er|=2;var d=pv(),v=mv();yr!==r||On!==i?(a1=null,i1=Ke()+500,ph(r,i)):hh=wn(r,i);e:do try{if(sr!==0&&jn!==null){i=jn;var w=ia;t:switch(sr){case 1:sr=0,ia=null,mh(r,i,w,1);break;case 2:case 9:if(Ce(w)){sr=0,ia=null,bv(i);break}i=function(){sr!==2&&sr!==9||yr!==r||(sr=7),Po(r)},w.then(i,i);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:Ce(w)?(sr=0,ia=null,bv(i)):(sr=0,ia=null,mh(r,i,w,7));break;case 5:var D=null;switch(jn.tag){case 26:D=jn.memoizedState;case 5:case 27:var ee=jn;if(D?n5(D):ee.stateNode.complete){sr=0,ia=null;var me=ee.sibling;if(me!==null)jn=me;else{var Ie=ee.return;Ie!==null?(jn=Ie,c1(Ie)):jn=null}break t}}sr=0,ia=null,mh(r,i,w,5);break;case 6:sr=0,ia=null,mh(r,i,w,6);break;case 8:Z0(),ns=6;break e;default:throw Error(s(462))}}c_();break}catch(We){dv(r,We)}while(!0);return Ca=Mo=null,Y.H=d,Y.A=v,er=l,jn!==null?0:(yr=null,On=0,Xc(),ns)}function c_(){for(;jn!==null&&!ht();)gv(jn)}function gv(r){var i=Pb(r.alternate,r,Nl);r.memoizedProps=r.pendingProps,i===null?c1(r):jn=i}function bv(r){var i=r,l=i.alternate;switch(i.tag){case 15:case 0:i=Db(l,i,i.pendingProps,i.type,void 0,On);break;case 11:i=Db(l,i,i.pendingProps,i.type.render,i.ref,On);break;case 5:nh(i);default:qb(l,i),i=jn=Qc(i,Nl),i=Pb(l,i,Nl)}r.memoizedProps=r.pendingProps,i===null?c1(r):jn=i}function mh(r,i,l,d){Ca=Mo=null,nh(i),Qe=null,Vt=0;var v=i.return;try{if(K4(r,v,i,l,On)){ns=1,Zf(r,Mi(l,r.current)),jn=null;return}}catch(w){if(v!==null)throw jn=v,w;ns=1,Zf(r,Mi(l,r.current)),jn=null;return}i.flags&32768?(kn||d===1?r=!0:hh||(On&536870912)!==0?r=!1:(cc=r=!0,(d===2||d===9||d===3||d===6)&&(d=kr.current,d!==null&&d.tag===13&&(d.flags|=16384))),vv(i,r)):c1(i)}function c1(r){var i=r;do{if((i.flags&32768)!==0){vv(i,cc);return}r=i.return;var l=e_(i.alternate,i,Nl);if(l!==null){jn=l;return}if(i=i.sibling,i!==null){jn=i;return}jn=i=r}while(i!==null);ns===0&&(ns=5)}function vv(r,i){do{var l=t_(r.alternate,r);if(l!==null){l.flags&=32767,jn=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(r=r.sibling,r!==null)){jn=r;return}jn=r=l}while(r!==null);ns=6,jn=null}function yv(r,i,l,d,v,w,D,ee,me){r.cancelPendingCommit=null;do u1();while(Os!==0);if((er&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=qu,Te(r,l,w,D,ee,me),r===yr&&(jn=yr=null,On=0),fh=i,dc=r,Al=l,$0=w,Y0=v,lv=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,f_(dt,function(){return Nv(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,v=ne.p,ne.p=2,D=er,er|=4;try{n_(r,i,l)}finally{er=D,ne.p=v,Y.T=d}}Os=1,xv(),wv(),_v()}}function xv(){if(Os===1){Os=0;var r=dc,i=fh,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var d=ne.p;ne.p=2;var v=er;er|=4;try{ev(i,r);var w=cm,D=Za(r.containerInfo),ee=w.focusedElem,me=w.selectionRange;if(D!==ee&&ee&&ee.ownerDocument&&Xa(ee.ownerDocument.documentElement,ee)){if(me!==null&&Na(ee)){var Ie=me.start,We=me.end;if(We===void 0&&(We=Ie),"selectionStart"in ee)ee.selectionStart=Ie,ee.selectionEnd=Math.min(We,ee.value.length);else{var Ze=ee.ownerDocument||document,Fe=Ze&&Ze.defaultView||window;if(Fe.getSelection){var Pe=Fe.getSelection(),Dt=ee.textContent.length,tn=Math.min(me.start,Dt),fr=me.end===void 0?tn:Math.min(me.end,Dt);!Pe.extend&&tn>fr&&(D=fr,fr=tn,tn=D);var Ne=Kl(ee,tn),ye=Kl(ee,fr);if(Ne&&ye&&(Pe.rangeCount!==1||Pe.anchorNode!==Ne.node||Pe.anchorOffset!==Ne.offset||Pe.focusNode!==ye.node||Pe.focusOffset!==ye.offset)){var Re=Ze.createRange();Re.setStart(Ne.node,Ne.offset),Pe.removeAllRanges(),tn>fr?(Pe.addRange(Re),Pe.extend(ye.node,ye.offset)):(Re.setEnd(ye.node,ye.offset),Pe.addRange(Re))}}}}for(Ze=[],Pe=ee;Pe=Pe.parentNode;)Pe.nodeType===1&&Ze.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<Ze.length;ee++){var Ye=Ze[ee];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}_1=!!lm,cm=lm=null}finally{er=v,ne.p=d,Y.T=l}}r.current=i,Os=2}}function wv(){if(Os===2){Os=0;var r=dc,i=fh,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var d=ne.p;ne.p=2;var v=er;er|=4;try{Xb(r,i.alternate,i)}finally{er=v,ne.p=d,Y.T=l}}Os=3}}function _v(){if(Os===4||Os===3){Os=0,Ae();var r=dc,i=fh,l=Al,d=lv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Os=5:(Os=0,fh=dc=null,Sv(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(hc=null),Qt(l),i=i.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Y.T,v=ne.p,ne.p=2,Y.T=null;try{for(var w=r.onRecoverableError,D=0;D<d.length;D++){var ee=d[D];w(ee.value,{componentStack:ee.stack})}}finally{Y.T=i,ne.p=v}}(Al&3)!==0&&u1(),Po(r),v=r.pendingLanes,(l&261930)!==0&&(v&42)!==0?r===X0?Ld++:(Ld=0,X0=r):Ld=0,Od(0)}}function Sv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,tu(i)))}function u1(){return xv(),wv(),_v(),Nv()}function Nv(){if(Os!==5)return!1;var r=dc,i=$0;$0=0;var l=Qt(Al),d=Y.T,v=ne.p;try{ne.p=32>l?32:l,Y.T=null,l=Y0,Y0=null;var w=dc,D=Al;if(Os=0,fh=dc=null,Al=0,(er&6)!==0)throw Error(s(331));var ee=er;if(er|=4,iv(w.current),nv(w,w.current,D,l),er=ee,Od(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(ct,w)}catch{}return!0}finally{ne.p=v,Y.T=d,Sv(r,i)}}function Av(r,i,l){i=Mi(l,i),i=T0(r.stateNode,i,2),r=xn(r,i,2),r!==null&&(it(r,2),Po(r))}function ir(r,i,l){if(r.tag===3)Av(r,r,l);else for(;i!==null;){if(i.tag===3){Av(i,r,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(hc===null||!hc.has(d))){r=Mi(l,r),l=Cb(2),d=xn(i,l,2),d!==null&&(Tb(l,d,i,r),it(d,2),Po(d));break}}i=i.return}}function Q0(r,i,l){var d=r.pingCache;if(d===null){d=r.pingCache=new i_;var v=new Set;d.set(i,v)}else v=d.get(i),v===void 0&&(v=new Set,d.set(i,v));v.has(l)||(H0=!0,v.add(l),r=u_.bind(null,r,i,l),i.then(r,r))}function u_(r,i,l){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,yr===r&&(On&l)===l&&(ns===4||ns===3&&(On&62914560)===On&&300>Ke()-s1?(er&2)===0&&ph(r,0):W0|=l,dh===On&&(dh=0)),Po(r)}function Cv(r,i){i===0&&(i=yt()),r=Qa(r,i),r!==null&&(it(r,i),Po(r))}function h_(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Cv(r,l)}function d_(r,i){var l=0;switch(r.tag){case 31:case 13:var d=r.stateNode,v=r.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Cv(r,l)}function f_(r,i){return rt(r,i)}var h1=null,gh=null,J0=!1,d1=!1,em=!1,pc=0;function Po(r){r!==gh&&r.next===null&&(gh===null?h1=gh=r:gh=gh.next=r),d1=!0,J0||(J0=!0,m_())}function Od(r,i){if(!em&&d1){em=!0;do for(var l=!1,d=h1;d!==null;){if(r!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var D=d.suspendedLanes,ee=d.pingedLanes;w=(1<<31-vt(42|r)+1)-1,w&=v&~(D&~ee),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,Ev(d,w))}else w=On,w=zt(d,d===yr?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||wn(d,w)||(l=!0,Ev(d,w));d=d.next}while(l);em=!1}}function p_(){Tv()}function Tv(){d1=J0=!1;var r=0;pc!==0&&A_()&&(r=pc);for(var i=Ke(),l=null,d=h1;d!==null;){var v=d.next,w=kv(d,i);w===0?(d.next=null,l===null?h1=v:l.next=v,v===null&&(gh=l)):(l=d,(r!==0||(w&3)!==0)&&(d1=!0)),d=v}Os!==0&&Os!==5||Od(r),pc!==0&&(pc=0)}function kv(r,i){for(var l=r.suspendedLanes,d=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var D=31-vt(w),ee=1<<D,me=v[D];me===-1?((ee&l)===0||(ee&d)!==0)&&(v[D]=Me(ee,i)):me<=i&&(r.expiredLanes|=ee),w&=~ee}if(i=yr,l=On,l=zt(r,r===i?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,l===0||r===i&&(sr===2||sr===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Ue(d),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||wn(r,l)){if(i=l&-l,i===r.callbackPriority)return i;switch(d!==null&&Ue(d),Qt(l)){case 2:case 8:l=st;break;case 32:l=dt;break;case 268435456:l=Nt;break;default:l=dt}return d=jv.bind(null,r),l=rt(l,d),r.callbackPriority=i,r.callbackNode=l,i}return d!==null&&d!==null&&Ue(d),r.callbackPriority=2,r.callbackNode=null,2}function jv(r,i){if(Os!==0&&Os!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(u1()&&r.callbackNode!==l)return null;var d=On;return d=zt(r,r===yr?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(uv(r,d,i),kv(r,Ke()),r.callbackNode!=null&&r.callbackNode===l?jv.bind(null,r):null)}function Ev(r,i){if(u1())return null;uv(r,i,!0)}function m_(){T_(function(){(er&6)!==0?rt(mt,p_):Tv()})}function tm(){if(pc===0){var r=g;r===0&&(r=Bt,Bt<<=1,(Bt&261888)===0&&(Bt=256)),pc=r}return pc}function Mv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:si(""+r)}function Lv(r,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,r.id&&l.setAttribute("form",r.id),i.parentNode.insertBefore(l,i),r=new FormData(r),l.parentNode.removeChild(l),r}function g_(r,i,l,d,v){if(i==="submit"&&l&&l.stateNode===v){var w=Mv((v[Sn]||null).action),D=d.submitter;D&&(i=(i=D[Sn]||null)?Mv(i.formAction):D.getAttribute("formAction"),i!==null&&(w=i,D=null));var ee=new Ti("action","action",null,d,v);r.push({event:ee,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(pc!==0){var me=D?Lv(v,D):new FormData(v);w0(l,{pending:!0,data:me,method:v.method,action:w},null,me)}}else typeof w=="function"&&(ee.preventDefault(),me=D?Lv(v,D):new FormData(v),w0(l,{pending:!0,data:me,method:v.method,action:w},w,me))},currentTarget:v}]})}}for(var nm=0;nm<ul.length;nm++){var rm=ul[nm],b_=rm.toLowerCase(),v_=rm[0].toUpperCase()+rm.slice(1);ji(b_,"on"+v_)}ji(cl,"onAnimationEnd"),ji($c,"onAnimationIteration"),ji(ld,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Vf,"onTransitionRun"),ji(Ff,"onTransitionStart"),ji(Bf,"onTransitionCancel"),ji(cd,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dd));function Ov(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],v=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var D=d.length-1;0<=D;D--){var ee=d[D],me=ee.instance,Ie=ee.currentTarget;if(ee=ee.listener,me!==w&&v.isPropagationStopped())break e;w=ee,v.currentTarget=Ie;try{w(v)}catch(We){Yc(We)}v.currentTarget=null,w=me}else for(D=0;D<d.length;D++){if(ee=d[D],me=ee.instance,Ie=ee.currentTarget,ee=ee.listener,me!==w&&v.isPropagationStopped())break e;w=ee,v.currentTarget=Ie;try{w(v)}catch(We){Yc(We)}v.currentTarget=null,w=me}}}}function En(r,i){var l=i[Ln];l===void 0&&(l=i[Ln]=new Set);var d=r+"__bubble";l.has(d)||(Dv(i,r,2,!1),l.add(d))}function sm(r,i,l){var d=0;i&&(d|=4),Dv(l,r,d,i)}var f1="_reactListening"+Math.random().toString(36).slice(2);function im(r){if(!r[f1]){r[f1]=!0,Hn.forEach(function(l){l!=="selectionchange"&&(y_.has(l)||sm(l,!1,r),sm(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[f1]||(i[f1]=!0,sm("selectionchange",!1,i))}}function Dv(r,i,l,d){switch(c5(i)){case 2:var v=$_;break;case 8:v=Y_;break;default:v=xm}l=v.bind(null,i,l,r),v=void 0,!qc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),d?v!==void 0?r.addEventListener(i,l,{capture:!0,passive:v}):r.addEventListener(i,l,!0):v!==void 0?r.addEventListener(i,l,{passive:v}):r.addEventListener(i,l,!1)}function am(r,i,l,d,v){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var D=d.tag;if(D===3||D===4){var ee=d.stateNode.containerInfo;if(ee===v)break;if(D===4)for(D=d.return;D!==null;){var me=D.tag;if((me===3||me===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;ee!==null;){if(D=Gt(ee),D===null)return;if(me=D.tag,me===5||me===6||me===26||me===27){d=w=D;continue e}ee=ee.parentNode}}d=d.return}Vu(function(){var Ie=w,We=nl(l),Ze=[];e:{var Fe=ud.get(r);if(Fe!==void 0){var Pe=Ti,Dt=r;switch(r){case"keypress":if(Ci(l)===0)break e;case"keydown":case"keyup":Pe=In;break;case"focusin":Dt="focus",Pe=za;break;case"focusout":Dt="blur",Pe=za;break;case"beforeblur":case"afterblur":Pe=za;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Pa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=is;break;case cl:case $c:case ld:Pe=S;break;case cd:Pe=Cs;break;case"scroll":case"scrollend":Pe=Hl;break;case"wheel":Pe=Ji;break;case"copy":case"cut":case"paste":Pe=fe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=Hr;break;case"toggle":case"beforetoggle":Pe=Hc}var tn=(i&4)!==0,fr=!tn&&(r==="scroll"||r==="scrollend"),Ne=tn?Fe!==null?Fe+"Capture":null:Fe;tn=[];for(var ye=Ie,Re;ye!==null;){var Ye=ye;if(Re=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Re===null||Ne===null||(Ye=mi(ye,Ne),Ye!=null&&tn.push(Rd(ye,Ye,Re))),fr)break;ye=ye.return}0<tn.length&&(Fe=new Pe(Fe,Dt,null,l,We),Ze.push({event:Fe,listeners:tn}))}}if((i&7)===0){e:{if(Fe=r==="mouseover"||r==="pointerover",Pe=r==="mouseout"||r==="pointerout",Fe&&l!==Ra&&(Dt=l.relatedTarget||l.fromElement)&&(Gt(Dt)||Dt[tr]))break e;if((Pe||Fe)&&(Fe=We.window===We?We:(Fe=We.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Pe?(Dt=l.relatedTarget||l.toElement,Pe=Ie,Dt=Dt?Gt(Dt):null,Dt!==null&&(fr=o(Dt),tn=Dt.tag,Dt!==fr||tn!==5&&tn!==27&&tn!==6)&&(Dt=null)):(Pe=null,Dt=Ie),Pe!==Dt)){if(tn=Uc,Ye="onMouseLeave",Ne="onMouseEnter",ye="mouse",(r==="pointerout"||r==="pointerover")&&(tn=Hr,Ye="onPointerLeave",Ne="onPointerEnter",ye="pointer"),fr=Pe==null?Fe:At(Pe),Re=Dt==null?Fe:At(Dt),Fe=new tn(Ye,ye+"leave",Pe,l,We),Fe.target=fr,Fe.relatedTarget=Re,Ye=null,Gt(We)===Ie&&(tn=new tn(Ne,ye+"enter",Dt,l,We),tn.target=Re,tn.relatedTarget=fr,Ye=tn),fr=Ye,Pe&&Dt)t:{for(tn=x_,Ne=Pe,ye=Dt,Re=0,Ye=Ne;Ye;Ye=tn(Ye))Re++;Ye=0;for(var Zt=ye;Zt;Zt=tn(Zt))Ye++;for(;0<Re-Ye;)Ne=tn(Ne),Re--;for(;0<Ye-Re;)ye=tn(ye),Ye--;for(;Re--;){if(Ne===ye||ye!==null&&Ne===ye.alternate){tn=Ne;break t}Ne=tn(Ne),ye=tn(ye)}tn=null}else tn=null;Pe!==null&&Rv(Ze,Fe,Pe,tn,!1),Dt!==null&&fr!==null&&Rv(Ze,fr,Dt,tn,!0)}}e:{if(Fe=Ie?At(Ie):window,Pe=Fe.nodeName&&Fe.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Fe.type==="file")var Xn=To;else if(Wc(Fe))if(ii)Xn=_a;else{Xn=Wr;var Ut=Xl}else Pe=Fe.nodeName,!Pe||Pe.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Ie&&Bc(Ie.elementType)&&(Xn=To):Xn=zu;if(Xn&&(Xn=Xn(r,Ie))){bi(Ze,Xn,l,We);break e}Ut&&Ut(r,Fe,Ie),r==="focusout"&&Ie&&Fe.type==="number"&&Ie.memoizedProps.value!=null&&el(Fe,"number",Fe.value)}switch(Ut=Ie?At(Ie):window,r){case"focusin":(Wc(Ut)||Ut.contentEditable==="true")&&(vi=Ut,Ka=Ie,Vs=null);break;case"focusout":Vs=Ka=vi=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,$n(Ze,l,We);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":$n(Ze,l,We)}var _n;if(va)e:{switch(r){case"compositionstart":var Dn="onCompositionStart";break e;case"compositionend":Dn="onCompositionEnd";break e;case"compositionupdate":Dn="onCompositionUpdate";break e}Dn=void 0}else ya?Co(r,l)&&(Dn="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Dn="onCompositionStart");Dn&&(Ha&&l.locale!=="ko"&&(ya||Dn!=="onCompositionStart"?Dn==="onCompositionEnd"&&ya&&(_n=Fu()):(gi=We,sl="value"in gi?gi.value:gi.textContent,ya=!0)),Ut=p1(Ie,Dn),0<Ut.length&&(Dn=new Se(Dn,r,null,l,We),Ze.push({event:Dn,listeners:Ut}),_n?Dn.data=_n:(_n=Gl(l),_n!==null&&(Dn.data=_n)))),(_n=ol?Ys(r,l):Wa(r,l))&&(Dn=p1(Ie,"onBeforeInput"),0<Dn.length&&(Ut=new Se("onBeforeInput","beforeinput",null,l,We),Ze.push({event:Ut,listeners:Dn}),Ut.data=_n)),g_(Ze,r,Ie,l,We)}Ov(Ze,i)})}function Rd(r,i,l){return{instance:r,listener:i,currentTarget:l}}function p1(r,i){for(var l=i+"Capture",d=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=mi(r,l),v!=null&&d.unshift(Rd(r,v,w)),v=mi(r,i),v!=null&&d.push(Rd(r,v,w))),r.tag===3)return d;r=r.return}return[]}function x_(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Rv(r,i,l,d,v){for(var w=i._reactName,D=[];l!==null&&l!==d;){var ee=l,me=ee.alternate,Ie=ee.stateNode;if(ee=ee.tag,me!==null&&me===d)break;ee!==5&&ee!==26&&ee!==27||Ie===null||(me=Ie,v?(Ie=mi(l,w),Ie!=null&&D.unshift(Rd(l,Ie,me))):v||(Ie=mi(l,w),Ie!=null&&D.push(Rd(l,Ie,me)))),l=l.return}D.length!==0&&r.push({event:i,listeners:D})}var w_=/\r\n?/g,__=/\u0000|\uFFFD/g;function Iv(r){return(typeof r=="string"?r:""+r).replace(w_,`
`).replace(__,"")}function Vv(r,i){return i=Iv(i),Iv(r)===i}function dr(r,i,l,d,v,w){switch(l){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Ki(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Ki(r,""+d);break;case"className":ni(r,"class",d);break;case"tabIndex":ni(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(r,l,d);break;case"style":Du(r,d,w);break;case"data":if(i!=="object"){ni(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||l!=="href")){r.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=si(""+d),r.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(i!=="input"&&dr(r,i,"name",v.name,v,null),dr(r,i,"formEncType",v.formEncType,v,null),dr(r,i,"formMethod",v.formMethod,v,null),dr(r,i,"formTarget",v.formTarget,v,null)):(dr(r,i,"encType",v.encType,v,null),dr(r,i,"method",v.method,v,null),dr(r,i,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=si(""+d),r.setAttribute(l,d);break;case"onClick":d!=null&&(r.onclick=Qi);break;case"onScroll":d!=null&&En("scroll",r);break;case"onScrollEnd":d!=null&&En("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}l=si(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""+d):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":d===!0?r.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,d):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(l,d):r.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(l):r.setAttribute(l,d);break;case"popover":En("beforetoggle",r),En("toggle",r),or(r,"popover",d);break;case"xlinkActuate":ri(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ri(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ri(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ri(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ri(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ri(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ri(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ri(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ri(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":or(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Pc.get(l)||l,or(r,l,d))}}function om(r,i,l,d,v,w){switch(l){case"style":Du(r,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof d=="string"?Ki(r,d):(typeof d=="number"||typeof d=="bigint")&&Ki(r,""+d);break;case"onScroll":d!=null&&En("scroll",r);break;case"onScrollEnd":d!=null&&En("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wn.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),i=l.slice(2,v?l.length-7:void 0),w=r[Sn]||null,w=w!=null?w[l]:null,typeof w=="function"&&r.removeEventListener(i,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(i,d,v);break e}l in r?r[l]=d:d===!0?r.setAttribute(l,""):or(r,l,d)}}}function Js(r,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":En("error",r),En("load",r);var d=!1,v=!1,w;for(w in l)if(l.hasOwnProperty(w)){var D=l[w];if(D!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dr(r,i,w,D,l,null)}}v&&dr(r,i,"srcSet",l.srcSet,l,null),d&&dr(r,i,"src",l.src,l,null);return;case"input":En("invalid",r);var ee=w=D=v=null,me=null,Ie=null;for(d in l)if(l.hasOwnProperty(d)){var We=l[d];if(We!=null)switch(d){case"name":v=We;break;case"type":D=We;break;case"checked":me=We;break;case"defaultChecked":Ie=We;break;case"value":w=We;break;case"defaultValue":ee=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(s(137,i));break;default:dr(r,i,d,We,l,null)}}zl(r,w,ee,me,Ie,D,v,!1);return;case"select":En("invalid",r),d=D=w=null;for(v in l)if(l.hasOwnProperty(v)&&(ee=l[v],ee!=null))switch(v){case"value":w=ee;break;case"defaultValue":D=ee;break;case"multiple":d=ee;default:dr(r,i,v,ee,l,null)}i=w,l=D,r.multiple=!!d,i!=null?$s(r,!!d,i,!1):l!=null&&$s(r,!!d,l,!0);return;case"textarea":En("invalid",r),w=v=d=null;for(D in l)if(l.hasOwnProperty(D)&&(ee=l[D],ee!=null))switch(D){case"value":d=ee;break;case"defaultValue":v=ee;break;case"children":w=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(91));break;default:dr(r,i,D,ee,l,null)}Fc(r,d,v,w);return;case"option":for(me in l)if(l.hasOwnProperty(me)&&(d=l[me],d!=null))switch(me){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:dr(r,i,me,d,l,null)}return;case"dialog":En("beforetoggle",r),En("toggle",r),En("cancel",r),En("close",r);break;case"iframe":case"object":En("load",r);break;case"video":case"audio":for(d=0;d<Dd.length;d++)En(Dd[d],r);break;case"image":En("error",r),En("load",r);break;case"details":En("toggle",r);break;case"embed":case"source":case"link":En("error",r),En("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in l)if(l.hasOwnProperty(Ie)&&(d=l[Ie],d!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dr(r,i,Ie,d,l,null)}return;default:if(Bc(i)){for(We in l)l.hasOwnProperty(We)&&(d=l[We],d!==void 0&&om(r,i,We,d,l,void 0));return}}for(ee in l)l.hasOwnProperty(ee)&&(d=l[ee],d!=null&&dr(r,i,ee,d,l,null))}function S_(r,i,l,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,D=null,ee=null,me=null,Ie=null,We=null;for(Pe in l){var Ze=l[Pe];if(l.hasOwnProperty(Pe)&&Ze!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":me=Ze;default:d.hasOwnProperty(Pe)||dr(r,i,Pe,null,d,Ze)}}for(var Fe in d){var Pe=d[Fe];if(Ze=l[Fe],d.hasOwnProperty(Fe)&&(Pe!=null||Ze!=null))switch(Fe){case"type":w=Pe;break;case"name":v=Pe;break;case"checked":Ie=Pe;break;case"defaultChecked":We=Pe;break;case"value":D=Pe;break;case"defaultValue":ee=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(s(137,i));break;default:Pe!==Ze&&dr(r,i,Fe,Pe,d,Ze)}}So(r,D,ee,me,Ie,We,w,v);return;case"select":Pe=D=ee=Fe=null;for(w in l)if(me=l[w],l.hasOwnProperty(w)&&me!=null)switch(w){case"value":break;case"multiple":Pe=me;default:d.hasOwnProperty(w)||dr(r,i,w,null,d,me)}for(v in d)if(w=d[v],me=l[v],d.hasOwnProperty(v)&&(w!=null||me!=null))switch(v){case"value":Fe=w;break;case"defaultValue":ee=w;break;case"multiple":D=w;default:w!==me&&dr(r,i,v,w,d,me)}i=ee,l=D,d=Pe,Fe!=null?$s(r,!!l,Fe,!1):!!d!=!!l&&(i!=null?$s(r,!!l,i,!0):$s(r,!!l,l?[]:"",!1));return;case"textarea":Pe=Fe=null;for(ee in l)if(v=l[ee],l.hasOwnProperty(ee)&&v!=null&&!d.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:dr(r,i,ee,null,d,v)}for(D in d)if(v=d[D],w=l[D],d.hasOwnProperty(D)&&(v!=null||w!=null))switch(D){case"value":Fe=v;break;case"defaultValue":Pe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&dr(r,i,D,v,d,w)}Vc(r,Fe,Pe);return;case"option":for(var Dt in l)if(Fe=l[Dt],l.hasOwnProperty(Dt)&&Fe!=null&&!d.hasOwnProperty(Dt))switch(Dt){case"selected":r.selected=!1;break;default:dr(r,i,Dt,null,d,Fe)}for(me in d)if(Fe=d[me],Pe=l[me],d.hasOwnProperty(me)&&Fe!==Pe&&(Fe!=null||Pe!=null))switch(me){case"selected":r.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:dr(r,i,me,Fe,d,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in l)Fe=l[tn],l.hasOwnProperty(tn)&&Fe!=null&&!d.hasOwnProperty(tn)&&dr(r,i,tn,null,d,Fe);for(Ie in d)if(Fe=d[Ie],Pe=l[Ie],d.hasOwnProperty(Ie)&&Fe!==Pe&&(Fe!=null||Pe!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(s(137,i));break;default:dr(r,i,Ie,Fe,d,Pe)}return;default:if(Bc(i)){for(var fr in l)Fe=l[fr],l.hasOwnProperty(fr)&&Fe!==void 0&&!d.hasOwnProperty(fr)&&om(r,i,fr,void 0,d,Fe);for(We in d)Fe=d[We],Pe=l[We],!d.hasOwnProperty(We)||Fe===Pe||Fe===void 0&&Pe===void 0||om(r,i,We,Fe,d,Pe);return}}for(var Ne in l)Fe=l[Ne],l.hasOwnProperty(Ne)&&Fe!=null&&!d.hasOwnProperty(Ne)&&dr(r,i,Ne,null,d,Fe);for(Ze in d)Fe=d[Ze],Pe=l[Ze],!d.hasOwnProperty(Ze)||Fe===Pe||Fe==null&&Pe==null||dr(r,i,Ze,Fe,d,Pe)}function Fv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function N_(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],w=v.transferSize,D=v.initiatorType,ee=v.duration;if(w&&ee&&Fv(D)){for(D=0,ee=v.responseEnd,d+=1;d<l.length;d++){var me=l[d],Ie=me.startTime;if(Ie>ee)break;var We=me.transferSize,Ze=me.initiatorType;We&&Fv(Ze)&&(me=me.responseEnd,D+=We*(me<ee?1:(ee-Ie)/(me-Ie)))}if(--d,i+=8*(w+D)/(v.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var lm=null,cm=null;function m1(r){return r.nodeType===9?r:r.ownerDocument}function Bv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function um(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hm=null;function A_(){var r=window.event;return r&&r.type==="popstate"?r===hm?!1:(hm=r,!0):(hm=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,C_=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,T_=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(r){return qv.resolve(null).then(r).catch(k_)}:zv;function k_(r){setTimeout(function(){throw r})}function mc(r){return r==="head"}function Uv(r,i){var l=i,d=0;do{var v=l.nextSibling;if(r.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){r.removeChild(v),xh(i);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Id(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Id(l);for(var w=l.firstChild;w;){var D=w.nextSibling,ee=w.nodeName;w[nt]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=D}}else l==="body"&&Id(r.ownerDocument.body);l=v}while(l);xh(i)}function Hv(r,i){var l=r;r=0;do{var d=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=d}while(l)}function dm(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":dm(l),It(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function j_(r,i,l,d){for(;r.nodeType===1;){var v=l;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[nt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=ja(r.nextSibling),r===null)break}return null}function E_(r,i,l){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=ja(r.nextSibling),r===null))return null;return r}function Wv(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=ja(r.nextSibling),r===null))return null;return r}function fm(r){return r.data==="$?"||r.data==="$~"}function pm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function M_(r,i){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||l.readyState!=="loading")i();else{var d=function(){i(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function ja(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var mm=null;function Gv(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(i===0)return ja(r.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}r=r.nextSibling}return null}function $v(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return r;i--}else l!=="/$"&&l!=="/&"||i++}r=r.previousSibling}return null}function Yv(r,i,l){switch(i=m1(l),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Id(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);It(r)}var Ea=new Map,Xv=new Set;function g1(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Cl=ne.d;ne.d={f:L_,r:O_,D:D_,C:R_,L:I_,m:V_,X:B_,S:F_,M:P_};function L_(){var r=Cl.f(),i=o1();return r||i}function O_(r){var i=Ht(r);i!==null&&i.tag===5&&i.type==="form"?db(i):Cl.r(r)}var bh=typeof document>"u"?null:document;function Zv(r,i,l){var d=bh;if(d&&typeof i=="string"&&i){var v=Rr(i);v='link[rel="'+r+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Xv.has(v)||(Xv.add(v),r={rel:r,crossOrigin:l,href:i},d.querySelector(v)===null&&(i=d.createElement("link"),Js(i,"link",r),on(i),d.head.appendChild(i)))}}function D_(r){Cl.D(r),Zv("dns-prefetch",r,null)}function R_(r,i){Cl.C(r,i),Zv("preconnect",r,i)}function I_(r,i,l){Cl.L(r,i,l);var d=bh;if(d&&r&&i){var v='link[rel="preload"][as="'+Rr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Rr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Rr(l.imageSizes)+'"]')):v+='[href="'+Rr(r)+'"]';var w=v;switch(i){case"style":w=vh(r);break;case"script":w=yh(r)}Ea.has(w)||(r=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:r,as:i},l),Ea.set(w,r),d.querySelector(v)!==null||i==="style"&&d.querySelector(Vd(w))||i==="script"&&d.querySelector(Fd(w))||(i=d.createElement("link"),Js(i,"link",r),on(i),d.head.appendChild(i)))}}function V_(r,i){Cl.m(r,i);var l=bh;if(l&&r){var d=i&&typeof i.as=="string"?i.as:"script",v='link[rel="modulepreload"][as="'+Rr(d)+'"][href="'+Rr(r)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=yh(r)}if(!Ea.has(w)&&(r=y({rel:"modulepreload",href:r},i),Ea.set(w,r),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Fd(w)))return}d=l.createElement("link"),Js(d,"link",r),on(d),l.head.appendChild(d)}}}function F_(r,i,l){Cl.S(r,i,l);var d=bh;if(d&&r){var v=an(d).hoistableStyles,w=vh(r);i=i||"default";var D=v.get(w);if(!D){var ee={loading:0,preload:null};if(D=d.querySelector(Vd(w)))ee.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},l),(l=Ea.get(w))&&gm(r,l);var me=D=d.createElement("link");on(me),Js(me,"link",r),me._p=new Promise(function(Ie,We){me.onload=Ie,me.onerror=We}),me.addEventListener("load",function(){ee.loading|=1}),me.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,b1(D,i,d)}D={type:"stylesheet",instance:D,count:1,state:ee},v.set(w,D)}}}function B_(r,i){Cl.X(r,i);var l=bh;if(l&&r){var d=an(l).hoistableScripts,v=yh(r),w=d.get(v);w||(w=l.querySelector(Fd(v)),w||(r=y({src:r,async:!0},i),(i=Ea.get(v))&&bm(r,i),w=l.createElement("script"),on(w),Js(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function P_(r,i){Cl.M(r,i);var l=bh;if(l&&r){var d=an(l).hoistableScripts,v=yh(r),w=d.get(v);w||(w=l.querySelector(Fd(v)),w||(r=y({src:r,async:!0,type:"module"},i),(i=Ea.get(v))&&bm(r,i),w=l.createElement("script"),on(w),Js(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function Kv(r,i,l,d){var v=(v=re.current)?g1(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=vh(l.href),l=an(v).hoistableStyles,d=l.get(i),d||(d={type:"style",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=vh(l.href);var w=an(v).hoistableStyles,D=w.get(r);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,D),(w=v.querySelector(Vd(r)))&&!w._p&&(D.instance=w,D.state.loading=5),Ea.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ea.set(r,l),w||z_(v,r,l,D.state))),i&&d===null)throw Error(s(528,""));return D}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yh(l),l=an(v).hoistableScripts,d=l.get(i),d||(d={type:"script",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function vh(r){return'href="'+Rr(r)+'"'}function Vd(r){return'link[rel="stylesheet"]['+r+"]"}function Qv(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function z_(r,i,l,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Js(i,"link",l),on(i),r.head.appendChild(i))}function yh(r){return'[src="'+Rr(r)+'"]'}function Fd(r){return"script[async]"+r}function Jv(r,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+Rr(l.href)+'"]');if(d)return i.instance=d,on(d),d;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),on(d),Js(d,"style",v),b1(d,l.precedence,r),i.instance=d;case"stylesheet":v=vh(l.href);var w=r.querySelector(Vd(v));if(w)return i.state.loading|=4,i.instance=w,on(w),w;d=Qv(l),(v=Ea.get(v))&&gm(d,v),w=(r.ownerDocument||r).createElement("link"),on(w);var D=w;return D._p=new Promise(function(ee,me){D.onload=ee,D.onerror=me}),Js(w,"link",d),i.state.loading|=4,b1(w,l.precedence,r),i.instance=w;case"script":return w=yh(l.src),(v=r.querySelector(Fd(w)))?(i.instance=v,on(v),v):(d=l,(v=Ea.get(w))&&(d=y({},l),bm(d,v)),r=r.ownerDocument||r,v=r.createElement("script"),on(v),Js(v,"link",d),r.head.appendChild(v),i.instance=v);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,b1(d,l.precedence,r));return i.instance}function b1(r,i,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,D=0;D<d.length;D++){var ee=d[D];if(ee.dataset.precedence===i)w=ee;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(r,i.firstChild))}function gm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function bm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var v1=null;function e5(r,i,l){if(v1===null){var d=new Map,v=v1=new Map;v.set(l,d)}else v=v1,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(r))return d;for(d.set(r,null),l=l.getElementsByTagName(r),v=0;v<l.length;v++){var w=l[v];if(!(w[nt]||w[yn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(i)||"";D=r+D;var ee=d.get(D);ee?ee.push(w):d.set(D,[w])}}return d}function t5(r,i,l){r=r.ownerDocument||r,r.head.insertBefore(l,i==="title"?r.querySelector("head > title"):null)}function q_(r,i,l){if(l===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function n5(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function U_(r,i,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=vh(d.href),w=i.querySelector(Vd(v));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=y1.bind(r),i.then(r,r)),l.state.loading|=4,l.instance=w,on(w);return}w=i.ownerDocument||i,d=Qv(d),(v=Ea.get(v))&&gm(d,v),w=w.createElement("link"),on(w);var D=w;D._p=new Promise(function(ee,me){D.onload=ee,D.onerror=me}),Js(w,"link",d),l.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=y1.bind(r),i.addEventListener("load",l),i.addEventListener("error",l))}}var vm=0;function H_(r,i){return r.stylesheets&&r.count===0&&w1(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var d=setTimeout(function(){if(r.stylesheets&&w1(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+i);0<r.imgBytes&&vm===0&&(vm=62500*N_());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&w1(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>vm?50:800)+i);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function y1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)w1(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var x1=null;function w1(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,x1=new Map,i.forEach(W_,r),x1=null,y1.call(r))}function W_(r,i){if(!(i.state.loading&4)){var l=x1.get(r);if(l)var d=l.get(null);else{l=new Map,x1.set(r,l);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var D=v[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(l.set(D.dataset.precedence,D),d=D)}d&&l.set(null,d)}v=i.instance,D=v.getAttribute("data-precedence"),w=l.get(D)||d,w===d&&l.set(null,v),l.set(D,v),this.count++,d=y1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),i.state.loading|=4}}var Bd={$$typeof:R,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function G_(r,i,l,d,v,w,D,ee,me){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function r5(r,i,l,d,v,w,D,ee,me,Ie,We,Ze){return r=new G_(r,i,l,D,me,Ie,We,Ze,ee),i=1,w===!0&&(i|=24),w=Bs(3,null,null,i),r.current=w,w.stateNode=r,i=rc(),i.refCount++,r.pooledCache=i,i.refCount++,w.memoizedState={element:d,isDehydrated:l,cache:i},wt(w),r}function s5(r){return r?(r=ks,r):ks}function i5(r,i,l,d,v,w){v=s5(v),d.context===null?d.context=v:d.pendingContext=v,d=en(i),d.payload={element:l},w=w===void 0?null:w,w!==null&&(d.callback=w),l=xn(r,d,i),l!==null&&(qi(l,r,i),Qn(l,r,i))}function a5(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function ym(r,i){a5(r,i),(r=r.alternate)&&a5(r,i)}function o5(r){if(r.tag===13||r.tag===31){var i=Qa(r,67108864);i!==null&&qi(i,r,67108864),ym(r,67108864)}}function l5(r){if(r.tag===13||r.tag===31){var i=oa();i=Ct(i);var l=Qa(r,i);l!==null&&qi(l,r,i),ym(r,i)}}var _1=!0;function $_(r,i,l,d){var v=Y.T;Y.T=null;var w=ne.p;try{ne.p=2,xm(r,i,l,d)}finally{ne.p=w,Y.T=v}}function Y_(r,i,l,d){var v=Y.T;Y.T=null;var w=ne.p;try{ne.p=8,xm(r,i,l,d)}finally{ne.p=w,Y.T=v}}function xm(r,i,l,d){if(_1){var v=wm(d);if(v===null)am(r,i,d,S1,l),u5(r,d);else if(Z_(v,r,i,l,d))d.stopPropagation();else if(u5(r,d),i&4&&-1<X_.indexOf(r)){for(;v!==null;){var w=Ht(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=gt(w.pendingLanes);if(D!==0){var ee=w;for(ee.pendingLanes|=2,ee.entangledLanes|=2;D;){var me=1<<31-vt(D);ee.entanglements[1]|=me,D&=~me}Po(w),(er&6)===0&&(i1=Ke()+500,Od(0))}}break;case 31:case 13:ee=Qa(w,2),ee!==null&&qi(ee,w,2),o1(),ym(w,2)}if(w=wm(d),w===null&&am(r,i,d,S1,l),w===v)break;v=w}v!==null&&d.stopPropagation()}else am(r,i,d,null,l)}}function wm(r){return r=nl(r),_m(r)}var S1=null;function _m(r){if(S1=null,r=Gt(r),r!==null){var i=o(r);if(i===null)r=null;else{var l=i.tag;if(l===13){if(r=u(i),r!==null)return r;r=null}else if(l===31){if(r=c(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return S1=r,null}function c5(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bt()){case mt:return 2;case st:return 8;case dt:case pt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var Sm=!1,gc=null,bc=null,vc=null,Pd=new Map,zd=new Map,yc=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u5(r,i){switch(r){case"focusin":case"focusout":gc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":vc=null;break;case"pointerover":case"pointerout":Pd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(i.pointerId)}}function qd(r,i,l,d,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},i!==null&&(i=Ht(i),i!==null&&o5(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),r)}function Z_(r,i,l,d,v){switch(i){case"focusin":return gc=qd(gc,r,i,l,d,v),!0;case"dragenter":return bc=qd(bc,r,i,l,d,v),!0;case"mouseover":return vc=qd(vc,r,i,l,d,v),!0;case"pointerover":var w=v.pointerId;return Pd.set(w,qd(Pd.get(w)||null,r,i,l,d,v)),!0;case"gotpointercapture":return w=v.pointerId,zd.set(w,qd(zd.get(w)||null,r,i,l,d,v)),!0}return!1}function h5(r){var i=Gt(r.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){r.blockedOn=i,nr(r.priority,function(){l5(l)});return}}else if(i===31){if(i=c(l),i!==null){r.blockedOn=i,nr(r.priority,function(){l5(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function N1(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=wm(r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);Ra=d,l.target.dispatchEvent(d),Ra=null}else return i=Ht(l),i!==null&&o5(i),r.blockedOn=l,!1;i.shift()}return!0}function d5(r,i,l){N1(r)&&l.delete(i)}function K_(){Sm=!1,gc!==null&&N1(gc)&&(gc=null),bc!==null&&N1(bc)&&(bc=null),vc!==null&&N1(vc)&&(vc=null),Pd.forEach(d5),zd.forEach(d5)}function A1(r,i){r.blockedOn===i&&(r.blockedOn=null,Sm||(Sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,K_)))}var C1=null;function f5(r){C1!==r&&(C1=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){C1===r&&(C1=null);for(var i=0;i<r.length;i+=3){var l=r[i],d=r[i+1],v=r[i+2];if(typeof d!="function"){if(_m(d||l)===null)continue;break}var w=Ht(l);w!==null&&(r.splice(i,3),i-=3,w0(w,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function xh(r){function i(me){return A1(me,r)}gc!==null&&A1(gc,r),bc!==null&&A1(bc,r),vc!==null&&A1(vc,r),Pd.forEach(i),zd.forEach(i);for(var l=0;l<yc.length;l++){var d=yc[l];d.blockedOn===r&&(d.blockedOn=null)}for(;0<yc.length&&(l=yc[0],l.blockedOn===null);)h5(l),l.blockedOn===null&&yc.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],w=l[d+1],D=v[Sn]||null;if(typeof w=="function")D||f5(l);else if(D){var ee=null;if(w&&w.hasAttribute("formAction")){if(v=w,D=w[Sn]||null)ee=D.formAction;else if(_m(v)!==null)continue}else ee=D.action;typeof ee=="function"?l[d+1]=ee:(l.splice(d,3),d-=3),f5(l)}}}function p5(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(D){return v=D})},focusReset:"manual",scroll:"manual"})}function i(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),v!==null&&(v(),v=null)}}}function Nm(r){this._internalRoot=r}T1.prototype.render=Nm.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,d=oa();i5(l,d,r,i,null,null)},T1.prototype.unmount=Nm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;i5(r.current,2,null,r,null,null),o1(),i[tr]=null}};function T1(r){this._internalRoot=r}T1.prototype.unstable_scheduleHydration=function(r){if(r){var i=cn();r={blockedOn:null,target:r,priority:i};for(var l=0;l<yc.length&&i!==0&&i<yc[l].priority;l++);yc.splice(l,0,r),l===0&&h5(r)}};var m5=e.version;if(m5!=="19.2.0")throw Error(s(527,m5,"19.2.0"));ne.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=f(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var Q_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k1.isDisabled&&k1.supportsFiber)try{ct=k1.inject(Q_),He=k1}catch{}}return Hd.createRoot=function(r,i){if(!a(r))throw Error(s(299));var l=!1,d="",v=_b,w=Sb,D=Nb;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(D=i.onRecoverableError)),i=r5(r,1,!1,null,null,l,d,null,v,w,D,p5),r[tr]=i.current,im(r),new Nm(i)},Hd.hydrateRoot=function(r,i,l){if(!a(r))throw Error(s(299));var d=!1,v="",w=_b,D=Sb,ee=Nb,me=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(ee=l.onRecoverableError),l.formState!==void 0&&(me=l.formState)),i=r5(r,1,!0,i,l??null,d,v,me,w,D,ee,p5),i.context=s5(null),l=i.current,d=oa(),d=Ct(d),v=en(d),v.callback=null,xn(l,v,d),l=d,i.current.lanes=l,it(i,l),Po(i),r[tr]=i.current,im(r),new T1(i)},Hd.version="19.2.0",Hd}var A5;function lS(){if(A5)return Tm.exports;A5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tm.exports=oS(),Tm.exports}var cS=lS(),C5={},uS="@vercel/speed-insights",hS="1.3.1",dS=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function fS(){return typeof window<"u"}function pS(){try{const n="production"}catch{}return"production"}function Hx(){return pS()==="development"}function mS(n){return n.scriptSrc?n.scriptSrc:Hx()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function gS(n={}){var e;if(!fS()||n.route===null)return null;dS();const t=mS(n);if(document.head.querySelector(`script[src*="${t}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const s=document.createElement("script");return s.src=t,s.defer=!0,s.dataset.sdkn=uS+(n.framework?`/${n.framework}`:""),s.dataset.sdkv=hS,n.sampleRate&&(s.dataset.sampleRate=n.sampleRate.toString()),n.route&&(s.dataset.route=n.route),n.endpoint?s.dataset.endpoint=n.endpoint:n.basePath&&(s.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(s.dataset.dsn=n.dsn),Hx()&&n.debug===!1&&(s.dataset.debug="false"),s.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(s),{setRoute:a=>{s.dataset.route=a??void 0}}}function bS(){if(!(typeof process>"u"||typeof C5>"u"))return C5.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function vS(n){K.useEffect(()=>{var t;n.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=K.useRef(null);return K.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const t=gS({framework:n.framework??"react",basePath:n.basePath??bS(),...n});t&&(e.current=t.setRoute)}},[n.route]),null}const T5=n=>{let e;const t=new Set,s=(f,p)=>{const y=typeof f=="function"?f(e):f;if(!Object.is(y,e)){const _=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f))},h=e=n(s,a,c);return c},yS=(n=>n?T5(n):T5),xS=n=>n;function wS(n,e=xS){const t=An.useSyncExternalStore(n.subscribe,An.useCallback(()=>e(n.getState()),[n,e]),An.useCallback(()=>e(n.getInitialState()),[n,e]));return An.useDebugValue(t),t}const _S=n=>{const e=yS(n),t=s=>wS(e,s);return Object.assign(t,e),t},SS=(n=>_S);function NS(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var o;const u=h=>h===null?null:JSON.parse(h,void 0),c=(o=t.getItem(a))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const ig=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return ig(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return ig(s)(t)}}}},AS=(n,e)=>(t,s,a)=>{let o={storage:NS(()=>localStorage),partialize:A=>A,version:0,merge:(A,k)=>({...k,...A}),...e},u=!1;const c=new Set,h=new Set;let f=o.storage;if(!f)return n((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},s,a);const p=()=>{const A=o.partialize({...s()});return f.setItem(o.name,{state:A,version:o.version})},y=a.setState;a.setState=(A,k)=>(y(A,k),p());const _=n((...A)=>(t(...A),p()),s,a);a.getInitialState=()=>_;let b;const N=()=>{var A,k;if(!f)return;u=!1,c.forEach(O=>{var R;return O((R=s())!=null?R:_)});const C=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(A=s())!=null?A:_))||void 0;return ig(f.getItem.bind(f))(o.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==o.version){if(o.migrate){const R=o.migrate(O.state,O.version);return R instanceof Promise?R.then(V=>[!0,V]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var R;const[V,B]=O;if(b=o.merge(B,(R=s())!=null?R:_),t(b,!0),V)return p()}).then(()=>{C?.(b,void 0),b=s(),u=!0,h.forEach(O=>O(b))}).catch(O=>{C?.(void 0,O)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>u,onHydrate:A=>(c.add(A),()=>{c.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||N(),b||_},CS=AS,lo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],gu=["C","G","D","A","E","B","F#","Db","Ab","Eb","Bb","F"],k5={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#","C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},TS=[{major:"C",ii:"Dm",iii:"Em",diminished:"B"},{major:"G",ii:"Am",iii:"Bm",diminished:"F#"},{major:"D",ii:"Em",iii:"F#m",diminished:"C#"},{major:"A",ii:"Bm",iii:"C#m",diminished:"G#"},{major:"E",ii:"F#m",iii:"G#m",diminished:"D#"},{major:"B",ii:"C#m",iii:"D#m",diminished:"A#"},{major:"F#",ii:"G#m",iii:"A#m",diminished:"E#"},{major:"Db",ii:"Ebm",iii:"Fm",diminished:"C"},{major:"Ab",ii:"Bbm",iii:"Cm",diminished:"G"},{major:"Eb",ii:"Fm",iii:"Gm",diminished:"D"},{major:"Bb",ii:"Cm",iii:"Dm",diminished:"A"},{major:"F",ii:"Gm",iii:"Am",diminished:"E"}],kS={major:"",maj:"",minor:"m",diminished:"",dim:"",augmented:"+",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m75",sus2:"sus2",sus4:"sus4",dominant9:"9",dominant11:"11",dominant13:"13",major9:"maj9",minor9:"m9",add9:"add9",6:"6",m6:"m6","7sus4":"7sus4",dominant7sus4:"7sus4"};function Lh(n){return kS[n]??n}function xu(n){return n.includes("b")&&{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E"}[n]||n}const jS={7:"dominant7",9:"dominant9",11:"dominant11",13:"dominant13",maj7:"major7",maj9:"major9",maj11:"major11",maj13:"major13",6:"major6",add9:"add9",m7:"minor7",m9:"minor9",m11:"minor11",m13:"minor13",m6:"minor6",dim:"diminished",dim7:"diminished7",m7b5:"halfDiminished7","m75":"halfDiminished7",7:"halfDiminished7",sus2:"sus2",sus4:"sus4","7sus4":"dominant7sus4"},ES={major:[0,4,7],minor:[0,3,7],diminished:[0,3,6],augmented:[0,4,8],sus2:[0,2,7],sus4:[0,5,7],major6:[0,4,7,9],minor6:[0,3,7,9],major7:[0,4,7,11],minor7:[0,3,7,10],dominant7:[0,4,7,10],diminished7:[0,3,6,9],halfDiminished7:[0,3,6,10],dominant7sus4:[0,5,7,10],add9:[0,4,7,14],major9:[0,4,7,11,14],minor9:[0,3,7,10,14],dominant9:[0,4,7,10,14],major11:[0,4,7,11,14,17],minor11:[0,3,7,10,14,17],dominant11:[0,4,7,10,14,17],major13:[0,4,7,11,14,21],minor13:[0,3,7,10,14,21],dominant13:[0,4,7,10,14,21]};function ca(n,e){const t=xu(n),s=lo.indexOf(t);if(s===-1)return[];const a=jS[e]||e,o=ES[a];return o?o.map(u=>lo[(s+u)%12]):(console.warn(`Unknown chord quality: ${e} (resolved to ${a})`),lo.slice(s,s+1).concat([lo[(s+4)%12],lo[(s+7)%12]]))}function lu(n,e){if(!n||n.length===0)return n;const t=n.length-1,s=Math.max(0,Math.min(e,t));return s===0?n:[...n.slice(s),...n.slice(0,s)]}function MS(n){return Math.max(0,(n?.length||1)-1)}function LS(n){return["Root","1st","2nd","3rd","4th","5th","6th"][n]||`${n}th`}function j5(n,e,t,s){const o=`${n}${e==="major"||e==="maj"?"":e}`;if(!s||s===0||!t||t.length===0)return o;const u=t[s%t.length];return`${o}/${u}`}function ag(n){const e=[0,2,4,5,7,9,11],t=xu(n),s=lo.indexOf(t),a=["F","Bb","Eb","Ab","Db","Gb","Cb"].includes(n);return e.map(o=>{const u=lo[(s+o)%12];return a&&k5[u]&&u.includes("#")?k5[u]:n==="F"&&u==="A#"?"Bb":u})}function Wx(n){const e=["G","D","A","E","B","F#","C#"],t=["F","Bb","Eb","Ab","Db","Gb","Cb"],s=e.indexOf(n),a=t.indexOf(n);return s>=0?{sharps:s+1,flats:0}:a>=0?{sharps:0,flats:a+1}:{sharps:0,flats:0}}function Xh(){return{C:"hsl(48, 95%, 58%)",G:"hsl(72, 75%, 50%)",D:"hsl(95, 65%, 48%)",A:"hsl(160, 60%, 45%)",E:"hsl(185, 70%, 50%)",B:"hsl(205, 75%, 55%)","F#":"hsl(235, 60%, 58%)",Gb:"hsl(235, 60%, 58%)",Db:"hsl(265, 55%, 55%)",Ab:"hsl(285, 50%, 52%)",Eb:"hsl(315, 60%, 55%)",Bb:"hsl(350, 70%, 58%)",F:"hsl(28, 85%, 55%)"}}function OS(n,e){const t=xu(n),s=xu(e),a=lo.indexOf(t),o=lo.indexOf(s);if(a===-1||o===-1)return"?";let u=(o-a+12)%12;return{0:"1",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[u]||"?"}function Mn(n){return n&&n.replace(/([A-G])b/g,"$1")}const ei=[];for(let n=0;n<256;++n)ei.push((n+256).toString(16).slice(1));function DS(n,e=0){return(ei[n[e+0]]+ei[n[e+1]]+ei[n[e+2]]+ei[n[e+3]]+"-"+ei[n[e+4]]+ei[n[e+5]]+"-"+ei[n[e+6]]+ei[n[e+7]]+"-"+ei[n[e+8]]+ei[n[e+9]]+"-"+ei[n[e+10]]+ei[n[e+11]]+ei[n[e+12]]+ei[n[e+13]]+ei[n[e+14]]+ei[n[e+15]]).toLowerCase()}let Mm;const RS=new Uint8Array(16);function IS(){if(!Mm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Mm=crypto.getRandomValues.bind(crypto)}return Mm(RS)}const VS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),E5={randomUUID:VS};function FS(n,e,t){n=n||{};const s=n.random??n.rng?.()??IS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,DS(s)}function Ds(n,e,t){return E5.randomUUID&&!n?E5.randomUUID():FS(n)}function M5(n){if(n.length===0)return"intro";const e=n.map(o=>o.type),t=e[e.length-1],s=e.slice(-4),a=e.reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{});if(t==="intro")return"verse";if(s.length>=4){const[o,u,c,h]=s;if(o==="verse"&&u==="chorus"&&c==="verse"&&h==="chorus"||o==="chorus"&&u==="verse"&&c==="chorus"&&h==="verse")return"bridge"}if(t==="bridge"||t==="verse")return"chorus";if(t==="chorus"){const o=e.includes("bridge"),u=a.chorus||0;return o&&u>=3?"outro":"verse"}return t==="outro"?"verse":t==="pre-chorus"||t==="interlude"||t==="solo"||t==="breakdown"?"chorus":"verse"}const Us=[4,4],Xd=(n=Us)=>{const[e,t]=n;return!e||!t?4:e*(4/t)},du=n=>{const e=Xd(n);return{id:Ds(),beats:[{id:Ds(),chord:null,duration:e}]}},zo=n=>n?`${n.sectionId}:${n.slotId}`:"",Ug=n=>{const e=[];return n.forEach(t=>{t.measures.forEach(s=>{s.beats.forEach(a=>{e.push({sectionId:t.id,slotId:a.id,chord:a.chord??null})})})}),e},cu=(n,e)=>{if(!e)return null;for(const t of n)if(t.id===e.sectionId){for(const s of t.measures)for(const a of s.beats)if(a.id===e.slotId)return a.chord??null}return null},L5=(n,e)=>e?Ug(n).findIndex(s=>s.sectionId===e.sectionId&&s.slotId===e.slotId):-1,BS=(n,e,t)=>{const s=Ug(n),a=s.findIndex(h=>h.sectionId===e.sectionId&&h.slotId===e.slotId),o=s.findIndex(h=>h.sectionId===t.sectionId&&h.slotId===t.slotId);if(a===-1||o===-1)return[];const[u,c]=a<=o?[a,o]:[o,a];return s.slice(u,c+1).map(({sectionId:h,slotId:f})=>({sectionId:h,slotId:f}))},G1=(n,e)=>e?n.some(t=>t.id===e.sectionId&&t.measures.some(s=>s.beats.some(a=>a.id===e.slotId))):!1,uu=(n,e,t,s,a)=>{const o=e&&t?{sectionId:e,slotId:t}:null,u=s.filter(p=>G1(n,p)),c=G1(n,o),h=u[u.length-1]||(c?o:null),f=a&&G1(n,a);return{selectedSectionId:h?.sectionId??null,selectedSlotId:h?.slotId??null,selectedSlots:u,selectionAnchor:f?a:u[0]??h??null}},og=100,Zd=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),Er=n=>{const e=Zd(n.currentSong),t=[...n.historyPast,e].slice(-og);return{historyPast:t,historyFuture:[],canUndo:t.length>0,canRedo:!1}},O5=(n,e,t,s,a)=>{const o=uu(n.sections,e,t,s,a),u=o.selectedSectionId&&o.selectedSlotId?{sectionId:o.selectedSectionId,slotId:o.selectedSlotId}:null,c=u?cu(n.sections,u):null;return{...o,selectedChord:c}},PS=(n,e,t)=>{let s=!1;for(const a of n)for(const o of a.measures)for(const u of o.beats){if(s)return{sectionId:a.id,slotId:u.id};a.id===e&&u.id===t&&(s=!0)}return null},Wd={id:"default",title:"Untitled Song",artist:"",key:"C",tempo:120,timeSignature:[4,4],sections:[{id:"verse-1",name:"Verse 1",type:"verse",timeSignature:Us,measures:Array(4).fill(null).map(()=>du(Us))},{id:"chorus-1",name:"Chorus",type:"chorus",timeSignature:Us,measures:Array(4).fill(null).map(()=>du(Us))}],notes:"",createdAt:new Date,updatedAt:new Date},Lm={root:"C",quality:"major",numeral:"I",notes:["C","E","G"],symbol:"C"},Wt=SS()(CS(n=>({currentSong:Wd,historyPast:[],historyFuture:[],canUndo:!1,canRedo:!1,selectedKey:"C",wheelRotation:0,wheelMode:"fixed",chordPanelVisible:!0,timelineVisible:!0,songMapVisible:!1,songInfoModalVisible:!1,instrumentManagerModalVisible:!1,collapsedSections:{},chordPanelGuitarExpanded:!1,chordPanelVoicingsExpanded:!1,chordPanelAttention:!1,selectedChord:Lm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,isPlaying:!1,playingSectionId:null,playingSlotId:null,isLooping:!1,tempo:120,volume:.8,instrument:"piano",isMuted:!1,customInstruments:[],addCustomInstrument:e=>n(t=>({customInstruments:[...t.customInstruments,e]})),removeCustomInstrument:e=>n(t=>({customInstruments:t.customInstruments.filter(s=>s.id!==e),instrument:t.instrument===e?"piano":t.instrument})),setKey:(e,t)=>n(s=>{if(s.wheelMode==="rotating"&&!t?.skipRotation){const a=gu.indexOf(e);if(a!==-1){const o=s.wheelRotation,c=-(a*30)-o,h=c-360*Math.round(c/360);return{selectedKey:e,wheelRotation:o+h}}}return{selectedKey:e}}),rotateWheel:e=>n(t=>({wheelRotation:t.wheelMode==="rotating"?t.wheelRotation+(e==="cw"?-30:30):0})),toggleWheelMode:()=>n(e=>{const t=e.wheelMode==="rotating"?"fixed":"rotating";let s=0;if(t==="rotating"){const a=gu.indexOf(e.selectedKey);a!==-1&&(s=-(a*30))}return{wheelMode:t,wheelRotation:s}}),toggleChordPanel:()=>n(e=>({chordPanelVisible:!e.chordPanelVisible})),toggleTimeline:()=>n(e=>({timelineVisible:!e.timelineVisible})),openTimeline:()=>n(e=>{if(typeof window<"u"&&window.dispatchEvent(new CustomEvent("openMobileTimeline")),!e.selectedSectionId||!e.selectedSlotId){const t=e.currentSong.sections;if(t.length>0){const s=e.selectedSectionId&&t.find(a=>a.id===e.selectedSectionId)||t[0];if(s.measures.length>0&&s.measures[0].beats.length>0){const a=s.measures[0].beats[0],o={sectionId:s.id,slotId:a.id},u=a.chord??null;return{timelineVisible:!0,selectedSectionId:s.id,selectedSlotId:a.id,selectedSlots:[o],selectionAnchor:o,selectedChord:u}}}}return{timelineVisible:!0}}),toggleSongMap:e=>n(t=>({songMapVisible:e!==void 0?e:!t.songMapVisible})),toggleSongInfoModal:e=>n(t=>({songInfoModalVisible:e!==void 0?e:!t.songInfoModalVisible})),toggleInstrumentManagerModal:e=>n(t=>({instrumentManagerModalVisible:e!==void 0?e:!t.instrumentManagerModalVisible})),toggleSectionCollapsed:e=>n(t=>{const s={...t.collapsedSections,[e]:!t.collapsedSections?.[e]};return s[e]||delete s[e],{collapsedSections:s}}),setChordPanelGuitarExpanded:e=>n({chordPanelGuitarExpanded:e}),setChordPanelVoicingsExpanded:e=>n({chordPanelVoicingsExpanded:e}),pulseChordPanel:()=>{n({chordPanelAttention:!0}),setTimeout(()=>n({chordPanelAttention:!1}),600)},setSelectedChord:e=>n({selectedChord:e}),setSelectedSlot:(e,t)=>n(s=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,selectedChord:null};const a={sectionId:e,slotId:t},o=cu(s.currentSong.sections,a);return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[a],selectionAnchor:a,selectedChord:o??null}}),selectSlotOnly:(e,t)=>n(()=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null};const s={sectionId:e,slotId:t};return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[s],selectionAnchor:s}}),setSelectedSlots:e=>n(t=>{const s=e.filter(Boolean),a=s[s.length-1]??null,o=cu(t.currentSong.sections,a);return{selectedSlots:s,selectedSectionId:a?.sectionId??null,selectedSlotId:a?.slotId??null,selectionAnchor:s[0]??a??null,selectedChord:o??null}}),toggleSlotSelection:(e,t)=>n(s=>{const a=s.selectedSlots.some(f=>f.sectionId===e&&f.slotId===t),o=a?s.selectedSlots.filter(f=>!(f.sectionId===e&&f.slotId===t)):[...s.selectedSlots,{sectionId:e,slotId:t}],u=o[o.length-1]??null,c=cu(s.currentSong.sections,u),h=a&&s.selectionAnchor&&zo(s.selectionAnchor)===zo({sectionId:e,slotId:t});return{selectedSlots:o,selectedSectionId:u?.sectionId??null,selectedSlotId:u?.slotId??null,selectionAnchor:h?o[0]??u??null:s.selectionAnchor??u??null,selectedChord:c??null}}),selectRangeTo:(e,t)=>n(s=>{const a={sectionId:e,slotId:t},o=s.selectionAnchor||s.selectedSlots[s.selectedSlots.length-1]||(s.selectedSectionId&&s.selectedSlotId?{sectionId:s.selectedSectionId,slotId:s.selectedSlotId}:a),c=G1(s.currentSong.sections,o)?o:a,h=BS(s.currentSong.sections,c,a),f=h.length?h:[a],p=cu(s.currentSong.sections,a);return{selectedSlots:f,selectedSectionId:a.sectionId,selectedSlotId:a.slotId,selectionAnchor:c,selectedChord:p??null}}),moveSelection:(e,t,s="move")=>{let a=!1;return n(o=>{const u=Ug(o.currentSong.sections),c=L5(o.currentSong.sections,e),h=L5(o.currentSong.sections,t);if(c===-1||h===-1)return{};const p=(o.selectedSlots.length?o.selectedSlots:[e]).map(L=>{const F=u.findIndex(J=>J.sectionId===L.sectionId&&J.slotId===L.slotId);return F>=0?{idx:F,slot:u[F]}:null}).filter(L=>!!L).sort((L,F)=>L.idx-F.idx);if(!p.length)return{};const y=h-c,_=p.map(({idx:L})=>L+y);if(_.some(L=>L<0||L>=u.length))return{};const b=_.map(L=>u[L]);if(p.length===1&&s==="move"){const L=p[0].slot,F=b[0],J=Er(o),j=o.currentSong.sections.map(Y=>({...Y,measures:Y.measures.map(ne=>({...ne,beats:ne.beats.map(le=>le.id===L.slotId&&Y.id===L.sectionId?{...le,chord:F.chord}:le.id===F.slotId&&Y.id===F.sectionId?{...le,chord:L.chord}:le)}))}));a=!0;const I=o.selectionAnchor&&zo(o.selectionAnchor)===zo(e),X=uu(j,t.sectionId,t.slotId,[{sectionId:F.sectionId,slotId:F.slotId}],I?{sectionId:F.sectionId,slotId:F.slotId}:o.selectionAnchor),P=X.selectedSectionId&&X.selectedSlotId?{sectionId:X.selectedSectionId,slotId:X.selectedSlotId}:null,ie=cu(j,P);return{...J,currentSong:{...o.currentSong,sections:j},selectedSectionId:X.selectedSectionId,selectedSlotId:X.selectedSlotId,selectedSlots:X.selectedSlots,selectionAnchor:X.selectionAnchor,selectedChord:ie??null}}const N=new Map;p.forEach((L,F)=>{N.set(zo(b[F]),L.slot.chord??null)});const A=new Set;s==="move"&&p.forEach((L,F)=>{const J=zo(L.slot),j=zo(b[F]);J!==j&&A.add(J)});const k=Er(o),C=o.currentSong.sections.map(L=>({...L,measures:L.measures.map(F=>({...F,beats:F.beats.map(J=>{const j=zo({sectionId:L.id,slotId:J.id});return N.has(j)?{...J,chord:N.get(j)??null}:A.has(j)?{...J,chord:null}:J})}))}));a=!0;const O=zo(o.selectionAnchor),R=p.find(L=>zo(L.slot)===O),V=R?{sectionId:b[p.indexOf(R)].sectionId,slotId:b[p.indexOf(R)].slotId}:o.selectionAnchor,B=uu(C,t.sectionId,t.slotId,b.map(L=>({sectionId:L.sectionId,slotId:L.slotId})),V??null),U=B.selectedSectionId&&B.selectedSlotId?{sectionId:B.selectedSectionId,slotId:B.selectedSlotId}:null,z=cu(C,U);return{...k,currentSong:{...o.currentSong,sections:C},selectedSectionId:B.selectedSectionId,selectedSlotId:B.selectedSlotId,selectedSlots:B.selectedSlots,selectionAnchor:B.selectionAnchor,selectedChord:z??null}}),a},selectNextSlotAfter:(e,t)=>{let s=!1;return n(a=>{const o=PS(a.currentSong.sections,e,t);if(!o)return{};const u=a.currentSong.sections.find(c=>c.id===o.sectionId)?.measures.flatMap(c=>c.beats).find(c=>c.id===o.slotId)?.chord??null;return s=!0,{selectedSectionId:o.sectionId,selectedSlotId:o.slotId,selectedChord:u,selectedSlots:[{sectionId:o.sectionId,slotId:o.slotId}],selectionAnchor:{sectionId:o.sectionId,slotId:o.slotId}}}),s},setTempo:e=>n(t=>({...Er(t),tempo:e,currentSong:{...t.currentSong,tempo:e}})),setVolume:e=>n({volume:e}),setInstrument:e=>n({instrument:e}),setIsPlaying:e=>n({isPlaying:e}),setPlayingSlot:(e,t)=>n({playingSectionId:e,playingSlotId:t}),toggleLoop:()=>n(e=>({isLooping:!e.isLooping})),toggleMute:()=>n(e=>({isMuted:!e.isMuted})),setTitle:e=>n(t=>({...Er(t),currentSong:{...t.currentSong,title:e}})),setArtist:e=>n(t=>({...Er(t),currentSong:{...t.currentSong,artist:e}})),setTags:e=>n(t=>({...Er(t),currentSong:{...t.currentSong,tags:e}})),setSongTimeSignature:e=>n(t=>({...Er(t),currentSong:{...t.currentSong,timeSignature:e}})),loadSong:e=>n(t=>{const s=e.key||"C",a=e.tempo??Wd.tempo;let o=0;if(t.wheelMode==="rotating"){const c=gu.indexOf(s);c!==-1&&(o=-(c*30))}return{...Er(t),currentSong:{...e,tempo:a},selectedKey:s,wheelRotation:o,selectedChord:Lm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:a}}),newSong:()=>n(e=>({...Er(e),currentSong:{...Wd,id:Ds(),title:"Untitled Song",createdAt:new Date,updatedAt:new Date,tempo:Wd.tempo,sections:[{id:Ds(),name:"Verse 1",type:"verse",timeSignature:Us,measures:Array(4).fill(null).map(()=>du(Us))},{id:Ds(),name:"Chorus",type:"chorus",timeSignature:Us,measures:Array(4).fill(null).map(()=>du(Us))}]},selectedKey:"C",wheelRotation:0,selectedChord:Lm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:Wd.tempo})),addSection:e=>n(t=>{const s={id:Ds(),name:e.charAt(0).toUpperCase()+e.slice(1),type:e,timeSignature:t.currentSong.timeSignature||Us,measures:Array(4).fill(null).map(()=>du(t.currentSong.timeSignature||Us))};return{...Er(t),currentSong:{...t.currentSong,sections:[...t.currentSong.sections,s]}}}),addSuggestedSection:()=>n(e=>{const t=M5(e.currentSong.sections),s={id:Ds(),name:t.charAt(0).toUpperCase()+t.slice(1),type:t,timeSignature:e.currentSong.timeSignature||Us,measures:Array(4).fill(null).map(()=>du(e.currentSong.timeSignature||Us))};return{...Er(e),currentSong:{...e.currentSong,sections:[...e.currentSong.sections,s]}}}),addCustomSection:(e,t,s,a)=>n(o=>{const u=o.currentSong.timeSignature||Us,c=Xd(u),h=a?.beatsPerChord??4,f=c/h;let p;a?.totalBars?p=a.totalBars:f>=1?p=Math.ceil(s.length/f):p=s.length*Math.ceil(1/f);const y=[];if(f>=1)for(let k=0;k<p;k++){const C=[];for(let O=0;O<f;O++){const R=Math.floor(k*f+O);C.push({id:Ds(),chord:s[R]||null,duration:h})}y.push({id:Ds(),beats:C})}else for(let k=0;k<p;k++)y.push({id:Ds(),beats:[{id:Ds(),chord:s[k]||null,duration:c}]});const _={id:Ds(),name:e,type:t,timeSignature:u,measures:y},b=Er(o),N=y[0]?.beats[0]?.id,A=y[0]?.beats[0]?.chord??null;return{...b,currentSong:{...o.currentSong,sections:[...o.currentSong.sections,_]},selectedSectionId:_.id,selectedSlotId:N??null,selectedSlots:N?[{sectionId:_.id,slotId:N}]:[],selectionAnchor:N?{sectionId:_.id,slotId:N}:null,selectedChord:A}}),getSuggestedSectionType:()=>{const e=Wt.getState();return M5(e.currentSong.sections)},updateSection:(e,t)=>n(s=>({...Er(s),currentSong:{...s.currentSong,sections:s.currentSong.sections.map(o=>o.id===e?{...o,...t}:o)}})),removeSection:e=>n(t=>{const s=Er(t),{[e]:a,...o}=t.collapsedSections||{};return{...s,currentSong:{...t.currentSong,sections:t.currentSong.sections.filter(u=>u.id!==e)},collapsedSections:o}}),clearSection:e=>n(t=>{const s=t.currentSong.sections.find(c=>c.id===e);if(!s)return{};if(!s.measures.some(c=>c.beats.some(h=>h.chord!==null)))return{};const o=Er(t),u=t.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>({...f,chord:null}))}))});return{...o,currentSong:{...t.currentSong,sections:u}}}),duplicateSection:e=>n(t=>{const s=t.currentSong.sections.find(p=>p.id===e);if(!s)return{};const a=Er(t),o={...s,id:Ds(),name:`${s.name} (Copy)`,timeSignature:s.timeSignature||t.currentSong.timeSignature||Us,measures:s.measures.map(p=>({...p,id:Ds(),beats:p.beats.map(y=>({...y,id:Ds()}))}))},u=t.currentSong.sections.findIndex(p=>p.id===e),c=[...t.currentSong.sections];c.splice(u+1,0,o);const h=o.measures[0]?.beats[0]?.id,f=o.measures[0]?.beats[0]?.chord??null;return{...a,currentSong:{...t.currentSong,sections:c},selectedSectionId:o.id,selectedSlotId:h??null,selectedSlots:h?[{sectionId:o.id,slotId:h}]:[],selectionAnchor:h?{sectionId:o.id,slotId:h}:null,selectedChord:f}}),reorderSections:e=>n(t=>({...Er(t),currentSong:{...t.currentSong,sections:e}})),setSectionMeasures:(e,t)=>n(s=>{const a=Math.max(1,Math.min(32,Math.round(t))),o=s.currentSong.sections.map(h=>{if(h.id!==e)return h;const f=h.timeSignature||s.currentSong.timeSignature||Us;let p=[...h.measures];if(p.length<a)for(;p.length<a;)p.push(du(f));else p.length>a&&(p=p.slice(0,a));return{...h,measures:p}}),u=uu(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Er(s),currentSong:{...s.currentSong,sections:o},...u}}),setSectionTimeSignature:(e,t)=>n(s=>{const a=s.currentSong.sections.map(c=>{if(c.id!==e)return c;const h=Xd(t);return{...c,timeSignature:t,measures:c.measures.map(f=>({...f,beats:[{id:Ds(),chord:null,duration:h}]}))}}),o=uu(a,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Er(s),currentSong:{...s.currentSong,sections:a},...o}}),setMeasureSubdivision:(e,t,s)=>n(a=>{const o=Math.max(1,Math.min(32,Math.round(s))),u=a.currentSong.sections.map(f=>{if(f.id!==e)return f;const p=f.timeSignature||a.currentSong.timeSignature||Us,y=Xd(p);return{...f,measures:f.measures.map(_=>{if(_.id!==t)return _;const b=y/o,N=Array.from({length:o}).map((A,k)=>{const C=_.beats[k];return{id:C?.id??Ds(),chord:C?.chord??null,duration:b}});return{..._,beats:N}})}}),c=uu(u,a.selectedSectionId,a.selectedSlotId,a.selectedSlots,a.selectionAnchor);return{...Er(a),currentSong:{...a.currentSong,sections:u},...c}}),setSectionSubdivision:(e,t)=>n(s=>{const a=Math.max(1,Math.min(32,Math.round(t))),o=s.currentSong.sections.map(h=>{if(h.id!==e)return h;const f=h.timeSignature||s.currentSong.timeSignature||Us,y=Xd(f)/a;return{...h,measures:h.measures.map(_=>{const b=Array.from({length:a}).map((N,A)=>{const k=_.beats[A];return{id:k?.id??Ds(),chord:k?.chord??null,duration:y}});return{..._,beats:b}})}}),u=uu(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Er(s),currentSong:{...s.currentSong,sections:o},...u}}),addChordToSlot:(e,t,s)=>n(a=>{const o=Er(a),u=a.currentSong.sections.map(c=>c.id!==t?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>f.id!==s?f:{...f,chord:e})}))});return{...o,currentSong:{...a.currentSong,sections:u}}}),clearSlot:(e,t)=>n(s=>{if(!s.currentSong.sections.some(c=>c.id===e&&c.measures.some(h=>h.beats.some(f=>f.id===t&&f.chord))))return{};const o=Er(s),u=s.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>f.id!==t?f:{...f,chord:null})}))});return{...o,currentSong:{...s.currentSong,sections:u}}}),clearTimeline:()=>n(e=>{if(!e.currentSong.sections.some(o=>o.measures.some(u=>u.beats.some(c=>c.chord!==null))))return{};const s=Er(e),a=e.currentSong.sections.map(o=>({...o,measures:o.measures.map(u=>({...u,beats:u.beats.map(c=>({...c,chord:null}))}))}));return{...s,currentSong:{...e.currentSong,sections:a},selectedChord:null}}),moveChord:(e,t,s,a)=>n(o=>{let u=null,c=null;if(o.currentSong.sections.forEach(p=>{p.measures.forEach(y=>{y.beats.forEach(_=>{_.id===t&&(u=_.chord),_.id===a&&(c=_.chord)})})}),!u&&!c)return{};const h=Er(o),f=o.currentSong.sections.map(p=>({...p,measures:p.measures.map(y=>({...y,beats:y.beats.map(_=>_.id===t?{..._,chord:c}:_.id===a?{..._,chord:u}:_)}))}));return{...h,currentSong:{...o.currentSong,sections:f}}}),undo:()=>n(e=>{if(!e.historyPast.length)return{};const t=e.historyPast[e.historyPast.length-1],s=e.historyPast.slice(0,-1),a=[Zd(e.currentSong),...e.historyFuture].slice(0,og),o=O5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Zd(t),historyPast:s,historyFuture:a,canUndo:s.length>0,canRedo:a.length>0,tempo:t.tempo??e.tempo,...o}}),redo:()=>n(e=>{if(!e.historyFuture.length)return{};const t=e.historyFuture[0],s=e.historyFuture.slice(1),a=[...e.historyPast,Zd(e.currentSong)].slice(-og),o=O5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Zd(t),historyPast:a,historyFuture:s,canUndo:a.length>0,canRedo:s.length>0,tempo:t.tempo??e.tempo,...o}})}),{name:"songwriter-wheel-storage",partialize:n=>({currentSong:n.currentSong,tempo:n.tempo,volume:n.volume,instrument:n.instrument,isMuted:n.isMuted})}));function Cc(n,e,t,s){const a=(s-90)*Math.PI/180;return{x:n+t*Math.cos(a),y:e+t*Math.sin(a)}}function zS(n,e,t,s,a){const o=Cc(n,e,t,s),u=Cc(n,e,t,a),c=a-s<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,c,1,u.x,u.y].join(" ")}function qS(n,e,t,s,a,o){const u=Cc(n,e,s,o),c=Cc(n,e,s,a),h=Cc(n,e,t,o),f=Cc(n,e,t,a),p=o-a<=180?"0":"1";return["M",u.x,u.y,"A",s,s,0,p,0,c.x,c.y,"L",f.x,f.y,"A",t,t,0,p,1,h.x,h.y,"Z"].join(" ")}function Gx(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=Gx(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Pt(){for(var n,e,t=0,s="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=Gx(n))&&(s&&(s+=" "),s+=e);return s}const $x="15.1.22",D5=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),R5=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),lg=(n,e)=>({startTime:e,type:"setValue",value:n}),Yx=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Xx=(n,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-n)/a),Th=n=>n.type==="exponentialRampToValue",ip=n=>n.type==="linearRampToValue",Nc=n=>Th(n)||ip(n),Hg=n=>n.type==="setValue",jl=n=>n.type==="setValueCurve",ap=(n,e,t,s)=>{const a=n[e];return a===void 0?s:Nc(a)||Hg(a)?a.value:jl(a)?a.values[a.values.length-1]:Xx(t,ap(n,e-1,a.startTime,s),a)},I5=(n,e,t,s,a)=>t===void 0?[s.insertTime,a]:Nc(t)?[t.endTime,t.value]:Hg(t)?[t.startTime,t.value]:jl(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,ap(n,e-1,t.startTime,a)],cg=n=>n.type==="cancelAndHold",ug=n=>n.type==="cancelScheduledValues",wc=n=>cg(n)||ug(n)?n.cancelTime:Th(n)||ip(n)?n.endTime:n.startTime,V5=(n,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((n-e)/(s-e)):0,F5=(n,e,t,{endTime:s,value:a})=>t+(n-e)/(s-e)*(a-t),US=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},HS=(n,{duration:e,startTime:t,values:s})=>{const a=(n-t)/e*(s.length-1);return US(s,a)},E1=n=>n.type==="setTarget";class WS{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=wc(e);if(cg(e)||ug(e)){const s=this._automationEvents.findIndex(o=>ug(e)&&jl(o)?o.startTime+o.duration>=t:wc(o)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),cg(e)){const o=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&Nc(a)){if(o!==void 0&&E1(o))throw new Error("The internal list is malformed.");const u=o===void 0?a.insertTime:jl(o)?o.startTime+o.duration:wc(o),c=o===void 0?this._defaultValue:jl(o)?o.values[o.values.length-1]:o.value,h=Th(a)?V5(t,u,c,a):F5(t,u,c,a),f=Th(a)?D5(h,t,this._currenTime):R5(h,t,this._currenTime);this._automationEvents.push(f)}if(o!==void 0&&E1(o)&&this._automationEvents.push(lg(this.getValue(t),t)),o!==void 0&&jl(o)&&o.startTime+o.duration>t){const u=t-o.startTime,c=(o.values.length-1)/o.duration,h=Math.max(2,1+Math.ceil(u*c)),f=u/(h-1)*c,p=o.values.slice(0,h);if(f<1)for(let y=1;y<h;y+=1){const _=f*y%1;p[y]=o.values[y-1]*(1-_)+o.values[y]*_}this._automationEvents[this._automationEvents.length-1]=Yx(p,o.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>wc(u)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&jl(a)&&wc(a)+a.duration>t)return!1;const o=Th(e)?D5(e.value,e.endTime,this._currenTime):ip(e)?R5(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(o);else{if(jl(e)&&t+e.duration>wc(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,o)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>wc(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];E1(a)&&s.unshift(lg(ap(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>wc(u)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,o=this._automationEvents[a];if(o!==void 0&&E1(o)&&(s===void 0||!Nc(s)||s.insertTime>e))return Xx(e,ap(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(o!==void 0&&Hg(o)&&(s===void 0||!Nc(s)))return o.value;if(o!==void 0&&jl(o)&&(s===void 0||!Nc(s)||o.startTime+o.duration>e))return e<o.startTime+o.duration?HS(e,o):o.values[o.values.length-1];if(o!==void 0&&Nc(o)&&(s===void 0||!Nc(s)))return o.value;if(s!==void 0&&Th(s)){const[u,c]=I5(this._automationEvents,a,o,s,this._defaultValue);return V5(e,u,c,s)}if(s!==void 0&&ip(s)){const[u,c]=I5(this._automationEvents,a,o,s,this._defaultValue);return F5(e,u,c,s)}return this._defaultValue}}const GS=n=>({cancelTime:n,type:"cancelAndHold"}),$S=n=>({cancelTime:n,type:"cancelScheduledValues"}),YS=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),XS=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),ZS=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),KS=()=>new DOMException("","AbortError"),QS=n=>(e,t,[s,a,o],u)=>{n(e[a],[t,s,o],c=>c[0]===t&&c[1]===s,u)},JS=n=>(e,t,s)=>{const a=[];for(let o=0;o<s.numberOfInputs;o+=1)a.push(new Set);n.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},e6=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},qh=new WeakSet,Zx=new WeakMap,Wg=new WeakMap,Kx=new WeakMap,Gg=new WeakMap,Fp=new WeakMap,Qx=new WeakMap,hg=new WeakMap,dg=new WeakMap,fg=new WeakMap,Jx={construct(){return Jx}},t6=n=>{try{const e=new Proxy(n,Jx);new e}catch{return!1}return!0},B5=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,P5=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),a=s.match(B5);for(;a!==null;){const o=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());t.push(u),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(B5)}return[t.join(";"),s]},z5=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},q5=n=>{if(!t6(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},n6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>{let b=0;return(N,A,k={credentials:"omit"})=>{const C=p.get(N);if(C!==void 0&&C.has(A))return Promise.resolve();const O=f.get(N);if(O!==void 0){const B=O.get(A);if(B!==void 0)return B}const R=o(N),V=R.audioWorklet===void 0?a(A).then(([B,U])=>{const[z,L]=P5(B,U),F=`${z};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${L}
})})(window,'_AWGS')`;return t(F)}).then(()=>{const B=_._AWGS.pop();if(B===void 0)throw new SyntaxError;s(R.currentTime,R.sampleRate,()=>B(class{},void 0,(U,z)=>{if(U.trim()==="")throw e();const L=dg.get(R);if(L!==void 0){if(L.has(U))throw e();q5(z),z5(z.parameterDescriptors),L.set(U,z)}else q5(z),z5(z.parameterDescriptors),dg.set(R,new Map([[U,z]]))},R.sampleRate,void 0,void 0))}):Promise.all([a(A),Promise.resolve(n(y,y))]).then(([[B,U],z])=>{const L=b+1;b=L;const[F,J]=P5(B,U),P=`${F};((AudioWorkletProcessor,registerProcessor)=>{${J}
})(${z?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${z?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${z?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${L}',class extends AudioWorkletProcessor{process(){return !1}})`,ie=new Blob([P],{type:"application/javascript; charset=utf-8"}),Y=URL.createObjectURL(ie);return R.audioWorklet.addModule(Y,k).then(()=>{if(c(R))return R;const ne=u(R);return ne.audioWorklet.addModule(Y,k).then(()=>ne)}).then(ne=>{if(h===null)throw new SyntaxError;try{new h(ne,`__sac${L}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Y))});return O===void 0?f.set(N,new Map([[A,V]])):O.set(A,V),V.then(()=>{const B=p.get(N);B===void 0?p.set(N,new Set([A])):B.add(A)}).finally(()=>{const B=f.get(N);B!==void 0&&B.delete(A)}),V}},fo=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Bp=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},ew=(n,e,t,s)=>{const a=fo(n,e),o=Bp(a,u=>u[0]===t&&u[1]===s);return a.size===0&&n.delete(e),o},vf=n=>fo(Qx,n),Uh=n=>{if(qh.has(n))throw new Error("The AudioNode is already stored.");qh.add(n),vf(n).forEach(e=>e(!0))},tw=n=>"port"in n,yf=n=>{if(!qh.has(n))throw new Error("The AudioNode is not stored.");qh.delete(n),vf(n).forEach(e=>e(!1))},pg=(n,e)=>{!tw(n)&&e.every(t=>t.size===0)&&yf(n)},r6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>{const b=new WeakMap;return(N,A,k,C,O)=>{const{activeInputs:R,passiveInputs:V}=o(A),{outputs:B}=o(N),U=c(N),z=L=>{const F=h(A),J=h(N);if(L){const j=ew(V,N,k,C);n(R,N,j,!1),!O&&!y(N)&&t(J,F,k,C),_(A)&&Uh(A)}else{const j=s(R,N,k,C);e(V,C,j,!1),!O&&!y(N)&&a(J,F,k,C);const I=u(A);if(I===0)p(A)&&pg(A,R);else{const X=b.get(A);X!==void 0&&clearTimeout(X),b.set(A,setTimeout(()=>{p(A)&&pg(A,R)},I*1e3))}}};return f(B,[A,k,C],L=>L[0]===A&&L[1]===k&&L[2]===C,!0)?(U.add(z),p(N)?n(R,N,[k,C,z],!0):e(V,C,[N,k,z],!0),!0):!1}},s6=n=>(e,t,[s,a,o],u)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[a,t,o]])):n(c,[a,t,o],h=>h[0]===a&&h[1]===t,u)},i6=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},a6=n=>(e,t)=>{n(e).add(t)},o6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},l6=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...o6,...h},y=s(f,p),_=o(f)?e():null;super(c,!1,y,_),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=h,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},fi=(n,e)=>n.context===e,c6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!fi(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},op=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Zo=()=>new DOMException("","IndexSizeError"),$g=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Zo():s}})(n.getChannelData)},u6={numberOfChannels:1},h6=(n,e,t,s,a,o,u,c)=>{let h=null;return class nw{constructor(p){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:_,sampleRate:b}={...u6,...p};h===null&&(h=new a(1,1,44100));const N=s!==null&&e(o,o)?new s({length:y,numberOfChannels:_,sampleRate:b}):h.createBuffer(_,y,b);if(N.numberOfChannels===0)throw t();return typeof N.copyFromChannel!="function"?(u(N),$g(N)):e(op,()=>op(N))||c(N),n.add(N),N}static[Symbol.hasInstance](p){return p!==null&&typeof p=="object"&&Object.getPrototypeOf(p)===nw.prototype||n.has(p)}}},Hi=-34028234663852886e22,_i=-Hi,Ml=n=>qh.has(n),d6={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},f6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...d6,...p},b=a(y,_),N=u(y),A=N?e():null;super(f,!1,b,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=_.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,N,b.playbackRate,_i,Hi)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const p=typeof f=="function"?c(this,f):null;this._nativeAudioBufferSourceNode.onended=p;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===p?f:y}get playbackRate(){return this._playbackRate}start(f=0,p=0,y){if(this._nativeAudioBufferSourceNode.start(f,p,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[f,p]:[f,p,y]),this.context.state!=="closed"){Uh(this);const _=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",_),Ml(this)&&yf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",_)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},p6=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const h=async(f,p)=>{let y=t(f);const _=fi(y,p);if(!_){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=e(p,b),u!==null&&y.start(...u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,f.playbackRate,y.playbackRate):await s(p,f.playbackRate,y.playbackRate),await a(f,p,y),y};return{set start(f){u=f},set stop(f){c=f},render(f,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):h(f,p)}}},m6=n=>"playbackRate"in n,g6=n=>"frequency"in n&&"gain"in n,b6=n=>"offset"in n,v6=n=>!("frequency"in n)&&"gain"in n,y6=n=>"detune"in n&&"frequency"in n&&!("gain"in n),x6=n=>"pan"in n,Si=n=>fo(Zx,n),xf=n=>fo(Kx,n),mg=(n,e)=>{const{activeInputs:t}=Si(n);t.forEach(a=>a.forEach(([o])=>{e.includes(n)||mg(o,[...e,n])}));const s=m6(n)?[n.playbackRate]:tw(n)?Array.from(n.parameters.values()):g6(n)?[n.Q,n.detune,n.frequency,n.gain]:b6(n)?[n.offset]:v6(n)?[n.gain]:y6(n)?[n.detune,n.frequency]:x6(n)?[n.pan]:[];for(const a of s){const o=xf(a);o!==void 0&&o.activeInputs.forEach(([u])=>mg(u,e))}Ml(n)&&yf(n)},rw=n=>{mg(n.destination,[])},w6=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),_6=(n,e,t,s,a,o,u,c,h)=>class extends n{constructor(p={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new h(p)}catch(N){throw N.code===12&&N.message==="sampleRate is not in range"?t():N}if(y===null)throw s();if(!w6(p.latencyHint))throw new TypeError(`The provided value '${p.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(p.sampleRate!==void 0&&y.sampleRate!==p.sampleRate)throw t();super(y,2);const{latencyHint:_}=p,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:_==="balanced"?512/b:_==="interactive"||_===void 0?256/b:_==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(_*b/128)))*128/b,this._nativeAudioContext=y,h.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const N=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",N)};y.addEventListener("statechange",N)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),rw(this)}))}createMediaElementSource(p){return new a(this,{mediaElement:p})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(p){return new u(this,{mediaStream:p})}createMediaStreamTrackSource(p){return new c(this,{mediaStreamTrack:p})}resume(){return this._state==="suspended"?new Promise((p,y)=>{const _=()=>{this._nativeAudioContext.removeEventListener("statechange",_),this._nativeAudioContext.state==="running"?p():this.resume().then(p,y)};this._nativeAudioContext.addEventListener("statechange",_)}):this._nativeAudioContext.resume().catch(p=>{throw p===void 0||p.code===15?e():p})}suspend(){return this._nativeAudioContext.suspend().catch(p=>{throw p===void 0?e():p})}},S6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_=u(y),b=a(y,p,_),N=_?e(c):null;super(f,!1,b,N),this._isNodeOfNativeOfflineAudioContext=_,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},N6=n=>{const e=new WeakMap,t=async(s,a)=>{const o=a.destination;return e.set(a,o),await n(s,a,o),o};return{render(s,a){const o=e.get(a);return o!==void 0?Promise.resolve(o):t(s,a)}}},A6=(n,e,t,s,a,o,u,c)=>(h,f)=>{const p=f.listener,y=()=>{const B=new Float32Array(1),U=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),z=u(f);let L=!1,F=[0,0,-1,0,1,0],J=[0,0,0];const j=()=>{if(L)return;L=!0;const ie=s(f,256,9,0);ie.onaudioprocess=({inputBuffer:Y})=>{const ne=[o(Y,B,0),o(Y,B,1),o(Y,B,2),o(Y,B,3),o(Y,B,4),o(Y,B,5)];ne.some((pe,we)=>pe!==F[we])&&(p.setOrientation(...ne),F=ne);const le=[o(Y,B,6),o(Y,B,7),o(Y,B,8)];le.some((pe,we)=>pe!==J[we])&&(p.setPosition(...le),J=le)},U.connect(ie)},I=ie=>Y=>{Y!==F[ie]&&(F[ie]=Y,p.setOrientation(...F))},X=ie=>Y=>{Y!==J[ie]&&(J[ie]=Y,p.setPosition(...J))},P=(ie,Y,ne)=>{const le=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y});le.connect(U,0,ie),le.start(),Object.defineProperty(le.offset,"defaultValue",{get(){return Y}});const pe=n({context:h},z,le.offset,_i,Hi);return c(pe,"value",we=>()=>we.call(pe),we=>q=>{try{we.call(pe,q)}catch(E){if(E.code!==9)throw E}j(),z&&ne(q)}),pe.cancelAndHoldAtTime=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.cancelAndHoldAtTime),pe.cancelScheduledValues=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.cancelScheduledValues),pe.exponentialRampToValueAtTime=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.exponentialRampToValueAtTime),pe.linearRampToValueAtTime=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.linearRampToValueAtTime),pe.setTargetAtTime=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.setTargetAtTime),pe.setValueAtTime=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.setValueAtTime),pe.setValueCurveAtTime=(we=>z?()=>{throw a()}:(...q)=>{const E=we.apply(pe,q);return j(),E})(pe.setValueCurveAtTime),pe};return{forwardX:P(0,0,I(0)),forwardY:P(1,0,I(1)),forwardZ:P(2,-1,I(2)),positionX:P(6,0,X(0)),positionY:P(7,0,X(1)),positionZ:P(8,0,X(2)),upX:P(3,0,I(3)),upY:P(4,1,I(4)),upZ:P(5,0,I(5))}},{forwardX:_,forwardY:b,forwardZ:N,positionX:A,positionY:k,positionZ:C,upX:O,upY:R,upZ:V}=p.forwardX===void 0?y():p;return{get forwardX(){return _},get forwardY(){return b},get forwardZ(){return N},get positionX(){return A},get positionY(){return k},get positionZ(){return C},get upX(){return O},get upY(){return R},get upZ(){return V}}},lp=n=>"context"in n,wf=n=>lp(n[0]),Au=(n,e,t,s)=>{for(const a of n)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},U5=(n,e,[t,s],a)=>{Au(n,[e,t,s],o=>o[0]===e&&o[1]===t,a)},H5=(n,[e,t,s],a)=>{const o=n.get(e);o===void 0?n.set(e,new Set([[t,s]])):Au(o,[t,s],u=>u[0]===t,a)},Zh=n=>"inputs"in n,cp=(n,e,t,s)=>{if(Zh(e)){const a=e.inputs[s];return n.connect(a,t,0),[a,t,0]}return n.connect(e,t,s),[e,t,s]},sw=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},C6=(n,e,t)=>Bp(n,s=>s[0]===e&&s[1]===t),iw=(n,e)=>{if(!vf(n).delete(e))throw new Error("Missing the expected event listener.")},aw=(n,e,t)=>{const s=fo(n,e),a=Bp(s,o=>o[0]===t);return s.size===0&&n.delete(e),a},up=(n,e,t,s)=>{Zh(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Or=n=>fo(Wg,n),af=n=>fo(Gg,n),wu=n=>hg.has(n),$1=n=>!qh.has(n),W5=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),a=n.createGain(),o=n.createBuffer(1,2,44100),u=o.getChannelData(0);u[0]=1,u[1]=1;const c=n.createBufferSource();c.buffer=o,c.loop=!0,c.connect(s).connect(n.destination),c.connect(a),c.disconnect(a),s.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,p=>p===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(n.destination)},c.start()}}),Om=(n,e)=>{const t=new Map;for(const s of n)for(const a of s){const o=t.get(a);t.set(a,o===void 0?1:o+1)}t.forEach((s,a)=>e(a,s))},hp=n=>"context"in n,T6=n=>{const e=new Map;n.connect=(t=>(s,a=0,o=0)=>{const u=hp(s)?t(s,a,o):t(s,a),c=e.get(s);return c===void 0?e.set(s,[{input:o,output:a}]):c.every(h=>h.input!==o||h.output!==a)&&c.push({input:o,output:a}),u})(n.connect.bind(n)),n.disconnect=(t=>(s,a,o)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[u,c]of e){const h=c.filter(f=>f.output!==s);h.length===0?e.delete(u):e.set(u,h)}else if(e.has(s))if(a===void 0)e.delete(s);else{const u=e.get(s);if(u!==void 0){const c=u.filter(h=>h.output!==a&&(h.input!==o||o===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[u,c]of e)c.forEach(h=>{hp(u)?n.connect(u,h.output,h.input):n.connect(u,h.output)})})(n.disconnect)},k6=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=xf(e),{outputs:u}=Si(n),c=vf(n),h=f=>{const p=Or(n),y=af(e);if(f){const _=aw(o,n,t);U5(a,n,_,!1),!s&&!wu(n)&&p.connect(y,t)}else{const _=C6(a,n,t);H5(o,_,!1),!s&&!wu(n)&&p.disconnect(y,t)}};return Au(u,[e,t],f=>f[0]===e&&f[1]===t,!0)?(c.add(h),Ml(n)?U5(a,n,[t,h],!0):H5(o,[n,t,h],!0),!0):!1},j6=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=Si(e),u=sw(a[s],n,t);return u===null?[ew(o,n,t,s)[2],!1]:[u[2],!0]},E6=(n,e,t)=>{const{activeInputs:s,passiveInputs:a}=xf(e),o=sw(s,n,t);return o===null?[aw(a,n,t)[1],!1]:[o[2],!0]},Yg=(n,e,t,s,a)=>{const[o,u]=j6(n,t,s,a);if(o!==null&&(iw(n,o),u&&!e&&!wu(n)&&up(Or(n),Or(t),s,a)),Ml(t)){const{activeInputs:c}=Si(t);pg(t,c)}},Xg=(n,e,t,s)=>{const[a,o]=E6(n,t,s);a!==null&&(iw(n,a),o&&!e&&!wu(n)&&Or(n).disconnect(af(t),s))},M6=(n,e)=>{const t=Si(n),s=[];for(const a of t.outputs)wf(a)?Yg(n,e,...a):Xg(n,e,...a),s.push(a[0]);return t.outputs.clear(),s},L6=(n,e,t)=>{const s=Si(n),a=[];for(const o of s.outputs)o[1]===t&&(wf(o)?Yg(n,e,...o):Xg(n,e,...o),a.push(o[0]),s.outputs.delete(o));return a},O6=(n,e,t,s,a)=>{const o=Si(n);return Array.from(o.outputs).filter(u=>u[0]===t&&(s===void 0||u[1]===s)&&(a===void 0||u[2]===a)).map(u=>(wf(u)?Yg(n,e,...u):Xg(n,e,...u),o.outputs.delete(u),u[0]))},D6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,N,A)=>class extends f{constructor(C,O,R,V){super(R),this._context=C,this._nativeAudioNode=R;const B=p(C);y(B)&&t(W5,()=>W5(B,A))!==!0&&T6(R),Wg.set(this,R),Qx.set(this,new Set),C.state!=="closed"&&O&&Uh(this),n(this,V,R)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,O=0,R=0){if(O<0||O>=this._nativeAudioNode.numberOfOutputs)throw a();const V=p(this._context),B=N(V);if(_(C)||b(C))throw o();if(lp(C)){const L=Or(C);try{const J=cp(this._nativeAudioNode,L,O,R),j=$1(this);(B||j)&&this._nativeAudioNode.disconnect(...J),this.context.state!=="closed"&&!j&&$1(C)&&Uh(C)}catch(J){throw J.code===12?o():J}if(e(this,C,O,R,B)){const J=h([this],C);Om(J,s(B))}return C}const U=af(C);if(U.name==="playbackRate"&&U.maxValue===1024)throw u();try{this._nativeAudioNode.connect(U,O),(B||$1(this))&&this._nativeAudioNode.disconnect(U,O)}catch(L){throw L.code===12?o():L}if(k6(this,C,O,B)){const L=h([this],C);Om(L,s(B))}}disconnect(C,O,R){let V;const B=p(this._context),U=N(B);if(C===void 0)V=M6(this,U);else if(typeof C=="number"){if(C<0||C>=this.numberOfOutputs)throw a();V=L6(this,U,C)}else{if(O!==void 0&&(O<0||O>=this.numberOfOutputs)||lp(C)&&R!==void 0&&(R<0||R>=C.numberOfInputs))throw a();if(V=O6(this,U,C,O,R),V.length===0)throw o()}for(const z of V){const L=h([this],z);Om(L,c)}}},R6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>(b,N,A,k=null,C=null)=>{const O=A.value,R=new WS(O),V=N?s(R):null,B={get defaultValue(){return O},get maxValue(){return k===null?A.maxValue:k},get minValue(){return C===null?A.minValue:C},get value(){return A.value},set value(U){A.value=U,B.setValueAtTime(U,b.context.currentTime)},cancelAndHoldAtTime(U){if(typeof A.cancelAndHoldAtTime=="function")V===null&&R.flush(b.context.currentTime),R.add(a(U)),A.cancelAndHoldAtTime(U);else{const z=Array.from(R).pop();V===null&&R.flush(b.context.currentTime),R.add(a(U));const L=Array.from(R).pop();A.cancelScheduledValues(U),z!==L&&L!==void 0&&(L.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(L.value,L.endTime):L.type==="linearRampToValue"?A.linearRampToValueAtTime(L.value,L.endTime):L.type==="setValue"?A.setValueAtTime(L.value,L.startTime):L.type==="setValueCurve"&&A.setValueCurveAtTime(L.values,L.startTime,L.duration))}return B},cancelScheduledValues(U){return V===null&&R.flush(b.context.currentTime),R.add(o(U)),A.cancelScheduledValues(U),B},exponentialRampToValueAtTime(U,z){if(U===0)throw new RangeError;if(!Number.isFinite(z)||z<0)throw new RangeError;const L=b.context.currentTime;return V===null&&R.flush(L),Array.from(R).length===0&&(R.add(f(O,L)),A.setValueAtTime(O,L)),R.add(u(U,z)),A.exponentialRampToValueAtTime(U,z),B},linearRampToValueAtTime(U,z){const L=b.context.currentTime;return V===null&&R.flush(L),Array.from(R).length===0&&(R.add(f(O,L)),A.setValueAtTime(O,L)),R.add(c(U,z)),A.linearRampToValueAtTime(U,z),B},setTargetAtTime(U,z,L){return V===null&&R.flush(b.context.currentTime),R.add(h(U,z,L)),A.setTargetAtTime(U,z,L),B},setValueAtTime(U,z){return V===null&&R.flush(b.context.currentTime),R.add(f(U,z)),A.setValueAtTime(U,z),B},setValueCurveAtTime(U,z,L){const F=U instanceof Float32Array?U:new Float32Array(U);if(y!==null&&y.name==="webkitAudioContext"){const J=z+L,j=b.context.sampleRate,I=Math.ceil(z*j),X=Math.floor(J*j),P=X-I,ie=new Float32Array(P);for(let ne=0;ne<P;ne+=1){const le=(F.length-1)/L*((I+ne)/j-z),pe=Math.floor(le),we=Math.ceil(le);ie[ne]=pe===we?F[pe]:(1-(le-pe))*F[pe]+(1-(we-le))*F[we]}V===null&&R.flush(b.context.currentTime),R.add(p(ie,z,L)),A.setValueCurveAtTime(ie,z,L);const Y=X/j;Y<J&&_(B,ie[ie.length-1],Y),_(B,F[F.length-1],J)}else V===null&&R.flush(b.context.currentTime),R.add(p(F,z,L)),A.setValueCurveAtTime(F,z,L);return B}};return t.set(B,A),e.set(B,b),n(B,V),B},I6=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:o}=t;e.setTargetAtTime(a,s,o)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:o}=t;e.setValueCurveAtTime(o,a,s)}else throw new Error("Can't apply an unknown automation.")}});class ow{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const V6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},F6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b)=>class extends e{constructor(A,k,C){var O;const R=c(A),V=h(R),B=p({...V6,...C});_(B);const U=dg.get(R),z=U?.get(k),L=V||R.state!=="closed"?R:(O=u(R))!==null&&O!==void 0?O:R,F=a(L,V?null:A.baseLatency,f,k,z,B),J=V?s(k,B,z):null;super(A,!0,F,J);const j=[];F.parameters.forEach((X,P)=>{const ie=t(this,V,X);j.push([P,ie])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new ow(j),V&&n(R,this);const{activeInputs:I}=o(this);y(F,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const k=typeof A=="function"?b(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=k;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=C!==null&&C===k?A:C}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function dp(n,e,t,s,a){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,a);else{const o=n.getChannelData(s);if(e[t].byteLength===0)e[t]=o.slice(a,a+128);else{const u=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const lw=(n,e,t,s,a)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,a):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],a)},fp=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const a=[],o=typeof e=="number"?e:e[s];for(let u=0;u<o;u+=1)a.push(new Float32Array(128));t.push(a)}return t},B6=(n,e)=>{const t=fo(fg,n),s=Or(e);return fo(t,s)},P6=async(n,e,t,s,a,o,u)=>{const c=e===null?Math.ceil(n.context.length/128)*128:e.length,h=s.channelCount*s.numberOfInputs,f=a.reduce((k,C)=>k+C,0),p=f===0?null:t.createBuffer(f,c,t.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const y=Si(n),_=await B6(t,n),b=fp(s.numberOfInputs,s.channelCount),N=fp(s.numberOfOutputs,a),A=Array.from(n.parameters.keys()).reduce((k,C)=>({...k,[C]:new Float32Array(128)}),{});for(let k=0;k<c;k+=128){if(s.numberOfInputs>0&&e!==null)for(let C=0;C<s.numberOfInputs;C+=1)for(let O=0;O<s.channelCount;O+=1)dp(e,b[C],O,O,k);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:C},O)=>{dp(e,A,C,h+O,k)});for(let C=0;C<s.numberOfInputs;C+=1)for(let O=0;O<a[C];O+=1)N[C][O].byteLength===0&&(N[C][O]=new Float32Array(128));try{const C=b.map((R,V)=>y.activeInputs[V].size===0?[]:R),O=u(k/t.sampleRate,t.sampleRate,()=>_.process(C,N,A));if(p!==null)for(let R=0,V=0;R<s.numberOfOutputs;R+=1){for(let B=0;B<a[R];B+=1)lw(p,N[R],B,V+B,k);V+=a[R]}if(!O)break}catch(C){n.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}));break}}return p},z6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,N,A)=>(k,C,O)=>{const R=new WeakMap;let V=null;const B=async(U,z)=>{let L=p(U),F=null;const J=fi(L,z),j=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(y===null){const I=j.reduce((Y,ne)=>Y+ne,0),X=a(z,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),P=[];for(let Y=0;Y<U.numberOfOutputs;Y+=1)P.push(s(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:j[Y]}));const ie=u(z,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});ie.connect=e.bind(null,P),ie.disconnect=h.bind(null,P),F=[X,P,ie]}else J||(L=new y(z,k));if(R.set(z,F===null?L:F[2]),F!==null){if(V===null){if(O===void 0)throw new Error("Missing the processor constructor.");if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ne=U.channelCount*U.numberOfInputs,le=O.parameterDescriptors===void 0?0:O.parameterDescriptors.length,pe=ne+le;V=P6(U,pe===0?null:await(async()=>{const q=new _(pe,Math.ceil(U.context.length/128)*128,z.sampleRate),E=[],$=[];for(let re=0;re<C.numberOfInputs;re+=1)E.push(u(q,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),$.push(a(q,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const te=await Promise.all(Array.from(U.parameters.values()).map(async re=>{const de=o(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:re.value});return await b(q,re,de.offset),de})),ae=s(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ne+le)});for(let re=0;re<C.numberOfInputs;re+=1){E[re].connect($[re]);for(let de=0;de<C.channelCount;de+=1)$[re].connect(ae,de,re*C.channelCount+de)}for(const[re,de]of te.entries())de.connect(ae,0,ne+re),de.start(0);return ae.connect(q.destination),await Promise.all(E.map(re=>N(U,q,re))),A(q)})(),z,C,j,O,f)}const I=await V,X=t(z,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[P,ie,Y]=F;I!==null&&(X.buffer=I,X.start(0)),X.connect(P);for(let ne=0,le=0;ne<U.numberOfOutputs;ne+=1){const pe=ie[ne];for(let we=0;we<j[ne];we+=1)P.connect(pe,le+we,we);le+=j[ne]}return Y}if(J)for(const[I,X]of U.parameters.entries())await n(z,X,L.parameters.get(I));else for(const[I,X]of U.parameters.entries())await b(z,X,L.parameters.get(I));return await N(U,z,L),L};return{render(U,z){c(z,U);const L=R.get(z);return L!==void 0?Promise.resolve(L):B(U,z)}}},q6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,N,A,k,C,O,R)=>class extends N{constructor(B,U){super(B,U),this._nativeContext=B,this._audioWorklet=n===void 0?void 0:{addModule:(z,L)=>n(this,z,L)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(B,U,z){return new t({length:U,numberOfChannels:B,sampleRate:z})}createBufferSource(){return new s(this)}createChannelMerger(B=6){return new o(this,{numberOfInputs:B})}createChannelSplitter(B=6){return new u(this,{numberOfOutputs:B})}createConstantSource(){return new c(this)}createConvolver(){return new h(this)}createDelay(B=1){return new p(this,{maxDelayTime:B})}createDynamicsCompressor(){return new y(this)}createGain(){return new _(this)}createIIRFilter(B,U){return new b(this,{feedback:U,feedforward:B})}createOscillator(){return new A(this)}createPanner(){return new k(this)}createPeriodicWave(B,U,z={disableNormalization:!1}){return new C(this,{...z,imag:U,real:B})}createStereoPanner(){return new O(this)}createWaveShaper(){return new R(this)}decodeAudioData(B,U,z){return f(this._nativeContext,B).then(L=>(typeof U=="function"&&U(L),L),L=>{throw typeof z=="function"&&z(L),L})}},U6={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},H6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...U6,...p},b=a(y,_),N=u(y),A=N?t():null;super(f,!1,b,A),this._Q=e(this,N,b.Q,_i,Hi),this._detune=e(this,N,b.detune,1200*Math.log2(_i),-1200*Math.log2(_i)),this._frequency=e(this,N,b.frequency,f.sampleRate/2,0),this._gain=e(this,N,b.gain,40*Math.log10(_i),Hi),this._nativeBiquadFilterNode=b,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,p,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,p,y)}catch(_){throw _.code===11?s():_}if(f.length!==p.length||p.length!==y.length)throw s()}},W6=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=fi(f,h);if(!p){const y={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(h,y)}return o.set(h,f),p?(await n(h,c.Q,f.Q),await n(h,c.detune,f.detune),await n(h,c.frequency,f.frequency),await n(h,c.gain,f.gain)):(await s(h,c.Q,f.Q),await s(h,c.detune,f.detune),await s(h,c.frequency,f.frequency),await s(h,c.gain,f.gain)),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},G6=(n,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const o=n.get(t);if(o!==void 0)return o;try{const u=s();return u instanceof Promise?(n.set(t,u),u.catch(()=>!1).then(c=>(n.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},$6={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Y6=(n,e,t,s,a)=>class extends n{constructor(u,c){const h=s(u),f={...$6,...c},p=t(h,f),y=a(h)?e():null;super(u,!1,p,y)}},X6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!fi(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},Z6={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},K6=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p=o({...Z6,...h}),y=t(f,p),_=a(f)?e():null;super(c,!1,y,_)}},Q6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!fi(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},J6=n=>(e,t,s)=>n(t,e,s),eN=n=>(e,t,s=0,a=0)=>{const o=e[s];if(o===void 0)throw n();return hp(t)?o.connect(t,0,a):o.connect(t,0)},tN=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},nN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},rN=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...nN,...f},_=s(p,y),b=o(p),N=b?t():null;super(h,!1,_,N),this._constantSourceNodeRenderer=N,this._nativeConstantSourceNode=_,this._offset=e(this,b,_.offset,_i,Hi),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeConstantSourceNode.onended=f;const p=this._nativeConstantSourceNode.onended;this._onended=p!==null&&p===f?h:p}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){Uh(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),Ml(this)&&yf(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},sN=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const h=async(f,p)=>{let y=t(f);const _=fi(y,p);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=e(p,b),u!==null&&y.start(u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,f.offset,y.offset):await s(p,f.offset,y.offset),await a(f,p,y),y};return{set start(f){u=f},set stop(f){c=f},render(f,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):h(f,p)}}},iN=n=>e=>(n[0]=e,n[0]),aN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},oN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p={...aN,...h},y=t(f,p),b=a(f)?e():null;super(c,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,p.buffer!==null&&o(this,p.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},lN=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!fi(c,u)){const f={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=n(u,f)}return s.set(u,c),Zh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},cN=(n,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(o){throw o.name==="SyntaxError"?n():o}},uN=()=>new DOMException("","DataCloneError"),G5=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(n,[n])}catch{}finally{a()}})},hN=(n,e,t,s,a,o,u,c,h,f,p)=>(y,_)=>{const b=u(y)?y:o(y);if(a.has(_)){const N=t();return Promise.reject(N)}try{a.add(_)}catch{}return e(h,()=>h(b))?b.decodeAudioData(_).then(N=>(G5(_).catch(()=>{}),e(c,()=>c(N))||p(N),n.add(N),N)):new Promise((N,A)=>{const k=async()=>{try{await G5(_)}catch{}},C=O=>{A(O),k()};try{b.decodeAudioData(_,O=>{typeof O.copyFromChannel!="function"&&(f(O),$g(O)),n.add(O),k().then(()=>N(O))},O=>{C(O===null?s():O)})}catch(O){C(O)}})},dN=(n,e,t,s,a,o,u,c)=>(h,f)=>{const p=e.get(h);if(p===void 0)throw new Error("Missing the expected cycle count.");const y=o(h.context),_=c(y);if(p===f){if(e.delete(h),!_&&u(h)){const b=s(h),{outputs:N}=t(h);for(const A of N)if(wf(A)){const k=s(A[0]);n(b,k,A[1],A[2])}else{const k=a(A[0]);b.connect(k,A[1])}}}else e.set(h,p-f)},fN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},pN=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...fN,...f},_=s(p,y),b=o(p),N=b?t(y.maxDelayTime):null;super(h,!1,_,N),this._delayTime=e(this,b,_.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},mN=(n,e,t,s,a)=>o=>{const u=new WeakMap,c=async(h,f)=>{let p=t(h);const y=fi(p,f);if(!y){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,delayTime:p.delayTime.value,maxDelayTime:o};p=e(f,_)}return u.set(f,p),y?await n(f,h.delayTime,p.delayTime):await s(f,h.delayTime,p.delayTime),await a(h,f,p),p};return{render(h,f){const p=u.get(f);return p!==void 0?Promise.resolve(p):c(h,f)}}},gN=n=>(e,t,s,a)=>n(e[a],o=>o[0]===t&&o[1]===s),bN=n=>(e,t)=>{n(e).delete(t)},vN=n=>"delayTime"in n,yN=(n,e,t)=>function s(a,o){const u=lp(o)?o:t(n,o);if(vN(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(h=>s([...a,u],h[0])).reduce((h,f)=>h.concat(f),[])},M1=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},xN=n=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(o=>o.disconnect()):typeof t=="number"?M1(n,e,t).disconnect():hp(t)?s===void 0?e.forEach(o=>o.disconnect(t)):a===void 0?M1(n,e,s).disconnect(t,0):M1(n,e,s).disconnect(t,0,a):s===void 0?e.forEach(o=>o.disconnect(t)):M1(n,e,s).disconnect(t,0),wN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},_N=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...wN,...p},b=s(y,_),N=u(y),A=N?t():null;super(f,!1,b,A),this._attack=e(this,N,b.attack),this._knee=e(this,N,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,N,b.ratio),this._release=e(this,N,b.release),this._threshold=e(this,N,b.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const p=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=p,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const p=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=p,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},SN=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=fi(f,h);if(!p){const y={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(h,y)}return o.set(h,f),p?(await n(h,c.attack,f.attack),await n(h,c.knee,f.knee),await n(h,c.ratio,f.ratio),await n(h,c.release,f.release),await n(h,c.threshold,f.threshold)):(await s(h,c.attack,f.attack),await s(h,c.knee,f.knee),await s(h,c.ratio,f.ratio),await s(h,c.release,f.release),await s(h,c.threshold,f.threshold)),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},NN=()=>new DOMException("","EncodingError"),AN=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const a=n.document.head;if(a===null)s(new SyntaxError);else{const o=n.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),h=n.onerror,f=()=>{n.onerror=h,URL.revokeObjectURL(c)};n.onerror=(p,y,_,b,N)=>{if(y===c||y===n.location.href&&_===1&&b===1)return f(),s(N),!1;if(h!==null)return h(p,y,_,b,N)},o.onerror=()=>{f(),s(new SyntaxError)},o.onload=()=>{f(),t()},o.src=c,o.type="module",a.appendChild(o)}}),CN=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let o=this._listeners.get(s);o===void 0&&(o=n(this,s),typeof s=="function"&&this._listeners.set(s,o)),this._nativeEventTarget.addEventListener(t,o,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const o=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,o===void 0?null:o,a)}},TN=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},kN=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},jN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},EN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...jN,...h},y=s(f,p),_=o(f),b=_?t():null;super(c,!1,y,b),this._gain=e(this,_,y.gain,_i,Hi)}get gain(){return this._gain}},MN=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=fi(f,h);if(!p){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(h,y)}return o.set(h,f),p?await n(h,c.gain,f.gain):await s(h,c.gain,f.gain),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},LN=(n,e)=>t=>e(n,t),ON=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},DN=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},RN=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},IN=n=>e=>n.get(e),Gs=()=>new DOMException("","InvalidStateError"),VN=n=>e=>{const t=n.get(e);if(t===void 0)throw Gs();return t},FN=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},BN=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Pp=()=>new DOMException("","InvalidAccessError"),PN=n=>{n.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw Pp();return e.call(n,t,s,a)})(n.getFrequencyResponse)},zN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},qN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p=a(f),y={...zN,...h},_=e(f,p?null:c.baseLatency,y),b=p?t(y.feedback,y.feedforward):null;super(c,!1,_,b),PN(_),this._nativeIIRFilterNode=_,o(this,1)}getFrequencyResponse(c,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(c,h,f)}},cw=(n,e,t,s,a,o,u,c,h,f,p)=>{const y=f.length;let _=c;for(let b=0;b<y;b+=1){let N=t[0]*f[b];for(let A=1;A<a;A+=1){const k=_-A&h-1;N+=t[A]*o[k],N-=n[A]*u[k]}for(let A=a;A<s;A+=1)N+=t[A]*o[_-A&h-1];for(let A=a;A<e;A+=1)N-=n[A]*u[_-A&h-1];o[_]=f[b],u[_]=N,_=_+1&h-1,p[b]=N}return _},UN=(n,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),o=s instanceof Float64Array?s:new Float64Array(s),u=a.length,c=o.length,h=Math.min(u,c);if(a[0]!==1){for(let N=0;N<u;N+=1)o[N]/=a[0];for(let N=1;N<c;N+=1)a[N]/=a[0]}const f=32,p=new Float32Array(f),y=new Float32Array(f),_=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),b=n.numberOfChannels;for(let N=0;N<b;N+=1){const A=n.getChannelData(N),k=_.getChannelData(N);p.fill(0),y.fill(0),cw(a,u,o,c,h,p,y,0,f,A,k)}return _},HN=(n,e,t,s,a)=>(o,u)=>{const c=new WeakMap;let h=null;const f=async(p,y)=>{let _=null,b=e(p);const N=fi(b,y);if(y.createIIRFilter===void 0?_=n(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):N||(b=y.createIIRFilter(u,o)),c.set(y,_===null?b:_),_!==null){if(h===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new t(p.context.destination.channelCount,p.context.length,y.sampleRate);h=(async()=>{await s(p,k,k.destination);const C=await a(k);return UN(C,y,o,u)})()}const A=await h;return _.buffer=A,_.start(0),_}return await s(p,y,b),b};return{render(p,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):f(p,y)}}},WN=(n,e,t,s,a,o)=>u=>(c,h)=>{const f=n.get(c);if(f===void 0){if(!u&&o(c)){const p=s(c),{outputs:y}=t(c);for(const _ of y)if(wf(_)){const b=s(_[0]);e(p,b,_[1],_[2])}else{const b=a(_[0]);p.disconnect(b,_[1])}}n.set(c,h)}else n.set(c,f+h)},GN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},$N=(n,e)=>t=>n.has(t)||e(t),YN=(n,e)=>t=>n.has(t)||e(t),XN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},ZN=n=>e=>n!==null&&e instanceof n,KN=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,QN=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,JN=(n,e)=>t=>n(t)||e(t),eA=n=>e=>n!==null&&e instanceof n,tA=n=>n!==null&&n.isSecureContext,nA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),h=e(c,u);if(s(c))throw TypeError();super(o,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},rA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},sA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o);if(s(c))throw new TypeError;const h={...rA,...u},f=e(c,h);super(o,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},iA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),h=e(c,u);if(s(c))throw new TypeError;super(o,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},aA=(n,e,t)=>class extends n{constructor(a,o){const u=t(a),c=e(u,o);super(a,!0,c,null)}},oA=(n,e,t,s,a,o)=>class extends t{constructor(c,h){super(c),this._nativeContext=c,Fp.set(this,c),s(c)&&a.set(c,new Set),this._destination=new n(this,h),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const h=typeof c=="function"?o(this,c):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===h?c:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},of=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},lA=(n,e)=>(t,s,a)=>{const o=new Set;return t.connect=(u=>(c,h=0,f=0)=>{const p=o.size===0;if(e(c))return u.call(t,c,h,f),n(o,[c,h,f],y=>y[0]===c&&y[1]===h&&y[2]===f,!0),p&&s(),c;u.call(t,c,h),n(o,[c,h],y=>y[0]===c&&y[1]===h,!0),p&&s()})(t.connect),t.disconnect=(u=>(c,h,f)=>{const p=o.size>0;if(c===void 0)u.apply(t),o.clear();else if(typeof c=="number"){u.call(t,c);for(const _ of o)_[1]===c&&o.delete(_)}else{e(c)?u.call(t,c,h,f):u.call(t,c,h);for(const _ of o)_[0]===c&&(h===void 0||_[1]===h)&&(f===void 0||_[2]===f)&&o.delete(_)}const y=o.size===0;p&&y&&a()})(t.disconnect),t},zr=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},Is=(n,e)=>{zr(n,e,"channelCount"),zr(n,e,"channelCountMode"),zr(n,e,"channelInterpretation")},$5=n=>typeof n.getFloatTimeDomainData=="function",cA=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},uA=(n,e)=>(t,s)=>{const a=t.createAnalyser();if(Is(a,s),!(s.maxDecibels>s.minDecibels))throw e();return zr(a,s,"fftSize"),zr(a,s,"maxDecibels"),zr(a,s,"minDecibels"),zr(a,s,"smoothingTimeConstant"),n($5,()=>$5(a))||cA(a),a},hA=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,ss=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},dA=n=>{n.start=(e=>{let t=!1;return(s=0,a=0,o)=>{if(t)throw Gs();e.call(n,s,a,o),t=!0}})(n.start)},Zg=n=>{n.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,a)})(n.start)},Kg=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},fA=(n,e,t,s,a,o,u,c,h,f,p)=>(y,_)=>{const b=y.createBufferSource();return Is(b,_),ss(b,_,"playbackRate"),zr(b,_,"buffer"),zr(b,_,"loop"),zr(b,_,"loopEnd"),zr(b,_,"loopStart"),e(t,()=>t(y))||dA(b),e(s,()=>s(y))||h(b),e(a,()=>a(y))||f(b,y),e(o,()=>o(y))||Zg(b),e(u,()=>u(y))||p(b,y),e(c,()=>c(y))||Kg(b),n(y,b),b},pA=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,mA=(n,e)=>(t,s,a)=>{const o=t.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}a&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:s});const u=n(t,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>h=>{c.call(u,h);try{o.channelCount=h}catch(f){if(h>o.maxChannelCount)throw f}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>h=>{c.call(u,h),o.channelCountMode=h}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>h=>{c.call(u,h),o.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>o.maxChannelCount}),u.connect(o),u},gA=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,bA=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},vA=(n,e,t,s,a)=>(o,u,c,h,f,p)=>{if(c!==null)try{const y=new c(o,h,p),_=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>p.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>b,set:N=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof N=="function"?N:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(N=>(...A)=>{if(A[0]==="processorerror"){const k=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(k!==null){const C=_.get(A[1]);C!==void 0?A[1]=C:(A[1]=O=>{O.type==="error"?(Object.defineProperties(O,{type:{value:"processorerror"}}),k(O)):k(new ErrorEvent(A[0],{...O}))},_.set(k,A[1]))}}return N.call(y,"error",A[1],A[2]),N.call(y,...A)})(y.addEventListener),y.removeEventListener=(N=>(...A)=>{if(A[0]==="processorerror"){const k=_.get(A[1]);k!==void 0&&(_.delete(A[1]),A[1]=k)}return N.call(y,"error",A[1],A[2]),N.call(y,A[0],A[1],A[2])})(y.removeEventListener),p.numberOfOutputs!==0){const N=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(N).connect(o.destination),a(y,()=>N.disconnect(),()=>N.connect(o.destination))}return y}catch(y){throw y.code===11?s():y}if(f===void 0)throw s();return bA(p),e(o,u,f,p)},uw=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),yA=n=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:o})=>{s.close(),a.close(),e(o)},s.onmessageerror=({data:o})=>{s.close(),a.close(),t(o)},a.postMessage(n)}),xA=async(n,e)=>{const t=await yA(e);return new n(t)},wA=(n,e,t,s)=>{let a=fg.get(n);a===void 0&&(a=new WeakMap,fg.set(n,a));const o=xA(t,s);return a.set(e,o),o},_A=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>(b,N,A,k)=>{if(k.numberOfInputs===0&&k.numberOfOutputs===0)throw h();const C=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(C.some(G=>G<1))throw h();if(C.length!==k.numberOfOutputs)throw e();if(k.channelCountMode!=="explicit")throw h();const O=k.channelCount*k.numberOfInputs,R=C.reduce((G,Ee)=>G+Ee,0),V=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(O+V>6||R>6)throw h();const B=new MessageChannel,U=[],z=[];for(let G=0;G<k.numberOfInputs;G+=1)U.push(u(b,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),z.push(a(b,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const L=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:G,maxValue:Ee,minValue:xt,name:et}of A.parameterDescriptors){const De=o(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k.parameterData[et]!==void 0?k.parameterData[et]:G===void 0?0:G});Object.defineProperties(De.offset,{defaultValue:{get:()=>G===void 0?0:G},maxValue:{get:()=>Ee===void 0?_i:Ee},minValue:{get:()=>xt===void 0?Hi:xt}}),L.push(De)}const F=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,O+V)}),J=uw(N,b.sampleRate),j=c(b,J,O+V,Math.max(1,R)),I=a(b,{channelCount:Math.max(1,R),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,R)}),X=[];for(let G=0;G<k.numberOfOutputs;G+=1)X.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[G]}));for(let G=0;G<k.numberOfInputs;G+=1){U[G].connect(z[G]);for(let Ee=0;Ee<k.channelCount;Ee+=1)z[G].connect(F,Ee,G*k.channelCount+Ee)}const P=new ow(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:G},Ee)=>{const xt=L[Ee];return xt.connect(F,0,O+Ee),xt.start(0),[G,xt.offset]}));F.connect(j);let ie=k.channelInterpretation,Y=null;const ne=k.numberOfOutputs===0?[j]:X,le={get bufferSize(){return J},get channelCount(){return k.channelCount},set channelCount(G){throw t()},get channelCountMode(){return k.channelCountMode},set channelCountMode(G){throw t()},get channelInterpretation(){return ie},set channelInterpretation(G){for(const Ee of U)Ee.channelInterpretation=G;ie=G},get context(){return j.context},get inputs(){return U},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get onprocessorerror(){return Y},set onprocessorerror(G){typeof Y=="function"&&le.removeEventListener("processorerror",Y),Y=typeof G=="function"?G:null,typeof Y=="function"&&le.addEventListener("processorerror",Y)},get parameters(){return P},get port(){return B.port2},addEventListener(...G){return j.addEventListener(G[0],G[1],G[2])},connect:n.bind(null,ne),disconnect:f.bind(null,ne),dispatchEvent(...G){return j.dispatchEvent(G[0])},removeEventListener(...G){return j.removeEventListener(G[0],G[1],G[2])}},pe=new Map;B.port1.addEventListener=(G=>(...Ee)=>{if(Ee[0]==="message"){const xt=typeof Ee[1]=="function"?Ee[1]:typeof Ee[1]=="object"&&Ee[1]!==null&&typeof Ee[1].handleEvent=="function"?Ee[1].handleEvent:null;if(xt!==null){const et=pe.get(Ee[1]);et!==void 0?Ee[1]=et:(Ee[1]=De=>{p(b.currentTime,b.sampleRate,()=>xt(De))},pe.set(xt,Ee[1]))}}return G.call(B.port1,Ee[0],Ee[1],Ee[2])})(B.port1.addEventListener),B.port1.removeEventListener=(G=>(...Ee)=>{if(Ee[0]==="message"){const xt=pe.get(Ee[1]);xt!==void 0&&(pe.delete(Ee[1]),Ee[1]=xt)}return G.call(B.port1,Ee[0],Ee[1],Ee[2])})(B.port1.removeEventListener);let we=null;Object.defineProperty(B.port1,"onmessage",{get:()=>we,set:G=>{typeof we=="function"&&B.port1.removeEventListener("message",we),we=typeof G=="function"?G:null,typeof we=="function"&&(B.port1.addEventListener("message",we),B.port1.start())}}),A.prototype.port=B.port1;let q=null;wA(b,le,A,k).then(G=>q=G);const $=fp(k.numberOfInputs,k.channelCount),te=fp(k.numberOfOutputs,C),ae=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((G,{name:Ee})=>({...G,[Ee]:new Float32Array(128)}),{});let re=!0;const de=()=>{k.numberOfOutputs>0&&j.disconnect(I);for(let G=0,Ee=0;G<k.numberOfOutputs;G+=1){const xt=X[G];for(let et=0;et<C[G];et+=1)I.disconnect(xt,Ee+et,et);Ee+=C[G]}},ce=new Map;j.onaudioprocess=({inputBuffer:G,outputBuffer:Ee})=>{if(q!==null){const xt=y(le);for(let et=0;et<J;et+=128){for(let De=0;De<k.numberOfInputs;De+=1)for(let rt=0;rt<k.channelCount;rt+=1)dp(G,$[De],rt,rt,et);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:De},rt)=>{dp(G,ae,De,O+rt,et)});for(let De=0;De<k.numberOfInputs;De+=1)for(let rt=0;rt<C[De];rt+=1)te[De][rt].byteLength===0&&(te[De][rt]=new Float32Array(128));try{const De=$.map((Ue,ht)=>{if(xt[ht].size>0)return ce.set(ht,J/128),Ue;const Ke=ce.get(ht);return Ke===void 0?[]:(Ue.every(bt=>bt.every(mt=>mt===0))&&(Ke===1?ce.delete(ht):ce.set(ht,Ke-1)),Ue)});re=p(b.currentTime+et/b.sampleRate,b.sampleRate,()=>q.process(De,te,ae));for(let Ue=0,ht=0;Ue<k.numberOfOutputs;Ue+=1){for(let Ae=0;Ae<C[Ue];Ae+=1)lw(Ee,te[Ue],Ae,ht+Ae,et);ht+=C[Ue]}}catch(De){re=!1,le.dispatchEvent(new ErrorEvent("processorerror",{colno:De.colno,filename:De.filename,lineno:De.lineno,message:De.message}))}if(!re){for(let De=0;De<k.numberOfInputs;De+=1){U[De].disconnect(z[De]);for(let rt=0;rt<k.channelCount;rt+=1)z[et].disconnect(F,rt,De*k.channelCount+rt)}if(A.parameterDescriptors!==void 0){const De=A.parameterDescriptors.length;for(let rt=0;rt<De;rt+=1){const Ue=L[rt];Ue.disconnect(F,0,O+rt),Ue.stop()}}F.disconnect(j),j.onaudioprocess=null,ve?de():Xe();break}}}};let ve=!1;const _e=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ve=()=>j.connect(_e).connect(b.destination),Xe=()=>{j.disconnect(_e),_e.disconnect()},Je=()=>{if(re){Xe(),k.numberOfOutputs>0&&j.connect(I);for(let G=0,Ee=0;G<k.numberOfOutputs;G+=1){const xt=X[G];for(let et=0;et<C[G];et+=1)I.connect(xt,Ee+et,et);Ee+=C[G]}}ve=!0},at=()=>{re&&(Ve(),de()),ve=!1};return Ve(),_(le,Je,at)},hw=(n,e)=>{const t=n.createBiquadFilter();return Is(t,e),ss(t,e,"Q"),ss(t,e,"detune"),ss(t,e,"frequency"),ss(t,e,"gain"),zr(t,e,"type"),t},SA=(n,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,a),Is(a,s),a},NA=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Gs()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Gs()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Gs()}})},_f=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Is(t,e),NA(t),t},AA=(n,e,t,s,a)=>(o,u)=>{if(o.createConstantSource===void 0)return t(o,u);const c=o.createConstantSource();return Is(c,u),ss(c,u,"offset"),e(s,()=>s(o))||Zg(c),e(a,()=>a(o))||Kg(c),n(o,c),c},Kh=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),CA=(n,e,t,s)=>(a,{offset:o,...u})=>{const c=a.createBuffer(1,2,44100),h=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=t(a,{...u,gain:o}),p=c.getChannelData(0);p[0]=1,p[1]=1,h.buffer=c,h.loop=!0;const y={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(N){f.channelCount=N},get channelCountMode(){return f.channelCountMode},set channelCountMode(N){f.channelCountMode=N},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(N){f.channelInterpretation=N},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(N){h.onended=N},addEventListener(...N){return h.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return h.dispatchEvent(N[0])},removeEventListener(...N){return h.removeEventListener(N[0],N[1],N[2])},start(N=0){h.start.call(h,N)},stop(N=0){h.stop.call(h,N)}},_=()=>h.connect(f),b=()=>h.disconnect(f);return n(a,h),s(Kh(y,f),_,b)},TA=(n,e)=>(t,s)=>{const a=t.createConvolver();if(Is(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),zr(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",o=>()=>o.call(a),o=>u=>{if(u>2)throw n();return o.call(a,u)}),s.channelCountMode==="max"))throw n();return e(a,"channelCountMode",o=>()=>o.call(a),o=>u=>{if(u==="max")throw n();return o.call(a,u)}),a},dw=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Is(t,e),ss(t,e,"delayTime"),t},kA=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(Is(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return ss(s,t,"attack"),ss(s,t,"knee"),ss(s,t,"ratio"),ss(s,t,"release"),ss(s,t,"threshold"),s},$i=(n,e)=>{const t=n.createGain();return Is(t,e),ss(t,e,"gain"),t},jA=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return Is(a,s),a};function EA(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function MA(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function Y5(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=MA(t,e),t[0]+=n[s];return t}const LA=(n,e,t,s)=>(a,o,{channelCount:u,channelCountMode:c,channelInterpretation:h,feedback:f,feedforward:p})=>{const y=uw(o,a.sampleRate),_=f instanceof Float64Array?f:new Float64Array(f),b=p instanceof Float64Array?p:new Float64Array(p),N=_.length,A=b.length,k=Math.min(N,A);if(N===0||N>20)throw s();if(_[0]===0)throw e();if(A===0||A>20)throw s();if(b[0]===0)throw e();if(_[0]!==1){for(let L=0;L<A;L+=1)b[L]/=_[0];for(let L=1;L<N;L+=1)_[L]/=_[0]}const C=t(a,y,u,u);C.channelCount=u,C.channelCountMode=c,C.channelInterpretation=h;const O=32,R=[],V=[],B=[];for(let L=0;L<u;L+=1){R.push(0);const F=new Float32Array(O),J=new Float32Array(O);F.fill(0),J.fill(0),V.push(F),B.push(J)}C.onaudioprocess=L=>{const F=L.inputBuffer,J=L.outputBuffer,j=F.numberOfChannels;for(let I=0;I<j;I+=1){const X=F.getChannelData(I),P=J.getChannelData(I);R[I]=cw(_,N,b,A,k,V[I],B[I],R[I],O,X,P)}};const U=a.sampleRate/2;return Kh({get bufferSize(){return y},get channelCount(){return C.channelCount},set channelCount(L){C.channelCount=L},get channelCountMode(){return C.channelCountMode},set channelCountMode(L){C.channelCountMode=L},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(L){C.channelInterpretation=L},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener(...L){return C.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return C.dispatchEvent(L[0])},getFrequencyResponse(L,F,J){if(L.length!==F.length||F.length!==J.length)throw n();const j=L.length;for(let I=0;I<j;I+=1){const X=-Math.PI*(L[I]/U),P=[Math.cos(X),Math.sin(X)],ie=Y5(b,P),Y=Y5(_,P),ne=EA(ie,Y);F[I]=Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1]),J[I]=Math.atan2(ne[1],ne[0])}},removeEventListener(...L){return C.removeEventListener(L[0],L[1],L[2])}},C)},OA=(n,e)=>n.createMediaElementSource(e.mediaElement),DA=(n,e)=>{const t=n.createMediaStreamDestination();return Is(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},RA=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((o,u)=>o.id<u.id?-1:o.id>u.id?1:0);const s=t.slice(0,1),a=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},IA=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),o=t.createMediaStreamSource(a);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return o},VA=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,FA=(n,e,t,s,a,o)=>(u,c)=>{const h=u.createOscillator();return Is(h,c),ss(h,c,"detune"),ss(h,c,"frequency"),c.periodicWave!==void 0?h.setPeriodicWave(c.periodicWave):zr(h,c,"type"),e(t,()=>t(u))||Zg(h),e(s,()=>s(u))||o(h,u),e(a,()=>a(u))||Kg(h),n(u,h),h},BA=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(Is(s,t),ss(s,t,"orientationX"),ss(s,t,"orientationY"),ss(s,t,"orientationZ"),ss(s,t,"positionX"),ss(s,t,"positionY"),ss(s,t,"positionZ"),zr(s,t,"coneInnerAngle"),zr(s,t,"coneOuterAngle"),zr(s,t,"coneOuterGain"),zr(s,t,"distanceModel"),zr(s,t,"maxDistance"),zr(s,t,"panningModel"),zr(s,t,"refDistance"),zr(s,t,"rolloffFactor"),s)},PA=(n,e,t,s,a,o,u,c,h,f)=>(p,{coneInnerAngle:y,coneOuterAngle:_,coneOuterGain:b,distanceModel:N,maxDistance:A,orientationX:k,orientationY:C,orientationZ:O,panningModel:R,positionX:V,positionY:B,positionZ:U,refDistance:z,rolloffFactor:L,...F})=>{const J=p.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw u();Is(J,F);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=t(p,{...j,channelInterpretation:"speakers",numberOfInputs:6}),X=s(p,{...F,gain:1}),P=s(p,{...j,gain:1}),ie=s(p,{...j,gain:0}),Y=s(p,{...j,gain:0}),ne=s(p,{...j,gain:0}),le=s(p,{...j,gain:0}),pe=s(p,{...j,gain:0}),we=a(p,256,6,1),q=o(p,{...j,curve:new Float32Array([1,1]),oversample:"none"});let E=[k,C,O],$=[V,B,U];const te=new Float32Array(1);we.onaudioprocess=({inputBuffer:ce})=>{const ve=[h(ce,te,0),h(ce,te,1),h(ce,te,2)];ve.some((Ve,Xe)=>Ve!==E[Xe])&&(J.setOrientation(...ve),E=ve);const _e=[h(ce,te,3),h(ce,te,4),h(ce,te,5)];_e.some((Ve,Xe)=>Ve!==$[Xe])&&(J.setPosition(..._e),$=_e)},Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pe.gain,"defaultValue",{get:()=>0});const ae={get bufferSize(){},get channelCount(){return J.channelCount},set channelCount(ce){if(ce>2)throw u();X.channelCount=ce,J.channelCount=ce},get channelCountMode(){return J.channelCountMode},set channelCountMode(ce){if(ce==="max")throw u();X.channelCountMode=ce,J.channelCountMode=ce},get channelInterpretation(){return J.channelInterpretation},set channelInterpretation(ce){X.channelInterpretation=ce,J.channelInterpretation=ce},get coneInnerAngle(){return J.coneInnerAngle},set coneInnerAngle(ce){J.coneInnerAngle=ce},get coneOuterAngle(){return J.coneOuterAngle},set coneOuterAngle(ce){J.coneOuterAngle=ce},get coneOuterGain(){return J.coneOuterGain},set coneOuterGain(ce){if(ce<0||ce>1)throw e();J.coneOuterGain=ce},get context(){return J.context},get distanceModel(){return J.distanceModel},set distanceModel(ce){J.distanceModel=ce},get inputs(){return[X]},get maxDistance(){return J.maxDistance},set maxDistance(ce){if(ce<0)throw new RangeError;J.maxDistance=ce},get numberOfInputs(){return J.numberOfInputs},get numberOfOutputs(){return J.numberOfOutputs},get orientationX(){return P.gain},get orientationY(){return ie.gain},get orientationZ(){return Y.gain},get panningModel(){return J.panningModel},set panningModel(ce){J.panningModel=ce},get positionX(){return ne.gain},get positionY(){return le.gain},get positionZ(){return pe.gain},get refDistance(){return J.refDistance},set refDistance(ce){if(ce<0)throw new RangeError;J.refDistance=ce},get rolloffFactor(){return J.rolloffFactor},set rolloffFactor(ce){if(ce<0)throw new RangeError;J.rolloffFactor=ce},addEventListener(...ce){return X.addEventListener(ce[0],ce[1],ce[2])},dispatchEvent(...ce){return X.dispatchEvent(ce[0])},removeEventListener(...ce){return X.removeEventListener(ce[0],ce[1],ce[2])}};y!==ae.coneInnerAngle&&(ae.coneInnerAngle=y),_!==ae.coneOuterAngle&&(ae.coneOuterAngle=_),b!==ae.coneOuterGain&&(ae.coneOuterGain=b),N!==ae.distanceModel&&(ae.distanceModel=N),A!==ae.maxDistance&&(ae.maxDistance=A),k!==ae.orientationX.value&&(ae.orientationX.value=k),C!==ae.orientationY.value&&(ae.orientationY.value=C),O!==ae.orientationZ.value&&(ae.orientationZ.value=O),R!==ae.panningModel&&(ae.panningModel=R),V!==ae.positionX.value&&(ae.positionX.value=V),B!==ae.positionY.value&&(ae.positionY.value=B),U!==ae.positionZ.value&&(ae.positionZ.value=U),z!==ae.refDistance&&(ae.refDistance=z),L!==ae.rolloffFactor&&(ae.rolloffFactor=L),(E[0]!==1||E[1]!==0||E[2]!==0)&&J.setOrientation(...E),($[0]!==0||$[1]!==0||$[2]!==0)&&J.setPosition(...$);const re=()=>{X.connect(J),n(X,q,0,0),q.connect(P).connect(I,0,0),q.connect(ie).connect(I,0,1),q.connect(Y).connect(I,0,2),q.connect(ne).connect(I,0,3),q.connect(le).connect(I,0,4),q.connect(pe).connect(I,0,5),I.connect(we).connect(p.destination)},de=()=>{X.disconnect(J),c(X,q,0,0),q.disconnect(P),P.disconnect(I),q.disconnect(ie),ie.disconnect(I),q.disconnect(Y),Y.disconnect(I),q.disconnect(ne),ne.disconnect(I),q.disconnect(le),le.disconnect(I),q.disconnect(pe),pe.disconnect(I),I.disconnect(we),we.disconnect(p.destination)};return f(Kh(ae,J),re,de)},zA=n=>(e,{disableNormalization:t,imag:s,real:a})=>{const o=s instanceof Float32Array?s:new Float32Array(s),u=a instanceof Float32Array?a:new Float32Array(a),c=e.createPeriodicWave(u,o,{disableNormalization:t});if(Array.from(s).length<2)throw n();return c},Sf=(n,e,t,s)=>n.createScriptProcessor(e,t,s),qA=(n,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const o=t.createStereoPanner();return Is(o,s),ss(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw e()}}),o},UA=(n,e,t,s,a,o)=>{const c=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},p={...f,oversample:"none"},y=(N,A,k,C)=>{const O=new Float32Array(16385),R=new Float32Array(16385);for(let F=0;F<16385;F+=1){const J=F/16384*h;O[F]=Math.cos(J),R[F]=Math.sin(J)}const V=t(N,{...f,gain:0}),B=s(N,{...p,curve:O}),U=s(N,{...p,curve:c}),z=t(N,{...f,gain:0}),L=s(N,{...p,curve:R});return{connectGraph(){A.connect(V),A.connect(U.inputs===void 0?U:U.inputs[0]),A.connect(z),U.connect(k),k.connect(B.inputs===void 0?B:B.inputs[0]),k.connect(L.inputs===void 0?L:L.inputs[0]),B.connect(V.gain),L.connect(z.gain),V.connect(C,0,0),z.connect(C,0,1)},disconnectGraph(){A.disconnect(V),A.disconnect(U.inputs===void 0?U:U.inputs[0]),A.disconnect(z),U.disconnect(k),k.disconnect(B.inputs===void 0?B:B.inputs[0]),k.disconnect(L.inputs===void 0?L:L.inputs[0]),B.disconnect(V.gain),L.disconnect(z.gain),V.disconnect(C,0,0),z.disconnect(C,0,1)}}},_=(N,A,k,C)=>{const O=new Float32Array(16385),R=new Float32Array(16385),V=new Float32Array(16385),B=new Float32Array(16385),U=Math.floor(16385/2);for(let ne=0;ne<16385;ne+=1)if(ne>U){const le=(ne-U)/(16384-U)*h;O[ne]=Math.cos(le),R[ne]=Math.sin(le),V[ne]=0,B[ne]=1}else{const le=ne/(16384-U)*h;O[ne]=1,R[ne]=0,V[ne]=Math.cos(le),B[ne]=Math.sin(le)}const z=e(N,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),L=t(N,{...f,gain:0}),F=s(N,{...p,curve:O}),J=t(N,{...f,gain:0}),j=s(N,{...p,curve:R}),I=s(N,{...p,curve:c}),X=t(N,{...f,gain:0}),P=s(N,{...p,curve:V}),ie=t(N,{...f,gain:0}),Y=s(N,{...p,curve:B});return{connectGraph(){A.connect(z),A.connect(I.inputs===void 0?I:I.inputs[0]),z.connect(L,0),z.connect(J,0),z.connect(X,1),z.connect(ie,1),I.connect(k),k.connect(F.inputs===void 0?F:F.inputs[0]),k.connect(j.inputs===void 0?j:j.inputs[0]),k.connect(P.inputs===void 0?P:P.inputs[0]),k.connect(Y.inputs===void 0?Y:Y.inputs[0]),F.connect(L.gain),j.connect(J.gain),P.connect(X.gain),Y.connect(ie.gain),L.connect(C,0,0),X.connect(C,0,0),J.connect(C,0,1),ie.connect(C,0,1)},disconnectGraph(){A.disconnect(z),A.disconnect(I.inputs===void 0?I:I.inputs[0]),z.disconnect(L,0),z.disconnect(J,0),z.disconnect(X,1),z.disconnect(ie,1),I.disconnect(k),k.disconnect(F.inputs===void 0?F:F.inputs[0]),k.disconnect(j.inputs===void 0?j:j.inputs[0]),k.disconnect(P.inputs===void 0?P:P.inputs[0]),k.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),F.disconnect(L.gain),j.disconnect(J.gain),P.disconnect(X.gain),Y.disconnect(ie.gain),L.disconnect(C,0,0),X.disconnect(C,0,0),J.disconnect(C,0,1),ie.disconnect(C,0,1)}}},b=(N,A,k,C,O)=>{if(A===1)return y(N,k,C,O);if(A===2)return _(N,k,C,O);throw a()};return(N,{channelCount:A,channelCountMode:k,pan:C,...O})=>{if(k==="max")throw a();const R=n(N,{...O,channelCount:1,channelCountMode:k,numberOfInputs:2}),V=t(N,{...O,channelCount:A,channelCountMode:k,gain:1}),B=t(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:U,disconnectGraph:z}=b(N,A,V,B,R);Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"maxValue",{get:()=>1}),Object.defineProperty(B.gain,"minValue",{get:()=>-1});const L={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(I){V.channelCount!==I&&(F&&z(),{connectGraph:U,disconnectGraph:z}=b(N,I,V,B,R),F&&U()),V.channelCount=I},get channelCountMode(){return V.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw a();V.channelCountMode=I},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(I){V.channelInterpretation=I},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return B.gain},addEventListener(...I){return V.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return V.dispatchEvent(I[0])},removeEventListener(...I){return V.removeEventListener(I[0],I[1],I[2])}};let F=!1;const J=()=>{U(),F=!0},j=()=>{z(),F=!1};return o(Kh(L,R),J,j)}},HA=(n,e,t,s,a,o,u)=>(c,h)=>{const f=c.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,h);Is(f,h);const p=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(p!==null&&p.length<2)throw e();zr(f,{curve:p},"curve"),zr(f,h,"oversample");let y=null,_=!1;return u(f,"curve",A=>()=>A.call(f),A=>k=>(A.call(f,k),_&&(s(k)&&y===null?y=n(c,f):!s(k)&&y!==null&&(y(),y=null)),k)),a(f,()=>{_=!0,s(f.curve)&&(y=n(c,f))},()=>{_=!1,y!==null&&(y(),y=null)})},WA=(n,e,t,s,a)=>(o,{curve:u,oversample:c,...h})=>{const f=o.createWaveShaper(),p=o.createWaveShaper();Is(f,h),Is(p,h);const y=t(o,{...h,gain:1}),_=t(o,{...h,gain:-1}),b=t(o,{...h,gain:1}),N=t(o,{...h,gain:-1});let A=null,k=!1,C=null;const O={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(B){y.channelCount=B,_.channelCount=B,f.channelCount=B,b.channelCount=B,p.channelCount=B,N.channelCount=B},get channelCountMode(){return f.channelCountMode},set channelCountMode(B){y.channelCountMode=B,_.channelCountMode=B,f.channelCountMode=B,b.channelCountMode=B,p.channelCountMode=B,N.channelCountMode=B},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(B){y.channelInterpretation=B,_.channelInterpretation=B,f.channelInterpretation=B,b.channelInterpretation=B,p.channelInterpretation=B,N.channelInterpretation=B},get context(){return f.context},get curve(){return C},set curve(B){if(B!==null&&B.length<2)throw e();if(B===null)f.curve=B,p.curve=B;else{const U=B.length,z=new Float32Array(U+2-U%2),L=new Float32Array(U+2-U%2);z[0]=B[0],L[0]=-B[U-1];const F=Math.ceil((U+1)/2),J=(U+1)/2-1;for(let j=1;j<F;j+=1){const I=j/F*J,X=Math.floor(I),P=Math.ceil(I);z[j]=X===P?B[X]:(1-(I-X))*B[X]+(1-(P-I))*B[P],L[j]=X===P?-B[U-1-X]:-((1-(I-X))*B[U-1-X])-(1-(P-I))*B[U-1-P]}z[F]=U%2===1?B[F-1]:(B[F-2]+B[F-1])/2,f.curve=z,p.curve=L}C=B,k&&(s(C)&&A===null?A=n(o,y):A!==null&&(A(),A=null))},get inputs(){return[y]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(B){f.oversample=B,p.oversample=B},addEventListener(...B){return y.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return y.dispatchEvent(B[0])},removeEventListener(...B){return y.removeEventListener(B[0],B[1],B[2])}};u!==null&&(O.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==O.oversample&&(O.oversample=c);const R=()=>{y.connect(f).connect(b),y.connect(_).connect(p).connect(N).connect(b),k=!0,s(C)&&(A=n(o,y))},V=()=>{y.disconnect(f),f.disconnect(b),y.disconnect(_),_.disconnect(p),p.disconnect(N),N.disconnect(b),k=!1,A!==null&&(A(),A=null)};return a(Kh(O,b),R,V)},Ni=()=>new DOMException("","NotSupportedError"),GA={numberOfChannels:1},$A=(n,e,t,s,a)=>class extends n{constructor(u,c,h){let f;if(typeof u=="number"&&c!==void 0&&h!==void 0)f={length:c,numberOfChannels:u,sampleRate:h};else if(typeof u=="object")f=u;else throw new Error("The given parameters are not valid.");const{length:p,numberOfChannels:y,sampleRate:_}={...GA,...f},b=s(y,p,_);e(of,()=>of(b))||b.addEventListener("statechange",(()=>{let N=0;const A=k=>{this._state==="running"&&(N>0?(b.removeEventListener("statechange",A),k.stopImmediatePropagation(),this._waitForThePromiseToSettle(k)):N+=1)};return A})()),super(b,y),this._length=p,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,rw(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},YA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},XA=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...YA,...f},_=t(p,y),b=o(p),N=b?s():null,A=h.sampleRate/2;super(h,!1,_,N),this._detune=e(this,b,_.detune,153600,-153600),this._frequency=e(this,b,_.frequency,A,-A),this._nativeOscillatorNode=_,this._onended=null,this._oscillatorNodeRenderer=N,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeOscillatorNode.onended=f;const p=this._nativeOscillatorNode.onended;this._onended=p!==null&&p===f?h:p}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){Uh(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),Ml(this)&&yf(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},ZA=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null,h=null;const f=async(p,y)=>{let _=t(p);const b=fi(_,y);if(!b){const N={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,periodicWave:u===null?void 0:u,type:_.type};_=e(y,N),c!==null&&_.start(c),h!==null&&_.stop(h)}return o.set(y,_),b?(await n(y,p.detune,_.detune),await n(y,p.frequency,_.frequency)):(await s(y,p.detune,_.detune),await s(y,p.frequency,_.frequency)),await a(p,y,_),_};return{set periodicWave(p){u=p},set start(p){c=p},set stop(p){h=p},render(p,y){const _=o.get(y);return _!==void 0?Promise.resolve(_):f(p,y)}}},KA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},QA=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...KA,...f},_=t(p,y),b=o(p),N=b?s():null;super(h,!1,_,N),this._nativePannerNode=_,this._orientationX=e(this,b,_.orientationX,_i,Hi),this._orientationY=e(this,b,_.orientationY,_i,Hi),this._orientationZ=e(this,b,_.orientationZ,_i,Hi),this._positionX=e(this,b,_.positionX,_i,Hi),this._positionY=e(this,b,_.positionY,_i,Hi),this._positionZ=e(this,b,_.positionZ,_i,Hi),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},JA=(n,e,t,s,a,o,u,c,h,f)=>()=>{const p=new WeakMap;let y=null;const _=async(b,N)=>{let A=null,k=o(b);const C={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},O={...C,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},R=fi(k,N);if("bufferSize"in k)A=s(N,{...C,gain:1});else if(!R){const V={...O,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=a(N,V)}if(p.set(N,A===null?k:A),A!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=new u(6,b.context.length,N.sampleRate),I=e(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(j.destination),y=(async()=>{const X=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(P,ie)=>{const Y=t(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ie===0?1:0});return await c(j,P,Y.offset),Y}));for(let P=0;P<6;P+=1)X[P].connect(I,0,P),X[P].start(0);return f(j)})()}const V=await y,B=s(N,{...C,gain:1});await h(b,N,B);const U=[];for(let j=0;j<V.numberOfChannels;j+=1)U.push(V.getChannelData(j));let z=[U[0][0],U[1][0],U[2][0]],L=[U[3][0],U[4][0],U[5][0]],F=s(N,{...C,gain:1}),J=a(N,{...O,orientationX:z[0],orientationY:z[1],orientationZ:z[2],positionX:L[0],positionY:L[1],positionZ:L[2]});B.connect(F).connect(J.inputs[0]),J.connect(A);for(let j=128;j<V.length;j+=128){const I=[U[0][j],U[1][j],U[2][j]],X=[U[3][j],U[4][j],U[5][j]];if(I.some((P,ie)=>P!==z[ie])||X.some((P,ie)=>P!==L[ie])){z=I,L=X;const P=j/N.sampleRate;F.gain.setValueAtTime(0,P),F=s(N,{...C,gain:0}),J=a(N,{...O,orientationX:z[0],orientationY:z[1],orientationZ:z[2],positionX:L[0],positionY:L[1],positionZ:L[2]}),F.gain.setValueAtTime(1,P),B.connect(F).connect(J.inputs[0]),J.connect(A)}}return A}return R?(await n(N,b.orientationX,k.orientationX),await n(N,b.orientationY,k.orientationY),await n(N,b.orientationZ,k.orientationZ),await n(N,b.positionX,k.positionX),await n(N,b.positionY,k.positionY),await n(N,b.positionZ,k.positionZ)):(await c(N,b.orientationX,k.orientationX),await c(N,b.orientationY,k.orientationY),await c(N,b.orientationZ,k.orientationZ),await c(N,b.positionX,k.positionX),await c(N,b.positionY,k.positionY),await c(N,b.positionZ,k.positionZ)),Zh(k)?await h(b,N,k.inputs[0]):await h(b,N,k),k};return{render(b,N){const A=p.get(N);return A!==void 0?Promise.resolve(A):_(b,N)}}},e8={disableNormalization:!1},t8=(n,e,t,s)=>class fw{constructor(o,u){const c=e(o),h=s({...e8,...u}),f=n(c,h);return t.add(f),f}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===fw.prototype||t.has(o)}},n8=(n,e)=>(t,s,a)=>(n(s).replay(a),e(s,t,a)),r8=(n,e,t)=>async(s,a,o)=>{const u=n(s);await Promise.all(u.activeInputs.map((c,h)=>Array.from(c).map(async([f,p])=>{const _=await e(f).render(f,a),b=s.context.destination;!t(f)&&(s!==b||!t(s))&&_.connect(o,p,h)})).reduce((c,h)=>[...c,...h],[]))},s8=(n,e,t)=>async(s,a,o)=>{const u=e(s);await Promise.all(Array.from(u.activeInputs).map(async([c,h])=>{const p=await n(c).render(c,a);t(c)||p.connect(o,h)}))},i8=(n,e,t,s)=>a=>n(of,()=>of(a))?Promise.resolve(n(s,s)).then(o=>{if(!o){const u=t(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(o=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{u.disconnect(),o(c.renderedBuffer)},u.connect(a.destination),a.startRendering()}),a8=n=>(e,t)=>{n.set(e,t)},o8=n=>(e,t)=>n.set(e,t),l8=(n,e,t,s,a,o,u,c)=>(h,f)=>t(h).render(h,f).then(()=>Promise.all(Array.from(s(f)).map(p=>t(p).render(p,f)))).then(()=>a(f)).then(p=>(typeof p.copyFromChannel!="function"?(u(p),$g(p)):e(o,()=>o(p))||c(p),n.add(p),p)),c8={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},u8=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...c8,...h},y=t(f,p),_=o(f),b=_?s():null;super(c,!1,y,b),this._pan=e(this,_,y.pan)}get pan(){return this._pan}},h8=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=fi(f,h);if(!p){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(h,y)}return o.set(h,f),p?await n(h,c.pan,f.pan):await s(h,c.pan,f.pan),Zh(f)?await a(c,h,f.inputs[0]):await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},d8=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},f8=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let o=!1,u=!1;try{await s.audioWorklet.addModule(a);const c=new n(s,"a",{numberOfOutputs:0}),h=s.createOscillator();c.port.onmessage=()=>o=!0,c.onprocessorerror=()=>u=!0,h.connect(c),h.start(0),await s.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(a)}return o&&!u},p8=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},m8=()=>new DOMException("","UnknownError"),g8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},b8=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...g8,...f},_=t(p,y),N=o(p)?s():null;super(h,!0,_,N),this._isCurveNullified=!1,this._nativeWaveShaperNode=_,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},v8=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!fi(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=n(u,f)}return s.set(u,c),Zh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},y8=()=>typeof window>"u"?null:window,x8=(n,e)=>t=>{t.copyFromChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<h&&y<p;y+=1)s[y]=f[y+u]},t.copyToChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<h&&y<p;y+=1)f[y+u]=s[y]}},w8=n=>e=>{e.copyFromChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyToChannel)},_8=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",a=>()=>{const o=a.call(e);return o===s?null:o},a=>o=>a.call(e,o===null?s:o))},S8=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const a=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let h=0;h<c;h+=1)a.connect(s,0,h)},()=>a.disconnect(s))},pw=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),mw=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Nf=(n,e,t,s)=>{let a=n;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:o,set:u}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(n,e,{get:t(o),set:s(u)})},N8=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),A8=n=>({...n,channelCount:n.numberOfOutputs}),C8=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},gw=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;gw(n,e,t+1e-7)}},T8=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},k8=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},j8=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Qg=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},bw=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Jg=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},E8=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},M8=n=>{n.start=(e=>(t=0,s=0,a)=>{const o=n.buffer,u=o===null?s:Math.min(o.duration,s);o!==null&&u>o.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,u,a)})(n.start)},vw=(n,e)=>{const t=e.createGain();n.connect(t);const s=(a=>()=>{a.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Kh(n,t),n.stop=(a=>{let o=!1;return(u=0)=>{if(o)try{a.call(n,u)}catch{t.gain.setValueAtTime(0,u)}else a.call(n,u),o=!0}})(n.stop)},Qh=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},L8=QS(Au),O8=s6(Au),D8=gN(Bp),yw=new WeakMap,R8=DN(yw),vo=G6(new Map,new WeakMap),Go=y8(),xw=uA(vo,Zo),e2=ON(Si),ti=r8(Si,e2,wu),I8=c6(xw,Or,ti),Sr=VN(Fp),Vl=VA(Go),mr=eA(Vl),ww=new WeakMap,_w=CN(Qh),Af=pA(Go),t2=ZN(Af),n2=KN(Go),Sw=QN(Go),lf=gA(Go),hs=D6(JS(Zx),r6(L8,O8,cp,D8,up,Si,R8,vf,Or,Au,Ml,wu,$1),vo,WN(hg,up,Si,Or,af,Ml),Zo,Pp,Ni,dN(cp,hg,Si,Or,af,Sr,Ml,mr),yN(ww,Si,fo),_w,Sr,t2,n2,Sw,mr,lf),V8=l6(hs,I8,Zo,xw,Sr,mr),r2=new WeakSet,X5=hA(Go),Nw=iN(new Uint32Array(1)),s2=x8(Nw,Zo),i2=w8(Nw),Aw=h6(r2,vo,Ni,X5,Vl,d8(X5),s2,i2),zp=i6($i),Cw=s8(e2,xf,wu),Ko=J6(Cw),Jh=fA(zp,vo,T8,k8,j8,Qg,bw,Jg,M8,_8(Nf),vw),Qo=n8(RN(xf),Cw),F8=p6(Ko,Jh,Or,Qo,ti),yo=R6(e6(Kx),ww,Gg,I6,GS,$S,YS,XS,ZS,lg,Yx,Af,gw),B8=f6(hs,F8,yo,Gs,Jh,Sr,mr,Qh),P8=S6(hs,N6,Zo,Gs,mA($i,Nf),Sr,mr,ti),z8=W6(Ko,hw,Or,Qo,ti),Cu=o8(yw),q8=H6(hs,yo,z8,Pp,hw,Sr,mr,Cu),Rc=lA(Au,n2),U8=S8(Gs,Rc),Ic=SA(Af,U8),H8=X6(Ic,Or,ti),W8=Y6(hs,H8,Ic,Sr,mr),G8=Q6(_f,Or,ti),$8=K6(hs,G8,_f,Sr,mr,A8),Y8=CA(zp,Jh,$i,Rc),ed=AA(zp,vo,Y8,Qg,Jg),X8=sN(Ko,ed,Or,Qo,ti),Z8=rN(hs,yo,X8,ed,Sr,mr,Qh),Tw=TA(Ni,Nf),K8=lN(Tw,Or,ti),Q8=oN(hs,K8,Tw,Sr,mr,Cu),J8=mN(Ko,dw,Or,Qo,ti),eC=pN(hs,yo,J8,dw,Sr,mr,Cu),kw=kA(Ni),tC=SN(Ko,kw,Or,Qo,ti),nC=_N(hs,yo,tC,kw,Ni,Sr,mr,Cu),rC=MN(Ko,$i,Or,Qo,ti),sC=EN(hs,yo,rC,$i,Sr,mr),iC=LA(Pp,Gs,Sf,Ni),qp=i8(vo,$i,Sf,p8($i,Vl)),aC=HN(Jh,Or,Vl,ti,qp),oC=jA(iC),lC=qN(hs,oC,aC,Sr,mr,Cu),cC=A6(yo,Ic,ed,Sf,Ni,pw,mr,Nf),jw=new WeakMap,uC=oA(P8,cC,_w,mr,jw,Qh),Ew=FA(zp,vo,Qg,bw,Jg,vw),hC=ZA(Ko,Ew,Or,Qo,ti),dC=XA(hs,yo,Ew,hC,Sr,mr,Qh),Mw=tN(Jh),fC=WA(Mw,Gs,$i,mw,Rc),Up=HA(Mw,Gs,fC,mw,Rc,Af,Nf),pC=PA(cp,Gs,Ic,$i,Sf,Up,Ni,up,pw,Rc),Lw=BA(pC),mC=JA(Ko,Ic,ed,$i,Lw,Or,Vl,Qo,ti,qp),gC=QA(hs,yo,Lw,mC,Sr,mr,Cu),bC=zA(Zo),vC=t8(bC,Sr,new WeakSet,C8),yC=UA(Ic,_f,$i,Up,Ni,Rc),Ow=qA(yC,Ni),xC=h8(Ko,Ow,Or,Qo,ti),wC=u8(hs,yo,Ow,xC,Sr,mr),_C=v8(Up,Or,ti),SC=b8(hs,Gs,Up,_C,Sr,mr,Cu),Dw=tA(Go),a2=TN(Go),Rw=new WeakMap,NC=FN(Rw,Vl),AC=Dw?n6(vo,Ni,AN(Go),a2,kN(KS),Sr,NC,mr,lf,new WeakMap,new WeakMap,f8(lf,Vl),Go):void 0,CC=JN(t2,mr),TC=hN(r2,vo,uN,NN,new WeakSet,Sr,CC,op,of,s2,i2),Iw=q6(AC,V8,Aw,B8,q8,W8,$8,Z8,Q8,TC,eC,nC,sC,lC,uC,dC,gC,vC,wC,SC),kC=nA(hs,OA,Sr,mr),jC=sA(hs,DA,Sr,mr),EC=iA(hs,RA,Sr,mr),MC=IA(Gs,mr),LC=aA(hs,MC,Sr),OC=_6(Iw,Gs,Ni,m8,kC,jC,EC,LC,Af),o2=BN(jw),DC=a6(o2),Vw=eN(Zo),RC=bN(o2),Fw=xN(Zo),Bw=new WeakMap,IC=LN(Bw,fo),VC=_A(Vw,Zo,Gs,Ic,_f,ed,$i,Sf,Ni,Fw,a2,IC,Rc),FC=vA(Gs,VC,$i,Ni,Rc),BC=z6(Ko,Vw,Jh,Ic,_f,ed,$i,RC,Fw,a2,Or,lf,Vl,Qo,ti,qp),PC=IN(Rw),zC=a8(Bw),Z5=Dw?F6(DC,hs,yo,BC,FC,Si,PC,Sr,mr,lf,N8,zC,E8,Qh):void 0,qC=cN(Ni,Vl),UC=l8(r2,vo,e2,o2,qp,op,s2,i2),HC=$A(Iw,vo,Gs,qC,UC),WC=GN(Fp,t2),GC=$N(Wg,n2),$C=YN(Gg,Sw),YC=XN(Fp,mr);function La(n){return n===void 0}function Rn(n){return n!==void 0}function XC(n){return typeof n=="function"}function Ol(n){return typeof n=="number"}function bu(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function ZC(n){return typeof n=="boolean"}function pa(n){return Array.isArray(n)}function Dl(n){return typeof n=="string"}function L1(n){return Dl(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function sn(n,e){if(!n)throw new Error(e)}function Rl(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function Pw(n){!n.isOffline&&n.state!=="running"&&Hp('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let zw=!1,K5=!1;function Q5(n){zw=n}function KC(n){La(n)&&zw&&!K5&&(K5=!0,Hp("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let qw=console;function QC(...n){qw.log(...n)}function Hp(...n){qw.warn(...n)}function JC(n){return new OC(n)}function eT(n,e,t){return new HC(n,e,t)}const ua=typeof self=="object"?self:null,tT=ua&&(ua.hasOwnProperty("AudioContext")||ua.hasOwnProperty("webkitAudioContext"));function nT(n,e,t){return sn(Rn(Z5),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof ua?.BaseAudioContext?ua?.AudioWorkletNode:Z5)(n,e,t)}function xo(n,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,s);else for(var c=n.length-1;c>=0;c--)(u=n[c])&&(o=(a<3?u(o):a>3?u(e,t,o):u(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function ws(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(p){try{f(s.next(p))}catch(y){u(y)}}function h(p){try{f(s.throw(p))}catch(y){u(y)}}function f(p){p.done?o(p.value):a(p.value).then(c,h)}f((s=s.apply(n,e||[])).next())})}class rT{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function _u(n){return $C(n)}function kc(n){return GC(n)}function Y1(n){return YC(n)}function Nh(n){return WC(n)}function sT(n){return n instanceof Aw}function iT(n,e){return n==="value"||_u(e)||kc(e)||sT(e)}function vu(n,...e){if(!e.length)return n;const t=e.shift();if(bu(n)&&bu(t))for(const s in t)iT(s,t[s])?n[s]=t[s]:bu(t[s])?(n[s]||Object.assign(n,{[s]:{}}),vu(n[s],t[s])):Object.assign(n,{[s]:t[s]});return vu(n,...e)}function aT(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function nn(n,e,t=[],s){const a={},o=Array.from(e);if(bu(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some(c=>Reflect.has(n,c))||(vu(a,{[s]:o[0]}),t.splice(t.indexOf(s),1),o.shift())),o.length===1&&bu(o[0]))vu(a,o[0]);else for(let u=0;u<t.length;u++)Rn(o[u])&&(a[t[u]]=o[u]);return vu(n,a)}function oT(n){return n.constructor.getDefaults()}function Oh(n,e){return La(n)?e:n}function co(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}class Fl{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ua&&this.toString()===ua.TONE_DEBUG_CLASS)&&QC(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Fl.version=$x;const l2=1e-6;function Hh(n,e){return n>e+l2}function gg(n,e){return Hh(n,e)||oo(n,e)}function pp(n,e){return n+l2<e}function oo(n,e){return Math.abs(n-e)<l2}function lT(n,e,t){return Math.max(Math.min(n,t),e)}class Oa extends Fl{constructor(){super(),this.name="Timeline",this._timeline=[];const e=nn(Oa.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(sn(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];sn(gg(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(oo(this._timeline[t].time,e)){for(let s=t;s>=0&&oo(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&gg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let o=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<o;){let u=Math.floor(s+(o-s)/2);const c=this._timeline[u],h=this._timeline[u+1];if(oo(c[t],e)){for(let f=u;f<this._timeline.length;f++){const p=this._timeline[f];if(oo(p[t],e))u=f;else break}return u}else{if(pp(c[t],e)&&Hh(h[t],e))return u;Hh(c[t],e)?o=u:s=u+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),o=this._search(t);return a!==-1&&o!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[o].time===t&&(o-=1),this._iterate(s,a,o)):a===-1&&this._iterate(s,0,o),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&oo(this._timeline[s].time,e)){let a=s;for(let o=s;o>=0&&oo(this._timeline[o].time,e);o--)a=o;this._iterate(o=>{t(o)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Uw=[];function Wp(n){Uw.push(n)}function cT(n){Uw.forEach(e=>e(n))}const Hw=[];function Gp(n){Hw.push(n)}function uT(n){Hw.forEach(e=>e(n))}class Cf extends Fl{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{La(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(La(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(La(t))this._events[a]=[];else{const o=this._events[a];for(let u=o.length-1;u>=0;u--)o[u]===t&&o.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,o=s.length;a<o;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Cf.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ww extends Cf{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let c2=class Gw extends Ww{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Oa,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=nn(Gw.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=JC({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new rT(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(cT(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return sn(Nh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return sn(Nh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return sn(Nh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){sn(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){sn(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){sn(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){sn(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return nT(this.rawContext,e,t)}addAudioWorkletModule(e){return ws(this,void 0,void 0,function*(){sn(Rn(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ws(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Nh(this._context)?this._context.resume():Promise.resolve()}close(){return ws(this,void 0,void 0,function*(){Nh(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&uT(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let o=0;o<s.length;o++)s[o]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const o=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:o+t})};return a(),s}};class hT extends Ww{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ws(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Dr(n,e){pa(e)?e.forEach(t=>Dr(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function u2(n,e){pa(e)?e.forEach(t=>u2(n,t)):Object.defineProperty(n,e,{writable:!0})}const pr=()=>{};class Mr extends Fl{constructor(){super(),this.name="ToneAudioBuffer",this.onload=pr;const e=nn(Mr.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Dl(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:pr,onload:pr,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:uo().sampleRate}set(e){return e instanceof Mr?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ws(this,void 0,void 0,function*(){const t=Mr.load(e).then(s=>{this.set(s),this.onload(this)});Mr.downloads.push(t);try{yield t}finally{const s=Mr.downloads.indexOf(t);Mr.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=pa(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,o=uo(),u=o.createBuffer(s,a,o.sampleRate),c=!t&&s===1?[e]:e;for(let h=0;h<s;h++)u.copyToChannel(c[h],h);return this._buffer=u,this}toMono(e){if(Ol(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const o=this.toArray(a);for(let u=0;u<o.length;u++)t[u]+=o[u]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(Ol(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){sn(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);sn(s<a,"The start time must be less than the end time");const o=a-s,u=uo().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(s,a),c);return new Mr(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Mr().fromArray(e)}static fromUrl(e){return ws(this,void 0,void 0,function*(){return yield new Mr().load(e)})}static load(e){return ws(this,void 0,void 0,function*(){const t=Mr.baseUrl===""||Mr.baseUrl.endsWith("/")?Mr.baseUrl:Mr.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield uo().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return ws(this,void 0,void 0,function*(){for(yield Promise.resolve();Mr.downloads.length;)yield Mr.downloads[0]})}}Mr.baseUrl="";Mr.downloads=[];class h2 extends c2{constructor(){super({clockSource:"offline",context:Y1(arguments[0])?arguments[0]:eT(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Y1(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Y1(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ws(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return ws(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Mr(t)})}close(){return Promise.resolve()}}const $w=new hT;let pu=$w;function uo(){return pu===$w&&tT&&dT(new c2),pu}function dT(n,e=!1){e&&pu.dispose(),Nh(n)?pu=new c2(n):Y1(n)?pu=new h2(n):pu=n}function Tu(){return pu.resume()}if(ua&&!ua.TONE_SILENCE_LOGGING){const e=` * Tone.js v${$x} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function fT(n){return Math.pow(10,n/20)}function pT(n){return 20*(Math.log(n)/Math.LN10)}function Yw(n){return Math.pow(2,n/12)}let $p=440;function mT(){return $p}function gT(n){$p=n}function mu(n){return Math.round(Xw(n))}function Xw(n){return 69+12*Math.log2(n/$p)}function Zw(n){return $p*Math.pow(2,(n-69)/12)}class d2 extends Fl{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof d2&&this.fromType(this._val),La(this._val))return this._noArg();if(Dl(this._val)&&La(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(bu(this._val)){let e=0;for(const t in this._val)if(Rn(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(Rn(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Dl(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ho extends d2{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new ho(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),c=Math.round(a/s)*s-a;return a+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let o=1;o<9;o++){const u=Math.pow(2,o);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let s=t[0],a=new ho(this.context,t[0]).toSeconds();return t.forEach(o=>{const u=new ho(this.context,o).toSeconds();Math.abs(u-e)<Math.abs(a-e)&&(s=o,a=u)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const o=a.toString();return o.length>3&&(a=parseFloat(parseFloat(o).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return mu(this.toFrequency())}_now(){return this.context.now()}}class da extends ho{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return mT()}static set A4(e){gT(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:da.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=bT[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:da.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new da(this.context,this.valueOf()*Yw(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return mu(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/da.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),vT[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Zw(e)}static ftom(e){return mu(e)}}const bT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},vT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Kd extends ho{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Gi extends Fl{constructor(){super();const e=nn(Gi.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:uo()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return KC(e),new ho(this.context,e).toSeconds()}toFrequency(e){return new da(this.context,e).toFrequency()}toTicks(e){return new Kd(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{La(e[s])&&delete t[s]}),t}get(){const e=oT(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Rn(s)&&Rn(s.value)&&Rn(s.setValueAtTime)?e[t]=s.value:s instanceof Gi?e[t]=s._getPartialProperties(e[t]):pa(s)||Ol(s)||Dl(s)||ZC(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Rn(this[t])&&(this[t]&&Rn(this[t].value)&&Rn(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Gi?this[t].set(e[t]):this[t]=e[t])}),this}}class f2 extends Oa{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Rl(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const o=this._timeline[a];if(o.state===e)return o}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const o=this._timeline[a];if(o.state===e)return o}}}class wr extends Gi{constructor(){const e=nn(wr.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,sn(Rn(e.param)&&(_u(e.param)||e.param instanceof wr),"param must be an AudioParam");!_u(e.param);)e.param=e.param._param;this._swappable=Rn(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Oa(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Rn(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Gi.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Rn(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Rn(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Rn(this.maxValue)&&Rn(this.minValue)&&Rl(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?fT(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?pT(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return sn(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let o=this._initialValue;if(a===null)o=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let c;u===null?c=this._initialValue:c=u.value,a.type==="setTargetAtTime"&&(o=this._exponentialApproach(a.time,c,a.value,a.constant,t))}else if(s===null)o=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?u=this._initialValue:u=c.value}s.type==="linearRampToValueAtTime"?o=this._linearInterpolate(a.time,u,s.time,s.value,t):o=this._exponentialInterpolate(a.time,u,s.time,s.value,t)}else o=a.value;return this._toType(o)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return sn(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=oo(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return sn(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);sn(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(t);return this._assertRange(a),sn(isFinite(a)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:o,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,o,s),this._param.setTargetAtTime(a,o,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const o=this._fromType(e[0])*a;this.setValueAtTime(this._toType(o),t);const u=s/(e.length-1);for(let c=1;c<e.length;c++){const h=this._fromType(e[c])*a;this.linearRampToValueAtTime(this._toType(h),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return sn(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));sn(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),o=this._events.getAfter(t);return a&&oo(a.time,t)?o?(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):o&&(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time),o.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):o.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),o=a?a.time:t+2,u=(o-t)/10;for(let c=t;c<o;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){sn(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,o){return s+(t-s)*Math.exp(-(o-e)/a)}_linearInterpolate(e,t,s,a,o){return t+(a-t)*((o-e)/(s-e))}_exponentialInterpolate(e,t,s,a,o){return t*Math.pow(a/t,(o-e)/(s-e))}}class fn extends Gi{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Rn(this.input)?_u(this.input)||this.input instanceof wr?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Rn(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Rn(e)&&(e instanceof fn||kc(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();sn(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return td(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Hp("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return yT(this,e,t,s),this}chain(...e){return cf(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Rn(this.input)&&(this.input instanceof fn?this.input.dispose():kc(this.input)&&this.input.disconnect()),Rn(this.output)&&(this.output instanceof fn?this.output.dispose():kc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function cf(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof fn?t.connect(s):kc(t)&&td(t,s),s),e)}function td(n,e,t=0,s=0){for(sn(Rn(n),"Cannot connect from undefined node"),sn(Rn(e),"Cannot connect to undefined node"),(e instanceof fn||kc(e))&&sn(e.numberOfInputs>0,"Cannot connect to node with no inputs"),sn(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof fn||e instanceof wr;)Rn(e.input)&&(e=e.input);for(;n instanceof fn;)Rn(n.output)&&(n=n.output);_u(e)?n.connect(e,t):n.connect(e,t,s)}function yT(n,e,t=0,s=0){if(Rn(e))for(;e instanceof fn;)e=e.input;for(;!kc(n);)Rn(n.output)&&(n=n.output);_u(e)?n.disconnect(e,t):kc(e)?n.disconnect(e,t,s):n.disconnect()}class Ss extends fn{constructor(){const e=nn(Ss.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new wr({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Dr(this,"gain")}static getDefaults(){return Object.assign(fn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Wh extends fn{constructor(e){super(e),this.onended=pr,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ss({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(fn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:pr})}_startGain(e,t=1){sn(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){sn(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==pr&&(this.onended(this),this.onended=pr,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),sn(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=pr,this}}class p2 extends Wh{constructor(){const e=nn(p2.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),td(this._source,this._gainNode),this.offset=new wr({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Wh.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class _r extends fn{constructor(){const e=nn(_r.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new p2({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(fn.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return m2(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function m2(n,e,t,s){(e instanceof wr||_u(e)||e instanceof _r&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof _r&&(e.overridden=!0)),td(n,e,t,s)}class g2 extends wr{constructor(){const e=nn(g2.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Oa(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(wr.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),o=this._events.get(t),u=Math.round(Math.max(1/s,1));for(let c=0;c<=u;c++){const h=s*c+t,f=this._exponentialApproach(o.time,o.value,a,s,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),o=Math.round(Math.max((t-a.time)*10,1)),u=(t-a.time)/o;for(let c=0;c<=o;c++){const h=u*c+a.time,f=this._exponentialInterpolate(a.time,a.value,t,s,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(La(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const o=this._events.get(t);return o&&o.time===t&&o.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),c=Math.sqrt(Math.pow(a,2)-2*u*(t.ticks-e)),h=(-a+c)/u,f=(-a-c)/u;return(h>0?h:f)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),o=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-o}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class b2 extends _r{constructor(){const e=nn(b2.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new g2({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(_r.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class v2 extends Gi{constructor(){const e=nn(v2.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new f2,this._tickOffset=new Oa,this._ticksAtTime=new Oa,this._secondsAtTime=new Oa,this.frequency=new b2({context:this.context,units:e.units,value:e.frequency}),Dr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Gi.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Rn(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),o={state:"paused",time:t};this._state.add(o);let u=a||s,c=a?a.ticks:0,h=null;return this._state.forEachBetween(u.time,t+this.sampleTime,f=>{let p=u.time;const y=this._tickOffset.get(f.time);y&&y.time>=u.time&&(c=y.ticks,p=y.time),u.state==="started"&&f.state!=="started"&&(c+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(p),f.time!==o.time&&(h={state:f.state,time:f.time,ticks:c})),u=f}),this._state.remove(o),h&&this._ticksAtTime.add(h),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let o=a||t,u=a?a.seconds:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,h=>{let f=o.time;const p=this._tickOffset.get(h.time);p&&p.time>=o.time&&(u=p.seconds,f=p.time),o.state==="started"&&h.state!=="started"&&(u+=h.time-f,h.time!==s.time&&(c={state:h.state,time:h.time,seconds:u})),o=h}),this._state.remove(s),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),o=Math.max(s.time,a.time),u=this.frequency.getTicksAtTime(o)+e-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),u.time-this.sampleTime,s),a=u});let o=null;if(a&&a.state==="started"){const u=Math.max(a.time,e),c=this.frequency.getTicksAtTime(u),h=this.frequency.getTicksAtTime(a.time),f=c-h;let p=Math.ceil(f)-f;p=oo(p,1)?0:p;let y=this.frequency.getTimeOfTick(c+p);for(;y<t;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(_){o=_;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let Kw=class Qw extends Gi{constructor(){const e=nn(Qw.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=pr,this._lastUpdate=0,this._state=new f2("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new v2({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Dr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Gi.getDefaults(),{callback:pr,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Pw(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};Cf.mixin(Kw);class nd extends fn{constructor(){const e=nn(nd.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ss({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Dr(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(fn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class y2 extends fn{constructor(){const e=nn(y2.getDefaults(),arguments);super(e),this.name="Destination",this.input=new nd({context:this.context}),this.output=new Ss({context:this.context}),this.volume=this.input.volume,cf(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(fn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),cf(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Wp(n=>{n.destination=new y2({context:n})});Gp(n=>{n.destination.dispose()});class xT extends fn{constructor(){super(...arguments),this.name="Listener",this.positionX=new wr({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new wr({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new wr({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new wr({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new wr({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new wr({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new wr({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new wr({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new wr({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(fn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Wp(n=>{n.listener=new xT({context:n})});Gp(n=>{n.listener.dispose()});class x2 extends Fl{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=nn(x2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:pr,onload:pr,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return sn(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=pr,a=pr){return Dl(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Mr(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new Mr(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class mp extends da{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return mu(super._frequencyToUnits(e))}_ticksToUnits(e){return mu(super._ticksToUnits(e))}_beatsToUnits(e){return mu(super._beatsToUnits(e))}_secondsToUnits(e){return mu(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Zw(this.toMidi())}transpose(e){return new mp(this.context,this.toMidi()+e)}}class kh extends Kd{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class wT extends Gi{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Oa,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Wp(n=>{n.draw=new wT({context:n})});Gp(n=>{n.draw.dispose()});class _T extends Fl{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){sn(Rn(e.time),"Events must have a time property"),sn(Rn(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new ST(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class ST{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class NT extends Fl{constructor(e){super(),this.name="TimelineValue",this._timeline=new Oa({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class jc extends fn{constructor(){super(nn(jc.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return m2(this,e,t,s),this}}class Tf extends jc{constructor(){const e=nn(Tf.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,pa(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):XC(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(_r.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,o=t;a<o;a++){const u=a/(o-1)*2-1;s[a]=e(u,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));sn(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Yp extends jc{constructor(){const e=nn(Yp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Tf({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(jc.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ec{constructor(e,t){this.id=Ec._eventId++,this._remainderTime=0;const s=Object.assign(Ec.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:pr,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ec._eventId=0;class w2 extends Ec{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(w2.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ec.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return pp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new kh(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){pp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new kh(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Hh(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Xp extends Gi{constructor(){const e=nn(Xp.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new NT(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Oa,this._repeatedEvents=new _T,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Kw({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Dr(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Gi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new kh(this.context,this._swingTicks*2/3).toSeconds()*a}Q5(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),Q5(!1)}schedule(e,t){const s=new Ec(this,{callback:e,time:new Kd(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const o=new w2(this,{callback:e,duration:new ho(this.context,a).toTicks(),interval:new ho(this.context,t).toTicks(),time:new Kd(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(e,t){const s=new Ec(this,{callback:e,once:!0,time:new Kd(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new kh(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Rn(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){pa(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new ho(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new ho(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new kh(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new kh(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),o=t+a;this.emit("stop",o),this._clock.setTicksAtTime(e,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,o=1/(60/a.getValueAtTime(s)/this.PPQ),u=[];if(e.units==="time"){const h=.015625/o,f=new Ss(h),p=new Yp(-1),y=new Ss(h);a.chain(f,p,y),a=y,o=1/o,u=[f,p,y]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/o:t=0);const c=new Ss(t);return a.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),u2(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Cf.mixin(Xp);Wp(n=>{n.transport=new Xp({context:n})});Gp(n=>{n.transport.dispose()});class di extends fn{constructor(e){super(e),this.input=void 0,this._state=new f2("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=pr,this._syncedStop=pr,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new nd({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Dr(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(fn.getDefaults(),{mute:!1,onstop:pr,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=La(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")sn(Hh(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const o=this._state.get(a);o&&(o.offset=this.toSeconds(Oh(t,0)),o.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,s)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else Pw(this.context),this._start(a,t,s);return this}stop(e){let t=La(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Rn(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Hh(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,o)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=pr,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Zp extends Wh{constructor(){const e=nn(Zp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,td(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new wr({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Mr(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Wh.getDefaults(),{url:new Mr,loop:!1,loopEnd:0,loopStart:0,onload:pr,onerror:pr,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){sn(this.buffer.loaded,"buffer is either not set or not loaded");const o=this.toSeconds(e);this._startGain(o,a),this.loop?t=Oh(t,this.loopStart):t=Oh(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=c-h;gg(u,c)&&(u=(u-h)%f+h),oo(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,pp(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),Rn(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(o+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ku(n,e){return ws(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new h2(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class _2 extends Wh{constructor(){const e=nn(_2.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],td(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new wr({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new wr({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Dr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Wh.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class xs extends di{constructor(){const e=nn(xs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new _r({context:this.context,units:"frequency",value:e.frequency}),Dr(this,"frequency"),this.detune=new _r({context:this.context,units:"cents",value:e.detune}),Dr(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(di.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new _2({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return xs._periodicWaveCache.find(t=>t.phase===this._phase&&aT(t.partials,this._partials));{const e=xs._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Rn(s)){const{partials:a,wave:o}=s;this._wave=o,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,o]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(a,o);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),xs._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),xs._periodicWaveCache.length>100&&xs._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Rl(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((o,u)=>a[u]=o),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const o=new Float32Array(a),u=new Float32Array(a);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[o,u]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(c=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let h=1;h<a;++h){const f=2/(h*Math.PI);let p;switch(e){case"sine":p=h<=c?1:0,this._partials[h-1]=p;break;case"square":p=h&1?2*f:0,this._partials[h-1]=p;break;case"sawtooth":p=f*(h&1?1:-1),this._partials[h-1]=p;break;case"triangle":h&1?p=2*(f*f)*(h-1>>1&1?-1:1):p=0,this._partials[h-1]=p;break;case"custom":p=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}p!==0?(o[h]=-p*Math.sin(t*h),u[h]=p*Math.cos(t*h)):(o[h]=0,u[h]=0)}return[o,u]}_inverseFFT(e,t,s){let a=0;const o=e.length;for(let u=0;u<o;u++)a+=e[u]*Math.cos(u*s)+t[u]*Math.sin(u*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,o=32;for(let u=0;u<o;u++)s=Math.max(this._inverseFFT(e,t,u/o*a),s);return lT(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}xs._periodicWaveCache=[];class Jw extends jc{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Tf({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Il extends _r{constructor(){const e=nn(Il.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ss({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_r.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Kp extends di{constructor(){const e=nn(Kp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new Jw({context:this.context}),this._modulationNode=new Ss({context:this.context}),this._carrier=new xs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new xs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Il({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Dr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(xs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Qp extends di{constructor(){const e=nn(Qp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ss({context:this.context,gain:0}),this._carrier=new xs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new _r({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new xs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Il({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Il({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Dr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(xs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class kf extends di{constructor(){const e=nn(kf.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ss({context:this.context,gain:0}),this._thresh=new Tf({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new _r({context:this.context,units:"audioRange",value:e.width}),this._triangle=new xs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Dr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(di.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Jp extends di{constructor(){const e=nn(Jp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new _r({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _r({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Dr(this,["frequency","detune"])}static getDefaults(){return Object.assign(xs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,o)=>a.detune.value=t+s*o)}}get count(){return this._oscillators.length}set count(e){if(Rl(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new xs({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):pr});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class e0 extends di{constructor(){const e=nn(e0.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Il({context:this.context,value:2}),this._pulse=new kf({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new xs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Dr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(di.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const J5={am:Kp,fat:Jp,fm:Qp,oscillator:xs,pulse:kf,pwm:e0};class Mc extends di{constructor(){const e=nn(Mc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new _r({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _r({context:this.context,units:"cents",value:e.detune}),Dr(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(xs.getDefaults(),Qp.getDefaults(),Kp.getDefaults(),Jp.getDefaults(),kf.getDefaults(),e0.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=J5[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof J5[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ol(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ol(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Dl(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ws(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class S2 extends _r{constructor(){super(nn(S2.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Ss({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,cf(this._constantSource,this._sum)}static getDefaults(){return Object.assign(_r.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class N2 extends jc{constructor(){const e=nn(N2.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Il({context:this.context,value:e.max-e.min}),this._add=this.output=new S2({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(jc.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function e3(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Rl(o,n,e),t.set(this,o)}})}}function Bl(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Rl(this.toSeconds(o),n,e),t.set(this,o)}})}}class t0 extends di{constructor(){const e=nn(t0.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Mr({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(di.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:pr,onerror:pr,playbackRate:1,reverse:!1})}load(e){return ws(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=pr){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Oh(t,this._loopStart):t=Oh(t,0);const a=this.toSeconds(t),o=s;s=Oh(s,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(s);u=u/this._playbackRate,e=this.toSeconds(e);const c=new Zp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&La(o)?c.start(e,a):c.start(e,a,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Rl(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Rl(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}xo([Bl(0)],t0.prototype,"fadeIn",void 0);xo([Bl(0)],t0.prototype,"fadeOut",void 0);class ma extends fn{constructor(){const e=nn(ma.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new _r({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(fn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Dl(e))return e;{let s;for(s in O1)if(O1[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Dl(s)&&Reflect.has(O1,s)){const a=O1[s];bu(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(pa(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const o=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/a;a=(1-u)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let h=1;h<c.length;h++)if(c[h-1]<=u&&u<=c[h]){c=this._attackCurve.slice(h),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,a,t)}if(o&&this.sustain<1){const c=t*this.sustain,h=e+a;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,o+h):this._sig.exponentialApproachValueAtTime(c,h,o)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(sn(pa(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return m2(this,e,t,s),this}asArray(){return ws(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new h2(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o*.1,c=o+u,h=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return h._sig.toDestination(),h.triggerAttackRelease(t*(a+u)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}xo([Bl(0)],ma.prototype,"attack",void 0);xo([Bl(0)],ma.prototype,"decay",void 0);xo([e3(0,1)],ma.prototype,"sustain",void 0);xo([Bl(0)],ma.prototype,"release",void 0);const O1=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],o=6.4;for(e=0;e<127;e++){t=e/127;const _=Math.sin(t*(Math.PI*2)*o-Math.PI/2)+1;a[e]=_/10+t*.83}a[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const h=[];for(e=0;e<128;e++)t=e/127,h[e]=.5*(1-Math.cos(Math.PI*t));const f=[];for(e=0;e<128;e++){t=e/127;const _=Math.pow(t,3)*4+.2,b=Math.cos(_*Math.PI*2*t);f[e]=Math.abs(b*(1-t))}function p(_){const b=new Array(_.length);for(let N=0;N<_.length;N++)b[N]=1-_[N];return b}function y(_){return _.slice(0).reverse()}return{bounce:{In:p(f),Out:f},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:p(a)},sine:{In:h,Out:p(h)},step:{In:u,Out:p(u)}}})();class Lc extends fn{constructor(){const e=nn(Lc.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new nd({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Dr(this,"volume")}static getDefaults(){return Object.assign(fn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const o=a[t],u=this.context.transport.schedule(c=>{a[t]=c,s.apply(this,a)},o);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s),u=this.toSeconds(t);return this.triggerAttack(e,o,a),this.triggerRelease(o+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class po extends Lc{constructor(){const e=nn(po.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Lc.getDefaults(),{detune:0,onsilence:pr,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof da?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,o,s)}else this.frequency.setValueAtTime(a,s);return this}}xo([Bl(0)],po.prototype,"portamento",void 0);class n0 extends ma{constructor(){super(nn(n0.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ss({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ha extends po{constructor(){const e=nn(ha.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Mc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new n0(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Dr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(po.getDefaults(),{envelope:Object.assign(co(ma.getDefaults(),Object.keys(fn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(co(Mc.getDefaults(),[...Object.keys(di.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class uf extends po{constructor(){const e=nn(uf.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new ha({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new ha({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new _r({context:this.context,units:"frequency"}),this.detune=new _r({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Il({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new Ss({context:this.context,gain:0}),Dr(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(po.getDefaults(),{harmonicity:3,oscillator:Object.assign(co(Mc.getDefaults(),[...Object.keys(di.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(co(ma.getDefaults(),Object.keys(fn.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(co(Mc.getDefaults(),[...Object.keys(di.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(co(ma.getDefaults(),Object.keys(fn.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class gp extends uf{constructor(){super(nn(gp.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Jw({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class bp extends fn{constructor(){const e=nn(bp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new wr({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new wr({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new wr({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new wr({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(fn.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){sn(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const h=Math.pow(u/e,2)*19980+20;t[u]=h}const s=new Float32Array(e),a=new Float32Array(e),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class vp extends fn{constructor(){const e=nn(vp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Ss({context:this.context}),this.output=new Ss({context:this.context}),this._filters=[],this._filters=[],this.Q=new _r({context:this.context,units:"positive",value:e.Q}),this.frequency=new _r({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _r({context:this.context,units:"cents",value:e.detune}),this.gain=new _r({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Dr(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(fn.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){sn(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Ol(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);sn(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(o=>o.disconnect()),this._filters=new Array(a);for(let o=0;o<a;o++){const u=new bp({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[o]=u}this._internalChannels=this._filters,cf(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new bp({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((o,u)=>s[u]*=o)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),u2(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class yp extends ma{constructor(){const e=nn(yp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Yp({context:this.context,value:e.exponent}),this._scale=this.output=new N2({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ma.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Rl(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class xp extends po{constructor(){const e=nn(xp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new Mc(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new vp(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new yp(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new n0(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Dr(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(po.getDefaults(),{envelope:Object.assign(co(ma.getDefaults(),Object.keys(fn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(co(vp.getDefaults(),Object.keys(fn.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(co(yp.getDefaults(),Object.keys(fn.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(co(Mc.getDefaults(),Object.keys(di.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Qd extends uf{constructor(){const e=nn(Qd.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Il({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(uf.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class r0 extends ha{constructor(){const e=nn(r0.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Dr(this,["oscillator","envelope"])}static getDefaults(){return vu(po.getDefaults(),ha.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof da?e.toFrequency():e),o=a*this.octaves;return this.oscillator.frequency.setValueAtTime(o,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}xo([e3(0)],r0.prototype,"octaves",void 0);xo([Bl(0)],r0.prototype,"pitchDecay",void 0);const t3=new Set;function A2(n){t3.add(n)}function n3(n,e){const t=`registerProcessor("${n}", ${e})`;t3.add(t)}const AT=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;A2(AT);const CT=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;A2(CT);const TT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;A2(TT);const kT="feedback-comb-filter",jT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;n3(kT,jT);class wi extends Lc{constructor(){const e=nn(wi.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),sn(!Ol(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Lc.getDefaults(),{maxPolyphony:32,options:{},voice:ha})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return sn(e instanceof po,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Hp("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const o=new mp(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,t,s),this._activeVoices.push({midi:o,voice:u,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new mp(this.context,s).toMidi(),o=this._activeVoices.find(({midi:u,released:c})=>u===a&&!c);o&&(o.voice.triggerRelease(t),o.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){sn(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s);if(this.triggerAttack(e,o,a),pa(t)){sn(pa(e),"If the duration is an array, the notes must also be an array"),e=e;for(let u=0;u<e.length;u++){const c=t[Math.min(u,t.length-1)],h=this.toSeconds(c);sn(h>0,"The duration must be greater than 0"),this.triggerRelease(e[u],o+h)}}else{const u=this.toSeconds(t);sn(u>0,"The duration must be greater than 0"),this.triggerRelease(e,o+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=co(e,["onsilence","context"]);return this.options=vu(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class rd extends Lc{constructor(){const e=nn(rd.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(sn(L1(s)||Ol(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),L1(s)){const o=new da(this.context,s).toMidi();t[o]=e.urls[s]}else Ol(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new x2({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Lc.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:pr,onerror:pr,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const o=Xw(new da(this.context,a).toFrequency()),u=Math.round(o),c=o-u,h=this._findClosest(u),f=u-h,p=this._buffers.get(f),y=Yw(h+c),_=new Zp({url:p,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);_.start(t,0,p.duration/y,s),pa(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(_),_.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),N=b.indexOf(_);N!==-1&&b.splice(N,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new da(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const o=this._activeSources.get(a);t=this.toSeconds(t),o.forEach(u=>{u.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const o=this.toSeconds(s);return this.triggerAttack(e,o,a),pa(t)?(sn(pa(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const h=t[Math.min(c,t.length-1)];this.triggerRelease(u,o+this.toSeconds(h))})):this.triggerRelease(e,o+this.toSeconds(t)),this}add(e,t,s){if(sn(L1(e)||isFinite(e),`note must be a pitch or midi: ${e}`),L1(e)){const a=new da(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}xo([Bl(0)],rd.prototype,"attack",void 0);xo([Bl(0)],rd.prototype,"release",void 0);class C2 extends fn{constructor(){const e=nn(C2.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new wr({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Dr(this,"pan")}static getDefaults(){return Object.assign(fn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const ET="bit-crusher",MT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;n3(ET,MT);class ys extends fn{constructor(){const e=nn(ys.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ss({context:this.context}),ys._allSolos.has(this.context)||ys._allSolos.set(this.context,new Set),ys._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(fn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ys._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ys._soloed.has(this.context)||ys._soloed.set(this.context,new Set),ys._soloed.get(this.context).add(this)}_removeSolo(){ys._soloed.has(this.context)&&ys._soloed.get(this.context).delete(this)}_isSoloed(){return ys._soloed.has(this.context)&&ys._soloed.get(this.context).has(this)}_noSolos(){return!ys._soloed.has(this.context)||ys._soloed.has(this.context)&&ys._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ys._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ys._allSolos=new Map;ys._soloed=new Map;class T2 extends fn{constructor(){const e=nn(T2.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new C2({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new nd({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Dr(this,["pan","volume"])}static getDefaults(){return Object.assign(fn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class jh extends fn{constructor(){const e=nn(jh.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new ys({solo:e.solo,context:this.context}),this._panVol=this.output=new T2({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Dr(this,["pan","volume"])}static getDefaults(){return Object.assign(fn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return jh.buses.has(e)||jh.buses.set(e,new Ss({context:this.context})),jh.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new Ss({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}jh.buses=new Map;const Wi=uo().transport,r3=uo().destination;uo().destination;uo().listener;uo().draw;const _s=uo();function LT(){return Mr.loaded()}const D1=({cx:n,cy:e,innerRadius:t,outerRadius:s,startAngle:a,endAngle:o,color:u,label:c,chord:h,isSelected:f,isDiatonic:p,isSecondary:y=!1,onClick:_,onDoubleClick:b,ringType:N="major",wheelRotation:A=0,romanNumeral:k,voicingSuggestion:C,segmentId:O="seg",onHover:R})=>{const V=qS(n,e,t,s,a,o),B=(a+o)/2,U=An.useRef(0),z=An.useRef(null),[L,F]=An.useState(!1),J=An.useRef(null),j=An.useRef(!1),I=An.useRef(!1),X=-A,P=s-t,ie=t+P*.5,Y=t+P*.18,ne=Cc(n,e,ie,B),le=Cc(n,e,Y,B),pe=s-6,we=zS(n,e,pe,a+1,o-1),q=`voicing-arc-${O}`,E=`clip-${O}`,te=(()=>{let Ue=.35,ht=.5;p?(Ue=1,ht=1):y&&(Ue=.7,ht=.65);const Ae=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(Ae){const Ke=parseInt(Ae[1]),bt=Math.round(parseInt(Ae[2])*ht),mt=parseInt(Ae[3]);let st=mt;return N==="minor"?st=Math.max(mt-8,30):N==="diminished"&&(st=Math.max(mt-15,25)),{fill:`hsl(${Ke}, ${bt}%, ${st}%)`,opacity:Ue}}return{fill:u,opacity:Ue}})(),ae=()=>N==="diminished"?"10px":N==="minor"?"12px":"14px",re=p||y,de=re?"#000000":"rgba(255,255,255,0.7)",ce=p?"bold":y?"600":"normal",ve=N==="diminished"||N==="minor"?"6px":"8px",_e=N==="major"?re?6:5:N==="minor"?re?4:3.25:re?3.5:3,Ve=re?1:.95,Xe=Ue=>{if(F(!0),Ue.touches.length>=2){I.current=!0,J.current=null;return}Ue.touches.length===1&&!I.current&&(J.current={x:Ue.touches[0].clientX,y:Ue.touches[0].clientY},j.current=!1)},Je=Ue=>{if(Ue.touches.length>=2){I.current=!0,j.current=!0;return}if(J.current&&Ue.touches.length===1&&!I.current){const ht=Ue.touches[0],Ae=ht.clientX-J.current.x,Ke=ht.clientY-J.current.y;Math.sqrt(Ae*Ae+Ke*Ke)>15&&(j.current=!0)}},at=async Ue=>{Ue.preventDefault(),Ue.stopPropagation(),F(!1);const ht=I.current,Ae=j.current;if(J.current=null,j.current=!1,Ue.touches.length===0&&(I.current=!1),ht||Ae)return;_s.state!=="running"&&await Tu();const Ke=Date.now(),bt=Ke-U.current;z.current&&(clearTimeout(z.current),z.current=null),bt<300&&bt>0?(U.current=0,b&&b(h)):(U.current=Ke,z.current=setTimeout(()=>{_(h),z.current=null},300))},G=()=>{F(!1),J.current=null,j.current=!1,I.current=!1,z.current&&(clearTimeout(z.current),z.current=null)},Ee=Ue=>{Ue.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),R&&R(null,0,0),_(h)},xt=Ue=>{Ue.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),R&&R(null,0,0),b&&b(h)},et=An.useRef(null),De=Ue=>{if(!R)return;const ht=Ue.clientX,Ae=Ue.clientY;et.current=setTimeout(()=>{R("Select a chord slot in the timeline, then double-click a chord or chord voicing to add to the timeline.",ht,Ae)},3e3)},rt=()=>{et.current&&(clearTimeout(et.current),et.current=null),R&&R(null,0,0)};return m.jsxs("g",{className:Pt("cursor-pointer transition-all duration-200",!re&&"hover:opacity-70",L&&"opacity-80"),onClick:Ee,onDoubleClick:xt,onTouchStart:Xe,onTouchMove:Je,onTouchEnd:at,onTouchCancel:G,onMouseEnter:De,onMouseLeave:rt,style:{pointerEvents:"all",WebkitTapHighlightColor:"transparent"},children:[(p||y)&&C&&m.jsx("defs",{children:m.jsx("path",{id:q,d:we,fill:"none"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:E,children:m.jsx("path",{d:V})})}),m.jsx("path",{d:V,fill:te.fill,opacity:te.opacity,stroke:k==="I"?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",strokeWidth:k==="I"?2.5:1,className:Pt("transition-all duration-200 hover:brightness-110",f&&"brightness-125 stroke-white stroke-2",re&&"hover:brightness-105"),style:{pointerEvents:"all"}}),f&&m.jsx("path",{d:V,fill:"none",stroke:"white",strokeWidth:_e,opacity:Ve,filter:"url(#segment-glow)",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none",clipPath:`url(#${E})`}),(p||y)&&C&&N==="major"&&m.jsx("text",{fill:"rgba(0,0,0,0.6)",fontSize:"6px",className:"pointer-events-none select-none",children:m.jsx("textPath",{href:`#${q}`,startOffset:"50%",textAnchor:"middle",children:C})}),p&&C&&N==="minor"&&m.jsx("text",{fill:"rgba(0,0,0,0.55)",fontSize:"5px",className:"pointer-events-none select-none",children:m.jsx("textPath",{href:`#${q}`,startOffset:"50%",textAnchor:"middle",children:C})}),p&&C&&N==="diminished"&&m.jsx("text",{fill:"rgba(0,0,0,0.5)",fontSize:"5px",className:"pointer-events-none select-none",children:m.jsx("textPath",{href:`#${q}`,startOffset:"50%",textAnchor:"middle",children:C})}),m.jsx("text",{x:ne.x,y:ne.y,textAnchor:"middle",dominantBaseline:"middle",fill:de,fontWeight:ce,fontSize:ae(),className:"pointer-events-none select-none",transform:`rotate(${X}, ${ne.x}, ${ne.y})`,children:Mn(c)}),(p||y)&&k&&m.jsx("text",{x:le.x,y:le.y,textAnchor:"middle",dominantBaseline:"middle",fill:"rgba(0,0,0,0.6)",fontSize:ve,fontStyle:"italic",className:"pointer-events-none select-none",transform:`rotate(${X}, ${le.x}, ${le.y})`,children:k})]})};const OT=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),ey=n=>{const e=DT(n);return e.charAt(0).toUpperCase()+e.slice(1)},s3=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),RT=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var IT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const VT=K.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:u,...c},h)=>K.createElement("svg",{ref:h,...IT,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:s3("lucide",a),...!o&&!RT(c)&&{"aria-hidden":"true"},...c},[...u.map(([f,p])=>K.createElement(f,p)),...Array.isArray(o)?o:[o]]));const Kt=(n,e)=>{const t=K.forwardRef(({className:s,...a},o)=>K.createElement(VT,{ref:o,iconNode:e,className:s3(`lucide-${OT(ey(n))}`,`lucide-${n}`,s),...a}));return t.displayName=ey(n),t};const FT=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],BT=Kt("arrow-down",FT);const PT=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],zT=Kt("arrow-up",PT);const qT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],UT=Kt("check",qT);const HT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Eh=Kt("chevron-down",HT);const WT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gh=Kt("chevron-right",WT);const GT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$h=Kt("chevron-left",GT);const $T=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],i3=Kt("chevron-up",$T);const YT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],XT=Kt("circle-alert",YT);const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Dh=Kt("circle-question-mark",ZT);const KT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],QT=Kt("circle",KT);const JT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ek=Kt("clock",JT);const tk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nk=Kt("copy",tk);const rk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],s0=Kt("download",rk);const sk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ik=Kt("ellipsis-vertical",sk);const ak=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],ok=Kt("eraser",ak);const lk=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],ck=Kt("file-plus",lk);const uk=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],hk=Kt("folder-open",uk);const dk=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],a3=Kt("grip-vertical",dk);const fk=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],o3=Kt("hand",fk);const pk=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mk=Kt("hash",pk);const gk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bk=Kt("info",gk);const vk=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],yk=Kt("layers",vk);const xk=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],l3=Kt("list-music",xk);const wk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_k=Kt("loader-circle",wk);const Sk=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],wp=Kt("map",Sk);const Nk=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Ak=Kt("mic",Nk);const Ck=[["path",{d:"M5 12h14",key:"1ays0h"}]],Tk=Kt("minus",Ck);const kk=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],jk=Kt("mouse-pointer-2",kk);const Ek=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],_p=Kt("music",Ek);const Mk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Lk=Kt("panel-right-close",Mk);const Ok=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Dk=Kt("panel-right",Ok);const Rk=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],c3=Kt("pause",Rk);const Ik=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ju=Kt("play",Ik);const Vk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Oc=Kt("plus",Vk);const Fk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bk=Kt("refresh-cw",Fk);const Pk=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ty=Kt("repeat",Pk);const zk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sp=Kt("rotate-ccw",zk);const qk=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Yh=Kt("rotate-cw",qk);const Uk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],bg=Kt("save",Uk);const Hk=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],u3=Kt("settings-2",Hk);const Wk=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],ny=Kt("share",Wk);const Gk=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],h3=Kt("skip-back",Gk);const $k=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],d3=Kt("skip-forward",$k);const Yk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Xk=Kt("sparkles",Yk);const Zk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],k2=Kt("square",Zk);const Kk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Qk=Kt("tag",Kk);const Jk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hf=Kt("trash-2",Jk);const ej=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tj=Kt("trash",ej);const nj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rj=Kt("upload",nj);const sj=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],vg=Kt("volume-2",sj);const ij=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],aj=Kt("volume-x",ij);const oj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$o=Kt("x",oj);const lj=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],cj=Kt("zoom-in",lj);const uj=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],hj=Kt("zoom-out",uj);let Yo={piano:null,epiano:null,guitar:null,organ:null,synth:null,strings:null,pad:null,brass:null,marimba:null,bell:null,lead:null,bass:null,choir:null},Np="piano",Gd=null,X1=[],Ap={},ry=!1,Ui=null;const j2=()=>{if(Ui)return;if("audioSession"in navigator)try{navigator.audioSession.type="playback",console.log("[iOS Audio] Set audioSession.type to playback")}catch(t){console.warn("[iOS Audio] Could not set audioSession type:",t)}const n=["/+NIxAAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/","40jEAA8AAAANIAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU"].join("");Ui=document.createElement("audio"),Ui.src="data:audio/mpeg;base64,"+n,Ui.loop=!0,Ui.volume=.001,Ui.muted=!1,Ui.setAttribute("playsinline","true"),Ui.setAttribute("x-webkit-airplay","deny"),Ui.preload="auto",document.body.appendChild(Ui);const e=Ui.play();e!==void 0&&e.then(()=>{console.log("[iOS Audio] Silent media started - ringer switch workaround active")}).catch(t=>{console.log("[iOS Audio] Silent audio deferred until user gesture:",t.message)})},E2=async()=>{if(!ry){if(console.log("[iOS Audio] Starting unlock sequence..."),j2(),Ui&&Ui.paused)try{await Ui.play(),console.log("[iOS Audio] Silent audio now playing")}catch(n){console.warn("[iOS Audio] Silent audio play failed:",n)}try{await Tu(),console.log("[iOS Audio] Tone.start() completed, state:",_s.state)}catch(n){console.warn("[iOS Audio] Tone.start() failed:",n)}if(_s.state!=="running")try{await _s.resume(),console.log("[iOS Audio] Context resumed, state:",_s.state)}catch(n){console.warn("[iOS Audio] Context resume failed:",n)}ry=!0,console.log("[iOS Audio] Unlock sequence complete")}},dj=n=>{if(!n.samples||Object.keys(n.samples).length===0)return null;try{return new rd({urls:n.samples,release:1}).toDestination()}catch(e){return console.error(`Failed to create custom sampler for ${n.name}`,e),null}},M2=()=>{const{customInstruments:n}=Wt.getState();n.forEach(e=>{if(!Yo[e.id]){const t=dj(e);t&&(Yo[e.id]=t)}})},L2=n=>{Np!==n&&(Np=n,Yo[n]||M2())},f3=n=>{const e=n<=0?-1/0:20*Math.log10(n);try{r3.volume.rampTo(e,.1)}catch(t){console.error("Error setting volume:",t)}},p3=n=>{r3.mute=n},Pl=async()=>{if(Gd)return Gd;Gd=(async()=>{const n="https://tonejs.github.io/audio/salamander/",e=(t,s)=>{if(!Yo[t])try{const a=s();a&&(Yo[t]=a)}catch(a){console.error(`Failed to init instrument "${t}"`,a)}};e("piano",()=>new rd({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:n}).toDestination()),e("guitar",()=>new wi(ha,{oscillator:{type:"triangle"},envelope:{attack:.002,decay:.25,sustain:.3,release:1.2},filter:{type:"lowpass",frequency:2400,rolloff:-12,Q:1.2},filterEnvelope:{attack:.002,decay:.25,sustain:.2,release:.8,baseFrequency:800,octaves:2.5}}).toDestination()),e("organ",()=>new wi(gp,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("synth",()=>new wi(Qd,{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("epiano",()=>new wi(gp,{harmonicity:2,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.7,release:.8},modulation:{type:"sine"},modulationEnvelope:{attack:.2,decay:.1,sustain:.6,release:.6}}).toDestination()),e("strings",()=>new wi(ha,{oscillator:{type:"sawtooth"},envelope:{attack:.2,decay:.2,sustain:.8,release:1.2}}).toDestination()),e("pad",()=>new wi(Qd,{harmonicity:1.5,modulationIndex:8,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.9,release:1.5},modulation:{type:"triangle"},modulationEnvelope:{attack:.8,decay:.3,sustain:.8,release:1.2}}).toDestination()),e("brass",()=>new wi(xp,{oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.02,decay:.25,sustain:.6,release:.7},filterEnvelope:{attack:.01,decay:.2,sustain:.8,release:.4,baseFrequency:200,octaves:2.5}}).toDestination()),e("marimba",()=>new wi(ha,{oscillator:{type:"triangle"},envelope:{attack:.001,decay:.35,sustain:0,release:.6}}).toDestination()),e("bell",()=>new wi(Qd,{harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:1.2,sustain:0,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:0,release:1.2}}).toDestination()),e("lead",()=>new wi(ha,{oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.15,sustain:.6,release:.35}}).toDestination()),e("bass",()=>new wi(xp,{oscillator:{type:"square"},filter:{type:"lowpass",rolloff:-24,Q:2},envelope:{attack:.01,decay:.2,sustain:.6,release:.4},filterEnvelope:{attack:.001,decay:.15,sustain:.4,release:.2,baseFrequency:80,octaves:3}}).toDestination()),e("choir",()=>new wi(ha,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),e("choir",()=>new wi(ha,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),M2(),await LT()})();try{await Gd}catch(n){Gd=null,console.error("Failed to initialize audio",n)}},sy=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],qr=async(n,e="1n",t)=>{if(_s.state!=="running"&&await Tu(),_s.state==="suspended"&&await _s.resume(),await Pl(),!n||n.length===0)return;const s=n[0],a=sy.indexOf(s.replace(/\d/,"")),o=n.map((c,h)=>{if(c.match(/\d/))return c;const f=c,p=sy.indexOf(f);if(h===0)return`${f}3`;let y=3;return(p<a||p-a>6)&&(y=4),h>=4&&(y=4),h>=5&&(y=5),`${f}${y}`});let u=Yo[Np];if(u||(u=Yo.piano),!u){console.error("No instrument available to play!");return}try{u.triggerAttackRelease(o,e,t)}catch(c){console.error("Failed to play chord",c)}},m3=async(n,e=4,t="8n")=>{_s.state!=="running"&&await Tu(),_s.state==="suspended"&&await _s.resume(),await Pl();let s=Yo[Np];if(s||(s=Yo.piano),!s){console.error("No instrument available to play!");return}const a=`${n}${e}`;try{s.triggerAttackRelease(a,t)}catch(o){console.error(`Failed to play note ${a}`,o)}},g3=()=>{Object.values(Yo).forEach(t=>t?.releaseAll()),Wi.stop();const{setPlayingSlot:n,setIsPlaying:e}=Wt.getState();n(null,null),e(!1)},df=n=>{const e=Math.floor(n/4),t=Math.floor(n%4),s=Math.floor(n%1*4);return`${e}:${t}:${s}`},O2=n=>{Wi.cancel(0),X1=[],Ap={},Wi.timeSignature=4;let e=0;n.sections.forEach(s=>{Ap[s.id]=e,s.measures.forEach(a=>{a.beats.forEach(o=>{const u=df(e),c=o.duration,h=c*4,f=`${Math.floor(h/16)}:${Math.floor(h%16/4)}:${h%4}`,p=Wi.schedule(y=>{const b=Math.max(0,y-_s.currentTime)*1e3;setTimeout(()=>{Wt.getState().setPlayingSlot(s.id,o.id)},b),o.chord&&qr(o.chord.notes,f,y)},u);X1.push(p),e+=c})})});const t=Wi.schedule(()=>{Wt.getState().isLooping||g3()},df(e));X1.push(t)},fj=async()=>{await Pl()},b3=async()=>{await Pl(),_s.state!=="running"&&await _s.resume();const{tempo:n,currentSong:e}=Wt.getState();Wi.bpm.value=n,X1.length===0&&O2(e),Wi.start()},v3=()=>{Wi.pause()},y3=n=>{Wi.bpm.value=n},x3=n=>{const{currentSong:e,playingSectionId:t}=Wt.getState(),s=e.sections.map(p=>p.id);let a=t?s.indexOf(t):-1;a===-1&&(a=0);let o=n==="next"?a+1:a-1;o>=s.length&&(o=0),o<0&&(o=0);const u=s[o],c=Ap[u]||0,h=df(c);Wi.position=h;const f=e.sections[o].measures[0]?.beats[0];f&&Wt.getState().setPlayingSlot(u,f.id)},w3=()=>{const{isLooping:n,playingSectionId:e,selectedSectionId:t,currentSong:s}=Wt.getState();if(n){const a=e||t,o=s.sections.find(u=>u.id===a);if(o){const u=Ap[o.id]??0;let c=0;o.measures.forEach(f=>f.beats.forEach(p=>c+=p.duration));const h=u+c;Wi.loopStart=df(u),Wi.loopEnd=df(h),Wi.loop=!0;return}}Wi.loop=!1},yg=Object.freeze(Object.defineProperty({__proto__:null,initAudio:Pl,pauseSong:v3,playChord:qr,playNote:m3,playSong:b3,preloadAudio:fj,reloadCustomInstruments:M2,scheduleSong:O2,setInstrument:L2,setMute:p3,setTempo:y3,setVolume:f3,skipToSection:x3,startSilentAudioForIOS:j2,stopAudio:g3,toggleLoopMode:w3,unlockAudioForIOS:E2},Symbol.toStringTag,{value:"Module"})),Cp=768;function D2(){const[n,e]=K.useState(()=>typeof window<"u"?window.innerWidth<Cp:!1);return K.useEffect(()=>{const t=()=>e(window.innerWidth<Cp);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),n}function Eu(){const[n,e]=K.useState(()=>typeof window<"u"?window.innerWidth<Cp||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[t,s]=K.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1);return K.useEffect(()=>{const a=()=>{const o=window.innerWidth,u=window.innerHeight,c=o<Cp||u<500&&u<o,h=u<o&&u<500;e(c),s(h)};return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),{isMobile:n,isLandscape:t}}var Ho=Ux();const pj=7e3,mj=({isOpen:n,onClose:e,onSelect:t,onAddToTimeline:s,onOpenDetails:a,chordRoot:o,voicings:u,selectedQuality:c,portraitWithPanel:h=!1})=>{const f=K.useRef(null),{isMobile:p,isLandscape:y}=Eu(),_=p&&y,[b,N]=K.useState(c),A=K.useRef(null),k=K.useRef(null);K.useEffect(()=>{n&&N(c)},[n,c]);const C=K.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{e()},pj)},[e]);if(K.useEffect(()=>(n&&C(),()=>{k.current&&clearTimeout(k.current)}),[n,C]),K.useEffect(()=>{if(!n)return;const R=B=>{f.current&&!f.current.contains(B.target)&&e()},V=setTimeout(()=>{document.addEventListener("mousedown",R),document.addEventListener("touchstart",R)},100);return()=>{clearTimeout(V),document.removeEventListener("mousedown",R),document.removeEventListener("touchstart",R)}},[n,e]),K.useEffect(()=>{if(!n)return;const R=V=>{V.key==="Escape"&&e()};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[n,e]),!n)return null;const O=R=>{const V=Date.now();if(C(),A.current&&A.current.quality===R&&V-A.current.time<400){s&&s(R),e(),A.current=null;return}const B=ca(o,R);qr(B),N(R),t(R),A.current={quality:R,time:V}};return Ho.createPortal(m.jsxs("div",{ref:f,className:Pt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row flex-nowrap items-center justify-center","animate-in fade-in zoom-in-95 duration-150",u.length>5||_?"p-1 gap-1":"p-2 gap-2"),style:{bottom:_?"56px":h?"6%":p?"13%":"220px",top:"auto",..._?{left:"24%",transform:"translateX(-50%)",maxWidth:"min(55vw, fit-content)"}:p?{left:"50%",transform:"translateX(-50%)",maxWidth:"calc(100vw - 32px)"}:{right:"340px",left:"auto",transform:"none",maxWidth:"calc(100vw - 400px)"},zIndex:99999},children:[u.map(R=>{const V=R.quality===b,B=u.length>4||_,U=u.length>=6;return m.jsx("button",{onClick:z=>{z.stopPropagation(),O(R.quality)},onTouchEnd:z=>{z.stopPropagation()},className:Pt("flex items-center justify-center rounded-lg transition-all shrink-0",U?"min-w-[32px] h-9 px-0.5":B?"min-w-[40px] h-10 px-1.5":"min-w-[48px] h-12 px-2",V?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`Tap to preview, double-tap to add ${o}${R.label}`,children:m.jsx("span",{className:Pt("font-semibold",U?"text-[10px]":B?"text-xs":V?"text-sm":"text-xs"),children:R.label||"maj"})},R.quality)}),u.length>0&&m.jsx("div",{className:"w-px bg-border-subtle self-stretch my-1 shrink-0"}),a&&m.jsx("button",{onClick:R=>{R.stopPropagation(),a(),e()},onTouchEnd:R=>{R.preventDefault(),R.stopPropagation(),a(),e()},className:Pt("flex items-center justify-center rounded-lg transition-all shrink-0","text-text-tertiary hover:text-text-secondary hover:bg-bg-tertiary",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Open chord details",children:m.jsx(bk,{size:u.length>=6?12:u.length>4||_?14:16})}),s&&m.jsx("button",{onClick:R=>{R.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},onTouchEnd:R=>{R.preventDefault(),R.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},className:Pt("flex items-center justify-center rounded-lg transition-all shrink-0","text-accent-primary hover:text-white hover:bg-accent-primary/20",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Add to timeline",children:m.jsx(Oc,{size:u.length>=6?14:u.length>4||_?16:18})})]}),document.body)};function gj(n,e){if(!n)return[];const t=n.split(/,\s*|\s+or\s+/).map(a=>a.trim()).filter(Boolean),s=[];e==="major"?s.push({quality:"major",label:""}):e==="minor"?s.push({quality:"minor",label:"m"}):e==="diminished"&&s.push({quality:"diminished",label:""});for(const a of t){let o=a,u=a;a==="6"?(o="major6",u="6"):a==="m6"?(o="minor6",u="m6"):a==="m75 (7)"?(o="halfDiminished7",u="7"):a==="m7"?(o="minor7",u="m7"):a==="m9"?(o="minor9",u="m9"):a==="m11"?(o="minor11",u="m11"):a==="sus4"?(o="sus4",u="sus4"):a==="7"?(o="dominant7",u="7"):a==="9"?(o="dominant9",u="9"):a==="11"?(o="dominant11",u="11"):a==="13"?(o="dominant13",u="13"):a==="maj7"?(o="major7",u="maj7"):a==="maj9"?(o="major9",u="maj9"):a==="maj13"&&(o="major13",u="maj13"),s.push({quality:o,label:u})}return s}const bj=({zoomScale:n,zoomOriginY:e,onZoomChange:t,panOffset:s,onPanChange:a,rotationOffset:o=0,disableModeToggle:u=!1,footerVisible:c=!0})=>{const{selectedKey:h,setKey:f,wheelRotation:p,wheelMode:y,rotateWheel:_,toggleWheelMode:b,addChordToSlot:N,selectedSectionId:A,selectedSlotId:k,setSelectedChord:C,selectedChord:O,selectNextSlotAfter:R,setSelectedSlot:V,timelineVisible:B,openTimeline:U,chordPanelVisible:z,toggleChordPanel:L,pulseChordPanel:F,chordPanelGuitarExpanded:J,chordPanelVoicingsExpanded:j}=Wt(),I=gu.indexOf(h),X=-(I*30);let P;o!==0?P=X+o:y==="rotating"?P=p:P=0;const ie=K.useRef(null),Y=K.useRef(null),[ne,le]=K.useState(null),[pe,we]=K.useState({x:0,y:0}),[q,E]=K.useState({isOpen:!1,chord:null,voicingSuggestion:"",baseQuality:""}),$=s??pe,te=K.useCallback(Le=>{a?a(Le):we(Le)},[a]),ae=D2(),{isLandscape:re}=Eu();K.useEffect(()=>{const Le=O?.segmentId??null;le(Le)},[O]);const de=K.useRef(null),ce=K.useRef(null),[ve,_e]=K.useState(!1),Ve=K.useRef(0),Xe=K.useRef(0),[Je,at]=K.useState(!1),G=K.useRef(null),Ee=K.useCallback((Le,Be)=>{if(!ce.current)return 0;const nt=ce.current.getBoundingClientRect(),It=nt.left+nt.width/2,Gt=nt.top+nt.height/2,Ht=Le-It,At=Be-Gt;return Math.atan2(At,Ht)*(180/Math.PI)},[]),xt=K.useCallback(Le=>{for(;Le>180;)Le-=360;for(;Le<-180;)Le+=360;return Le},[]),et=K.useCallback(Le=>{const Be=gu.indexOf(h),nt=Le==="cw"?(Be+1)%12:(Be-1+12)%12;f(gu[nt],{skipRotation:!0}),_(Le)},[h,f,_]),De=K.useRef(null),rt=K.useRef(!1),Ue=K.useCallback(Le=>{if(ae||!ce.current||!de.current)return;const Be=ce.current.getBoundingClientRect(),nt=Be.width/2,It=Be.height/2,Gt=Le.clientX-Be.left-nt,Ht=Le.clientY-Be.top-It,At=Math.sqrt(Gt*Gt+Ht*Ht),an=Be.width/600*70,on=Be.width/600*250;At>an&&At<=on?(_e(!0),Ve.current=Ee(Le.clientX,Le.clientY),Xe.current=p,Le.preventDefault()):At>on&&n>1&&(at(!0),G.current={x:Le.clientX,y:Le.clientY},Le.preventDefault())},[Ee,p,ae,n]),ht=K.useCallback(Le=>{if(Le.touches.length!==1)return;const Be=Le.touches[0];if(De.current={x:Be.clientX,y:Be.clientY},rt.current=!1,!ce.current)return;const nt=ce.current.getBoundingClientRect(),It=nt.width/2,Gt=nt.height/2,Ht=Be.clientX-nt.left-It,At=Be.clientY-nt.top-Gt,an=Math.sqrt(Ht*Ht+At*At),on=nt.width/600*70;an>on&&(Ve.current=Ee(Be.clientX,Be.clientY),Xe.current=p)},[Ee,p]),Ae=K.useCallback(Le=>{if(Le.touches.length!==1||!De.current)return;const Be=Le.touches[0],nt=Be.clientX-De.current.x,It=Be.clientY-De.current.y;if(Math.sqrt(nt*nt+It*It)>10){if(rt.current=!0,Le.preventDefault(),!ce.current)return;const Ht=ce.current.getBoundingClientRect(),At=Ht.width/2,an=Ht.height/2,on=Be.clientX-Ht.left,Hn=Be.clientY-Ht.top,Wn=Math.sqrt(Math.pow(on-At,2)+Math.pow(Hn-an,2)),dn=Ht.width/600*70;if(Wn>dn&&Ve.current!==0){const Kn=Ee(Be.clientX,Be.clientY),Gn=xt(Kn-Ve.current);if(Math.abs(Gn)>=15){const Nr=Math.round(Gn/30);if(Nr!==0){const ds=y==="fixed"?Nr>0?"cw":"ccw":Nr>0?"ccw":"cw",fs=Math.abs(Nr);for(let or=0;or<fs;or++)et(ds);Ve.current=Kn}}}}},[Ee,et,y,xt]),Ke=K.useCallback(Le=>{if(!ve)return;const Be=Ee(Le.clientX,Le.clientY),nt=xt(Be-Ve.current);if(Math.abs(nt)>=15){const It=Math.round(nt/30);if(It!==0){let Gt;y==="fixed"?Gt=It>0?"cw":"ccw":Gt=It>0?"ccw":"cw";const Ht=Math.abs(It);for(let At=0;At<Ht;At++)et(Gt);Ve.current=Be}}},[ve,Ee,et,y,xt]),bt=K.useCallback(()=>{_e(!1)},[]);K.useEffect(()=>{if(ve)return document.addEventListener("mousemove",Ke),document.addEventListener("mouseup",bt),()=>{document.removeEventListener("mousemove",Ke),document.removeEventListener("mouseup",bt)}},[ve,Ke,bt]);const mt=K.useCallback((Le,Be,nt)=>{if(!de.current||nt<=1)return{x:0,y:0};const{clientWidth:It,clientHeight:Gt}=de.current,Ht=12,At=It*(nt-1)/2+Ht,an=Gt*(nt-1)/2+Ht;return{x:Math.max(-At,Math.min(At,Le)),y:Math.max(-an,Math.min(an,Be))}},[]);K.useEffect(()=>{te(mt($.x,$.y,n))},[n,mt,$.x,$.y,te]);const st=K.useCallback(Le=>{if(!Je||!G.current)return;const Be=Le.clientX-G.current.x,nt=Le.clientY-G.current.y;te(mt($.x+Be,$.y+nt,n)),G.current={x:Le.clientX,y:Le.clientY}},[Je,n,mt,$,te]),dt=K.useCallback(()=>{at(!1),G.current=null},[]);K.useEffect(()=>{if(Je)return document.addEventListener("mousemove",st),document.addEventListener("mouseup",dt),()=>{document.removeEventListener("mousemove",st),document.removeEventListener("mouseup",dt)}},[Je,st,dt]);const pt=Le=>({x:(Le[0].clientX+Le[1].clientX)/2,y:(Le[0].clientY+Le[1].clientY)/2}),Nt=K.useCallback(Le=>{if(Le.touches.length===2){Le.preventDefault();const Be=Le.touches[0].clientX-Le.touches[1].clientX,nt=Le.touches[0].clientY-Le.touches[1].clientY;ie.current=Math.sqrt(Be*Be+nt*nt),Y.current=pt(Le.touches)}},[]),je=K.useCallback(Le=>{if(Le.touches.length===2&&ie.current!==null){Le.preventDefault(),Le.stopPropagation();const Be=Le.touches[0].clientX-Le.touches[1].clientX,nt=Le.touches[0].clientY-Le.touches[1].clientY,It=Math.sqrt(Be*Be+nt*nt),Gt=It/ie.current,Ht=Math.max(1,Math.min(2.5,n*Gt)),At=Ht>1.3?38:50,an=pt(Le.touches);if(Y.current){const on=an.x-Y.current.x,Hn=an.y-Y.current.y;te(mt($.x+on,$.y+Hn,Ht))}ie.current=It,Y.current=an,t(Ht,At)}},[n,t,mt,$,te]),ft=K.useCallback(Le=>{ie.current=null,Y.current=null,Le.touches.length===0&&Le.preventDefault()},[]),ct=K.useCallback(Le=>{if(Le.ctrlKey||Le.metaKey){Le.preventDefault();const Be=Le.deltaY>0?.9:1.1,nt=Math.max(1,Math.min(2.5,n*Be)),It=nt>1.3?38:50;t(nt,It)}},[n,t]),He=Xh(),ut=600,vt=ut/2,ot=ut/2,ln=60,Et=ln+8,Bt=145,pn=Bt,Tt=210,gt=Tt,zt=250,wn=K.useMemo(()=>Wx(h),[h]),Me=K.useMemo(()=>wn.sharps>0?`${wn.sharps}`:wn.flats>0?`${wn.flats}`:"",[wn]),yt=K.useRef(0),Rt=Le=>{const Be=Le,nt=Date.now();if(nt-yt.current<300)return;yt.current=nt,qr(Le.notes),le(Be.segmentId??null),C(Le);let It="";Be.positionIndex!==void 0&&Be.ringType&&(It=Qt(Be.positionIndex,Be.ringType==="major"?"major":Be.ringType==="minor"?Be.numeral==="ii"||Be.numeral==="vi"?"ii":"iii":"dim")),(!(ae&&!re)||!z||!J&&!j)&&E({isOpen:!0,chord:Be,voicingSuggestion:It,baseQuality:Be.quality})},it=Le=>{const Be=Le;let nt=A,It=k;if(!nt||!It){U();const Ht=Wt.getState();if(nt=Ht.selectedSectionId,It=Ht.selectedSlotId,!nt||!It)return}N(Le,nt,It),R(nt,It)||(V(nt,It),le(Be.segmentId??null),C(Le)),B||U()},Te=Le=>(Le-I+12)%12,_t=(Le,Be)=>{const nt=Te(Le);return Be==="major"?nt===0||nt===1||nt===11:Be==="ii"||Be==="iii"||Be==="dim"?nt===0:!1},St=Le=>Te(Le)===1,Mt=Le=>{const Be=Te(Le);return Be===2||Be===4},Ct=(Le,Be)=>{const nt=Te(Le);if(Be==="major"){if(nt===0)return"I";if(nt===1)return"V";if(nt===11)return"IV";if(nt===2)return"II";if(nt===4)return"III"}if(Be==="ii"){if(nt===0)return"ii";if(nt===1)return"vi"}return Be==="iii"&&nt===0?"iii":Be==="dim"&&nt===0?"vii":""},Qt=(Le,Be)=>{const nt=Te(Le);if(Be==="major"){if(nt===0)return"maj7, maj9, maj13 or 6";if(nt===1)return"7, 9, 11, sus4, 13";if(nt===11)return"maj7, maj9, maj13 or 6";if(nt===2||nt===4)return"7, sus4"}if(Be==="ii"){if(nt===0)return"m7, m9, m11, m6";if(nt===1)return"m7, m9, m11"}return Be==="iii"&&nt===0?"m7":Be==="dim"&&nt===0?"m75 (7)":""},cn=Le=>{if(ne)return ne===Le.segmentId;const Be=O?.segmentId;return Be?Be===Le.segmentId:O&&!Be?O.root===Le.root&&O.quality===Le.quality:!1},nr=K.useCallback(Le=>{Le.touches.length===2?Nt(Le):Le.touches.length===1&&ht(Le)},[Nt,ht]),Pn=K.useCallback(Le=>{Le.touches.length===2?je(Le):Le.touches.length===1&&Ae(Le)},[je,Ae]),yn=K.useCallback(Le=>{De.current=null,rt.current=!1,ft(Le)},[ft]),[Sn,tr]=K.useState(null),Ln=K.useCallback((Le,Be,nt)=>{tr(Le?{text:Le,x:Be,y:nt}:null)},[]),gr=Sn?{position:"fixed",left:Sn.x,top:Sn.y,transform:"translate(-50%, -100%) translateY(-12px)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"11px",pointerEvents:"none",zIndex:9999,whiteSpace:"normal",textAlign:"center",maxWidth:"220px",lineHeight:"1.4",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}:{};return m.jsxs("div",{ref:de,"data-chord-wheel":!0,className:`relative flex flex-col items-center justify-center w-full h-full p-1 sm:p-2 select-none ${Je?"cursor-grabbing":n>1&&!ae?"cursor-grab":""}`,onTouchStart:nr,onTouchMove:Pn,onTouchEnd:yn,onWheel:ct,onMouseDown:Ue,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"none"},children:[Sn&&m.jsx("div",{style:gr,children:Sn.text}),m.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out overflow-hidden",style:{transform:`translate(${$.x}px, ${$.y}px) scale(${n})`,transformOrigin:`center ${e}%`},children:m.jsxs("svg",{ref:ce,width:"100%",height:"100%",viewBox:`0 0 ${ut} ${ut}`,className:`w-full h-full select-none ${ve?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Ue,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[m.jsxs("defs",{children:[m.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[m.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),m.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),m.jsx("filter",{id:"segment-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:m.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#ffffff",floodOpacity:"0.9"})})]}),m.jsx("g",{style:{transform:`rotate(${P}deg)`,transformOrigin:`${vt}px ${ot}px`,transition:"transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:TS.map((Le,Be)=>{const It=Be*30-15,Gt=It+30,Ht=He[Le.major]||He.C,At=Le.ii.replace("m",""),an=Le.iii.replace("m",""),on=Le.diminished.replace("",""),Hn=_t(Be,"major"),Wn=Mt(Be),dn=_t(Be,"ii")||St(Be),Kn=_t(Be,"iii"),Gn=_t(Be,"dim"),Nr={root:Le.major,quality:"major",numeral:Ct(Be,"major"),notes:ca(Le.major,"major"),symbol:Le.major,segmentId:`major-${Be}`,ringType:"major",positionIndex:Be},ds={root:At,quality:"minor",numeral:Ct(Be,"ii"),notes:ca(At,"minor"),symbol:Le.ii,segmentId:`ii-${Be}`,ringType:"minor",positionIndex:Be},fs={root:an,quality:"minor",numeral:Ct(Be,"iii"),notes:ca(an,"minor"),symbol:Le.iii,segmentId:`iii-${Be}`,ringType:"minor",positionIndex:Be},or={root:on,quality:"diminished",numeral:Ct(Be,"dim"),notes:ca(on,"diminished"),symbol:Le.diminished,segmentId:`dim-${Be}`,ringType:"diminished",positionIndex:Be},ni=15,Cn=It+-7.5,Xi=Cn+ni,Ns=Xi,pi=Ns+ni,Zi=15,Xr=It+(30-Zi)/2,Ur=Xr+Zi,Rr=Le.major,So=Le.ii,zl=Le.iii,el=Le.diminished;return m.jsxs("g",{children:[m.jsx(D1,{cx:vt,cy:ot,innerRadius:Et,outerRadius:Bt,startAngle:It,endAngle:Gt,color:Ht,label:Rr,chord:Nr,isSelected:cn(Nr),isDiatonic:Hn,isSecondary:Wn,onClick:Rt,onDoubleClick:it,ringType:"major",wheelRotation:P,romanNumeral:Hn||Wn?Ct(Be,"major"):void 0,voicingSuggestion:Hn||Wn?Qt(Be,"major"):void 0,segmentId:`major-${Be}`,onHover:Ln}),m.jsx(D1,{cx:vt,cy:ot,innerRadius:pn,outerRadius:Tt,startAngle:Cn,endAngle:Xi,color:Ht,label:So,chord:ds,isSelected:cn(ds),isDiatonic:dn,onClick:Rt,onDoubleClick:it,ringType:"minor",wheelRotation:P,romanNumeral:dn?Ct(Be,"ii"):void 0,voicingSuggestion:dn?Qt(Be,"ii"):void 0,segmentId:`ii-${Be}`,onHover:Ln}),m.jsx(D1,{cx:vt,cy:ot,innerRadius:pn,outerRadius:Tt,startAngle:Ns,endAngle:pi,color:Ht,label:zl,chord:fs,isSelected:cn(fs),isDiatonic:Kn,onClick:Rt,onDoubleClick:it,ringType:"minor",wheelRotation:P,romanNumeral:Kn?Ct(Be,"iii"):void 0,voicingSuggestion:Kn?Qt(Be,"iii"):void 0,segmentId:`iii-${Be}`,onHover:Ln}),m.jsx(D1,{cx:vt,cy:ot,innerRadius:gt,outerRadius:zt,startAngle:Xr,endAngle:Ur,color:Ht,label:el,chord:or,isSelected:cn(or),isDiatonic:Gn,onClick:Rt,onDoubleClick:it,ringType:"diminished",wheelRotation:P,romanNumeral:Gn?Ct(Be,"dim"):void 0,voicingSuggestion:Gn?Qt(Be,"dim"):void 0,segmentId:`dim-${Be}`,onHover:Ln})]},Le.major)})}),m.jsx("circle",{cx:vt,cy:ot,r:ln,fill:"#1a1a24",stroke:"#3a3a4a",strokeWidth:"2",style:{pointerEvents:"none"}}),m.jsx("text",{x:vt,y:ot-25,textAnchor:"middle",fill:"#6366f1",fontSize:"9",fontWeight:"bold",letterSpacing:"2",children:"KEY"}),m.jsx("text",{x:vt,y:ot+3,textAnchor:"middle",fill:"white",fontSize:"26",fontWeight:"bold",children:Mn(h)}),m.jsx("text",{x:vt,y:ot+21,textAnchor:"middle",fill:"#9898a6",fontSize:"11",children:Me||"No /"}),m.jsxs("g",{transform:`translate(${vt-22}, ${ot+40})`,onClick:()=>et("ccw"),onTouchEnd:Le=>{Le.preventDefault(),Le.stopPropagation(),et("ccw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[m.jsx("circle",{r:ae?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),m.jsx("g",{transform:ae?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:m.jsx(Sp,{size:ae?12:9,color:"#9898a6"})})]}),m.jsxs("g",{transform:`translate(${vt+22}, ${ot+40})`,onClick:()=>et("cw"),onTouchEnd:Le=>{Le.preventDefault(),Le.stopPropagation(),et("cw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[m.jsx("circle",{r:ae?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),m.jsx("g",{transform:ae?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:m.jsx(Yh,{size:ae?12:9,color:"#9898a6"})})]}),m.jsxs("g",{transform:`translate(${vt}, ${ot+40})`,onClick:u?void 0:b,onTouchEnd:u?void 0:Le=>{Le.preventDefault(),Le.stopPropagation(),b()},className:u?"":"cursor-pointer",style:{pointerEvents:u?"none":"all",cursor:u?"default":"pointer",opacity:u?.5:1},children:[m.jsx("circle",{r:ae?16:11,fill:u||y==="rotating"?"#252535":"#3f2e2e",className:"transition-colors",style:{pointerEvents:u?"none":"all",transition:"fill 0.3s ease"},children:m.jsx("title",{children:u?"Mode locked in this view":y==="rotating"?"Lock wheel (C at top)":"Pin current key to top"})}),m.jsxs("g",{style:{pointerEvents:"none",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:o!==0?`rotate(${o}deg)`:y==="rotating"?"rotate(0deg)":`rotate(${I*30}deg)`,transformOrigin:"0px 0px"},children:[m.jsx("polygon",{points:ae?"0,-10 4,0 0,1.5 -4,0":"0,-7 2.5,0 0,1 -2.5,0",fill:"#ef4444",stroke:"#b91c1c",strokeWidth:"0.5"}),m.jsx("polygon",{points:ae?"0,10 4,0 0,-1.5 -4,0":"0,7 2.5,0 0,-1 -2.5,0",fill:"#f1f5f9",stroke:"#94a3b8",strokeWidth:"0.5"}),m.jsx("circle",{cx:0,cy:0,r:ae?2:1.5,fill:y==="rotating"?"#fef2f2":"#6b7280"})]})]})]})}),m.jsx(mj,{isOpen:q.isOpen,onClose:()=>E({...q,isOpen:!1}),onSelect:Le=>{if(q.chord){const Be=ca(q.chord.root,Le),nt={...q.chord,quality:Le,notes:Be,symbol:`${q.chord.root}${Lh(Le)}`};C(nt)}},onAddToTimeline:Le=>{if(q.chord){const Be=ca(q.chord.root,Le),nt={...q.chord,quality:Le,notes:Be,symbol:`${q.chord.root}${Lh(Le)}`};let It=A,Gt=k;if(!It||!Gt){U();const Ht=Wt.getState();if(It=Ht.selectedSectionId,Gt=Ht.selectedSlotId,!It||!Gt)return}N(nt,It,Gt),V(It,Gt),C(nt),B||U()}},onOpenDetails:()=>{z?F():L()},chordRoot:q.chord?.root||"C",voicings:gj(q.voicingSuggestion,q.baseQuality),selectedQuality:q.chord?.quality,portraitWithPanel:ae&&!re&&z&&!J&&!j}),ae&&!re&&!z&&O&&(()=>{const Le=He[O.root]||"#6366f1",Be=O.quality;let nt;return Be==="major"||Be==="maj"?nt=Mn(O.root):Be==="minor"||Be==="m"?nt=Mn(`${O.root}m`):Be==="diminished"||Be==="dim"?nt=Mn(`${O.root}`):nt=Mn(`${O.root}${Lh(Be)}`),m.jsxs("div",{className:"fixed flex items-center gap-1 z-10 cursor-pointer touch-feedback active:scale-95",style:{bottom:B?c?"260px":"204px":c?"175px":"119px",right:"12px",backgroundColor:"transparent",color:Le,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${Le}`,backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.4)",transition:"bottom 0.25s ease-out"},onClick:It=>{It.stopPropagation(),It.preventDefault(),qr(O.notes)},onTouchStart:It=>{It.stopPropagation()},onTouchEnd:It=>{It.stopPropagation(),It.preventDefault(),qr(O.notes)},children:[m.jsx("span",{className:"text-sm font-bold leading-none",children:nt}),O.numeral&&m.jsx("span",{className:"text-xs font-serif italic opacity-70",children:Mn(O.numeral)})]})})()]})},xg=({type:n,size:e=20,className:t})=>{const s=e>16?1.5:1;switch(n){case"whole":return m.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:m.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"4",fill:"none",stroke:"currentColor",strokeWidth:s*1.5})});case"half":return m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[m.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 10, 16)"}),m.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-half":return m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[m.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 8, 16)"}),m.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),m.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"quarter":return m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[m.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"currentColor",transform:"rotate(-20, 10, 16)"}),m.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-quarter":return m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[m.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 8, 16)"}),m.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),m.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"eighth":return m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[m.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),m.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),m.jsx("path",{d:"M13 4 Q18 6 16 11",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"sixteenth":return m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[m.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),m.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),m.jsx("path",{d:"M13 3 Q18 5 16 9",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),m.jsx("path",{d:"M13 7 Q18 9 16 13",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]})}};function wg(n,e){const[t]=e;if(t%3===0&&t>3){if(n===1)return"dotted-half";if(n===2)return"dotted-quarter";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}if(t===3){if(n===1)return"dotted-half";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}return n===1?"whole":n===2?"half":n===4?"quarter":n===8?"eighth":n===16?"sixteenth":n<=1?"whole":n<=2?"half":n<=4?"quarter":n<=8?"eighth":"sixteenth"}function _3(n){const[e]=n;return e%3===0?[1,3,6].filter(t=>t<=8):[1,2,4,8]}const vj=({value:n,onChange:e,timeSignature:t,isCompact:s=!1})=>{const[a,o]=K.useState(!1),u=K.useRef(null),c=K.useRef(null),h=_3(t);K.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&c.current&&!c.current.contains(_.target)&&o(!1)};if(a)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[a]),K.useEffect(()=>{if(a){const y=()=>o(!1);return window.addEventListener("scroll",y,!0),()=>window.removeEventListener("scroll",y,!0)}},[a]);const f=wg(n,t),p=s?12:16;return m.jsxs("div",{className:"relative",children:[m.jsx("button",{ref:u,onClick:()=>o(!a),className:Pt("flex items-center justify-center rounded transition-all","hover:bg-accent-primary/20 active:scale-95","text-text-muted hover:text-accent-primary",s?"w-4 h-5":"w-5 h-6",a&&"bg-accent-primary/20 text-accent-primary"),title:`${n} step${n>1?"s":""} per measure`,children:m.jsx(xg,{type:f,size:p})}),a&&Ho.createPortal(m.jsx("div",{ref:c,className:Pt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row gap-2 p-2","animate-in fade-in zoom-in-95 duration-150"),style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",zIndex:99999},children:h.map(y=>{const _=wg(y,t),b=y===n;return m.jsx("button",{onClick:()=>{e(y),o(!1)},className:Pt("flex items-center justify-center rounded-lg transition-all","w-12 h-12",b?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`${y} step${y>1?"s":""}`,children:m.jsx(xg,{type:_,size:26})},y)})}),document.body)]})},iy={intro:{bg:"bg-purple-500/15",border:"border-purple-500/40",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/15",border:"border-blue-500/40",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/15",border:"border-cyan-500/40",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/15",border:"border-amber-500/40",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/15",border:"border-emerald-500/40",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/15",border:"border-rose-500/40",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/15",border:"border-slate-500/40",accent:"bg-slate-500"}},yj=({section:n,songTimeSignature:e,className:t,onSlotClick:s})=>{const{tempo:a}=Wt(),o=Xh(),u=iy[n.type]||iy.custom,c=n.timeSignature||e,h=c[0],f=n.measures.length,[p,y]=K.useState(!1),[_,b]=K.useState(null),N=K.useRef([]),A=252,k=15,C=52,O=Math.floor(A/f),R=Math.max(k,Math.min(C,O)),V=f>8,B=f>12,U=()=>{N.current.forEach(L=>clearTimeout(L)),N.current=[],y(!1),b(null)};K.useEffect(()=>(U(),()=>{N.current.forEach(L=>clearTimeout(L)),N.current=[]}),[n.id]);const z=async()=>{if(p){U();return}_s.state!=="running"&&await Tu(),_s.state==="suspended"&&await _s.resume(),await Pl(),y(!0);const L=60/a*1e3,F=n.measures[0]?.beats.length||h,J=h/F,j=J*L;let I=0;n.measures.forEach(ie=>{ie.beats.forEach(Y=>{const ne=I*j,le=window.setTimeout(()=>{b(Y.id)},ne);if(N.current.push(le),Y.chord&&Y.chord.notes&&Y.chord.notes.length>0){const pe=window.setTimeout(()=>{const E=`${4/Math.min(J,h)}n`;qr(Y.chord.notes,E)},ne);N.current.push(pe)}I++})});const X=n.measures.reduce((ie,Y)=>ie+Y.beats.length,0),P=window.setTimeout(()=>{y(!1),b(null),N.current=[]},X*j);N.current.push(P)};return m.jsx("div",{className:Pt("w-full",t),children:m.jsxs("div",{className:Pt("rounded-lg border overflow-hidden transition-all",u.bg,u.border),children:[m.jsx("div",{className:Pt("h-1 w-full",u.accent)}),m.jsx("div",{className:"pl-2 pr-3 py-2 overflow-hidden",style:{maxHeight:B?"80px":V?"100px":"120px"},children:m.jsx("div",{className:"flex gap-0.5",style:{minWidth:"min-content",width:"100%"},children:n.measures.map((L,F)=>{const J=L.beats.length;return m.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",style:{minWidth:`${R}px`,maxWidth:`${R}px`},children:[!B&&m.jsxs("div",{className:"h-3 flex items-center justify-between px-0.5",children:[m.jsx("span",{className:Pt("font-mono text-white/30",V?"text-[6px]":"text-[8px]"),children:F+1}),!V&&m.jsx("div",{className:"flex gap-px",children:Array.from({length:Math.min(J,h)}).map((j,I)=>m.jsx("div",{className:"w-0.5 h-1 bg-white/15 rounded-full"},I))})]}),m.jsx("div",{className:"flex-1 rounded overflow-hidden flex gap-px",style:{minHeight:B?"28px":V?"36px":"48px"},children:L.beats.map(j=>{const I=j.chord&&j.chord.notes&&j.chord.notes.length>0,X=j.chord,P=I&&o[X.root]||"#666",ie=_===j.id,Y=L.beats.length;let ne="9px";return B?ne=Y>2?"5px":"6px":V?ne=Y>2?"6px":"7px":ne=Y>2?"7px":Y>1?"8px":"9px",I?m.jsx("div",{onClick:()=>s?.(j.id),className:Pt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold truncate transition-all duration-150",ie&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:brightness-110 active:scale-95"),style:{backgroundColor:ie?P:"rgba(0, 0, 0, 0.35)",border:`1.5px solid ${P}`,color:ie?"#fff":P,fontSize:ne,padding:"0 2px",textShadow:ie?"0 1px 3px rgba(0,0,0,0.7)":"0 1px 2px rgba(0,0,0,0.5)",boxShadow:ie?`0 0 12px ${P}, 0 0 4px ${P}`:"none"},title:X.symbol,children:Mn(X.symbol)},j.id):m.jsx("div",{onClick:()=>s?.(j.id),className:Pt("flex-1 min-w-0 rounded-sm flex items-center justify-center transition-all duration-150",ie&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:bg-white/10 active:scale-95"),style:{backgroundColor:ie?"rgba(99, 102, 241, 0.5)":"rgba(255, 255, 255, 0.03)",border:ie?"1.5px solid rgba(99, 102, 241, 0.8)":"1px dashed rgba(255, 255, 255, 0.1)",boxShadow:ie?"0 0 8px rgba(99, 102, 241, 0.5)":"none"},children:m.jsx("span",{className:Pt("transition-colors duration-150",ie?"text-white/60":"text-white/10",V?"text-[6px]":"text-[8px]"),children:""})},j.id)})})]},L.id)})})}),m.jsxs("div",{className:"px-2 py-1.5 bg-black/20 border-t border-white/5 flex items-center gap-2",children:[m.jsx("button",{onClick:z,className:Pt("w-5 h-5 rounded-full flex items-center justify-center transition-all","hover:scale-110 active:scale-95",p?"bg-red-500/80 text-white":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"),title:p?"Stop":"Play section once",children:p?m.jsx(k2,{size:8}):m.jsx(ju,{size:10,className:"ml-0.5"})}),m.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3",children:[m.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[c[0],"/",c[1]]}),m.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-white/20"}),m.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[f," bar",f!==1?"s":""]})]})]})]})})};function xj(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return K.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const i0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sd(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function R2(n){return"nodeType"in n}function Ai(n){var e,t;return n?sd(n)?n:R2(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function I2(n){const{Document:e}=Ai(n);return n instanceof e}function jf(n){return sd(n)?!1:n instanceof Ai(n).HTMLElement}function S3(n){return n instanceof Ai(n).SVGElement}function id(n){return n?sd(n)?n.document:R2(n)?I2(n)?n:jf(n)||S3(n)?n.ownerDocument:document:document:document}const mo=i0?K.useLayoutEffect:K.useEffect;function a0(n){const e=K.useRef(n);return mo(()=>{e.current=n}),K.useCallback(function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function wj(){const n=K.useRef(null),e=K.useCallback((s,a)=>{n.current=setInterval(s,a)},[]),t=K.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function ff(n,e){e===void 0&&(e=[n]);const t=K.useRef(n);return mo(()=>{t.current!==n&&(t.current=n)},e),t}function Ef(n,e){const t=K.useRef();return K.useMemo(()=>{const s=n(t.current);return t.current=s,s},[...e])}function Tp(n){const e=a0(n),t=K.useRef(null),s=K.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,s]}function kp(n){const e=K.useRef();return K.useEffect(()=>{e.current=n},[n]),e.current}let Dm={};function Mf(n,e){return K.useMemo(()=>{if(e)return e;const t=Dm[n]==null?0:Dm[n]+1;return Dm[n]=t,n+"-"+t},[n,e])}function N3(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((o,u)=>{const c=Object.entries(u);for(const[h,f]of c){const p=o[h];p!=null&&(o[h]=p+n*f)}return o},{...e})}}const Rh=N3(1),pf=N3(-1);function _j(n){return"clientX"in n&&"clientY"in n}function o0(n){if(!n)return!1;const{KeyboardEvent:e}=Ai(n.target);return e&&n instanceof e}function Sj(n){if(!n)return!1;const{TouchEvent:e}=Ai(n.target);return e&&n instanceof e}function jp(n){if(Sj(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return _j(n)?{x:n.clientX,y:n.clientY}:null}const Xo=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Xo.Translate.toString(n),Xo.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:s}=n;return e+" "+t+"ms "+s}}}),ay="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nj(n){return n.matches(ay)?n:n.querySelector(ay)}const Aj={display:"none"};function Cj(n){let{id:e,value:t}=n;return An.createElement("div",{id:e,style:Aj},t)}function Tj(n){let{id:e,announcement:t,ariaLiveType:s="assertive"}=n;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return An.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},t)}function kj(){const[n,e]=K.useState("");return{announce:K.useCallback(s=>{s!=null&&e(s)},[]),announcement:n}}const A3=K.createContext(null);function jj(n){const e=K.useContext(A3);K.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Ej(){const[n]=K.useState(()=>new Set),e=K.useCallback(s=>(n.add(s),()=>n.delete(s)),[n]);return[K.useCallback(s=>{let{type:a,event:o}=s;n.forEach(u=>{var c;return(c=u[a])==null?void 0:c.call(u,o)})},[n]),e]}const Mj={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Lj={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Oj(n){let{announcements:e=Lj,container:t,hiddenTextDescribedById:s,screenReaderInstructions:a=Mj}=n;const{announce:o,announcement:u}=kj(),c=Mf("DndLiveRegion"),[h,f]=K.useState(!1);if(K.useEffect(()=>{f(!0)},[]),jj(K.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:b}=y;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(y){let{active:_,over:b}=y;o(e.onDragOver({active:_,over:b}))},onDragEnd(y){let{active:_,over:b}=y;o(e.onDragEnd({active:_,over:b}))},onDragCancel(y){let{active:_,over:b}=y;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!h)return null;const p=An.createElement(An.Fragment,null,An.createElement(Cj,{id:s,value:a.draggable}),An.createElement(Tj,{id:c,announcement:u}));return t?Ho.createPortal(p,t):p}var Rs;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Rs||(Rs={}));function Ep(){}function Ll(n,e){return K.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function V2(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return K.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const go=Object.freeze({x:0,y:0});function C3(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Dj(n,e){const t=jp(n);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function T3(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return t-s}function Rj(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return s-t}function oy(n){let{left:e,top:t,height:s,width:a}=n;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+s},{x:e+a,y:t+s}]}function k3(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function ly(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const F2=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=ly(e,e.left,e.top),o=[];for(const u of s){const{id:c}=u,h=t.get(c);if(h){const f=C3(ly(h),a);o.push({id:c,data:{droppableContainer:u,value:f}})}}return o.sort(T3)},Ij=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=oy(e),o=[];for(const u of s){const{id:c}=u,h=t.get(c);if(h){const f=oy(h),p=a.reduce((_,b,N)=>_+C3(f[N],b),0),y=Number((p/4).toFixed(4));o.push({id:c,data:{droppableContainer:u,value:y}})}}return o.sort(T3)};function Vj(n,e){const t=Math.max(e.top,n.top),s=Math.max(e.left,n.left),a=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),u=a-s,c=o-t;if(s<a&&t<o){const h=e.width*e.height,f=n.width*n.height,p=u*c,y=p/(h+f-p);return Number(y.toFixed(4))}return 0}const Fj=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=[];for(const o of s){const{id:u}=o,c=t.get(u);if(c){const h=Vj(c,e);h>0&&a.push({id:u,data:{droppableContainer:o,value:h}})}}return a.sort(Rj)};function Bj(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function j3(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:go}function Pj(n){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((u,c)=>({...u,top:u.top+n*c.y,bottom:u.bottom+n*c.y,left:u.left+n*c.x,right:u.right+n*c.x}),{...t})}}const zj=Pj(1);function E3(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function qj(n,e,t){const s=E3(e);if(!s)return n;const{scaleX:a,scaleY:o,x:u,y:c}=s,h=n.left-u-(1-a)*parseFloat(t),f=n.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=a?n.width/a:n.width,y=o?n.height/o:n.height;return{width:p,height:y,top:f,right:h+p,bottom:f+y,left:h}}const Uj={ignoreTransform:!1};function ad(n,e){e===void 0&&(e=Uj);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:p}=Ai(n).getComputedStyle(n);f&&(t=qj(t,f,p))}const{top:s,left:a,width:o,height:u,bottom:c,right:h}=t;return{top:s,left:a,width:o,height:u,bottom:c,right:h}}function cy(n){return ad(n,{ignoreTransform:!0})}function Hj(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Wj(n,e){return e===void 0&&(e=Ai(n).getComputedStyle(n)),e.position==="fixed"}function Gj(n,e){e===void 0&&(e=Ai(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?t.test(o):!1})}function l0(n,e){const t=[];function s(a){if(e!=null&&t.length>=e||!a)return t;if(I2(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!jf(a)||S3(a)||t.includes(a))return t;const o=Ai(n).getComputedStyle(a);return a!==n&&Gj(a,o)&&t.push(a),Wj(a,o)?t:s(a.parentNode)}return n?s(n):t}function M3(n){const[e]=l0(n,1);return e??null}function Rm(n){return!i0||!n?null:sd(n)?n:R2(n)?I2(n)||n===id(n).scrollingElement?window:jf(n)?n:null:null}function L3(n){return sd(n)?n.scrollX:n.scrollLeft}function O3(n){return sd(n)?n.scrollY:n.scrollTop}function _g(n){return{x:L3(n),y:O3(n)}}var Hs;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Hs||(Hs={}));function D3(n){return!i0||!n?!1:n===document.scrollingElement}function R3(n){const e={x:0,y:0},t=D3(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},s={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},a=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,u=n.scrollTop>=s.y,c=n.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:u,isRight:c,maxScroll:s,minScroll:e}}const $j={x:.2,y:.2};function Yj(n,e,t,s,a){let{top:o,left:u,right:c,bottom:h}=t;s===void 0&&(s=10),a===void 0&&(a=$j);const{isTop:f,isBottom:p,isLeft:y,isRight:_}=R3(n),b={x:0,y:0},N={x:0,y:0},A={height:e.height*a.y,width:e.width*a.x};return!f&&o<=e.top+A.height?(b.y=Hs.Backward,N.y=s*Math.abs((e.top+A.height-o)/A.height)):!p&&h>=e.bottom-A.height&&(b.y=Hs.Forward,N.y=s*Math.abs((e.bottom-A.height-h)/A.height)),!_&&c>=e.right-A.width?(b.x=Hs.Forward,N.x=s*Math.abs((e.right-A.width-c)/A.width)):!y&&u<=e.left+A.width&&(b.x=Hs.Backward,N.x=s*Math.abs((e.left+A.width-u)/A.width)),{direction:b,speed:N}}function Xj(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:e,left:t,right:s,bottom:a}=n.getBoundingClientRect();return{top:e,left:t,right:s,bottom:a,width:n.clientWidth,height:n.clientHeight}}function I3(n){return n.reduce((e,t)=>Rh(e,_g(t)),go)}function Zj(n){return n.reduce((e,t)=>e+L3(t),0)}function Kj(n){return n.reduce((e,t)=>e+O3(t),0)}function V3(n,e){if(e===void 0&&(e=ad),!n)return;const{top:t,left:s,bottom:a,right:o}=e(n);M3(n)&&(a<=0||o<=0||t>=window.innerHeight||s>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Qj=[["x",["left","right"],Zj],["y",["top","bottom"],Kj]];class B2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=l0(t),a=I3(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,u,c]of Qj)for(const h of u)Object.defineProperty(this,h,{get:()=>{const f=c(s),p=a[o]-f;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jd{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var a;(a=this.target)==null||a.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function Jj(n){const{EventTarget:e}=Ai(n);return n instanceof e?n:id(n)}function Im(n,e){const t=Math.abs(n.x),s=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var Ma;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Ma||(Ma={}));function uy(n){n.preventDefault()}function e7(n){n.stopPropagation()}var Bn;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Bn||(Bn={}));const F3={start:[Bn.Space,Bn.Enter],cancel:[Bn.Esc],end:[Bn.Space,Bn.Enter,Bn.Tab]},t7=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Bn.Right:return{...t,x:t.x+25};case Bn.Left:return{...t,x:t.x-25};case Bn.Down:return{...t,y:t.y+25};case Bn.Up:return{...t,y:t.y-25}}};class Lf{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Jd(id(t)),this.windowListeners=new Jd(Ai(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ma.Resize,this.handleCancel),this.windowListeners.add(Ma.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ma.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&V3(s),t(go)}handleKeyDown(e){if(o0(e)){const{active:t,context:s,options:a}=this.props,{keyboardCodes:o=F3,coordinateGetter:u=t7,scrollBehavior:c="smooth"}=a,{code:h}=e;if(o.end.includes(h)){this.handleEnd(e);return}if(o.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:f}=s.current,p=f?{x:f.left,y:f.top}:go;this.referenceCoordinates||(this.referenceCoordinates=p);const y=u(e,{active:t,context:s.current,currentCoordinates:p});if(y){const _=pf(y,p),b={x:0,y:0},{scrollableAncestors:N}=s.current;for(const A of N){const k=e.code,{isTop:C,isRight:O,isLeft:R,isBottom:V,maxScroll:B,minScroll:U}=R3(A),z=Xj(A),L={x:Math.min(k===Bn.Right?z.right-z.width/2:z.right,Math.max(k===Bn.Right?z.left:z.left+z.width/2,y.x)),y:Math.min(k===Bn.Down?z.bottom-z.height/2:z.bottom,Math.max(k===Bn.Down?z.top:z.top+z.height/2,y.y))},F=k===Bn.Right&&!O||k===Bn.Left&&!R,J=k===Bn.Down&&!V||k===Bn.Up&&!C;if(F&&L.x!==y.x){const j=A.scrollLeft+_.x,I=k===Bn.Right&&j<=B.x||k===Bn.Left&&j>=U.x;if(I&&!_.y){A.scrollTo({left:j,behavior:c});return}I?b.x=A.scrollLeft-j:b.x=k===Bn.Right?A.scrollLeft-B.x:A.scrollLeft-U.x,b.x&&A.scrollBy({left:-b.x,behavior:c});break}else if(J&&L.y!==y.y){const j=A.scrollTop+_.y,I=k===Bn.Down&&j<=B.y||k===Bn.Up&&j>=U.y;if(I&&!_.x){A.scrollTo({top:j,behavior:c});return}I?b.y=A.scrollTop-j:b.y=k===Bn.Down?A.scrollTop-B.y:A.scrollTop-U.y,b.y&&A.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Rh(pf(y,this.referenceCoordinates),b))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Lf.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:s=F3,onActivation:a}=e,{active:o}=t;const{code:u}=n.nativeEvent;if(s.start.includes(u)){const c=o.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),a?.({event:n.nativeEvent}),!0)}return!1}}];function hy(n){return!!(n&&"distance"in n)}function dy(n){return!!(n&&"delay"in n)}class P2{constructor(e,t,s){var a;s===void 0&&(s=Jj(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:u}=o;this.props=e,this.events=t,this.document=id(u),this.documentListeners=new Jd(this.document),this.listeners=new Jd(s),this.windowListeners=new Jd(Ai(u)),this.initialCoordinates=(a=jp(o))!=null?a:go,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ma.Resize,this.handleCancel),this.windowListeners.add(Ma.DragStart,uy),this.windowListeners.add(Ma.VisibilityChange,this.handleCancel),this.windowListeners.add(Ma.ContextMenu,uy),this.documentListeners.add(Ma.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dy(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(hy(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ma.Click,e7,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ma.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:u,options:{activationConstraint:c}}=o;if(!a)return;const h=(t=jp(e))!=null?t:go,f=pf(a,h);if(!s&&c){if(hy(c)){if(c.tolerance!=null&&Im(f,c.tolerance))return this.handleCancel();if(Im(f,c.distance))return this.handleStart()}if(dy(c)&&Im(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),u(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Bn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const n7={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Of extends P2{constructor(e){const{event:t}=e,s=id(t.target);super(e,n7,s)}}Of.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const r7={move:{name:"mousemove"},end:{name:"mouseup"}};var Sg;(function(n){n[n.RightClick=2]="RightClick"})(Sg||(Sg={}));class s7 extends P2{constructor(e){super(e,r7,id(e.event.target))}}s7.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return t.button===Sg.RightClick?!1:(s?.({event:t}),!0)}}];const Vm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class c0 extends P2{constructor(e){super(e,Vm)}static setup(){return window.addEventListener(Vm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Vm.move.name,e)};function e(){}}}c0.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;const{touches:a}=t;return a.length>1?!1:(s?.({event:t}),!0)}}];var ef;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(ef||(ef={}));var Mp;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mp||(Mp={}));function i7(n){let{acceleration:e,activator:t=ef.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:u=5,order:c=Mp.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:p,delta:y,threshold:_}=n;const b=o7({delta:y,disabled:!o}),[N,A]=wj(),k=K.useRef({x:0,y:0}),C=K.useRef({x:0,y:0}),O=K.useMemo(()=>{switch(t){case ef.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case ef.DraggableRect:return a}},[t,a,h]),R=K.useRef(null),V=K.useCallback(()=>{const U=R.current;if(!U)return;const z=k.current.x*C.current.x,L=k.current.y*C.current.y;U.scrollBy(z,L)},[]),B=K.useMemo(()=>c===Mp.TreeOrder?[...f].reverse():f,[c,f]);K.useEffect(()=>{if(!o||!f.length||!O){A();return}for(const U of B){if(s?.(U)===!1)continue;const z=f.indexOf(U),L=p[z];if(!L)continue;const{direction:F,speed:J}=Yj(U,L,O,e,_);for(const j of["x","y"])b[j][F[j]]||(J[j]=0,F[j]=0);if(J.x>0||J.y>0){A(),R.current=U,N(V,u),k.current=J,C.current=F;return}}k.current={x:0,y:0},C.current={x:0,y:0},A()},[e,V,s,A,o,u,JSON.stringify(O),JSON.stringify(b),N,f,B,p,JSON.stringify(_)])}const a7={x:{[Hs.Backward]:!1,[Hs.Forward]:!1},y:{[Hs.Backward]:!1,[Hs.Forward]:!1}};function o7(n){let{delta:e,disabled:t}=n;const s=kp(e);return Ef(a=>{if(t||!s||!a)return a7;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Hs.Backward]:a.x[Hs.Backward]||o.x===-1,[Hs.Forward]:a.x[Hs.Forward]||o.x===1},y:{[Hs.Backward]:a.y[Hs.Backward]||o.y===-1,[Hs.Forward]:a.y[Hs.Forward]||o.y===1}}},[t,e,s])}function l7(n,e){const t=e!=null?n.get(e):void 0,s=t?t.node.current:null;return Ef(a=>{var o;return e==null?null:(o=s??a)!=null?o:null},[s,e])}function c7(n,e){return K.useMemo(()=>n.reduce((t,s)=>{const{sensor:a}=s,o=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...o]},[]),[n,e])}var mf;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(mf||(mf={}));var Ng;(function(n){n.Optimized="optimized"})(Ng||(Ng={}));const fy=new Map;function u7(n,e){let{dragging:t,dependencies:s,config:a}=e;const[o,u]=K.useState(null),{frequency:c,measure:h,strategy:f}=a,p=K.useRef(n),y=k(),_=ff(y),b=K.useCallback(function(C){C===void 0&&(C=[]),!_.current&&u(O=>O===null?C:O.concat(C.filter(R=>!O.includes(R))))},[_]),N=K.useRef(null),A=Ef(C=>{if(y&&!t)return fy;if(!C||C===fy||p.current!==n||o!=null){const O=new Map;for(let R of n){if(!R)continue;if(o&&o.length>0&&!o.includes(R.id)&&R.rect.current){O.set(R.id,R.rect.current);continue}const V=R.node.current,B=V?new B2(h(V),V):null;R.rect.current=B,B&&O.set(R.id,B)}return O}return C},[n,o,t,y,h]);return K.useEffect(()=>{p.current=n},[n]),K.useEffect(()=>{y||b()},[t,y]),K.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),K.useEffect(()=>{y||typeof c!="number"||N.current!==null||(N.current=setTimeout(()=>{b(),N.current=null},c))},[c,y,b,...s]),{droppableRects:A,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(f){case mf.Always:return!1;case mf.BeforeDragging:return t;default:return!t}}}function z2(n,e){return Ef(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function h7(n,e){return z2(n,e)}function d7(n){let{callback:e,disabled:t}=n;const s=a0(e),a=K.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,t]);return K.useEffect(()=>()=>a?.disconnect(),[a]),a}function u0(n){let{callback:e,disabled:t}=n;const s=a0(e),a=K.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[t]);return K.useEffect(()=>()=>a?.disconnect(),[a]),a}function f7(n){return new B2(ad(n),n)}function py(n,e,t){e===void 0&&(e=f7);const[s,a]=K.useState(null);function o(){a(h=>{if(!n)return null;if(n.isConnected===!1){var f;return(f=h??t)!=null?f:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const u=d7({callback(h){if(n)for(const f of h){const{type:p,target:y}=f;if(p==="childList"&&y instanceof HTMLElement&&y.contains(n)){o();break}}}}),c=u0({callback:o});return mo(()=>{o(),n?(c?.observe(n),u?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),u?.disconnect())},[n]),s}function p7(n){const e=z2(n);return j3(n,e)}const my=[];function m7(n){const e=K.useRef(n),t=Ef(s=>n?s&&s!==my&&n&&e.current&&n.parentNode===e.current.parentNode?s:l0(n):my,[n]);return K.useEffect(()=>{e.current=n},[n]),t}function g7(n){const[e,t]=K.useState(null),s=K.useRef(n),a=K.useCallback(o=>{const u=Rm(o.target);u&&t(c=>c?(c.set(u,_g(u)),new Map(c)):null)},[]);return K.useEffect(()=>{const o=s.current;if(n!==o){u(o);const c=n.map(h=>{const f=Rm(h);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,_g(f)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),s.current=n}return()=>{u(n),u(o)};function u(c){c.forEach(h=>{const f=Rm(h);f?.removeEventListener("scroll",a)})}},[a,n]),K.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,u)=>Rh(o,u),go):I3(n):go,[n,e])}function gy(n,e){e===void 0&&(e=[]);const t=K.useRef(null);return K.useEffect(()=>{t.current=null},e),K.useEffect(()=>{const s=n!==go;s&&!t.current&&(t.current=n),!s&&t.current&&(t.current=null)},[n]),t.current?pf(n,t.current):go}function b7(n){K.useEffect(()=>{if(!i0)return;const e=n.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function v7(n,e){return K.useMemo(()=>n.reduce((t,s)=>{let{eventName:a,handler:o}=s;return t[a]=u=>{o(u,e)},t},{}),[n,e])}function B3(n){return K.useMemo(()=>n?Hj(n):null,[n])}const by=[];function y7(n,e){e===void 0&&(e=ad);const[t]=n,s=B3(t?Ai(t):null),[a,o]=K.useState(by);function u(){o(()=>n.length?n.map(h=>D3(h)?s:new B2(e(h),h)):by)}const c=u0({callback:u});return mo(()=>{c?.disconnect(),u(),n.forEach(h=>c?.observe(h))},[n]),a}function P3(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return jf(e)?e:n}function x7(n){let{measure:e}=n;const[t,s]=K.useState(null),a=K.useCallback(f=>{for(const{target:p}of f)if(jf(p)){s(y=>{const _=e(p);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=u0({callback:a}),u=K.useCallback(f=>{const p=P3(f);o?.disconnect(),p&&o?.observe(p),s(p?e(p):null)},[e,o]),[c,h]=Tp(u);return K.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const w7=[{sensor:Of,options:{}},{sensor:Lf,options:{}}],_7={current:{}},Z1={draggable:{measure:cy},droppable:{measure:cy,strategy:mf.WhileDragging,frequency:Ng.Optimized},dragOverlay:{measure:ad}};class tf extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const S7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ep},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Z1,measureDroppableContainers:Ep,windowRect:null,measuringScheduled:!1},z3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ep,draggableNodes:new Map,over:null,measureDroppableContainers:Ep},Df=K.createContext(z3),q3=K.createContext(S7);function N7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tf}}}function A7(n,e){switch(e.type){case Rs.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Rs.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Rs.DragEnd:case Rs.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Rs.RegisterDroppable:{const{element:t}=e,{id:s}=t,a=new tf(n.droppable.containers);return a.set(s,t),{...n,droppable:{...n.droppable,containers:a}}}case Rs.SetDroppableDisabled:{const{id:t,key:s,disabled:a}=e,o=n.droppable.containers.get(t);if(!o||s!==o.key)return n;const u=new tf(n.droppable.containers);return u.set(t,{...o,disabled:a}),{...n,droppable:{...n.droppable,containers:u}}}case Rs.UnregisterDroppable:{const{id:t,key:s}=e,a=n.droppable.containers.get(t);if(!a||s!==a.key)return n;const o=new tf(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function C7(n){let{disabled:e}=n;const{active:t,activatorEvent:s,draggableNodes:a}=K.useContext(Df),o=kp(s),u=kp(t?.id);return K.useEffect(()=>{if(!e&&!s&&o&&u!=null){if(!o0(o)||document.activeElement===o.target)return;const c=a.get(u);if(!c)return;const{activatorNode:h,node:f}=c;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[h.current,f.current]){if(!p)continue;const y=Nj(p);if(y){y.focus();break}}})}},[s,e,a,u,o]),null}function U3(n,e){let{transform:t,...s}=e;return n!=null&&n.length?n.reduce((a,o)=>o({transform:a,...s}),t):t}function T7(n){return K.useMemo(()=>({draggable:{...Z1.draggable,...n?.draggable},droppable:{...Z1.droppable,...n?.droppable},dragOverlay:{...Z1.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function k7(n){let{activeNode:e,measure:t,initialRect:s,config:a=!0}=n;const o=K.useRef(!1),{x:u,y:c}=typeof a=="boolean"?{x:a,y:a}:a;mo(()=>{if(!u&&!c||!e){o.current=!1;return}if(o.current||!s)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const p=t(f),y=j3(p,s);if(u||(y.x=0),c||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=M3(f);_&&_.scrollBy({top:y.y,left:y.x})}},[e,u,c,s,t])}const h0=K.createContext({...go,scaleX:1,scaleY:1});var Ac;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Ac||(Ac={}));const q2=K.memo(function(e){var t,s,a,o;let{id:u,accessibility:c,autoScroll:h=!0,children:f,sensors:p=w7,collisionDetection:y=Fj,measuring:_,modifiers:b,...N}=e;const A=K.useReducer(A7,void 0,N7),[k,C]=A,[O,R]=Ej(),[V,B]=K.useState(Ac.Uninitialized),U=V===Ac.Initialized,{draggable:{active:z,nodes:L,translate:F},droppable:{containers:J}}=k,j=z!=null?L.get(z):null,I=K.useRef({initial:null,translated:null}),X=K.useMemo(()=>{var Tt;return z!=null?{id:z,data:(Tt=j?.data)!=null?Tt:_7,rect:I}:null},[z,j]),P=K.useRef(null),[ie,Y]=K.useState(null),[ne,le]=K.useState(null),pe=ff(N,Object.values(N)),we=Mf("DndDescribedBy",u),q=K.useMemo(()=>J.getEnabled(),[J]),E=T7(_),{droppableRects:$,measureDroppableContainers:te,measuringScheduled:ae}=u7(q,{dragging:U,dependencies:[F.x,F.y],config:E.droppable}),re=l7(L,z),de=K.useMemo(()=>ne?jp(ne):null,[ne]),ce=pn(),ve=h7(re,E.draggable.measure);k7({activeNode:z!=null?L.get(z):null,config:ce.layoutShiftCompensation,initialRect:ve,measure:E.draggable.measure});const _e=py(re,E.draggable.measure,ve),Ve=py(re?re.parentElement:null),Xe=K.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:J,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Je=J.getNodeFor((t=Xe.current.over)==null?void 0:t.id),at=x7({measure:E.dragOverlay.measure}),G=(s=at.nodeRef.current)!=null?s:re,Ee=U?(a=at.rect)!=null?a:_e:null,xt=!!(at.nodeRef.current&&at.rect),et=p7(xt?null:_e),De=B3(G?Ai(G):null),rt=m7(U?Je??re:null),Ue=y7(rt),ht=U3(b,{transform:{x:F.x-et.x,y:F.y-et.y,scaleX:1,scaleY:1},activatorEvent:ne,active:X,activeNodeRect:_e,containerNodeRect:Ve,draggingNodeRect:Ee,over:Xe.current.over,overlayNodeRect:at.rect,scrollableAncestors:rt,scrollableAncestorRects:Ue,windowRect:De}),Ae=de?Rh(de,F):null,Ke=g7(rt),bt=gy(Ke),mt=gy(Ke,[_e]),st=Rh(ht,bt),dt=Ee?zj(Ee,ht):null,pt=X&&dt?y({active:X,collisionRect:dt,droppableRects:$,droppableContainers:q,pointerCoordinates:Ae}):null,Nt=k3(pt,"id"),[je,ft]=K.useState(null),ct=xt?ht:Rh(ht,mt),He=Bj(ct,(o=je?.rect)!=null?o:null,_e),ut=K.useRef(null),vt=K.useCallback((Tt,gt)=>{let{sensor:zt,options:wn}=gt;if(P.current==null)return;const Me=L.get(P.current);if(!Me)return;const yt=Tt.nativeEvent,Rt=new zt({active:P.current,activeNode:Me,event:yt,options:wn,context:Xe,onAbort(Te){if(!L.get(Te))return;const{onDragAbort:St}=pe.current,Mt={id:Te};St?.(Mt),O({type:"onDragAbort",event:Mt})},onPending(Te,_t,St,Mt){if(!L.get(Te))return;const{onDragPending:Qt}=pe.current,cn={id:Te,constraint:_t,initialCoordinates:St,offset:Mt};Qt?.(cn),O({type:"onDragPending",event:cn})},onStart(Te){const _t=P.current;if(_t==null)return;const St=L.get(_t);if(!St)return;const{onDragStart:Mt}=pe.current,Ct={activatorEvent:yt,active:{id:_t,data:St.data,rect:I}};Ho.unstable_batchedUpdates(()=>{Mt?.(Ct),B(Ac.Initializing),C({type:Rs.DragStart,initialCoordinates:Te,active:_t}),O({type:"onDragStart",event:Ct}),Y(ut.current),le(yt)})},onMove(Te){C({type:Rs.DragMove,coordinates:Te})},onEnd:it(Rs.DragEnd),onCancel:it(Rs.DragCancel)});ut.current=Rt;function it(Te){return async function(){const{active:St,collisions:Mt,over:Ct,scrollAdjustedTranslate:Qt}=Xe.current;let cn=null;if(St&&Qt){const{cancelDrop:nr}=pe.current;cn={activatorEvent:yt,active:St,collisions:Mt,delta:Qt,over:Ct},Te===Rs.DragEnd&&typeof nr=="function"&&await Promise.resolve(nr(cn))&&(Te=Rs.DragCancel)}P.current=null,Ho.unstable_batchedUpdates(()=>{C({type:Te}),B(Ac.Uninitialized),ft(null),Y(null),le(null),ut.current=null;const nr=Te===Rs.DragEnd?"onDragEnd":"onDragCancel";if(cn){const Pn=pe.current[nr];Pn?.(cn),O({type:nr,event:cn})}})}}},[L]),ot=K.useCallback((Tt,gt)=>(zt,wn)=>{const Me=zt.nativeEvent,yt=L.get(wn);if(P.current!==null||!yt||Me.dndKit||Me.defaultPrevented)return;const Rt={active:yt};Tt(zt,gt.options,Rt)===!0&&(Me.dndKit={capturedBy:gt.sensor},P.current=wn,vt(zt,gt))},[L,vt]),ln=c7(p,ot);b7(p),mo(()=>{_e&&V===Ac.Initializing&&B(Ac.Initialized)},[_e,V]),K.useEffect(()=>{const{onDragMove:Tt}=pe.current,{active:gt,activatorEvent:zt,collisions:wn,over:Me}=Xe.current;if(!gt||!zt)return;const yt={active:gt,activatorEvent:zt,collisions:wn,delta:{x:st.x,y:st.y},over:Me};Ho.unstable_batchedUpdates(()=>{Tt?.(yt),O({type:"onDragMove",event:yt})})},[st.x,st.y]),K.useEffect(()=>{const{active:Tt,activatorEvent:gt,collisions:zt,droppableContainers:wn,scrollAdjustedTranslate:Me}=Xe.current;if(!Tt||P.current==null||!gt||!Me)return;const{onDragOver:yt}=pe.current,Rt=wn.get(Nt),it=Rt&&Rt.rect.current?{id:Rt.id,rect:Rt.rect.current,data:Rt.data,disabled:Rt.disabled}:null,Te={active:Tt,activatorEvent:gt,collisions:zt,delta:{x:Me.x,y:Me.y},over:it};Ho.unstable_batchedUpdates(()=>{ft(it),yt?.(Te),O({type:"onDragOver",event:Te})})},[Nt]),mo(()=>{Xe.current={activatorEvent:ne,active:X,activeNode:re,collisionRect:dt,collisions:pt,droppableRects:$,draggableNodes:L,draggingNode:G,draggingNodeRect:Ee,droppableContainers:J,over:je,scrollableAncestors:rt,scrollAdjustedTranslate:st},I.current={initial:Ee,translated:dt}},[X,re,pt,dt,L,G,Ee,$,J,je,rt,st]),i7({...ce,delta:F,draggingRect:dt,pointerCoordinates:Ae,scrollableAncestors:rt,scrollableAncestorRects:Ue});const Et=K.useMemo(()=>({active:X,activeNode:re,activeNodeRect:_e,activatorEvent:ne,collisions:pt,containerNodeRect:Ve,dragOverlay:at,draggableNodes:L,droppableContainers:J,droppableRects:$,over:je,measureDroppableContainers:te,scrollableAncestors:rt,scrollableAncestorRects:Ue,measuringConfiguration:E,measuringScheduled:ae,windowRect:De}),[X,re,_e,ne,pt,Ve,at,L,J,$,je,te,rt,Ue,E,ae,De]),Bt=K.useMemo(()=>({activatorEvent:ne,activators:ln,active:X,activeNodeRect:_e,ariaDescribedById:{draggable:we},dispatch:C,draggableNodes:L,over:je,measureDroppableContainers:te}),[ne,ln,X,_e,C,we,L,je,te]);return An.createElement(A3.Provider,{value:R},An.createElement(Df.Provider,{value:Bt},An.createElement(q3.Provider,{value:Et},An.createElement(h0.Provider,{value:He},f)),An.createElement(C7,{disabled:c?.restoreFocus===!1})),An.createElement(Oj,{...c,hiddenTextDescribedById:we}));function pn(){const Tt=ie?.autoScrollEnabled===!1,gt=typeof h=="object"?h.enabled===!1:h===!1,zt=U&&!Tt&&!gt;return typeof h=="object"?{...h,enabled:zt}:{enabled:zt}}}),j7=K.createContext(null),vy="button",E7="Draggable";function M7(n){let{id:e,data:t,disabled:s=!1,attributes:a}=n;const o=Mf(E7),{activators:u,activatorEvent:c,active:h,activeNodeRect:f,ariaDescribedById:p,draggableNodes:y,over:_}=K.useContext(Df),{role:b=vy,roleDescription:N="draggable",tabIndex:A=0}=a??{},k=h?.id===e,C=K.useContext(k?h0:j7),[O,R]=Tp(),[V,B]=Tp(),U=v7(u,e),z=ff(t);mo(()=>(y.set(e,{id:e,key:o,node:O,activatorNode:V,data:z}),()=>{const F=y.get(e);F&&F.key===o&&y.delete(e)}),[y,e]);const L=K.useMemo(()=>({role:b,tabIndex:A,"aria-disabled":s,"aria-pressed":k&&b===vy?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[s,b,A,k,N,p.draggable]);return{active:h,activatorEvent:c,activeNodeRect:f,attributes:L,isDragging:k,listeners:s?void 0:U,node:O,over:_,setNodeRef:R,setActivatorNodeRef:B,transform:C}}function H3(){return K.useContext(q3)}const L7="Droppable",O7={timeout:25};function D7(n){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:a}=n;const o=Mf(L7),{active:u,dispatch:c,over:h,measureDroppableContainers:f}=K.useContext(Df),p=K.useRef({disabled:t}),y=K.useRef(!1),_=K.useRef(null),b=K.useRef(null),{disabled:N,updateMeasurementsFor:A,timeout:k}={...O7,...a},C=ff(A??s),O=K.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),b.current=null},k)},[k]),R=u0({callback:O,disabled:N||!u}),V=K.useCallback((L,F)=>{R&&(F&&(R.unobserve(F),y.current=!1),L&&R.observe(L))},[R]),[B,U]=Tp(V),z=ff(e);return K.useEffect(()=>{!R||!B.current||(R.disconnect(),y.current=!1,R.observe(B.current))},[B,R]),K.useEffect(()=>(c({type:Rs.RegisterDroppable,element:{id:s,key:o,disabled:t,node:B,rect:_,data:z}}),()=>c({type:Rs.UnregisterDroppable,key:o,id:s})),[s]),K.useEffect(()=>{t!==p.current.disabled&&(c({type:Rs.SetDroppableDisabled,id:s,key:o,disabled:t}),p.current.disabled=t)},[s,o,t,c]),{active:u,rect:_,isOver:h?.id===s,node:B,over:h,setNodeRef:U}}function R7(n){let{animation:e,children:t}=n;const[s,a]=K.useState(null),[o,u]=K.useState(null),c=kp(t);return!t&&!s&&c&&a(c),mo(()=>{if(!o)return;const h=s?.key,f=s?.props.id;if(h==null||f==null){a(null);return}Promise.resolve(e(f,o)).then(()=>{a(null)})},[e,s,o]),An.createElement(An.Fragment,null,t,s?K.cloneElement(s,{ref:u}):null)}const I7={x:0,y:0,scaleX:1,scaleY:1};function V7(n){let{children:e}=n;return An.createElement(Df.Provider,{value:z3},An.createElement(h0.Provider,{value:I7},e))}const F7={position:"fixed",touchAction:"none"},B7=n=>o0(n)?"transform 250ms ease":void 0,P7=K.forwardRef((n,e)=>{let{as:t,activatorEvent:s,adjustScale:a,children:o,className:u,rect:c,style:h,transform:f,transition:p=B7}=n;if(!c)return null;const y=a?f:{...f,scaleX:1,scaleY:1},_={...F7,width:c.width,height:c.height,top:c.top,left:c.left,transform:Xo.Transform.toString(y),transformOrigin:a&&s?Dj(s,c):void 0,transition:typeof p=="function"?p(s):p,...h};return An.createElement(t,{className:u,style:_,ref:e},o)}),z7=n=>e=>{let{active:t,dragOverlay:s}=e;const a={},{styles:o,className:u}=n;if(o!=null&&o.active)for(const[c,h]of Object.entries(o.active))h!==void 0&&(a[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,h));if(o!=null&&o.dragOverlay)for(const[c,h]of Object.entries(o.dragOverlay))h!==void 0&&s.node.style.setProperty(c,h);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&s.node.classList.add(u.dragOverlay),function(){for(const[h,f]of Object.entries(a))t.node.style.setProperty(h,f);u!=null&&u.active&&t.node.classList.remove(u.active)}},q7=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Xo.Transform.toString(e)},{transform:Xo.Transform.toString(t)}]},U7={duration:250,easing:"ease",keyframes:q7,sideEffects:z7({styles:{active:{opacity:"0"}}})};function H7(n){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:a}=n;return a0((o,u)=>{if(e===null)return;const c=t.get(o);if(!c)return;const h=c.node.current;if(!h)return;const f=P3(u);if(!f)return;const{transform:p}=Ai(u).getComputedStyle(u),y=E3(p);if(!y)return;const _=typeof e=="function"?e:W7(e);return V3(h,a.draggable.measure),_({active:{id:o,data:c.data,node:h,rect:a.draggable.measure(h)},draggableNodes:t,dragOverlay:{node:u,rect:a.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:a,transform:y})})}function W7(n){const{duration:e,easing:t,sideEffects:s,keyframes:a}={...U7,...n};return o=>{let{active:u,dragOverlay:c,transform:h,...f}=o;if(!e)return;const p={x:c.rect.left-u.rect.left,y:c.rect.top-u.rect.top},y={scaleX:h.scaleX!==1?u.rect.width*h.scaleX/c.rect.width:1,scaleY:h.scaleY!==1?u.rect.height*h.scaleY/c.rect.height:1},_={x:h.x-p.x,y:h.y-p.y,...y},b=a({...f,active:u,dragOverlay:c,transform:{initial:h,final:_}}),[N]=b,A=b[b.length-1];if(JSON.stringify(N)===JSON.stringify(A))return;const k=s?.({active:u,dragOverlay:c,...f}),C=c.node.animate(b,{duration:e,easing:t,fill:"forwards"});return new Promise(O=>{C.onfinish=()=>{k?.(),O()}})}}let yy=0;function G7(n){return K.useMemo(()=>{if(n!=null)return yy++,yy},[n])}const W3=An.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:a,transition:o,modifiers:u,wrapperElement:c="div",className:h,zIndex:f=999}=n;const{activatorEvent:p,active:y,activeNodeRect:_,containerNodeRect:b,draggableNodes:N,droppableContainers:A,dragOverlay:k,over:C,measuringConfiguration:O,scrollableAncestors:R,scrollableAncestorRects:V,windowRect:B}=H3(),U=K.useContext(h0),z=G7(y?.id),L=U3(u,{activatorEvent:p,active:y,activeNodeRect:_,containerNodeRect:b,draggingNodeRect:k.rect,over:C,overlayNodeRect:k.rect,scrollableAncestors:R,scrollableAncestorRects:V,transform:U,windowRect:B}),F=z2(_),J=H7({config:s,draggableNodes:N,droppableContainers:A,measuringConfiguration:O}),j=F?k.setRef:void 0;return An.createElement(V7,null,An.createElement(R7,{animation:J},y&&z?An.createElement(P7,{key:z,id:y.id,ref:j,as:c,activatorEvent:p,adjustScale:e,className:h,transition:o,rect:F,style:{zIndex:f,...a},transform:L},t):null))});function Rf(n,e,t){const s=n.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function $7(n,e){return n.reduce((t,s,a)=>{const o=e.get(s);return o&&(t[a]=o),t},Array(n.length))}function R1(n){return n!==null&&n>=0}function Y7(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function X7(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const I1={scaleX:1,scaleY:1},U2=n=>{var e;let{rects:t,activeNodeRect:s,activeIndex:a,overIndex:o,index:u}=n;const c=(e=t[a])!=null?e:s;if(!c)return null;const h=Z7(t,u,a);if(u===a){const f=t[o];return f?{x:a<o?f.left+f.width-(c.left+c.width):f.left-c.left,y:0,...I1}:null}return u>a&&u<=o?{x:-c.width-h,y:0,...I1}:u<a&&u>=o?{x:c.width+h,y:0,...I1}:{x:0,y:0,...I1}};function Z7(n,e,t){const s=n[e],a=n[e-1],o=n[e+1];return!s||!a&&!o?0:t<e?a?s.left-(a.left+a.width):o.left-(s.left+s.width):o?o.left-(s.left+s.width):s.left-(a.left+a.width)}const G3=n=>{let{rects:e,activeIndex:t,overIndex:s,index:a}=n;const o=Rf(e,s,t),u=e[a],c=o[a];return!c||!u?null:{x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height}},$3="Sortable",Y3=An.createContext({activeIndex:-1,containerId:$3,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:G3,disabled:{draggable:!1,droppable:!1}});function H2(n){let{children:e,id:t,items:s,strategy:a=G3,disabled:o=!1}=n;const{active:u,dragOverlay:c,droppableRects:h,over:f,measureDroppableContainers:p}=H3(),y=Mf($3,t),_=c.rect!==null,b=K.useMemo(()=>s.map(U=>typeof U=="object"&&"id"in U?U.id:U),[s]),N=u!=null,A=u?b.indexOf(u.id):-1,k=f?b.indexOf(f.id):-1,C=K.useRef(b),O=!Y7(b,C.current),R=k!==-1&&A===-1||O,V=X7(o);mo(()=>{O&&N&&p(b)},[O,b,N,p]),K.useEffect(()=>{C.current=b},[b]);const B=K.useMemo(()=>({activeIndex:A,containerId:y,disabled:V,disableTransforms:R,items:b,overIndex:k,useDragOverlay:_,sortedRects:$7(b,h),strategy:a}),[A,y,V.draggable,V.droppable,R,b,k,h,_,a]);return An.createElement(Y3.Provider,{value:B},e)}const K7=n=>{let{id:e,items:t,activeIndex:s,overIndex:a}=n;return Rf(t,s,a).indexOf(e)},Q7=n=>{let{containerId:e,isSorting:t,wasDragging:s,index:a,items:o,newIndex:u,previousItems:c,previousContainerId:h,transition:f}=n;return!f||!s||c!==o&&a===u?!1:t?!0:u!==a&&e===h},J7={duration:200,easing:"ease"},X3="transform",eE=Xo.Transition.toString({property:X3,duration:0,easing:"linear"}),tE={roleDescription:"sortable"};function nE(n){let{disabled:e,index:t,node:s,rect:a}=n;const[o,u]=K.useState(null),c=K.useRef(t);return mo(()=>{if(!e&&t!==c.current&&s.current){const h=a.current;if(h){const f=ad(s.current,{ignoreTransform:!0}),p={x:h.left-f.left,y:h.top-f.top,scaleX:h.width/f.width,scaleY:h.height/f.height};(p.x||p.y)&&u(p)}}t!==c.current&&(c.current=t)},[e,t,s,a]),K.useEffect(()=>{o&&u(null)},[o]),o}function W2(n){let{animateLayoutChanges:e=Q7,attributes:t,disabled:s,data:a,getNewIndex:o=K7,id:u,strategy:c,resizeObserverConfig:h,transition:f=J7}=n;const{items:p,containerId:y,activeIndex:_,disabled:b,disableTransforms:N,sortedRects:A,overIndex:k,useDragOverlay:C,strategy:O}=K.useContext(Y3),R=rE(s,b),V=p.indexOf(u),B=K.useMemo(()=>({sortable:{containerId:y,index:V,items:p},...a}),[y,a,V,p]),U=K.useMemo(()=>p.slice(p.indexOf(u)),[p,u]),{rect:z,node:L,isOver:F,setNodeRef:J}=D7({id:u,data:B,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:U,...h}}),{active:j,activatorEvent:I,activeNodeRect:X,attributes:P,setNodeRef:ie,listeners:Y,isDragging:ne,over:le,setActivatorNodeRef:pe,transform:we}=M7({id:u,data:B,attributes:{...tE,...t},disabled:R.draggable}),q=xj(J,ie),E=!!j,$=E&&!N&&R1(_)&&R1(k),te=!C&&ne,ae=te&&$?we:null,de=$?ae??(c??O)({rects:A,activeNodeRect:X,activeIndex:_,overIndex:k,index:V}):null,ce=R1(_)&&R1(k)?o({id:u,items:p,activeIndex:_,overIndex:k}):V,ve=j?.id,_e=K.useRef({activeId:ve,items:p,newIndex:ce,containerId:y}),Ve=p!==_e.current.items,Xe=e({active:j,containerId:y,isDragging:ne,isSorting:E,id:u,index:V,items:p,newIndex:_e.current.newIndex,previousItems:_e.current.items,previousContainerId:_e.current.containerId,transition:f,wasDragging:_e.current.activeId!=null}),Je=nE({disabled:!Xe,index:V,node:L,rect:z});return K.useEffect(()=>{E&&_e.current.newIndex!==ce&&(_e.current.newIndex=ce),y!==_e.current.containerId&&(_e.current.containerId=y),p!==_e.current.items&&(_e.current.items=p)},[E,ce,y,p]),K.useEffect(()=>{if(ve===_e.current.activeId)return;if(ve!=null&&_e.current.activeId==null){_e.current.activeId=ve;return}const G=setTimeout(()=>{_e.current.activeId=ve},50);return()=>clearTimeout(G)},[ve]),{active:j,activeIndex:_,attributes:P,data:B,rect:z,index:V,newIndex:ce,items:p,isOver:F,isSorting:E,isDragging:ne,listeners:Y,node:L,overIndex:k,over:le,setNodeRef:q,setActivatorNodeRef:pe,setDroppableNodeRef:J,setDraggableNodeRef:ie,transform:Je??de,transition:at()};function at(){if(Je||Ve&&_e.current.newIndex===V)return eE;if(!(te&&!o0(I)||!f)&&(E||Xe))return Xo.Transition.toString({...f,property:X3})}}function rE(n,e){var t,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(s=n?.droppable)!=null?s:e.droppable}}function Lp(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const sE=[Bn.Down,Bn.Right,Bn.Up,Bn.Left],G2=(n,e)=>{let{context:{active:t,collisionRect:s,droppableRects:a,droppableContainers:o,over:u,scrollableAncestors:c}}=e;if(sE.includes(n.code)){if(n.preventDefault(),!t||!s)return;const h=[];o.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const _=a.get(y.id);if(_)switch(n.code){case Bn.Down:s.top<_.top&&h.push(y);break;case Bn.Up:s.top>_.top&&h.push(y);break;case Bn.Left:s.left>_.left&&h.push(y);break;case Bn.Right:s.left<_.left&&h.push(y);break}});const f=Ij({collisionRect:s,droppableRects:a,droppableContainers:h});let p=k3(f,"id");if(p===u?.id&&f.length>1&&(p=f[1].id),p!=null){const y=o.get(t.id),_=o.get(p),b=_?a.get(_.id):null,N=_?.node.current;if(N&&b&&y&&_){const k=l0(N).some((U,z)=>c[z]!==U),C=Z3(y,_),O=iE(y,_),R=k||!C?{x:0,y:0}:{x:O?s.width-b.width:0,y:O?s.height-b.height:0},V={x:b.left,y:b.top};return R.x&&R.y?V:pf(V,R)}}}};function Z3(n,e){return!Lp(n)||!Lp(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function iE(n,e){return!Lp(n)||!Lp(e)||!Z3(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}const aE={intro:"In",verse:"V","pre-chorus":"PC",chorus:"C",bridge:"Br",interlude:"Int",solo:"So",breakdown:"Bd",tag:"Tg",hook:"Hk",outro:"Out"},oE={intro:{bg:"bg-purple-600",border:"border-purple-500",text:"text-purple-100"},verse:{bg:"bg-blue-600",border:"border-blue-500",text:"text-blue-100"},"pre-chorus":{bg:"bg-cyan-600",border:"border-cyan-500",text:"text-cyan-100"},chorus:{bg:"bg-amber-600",border:"border-amber-500",text:"text-amber-100"},bridge:{bg:"bg-emerald-600",border:"border-emerald-500",text:"text-emerald-100"},interlude:{bg:"bg-teal-600",border:"border-teal-500",text:"text-teal-100"},solo:{bg:"bg-orange-600",border:"border-orange-500",text:"text-orange-100"},breakdown:{bg:"bg-red-600",border:"border-red-500",text:"text-red-100"},tag:{bg:"bg-pink-600",border:"border-pink-500",text:"text-pink-100"},hook:{bg:"bg-yellow-600",border:"border-yellow-500",text:"text-yellow-100"},outro:{bg:"bg-rose-600",border:"border-rose-500",text:"text-rose-100"}},lE={bg:"bg-slate-600",text:"text-slate-100"};function cE(n,e){const t=aE[n.type]||n.type.charAt(0).toUpperCase(),s=e.filter(a=>a.type===n.type);if(s.length>1){const a=s.findIndex(o=>o.id===n.id)+1;return`${t}${a}`}return t}const uE=({section:n,allSections:e,totalMeasures:t,isActive:s,isLast:a,onClick:o})=>{const{attributes:u,listeners:c,setNodeRef:h,transform:f,transition:p,isDragging:y}=W2({id:n.id}),_=n.measures.length/t*100,b=oE[n.type]||lE,N=cE(n,e),A=_>5||s,k={transform:Xo.Transform.toString(f),transition:p,width:`${_}%`,minWidth:"16px"};return m.jsxs("div",{ref:h,style:k,...u,...c,onClick:C=>{C.stopPropagation(),o?.()},className:Pt("relative h-full flex items-center justify-center overflow-hidden","transition-all duration-200 ease-out","touch-none select-none",b.bg,s&&!y&&"ring-2 ring-white/50 ring-inset z-10",!s&&!y&&"opacity-70 hover:opacity-90",y&&"opacity-100 scale-[1.08] z-50 ring-2 ring-white ring-inset shadow-lg","cursor-grab active:cursor-grabbing",!a&&!y&&"border-r border-black/30"),title:`${n.name||n.type} (${n.measures.length} bars) - Drag to reorder`,children:[A&&m.jsx("span",{className:Pt("text-[9px] font-bold uppercase tracking-tight pointer-events-none","transition-all duration-200",b.text,s&&!y&&"scale-105"),style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:N}),s&&!y&&m.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white/60",style:{boxShadow:"0 0 6px rgba(255,255,255,0.6)"}})]})},K3=({sections:n,activeSectionId:e,onSectionClick:t,onReorder:s,onAddSection:a})=>{const o=n.reduce((h,f)=>h+f.measures.length,0),u=V2(Ll(Of,{activationConstraint:{distance:5}}),Ll(c0,{activationConstraint:{delay:150,tolerance:5}}),Ll(Lf,{coordinateGetter:G2})),c=h=>{const{active:f,over:p}=h;if(p&&f.id!==p.id&&s){const y=n.findIndex(N=>N.id===f.id),_=n.findIndex(N=>N.id===p.id),b=Rf(n,y,_);s(b)}};return o===0||n.length===0?a?m.jsx("div",{className:"w-full px-1",children:m.jsx("div",{className:"relative w-full h-6 bg-black/20 rounded-lg border border-white/5 flex items-center justify-center",children:m.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-2 py-0.5 text-[9px] font-medium text-white/50 hover:text-white/80 transition-colors",children:[m.jsx(Oc,{size:10}),"Add Section"]})})}):null:m.jsxs("div",{className:"w-full px-1",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("div",{className:"relative flex-1 h-6 bg-black/20 rounded-lg overflow-hidden border border-white/5",children:[m.jsxs(q2,{sensors:u,collisionDetection:F2,onDragEnd:c,children:[m.jsx(H2,{items:n.map(h=>h.id),strategy:U2,children:m.jsx("div",{className:"absolute inset-0 flex",children:n.map((h,f)=>m.jsx(uE,{section:h,allSections:n,totalMeasures:o,isActive:h.id===e,isLast:f===n.length-1,onClick:()=>t?.(h.id)},h.id))})}),m.jsx(W3,{dropAnimation:{duration:200,easing:"ease-out"},children:null})]}),m.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-white/10 pointer-events-none"})]}),a&&m.jsx("button",{onClick:a,className:Pt("shrink-0 w-6 h-6 rounded-lg","flex items-center justify-center","bg-accent-primary/20 border border-accent-primary/30","text-accent-primary hover:bg-accent-primary/30","transition-all hover:scale-105 active:scale-95"),title:"Add new section",children:m.jsx(Oc,{size:14})})]}),m.jsxs("div",{className:"relative w-full h-1.5 flex justify-between px-0.5 mt-0.5",children:[m.jsx("div",{className:"w-px h-full bg-white/20"}),m.jsx("div",{className:"w-px h-full bg-white/20"})]})]})},hE=[[4,4],[3,4],[5,4],[2,4],[6,8]],xy=[{name:"Intro",type:"intro"},{name:"Verse",type:"verse"},{name:"Pre-Chorus",type:"pre-chorus"},{name:"Chorus",type:"chorus"},{name:"Bridge",type:"bridge"},{name:"Interlude",type:"interlude"},{name:"Solo",type:"solo"},{name:"Breakdown",type:"breakdown"},{name:"Tag",type:"tag"},{name:"Hook",type:"hook"},{name:"Outro",type:"outro"}],Q3=({section:n,isOpen:e,onClose:t,onTimeSignatureChange:s,onBarsChange:a,onStepCountChange:o,onNameChange:u,onCopy:c,onClear:h,onDelete:f,songTimeSignature:p,onNavigatePrev:y,onNavigateNext:_,hasPrev:b=!1,hasNext:N=!1,sectionIndex:A,totalSections:k,onSlotClick:C,onMoveUp:O,onMoveDown:R})=>{const V=K.useRef(null),{currentSong:B,reorderSections:U,addSuggestedSection:z}=Wt(),L=n.timeSignature||p,F=`${L[0]}/${L[1]}`,J=n.measures.length,j=n.measures[0]?.beats.length??1,I=_3(L);return K.useEffect(()=>{if(!e)return;const X=P=>{P.key==="Escape"&&t()};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[e,t]),e?Ho.createPortal(m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:X=>{X.stopPropagation(),t()}}),y&&m.jsx("button",{onClick:y,disabled:!b,className:Pt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{left:"calc(50% - min(150px, 45vw) - 52px)"},title:"Previous Section",children:m.jsx($h,{size:24})}),_&&m.jsx("button",{onClick:_,disabled:!N,className:Pt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",N?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{right:"calc(50% - min(150px, 45vw) - 52px)"},title:"Next Section",children:m.jsx(Gh,{size:24})}),m.jsxs("div",{ref:V,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"260px",maxWidth:"300px",width:"90vw"},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[A!==void 0&&k!==void 0&&m.jsxs("div",{className:"h-5 px-2 rounded-full flex items-center justify-center gap-0.5 font-bold text-white shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99,102,241,0.4)"},title:`Section ${A+1} of ${k}`,children:[m.jsx("span",{className:"text-[10px]",children:A+1}),m.jsx("span",{className:"text-[6px] opacity-60 font-medium",children:"of"}),m.jsx("span",{className:"text-[10px]",children:k})]}),(A===void 0||k===void 0)&&m.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),u?m.jsx("select",{value:n.type,onChange:X=>{const P=xy.find(ie=>ie.type===X.target.value);P&&u(P.name,P.type)},className:`bg-transparent text-sm font-bold text-text-primary 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                           appearance-none cursor-pointer pr-5`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0 center"},children:xy.map(X=>m.jsx("option",{value:X.type,className:"bg-bg-secondary",children:X.name},X.type))}):m.jsx("span",{className:"text-sm font-bold text-text-primary",children:n.name})]}),m.jsx("button",{onClick:X=>{X.stopPropagation(),t()},className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:m.jsx($o,{size:14})})]}),m.jsx("div",{className:"px-3 py-2 border-b border-border-subtle bg-black/10",children:m.jsx(K3,{sections:B.sections,activeSectionId:n.id,onReorder:X=>{U(X)},onAddSection:z,onSectionClick:X=>{if(_&&y){const P=B.sections.findIndex(Y=>Y.id===X),ie=B.sections.findIndex(Y=>Y.id===n.id);if(P>ie&&_)for(let Y=ie;Y<P;Y++)_();else if(P<ie&&y)for(let Y=ie;Y>P;Y--)y()}}})}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Sig"}),m.jsx("div",{className:"relative",children:m.jsx("select",{value:F,onChange:X=>s(X.target.value),className:`w-full h-8 bg-bg-tertiary text-text-primary text-xs font-bold rounded-lg 
                                               px-3 border border-border-subtle 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"24px"},children:hE.map(([X,P])=>m.jsxs("option",{value:`${X}/${P}`,className:"bg-bg-secondary",children:[X,"/",P]},`${X}/${P}`))})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Length"}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>a(Math.max(1,J-1)),disabled:J<=1,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:""}),m.jsx("span",{className:"flex-1 text-center text-sm font-bold text-text-primary tabular-nums",children:J}),m.jsx("button",{onClick:()=>a(Math.min(32,J+1)),disabled:J>=32,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:"+"})]})]})]}),o&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"block text-center text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Steps Per Bar"}),m.jsx("div",{className:"flex items-center gap-1.5 justify-center",children:I.map(X=>{const P=wg(X,L),ie=X===j;return m.jsx("button",{onClick:()=>o(X),className:Pt("flex items-center justify-center rounded-lg transition-all","w-11 h-11 active:scale-95",ie?"bg-accent-primary text-white shadow-lg border-2 border-accent-primary":"bg-bg-tertiary border border-border-subtle text-text-muted hover:text-text-primary hover:bg-bg-secondary"),title:`${X} step${X>1?"s":""} per measure`,children:m.jsx(xg,{type:P,size:24})},X)})})]}),m.jsx(yj,{section:n,songTimeSignature:p,className:"pt-1",onSlotClick:C}),m.jsxs("div",{className:"space-y-2 pt-2",children:[O&&R&&m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>{O()},disabled:!b,className:Pt("flex-1 flex items-center justify-center gap-1.5","px-2 py-2 rounded-lg","transition-all text-xs font-bold active:scale-95",b?"bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20":"bg-bg-tertiary border border-border-subtle text-text-muted opacity-40 cursor-not-allowed"),title:"Move section earlier in song",children:[m.jsx(zT,{size:14}),"Move Up"]}),m.jsxs("button",{onClick:()=>{R()},disabled:!N,className:Pt("flex-1 flex items-center justify-center gap-1.5","px-2 py-2 rounded-lg","transition-all text-xs font-bold active:scale-95",N?"bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20":"bg-bg-tertiary border border-border-subtle text-text-muted opacity-40 cursor-not-allowed"),title:"Move section later in song",children:[m.jsx(BT,{size:14}),"Move Down"]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("button",{onClick:()=>{c()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-accent-primary/10 border border-accent-primary/30
                                           text-accent-primary hover:bg-accent-primary/20
                                           transition-all text-xs font-bold active:scale-95`,children:[m.jsx(nk,{size:14}),"Duplicate"]}),m.jsxs("button",{onClick:()=>{h()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-yellow-500/10 border border-yellow-500/30
                                           text-yellow-400 hover:bg-yellow-500/20
                                           transition-all text-xs font-bold active:scale-95`,children:[m.jsx(ok,{size:14}),"Clear"]}),m.jsxs("button",{onClick:()=>{f()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-red-500/10 border border-red-500/30
                                           text-red-400 hover:bg-red-500/20
                                           transition-all text-xs font-bold active:scale-95`,children:[m.jsx(hf,{size:14}),"Remove"]})]})]})]})]})]}),document.body):null},dE={intro:"Intro",verse:"Verse","pre-chorus":"Pre-Chorus",chorus:"Chorus",bridge:"Bridge",interlude:"Interlude",solo:"Solo",breakdown:"Breakdown",tag:"Tag",hook:"Hook",outro:"Outro"};function Ih(n,e){const t=dE[n.type],s=e.filter(o=>o.type===n.type);if(s.length<=1)return t;const a=s.findIndex(o=>o.id===n.id);return`${t} ${a+1}`}const fE=({section:n,allSections:e,isActive:t,isDesktop:s,onActivate:a,onEdit:o,onDelete:u})=>{const{attributes:c,listeners:h,setNodeRef:f,transform:p,transition:y,isDragging:_}=W2({id:n.id}),b={transform:Xo.Transform.toString(p),transition:y},N=Ih(n,e),A=N.charAt(0).toUpperCase();return m.jsxs("div",{ref:f,"data-section-id":n.id,className:Pt("relative shrink-0",_&&"opacity-50 scale-95 z-50"),style:b,children:[m.jsx("button",{onClick:()=>{_||(t?o():a())},className:Pt("no-touch-enlarge relative font-semibold transition-all touch-feedback","flex items-center justify-center select-none",t?Pt("rounded-full text-white shadow-lg whitespace-nowrap overflow-hidden",s?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"):Pt("rounded-full text-text-secondary hover:text-text-primary border border-border-medium hover:border-border-subtle hover:bg-bg-tertiary",s?"w-9 h-9 text-sm":"w-8 h-8 text-xs")),style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",...t?{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 16px rgba(99, 102, 241, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.2)"}:void 0},title:`${N} - Hold center to drag`,children:t?m.jsxs("span",{className:"flex items-center gap-1 px-2 truncate pointer-events-none",children:[m.jsx("span",{className:"truncate",children:N}),m.jsx("span",{className:"pointer-events-auto cursor-pointer hover:opacity-100 p-0.5 -m-0.5 rounded transition-opacity",onClick:k=>{k.stopPropagation(),o()},children:m.jsx(u3,{size:s?14:12,className:"opacity-70 hover:opacity-100 shrink-0"})})]}):A}),m.jsx("div",{...c,...h,onClick:()=>{_||(t?o():a())},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 touch-none draggable-element cursor-grab active:cursor-grabbing",style:{width:t?s?"60px":"50px":s?"24px":"20px",height:s?"24px":"20px",WebkitTouchCallout:"none",WebkitUserSelect:"none"},title:"Hold to drag"})]})},Ag=({isOpen:n,onToggle:e,hideCloseButton:t=!1,isCompact:s=!1,isLandscape:a=!1})=>{const{currentSong:o,selectedSectionId:u,selectedSlotId:c,setSelectedSlot:h,selectSlotOnly:f,setSelectedChord:p,playingSectionId:y,playingSlotId:_,isPlaying:b,addSuggestedSection:N,setSectionTimeSignature:A,setSectionMeasures:k,setSectionSubdivision:C,removeSection:O,duplicateSection:R,clearSection:V,setMeasureSubdivision:B,selectedChord:U,addChordToSlot:z,toggleSongMap:L,updateSection:F,undo:J,redo:j,canUndo:I,canRedo:X,clearSlot:P,reorderSections:ie}=Wt(),Y=o.timeSignature,ne=Xh(),le=K.useRef(null),pe=K.useRef(null),{isMobile:we}=Eu(),q=!we,[E,$]=An.useState(0),te=K.useRef(0),[ae,re]=An.useState(0),de=K.useRef(0),[ce,ve]=An.useState(0),_e=K.useRef(!1),[Ve,Xe]=An.useState(null),Je=K.useRef(null),[at,G]=K.useState(null),Ee=V2(Ll(Of,{activationConstraint:{distance:10}}),Ll(c0,{activationConstraint:{delay:200,tolerance:20}}),Ll(Lf,{coordinateGetter:G2})),xt=je=>{G(je.active.id)},et=je=>{const{active:ft,over:ct}=je;if(G(null),ct&&ft.id!==ct.id){const He=o.sections.findIndex(vt=>vt.id===ft.id),ut=o.sections.findIndex(vt=>vt.id===ct.id);if(He!==-1&&ut!==-1){const vt=Rf(o.sections,He,ut);ie(vt),$(ut);const ot=o.sections[He];ot&&ot.measures[0]?.beats[0]&&h(ot.id,ot.measures[0].beats[0].id)}}};K.useEffect(()=>{if(!b&&u&&pe.current){const je=o.sections.findIndex(ft=>ft.id===u);je!==-1&&($(je),setTimeout(()=>{if(pe.current){const ft=pe.current.querySelector(`[data-section-id="${u}"]`);ft&&ft.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100))}},[u,o.sections,b]),K.useEffect(()=>{if(b&&y){const je=o.sections.findIndex(ft=>ft.id===y);je!==-1&&je!==E&&$(je)}},[b,y,o.sections,E]),K.useEffect(()=>{if(_&&le.current){const je=le.current.querySelector(`[data-slot-id="${_}"]`);je&&je.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[_]),K.useEffect(()=>{if(!n||!c||b)return;const je=setTimeout(()=>{if(le.current){const ft=le.current.querySelector(`[data-slot-id="${c}"]`);ft&&ft.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},250);return()=>clearTimeout(je)},[c,b,n]);const De=je=>{te.current=je.touches[0].clientY},rt=je=>{const ft=je.touches[0].clientY-te.current;ft>0&&re(Math.min(ft,100))},Ue=()=>{ae>50&&e(),re(0)},ht=je=>{de.current=je.touches[0].clientY},Ae=je=>{const ft=de.current-je.touches[0].clientY;ft>0&&ve(Math.min(ft,60))},Ke=()=>{ce>30&&e(),ve(0)},bt=je=>{_e.current=!0,de.current=je.clientY,je.preventDefault()};K.useEffect(()=>{const je=ct=>{if(!_e.current)return;const He=de.current-ct.clientY;He>0&&ve(Math.min(He,60))},ft=()=>{_e.current&&(ce>30&&e(),ve(0),_e.current=!1)};return document.addEventListener("mousemove",je),document.addEventListener("mouseup",ft),()=>{document.removeEventListener("mousemove",je),document.removeEventListener("mouseup",ft)}},[ce,e]);const mt=je=>{if(ne[je])return ne[je];const ft=xu(je);for(const ct of Object.keys(ne))if(xu(ct)===ft)return ne[ct];return"hsl(230, 60%, 50%)"},st=(je,ft,ct)=>{const He=u===je&&c===ft,ut=Date.now();if(ct&&Je.current&&Je.current.slotId===ft&&ut-Je.current.time<400){U&&(z(U,je,ft),f(je,ft)),Je.current=null;return}ct?(ct.notes&&ct.notes.length>0&&qr(ct.notes),He?p(ct):f(je,ft),Je.current={slotId:ft,time:ut}):(He&&U?z(U,je,ft):f(je,ft),Je.current=null)},dt=je=>{const ft=je==="prev"?Math.max(0,E-1):Math.min(o.sections.length-1,E+1);$(ft);const ct=o.sections[ft];ct&&ct.measures[0]?.beats[0]&&h(ct.id,ct.measures[0].beats[0].id)},pt=je=>{if(!pe.current)return;const ft=pe.current,ct=120,He=ft.scrollWidth-ft.clientWidth,ut=ft.scrollLeft;let vt;je==="left"?vt=Math.max(0,ut-ct):vt=Math.min(He,ut+ct),ft.scrollTo({left:vt,behavior:"smooth"})},Nt=o.sections[E];return n?m.jsxs("div",{"data-mobile-timeline":!0,className:Pt("relative w-full bg-bg-secondary border-t-2 border-border-subtle overflow-hidden flex flex-col mobile-timeline-drawer",a&&"h-full",t&&"h-full border-t-0"),style:{maxHeight:a||t?void 0:"140px",transform:ae>0?`translateY(${ae}px)`:void 0,opacity:ae>0?Math.max(.5,1-ae/150):1,transition:ae===0?"all 0.2s ease-out":"none"},children:[!t&&m.jsx("div",{className:"flex flex-col items-center pt-2 pb-2.5 cursor-grab active:cursor-grabbing shrink-0",onTouchStart:De,onTouchMove:rt,onTouchEnd:Ue,children:m.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})}),s?m.jsxs("div",{className:"relative flex items-center justify-center shrink-0 px-1 py-1",children:[m.jsx("button",{onClick:()=>L(!0),className:"absolute left-1 rounded text-text-muted hover:text-accent-primary touch-feedback flex items-center justify-center w-5 h-5",title:"Song Overview",children:m.jsx(wp,{size:12})}),m.jsxs("div",{className:"flex items-center justify-center gap-1",children:[m.jsx("button",{onClick:()=>dt("prev"),disabled:E===0,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:m.jsx($h,{size:14})}),m.jsx("div",{className:"relative",children:m.jsxs("button",{onClick:()=>Nt&&Xe(Nt.id),className:"flex items-center justify-center gap-0.5 px-2 py-1 rounded-full text-white font-semibold text-[10px]",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)",border:"1px solid rgba(255,255,255,0.2)"},title:Nt?Ih(Nt,o.sections):"Section",children:[m.jsxs("span",{className:"flex items-baseline",children:[m.jsx("span",{children:Nt?Ih(Nt,o.sections).charAt(0).toUpperCase():"S"}),m.jsx("span",{className:"text-[7px] opacity-60 ml-0.5",children:E+1})]}),m.jsx(u3,{size:10,className:"opacity-70 shrink-0"})]})}),m.jsx("button",{onClick:()=>dt("next"),disabled:E===o.sections.length-1,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:m.jsx(Gh,{size:14})})]}),m.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5",children:[m.jsx("button",{onClick:J,disabled:!I,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:m.jsx(Sp,{size:10})}),m.jsx("button",{onClick:j,disabled:!X,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:m.jsx(Yh,{size:10})})]})]}):m.jsxs("div",{className:Pt("flex items-center justify-between shrink-0",q?"px-3 py-1":"px-2 pb-1.5"),children:[m.jsxs("div",{className:"flex items-center shrink-0",children:[m.jsx("button",{onClick:()=>L(!0),className:Pt("no-touch-enlarge rounded text-text-muted hover:text-accent-primary touch-feedback shrink-0 mr-0.5",q?"p-2":"p-1.5"),title:"Song Overview",children:m.jsx(wp,{size:q?18:16})}),m.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[m.jsx("button",{onClick:J,disabled:!I,className:Pt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",q?"w-8 h-8":"w-7 h-7"),title:"Undo",children:m.jsx(Sp,{size:q?14:12})}),m.jsx("button",{onClick:j,disabled:!X,className:Pt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",q?"w-8 h-8":"w-7 h-7"),title:"Redo",children:m.jsx(Yh,{size:q?14:12})})]})]}),m.jsx("button",{onClick:()=>pt("left"),className:Pt("no-touch-enlarge rounded text-text-muted hover:text-text-primary touch-feedback",q?"p-2":"p-1.5"),title:"Scroll sections left",children:m.jsx($h,{size:q?18:16})}),m.jsxs(q2,{sensors:Ee,collisionDetection:F2,onDragStart:xt,onDragEnd:et,children:[m.jsxs("div",{ref:pe,className:Pt("flex-1 flex items-center overflow-x-auto scrollbar-hide px-1 mx-1",q?"gap-2":"gap-1.5"),children:[m.jsx(H2,{items:o.sections.map(je=>je.id),strategy:U2,children:o.sections.map((je,ft)=>m.jsx(fE,{section:je,allSections:o.sections,isActive:ft===E,isDesktop:q,onActivate:()=>{$(ft),je.measures[0]?.beats[0]&&h(je.id,je.measures[0].beats[0].id)},onEdit:()=>Xe(je.id),onDelete:()=>O(je.id)},je.id))}),m.jsx("button",{onClick:()=>N(),className:Pt("no-touch-enlarge rounded-full text-text-muted hover:text-accent-primary touch-feedback shrink-0 border border-dashed border-border-medium hover:border-accent-primary/50 transition-all hover:bg-accent-primary/10 flex items-center justify-center",q?"w-9 h-9":"w-8 h-8"),title:"Add section",children:m.jsx(Oc,{size:q?14:12})})]}),m.jsx(W3,{children:at?m.jsx("div",{className:Pt("rounded-full text-white font-semibold shadow-2xl flex items-center justify-center",q?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"),style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 24px rgba(99, 102, 241, 0.7), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",transform:"scale(1.05) rotate(3deg)"},children:(()=>{const je=o.sections.find(ft=>ft.id===at);return je?Ih(je,o.sections):""})()}):null})]}),m.jsx("button",{onClick:()=>pt("right"),className:Pt("no-touch-enlarge rounded text-text-muted hover:text-text-primary touch-feedback",q?"p-2":"p-1.5"),title:"Scroll sections right",children:m.jsx(Gh,{size:q?18:16})})]}),m.jsx("div",{ref:le,className:Pt("flex-1",q?"px-3 pb-2 pt-3":"px-1 pb-1 pt-3",a?"overflow-y-auto overflow-x-hidden":"overflow-x-auto overflow-y-hidden"),children:Nt&&m.jsx("div",{className:Pt(a?s?"flex flex-col gap-0":"grid grid-cols-4 gap-0.5":Pt("flex flex-row items-center",q?"gap-1.5":"gap-0.5")),children:Nt.measures.map((je,ft)=>m.jsxs(An.Fragment,{children:[m.jsxs("div",{className:Pt("flex items-center",a?s?"gap-0.5 w-full min-w-0":"gap-0.5":q?"gap-1 shrink-0":"gap-0.5 shrink-0"),children:[m.jsxs("div",{className:Pt("flex flex-col items-center justify-center shrink-0",a?"gap-0 w-4":q?"gap-0 w-6":"gap-0 w-5"),children:[m.jsx("span",{className:Pt("font-mono text-text-muted text-center leading-none",q?"text-[9px]":a?"text-[7px]":"text-[8px]"),children:ft+1}),m.jsx(vj,{value:je.beats.length,onChange:ct=>B(Nt.id,je.id,ct),timeSignature:Nt.timeSignature||[4,4],isCompact:a})]}),m.jsx("div",{className:Pt("flex items-center",a?s?`flex-1 gap-0.5 min-w-0 ${je.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:`flex-1 gap-0.5 min-w-0 ${je.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:"gap-0.5"),children:je.beats.map(ct=>{const He=u===Nt.id&&c===ct.id,ut=b&&y===Nt.id&&_===ct.id,vt=ct.chord?mt(ct.chord.root):void 0,ot=je.beats.length;let ln,Et;a&&ot>4&&(ln=Math.max(22,Math.floor(160/ot)),Et=Math.max(18,Math.floor(120/ot)));const Bt=q?48:36,pn=4/ot,Tt=Math.round(Bt*pn),gt=Math.max(q?36:28,Math.min(q?192:144,Tt)),zt=q?40:a&&s?ot<=4?26:24:32;return m.jsxs("button",{"data-slot-id":ct.id,onClick:()=>st(Nt.id,ct.id,ct.chord),className:Pt("no-touch-enlarge relative flex items-center justify-center rounded-md transition-all touch-feedback group",a&&ot<=4?"flex-1 min-w-0":"shrink-0",ut&&"ring-2 ring-green-500 ring-offset-1 ring-offset-bg-primary shadow-[0_0_12px_rgba(34,197,94,0.5)] scale-105 z-10",He&&!ut&&"ring-2 ring-accent-primary ring-offset-1 ring-offset-bg-primary",!ct.chord&&"border-2 border-dashed border-border-medium bg-bg-elevated hover:border-text-muted"),style:{height:`${zt}px`,...a&&ln?{width:`${ln}px`,minWidth:`${Et}px`}:{},...a?{}:{width:`${gt}px`,minWidth:`${gt}px`},...ct.chord?{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${vt}`}:{}},children:[ct.chord?m.jsx("span",{className:Pt("font-bold px-0.5 truncate",q?"text-xs":a?ot>=8?"text-[7px]":ot>=4?"text-[8px]":"text-[9px]":"text-[10px]"),style:{color:vt},children:Mn(ct.chord.symbol)}):m.jsx("span",{className:Pt("text-text-muted font-light",a?ot>=8?"text-xs":"text-sm":"text-base"),children:"+"}),ut&&m.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 flex items-center justify-center",children:m.jsx(ju,{size:6,fill:"white",className:"text-white"})}),ct.chord&&!ut&&(He||q)&&m.jsx("div",{onClick:wn=>{wn.stopPropagation(),P(Nt.id,ct.id)},className:Pt("absolute rounded-full bg-black/70 backdrop-blur-sm flex items-center justify-center cursor-pointer border border-white/30 active:bg-white/30",q?Pt("w-4 h-4 -top-2 -right-2 hover:bg-white/20 hover:border-white/50 transition-all z-30",He?"opacity-100":"opacity-0 group-hover:opacity-100"):"w-5 h-5 -top-2.5 -right-2.5 opacity-100 z-30"),title:"Remove chord",children:m.jsx("span",{className:Pt("text-white/90 font-bold leading-none",q?"text-[10px]":"text-xs"),children:""})})]},ct.id)})})]}),!s&&!a&&ft<Nt.measures.length-1&&m.jsx("div",{className:"w-px h-5 bg-border-medium shrink-0"})]},je.id))})}),Ve&&(()=>{const je=o.sections.findIndex(He=>He.id===Ve),ft=je>0,ct=je<o.sections.length-1;return m.jsx(Q3,{section:o.sections.find(He=>He.id===Ve),isOpen:!0,onClose:()=>Xe(null),onTimeSignatureChange:He=>{const[ut,vt]=He.split("/").map(ot=>parseInt(ot,10));ut&&vt&&Ve&&A(Ve,[ut,vt])},onBarsChange:He=>{Ve&&k(Ve,He)},onStepCountChange:He=>{Ve&&C(Ve,He)},onNameChange:(He,ut)=>{Ve&&F(Ve,{name:He,type:ut})},onCopy:()=>{Ve&&(R(Ve),setTimeout(()=>{const ut=Wt.getState().currentSong.sections,vt=je+1;if(vt<ut.length){const ot=ut[vt];Xe(ot.id),$(vt)}},0))},onClear:()=>{Ve&&V(Ve)},onDelete:()=>{if(Ve){const He=o.sections.findIndex(vt=>vt.id===Ve);let ut=null;if(o.sections.length>1&&(He<o.sections.length-1?ut=o.sections[He+1].id:ut=o.sections[He-1].id),O(Ve),Xe(ut),ut){o.sections.findIndex(ot=>ot.id===ut);const vt=He<o.sections.length-1?He:Math.max(0,He-1);$(vt)}}},songTimeSignature:Y||[4,4],onNavigatePrev:()=>{if(ft){const He=o.sections[je-1];Xe(He.id),$(je-1)}},onNavigateNext:()=>{if(ct){const He=o.sections[je+1];Xe(He.id),$(je+1)}},hasPrev:ft,hasNext:ct,sectionIndex:je,totalSections:o.sections.length,onSlotClick:He=>{Xe(null),$(je),f(Ve,He)},onMoveUp:()=>{if(ft&&Ve){const He=[...o.sections],ut=He[je];He[je]=He[je-1],He[je-1]=ut,ie(He),$(je-1)}},onMoveDown:()=>{if(ct&&Ve){const He=[...o.sections],ut=He[je];He[je]=He[je+1],He[je+1]=ut,ie(He),$(je+1)}}})})()]}):m.jsxs("div",{"data-mobile-timeline":!0,className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing touch-feedback select-none",onClick:()=>{!_e.current&&ce===0&&e()},onTouchStart:ht,onTouchMove:Ae,onTouchEnd:Ke,onMouseDown:bt,style:{transform:ce>0?`translateY(-${ce}px)`:void 0,opacity:ce>0?Math.min(1,.7+ce/100):1,transition:ce===0?"all 0.2s ease-out":"none"},children:[m.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),m.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Timeline"})]})},Cg=({highlightedNotes:n,rootNote:e,bassNote:t,color:s="#6366f1",octave:a=4,onNotePlay:o})=>{const u=["C","D","E","F","G","A","B"],c=C=>{const O={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},R=C.replace(/\d+/g,"");return O[R]??-1},h=n.map(C=>c(C)),f=e?c(e):-1,p=t?c(t):-1,y=C=>{const O=c(C);return O!==-1&&h.includes(O)},_=C=>f===-1?!1:c(C)===f,b=C=>p===-1?!1:c(C)===p,N=(C,O)=>{o&&o(C,O)},A=()=>{const C=[];for(let R=0;R<2;R++){const V=a+R;u.forEach(B=>{const U=y(B),z=_(B),L=b(B);C.push(m.jsx("div",{className:"h-full rounded-b-md relative border-x border-b border-gray-400 cursor-pointer hover:brightness-95 active:brightness-90 transition-all",style:{width:`${100/14}%`,background:"linear-gradient(180deg, #fafafa 0%, #e8e8e8 70%, #d0d0d0 100%)",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.08)"},onClick:()=>N(B,V),children:U&&m.jsxs(m.Fragment,{children:[z&&m.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"3px",transform:"translateX(-50%)",width:"18px",height:"18px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),m.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"6px",transform:"translateX(-50%)",width:L?"14px":z?"12px":"9px",height:L?"14px":z?"12px":"9px",background:s,border:L?"3px solid #000":"2px solid #000",boxShadow:L?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`white-${R}-${B}`))})}return C},k=()=>{const C=[],O=[{note:"C#",offset:7.14},{note:"D#",offset:14.28},{note:"F#",offset:28.57},{note:"G#",offset:35.71},{note:"A#",offset:42.85}];for(let R=0;R<2;R++){const V=R*50,B=a+R;O.forEach(({note:U,offset:z})=>{const L=y(U),F=_(U),J=b(U),j=V+z;C.push(m.jsx("div",{className:"absolute top-0 rounded-b-md cursor-pointer hover:brightness-125 active:brightness-150 transition-all",style:{left:`${j}%`,width:"5.5%",height:"58%",transform:"translateX(-50%)",background:"linear-gradient(180deg, #333 0%, #1a1a1a 70%, #0a0a0a 100%)",boxShadow:"0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08)",pointerEvents:"auto"},onClick:()=>N(U,B),children:L&&m.jsxs(m.Fragment,{children:[F&&m.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"1px",transform:"translateX(-50%)",width:"16px",height:"16px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),m.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"4px",transform:"translateX(-50%)",width:J?"12px":F?"10px":"8px",height:J?"12px":F?"10px":"8px",background:s,border:J?"3px solid #fff":"2px solid #fff",boxShadow:J?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`black-${R}-${U}`))})}return C};return m.jsx("div",{className:"relative w-full rounded-lg select-none overflow-hidden",style:{height:"80px",minHeight:"80px",background:"#1a1a22",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.6)",padding:"3px 2px 2px 2px"},children:m.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[m.jsx("div",{className:"flex w-full h-full gap-[1px]",style:{position:"relative",zIndex:0},children:A()}),m.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"},children:k()})]})})},pE={C:{maj:[{frets:[-1,3,2,0,1,0],fingers:[0,3,2,0,1,0],barres:[],baseFret:1}],m:[{frets:[-1,3,1,0,1,3],fingers:[0,3,1,0,2,4],barres:[],baseFret:1}],7:[{frets:[-1,3,2,3,1,0],fingers:[0,3,2,4,1,0],barres:[],baseFret:1}],maj7:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj9:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,3,2,2,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],m7:[{frets:[-1,3,1,3,1,3],fingers:[0,2,1,3,1,4],barres:[1],baseFret:3}],m9:[{frets:[-1,3,1,3,3,3],fingers:[0,2,1,3,4,4],barres:[],baseFret:3}],m11:[{frets:[-1,3,1,3,3,1],fingers:[0,2,1,3,4,1],barres:[1],baseFret:3}],m6:[{frets:[-1,3,1,2,1,3],fingers:[0,3,1,2,1,4],barres:[1],baseFret:1}],sus2:[{frets:[-1,3,0,0,1,3],fingers:[0,2,0,0,1,3],barres:[],baseFret:1}],sus4:[{frets:[-1,3,3,0,1,1],fingers:[0,3,4,0,1,1],barres:[1],baseFret:1}],dim:[{frets:[-1,3,1,-1,1,2],fingers:[0,4,1,0,2,3],barres:[],baseFret:1}],6:[{frets:[-1,3,2,2,1,0],fingers:[0,4,2,3,1,0],barres:[],baseFret:1}],add9:[{frets:[-1,3,2,0,3,0],fingers:[0,2,1,0,3,0],barres:[],baseFret:1}],9:[{frets:[-1,3,2,3,3,0],fingers:[0,2,1,3,4,0],barres:[],baseFret:1}],11:[{frets:[-1,3,2,3,3,3],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],13:[{frets:[-1,3,2,3,3,5],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,3,4,3,4,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},"C#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},Db:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},D:{maj:[{frets:[-1,-1,0,2,3,2],fingers:[0,0,0,1,3,2],barres:[],baseFret:1}],m:[{frets:[-1,-1,0,2,3,1],fingers:[0,0,0,2,3,1],barres:[],baseFret:1}],7:[{frets:[-1,-1,0,2,1,2],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],maj7:[{frets:[-1,-1,0,2,2,2],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],maj9:[{frets:[-1,-1,0,2,2,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],maj13:[{frets:[-1,-1,0,2,2,4],fingers:[0,0,0,1,1,3],barres:[2],baseFret:1}],m7:[{frets:[-1,-1,0,2,1,1],fingers:[0,0,0,2,1,1],barres:[1],baseFret:1}],m9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],m11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m6:[{frets:[-1,-1,0,2,0,1],fingers:[0,0,0,2,0,1],barres:[],baseFret:1}],sus2:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],sus4:[{frets:[-1,-1,0,2,3,3],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,1,3,1],fingers:[0,0,0,1,4,2],barres:[],baseFret:1}],6:[{frets:[-1,-1,0,2,0,2],fingers:[0,0,0,1,0,2],barres:[],baseFret:1}],add9:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],13:[{frets:[-1,-1,0,2,1,4],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,1,1,1],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}]},"D#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},Eb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},E:{maj:[{frets:[0,2,2,1,0,0],fingers:[0,2,3,1,0,0],barres:[],baseFret:1}],m:[{frets:[0,2,2,0,0,0],fingers:[0,2,3,0,0,0],barres:[],baseFret:1}],7:[{frets:[0,2,0,1,0,0],fingers:[0,2,0,1,0,0],barres:[],baseFret:1}],maj7:[{frets:[0,2,1,1,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],maj9:[{frets:[0,2,1,1,0,2],fingers:[0,2,1,1,0,3],barres:[1],baseFret:1}],maj13:[{frets:[0,2,1,1,2,2],fingers:[0,2,1,1,3,3],barres:[],baseFret:1}],m7:[{frets:[0,2,0,0,0,0],fingers:[0,1,0,0,0,0],barres:[],baseFret:1}],m9:[{frets:[0,2,0,0,0,2],fingers:[0,2,0,0,0,3],barres:[],baseFret:1}],m11:[{frets:[0,2,0,0,3,0],fingers:[0,2,0,0,4,0],barres:[],baseFret:1}],m6:[{frets:[0,2,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],sus2:[{frets:[0,2,4,4,0,0],fingers:[0,1,3,4,0,0],barres:[],baseFret:1}],sus4:[{frets:[0,2,2,2,0,0],fingers:[0,2,3,4,0,0],barres:[],baseFret:1}],dim:[{frets:[0,1,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],6:[{frets:[0,2,2,1,2,0],fingers:[0,2,3,1,4,0],barres:[],baseFret:1}],add9:[{frets:[0,2,2,1,0,2],fingers:[0,2,3,1,0,4],barres:[],baseFret:1}],9:[{frets:[0,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],11:[{frets:[0,2,0,1,3,0],fingers:[0,2,0,1,4,0],barres:[],baseFret:1}],13:[{frets:[0,2,0,1,2,2],fingers:[0,2,0,1,3,4],barres:[],baseFret:1}],m7b5:[{frets:[0,1,0,0,2,0],fingers:[0,1,0,0,2,0],barres:[],baseFret:1}]},F:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:1}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:1}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,-1,3,2,1,0],fingers:[0,0,3,2,1,0],barres:[],baseFret:1}],maj9:[{frets:[1,0,3,0,1,0],fingers:[1,0,3,0,2,0],barres:[],baseFret:1}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:1}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:1}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:1}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,-1,3,0,1,1],fingers:[0,0,3,0,1,1],barres:[1],baseFret:1}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:1}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:1}],6:[{frets:[1,-1,0,2,1,1],fingers:[1,0,0,3,1,1],barres:[1],baseFret:1}],add9:[{frets:[-1,-1,3,2,1,3],fingers:[0,0,3,2,1,4],barres:[],baseFret:1}],9:[{frets:[1,3,1,2,1,3],fingers:[1,3,1,2,1,4],barres:[1],baseFret:1}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:1}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:1}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}]},"F#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},Gb:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},G:{maj:[{frets:[3,2,0,0,0,3],fingers:[2,1,0,0,0,3],barres:[],baseFret:1}],m:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],7:[{frets:[3,2,0,0,0,1],fingers:[3,2,0,0,0,1],barres:[],baseFret:1}],maj7:[{frets:[3,2,0,0,0,2],fingers:[3,1,0,0,0,2],barres:[],baseFret:1}],maj9:[{frets:[3,0,0,0,0,2],fingers:[2,0,0,0,0,1],barres:[],baseFret:1}],maj13:[{frets:[3,2,0,0,2,2],fingers:[3,1,0,0,2,2],barres:[2],baseFret:1}],m7:[{frets:[3,1,0,0,3,0],fingers:[2,1,0,0,3,0],barres:[],baseFret:1}],m9:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],m11:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],m6:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],sus2:[{frets:[3,0,0,0,3,3],fingers:[1,0,0,0,2,3],barres:[],baseFret:1}],sus4:[{frets:[3,3,0,0,1,3],fingers:[2,3,0,0,1,4],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],6:[{frets:[3,2,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],add9:[{frets:[3,0,0,0,0,3],fingers:[2,0,0,0,0,3],barres:[],baseFret:1}],9:[{frets:[3,2,0,1,0,1],fingers:[3,2,0,1,0,1],barres:[1],baseFret:1}],11:[{frets:[3,2,0,1,3,1],fingers:[3,2,0,1,4,1],barres:[1],baseFret:1}],13:[{frets:[3,2,0,1,0,5],fingers:[2,1,0,1,0,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}]},"G#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},Ab:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},A:{maj:[{frets:[-1,0,2,2,2,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],m:[{frets:[-1,0,2,2,1,0],fingers:[0,0,2,3,1,0],barres:[],baseFret:1}],7:[{frets:[-1,0,2,0,2,0],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}],maj7:[{frets:[-1,0,2,1,2,0],fingers:[0,0,2,1,3,0],barres:[],baseFret:1}],maj9:[{frets:[-1,0,2,1,0,0],fingers:[0,0,2,1,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,0,2,1,2,4],fingers:[0,0,2,1,3,4],barres:[],baseFret:1}],m7:[{frets:[-1,0,2,0,1,0],fingers:[0,0,2,0,1,0],barres:[],baseFret:1}],m9:[{frets:[-1,0,2,0,1,3],fingers:[0,0,2,0,1,4],barres:[],baseFret:1}],m11:[{frets:[-1,0,0,0,1,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],m6:[{frets:[-1,0,2,2,1,2],fingers:[0,0,2,3,1,4],barres:[],baseFret:1}],sus2:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],sus4:[{frets:[-1,0,2,2,3,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],dim:[{frets:[-1,0,1,2,1,-1],fingers:[0,0,1,3,2,0],barres:[],baseFret:1}],6:[{frets:[-1,0,2,2,2,2],fingers:[0,0,1,1,1,1],barres:[2],baseFret:1}],add9:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],9:[{frets:[-1,0,2,4,2,3],fingers:[0,0,1,3,1,2],barres:[2],baseFret:1}],11:[{frets:[-1,0,0,0,2,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],13:[{frets:[-1,0,2,0,2,4],fingers:[0,0,1,0,2,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,0,1,0,1,-1],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}]},"A#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},Bb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},B:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:2}],7:[{frets:[-1,2,1,2,0,2],fingers:[0,2,1,3,0,4],barres:[],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:2}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:2}],m7:[{frets:[-1,2,0,2,0,2],fingers:[0,1,0,2,0,3],barres:[],baseFret:1}],m9:[{frets:[-1,2,0,2,2,2],fingers:[0,1,0,2,3,4],barres:[],baseFret:1}],m11:[{frets:[-1,2,0,2,0,0],fingers:[0,1,0,2,0,0],barres:[],baseFret:1}],m6:[{frets:[-1,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:2}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:2}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,2,1,2,2,2],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],11:[{frets:[-1,2,1,2,0,0],fingers:[0,2,1,3,0,0],barres:[],baseFret:1}],13:[{frets:[-1,2,1,2,2,4],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:2}]}};function mE(n){return{"C":"C#","D":"Db","D":"D#","E":"Eb","F":"F#","G":"Gb","G":"G#","A":"Ab","A":"A#","B":"Bb"}[n]||n.replace("","#").replace("","b")}function gE(n){return{major:"maj",major7:"maj7",major9:"maj9",major11:"maj11",major13:"maj13",major6:"6",minor:"m",min:"m",minor7:"m7",min7:"m7",minor9:"m9",min9:"m9",minor11:"m11",min11:"m11",minor13:"m13",min13:"m13",minor6:"m6",min6:"m6",dom7:"7",dominant7:"7",dom9:"9",dominant9:"9",dom11:"11",dominant11:"11",dom13:"13",dominant13:"13",suspended2:"sus2",suspended4:"sus4",diminished:"dim","half-diminished":"m7b5",halfDiminished7:"m7b5","m75":"m7b5",sixth:"6",ninth:"9",added9:"add9"}[n]||n}function J3(n,e){const t=mE(n),s=gE(e),a=pE[t];if(!a)return null;const o=a[s];return!o||o.length===0?null:o[0]}const Tg=({root:n,quality:e,color:t="#6366f1",onClick:s,onDoubleClick:a})=>{const o=D2(),u=J3(n,e),c=K.useRef(0),h=K.useRef(null),f=Mn(`${n}${Lh(e)}`),p=()=>{const A=Date.now(),k=A-c.current;h.current&&(clearTimeout(h.current),h.current=null),k<300&&k>0?(c.current=0,a&&a()):(c.current=A,h.current=setTimeout(()=>{s&&s(),h.current=null},300))},y=K.useRef(0),_=K.useRef(null),b=A=>{A.preventDefault(),A.stopPropagation();const k=Date.now(),C=k-y.current;_.current&&(clearTimeout(_.current),_.current=null),C<300&&C>0?(y.current=0,a&&a()):(y.current=k,_.current=setTimeout(()=>{s&&s(),_.current=null},300))};if(!u)return m.jsxs("div",{className:"flex items-center justify-center text-text-muted text-xs py-4",children:["No guitar diagram available for ",n,e]});const N=s||a;return m.jsxs("div",{className:`flex flex-col items-center ${N?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,onClick:N?p:void 0,onTouchEnd:N?b:void 0,onTouchStart:N?A=>A.stopPropagation():void 0,children:[m.jsx("span",{className:`${o?"text-xs":"text-[11px]"} font-bold mb-1 text-center`,style:{backgroundColor:"transparent",color:t,padding:"4px 12px",borderRadius:"10px",border:`2px solid ${t}`},children:f}),m.jsx("svg",{viewBox:"0 0 100 120",className:`w-full ${o?"max-w-[110px]":"max-w-[120px]"}`,style:{minHeight:o?110:120,pointerEvents:"none"},children:m.jsx(bE,{chord:u,color:t})})]})},bE=({chord:n,color:e})=>{const{frets:t,fingers:s,barres:a,baseFret:o}=n,u=20,c=25,h=12,f=18,p=4,y=6,_=4.5,b=Array.from({length:y},(O,R)=>u+R*h),N=Array.from({length:p+1},(O,R)=>c+R*f),A=o===1,k=h*(y-1)+16,C=f*p+8;return m.jsxs(m.Fragment,{children:[m.jsx("rect",{x:u-8,y:c-4,width:k,height:C,fill:"#3d2817",rx:3}),A?m.jsx("rect",{x:u-2,y:c-3,width:h*(y-1)+4,height:4,fill:"#f5f5f5",rx:1}):m.jsx("text",{x:u-14,y:c+f/2+4,fontSize:"12",fill:"#e0e0e0",textAnchor:"middle",fontWeight:"700",children:o}),N.map((O,R)=>m.jsx("line",{x1:u,y1:O,x2:u+h*(y-1),y2:O,stroke:"#b8b8b8",strokeWidth:R===0&&!A?2:1},`fret-${R}`)),b.map((O,R)=>m.jsx("line",{x1:O,y1:c,x2:O,y2:c+f*p,stroke:"#d4d4d4",strokeWidth:1.2+(5-R)*.25},`string-${R}`)),a.map((O,R)=>{const V=t.map((L,F)=>({fret:L,idx:F})).filter(({fret:L})=>L===O);if(V.length<2)return null;const B=Math.min(...V.map(L=>L.idx)),U=Math.max(...V.map(L=>L.idx)),z=c+(O-.5)*f;return m.jsx("rect",{x:b[B]-_,y:z-_,width:b[U]-b[B]+_*2,height:_*2,fill:"white",stroke:e,strokeWidth:2,rx:_},`barre-${R}`)}),t.map((O,R)=>{const V=b[R];if(O===-1)return m.jsx("text",{x:V,y:c-10,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:""},`mute-${R}`);if(O===0)return m.jsx("circle",{cx:V,cy:c-8,r:4,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:1.5},`open-${R}`);const B=a.includes(O),U=s[R];if(B){const L=t.findIndex(F=>F===O);if(R!==L)return null}const z=c+(O-.5)*f;return m.jsxs("g",{children:[m.jsx("circle",{cx:V,cy:z,r:_,fill:"white",stroke:e,strokeWidth:2}),U>0&&!B&&m.jsx("text",{x:V,y:z+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:U})]},`finger-${R}`)}),a.map((O,R)=>{const V=t.map((L,F)=>({fret:L,idx:F})).filter(({fret:L})=>L===O);if(V.length<2)return null;const B=Math.min(...V.map(L=>L.idx)),U=c+(O-.5)*f,z=s[B];return z>0?m.jsx("text",{x:b[B],y:U+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:z},`barre-finger-${R}`):null})]})},wy=({notes:n,rootNote:e,color:t="#6366f1",width:s,numerals:a,onNotePlay:o,compact:u=!1})=>{const c=D2(),h=U=>{const z=U.replace(/[0-9]/g,"");let L=z[0],F="";z.includes("")||z.includes("#")?F="":(z.includes("")||z.includes("b"))&&(F="");let j={C:-6,D:-5,E:-4,F:-3,G:-2,A:-1,B:0}[L]??0;const I="CDEFGAB".indexOf(L),X="CDEFGAB".indexOf(e[0]);return I<X&&X-I>3&&(j+=7),{line:j,accidental:F}},f=U=>{o&&o(U,4)},y=s||(u?180:c?280:340),_=u?70:c?110:115,b=u?6:12,N=b,A=_*(u?.28:.22),k=u?7:10,C=Math.max(80,y-b*2),O=A+(u?32:50),R=A+(u?42:62),V=n.map((U,z)=>{const{line:L,accidental:F}=h(U),J=u?40:60,j=C-J-15,I=u?18:25,X=j/Math.max(n.length-1,1),P=Math.max(X,I),ie=P*Math.max(n.length-1,0),Y=(j-ie)/2,ne=N+J+Y+z*P,le=A-L*k/2;return{note:U,x:ne,y:le,line:L,accidental:F,needsLedgerLines:L<-4||L>4}}),B=U=>{const z=[];if(U.line<-4)for(let F=-6;F>=U.line;F-=2)F<-4&&z.push(m.jsx("line",{x1:U.x-28/2,y1:A-F*k/2,x2:U.x+28/2,y2:A-F*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-below-${F}`));else if(U.line>4)for(let F=6;F<=U.line;F+=2)F>4&&z.push(m.jsx("line",{x1:U.x-28/2,y1:A-F*k/2,x2:U.x+28/2,y2:A-F*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-above-${F}`));return z};return m.jsx("div",{className:`flex justify-center items-center ${u?"":"w-full"}`,children:m.jsxs("svg",{viewBox:`0 0 ${y} ${_}`,className:u?"":"w-full",style:{minHeight:u?60:c?95:100,width:u?y:void 0},children:[[-2,-1,0,1,2].map(U=>m.jsx("line",{x1:N,y1:A-U*k,x2:N+C,y2:A-U*k,stroke:"#777",strokeWidth:u?1.5:2},`staff-${U}`)),m.jsx("text",{x:N-(u?2:3),y:A+(u?14:20),fontSize:u?"38":c?"56":"62",fill:t,fontFamily:"serif",fontWeight:"bold",children:""}),V.map(U=>B(U)),V.map((U,z)=>m.jsxs("g",{children:[U.accidental&&m.jsx("text",{x:U.x-(u?12:20),y:U.y+(u?3:5),fontSize:u?"12":c?"18":"20",fill:"#ccc",fontFamily:"serif",fontWeight:"bold",children:U.accidental}),o&&m.jsx("circle",{cx:U.x,cy:U.y,r:16,fill:"transparent",style:{cursor:"pointer"},onClick:()=>f(U.note),onTouchEnd:L=>{L.preventDefault(),f(U.note)}}),m.jsx("ellipse",{cx:U.x,cy:U.y,rx:u?5:7,ry:u?4:5.5,fill:z===0?t:"#ddd",stroke:z===0?t:"#ddd",strokeWidth:1,style:o?{cursor:"pointer"}:void 0,className:o?"hover:opacity-80 active:scale-110 transition-transform":""}),m.jsx("text",{x:U.x,y:O,fontSize:u?"7":c?"10":"11",fill:"#999",textAnchor:"middle",fontWeight:"600",children:U.note}),a&&a[z]&&m.jsx("text",{x:U.x,y:R,fontSize:u?"7":c?"9":"10",fill:z===0?t:"#777",textAnchor:"middle",fontWeight:"700",children:a[z]})]},`note-${z}`))]})})},kg=({variant:n="sidebar",onScrollChange:e,forceVisible:t=!1})=>{const{selectedChord:s,selectedKey:a,chordPanelVisible:o,toggleChordPanel:u,selectedSectionId:c,selectedSlotId:h,addChordToSlot:f,setSelectedChord:p,setSelectedSlot:y,timelineVisible:_,openTimeline:b,setChordPanelGuitarExpanded:N,setChordPanelVoicingsExpanded:A,chordPanelAttention:k}=Wt(),C=Xh(),[O,R]=K.useState(null),[V,B]=K.useState([]),[U,z]=K.useState(320),[L,F]=K.useState(!1),J=K.useRef(0),j=n==="drawer",[I,X]=K.useState(s),P=s??I,{isMobile:ie}=Eu(),Y=n==="landscape-panel"||n==="landscape-expanded",ne=n==="landscape-panel",le=!j&&!Y&&U<360,pe=!j&&!Y&&U<290,[we,q]=K.useState(!1),[E,$]=K.useState(!1),[te,ae]=K.useState(!1),[re,de]=K.useState(!ie||Y),[ce,ve]=K.useState(0),_e=4,Ve=Me=>{q(Me),A(Me)},Xe=Me=>{de(Me),N(Me)};K.useEffect(()=>{N(re),A(we)},[]);const Je=K.useRef(0),at=K.useRef(0),[G,Ee]=K.useState(0),xt=K.useRef(null),et=K.useRef(null),De=K.useRef(null),rt=K.useRef(null),Ue=K.useRef(null),ht=Me=>{if(Me.current&&Ue.current){const yt=Ue.current,it=Me.current.offsetTop-yt.offsetTop;yt.scrollTo({top:it,behavior:"smooth"})}},Ae=K.useCallback(Me=>{!j||!ie||(Je.current=Me.touches[0].clientY,at.current=Me.touches[0].clientY)},[j,ie]),Ke=K.useCallback(Me=>{if(!j||!ie)return;at.current=Me.touches[0].clientY;const yt=at.current-Je.current;yt>0&&Ee(Math.min(yt,150))},[j,ie]),bt=K.useCallback(()=>{!j||!ie||(G>80?(Ee(300),setTimeout(()=>{u(),Ee(0)},200)):Ee(0))},[j,ie,G,u]),mt=()=>{if(!P)return"Chord Details";const Me=O||P.quality;return Mn(Me==="major"||Me==="maj"?P.root:Me==="minor"||Me==="m"?`${P.root}m`:Me==="diminished"||Me==="dim"?`${P.root}dim`:`${P.root}${Lh(Me)}`)},st=K.useCallback((Me,yt)=>{m3(Me,yt)},[]),dt={maj:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',major:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',maj7:"Smooth and sophisticated, the major 7th adds a dreamy, floating quality. Think Burt Bacharach, neo-soul, and late-night jazz.",maj9:"Builds on maj7 with a crystalline 9th. Modern, airy, and introspective  perfect for R&B ballads and ambient textures.",maj13:"The full major palette: lush, orchestral, and complex. Great for endings or when you want maximum harmonic richness.",6:"Warm and vintage  the major 6th has an old-Hollywood or country sweetness. Softer resolution than maj7.",add9:"A major triad with added sparkle from the 9th, but no 7th. Clean, modern, and ubiquitous in pop and worship music.",7:"The dominant 7th creates bluesy tension begging for resolution. The engine behind the ii-V-I and the soul of rock & blues.",9:"Dominant 7 with a colorful 9th. Funky, jazzy, and sophisticated  think Stevie Wonder, Earth Wind & Fire, and neo-soul.",11:"Suspended, modal quality over dominant function. Creates an open, unresolved tension that floats before landing.",13:"The dominant chord at its richest: soulful 13th on top of bluesy 7th. Perfect for jazz turnarounds and R&B grooves.",m7:"The workhorse minor chord: soulful, laid-back, and endlessly versatile. The default for jazz ii chords and R&B grooves.",minor:"The basic minor triad: melancholic, introspective, and emotionally direct. Minor keys are built on this sound.",m9:"Lush and cinematic  adds depth and width to the minor sound. Evokes late-night cityscapes and emotional introspection.",m11:"Spacious and modal, with an open 11th suspension. Great for grooves, vamps, and creating atmospheric tension.",m6:"Bittersweet with a film-noir quality. The 6th adds sophistication to minor  a nice alternative to m7 for tonic chords.",sus2:"Neither major nor minor  the open 2nd creates an ambient, neutral quality. Ubiquitous in pop, rock, and modern worship.",sus4:"Suspended tension from the 4th wants to fall to the 3rd. Creates expectation and movement  classic resolution technique.",dim:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",diminished:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",m7b5:"Half-diminished: dark and sophisticated. The natural ii chord in minor keys, essential for minor ii-V-i progressions."},pt=["maj","7","maj7","maj9","maj13","6","13","m7","m9","m11","m6","sus2","sus4","dim","m7b5","add9","9","11"],Nt=Me=>{if(!P?.root)return"-";const yt=Mt=>Mt.replace(/[\d]/g,"").replace(//,"b").replace(//,"#"),Rt={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},it=Rt[yt(P.root)],Te=Rt[yt(Me)];if(it===void 0||Te===void 0)return"-";const _t=(Te-it+12)%12;return{0:"R",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[_t]??"-"},je=K.useCallback(Me=>{j||(Me.preventDefault(),F(!0))},[j]);K.useEffect(()=>{if(!L||j)return;const Me=it=>{const Te=window.innerWidth-it.clientX;z(Math.max(280,Math.min(500,Te)))},yt=it=>{if(it.touches.length===1){const Te=window.innerWidth-it.touches[0].clientX;z(Math.max(280,Math.min(500,Te)))}},Rt=()=>{F(!1)};return document.addEventListener("mousemove",Me),document.addEventListener("mouseup",Rt),document.addEventListener("touchmove",yt),document.addEventListener("touchend",Rt),()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",Rt),document.removeEventListener("touchmove",yt),document.removeEventListener("touchend",Rt)}},[L,j]),K.useEffect(()=>{s&&X(s)},[s]),K.useEffect(()=>{R(null),B([]),ve(0)},[P?.root,P?.quality]),K.useEffect(()=>{Y&&re&&xt.current&&Ue.current&&setTimeout(()=>{if(xt.current&&Ue.current){const Me=xt.current,yt=Ue.current,Rt=Me.offsetTop-yt.offsetTop;yt.scrollTo({top:Rt+35,behavior:"smooth"})}},100)},[Y,re]),K.useEffect(()=>{if(!j||!e)return;const Me=Ue.current;if(!Me)return;const yt=()=>{const Rt=Me.scrollHeight-Me.scrollTop-Me.clientHeight<20;e(Rt)};return Me.addEventListener("scroll",yt),yt(),()=>Me.removeEventListener("scroll",yt)},[j,e]);const ft=P&&C[P.root]||"#6366f1",ct=V.length>0?V:P?.notes||[],He=lu(ct,ce),ut=MS(ct),vt=Me=>{const yt=Date.now();if(yt-J.current<300||(J.current=yt,!P))return;const Rt=ca(P.root,Me),it=lu(Rt,ce);qr(it),R(Me),B(Rt)},ot=Me=>{if(J.current=0,!_){b();return}if(!P||!c||!h)return;const yt=ca(P.root,Me),Rt=j5(P.root,Me,yt,ce),it={...P,quality:Me,symbol:Rt,notes:yt,inversion:ce};f(it,c,h),y(c,h),p(it)},ln=K.useCallback(()=>{if(!P)return;const Me=O||P.quality,yt=ca(P.root,Me),Rt=lu(yt,ce);qr(Rt)},[P,O,ce]),Et=K.useCallback(()=>{if(!_){b();return}if(!P||!c||!h)return;const Me=O||P.quality,yt=ca(P.root,Me),Rt=j5(P.root,Me,yt,ce),it={...P,quality:Me,symbol:Rt,notes:yt,inversion:ce};f(it,c,h),y(c,h),p(it)},[P,O,ce,c,h,f,y,p,_,b]),Bt=K.useRef(0),pn=K.useRef(null),Tt=K.useCallback(Me=>{if(!P)return;Me.preventDefault(),Me.stopPropagation();const yt=Date.now(),Rt=yt-Bt.current;pn.current&&(clearTimeout(pn.current),pn.current=null),Rt<300&&Rt>0?(Bt.current=0,Et()):(Bt.current=yt,pn.current=setTimeout(()=>{ln(),pn.current=null},300))},[P,ln,Et]),gt=()=>{if(!P)return{extensions:[],description:""};let Me=P.numeral;if(Me&&Me.includes("(")){const Rt=Me.match(/^(.+?)\s*\(/);Rt&&(Me=Rt[1].trim())}return{I:{extensions:["maj","maj7","maj9","maj13","6"],description:"The tonic  your home base and resting point. This is where phrases resolve and songs often begin and end. Its stability makes it perfect for choruses and moments of arrival."},IV:{extensions:["maj","maj7","maj9","maj13","6"],description:'The subdominant  warm, hopeful, and slightly floating. It gently pulls away from home without creating urgency. Great for pre-choruses and that "lifting" feeling before a chorus.'},V:{extensions:["maj","7","9","11","sus4","13"],description:`The dominant  maximum tension wanting to resolve back to I. This chord creates expectation and forward motion. It's the "question" that begs for an "answer."`},ii:{extensions:["m","m7","m9","m11","m6"],description:"The supertonic  a natural setup chord that leads smoothly to V or IV. It's the workhorse of the ii-V-I progression and adds sophistication to any verse."},iii:{extensions:["m","m7"],description:"The mediant  mysterious and chameleon-like. It can substitute for I (they share two notes) or lead to vi. Use it for unexpected color and emotional complexity."},vi:{extensions:["m","m7","m9","m11"],description:'The relative minor  emotional depth and melancholy without leaving the key. This is the "sad" chord in major keys and the foundation of countless pop progressions (vi-IV-I-V).'},"vii":{extensions:["dim","m75"],description:"The leading tone chord  highly unstable and restless. Every note wants to move somewhere, making it a powerful passing chord that pulls strongly toward I."},II:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of V)  borrowed tension that points toward V. Use it to create a dramatic runway before landing on V."},III:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of vi)  creates an unexpected dramatic pull toward vi. Perfect for adding tension before a minor chord moment."}}[Me||""]||{extensions:[],description:`This chord doesn't fit in the key of ${a}, but it may add color and interest to your progression.`}};if(!o&&!t)return j?m.jsxs("div",{className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-pointer touch-feedback active:bg-bg-tertiary",onClick:u,onTouchStart:Me=>{Je.current=Me.touches[0].clientY,at.current=Me.touches[0].clientY},onTouchMove:Me=>{at.current=Me.touches[0].clientY},onTouchEnd:()=>{Je.current-at.current>30&&u()},title:"Swipe up or tap to open",children:[m.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),m.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Chord Details"})]}):m.jsx("button",{onClick:u,className:"h-full px-2 flex items-center justify-center bg-bg-secondary border-l border-border-subtle hover:bg-bg-tertiary transition-colors shrink-0",title:"Show chord details",children:m.jsx(Dk,{size:18,className:"text-text-muted"})});const zt=n==="landscape-panel",wn=n==="landscape-expanded";return m.jsxs("div",{className:`${wn||zt?"h-full w-full flex flex-col bg-bg-secondary overflow-hidden":j?`${ie?"relative w-full":"fixed inset-x-3 bottom-[88px]"} ${ie?"max-h-[60vh]":"max-h-[70vh]"} bg-bg-secondary ${ie?"border-t-2 border-border-subtle":"border-2 border-border-subtle rounded-2xl"} shadow-2xl overflow-hidden ${ie?"":"z-40"} flex`:"h-full flex bg-bg-secondary border-l border-border-subtle overflow-x-hidden"}${k?" chord-panel-attention":""}`,style:{...!j&&!zt&&!wn?{width:U,minWidth:0,maxWidth:"100%"}:{},...j?{transform:G>0?`translateY(${G}px)`:void 0,opacity:G>0?Math.max(0,1-G/300):1,transition:G===0||G>=150?"all 0.2s ease-out":"none"}:{},...k?{boxShadow:"0 0 20px 4px rgba(99, 102, 241, 0.4), inset 0 0 10px rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 0.6)",transition:"box-shadow 0.3s ease-out, border-color 0.3s ease-out"}:{}},children:[!j&&!zt&&m.jsx("div",{className:`w-3 flex items-center justify-center cursor-ew-resize hover:bg-bg-tertiary active:bg-accent-primary/20 transition-colors ${L?"bg-accent-primary/20":""} relative z-[60] touch-none`,onMouseDown:je,onTouchStart:je,children:m.jsx(a3,{size:12,className:"text-text-muted"})}),m.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 relative",children:[j&&ie&&m.jsx("div",{className:"flex flex-col items-center shrink-0 cursor-grab active:cursor-grabbing",onTouchStart:Ae,onTouchMove:Ke,onTouchEnd:bt,children:m.jsx("div",{className:"pt-2.5 pb-1 flex flex-col items-center",children:m.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})})}),m.jsxs("div",{className:`${Y?"px-3 py-2":ie&&j?"px-2 py-2":"px-4 py-3"} border-b border-border-subtle ${pe?"flex flex-col gap-2":"grid grid-cols-[1fr_auto_1fr] items-center gap-2"} shrink-0 ${j?"bg-bg-secondary/80 backdrop-blur-md":""}`,children:[m.jsx("div",{className:`flex items-center min-w-0 ${pe?"justify-center":""}`,style:{gap:"8px"},children:ne&&P?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-bold cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all",style:{backgroundColor:"transparent",color:ft,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${ft}`},onClick:ln,onDoubleClick:Et,children:mt()}),P.numeral&&m.jsx("span",{className:"text-sm font-serif italic text-text-muted shrink-0",children:Mn(P.numeral)}),m.jsxs("div",{className:"flex items-center shrink-0",title:"Chord inversion",children:[m.jsx("button",{onClick:()=>{const Me=Math.max(0,ce-1);ve(Me);const yt=lu(ct,Me);qr(yt)},disabled:ce<=0,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:m.jsx($h,{size:10})}),m.jsx("span",{className:"text-[9px] font-bold text-text-secondary w-3 text-center",children:ce}),m.jsx("button",{onClick:()=>{const Me=Math.min(ut,ce+1);ve(Me);const yt=lu(ct,Me);qr(yt)},disabled:ce>=ut,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:m.jsx(Gh,{size:10})})]})]})}):m.jsx(m.Fragment,{children:m.jsxs("span",{className:`flex items-center shrink-0 min-w-0 ${P?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,style:P?{gap:"4px",backgroundColor:"transparent",color:ft,padding:"3px 8px",borderRadius:"6px",border:`1.5px solid ${ft}`}:{gap:"4px"},onClick:P?ln:void 0,onDoubleClick:P?Et:void 0,onTouchEnd:P?Tt:void 0,onTouchStart:P?Me=>Me.stopPropagation():void 0,children:[m.jsx("span",{className:`${Y?"text-lg":ie?"text-sm":"text-xs sm:text-sm"} font-bold leading-none truncate`,children:ie&&j?mt():P?Mn(`${P.root}${Lh(O||P.quality)}`):"Chord Details"}),P?.numeral&&m.jsx("span",{className:`${Y?"text-sm":"text-[10px]"} font-serif italic opacity-70 shrink-0`,children:Mn(P.numeral)})]})})}),!pe&&m.jsx("div",{className:"flex items-center justify-center",children:P&&!ne&&m.jsxs("div",{className:"flex items-center bg-bg-tertiary/40 rounded-full px-0.5 ml-3",title:"Chord inversion - which note is in the bass",children:[m.jsx("button",{onClick:()=>{const Me=Math.max(0,ce-1);ve(Me);const yt=lu(ct,Me);qr(yt)},disabled:ce<=0,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous inversion",children:m.jsx($h,{size:8})}),m.jsx("span",{className:"text-[11px] font-semibold text-text-secondary min-w-[20px] text-center",children:LS(ce)}),m.jsx("button",{onClick:()=>{const Me=Math.min(ut,ce+1);ve(Me);const yt=lu(ct,Me);qr(yt)},disabled:ce>=ut,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next inversion",children:m.jsx(Gh,{size:8})})]})}),m.jsxs("div",{className:`flex items-center gap-2 shrink-0 ${pe?"justify-center w-full":"justify-end"}`,children:[P&&m.jsxs("button",{onClick:Et,className:`${pe?"flex-1 py-2":ie&&j?"px-8 py-1.5 min-w-[100px]":ie?"px-3 py-1.5":"px-2.5 py-1"} bg-gradient-to-r from-accent-primary to-purple-600 hover:opacity-90 rounded-lg transition-all touch-feedback flex items-center justify-center gap-1.5 shadow-md shadow-accent-primary/20 active:scale-95`,title:"Add chord to timeline",children:[m.jsx(Oc,{size:pe?16:ie?14:12,className:"text-white"}),m.jsx("span",{className:`${pe?"text-sm":ie?"text-xs":"text-[11px]"} font-semibold text-white`,children:"Add"})]}),!Y&&!(ie&&j)&&m.jsx("button",{onClick:u,className:`${pe?"p-2 bg-bg-tertiary/60 rounded-lg":ie?"p-2 min-w-[40px] min-h-[40px]":"p-1"} hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center`,title:"Hide panel",children:m.jsx(Lk,{size:pe||ie?18:16,className:"text-text-muted"})})]})]}),P?m.jsxs("div",{ref:Ue,className:`flex-1 ${wn?"flex flex-row overflow-hidden":"overflow-y-auto overflow-x-hidden"} min-h-0 overscroll-contain`,children:[!wn&&m.jsxs("div",{className:`${ie?"px-5 pt-4 pb-4":"px-5 py-4"} border-b border-border-subtle`,children:[m.jsx(Cg,{highlightedNotes:He,rootNote:P.root,bassNote:He[0],color:ft,octave:_e,onNotePlay:st}),m.jsx("div",{className:`${ie?"mt-4":"mt-5"} w-full`,children:m.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`${ie?"56px":"72px"} repeat(${He.length}, minmax(0, 1fr))`},children:[m.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Notes"}),He.map((Me,yt)=>m.jsx("div",{className:`text-center ${ie?"text-xs":"text-sm"} font-bold text-text-primary flex items-center justify-center`,style:{height:"16px"},children:Me},`note-${yt}`)),m.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Absolute"}),He.map((Me,yt)=>m.jsx("div",{className:`text-center ${ie?"text-[11px]":"text-xs"} text-text-primary font-semibold flex items-center justify-center`,style:{height:"16px"},children:Nt(Me)},`abs-${yt}`)),m.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Relative"}),He.map((Me,yt)=>m.jsx("div",{className:`text-center ${ie?"text-[11px]":"text-xs"} text-text-secondary flex items-center justify-center`,style:{height:"16px"},children:OS(a,Me).replace(/^1/,"R")},`rel-${yt}`))]})})]}),m.jsxs("div",{className:`flex flex-col ${wn?"flex-1 overflow-y-auto":""}`,children:[m.jsxs("div",{ref:xt,className:`${Y?"px-2 py-1":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[m.jsxs("button",{onClick:()=>{const Me=!re;Xe(Me),Me&&setTimeout(()=>ht(xt),50)},className:`w-full flex items-center justify-between ${re?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[m.jsx("h3",{className:`${ne?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide whitespace-nowrap`,children:ne?"Guitar & Suggested":`Guitar & Suggested Voicings for ${Mn(P.numeral||P.symbol)}`}),m.jsx(Eh,{size:ne?8:ie?14:12,className:`text-text-secondary transition-transform ${re?"rotate-180":""}`})]}),re&&m.jsx(m.Fragment,{children:m.jsxs("div",{className:`flex items-start ${ne?"gap-1":"gap-2"} px-3`,style:{marginTop:ne?"4px":"8px"},children:[m.jsxs("div",{className:"flex flex-col items-center shrink-0",style:{minWidth:ne?"70px":"100px"},children:[m.jsx(Tg,{root:P.root,quality:O||P.quality,color:ft,onClick:ln,onDoubleClick:Et}),!ne&&m.jsx("p",{className:`${ie?"text-[10px]":"text-[9px]"} text-text-muted leading-relaxed text-center ${ie?"mb-1 px-1":"mb-1 px-0.5"}`,style:{maxWidth:ne?"70px":"100px"},children:dt[O||P.quality]||"Select a voicing to see its description."})]}),m.jsx("div",{className:"w-px bg-border-subtle self-stretch"}),m.jsx("div",{className:"flex-1 flex flex-col justify-start pl-1",children:gt().extensions.length>0?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:`grid ${ne||le?"grid-cols-1":"grid-cols-2"}`,style:{gap:ne?"3px":le?"4px":ie?"6px":"5px",marginBottom:ne?"2px":"4px",marginRight:le?"12px":void 0},children:gt().extensions.map(Me=>m.jsxs("button",{className:`relative group ${ne?"px-1 py-0.5 text-[8px] min-h-[20px]":le?"px-2 py-1.5 text-[9px] min-h-[26px]":ie?"px-2 py-2 text-xs min-h-[36px]":"px-1.5 py-1 text-[10px]"} rounded font-semibold transition-colors touch-feedback text-center`,style:{width:ne?"60px":le?"70px":ie?"80px":"70px",...O===Me?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#f0f0f5",border:"1px solid rgba(255,255,255,0.08)"}},onClick:()=>vt(Me),onDoubleClick:()=>ot(Me),children:[Mn(`${P.root}${Me}`),!ie&&dt[Me]&&m.jsxs("span",{className:"pointer-events-none absolute -top-6 -translate-y-full left-1/2 -translate-x-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[dt[Me]?m.jsxs(m.Fragment,{children:[dt[Me],m.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},Me))}),!le&&m.jsx("div",{style:{marginTop:ne?"2px":"6px"},children:m.jsx(wy,{notes:He,rootNote:P.root,color:ft,numerals:He.map(Me=>Nt(Me)),onNotePlay:st,compact:!0})})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[m.jsx(wy,{notes:He,rootNote:P.root,color:ft,numerals:He.map(Me=>Nt(Me)),onNotePlay:st,compact:!1}),m.jsxs("p",{className:`${ne?"text-[8px]":ie?"text-[10px]":"text-[9px]"} text-text-muted italic text-center mt-1`,children:["Out of key  see ",m.jsx("span",{className:"font-semibold text-text-secondary",children:"Voicings"})," below"]})]})})]})})]}),m.jsxs("div",{ref:et,className:`${wn?"px-3 py-1":ie?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[m.jsxs("button",{onClick:()=>{const Me=!we;Ve(Me),Me&&setTimeout(()=>ht(et),50)},className:`w-full flex items-center justify-between ${we?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[m.jsx("h3",{className:`${ne?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Voicings"}),m.jsx(Eh,{size:ne?8:ie?14:12,className:`text-text-secondary transition-transform ${we?"rotate-180":""}`})]}),we&&m.jsx("div",{className:`grid ${ne?"grid-cols-4":ie?"grid-cols-3":"grid-cols-2 sm:grid-cols-3"} ${ne?"gap-2":ie?"gap-3":"gap-2.5"}`,children:pt.map((Me,yt)=>{const it=yt%2===0?{left:"calc(100% + 10px)"}:{right:"calc(100% + 10px)"};return m.jsxs("button",{className:`relative group ${ne?"px-1.5 py-1 min-h-[22px] text-[8px]":ie?"px-3 py-3 min-h-[48px] text-xs":"px-2 py-1.5 text-[10px]"} rounded font-medium transition-colors touch-feedback`,style:O===Me?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#9898a6",border:"1px solid rgba(255,255,255,0.08)"},onClick:()=>vt(Me),onDoubleClick:()=>ot(Me),children:[Me,!ie&&dt[Me]&&m.jsxs("span",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{...it,backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[dt[Me]?m.jsxs(m.Fragment,{children:[dt[Me],m.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},Me)})})]}),m.jsxs("div",{ref:rt,className:`${wn?"px-3 py-1":ie?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[m.jsxs("button",{onClick:()=>{const Me=!te;ae(Me),Me&&setTimeout(()=>ht(rt),50)},className:`w-full flex items-center justify-between cursor-pointer ${te?"mb-3":"mb-0"} rounded-none`,style:{backgroundColor:"transparent"},children:[m.jsx("h3",{className:`${ne?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Theory"}),m.jsx(Eh,{size:ne?8:ie?14:12,className:`text-text-secondary transition-transform ${te?"rotate-180":""}`})]}),te&&m.jsx("div",{className:`${ie?"p-3":"p-4"} bg-bg-elevated rounded-none`,children:m.jsx("p",{className:`${ie?"text-sm":"text-xs"} text-text-secondary leading-relaxed`,children:gt().description})})]}),m.jsxs("div",{ref:De,className:`${wn?"px-3 py-1":ie?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[m.jsxs("button",{onClick:()=>{const Me=!E;$(Me),Me&&setTimeout(()=>ht(De),50)},className:`w-full flex items-center justify-between ${E?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[m.jsxs("h3",{className:`${ne?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:["Scales in ",Mn(a)]}),m.jsx(Eh,{size:ne?8:ie?14:12,className:`text-text-secondary transition-transform ${E?"rotate-180":""}`})]}),E&&(()=>{const Me=ag(a),yt=it=>[...Me.slice(it),...Me.slice(0,it)].map(_t=>Mn(_t)).join("  "),Rt=[{name:"Ionian (I)",degree:0,quality:"MAJ",color:"#EAB308",desc:"Bright, happy"},{name:"Dorian (ii)",degree:1,quality:"min",color:"#8B5CF6",desc:"Hopeful minor, jazzy"},{name:"Phrygian (iii)",degree:2,quality:"min",color:"#F97316",desc:"Spanish, exotic"},{name:"Lydian (IV)",degree:3,quality:"MAJ",color:"#06B6D4",desc:"Dreamy, floating"},{name:"Mixolydian (V)",degree:4,quality:"MAJ",color:"#10B981",desc:"Bluesy, rock"},{name:"Aeolian (vi)",degree:5,quality:"min",color:"#3B82F6",desc:"Sad, melancholic"},{name:"Locrian (vii)",degree:6,quality:"dim",color:"#EF4444",desc:"Dark, unstable"}];return m.jsx("div",{className:"space-y-1.5 pb-2",children:Rt.map(it=>m.jsxs("div",{className:"bg-bg-tertiary/50 p-2 rounded",style:{borderLeft:`2px solid ${it.color}`},children:[m.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[m.jsxs("span",{className:`${ie?"text-[11px]":"text-[10px]"} font-medium text-white`,children:[Mn(Me[it.degree])," ",it.name.split(" ")[0]]}),m.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded",style:{color:it.color,backgroundColor:`${it.color}15`},children:it.quality})]}),m.jsx("p",{className:`${ie?"text-[9px]":"text-[8px]"} text-gray-400 mb-1`,children:it.desc}),m.jsx("p",{className:`${ie?"text-[10px]":"text-[9px]"} text-gray-500 font-mono tracking-wide`,children:yt(it.degree)})]},it.name))})})()]})]}),ie&&m.jsx("div",{className:"h-12 shrink-0"})]}):m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[m.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-purple-600/20 flex items-center justify-center border border-accent-primary/30",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-primary",children:[m.jsx("circle",{cx:"8",cy:"18",r:"4"}),m.jsx("path",{d:"M12 18V2l7 4"})]})}),m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx("p",{className:`${ie?"text-base":"text-sm"} font-semibold text-text-primary`,children:"No chord selected"}),m.jsx("p",{className:`${ie?"text-sm":"text-xs"} text-text-muted max-w-[200px]`,children:"Tap a chord on the wheel or select one from the timeline"})]})]})]})]})},vE="modulepreload",yE=function(n){return"/"+n},_y={},Vh=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=h(t.map(f=>{if(f=yE(f),f in _y)return;_y[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":vE,p||(_.as="script"),_.crossOrigin="",_.href=f,c&&_.setAttribute("nonce",c),document.head.appendChild(_),p)return new Promise((b,N)=>{_.addEventListener("load",b),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},xE=()=>{const{currentSong:n,isPlaying:e,tempo:t,volume:s,setTempo:a,setVolume:o,instrument:u,setInstrument:c,isMuted:h,toggleMute:f,toggleLoop:p,isLooping:y,playingSectionId:_,selectedSectionId:b,setSelectedSlot:N,customInstruments:A,toggleInstrumentManagerModal:k}=Wt(),{isMobile:C,isLandscape:O}=Eu(),[R,V]=K.useState(!1),[B,U]=K.useState(!1),[z,L]=K.useState(t.toString()),F=K.useRef(null),[J,j]=K.useState(!1),I=K.useRef(null),X=K.useRef(t),P=K.useRef(null);K.useEffect(()=>{O2(n)},[n]),K.useEffect(()=>{y3(t)},[t]),K.useEffect(()=>{L2(u)},[u]),K.useEffect(()=>{w3()},[y,n,_,b]),K.useEffect(()=>{Vh(()=>Promise.resolve().then(()=>yg),void 0).then(de=>{V(!0),de.preloadAudio().finally(()=>V(!1))})},[]);const ie=async()=>{try{await E2(),e?(v3(),Wt.getState().setIsPlaying(!1)):(V(!0),await b3(),Wt.getState().setIsPlaying(!0))}catch(de){console.error("Playback error:",de)}finally{V(!1)}},Y=de=>{x3(de)},ne=()=>{p()},le=()=>{const de=n.sections;if(de.length===0)return;const ce=b?de.findIndex(Ve=>Ve.id===b):-1,ve=ce>=0?(ce+1)%de.length:0,_e=de[ve];_e&&_e.measures[0]?.beats[0]&&N(_e.id,_e.measures[0].beats[0].id)},pe=[{value:"piano",label:"Piano"},{value:"epiano",label:"Electric Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"},...A.map(de=>({value:de.id,label:de.name})),{value:"manage",label:"+ Manage Instruments..."}];pe.find(de=>de.value===u)||c("piano");const we=de=>{const ce=pe.findIndex(_e=>_e.value===u);if(ce===-1){c("piano");return}const ve=de==="next"?(ce+1)%pe.length:(ce-1+pe.length)%pe.length;c(pe[ve].value)},q=()=>{L(t.toString()),U(!0),setTimeout(()=>F.current?.focus(),0)},E=()=>{const de=parseInt(z,10);!isNaN(de)&&de>=40&&de<=240?a(de):L(t.toString()),U(!1)},$=de=>{de.key==="Enter"?E():de.key==="Escape"&&(L(t.toString()),U(!1))},te=de=>{I.current=de.touches[0].clientX,X.current=t,j(!1),P.current=setTimeout(()=>{P.current=null},150)},ae=de=>{if(I.current===null)return;const ve=de.touches[0].clientX-I.current;if(Math.abs(ve)>10){j(!0),P.current&&(clearTimeout(P.current),P.current=null);const _e=Math.round(ve/3),Ve=Math.min(240,Math.max(40,X.current+_e));a(Ve)}},re=()=>{!J&&P.current&&(clearTimeout(P.current),q()),I.current=null,j(!1),P.current=null};return m.jsxs("div",{"data-playback-controls":!0,className:"flex flex-col w-full bg-bg-elevated border-t border-border-subtle",children:[m.jsxs("div",{className:`${C&&O?"h-8":C?"h-11":"h-12"} flex items-center justify-between ${C?"px-2 gap-1":"px-6"} relative z-20`,children:[m.jsxs("div",{className:"flex items-center gap-0.5",children:[m.jsx("button",{onClick:()=>Y("prev"),className:`${C&&O?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:m.jsx(h3,{size:C&&O?12:16})}),m.jsx("button",{onClick:ie,disabled:R,className:`${C&&O?"w-6 h-6":C?"w-8 h-8":"w-9 h-9"} rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95 touch-feedback`,children:R?m.jsx(_k,{size:C&&O?12:C?16:18,className:"animate-spin"}):e?m.jsx(c3,{size:C&&O?12:C?16:18,fill:"currentColor"}):m.jsx(ju,{size:C&&O?12:C?16:18,fill:"currentColor",className:"ml-0.5"})}),m.jsx("button",{onClick:()=>Y("next"),className:`${C&&O?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:m.jsx(d3,{size:C&&O?12:16})}),C?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:le,className:`${O?"p-1":"p-1.5"} transition-colors text-text-secondary hover:text-text-primary touch-feedback`,title:"Cycle to Next Section",children:m.jsx(Bk,{size:O?12:14})}),m.jsx("button",{onClick:ne,className:`${O?"p-1":"p-1.5"} transition-colors touch-feedback ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:m.jsx(ty,{size:O?12:14})})]}):m.jsx("button",{onClick:ne,className:`p-1.5 transition-colors ml-1 ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:m.jsx(ty,{size:14})})]}),m.jsx("div",{className:"flex items-center",children:C?B?m.jsx("input",{ref:F,type:"number",inputMode:"numeric",value:z,onChange:de=>L(de.target.value),onBlur:E,onKeyDown:$,className:`${O?"w-10 text-[9px] h-4":"w-12 text-[11px] h-5"} bg-bg-tertiary border border-accent-primary rounded-sm px-1 text-center text-text-primary font-medium focus:outline-none`,min:40,max:240}):m.jsxs("div",{onTouchStart:te,onTouchMove:ae,onTouchEnd:re,onClick:q,className:`${O?"text-[9px] px-1.5 h-4":"text-[11px] px-2 h-5"} font-medium ${J?"text-accent-primary":"text-text-secondary"} hover:text-text-primary transition-colors touch-feedback whitespace-nowrap flex items-center cursor-ew-resize select-none`,children:[t," ",m.jsx("span",{className:`${J?"text-accent-primary/70":"text-text-muted"} ml-0.5`,children:"BPM"})]}):m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-text-secondary font-medium",children:"Tempo"}),m.jsx("input",{type:"number",value:t,onChange:de=>a(Number(de.target.value)),className:"w-14 bg-bg-tertiary border border-border-subtle rounded px-2 py-1 text-center text-text-primary text-[11px] font-medium",min:40,max:240}),m.jsx("span",{className:"text-text-muted",children:"BPM"})]})}),m.jsxs("div",{className:`flex items-center ${C?"gap-1.5":"gap-4"}`,children:[m.jsxs("div",{className:"flex items-center gap-1",children:[!C&&m.jsxs("div",{className:"flex items-center rounded bg-bg-tertiary/60 border border-border-subtle/70 h-7",children:[m.jsx("button",{onClick:()=>we("prev"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-l transition-colors flex items-center",title:"Previous instrument",children:m.jsx($h,{size:12})}),m.jsx("button",{onClick:()=>we("next"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-r transition-colors flex items-center",title:"Next instrument",children:m.jsx(Gh,{size:12})})]}),C&&!O&&m.jsx(_p,{size:14,className:"text-text-muted"}),m.jsx("select",{value:u,onChange:de=>{de.target.value==="manage"?k(!0):c(de.target.value)},className:`bg-bg-tertiary border border-border-subtle rounded ${C&&O?"px-3 py-1 h-6 text-[7px] min-w-[60px]":C?"px-1.5 h-7 text-[11px] min-w-[70px]":"px-2 h-7 text-[10px] min-w-[130px]"} text-text-secondary focus:outline-none focus:border-accent-primary cursor-pointer`,children:pe.map(de=>m.jsx("option",{value:de.value,children:de.label},de.value))})]}),m.jsxs("div",{className:`flex items-center ${C?"":"gap-2 w-28"}`,children:[m.jsx("button",{onClick:f,className:`${C?"p-1.5":"p-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center rounded`,title:h?"Unmute":"Mute",children:h||s===0?m.jsx(aj,{size:C?16:14}):m.jsx(vg,{size:C?16:14})}),!C&&m.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:h?0:s,onChange:de=>{h&&f(),o(Number(de.target.value))},className:`w-full h-1 bg-bg-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full ${h?"opacity-50":""}`})]})]})]}),C&&!O&&m.jsx("div",{className:"w-full bg-bg-elevated/50 flex justify-center items-start pt-[6px]",style:{height:"env(safe-area-inset-bottom)",minHeight:"env(safe-area-inset-bottom)"},children:m.jsx("div",{className:"w-32 h-1 rounded-full bg-white/5"})})]})},wE={intro:{bg:"bg-purple-500/10",headers:"bg-purple-500/30 text-purple-100",border:"border-purple-500/30",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/10",headers:"bg-blue-500/30 text-blue-100",border:"border-blue-500/30",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/10",headers:"bg-cyan-500/30 text-cyan-100",border:"border-cyan-500/30",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/10",headers:"bg-amber-500/30 text-amber-100",border:"border-amber-500/30",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/10",headers:"bg-emerald-500/30 text-emerald-100",border:"border-emerald-500/30",accent:"bg-emerald-500"},interlude:{bg:"bg-teal-500/10",headers:"bg-teal-500/30 text-teal-100",border:"border-teal-500/30",accent:"bg-teal-500"},solo:{bg:"bg-orange-500/10",headers:"bg-orange-500/30 text-orange-100",border:"border-orange-500/30",accent:"bg-orange-500"},breakdown:{bg:"bg-red-500/10",headers:"bg-red-500/30 text-red-100",border:"border-red-500/30",accent:"bg-red-500"},tag:{bg:"bg-pink-500/10",headers:"bg-pink-500/30 text-pink-100",border:"border-pink-500/30",accent:"bg-pink-500"},hook:{bg:"bg-yellow-500/10",headers:"bg-yellow-500/30 text-yellow-100",border:"border-yellow-500/30",accent:"bg-yellow-500"},outro:{bg:"bg-rose-500/10",headers:"bg-rose-500/30 text-rose-100",border:"border-rose-500/30",accent:"bg-rose-500"}},_E=60,Sy=.25,SE={bg:"bg-slate-500/10",headers:"bg-slate-500/30 text-slate-100",border:"border-slate-500/30",accent:"bg-slate-500"},NE=({section:n,allSections:e,onSelectBeat:t,onBeatTap:s,onEmptySlotTap:a,isActive:o,playingSlotId:u,selectedBeatId:c,chordColors:h,measureWidth:f,isCompact:p,onRemoveSection:y})=>{const{attributes:_,listeners:b,setNodeRef:N,transform:A,transition:k,isDragging:C}=W2({id:n.id}),O={transform:Xo.Transform.toString(A),transition:k},R=wE[n.type]||SE,V=n.measures,B=Ih(n,e),z=Math.max(p?40:100,V.length*f),L=p?60:140;return p?m.jsxs("div",{ref:N,"data-section-id":n.id,style:{...O,width:z,height:L,touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"},className:Pt("relative flex flex-col rounded-lg overflow-hidden shrink-0 transition-all border cursor-pointer select-none draggable-element",R.bg,R.border,C?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-70 hover:scale-[1.02]",o?"ring-2 ring-white/30":""),onClick:()=>t(n.id,n.measures[0]?.beats[0]?.id),..._,...b,children:[m.jsx("div",{className:Pt("h-1.5 w-full",R.accent)}),m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 py-1",children:[m.jsx("span",{className:"font-bold uppercase tracking-wide text-center leading-tight text-sm",children:n.type.charAt(0).toUpperCase()}),m.jsxs("span",{className:"text-[8px] font-mono text-white/40 mt-0.5",children:[V.length,"b"]})]})]}):m.jsxs("div",{ref:N,"data-section-id":n.id,style:{...O,width:z,height:L},className:Pt("relative flex flex-col pt-8 pb-2 rounded-xl overflow-hidden shrink-0 transition-all border group",R.bg,R.border,C?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-50",o?"ring-2 ring-white/20":""),children:[m.jsxs("div",{className:Pt("absolute top-0 left-0 right-0 h-8 flex items-center justify-between px-3 select-none border-b border-white/5 draggable-element",R.headers,"cursor-grab active:cursor-grabbing"),style:{touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"},..._,...b,children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(a3,{size:14,className:"opacity-50"}),m.jsx("span",{className:"font-bold text-xs uppercase tracking-wider truncate max-w-[100px]",children:B})]}),f>=70&&m.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-80 mr-6",children:m.jsxs("span",{children:[V.length," bars"]})})]}),m.jsx("button",{className:"absolute top-0 right-0 z-20 p-1.5 rounded-md hover:bg-white/10 text-white/40 hover:text-red-400 transition-colors",onClick:F=>{F.stopPropagation(),y(n.id)},onPointerDown:F=>F.stopPropagation(),title:"Remove Section",children:m.jsx(tj,{size:15})}),m.jsx("div",{className:"flex-1 flex px-2 pt-2 gap-1 overflow-hidden",children:V.map((F,J)=>m.jsxs("div",{className:"flex-1 min-w-[32px] h-full flex flex-col gap-1",children:[m.jsxs("div",{className:"h-4 flex items-end justify-between px-0.5 border-b border-white/10 pb-0.5",children:[m.jsx("span",{className:"text-[9px] font-mono text-white/30",children:J+1}),m.jsx("div",{className:"flex gap-0.5",children:F.beats.map((j,I)=>m.jsx("div",{className:"w-0.5 h-1.5 bg-white/20 rounded-full"},I))})]}),(()=>{const j=F.beats.filter(X=>X.chord),I=j.length;if(I===0){const X=F.beats[0];return m.jsx("div",{className:"flex-1 rounded-sm bg-white/5 border border-dashed border-white/10 flex items-center justify-center cursor-pointer hover:bg-white/10 hover:border-white/20 transition-colors",onClick:P=>{P.stopPropagation(),X&&a(n.id,X.id)},title:"Tap to select this slot",children:m.jsx("span",{className:"text-[10px] text-white/20",children:"+"})})}return m.jsx("div",{className:"flex gap-0.5 flex-1 items-stretch",children:j.map(X=>{const P=h[X.chord.root]||"#666",ie=I<=2?"10px":I<=4?"8px":"7px",Y=I<=2?"0 4px":"0 2px",ne=c===X.id,le=u===X.id;return m.jsx("div",{onClick:pe=>{pe.stopPropagation(),s(n.id,X.id,X.chord)},className:Pt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold shadow-sm truncate transition-all cursor-pointer",le?"ring-2 ring-green-500 shadow-[0_0_12px_rgba(34,197,94,0.6)] scale-110 z-10":ne?"ring-2 ring-accent-primary shadow-[0_0_12px_rgba(99,102,241,0.5)] scale-105 z-10":"hover:ring-1 hover:ring-white/30 hover:scale-105"),style:{backgroundColor:le?"rgba(34, 197, 94, 0.15)":ne?"rgba(99, 102, 241, 0.15)":"rgba(0, 0, 0, 0.3)",border:`2px solid ${le?"#22c55e":ne?"#6366f1":P}`,color:le?"#4ade80":ne?"#a5b4fc":P,fontSize:ie,padding:Y,minHeight:"24px"},title:ne?`Tap again to go to ${X.chord.symbol}`:`Tap to select ${X.chord.symbol}`,children:Mn(X.chord.symbol)},X.id)})})})()]},F.id))}),m.jsx("div",{className:"absolute inset-0 top-8 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none",children:m.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-white/80 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Go to Section"})})]})},AE=({displayChord:n,chordColors:e,isPlaying:t,selectedMapBeatId:s})=>{const{isMobile:a,isLandscape:o}=Eu();if(!n)return null;const u=e[n.root]||"#6366f1";return a&&o?m.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:c=>c.stopPropagation(),children:m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg backdrop-blur-md cursor-pointer group",style:{background:"rgba(17,17,22,0.95)",border:`1.5px solid ${u}`,boxShadow:`0 2px 12px ${u}40`},onClick:()=>{n.notes&&qr(n.notes)},children:[m.jsx("span",{className:"text-sm font-bold",style:{color:u},children:Mn(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)}),n.numeral&&m.jsx("span",{className:"text-[10px] font-serif italic text-white/40",children:Mn(n.numeral)}),t&&s&&m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"})]})}):a?m.jsx("div",{className:"shrink-0 px-3 py-2",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:m.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-sm mx-auto",children:[m.jsxs("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&qr(n.notes)},children:[m.jsx("div",{className:"relative px-3 py-1.5 rounded-lg transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`1.5px solid ${u}`,boxShadow:`0 0 12px ${u}30`},children:m.jsx("span",{className:"text-base font-bold",style:{color:u},children:Mn(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&m.jsx("span",{className:"text-[10px] font-serif italic text-white/40 mt-1",children:Mn(n.numeral)}),t&&s&&m.jsxs("span",{className:"text-[8px] text-green-400 mt-0.5 animate-pulse flex items-center gap-1",children:[m.jsx("span",{className:"w-1 h-1 rounded-full bg-green-400 animate-ping"}),"Playing"]})]}),m.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),m.jsx("div",{className:"flex-shrink-0 overflow-hidden",style:{width:"140px",transform:"scale(0.85)",transformOrigin:"center"},children:m.jsx(Cg,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),m.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),m.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&qr(n.notes)},children:m.jsx("div",{className:"transform scale-50 origin-top group-hover:scale-55 transition-transform",style:{marginTop:"-8px",marginBottom:"-50px"},children:m.jsx(Tg,{root:n.root,quality:n.quality,color:u})})})]})}):m.jsx("div",{className:"shrink-0 px-4 py-3",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:m.jsxs("div",{className:"flex items-center justify-center gap-6 max-w-xl mx-auto",children:[m.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",onClick:()=>{n.notes&&qr(n.notes)},children:[m.jsx("div",{className:"relative px-4 py-2 rounded-xl transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`2px solid ${u}`,boxShadow:`0 0 20px ${u}30`},children:m.jsx("span",{className:"text-xl font-bold",style:{color:u},children:Mn(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&m.jsx("span",{className:"text-xs font-serif italic text-white/40 mt-1.5",children:Mn(n.numeral)}),t&&s&&m.jsxs("span",{className:"text-[9px] text-green-400 mt-1 animate-pulse flex items-center gap-1",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"}),"Now Playing"]})]}),m.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),m.jsx("div",{className:"flex-shrink-0",style:{width:"200px"},children:m.jsx(Cg,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),m.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),m.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&qr(n.notes)},children:m.jsx("div",{className:"transform scale-75 origin-top group-hover:scale-80 transition-transform",style:{marginTop:"-8px",marginBottom:"-20px"},children:m.jsx(Tg,{root:n.root,quality:n.quality,color:u})})})]})})},CE=({onSave:n,onExport:e})=>{Eu();const{currentSong:t,songMapVisible:s,toggleSongMap:a,toggleSongInfoModal:o,setSelectedSlot:u,reorderSections:c,isPlaying:h,tempo:f,setTempo:p,playingSectionId:y,openTimeline:_,instrument:b,setInstrument:N,removeSection:A,addSuggestedSection:k}=Wt(),[C,O]=K.useState(!1),[R,V]=K.useState(f.toString()),B=K.useRef(null),[U,z]=K.useState(null),[L,F]=K.useState(!1),J=K.useRef(null),j=K.useRef(f),I=K.useRef(null),X=()=>{V(f.toString()),O(!0),setTimeout(()=>B.current?.focus(),0)},P=()=>{const Ae=parseInt(R,10);!isNaN(Ae)&&Ae>=40&&Ae<=240?p(Ae):V(f.toString()),O(!1)},ie=Ae=>{Ae.key==="Enter"?P():Ae.key==="Escape"&&(V(f.toString()),O(!1))},Y=Ae=>{J.current=Ae.touches[0].clientX,j.current=f,F(!1),I.current=setTimeout(()=>{I.current=null},150)},ne=Ae=>{if(J.current===null)return;const bt=Ae.touches[0].clientX-J.current;if(Math.abs(bt)>10){F(!0),I.current&&(clearTimeout(I.current),I.current=null);const mt=Math.round(bt/3),st=Math.min(240,Math.max(40,j.current+mt));p(st)}},le=()=>{!L&&I.current&&(clearTimeout(I.current),X()),J.current=null,F(!1),I.current=null},[pe,we]=K.useState(1),q=K.useRef(null),[E,$]=K.useState(null),[te,ae]=K.useState(null),[re,de]=K.useState(null),[ce,ve]=K.useState(null);K.useEffect(()=>{if(!h)return;const Ae=()=>{const{playingSectionId:bt,playingSlotId:mt}=Wt.getState();if(bt&&mt){const st=t.sections.find(dt=>dt.id===bt);if(st)for(const dt of st.measures){const pt=dt.beats.find(Nt=>Nt.id===mt);if(pt?.chord){ve(pt.chord),$(pt.chord),ae(mt),de(bt);return}}}};Ae();const Ke=setInterval(Ae,100);return()=>clearInterval(Ke)},[h,t.sections]),K.useEffect(()=>{!h&&E&&ve(E)},[h,E]);const _e=Xh(),Ve=t.sections.reduce((Ae,Ke)=>Ae+Ke.measures.length,0),Je=t.sections.reduce((Ae,Ke)=>{const mt=(Ke.timeSignature||t.timeSignature)[0];return Ae+Ke.measures.length*mt},0)/f*60,at=Math.floor(Je/60),G=Math.floor(Je%60),Ee=`${at}:${G.toString().padStart(2,"0")}`,xt=_E*pe,et=Ae=>{we(Number(Ae.target.value))},De=V2(Ll(Of,{activationConstraint:{distance:8}}),Ll(c0,{activationConstraint:{delay:250,tolerance:8}}),Ll(Lf,{coordinateGetter:G2})),rt=Ae=>{const{active:Ke,over:bt}=Ae;if(bt&&Ke.id!==bt.id){const mt=t.sections.findIndex(dt=>dt.id===Ke.id),st=t.sections.findIndex(dt=>dt.id===bt.id);c(Rf(t.sections,mt,st))}};if(K.useEffect(()=>{const Ae=Ke=>{U||Ke.key==="Escape"&&a(!1)};return s&&window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[s,a,U]),K.useEffect(()=>{if(!s||!h||!y||!q.current)return;const Ae=q.current.querySelector(`[data-section-id="${y}"]`);Ae&&Ae.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[s,h,y]),!s)return null;const Ue=async()=>{const{unlockAudioForIOS:Ae,playSong:Ke,pauseSong:bt}=await Vh(async()=>{const{unlockAudioForIOS:mt,playSong:st,pauseSong:dt}=await Promise.resolve().then(()=>yg);return{unlockAudioForIOS:mt,playSong:st,pauseSong:dt}},void 0);h?(bt(),Wt.getState().setIsPlaying(!1)):(await Ae(),await Ke(),Wt.getState().setIsPlaying(!0))},ht=async Ae=>{const{skipToSection:Ke}=await Vh(async()=>{const{skipToSection:bt}=await Promise.resolve().then(()=>yg);return{skipToSection:bt}},void 0);Ke(Ae)};return s?m.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-[#111116] animate-in fade-in duration-200",onClick:()=>a(!1),children:[m.jsxs("div",{className:"shrink-0 relative z-20",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},onClick:Ae=>Ae.stopPropagation(),children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative flex items-center justify-between px-4 py-3 mt-2",children:[m.jsx("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:Ae=>{Ae.stopPropagation(),o(!0)},children:m.jsxs("div",{children:[m.jsx("h2",{className:"font-bold text-white text-base leading-tight",children:t.title}),t.artist&&t.artist.trim()&&m.jsxs("p",{className:"text-white/40 text-[11px] italic",children:["by ",t.artist]})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[n&&m.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),n()},className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 hover:text-white transition-colors",title:"Save song",children:m.jsx(bg,{size:16})}),e&&m.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),e()},className:"h-8 px-2.5 rounded-full bg-accent-primary/20 hover:bg-accent-primary/30 active:bg-accent-primary/40 flex items-center justify-center gap-1 text-accent-primary hover:text-white transition-colors",title:"Export PDF",children:[m.jsx(s0,{size:14}),m.jsx("span",{className:"text-[10px] font-bold",children:"PDF"})]}),m.jsx("button",{onClick:()=>a(!1),className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 transition-colors",children:m.jsx($o,{size:16})})]})]}),m.jsxs("div",{className:"flex items-center gap-4 px-4 pb-4 text-[10px] font-medium text-white/40 overflow-x-auto no-scrollbar",children:[m.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[m.jsx("span",{className:"text-accent-primary",children:t.sections.length}),m.jsx("span",{children:"Sections"})]}),m.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),m.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[m.jsx("span",{className:"text-accent-primary",children:Ve}),m.jsx("span",{children:"Bars"})]}),m.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),m.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[m.jsx("span",{className:"text-accent-primary",children:Ee}),m.jsx("span",{children:"Duration"})]})]}),m.jsx("div",{className:"px-4 pb-4",children:m.jsx(K3,{sections:t.sections,activeSectionId:y||re||U||void 0,onReorder:c,onAddSection:k,onSectionClick:Ae=>{const Ke=q.current?.querySelector(`[data-section-id="${Ae}"]`);Ke&&Ke.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),z(Ae),$(null),ae(null),de(null)}})})]}),U&&(()=>{const Ae=t.sections.findIndex(st=>st.id===U),Ke=t.sections[Ae];if(!Ke)return null;const bt=Ae>0,mt=Ae<t.sections.length-1;return m.jsx(Q3,{section:Ke,isOpen:!0,onClose:()=>z(null),onTimeSignatureChange:st=>{const[dt,pt]=st.split("/").map(Number);dt&&pt&&Wt.getState().setSectionTimeSignature(Ke.id,[dt,pt])},onBarsChange:st=>Wt.getState().setSectionMeasures(Ke.id,st),onStepCountChange:st=>Wt.getState().setSectionSubdivision(Ke.id,st),onNameChange:(st,dt)=>Wt.getState().updateSection(Ke.id,{name:st,type:dt}),onCopy:()=>{Wt.getState().duplicateSection(Ke.id);const st=Ae+1;st<Wt.getState().currentSong.sections.length&&setTimeout(()=>{const dt=Wt.getState().currentSong.sections[st];dt&&z(dt.id)},0)},onClear:()=>Wt.getState().clearSection(Ke.id),onDelete:()=>{Wt.getState().removeSection(Ke.id),z(null)},songTimeSignature:t.timeSignature,onNavigatePrev:()=>{if(bt){const st=t.sections[Ae-1].id;z(st);const dt=q.current?.querySelector(`[data-section-id="${st}"]`);dt&&dt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},onNavigateNext:()=>{if(mt){const st=t.sections[Ae+1].id;z(st);const dt=q.current?.querySelector(`[data-section-id="${st}"]`);dt&&dt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},hasPrev:bt,hasNext:mt,sectionIndex:Ae,totalSections:t.sections.length,onSlotClick:st=>{z(null);const dt=Ke.measures.flatMap(pt=>pt.beats).find(pt=>pt.id===st);dt&&dt.chord&&Wt.getState().setSelectedChord(dt.chord),u(Ke.id,st),_()},onMoveUp:()=>{if(Ae>0){const st=[...t.sections];[st[Ae-1],st[Ae]]=[st[Ae],st[Ae-1]],c(st)}},onMoveDown:()=>{if(Ae<t.sections.length-1){const st=[...t.sections];[st[Ae],st[Ae+1]]=[st[Ae+1],st[Ae]],c(st)}}})})(),m.jsxs("div",{ref:q,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-center relative scrollbar-hide bg-[#0b0b0f]",onClick:Ae=>Ae.stopPropagation(),children:[m.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),m.jsx("div",{className:Pt("flex relative h-full items-center px-4 transition-all min-w-full",pe<Sy?"gap-2":"gap-4"),style:{paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:m.jsx(q2,{sensors:De,collisionDetection:F2,onDragEnd:rt,children:m.jsx(H2,{items:t.sections.map(Ae=>Ae.id),strategy:U2,children:t.sections.map(Ae=>m.jsx(NE,{section:Ae,allSections:t.sections,onSelectBeat:(Ke,bt)=>{bt&&u(Ke,bt),$(null),ae(null),de(null),a(!1)},onBeatTap:(Ke,bt,mt)=>{te===bt&&re===Ke?(bt&&u(Ke,bt),$(null),ae(null),de(null),a(!1)):($(mt),ae(bt),de(Ke),ve(mt),mt?.notes&&qr(mt.notes))},onEmptySlotTap:(Ke,bt)=>{u(Ke,bt),a(!1),_()},isActive:h&&t.sections.findIndex(Ke=>Ke.id===Ae.id)===t.sections.findIndex(Ke=>Ke.id===y),playingSlotId:Wt.getState().isPlaying?Wt.getState().playingSlotId:null,selectedBeatId:te,chordColors:_e,measureWidth:xt,isCompact:pe<Sy,onRemoveSection:A},Ae.id))})})})]}),m.jsx(AE,{displayChord:ce,chordColors:_e,isPlaying:h,selectedMapBeatId:te}),m.jsxs("div",{className:"shrink-0 bg-[#1a1a24] border-t border-white/5 z-[110]",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:Ae=>Ae.stopPropagation(),children:[m.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/5",children:m.jsxs("div",{className:"flex items-center gap-4 w-full",children:[m.jsx("button",{onClick:()=>we(Math.max(.08,pe-.1)),className:"p-2 -m-2 text-text-secondary active:text-white transition-colors",children:m.jsx(hj,{size:18})}),m.jsx("input",{type:"range",min:"0.08",max:"2",step:"0.05",value:pe,onChange:et,onTouchStart:Ae=>Ae.stopPropagation(),onTouchMove:Ae=>Ae.stopPropagation(),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer touch-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-accent-primary",style:{WebkitAppearance:"none"}}),m.jsx("button",{onClick:()=>we(Math.min(2,pe+.1)),className:"p-2 -m-2 text-text-secondary active:text-white transition-colors",children:m.jsx(cj,{size:18})})]})}),m.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 py-4",children:[m.jsxs("div",{className:"flex flex-col items-center gap-1",children:[m.jsx("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold",children:"BPM"}),C?m.jsx("input",{ref:B,type:"number",inputMode:"numeric",value:R,onChange:Ae=>V(Ae.target.value),onBlur:P,onKeyDown:ie,className:"w-16 text-lg bg-bg-tertiary border border-accent-primary rounded px-2 py-1 text-center text-white font-mono font-medium focus:outline-none",min:40,max:240}):m.jsx("div",{onTouchStart:Y,onTouchMove:ne,onTouchEnd:le,onClick:X,className:Pt("text-lg font-mono font-medium cursor-ew-resize select-none px-3 py-1 rounded transition-colors",L?"text-accent-primary bg-accent-primary/10":"text-accent-primary hover:bg-white/5"),children:f})]}),m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsx("button",{onClick:()=>ht("prev"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:m.jsx(h3,{size:22,fill:"currentColor"})}),m.jsx("button",{onClick:Ue,className:Pt("w-14 h-14 rounded-full flex items-center justify-center shadow-xl transition-all active:scale-95",h?"bg-accent-primary text-white shadow-accent-primary/30":"bg-accent-primary/20 text-accent-primary border-2 border-accent-primary"),children:h?m.jsx(c3,{size:24,fill:"currentColor"}):m.jsx(ju,{size:24,fill:"currentColor",className:"ml-1"})}),m.jsx("button",{onClick:()=>ht("next"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:m.jsx(d3,{size:22,fill:"currentColor"})})]}),m.jsxs("div",{className:"flex flex-col items-center gap-1",children:[m.jsxs("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold flex items-center gap-1",children:[m.jsx(_p,{size:10}),"Voice"]}),m.jsxs("select",{value:b,onChange:Ae=>N(Ae.target.value),className:"bg-bg-tertiary border border-white/10 rounded px-3 py-1 text-sm text-accent-primary font-medium focus:outline-none focus:border-accent-primary cursor-pointer appearance-none text-center min-w-[100px] hover:bg-bg-elevated transition-colors",onClick:Ae=>Ae.stopPropagation(),children:[m.jsx("option",{value:"piano",children:"Piano"}),m.jsx("option",{value:"epiano",children:"E. Piano"}),m.jsx("option",{value:"organ",children:"Organ"}),m.jsx("option",{value:"pad",children:"Pad"})]})]})]})]})]}):null},TE=({className:n="",size:e=24})=>m.jsx("div",{className:`relative flex items-center justify-center ${n}`,style:{width:e,height:e},children:m.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=20,h=48,f=s<=4||s>=10;let p;f?s===0?p="rgba(234, 179, 8, 0.95)":s===1?p="rgba(163, 190, 60, 0.9)":s===2?p="rgba(132, 204, 22, 0.85)":s===3?p="rgba(74, 222, 128, 0.75)":s===4?p="rgba(45, 212, 191, 0.65)":s===11?p="rgba(251, 146, 60, 0.9)":s===10?p="rgba(168, 162, 158, 0.65)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+h*Math.cos(o),N=50+h*Math.sin(o),A=50+h*Math.cos(u),k=50+h*Math.sin(u),C=50+c*Math.cos(u),O=50+c*Math.sin(u);return m.jsx("path",{d:`M ${y} ${_} L ${b} ${N} A ${h} ${h} 0 0 1 ${A} ${k} L ${C} ${O} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),m.jsx("circle",{cx:"50",cy:"50",r:"18",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.15)",strokeWidth:"1"})]})});function ar(n){"@babel/helpers - typeof";return ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(n)}var bo=Uint8Array,fa=Uint16Array,$2=Int32Array,Y2=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),X2=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ny=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e4=function(n,e){for(var t=new fa(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new $2(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},t4=e4(Y2,2),kE=t4.b,jg=t4.r;kE[28]=258,jg[258]=28;var jE=e4(X2,0),Ay=jE.r,Eg=new fa(32768);for(var Lr=0;Lr<32768;++Lr){var _c=(Lr&43690)>>1|(Lr&21845)<<1;_c=(_c&52428)>>2|(_c&13107)<<2,_c=(_c&61680)>>4|(_c&3855)<<4,Eg[Lr]=((_c&65280)>>8|(_c&255)<<8)>>1}var nf=(function(n,e,t){for(var s=n.length,a=0,o=new fa(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new fa(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(t){c=new fa(1<<e);var h=15-e;for(a=0;a<s;++a)if(n[a])for(var f=a<<4|n[a],p=e-n[a],y=u[n[a]-1]++<<p,_=y|(1<<p)-1;y<=_;++y)c[Eg[y]>>h]=f}else for(c=new fa(s),a=0;a<s;++a)n[a]&&(c[a]=Eg[u[n[a]-1]++]>>15-n[a]);return c}),Su=new bo(288);for(var Lr=0;Lr<144;++Lr)Su[Lr]=8;for(var Lr=144;Lr<256;++Lr)Su[Lr]=9;for(var Lr=256;Lr<280;++Lr)Su[Lr]=7;for(var Lr=280;Lr<288;++Lr)Su[Lr]=8;var Op=new bo(32);for(var Lr=0;Lr<32;++Lr)Op[Lr]=5;var EE=nf(Su,9,0),ME=nf(Op,5,0),n4=function(n){return(n+7)/8|0},LE=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new bo(n.subarray(e,t))},Tl=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},$d=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Fm=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:s4,l:0};if(a==1){var u=new bo(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(B,U){return B.f-U.f}),t.push({s:-1,f:25001});var c=t[0],h=t[1],f=0,p=1,y=2;for(t[0]={s:-1,f:c.f+h.f,l:c,r:h};p!=a-1;)c=t[t[f].f<t[y].f?f++:y++],h=t[f!=p&&t[f].f<t[y].f?f++:y++],t[p++]={s:-1,f:c.f+h.f,l:c,r:h};for(var _=o[0].s,s=1;s<a;++s)o[s].s>_&&(_=o[s].s);var b=new fa(_+1),N=Mg(t[p-1],b,0);if(N>e){var s=0,A=0,k=N-e,C=1<<k;for(o.sort(function(U,z){return b[z.s]-b[U.s]||U.f-z.f});s<a;++s){var O=o[s].s;if(b[O]>e)A+=C-(1<<N-b[O]),b[O]=e;else break}for(A>>=k;A>0;){var R=o[s].s;b[R]<e?A-=1<<e-b[R]++-1:++s}for(;s>=0&&A;--s){var V=o[s].s;b[V]==e&&(--b[V],++A)}N=e}return{t:new bo(b),l:N}},Mg=function(n,e,t){return n.s==-1?Math.max(Mg(n.l,e,t+1),Mg(n.r,e,t+1)):e[n.s]=t},Cy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new fa(++e),s=0,a=n[0],o=1,u=function(h){t[s++]=h},c=1;c<=e;++c)if(n[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[c]}return{c:t.subarray(0,s),n:e}},Yd=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},r4=function(n,e,t){var s=t.length,a=n4(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},Ty=function(n,e,t,s,a,o,u,c,h,f,p){Tl(e,p++,t),++a[256];for(var y=Fm(a,15),_=y.t,b=y.l,N=Fm(o,15),A=N.t,k=N.l,C=Cy(_),O=C.c,R=C.n,V=Cy(A),B=V.c,U=V.n,z=new fa(19),L=0;L<O.length;++L)++z[O[L]&31];for(var L=0;L<B.length;++L)++z[B[L]&31];for(var F=Fm(z,7),J=F.t,j=F.l,I=19;I>4&&!J[Ny[I-1]];--I);var X=f+5<<3,P=Yd(a,Su)+Yd(o,Op)+u,ie=Yd(a,_)+Yd(o,A)+u+14+3*I+Yd(z,J)+2*z[16]+3*z[17]+7*z[18];if(h>=0&&X<=P&&X<=ie)return r4(e,p,n.subarray(h,h+f));var Y,ne,le,pe;if(Tl(e,p,1+(ie<P)),p+=2,ie<P){Y=nf(_,b,0),ne=_,le=nf(A,k,0),pe=A;var we=nf(J,j,0);Tl(e,p,R-257),Tl(e,p+5,U-1),Tl(e,p+10,I-4),p+=14;for(var L=0;L<I;++L)Tl(e,p+3*L,J[Ny[L]]);p+=3*I;for(var q=[O,B],E=0;E<2;++E)for(var $=q[E],L=0;L<$.length;++L){var te=$[L]&31;Tl(e,p,we[te]),p+=J[te],te>15&&(Tl(e,p,$[L]>>5&127),p+=$[L]>>12)}}else Y=EE,ne=Su,le=ME,pe=Op;for(var L=0;L<c;++L){var ae=s[L];if(ae>255){var te=ae>>18&31;$d(e,p,Y[te+257]),p+=ne[te+257],te>7&&(Tl(e,p,ae>>23&31),p+=Y2[te]);var re=ae&31;$d(e,p,le[re]),p+=pe[re],re>3&&($d(e,p,ae>>5&8191),p+=X2[re])}else $d(e,p,Y[ae]),p+=ne[ae]}return $d(e,p,Y[256]),p+ne[256]},OE=new $2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),s4=new bo(0),DE=function(n,e,t,s,a,o){var u=o.z||n.length,c=new bo(s+u+5*(1+Math.ceil(u/7e3))+a),h=c.subarray(s,c.length-a),f=o.l,p=(o.r||0)&7;if(e){p&&(h[0]=o.r>>3);for(var y=OE[e-1],_=y>>13,b=y&8191,N=(1<<t)-1,A=o.p||new fa(32768),k=o.h||new fa(N+1),C=Math.ceil(t/3),O=2*C,R=function(at){return(n[at]^n[at+1]<<C^n[at+2]<<O)&N},V=new $2(25e3),B=new fa(288),U=new fa(32),z=0,L=0,F=o.i||0,J=0,j=o.w||0,I=0;F+2<u;++F){var X=R(F),P=F&32767,ie=k[X];if(A[P]=ie,k[X]=P,j<=F){var Y=u-F;if((z>7e3||J>24576)&&(Y>423||!f)){p=Ty(n,h,0,V,B,U,L,J,I,F-I,p),J=z=L=0,I=F;for(var ne=0;ne<286;++ne)B[ne]=0;for(var ne=0;ne<30;++ne)U[ne]=0}var le=2,pe=0,we=b,q=P-ie&32767;if(Y>2&&X==R(F-q))for(var E=Math.min(_,Y)-1,$=Math.min(32767,F),te=Math.min(258,Y);q<=$&&--we&&P!=ie;){if(n[F+le]==n[F+le-q]){for(var ae=0;ae<te&&n[F+ae]==n[F+ae-q];++ae);if(ae>le){if(le=ae,pe=q,ae>E)break;for(var re=Math.min(q,ae-2),de=0,ne=0;ne<re;++ne){var ce=F-q+ne&32767,ve=A[ce],_e=ce-ve&32767;_e>de&&(de=_e,ie=ce)}}}P=ie,ie=A[P],q+=P-ie&32767}if(pe){V[J++]=268435456|jg[le]<<18|Ay[pe];var Ve=jg[le]&31,Xe=Ay[pe]&31;L+=Y2[Ve]+X2[Xe],++B[257+Ve],++U[Xe],j=F+le,++z}else V[J++]=n[F],++B[n[F]]}}for(F=Math.max(F,j);F<u;++F)V[J++]=n[F],++B[n[F]];p=Ty(n,h,f,V,B,U,L,J,I,F-I,p),f||(o.r=p&7|h[p/8|0]<<3,p-=7,o.h=k,o.p=A,o.i=F,o.w=j)}else{for(var F=o.w||0;F<u+f;F+=65535){var Je=F+65535;Je>=u&&(h[p/8|0]=f,Je=u),p=r4(h,p+1,n.subarray(F,Je))}o.i=u}return LE(c,0,s+n4(p)+a)},i4=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},RE=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new bo(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return DE(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},a4=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},IE=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=i4();a.p(e.dictionary),a4(n,2,a.d())}};function Lg(n,e){e||(e={});var t=i4();t.p(n);var s=RE(n,e,e.dictionary?6:2,4);return IE(s,e),a4(s,s.length-4,t.d()),s}var VE=typeof TextDecoder<"u"&&new TextDecoder,FE=0;try{VE.decode(s4,{stream:!0}),FE=1}catch{}function BE(n){if(Array.isArray(n))return n}function PE(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,c=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(s=o.call(t)).done)&&(c.push(s.value),c.length!==e);h=!0);}catch(p){f=!0,a=p}finally{try{if(!h&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw a}}return c}}function ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function zE(n,e){if(n){if(typeof n=="string")return ky(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ky(n,e):void 0}}function qE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jy(n,e){return BE(n)||PE(n,e)||zE(n,e)||qE()}function Ey(n,e="utf8"){return new TextDecoder(e).decode(n)}const UE=new TextEncoder;function HE(n){return UE.encode(n)}const WE=1024*8,GE=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Bm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Z2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=WE,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Z2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Bm[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===GE&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+s));c.reverse();const h=new Bm[t](c.buffer);return this.offset+=s,h.reverse(),h}const u=new Bm[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Ey(this.readBytes(e))}decodeText(e=1,t="utf8"){return Ey(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(HE(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function od(n){let e=n.length;for(;--e>=0;)n[e]=0}const $E=3,YE=258,o4=29,XE=256,ZE=XE+1+o4,l4=30,KE=512,QE=new Array((ZE+2)*2);od(QE);const JE=new Array(l4*2);od(JE);const eM=new Array(KE);od(eM);const tM=new Array(YE-$E+1);od(tM);const nM=new Array(o4);od(nM);const rM=new Array(l4);od(rM);const sM=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Og=sM;const iM=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},aM=new Uint32Array(iM()),oM=(n,e,t,s)=>{const a=aM,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var qo=oM,Dg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},c4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const lM=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var cM=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)lM(t,s)&&(n[s]=t[s])}}return n},uM=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},u4={assign:cM,flattenChunks:uM};let h4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h4=!1}const gf=new Uint8Array(256);for(let n=0;n<256;n++)gf[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;gf[254]=gf[254]=1;var hM=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,c=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const dM=(n,e)=>{if(e<65534&&n.subarray&&h4)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var fM=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let c=gf[u];if(c>4){o[a++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<t;)u=u<<6|n[s++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return dM(o,a)},pM=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+gf[n[t]]>e?t:e},Rg={string2buf:hM,buf2string:fM,utf8border:pM};function mM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var gM=mM;const V1=16209,bM=16191;var vM=function(e,t){let s,a,o,u,c,h,f,p,y,_,b,N,A,k,C,O,R,V,B,U,z,L,F,J;const j=e.state;s=e.next_in,F=e.input,a=s+(e.avail_in-5),o=e.next_out,J=e.output,u=o-(t-e.avail_out),c=o+(e.avail_out-257),h=j.dmax,f=j.wsize,p=j.whave,y=j.wnext,_=j.window,b=j.hold,N=j.bits,A=j.lencode,k=j.distcode,C=(1<<j.lenbits)-1,O=(1<<j.distbits)-1;e:do{N<15&&(b+=F[s++]<<N,N+=8,b+=F[s++]<<N,N+=8),R=A[b&C];t:for(;;){if(V=R>>>24,b>>>=V,N-=V,V=R>>>16&255,V===0)J[o++]=R&65535;else if(V&16){B=R&65535,V&=15,V&&(N<V&&(b+=F[s++]<<N,N+=8),B+=b&(1<<V)-1,b>>>=V,N-=V),N<15&&(b+=F[s++]<<N,N+=8,b+=F[s++]<<N,N+=8),R=k[b&O];n:for(;;){if(V=R>>>24,b>>>=V,N-=V,V=R>>>16&255,V&16){if(U=R&65535,V&=15,N<V&&(b+=F[s++]<<N,N+=8,N<V&&(b+=F[s++]<<N,N+=8)),U+=b&(1<<V)-1,U>h){e.msg="invalid distance too far back",j.mode=V1;break e}if(b>>>=V,N-=V,V=o-u,U>V){if(V=U-V,V>p&&j.sane){e.msg="invalid distance too far back",j.mode=V1;break e}if(z=0,L=_,y===0){if(z+=f-V,V<B){B-=V;do J[o++]=_[z++];while(--V);z=o-U,L=J}}else if(y<V){if(z+=f+y-V,V-=y,V<B){B-=V;do J[o++]=_[z++];while(--V);if(z=0,y<B){V=y,B-=V;do J[o++]=_[z++];while(--V);z=o-U,L=J}}}else if(z+=y-V,V<B){B-=V;do J[o++]=_[z++];while(--V);z=o-U,L=J}for(;B>2;)J[o++]=L[z++],J[o++]=L[z++],J[o++]=L[z++],B-=3;B&&(J[o++]=L[z++],B>1&&(J[o++]=L[z++]))}else{z=o-U;do J[o++]=J[z++],J[o++]=J[z++],J[o++]=J[z++],B-=3;while(B>2);B&&(J[o++]=J[z++],B>1&&(J[o++]=J[z++]))}}else if((V&64)===0){R=k[(R&65535)+(b&(1<<V)-1)];continue n}else{e.msg="invalid distance code",j.mode=V1;break e}break}}else if((V&64)===0){R=A[(R&65535)+(b&(1<<V)-1)];continue t}else if(V&32){j.mode=bM;break e}else{e.msg="invalid literal/length code",j.mode=V1;break e}break}}while(s<a&&o<c);B=N>>3,s-=B,N-=B<<3,b&=(1<<N)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<c?257+(c-o):257-(o-c),j.hold=b,j.bits=N};const wh=15,My=852,Ly=592,Oy=0,Pm=1,Dy=2,yM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_M=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),SM=(n,e,t,s,a,o,u,c)=>{const h=c.bits;let f=0,p=0,y=0,_=0,b=0,N=0,A=0,k=0,C=0,O=0,R,V,B,U,z,L=null,F;const J=new Uint16Array(wh+1),j=new Uint16Array(wh+1);let I=null,X,P,ie;for(f=0;f<=wh;f++)J[f]=0;for(p=0;p<s;p++)J[e[t+p]]++;for(b=h,_=wh;_>=1&&J[_]===0;_--);if(b>_&&(b=_),_===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<_&&J[y]===0;y++);for(b<y&&(b=y),k=1,f=1;f<=wh;f++)if(k<<=1,k-=J[f],k<0)return-1;if(k>0&&(n===Oy||_!==1))return-1;for(j[1]=0,f=1;f<wh;f++)j[f+1]=j[f]+J[f];for(p=0;p<s;p++)e[t+p]!==0&&(u[j[e[t+p]]++]=p);if(n===Oy?(L=I=u,F=20):n===Pm?(L=yM,I=xM,F=257):(L=wM,I=_M,F=0),O=0,p=0,f=y,z=o,N=b,A=0,B=-1,C=1<<b,U=C-1,n===Pm&&C>My||n===Dy&&C>Ly)return 1;for(;;){X=f-A,u[p]+1<F?(P=0,ie=u[p]):u[p]>=F?(P=I[u[p]-F],ie=L[u[p]-F]):(P=96,ie=0),R=1<<f-A,V=1<<N,y=V;do V-=R,a[z+(O>>A)+V]=X<<24|P<<16|ie|0;while(V!==0);for(R=1<<f-1;O&R;)R>>=1;if(R!==0?(O&=R-1,O+=R):O=0,p++,--J[f]===0){if(f===_)break;f=e[t+u[p]]}if(f>b&&(O&U)!==B){for(A===0&&(A=b),z+=y,N=f-A,k=1<<N;N+A<_&&(k-=J[N+A],!(k<=0));)N++,k<<=1;if(C+=1<<N,n===Pm&&C>My||n===Dy&&C>Ly)return 1;B=O&U,a[B]=b<<24|N<<16|z-o|0}}return O!==0&&(a[z+O]=f-A<<24|64<<16|0),c.bits=b,0};var rf=SM;const NM=0,d4=1,f4=2,{Z_FINISH:Ry,Z_BLOCK:AM,Z_TREES:F1,Z_OK:Nu,Z_STREAM_END:CM,Z_NEED_DICT:TM,Z_STREAM_ERROR:Da,Z_DATA_ERROR:p4,Z_MEM_ERROR:m4,Z_BUF_ERROR:kM,Z_DEFLATED:Iy}=c4,d0=16180,Vy=16181,Fy=16182,By=16183,Py=16184,zy=16185,qy=16186,Uy=16187,Hy=16188,Wy=16189,Dp=16190,kl=16191,zm=16192,Gy=16193,qm=16194,$y=16195,Yy=16196,Xy=16197,Zy=16198,B1=16199,P1=16200,Ky=16201,Qy=16202,Jy=16203,ex=16204,tx=16205,Um=16206,nx=16207,rx=16208,Pr=16209,g4=16210,b4=16211,jM=852,EM=592,MM=15,LM=MM,sx=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function OM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Mu=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<d0||e.mode>b4?1:0},v4=n=>{if(Mu(n))return Da;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=d0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(jM),e.distcode=e.distdyn=new Int32Array(EM),e.sane=1,e.back=-1,Nu},y4=n=>{if(Mu(n))return Da;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,v4(n)},x4=(n,e)=>{let t;if(Mu(n))return Da;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Da:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,y4(n))},w4=(n,e)=>{if(!n)return Da;const t=new OM;n.state=t,t.strm=n,t.window=null,t.mode=d0;const s=x4(n,e);return s!==Nu&&(n.state=null),s},DM=n=>w4(n,LM);let ix=!0,Hm,Wm;const RM=n=>{if(ix){Hm=new Int32Array(512),Wm=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(rf(d4,n.lens,0,288,Hm,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;rf(f4,n.lens,0,32,Wm,0,n.work,{bits:5}),ix=!1}n.lencode=Hm,n.lenbits=9,n.distcode=Wm,n.distbits=5},_4=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},IM=(n,e)=>{let t,s,a,o,u,c,h,f,p,y,_,b,N,A,k=0,C,O,R,V,B,U,z,L;const F=new Uint8Array(4);let J,j;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Mu(n)||!n.output||!n.input&&n.avail_in!==0)return Da;t=n.state,t.mode===kl&&(t.mode=zm),u=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,f=t.hold,p=t.bits,y=c,_=h,L=Nu;e:for(;;)switch(t.mode){case d0:if(t.wrap===0){t.mode=zm;break}for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0),f=0,p=0,t.mode=Vy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Pr;break}if((f&15)!==Iy){n.msg="unknown compression method",t.mode=Pr;break}if(f>>>=4,p-=4,z=(f&15)+8,t.wbits===0&&(t.wbits=z),z>15||z>t.wbits){n.msg="invalid window size",t.mode=Pr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?Wy:kl,f=0,p=0;break;case Vy:for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==Iy){n.msg="unknown compression method",t.mode=Pr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Pr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0)),f=0,p=0,t.mode=Fy;case Fy:for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,F[2]=f>>>16&255,F[3]=f>>>24&255,t.check=qo(t.check,F,4,0)),f=0,p=0,t.mode=By;case By:for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0)),f=0,p=0,t.mode=Py;case Py:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,t.check=qo(t.check,F,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=zy;case zy:if(t.flags&1024&&(b=t.length,b>c&&(b=c),b&&(t.head&&(z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+b),z)),t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=qy;case qy:if(t.flags&2048){if(c===0)break e;b=0;do z=s[o+b++],t.head&&z&&t.length<65536&&(t.head.name+=String.fromCharCode(z));while(z&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Uy;case Uy:if(t.flags&4096){if(c===0)break e;b=0;do z=s[o+b++],t.head&&z&&t.length<65536&&(t.head.comment+=String.fromCharCode(z));while(z&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,z)break e}else t.head&&(t.head.comment=null);t.mode=Hy;case Hy:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Pr;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=kl;break;case Wy:for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}n.adler=t.check=sx(f),f=0,p=0,t.mode=Dp;case Dp:if(t.havedict===0)return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,TM;n.adler=t.check=1,t.mode=kl;case kl:if(e===AM||e===F1)break e;case zm:if(t.last){f>>>=p&7,p-=p&7,t.mode=Um;break}for(;p<3;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=Gy;break;case 1:if(RM(t),t.mode=B1,e===F1){f>>>=2,p-=2;break e}break;case 2:t.mode=Yy;break;case 3:n.msg="invalid block type",t.mode=Pr}f>>>=2,p-=2;break;case Gy:for(f>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Pr;break}if(t.length=f&65535,f=0,p=0,t.mode=qm,e===F1)break e;case qm:t.mode=$y;case $y:if(b=t.length,b){if(b>c&&(b=c),b>h&&(b=h),b===0)break e;a.set(s.subarray(o,o+b),u),c-=b,o+=b,h-=b,u+=b,t.length-=b;break}t.mode=kl;break;case Yy:for(;p<14;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Pr;break}t.have=0,t.mode=Xy;case Xy:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.lens[I[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[I[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,J={bits:t.lenbits},L=rf(NM,t.lens,0,19,t.lencode,0,t.work,J),t.lenbits=J.bits,L){n.msg="invalid code lengths set",t.mode=Pr;break}t.have=0,t.mode=Zy;case Zy:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[f&(1<<t.lenbits)-1],C=k>>>24,O=k>>>16&255,R=k&65535,!(C<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(R<16)f>>>=C,p-=C,t.lens[t.have++]=R;else{if(R===16){for(j=C+2;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(f>>>=C,p-=C,t.have===0){n.msg="invalid bit length repeat",t.mode=Pr;break}z=t.lens[t.have-1],b=3+(f&3),f>>>=2,p-=2}else if(R===17){for(j=C+3;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=C,p-=C,z=0,b=3+(f&7),f>>>=3,p-=3}else{for(j=C+7;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=C,p-=C,z=0,b=11+(f&127),f>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Pr;break}for(;b--;)t.lens[t.have++]=z}}if(t.mode===Pr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Pr;break}if(t.lenbits=9,J={bits:t.lenbits},L=rf(d4,t.lens,0,t.nlen,t.lencode,0,t.work,J),t.lenbits=J.bits,L){n.msg="invalid literal/lengths set",t.mode=Pr;break}if(t.distbits=6,t.distcode=t.distdyn,J={bits:t.distbits},L=rf(f4,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,J),t.distbits=J.bits,L){n.msg="invalid distances set",t.mode=Pr;break}if(t.mode=B1,e===F1)break e;case B1:t.mode=P1;case P1:if(c>=6&&h>=258){n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,vM(n,_),u=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,f=t.hold,p=t.bits,t.mode===kl&&(t.back=-1);break}for(t.back=0;k=t.lencode[f&(1<<t.lenbits)-1],C=k>>>24,O=k>>>16&255,R=k&65535,!(C<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(O&&(O&240)===0){for(V=C,B=O,U=R;k=t.lencode[U+((f&(1<<V+B)-1)>>V)],C=k>>>24,O=k>>>16&255,R=k&65535,!(V+C<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=V,p-=V,t.back+=V}if(f>>>=C,p-=C,t.back+=C,t.length=R,O===0){t.mode=tx;break}if(O&32){t.back=-1,t.mode=kl;break}if(O&64){n.msg="invalid literal/length code",t.mode=Pr;break}t.extra=O&15,t.mode=Ky;case Ky:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Qy;case Qy:for(;k=t.distcode[f&(1<<t.distbits)-1],C=k>>>24,O=k>>>16&255,R=k&65535,!(C<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if((O&240)===0){for(V=C,B=O,U=R;k=t.distcode[U+((f&(1<<V+B)-1)>>V)],C=k>>>24,O=k>>>16&255,R=k&65535,!(V+C<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=V,p-=V,t.back+=V}if(f>>>=C,p-=C,t.back+=C,O&64){n.msg="invalid distance code",t.mode=Pr;break}t.offset=R,t.extra=O&15,t.mode=Jy;case Jy:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Pr;break}t.mode=ex;case ex:if(h===0)break e;if(b=_-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Pr;break}b>t.wnext?(b-=t.wnext,N=t.wsize-b):N=t.wnext-b,b>t.length&&(b=t.length),A=t.window}else A=a,N=u-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do a[u++]=A[N++];while(--b);t.length===0&&(t.mode=P1);break;case tx:if(h===0)break e;a[u++]=t.length,h--,t.mode=P1;break;case Um:if(t.wrap){for(;p<32;){if(c===0)break e;c--,f|=s[o++]<<p,p+=8}if(_-=h,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?qo(t.check,a,_,u-_):Og(t.check,a,_,u-_)),_=h,t.wrap&4&&(t.flags?f:sx(f))!==t.check){n.msg="incorrect data check",t.mode=Pr;break}f=0,p=0}t.mode=nx;case nx:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Pr;break}f=0,p=0}t.mode=rx;case rx:L=CM;break e;case Pr:L=p4;break e;case g4:return m4;case b4:default:return Da}return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,(t.wsize||_!==n.avail_out&&t.mode<Pr&&(t.mode<Um||e!==Ry))&&_4(n,n.output,n.next_out,_-n.avail_out),y-=n.avail_in,_-=n.avail_out,n.total_in+=y,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?qo(t.check,a,_,n.next_out-_):Og(t.check,a,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===kl?128:0)+(t.mode===B1||t.mode===qm?256:0),(y===0&&_===0||e===Ry)&&L===Nu&&(L=kM),L},VM=n=>{if(Mu(n))return Da;let e=n.state;return e.window&&(e.window=null),n.state=null,Nu},FM=(n,e)=>{if(Mu(n))return Da;const t=n.state;return(t.wrap&2)===0?Da:(t.head=e,e.done=!1,Nu)},BM=(n,e)=>{const t=e.length;let s,a,o;return Mu(n)||(s=n.state,s.wrap!==0&&s.mode!==Dp)?Da:s.mode===Dp&&(a=1,a=Og(a,e,t,0),a!==s.check)?p4:(o=_4(n,e,t,t),o?(s.mode=g4,m4):(s.havedict=1,Nu))};var PM=y4,zM=x4,qM=v4,UM=DM,HM=w4,WM=IM,GM=VM,$M=FM,YM=BM,XM="pako inflate (from Nodeca project)",El={inflateReset:PM,inflateReset2:zM,inflateResetKeep:qM,inflateInit:UM,inflateInit2:HM,inflate:WM,inflateEnd:GM,inflateGetHeader:$M,inflateSetDictionary:YM,inflateInfo:XM};function ZM(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var KM=ZM;const S4=Object.prototype.toString,{Z_NO_FLUSH:QM,Z_FINISH:JM,Z_OK:bf,Z_STREAM_END:Gm,Z_NEED_DICT:$m,Z_STREAM_ERROR:eL,Z_DATA_ERROR:ax,Z_MEM_ERROR:tL}=c4;function If(n){this.options=u4.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gM,this.strm.avail_out=0;let t=El.inflateInit2(this.strm,e.windowBits);if(t!==bf)throw new Error(Dg[t]);if(this.header=new KM,El.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Rg.string2buf(e.dictionary):S4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=El.inflateSetDictionary(this.strm,e.dictionary),t!==bf)))throw new Error(Dg[t])}If.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?JM:QM,S4.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=El.inflate(t,u),o===$m&&a&&(o=El.inflateSetDictionary(t,a),o===bf?o=El.inflate(t,u):o===ax&&(o=$m));t.avail_in>0&&o===Gm&&t.state.wrap>0&&n[t.next_in]!==0;)El.inflateReset(t),o=El.inflate(t,u);switch(o){case eL:case ax:case $m:case tL:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===Gm))if(this.options.to==="string"){let h=Rg.utf8border(t.output,t.next_out),f=t.next_out-h,p=Rg.buf2string(t.output,h);t.next_out=f,t.avail_out=s-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===bf&&c===0)){if(o===Gm)return o=El.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};If.prototype.onData=function(n){this.chunks.push(n)};If.prototype.onEnd=function(n){n===bf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u4.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function nL(n,e){const t=new If(e);if(t.push(n),t.err)throw t.msg||Dg[t.err];return t.result}var rL=If,sL=nL,iL={Inflate:rL,inflate:sL};const{Inflate:aL,inflate:oL}=iL;var ox=aL,lL=oL;const N4=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;N4[n]=e}const lx=4294967295;function cL(n,e,t){let s=n;for(let a=0;a<t;a++)s=N4[(s^e[a])&255]^s>>>8;return s}function uL(n,e){return(cL(lx,n,e)^lx)>>>0}function cx(n,e,t){const s=n.readUint32(),a=uL(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function A4(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function C4(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function T4(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function k4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function j4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+hL(e[o-a],t[o],t[o-a])&255}}function hL(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function dL(n,e,t,s,a,o){switch(n){case 0:A4(e,t,a);break;case 1:C4(e,t,a,o);break;case 2:T4(e,t,s,a);break;case 3:k4(e,t,s,a,o);break;case 4:j4(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const fL=new Uint16Array([255]),pL=new Uint8Array(fL.buffer),mL=pL[0]===255;function gL(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,h=new Uint8Array(s*t*c);let f=0;for(let p=0;p<7;p++){const y=u[p],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((s-y.y)/y.yStep);if(_<=0||b<=0)continue;const N=_*c,A=new Uint8Array(N);for(let k=0;k<b;k++){const C=e[f++],O=e.subarray(f,f+N);f+=N;const R=new Uint8Array(N);dL(C,O,R,A,N,c),A.set(R);for(let V=0;V<_;V++){const B=y.x+V*y.xStep,U=y.y+k*y.yStep;if(!(B>=t||U>=s))for(let z=0;z<c;z++)h[(U*t+B)*c+z]=R[V*c+z]}}}if(o===16){const p=new Uint16Array(h.buffer);if(mL)for(let y=0;y<p.length;y++)p[y]=bL(p[y]);return p}else return h}function bL(n){return(n&255)<<8|n>>8&255}const vL=new Uint16Array([255]),yL=new Uint8Array(vL.buffer),xL=yL[0]===255,wL=new Uint8Array(0);function ux(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*t),h=new Uint8Array(s*c);let f=wL,p=0,y,_;for(let b=0;b<s;b++){switch(y=e.subarray(p+1,p+1+c),_=h.subarray(b*c,(b+1)*c),e[p]){case 0:A4(y,_,c);break;case 1:C4(y,_,c,u);break;case 2:T4(y,_,f,c);break;case 3:k4(y,_,f,c,u);break;case 4:j4(y,_,f,c,u);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=_,p+=c+1}if(o===16){const b=new Uint16Array(h.buffer);if(xL)for(let N=0;N<b.length;N++)b[N]=_L(b[N]);return b}else return h}function _L(n){return(n&255)<<8|n>>8&255}const K1=Uint8Array.of(137,80,78,71,13,10,26,10);function hx(n){if(!SL(n.readBytes(K1.length)))throw new Error("wrong PNG signature")}function SL(n){if(n.length<K1.length)return!1;for(let e=0;e<K1.length;e++)if(n[e]!==K1[e])return!1;return!0}const NL="tEXt",AL=0,E4=new TextDecoder("latin1");function CL(n){if(kL(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const TL=/^[\u0000-\u00FF]*$/;function kL(n){if(!TL.test(n))throw new Error("invalid latin1 text")}function jL(n,e,t){const s=M4(e);n[s]=EL(e,t-s.length-1)}function M4(n){for(n.mark();n.readByte()!==AL;);const e=n.offset;n.reset();const t=E4.decode(n.readBytes(e-n.offset-1));return n.skip(1),CL(t),t}function EL(n,e){return E4.decode(n.readBytes(e))}const la={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ym={UNKNOWN:-1,DEFLATE:0},dx={UNKNOWN:-1,ADAPTIVE:0},Xm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},z1={NONE:0,BACKGROUND:1,PREVIOUS:2},Zm={SOURCE:0,OVER:1};class ML extends Z2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new ox,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ym.UNKNOWN,this._filterMethod=dx.UNKNOWN,this._interlaceMethod=Xm.UNKNOWN,this._colorType=la.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(hx(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(hx(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case NL:jL(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?cx(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?cx(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=LL(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case la.GREYSCALE:s=1;break;case la.TRUECOLOUR:s=3;break;case la.INDEXED_COLOUR:s=1;break;case la.GREYSCALE_ALPHA:s=2;break;case la.TRUECOLOUR_ALPHA:s=4;break;case la.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ym.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case la.GREYSCALE:case la.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case la.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case la.UNKNOWN:case la.GREYSCALE_ALPHA:case la.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=M4(this),s=this.readUint8();if(s!==Ym.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:lL(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=ux({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case z1.NONE:break;case z1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[u+c]=0}break;case z1.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const c=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,h=(o*t.width+u)*this._png.channels;return{index:c,frameIndex:h}};switch(t.blendOp){case Zm.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:h}=a(o,u);for(let f=0;f<this._png.channels;f++)e.data[c+f]=t.data[h+f]}break;case Zm.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:h}=a(o,u);for(let f=0;f<this._png.channels;f++){const p=t.data[h+this._png.channels-1]/s,y=f%(this._png.channels-1)===0?1:t.data[h+f],_=Math.floor(p*y+(1-p)*e.data[c+f]);e.data[c+f]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==dx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Xm.NO_INTERLACE)this._png.data=ux({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Xm.ADAM7)this._png.data=gL({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:z1.NONE,blendOp:Zm.SOURCE,data:e}),this._inflator=new ox,this._writingDataChunks=!1}}function LL(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var fx;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(fx||(fx={}));function OL(n,e){return new ML(n,e).decode()}var hn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Km(){hn.console&&typeof hn.console.log=="function"&&hn.console.log.apply(hn.console,arguments)}var xr={log:Km,warn:function(n){hn.console&&(typeof hn.console.warn=="function"?hn.console.warn.apply(hn.console,arguments):Km.call(null,arguments))},error:function(n){hn.console&&(typeof hn.console.error=="function"?hn.console.error.apply(hn.console,arguments):Km(n))}};function Qm(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){hu(s.response,e,t)},s.onerror=function(){xr.error("could not download file")},s.send()}function px(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function q1(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var hu=hn.saveAs||((typeof window>"u"?"undefined":ar(window))!=="object"||window!==hn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=hn.URL||hn.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?px(a.href)?Qm(n,e,t):q1(a,a.target="_blank"):q1(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){q1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(px(n))Qm(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){q1(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:ar(o)!=="object"&&(xr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Qm(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(hn.HTMLElement)||hn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":ar(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=u?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},c.readAsDataURL(n)}else{var h=hn.URL||hn.webkitURL,f=h.createObjectURL(n);s?s.location=f:location.href=f,s=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function L4(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+c+h+f}}var Q1=hn.atob.bind(hn),mx=hn.btoa.bind(hn);function Jm(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=li(t,s,a,o,e[0],7,-680876936),o=li(o,t,s,a,e[1],12,-389564586),a=li(a,o,t,s,e[2],17,606105819),s=li(s,a,o,t,e[3],22,-1044525330),t=li(t,s,a,o,e[4],7,-176418897),o=li(o,t,s,a,e[5],12,1200080426),a=li(a,o,t,s,e[6],17,-1473231341),s=li(s,a,o,t,e[7],22,-45705983),t=li(t,s,a,o,e[8],7,1770035416),o=li(o,t,s,a,e[9],12,-1958414417),a=li(a,o,t,s,e[10],17,-42063),s=li(s,a,o,t,e[11],22,-1990404162),t=li(t,s,a,o,e[12],7,1804603682),o=li(o,t,s,a,e[13],12,-40341101),a=li(a,o,t,s,e[14],17,-1502002290),t=ci(t,s=li(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ci(o,t,s,a,e[6],9,-1069501632),a=ci(a,o,t,s,e[11],14,643717713),s=ci(s,a,o,t,e[0],20,-373897302),t=ci(t,s,a,o,e[5],5,-701558691),o=ci(o,t,s,a,e[10],9,38016083),a=ci(a,o,t,s,e[15],14,-660478335),s=ci(s,a,o,t,e[4],20,-405537848),t=ci(t,s,a,o,e[9],5,568446438),o=ci(o,t,s,a,e[14],9,-1019803690),a=ci(a,o,t,s,e[3],14,-187363961),s=ci(s,a,o,t,e[8],20,1163531501),t=ci(t,s,a,o,e[13],5,-1444681467),o=ci(o,t,s,a,e[2],9,-51403784),a=ci(a,o,t,s,e[7],14,1735328473),t=ui(t,s=ci(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ui(o,t,s,a,e[8],11,-2022574463),a=ui(a,o,t,s,e[11],16,1839030562),s=ui(s,a,o,t,e[14],23,-35309556),t=ui(t,s,a,o,e[1],4,-1530992060),o=ui(o,t,s,a,e[4],11,1272893353),a=ui(a,o,t,s,e[7],16,-155497632),s=ui(s,a,o,t,e[10],23,-1094730640),t=ui(t,s,a,o,e[13],4,681279174),o=ui(o,t,s,a,e[0],11,-358537222),a=ui(a,o,t,s,e[3],16,-722521979),s=ui(s,a,o,t,e[6],23,76029189),t=ui(t,s,a,o,e[9],4,-640364487),o=ui(o,t,s,a,e[12],11,-421815835),a=ui(a,o,t,s,e[15],16,530742520),t=hi(t,s=ui(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=hi(o,t,s,a,e[7],10,1126891415),a=hi(a,o,t,s,e[14],15,-1416354905),s=hi(s,a,o,t,e[5],21,-57434055),t=hi(t,s,a,o,e[12],6,1700485571),o=hi(o,t,s,a,e[3],10,-1894986606),a=hi(a,o,t,s,e[10],15,-1051523),s=hi(s,a,o,t,e[1],21,-2054922799),t=hi(t,s,a,o,e[8],6,1873313359),o=hi(o,t,s,a,e[15],10,-30611744),a=hi(a,o,t,s,e[6],15,-1560198380),s=hi(s,a,o,t,e[13],21,1309151649),t=hi(t,s,a,o,e[4],6,-145523070),o=hi(o,t,s,a,e[11],10,-1120210379),a=hi(a,o,t,s,e[2],15,718787259),s=hi(s,a,o,t,e[9],21,-343485551),n[0]=Tc(t,n[0]),n[1]=Tc(s,n[1]),n[2]=Tc(a,n[2]),n[3]=Tc(o,n[3])}function f0(n,e,t,s,a,o){return e=Tc(Tc(e,n),Tc(s,o)),Tc(e<<a|e>>>32-a,t)}function li(n,e,t,s,a,o,u){return f0(e&t|~e&s,n,e,a,o,u)}function ci(n,e,t,s,a,o,u){return f0(e&s|t&~s,n,e,a,o,u)}function ui(n,e,t,s,a,o,u){return f0(e^t^s,n,e,a,o,u)}function hi(n,e,t,s,a,o,u){return f0(t^(e|~s),n,e,a,o,u)}function O4(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Jm(s,DL(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Jm(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Jm(s,a),s}function DL(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var gx="0123456789abcdef".split("");function RL(n){for(var e="",t=0;t<4;t++)e+=gx[n>>8*t+4&15]+gx[n>>8*t&15];return e}function IL(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ig(n){return O4(n).map(IL).join("")}var VL=(function(n){for(var e=0;e<n.length;e++)n[e]=RL(n[e]);return n.join("")})(O4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Tc(n,e){if(VL){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Vg(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),c=[],h=0;h<256;h++)c[h]=h;var f=0;for(h=0;h<256;h++){var p=c[h];f=(f+p+u.charCodeAt(h))%256,c[h]=c[f],c[f]=p}t=n,s=c}else c=s;var y=e.length,_=0,b=0,N="";for(h=0;h<y;h++)b=(b+(p=c[_=(_+1)%256]))%256,c[_]=c[b],c[b]=p,u=c[(c[_]+c[b])%256],N+=String.fromCharCode(e.charCodeAt(h)^u);return N}var bx={print:4,modify:8,copy:16,"annot-forms":32};function Ah(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(c){if(bx.perm!==void 0)throw new Error("Invalid permission: "+c);a+=bx[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Ig(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Vg(this.encryptionKey,this.padding)}function Ch(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function vx(n){if(ar(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(c){hn.console&&xr.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Rp(n){if(!(this instanceof Rp))return new Rp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function D4(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function fu(n,e,t,s,a){if(!(this instanceof fu))return new fu(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,D4.call(this,s,a)}function Mh(n,e,t,s,a){if(!(this instanceof Mh))return new Mh(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,D4.call(this,s,a)}function $t(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,h=16,f="S",p=null;ar(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=vx;var N="1.3",A=b.__private__.getPdfVersion=function(){return N};b.__private__.setPdfVersion=function(S){N=S};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var C=b.__private__.getPageFormat=function(S){return k[S]};a=a||"a4";var O="compat",R="advanced",V=O;function B(){this.saveGraphicsState(),G(new it(Nt,0,0,-Nt,0,za()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),f="n",V=R}function U(){this.restoreGraphicsState(),f="S",V=O}var z=b.__private__.combineFontStyleAndFontWeight=function(S,H){if(S=="bold"&&H=="normal"||S=="bold"&&H==400||S=="normal"&&H=="italic"||S=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(S=H==400||H==="normal"?S==="italic"?"italic":"normal":H!=700&&H!=="bold"||S!=="normal"?(H==700?"bold":H)+""+S:"bold"),S};b.advancedAPI=function(S){var H=V===O;return H&&B.call(this),typeof S!="function"||(S(this),H&&U.call(this)),this},b.compatAPI=function(S){var H=V===R;return H&&U.call(this),typeof S!="function"||(S(this),H&&B.call(this)),this},b.isAdvancedAPI=function(){return V===R};var L,F=function(S){if(V!==R)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=b.roundToPrecision=b.__private__.roundToPrecision=function(S,H){var fe=e||H;if(isNaN(S)||isNaN(fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(fe).replace(/0+$/,"")};L=b.hpf=b.__private__.hpf=typeof h=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return J(S,h)}:h==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return J(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return J(S,16)};var j=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return J(S,2)},I=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return J(S,3)},X=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return V===O?S*Nt:V===R?S:void 0},P=function(S){return X((function(H){return V===O?za()-H:V===R?H:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var ie,Y="00000000000000000000000000000000",ne=b.__private__.getFileId=function(){return Y},le=b.__private__.setFileId=function(S){return Y=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ur=new Ah(p.userPermissions,p.userPassword,p.ownerPassword,Y)),Y};b.setFileId=function(S){return le(S),this},b.getFileId=function(){return ne()};var pe=b.__private__.convertDateToPDFDate=function(S){var H=S.getTimezoneOffset(),fe=H<0?"+":"-",ge=Math.floor(Math.abs(H/60)),Se=Math.abs(H%60),Ge=[fe,te(ge),"'",te(Se),"'"].join("");return["D:",S.getFullYear(),te(S.getMonth()+1),te(S.getDate()),te(S.getHours()),te(S.getMinutes()),te(S.getSeconds()),Ge].join("")},we=b.__private__.convertPDFDateToDate=function(S){var H=parseInt(S.substr(2,4),10),fe=parseInt(S.substr(6,2),10)-1,ge=parseInt(S.substr(8,2),10),Se=parseInt(S.substr(10,2),10),Ge=parseInt(S.substr(12,2),10),tt=parseInt(S.substr(14,2),10);return new Date(H,fe,ge,Se,Ge,tt,0)},q=b.__private__.setCreationDate=function(S){var H;if(S===void 0&&(S=new Date),S instanceof Date)H=pe(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=S}return ie=H},E=b.__private__.getCreationDate=function(S){var H=ie;return S==="jsDate"&&(H=we(ie)),H};b.setCreationDate=function(S){return q(S),this},b.getCreationDate=function(S){return E(S)};var $,te=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ae=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},re=0,de=[],ce=[],ve=0,_e=[],Ve=[],Xe=!1,Je=ce;b.__private__.setCustomOutputDestination=function(S){Xe=!0,Je=S};var at=function(S){Xe||(Je=S)};b.__private__.resetCustomOutputDestination=function(){Xe=!1,Je=ce};var G=b.__private__.out=function(S){return S=S.toString(),ve+=S.length+1,Je.push(S),Je},Ee=b.__private__.write=function(S){return G(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},xt=b.__private__.getArrayBuffer=function(S){for(var H=S.length,fe=new ArrayBuffer(H),ge=new Uint8Array(fe);H--;)ge[H]=S.charCodeAt(H);return fe},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return et};var De=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return De=V===R?S/Nt:S,this};var rt,Ue=b.__private__.getFontSize=b.getFontSize=function(){return V===O?De:De*Nt},ht=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return ht=S,this},b.__private__.getR2L=b.getR2L=function(){return ht};var Ae,Ke=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))rt=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');rt=S}else rt=parseInt(S,10)};b.__private__.getZoomMode=function(){return rt};var bt,mt=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Ae=S};b.__private__.getPageMode=function(){return Ae};var st=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');bt=S};b.__private__.getLayoutMode=function(){return bt},b.__private__.setDisplayMode=b.setDisplayMode=function(S,H,fe){return Ke(S),st(H),mt(fe),this};var dt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(dt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return dt[S]},b.__private__.getDocumentProperties=function(){return dt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var H in dt)dt.hasOwnProperty(H)&&S[H]&&(dt[H]=S[H]);return this},b.__private__.setDocumentProperty=function(S,H){if(Object.keys(dt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return dt[S]=H};var pt,Nt,je,ft,ct,He={},ut={},vt=[],ot={},ln={},Et={},Bt={},pn=null,Tt=0,gt=[],zt=new vx(b),wn=n.hotfixes||[],Me={},yt={},Rt=[],it=function S(H,fe,ge,Se,Ge,tt){if(!(this instanceof S))return new S(H,fe,ge,Se,Ge,tt);isNaN(H)&&(H=1),isNaN(fe)&&(fe=0),isNaN(ge)&&(ge=0),isNaN(Se)&&(Se=1),isNaN(Ge)&&(Ge=0),isNaN(tt)&&(tt=0),this._matrix=[H,fe,ge,Se,Ge,tt]};Object.defineProperty(it.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(it.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(it.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(it.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(it.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(it.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(it.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(it.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(it.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(it.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(it.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(it.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(it.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(it.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(it.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(it.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),it.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(S)},it.prototype.multiply=function(S){var H=S.sx*this.sx+S.shy*this.shx,fe=S.sx*this.shy+S.shy*this.sy,ge=S.shx*this.sx+S.sy*this.shx,Se=S.shx*this.shy+S.sy*this.sy,Ge=S.tx*this.sx+S.ty*this.shx+this.tx,tt=S.tx*this.shy+S.ty*this.sy+this.ty;return new it(H,fe,ge,Se,Ge,tt)},it.prototype.decompose=function(){var S=this.sx,H=this.shy,fe=this.shx,ge=this.sy,Se=this.tx,Ge=this.ty,tt=Math.sqrt(S*S+H*H),Ot=(S/=tt)*fe+(H/=tt)*ge;fe-=S*Ot,ge-=H*Ot;var qt=Math.sqrt(fe*fe+ge*ge);return Ot/=qt,S*(ge/=qt)<H*(fe/=qt)&&(S=-S,H=-H,Ot=-Ot,tt=-tt),{scale:new it(tt,0,0,qt,0,0),translate:new it(1,0,0,1,Se,Ge),rotate:new it(S,H,-H,S,0,0),skew:new it(1,0,Ot,1,0,0)}},it.prototype.toString=function(S){return this.join(" ")},it.prototype.inversed=function(){var S=this.sx,H=this.shy,fe=this.shx,ge=this.sy,Se=this.tx,Ge=this.ty,tt=1/(S*ge-H*fe),Ot=ge*tt,qt=-H*tt,rn=-fe*tt,mn=S*tt;return new it(Ot,qt,rn,mn,-Ot*Se-rn*Ge,-qt*Se-mn*Ge)},it.prototype.applyToPoint=function(S){var H=S.x*this.sx+S.y*this.shx+this.tx,fe=S.x*this.shy+S.y*this.sy+this.ty;return new Ti(H,fe)},it.prototype.applyToRectangle=function(S){var H=this.applyToPoint(S),fe=this.applyToPoint(new Ti(S.x+S.w,S.y+S.h));return new Ia(H.x,H.y,fe.x-H.x,fe.y-H.y)},it.prototype.clone=function(){var S=this.sx,H=this.shy,fe=this.shx,ge=this.sy,Se=this.tx,Ge=this.ty;return new it(S,H,fe,ge,Se,Ge)},b.Matrix=it;var Te=b.matrixMult=function(S,H){return H.multiply(S)},_t=new it(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=_t;var St=function(S,H){if(!ln[S]){var fe=(H instanceof fu?"Sh":"P")+(Object.keys(ot).length+1).toString(10);H.id=fe,ln[S]=fe,ot[fe]=H,zt.publish("addPattern",H)}};b.ShadingPattern=fu,b.TilingPattern=Mh,b.addShadingPattern=function(S,H){return F("addShadingPattern()"),St(S,H),this},b.beginTilingPattern=function(S){F("beginTilingPattern()"),il(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,H){F("endTilingPattern()"),H.stream=Ve[$].join(`
`),St(S,H),zt.publish("endTilingPattern",H),Rt.pop().restore()};var Mt,Ct=b.__private__.newObject=function(){var S=Qt();return cn(S,!0),S},Qt=b.__private__.newObjectDeferred=function(){return re++,de[re]=function(){return ve},re},cn=function(S,H){return H=typeof H=="boolean"&&H,de[S]=ve,H&&G(S+" 0 obj"),S},nr=b.__private__.newAdditionalObject=function(){var S={objId:Qt(),content:""};return _e.push(S),S},Pn=Qt(),yn=Qt(),Sn=b.__private__.decodeColorString=function(S){var H=S.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var fe=parseFloat(H[0]);H=[fe,fe,fe,"r"]}for(var ge="#",Se=0;Se<3;Se++)ge+=("0"+Math.floor(255*parseFloat(H[Se])).toString(16)).slice(-2);return ge},tr=b.__private__.encodeColorString=function(S){var H;typeof S=="string"&&(S={ch1:S});var fe=S.ch1,ge=S.ch2,Se=S.ch3,Ge=S.ch4,tt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof fe=="string"&&fe.charAt(0)!=="#"){var Ot=new L4(fe);if(Ot.ok)fe=Ot.toHex();else if(!/^\d*\.?\d*$/.test(fe))throw new Error('Invalid color "'+fe+'" passed to jsPDF.encodeColorString.')}if(typeof fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(fe)&&(fe="#"+fe[1]+fe[1]+fe[2]+fe[2]+fe[3]+fe[3]),typeof fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(fe)){var qt=parseInt(fe.substr(1),16);fe=qt>>16&255,ge=qt>>8&255,Se=255&qt}if(ge===void 0||Ge===void 0&&fe===ge&&ge===Se)H=typeof fe=="string"?fe+" "+tt[0]:S.precision===2?j(fe/255)+" "+tt[0]:I(fe/255)+" "+tt[0];else if(Ge===void 0||ar(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",tt[1]].join(" ");H=typeof fe=="string"?[fe,ge,Se,tt[1]].join(" "):S.precision===2?[j(fe/255),j(ge/255),j(Se/255),tt[1]].join(" "):[I(fe/255),I(ge/255),I(Se/255),tt[1]].join(" ")}else H=typeof fe=="string"?[fe,ge,Se,Ge,tt[2]].join(" "):S.precision===2?[j(fe),j(ge),j(Se),j(Ge),tt[2]].join(" "):[I(fe),I(ge),I(Se),I(Ge),tt[2]].join(" ");return H},Ln=b.__private__.getFilters=function(){return u},gr=b.__private__.putStream=function(S){var H=(S=S||{}).data||"",fe=S.filters||Ln(),ge=S.alreadyAppliedFilters||[],Se=S.addLength1||!1,Ge=H.length,tt=S.objectId,Ot=function(is){return is};if(p!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ot=Ur.encryptor(tt,0));var qt={};fe===!0&&(fe=["FlateEncode"]);var rn=S.additionalKeyValues||[],mn=(qt=$t.API.processDataByFilters!==void 0?$t.API.processDataByFilters(H,fe):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(qt.data.length!==0&&(rn.push({key:"Length",value:qt.data.length}),Se===!0&&rn.push({key:"Length1",value:Ge})),mn.length!=0)if(mn.split("/").length-1==1)rn.push({key:"Filter",value:mn});else{rn.push({key:"Filter",value:"["+mn+"]"});for(var In=0;In<rn.length;In+=1)if(rn[In].key==="DecodeParms"){for(var Ar=[],Hr=0;Hr<qt.reverseChain.split("/").length-1;Hr+=1)Ar.push("null");Ar.push(rn[In].value),rn[In].value="["+Ar.join(" ")+"]"}}G("<<");for(var lr=0;lr<rn.length;lr++)G("/"+rn[lr].key+" "+rn[lr].value);G(">>"),qt.data.length!==0&&(G("stream"),G(Ot(qt.data)),G("endstream"))},Le=b.__private__.putPage=function(S){var H=S.number,fe=S.data,ge=S.objId,Se=S.contentsObjId;cn(ge,!0),G("<</Type /Page"),G("/Parent "+S.rootDictionaryObjId+" 0 R"),G("/Resources "+S.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(L(S.mediaBox.bottomLeftX))+" "+parseFloat(L(S.mediaBox.bottomLeftY))+" "+L(S.mediaBox.topRightX)+" "+L(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&G("/CropBox ["+L(S.cropBox.bottomLeftX)+" "+L(S.cropBox.bottomLeftY)+" "+L(S.cropBox.topRightX)+" "+L(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&G("/BleedBox ["+L(S.bleedBox.bottomLeftX)+" "+L(S.bleedBox.bottomLeftY)+" "+L(S.bleedBox.topRightX)+" "+L(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&G("/TrimBox ["+L(S.trimBox.bottomLeftX)+" "+L(S.trimBox.bottomLeftY)+" "+L(S.trimBox.topRightX)+" "+L(S.trimBox.topRightY)+"]"),S.artBox!==null&&G("/ArtBox ["+L(S.artBox.bottomLeftX)+" "+L(S.artBox.bottomLeftY)+" "+L(S.artBox.topRightX)+" "+L(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&G("/UserUnit "+S.userUnit),zt.publish("putPage",{objId:ge,pageContext:gt[H],pageNumber:H,page:fe}),G("/Contents "+Se+" 0 R"),G(">>"),G("endobj");var Ge=fe.join(`
`);return V===R&&(Ge+=`
Q`),cn(Se,!0),gr({data:Ge,filters:Ln(),objectId:Se}),G("endobj"),ge},Be=b.__private__.putPages=function(){var S,H,fe=[];for(S=1;S<=Tt;S++)gt[S].objId=Qt(),gt[S].contentsObjId=Qt();for(S=1;S<=Tt;S++)fe.push(Le({number:S,data:Ve[S],objId:gt[S].objId,contentsObjId:gt[S].contentsObjId,mediaBox:gt[S].mediaBox,cropBox:gt[S].cropBox,bleedBox:gt[S].bleedBox,trimBox:gt[S].trimBox,artBox:gt[S].artBox,userUnit:gt[S].userUnit,rootDictionaryObjId:Pn,resourceDictionaryObjId:yn}));cn(Pn,!0),G("<</Type /Pages");var ge="/Kids [";for(H=0;H<Tt;H++)ge+=fe[H]+" 0 R ";G(ge+"]"),G("/Count "+Tt),G(">>"),G("endobj"),zt.publish("postPutPages")},nt=function(S){zt.publish("putFont",{font:S,out:G,newObject:Ct,putStream:gr}),S.isAlreadyPutted!==!0&&(S.objectNumber=Ct(),G("<<"),G("/Type /Font"),G("/BaseFont /"+Ch(S.postScriptName)),G("/Subtype /Type1"),typeof S.encoding=="string"&&G("/Encoding /"+S.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},It=function(S){S.objectNumber=Ct();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[L(S.x),L(S.y),L(S.x+S.width),L(S.y+S.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var fe=S.pages[1].join(`
`);gr({data:fe,additionalKeyValues:H,objectId:S.objectNumber}),G("endobj")},Gt=function(S,H){H||(H=21);var fe=Ct(),ge=(function(tt,Ot){var qt,rn=[],mn=1/(Ot-1);for(qt=0;qt<1;qt+=mn)rn.push(qt);if(rn.push(1),tt[0].offset!=0){var In={offset:0,color:tt[0].color};tt.unshift(In)}if(tt[tt.length-1].offset!=1){var Ar={offset:1,color:tt[tt.length-1].color};tt.push(Ar)}for(var Hr="",lr=0,is=0;is<rn.length;is++){for(qt=rn[is];qt>tt[lr+1].offset;)lr++;var Zr=tt[lr].offset,Cs=(qt-Zr)/(tt[lr+1].offset-Zr),qa=tt[lr].color,Ji=tt[lr+1].color;Hr+=ae(Math.round((1-Cs)*qa[0]+Cs*Ji[0]).toString(16))+ae(Math.round((1-Cs)*qa[1]+Cs*Ji[1]).toString(16))+ae(Math.round((1-Cs)*qa[2]+Cs*Ji[2]).toString(16))}return Hr.trim()})(S.colors,H),Se=[];Se.push({key:"FunctionType",value:"0"}),Se.push({key:"Domain",value:"[0.0 1.0]"}),Se.push({key:"Size",value:"["+H+"]"}),Se.push({key:"BitsPerSample",value:"8"}),Se.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Se.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gr({data:ge,additionalKeyValues:Se,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:fe}),G("endobj"),S.objectNumber=Ct(),G("<< /ShadingType "+S.type),G("/ColorSpace /DeviceRGB");var Ge="/Coords ["+L(parseFloat(S.coords[0]))+" "+L(parseFloat(S.coords[1]))+" ";S.type===2?Ge+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3])):Ge+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3]))+" "+L(parseFloat(S.coords[4]))+" "+L(parseFloat(S.coords[5])),G(Ge+="]"),S.matrix&&G("/Matrix ["+S.matrix.toString()+"]"),G("/Function "+fe+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Ht=function(S,H){var fe=Qt(),ge=Ct();H.push({resourcesOid:fe,objectOid:ge}),S.objectNumber=ge;var Se=[];Se.push({key:"Type",value:"/Pattern"}),Se.push({key:"PatternType",value:"1"}),Se.push({key:"PaintType",value:"1"}),Se.push({key:"TilingType",value:"1"}),Se.push({key:"BBox",value:"["+S.boundingBox.map(L).join(" ")+"]"}),Se.push({key:"XStep",value:L(S.xStep)}),Se.push({key:"YStep",value:L(S.yStep)}),Se.push({key:"Resources",value:fe+" 0 R"}),S.matrix&&Se.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),gr({data:S.stream,additionalKeyValues:Se,objectId:S.objectNumber}),G("endobj")},At=function(S){for(var H in S.objectNumber=Ct(),G("<<"),S)switch(H){case"opacity":G("/ca "+j(S[H]));break;case"stroke-opacity":G("/CA "+j(S[H]))}G(">>"),G("endobj")},an=function(S){cn(S.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in G("/Font <<"),He)He.hasOwnProperty(H)&&(y===!1||y===!0&&_.hasOwnProperty(H))&&G("/"+H+" "+He[H].objectNumber+" 0 R");G(">>")})(),(function(){if(Object.keys(ot).length>0){for(var H in G("/Shading <<"),ot)ot.hasOwnProperty(H)&&ot[H]instanceof fu&&ot[H].objectNumber>=0&&G("/"+H+" "+ot[H].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),G(">>")}})(),(function(H){if(Object.keys(ot).length>0){for(var fe in G("/Pattern <<"),ot)ot.hasOwnProperty(fe)&&ot[fe]instanceof b.TilingPattern&&ot[fe].objectNumber>=0&&ot[fe].objectNumber<H&&G("/"+fe+" "+ot[fe].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),G(">>")}})(S.objectOid),(function(){if(Object.keys(Et).length>0){var H;for(H in G("/ExtGState <<"),Et)Et.hasOwnProperty(H)&&Et[H].objectNumber>=0&&G("/"+H+" "+Et[H].objectNumber+" 0 R");zt.publish("putGStateDict"),G(">>")}})(),(function(){for(var H in G("/XObject <<"),Me)Me.hasOwnProperty(H)&&Me[H].objectNumber>=0&&G("/"+H+" "+Me[H].objectNumber+" 0 R");zt.publish("putXobjectDict"),G(">>")})(),G(">>"),G("endobj")},on=function(S){ut[S.fontName]=ut[S.fontName]||{},ut[S.fontName][S.fontStyle]=S.id},Hn=function(S,H,fe,ge,Se){var Ge={id:"F"+(Object.keys(He).length+1).toString(10),postScriptName:S,fontName:H,fontStyle:fe,encoding:ge,isStandardFont:Se||!1,metadata:{}};return zt.publish("addFont",{font:Ge,instance:this}),He[Ge.id]=Ge,on(Ge),Ge.id},Wn=b.__private__.pdfEscape=b.pdfEscape=function(S,H){return(function(fe,ge){var Se,Ge,tt,Ot,qt,rn,mn,In,Ar;if(tt=(ge=ge||{}).sourceEncoding||"Unicode",qt=ge.outputEncoding,(ge.autoencode||qt)&&He[pt].metadata&&He[pt].metadata[tt]&&He[pt].metadata[tt].encoding&&(Ot=He[pt].metadata[tt].encoding,!qt&&He[pt].encoding&&(qt=He[pt].encoding),!qt&&Ot.codePages&&(qt=Ot.codePages[0]),typeof qt=="string"&&(qt=Ot[qt]),qt)){for(mn=!1,rn=[],Se=0,Ge=fe.length;Se<Ge;Se++)(In=qt[fe.charCodeAt(Se)])?rn.push(String.fromCharCode(In)):rn.push(fe[Se]),rn[Se].charCodeAt(0)>>8&&(mn=!0);fe=rn.join("")}for(Se=fe.length;mn===void 0&&Se!==0;)fe.charCodeAt(Se-1)>>8&&(mn=!0),Se--;if(!mn)return fe;for(rn=ge.noBOM?[]:[254,255],Se=0,Ge=fe.length;Se<Ge;Se++){if((Ar=(In=fe.charCodeAt(Se))>>8)>>8)throw new Error("Character at position "+Se+" of string '"+fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rn.push(Ar),rn.push(In-(Ar<<8))}return String.fromCharCode.apply(void 0,rn)})(S,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},dn=b.__private__.beginPage=function(S){Ve[++Tt]=[],gt[Tt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Nr(Tt),at(Ve[$])},Kn=function(S,H){var fe,ge,Se;switch(t=H||t,typeof S=="string"&&(fe=C(S.toLowerCase()),Array.isArray(fe)&&(ge=fe[0],Se=fe[1])),Array.isArray(S)&&(ge=S[0]*Nt,Se=S[1]*Nt),isNaN(ge)&&(ge=a[0],Se=a[1]),(ge>14400||Se>14400)&&(xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Se=Math.min(14400,Se)),a=[ge,Se],t.substr(0,1)){case"l":Se>ge&&(a=[Se,ge]);break;case"p":ge>Se&&(a=[Se,ge])}dn(a),Jt(nl),G(gi),Ul!==0&&G(Ul+" J"),ps!==0&&G(ps+" j"),zt.publish("addPage",{pageNumber:Tt})},Gn=function(S){S>0&&S<=Tt&&(Ve.splice(S,1),gt.splice(S,1),Tt--,$>Tt&&($=Tt),this.setPage($))},Nr=function(S){S>0&&S<=Tt&&($=S)},ds=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ve.length-1},fs=function(S,H,fe){var ge,Se=void 0;return fe=fe||{},S=S!==void 0?S:He[pt].fontName,H=H!==void 0?H:He[pt].fontStyle,ge=S.toLowerCase(),ut[ge]!==void 0&&ut[ge][H]!==void 0?Se=ut[ge][H]:ut[S]!==void 0&&ut[S][H]!==void 0?Se=ut[S][H]:fe.disableWarning===!1&&xr.warn("Unable to look up font label for font '"+S+"', '"+H+"'. Refer to getFontList() for available fonts."),Se||fe.noFallback||(Se=ut.times[H])==null&&(Se=ut.times.normal),Se},or=b.__private__.putInfo=function(){var S=Ct(),H=function(ge){return ge};for(var fe in p!==null&&(H=Ur.encryptor(S,0)),G("<<"),G("/Producer ("+Wn(H("jsPDF "+$t.version))+")"),dt)dt.hasOwnProperty(fe)&&dt[fe]&&G("/"+fe.substr(0,1).toUpperCase()+fe.substr(1)+" ("+Wn(H(dt[fe]))+")");G("/CreationDate ("+Wn(H(ie))+")"),G(">>"),G("endobj")},ni=b.__private__.putCatalog=function(S){var H=(S=S||{}).rootDictionaryObjId||Pn;switch(Ct(),G("<<"),G("/Type /Catalog"),G("/Pages "+H+" 0 R"),rt||(rt="fullwidth"),rt){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var fe=""+rt;fe.substr(fe.length-1)==="%"&&(rt=parseInt(rt)/100),typeof rt=="number"&&G("/OpenAction [3 0 R /XYZ null null "+j(rt)+"]")}switch(bt||(bt="continuous"),bt){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}Ae&&G("/PageMode /"+Ae),zt.publish("putCatalog"),G(">>"),G("endobj")},ri=b.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(re+1)),G("/Root "+re+" 0 R"),G("/Info "+(re-1)+" 0 R"),p!==null&&G("/Encrypt "+Ur.oid+" 0 R"),G("/ID [ <"+Y+"> <"+Y+"> ]"),G(">>")},Cn=b.__private__.putHeader=function(){G("%PDF-"+N),G("%")},Xi=b.__private__.putXRef=function(){var S="0000000000";G("xref"),G("0 "+(re+1)),G("0000000000 65535 f ");for(var H=1;H<=re;H++)typeof de[H]=="function"?G((S+de[H]()).slice(-10)+" 00000 n "):de[H]!==void 0?G((S+de[H]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},Ns=b.__private__.buildDocument=function(){var S;re=0,ve=0,ce=[],de=[],_e=[],Pn=Qt(),yn=Qt(),at(ce),zt.publish("buildDocument"),Cn(),Be(),(function(){zt.publish("putAdditionalObjects");for(var fe=0;fe<_e.length;fe++){var ge=_e[fe];cn(ge.objId,!0),G(ge.content),G("endobj")}zt.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var fe in He)He.hasOwnProperty(fe)&&(y===!1||y===!0&&_.hasOwnProperty(fe))&&nt(He[fe])})(),(function(){var fe;for(fe in Et)Et.hasOwnProperty(fe)&&At(Et[fe])})(),(function(){for(var fe in Me)Me.hasOwnProperty(fe)&&It(Me[fe])})(),(function(fe){var ge;for(ge in ot)ot.hasOwnProperty(ge)&&(ot[ge]instanceof fu?Gt(ot[ge]):ot[ge]instanceof Mh&&Ht(ot[ge],fe))})(S),zt.publish("putResources"),S.forEach(an),an({resourcesOid:yn,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources"),p!==null&&(Ur.oid=Ct(),G("<<"),G("/Filter /Standard"),G("/V "+Ur.v),G("/R "+Ur.r),G("/U <"+Ur.toHexString(Ur.U)+">"),G("/O <"+Ur.toHexString(Ur.O)+">"),G("/P "+Ur.P),G(">>"),G("endobj")),or(),ni();var H=ve;return Xi(),ri(),G("startxref"),G(""+H),G("%%EOF"),at(Ve[$]),ce.join(`
`)},pi=b.__private__.getBlob=function(S){return new Blob([xt(S)],{type:"application/pdf"})},Zi=b.output=b.__private__.output=(Mt=function(S,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",S){case void 0:return Ns();case"save":b.save(H.filename);break;case"arraybuffer":return xt(Ns());case"blob":return pi(Ns());case"bloburi":case"bloburl":if(hn.URL!==void 0&&typeof hn.URL.createObjectURL=="function")return hn.URL&&hn.URL.createObjectURL(pi(Ns()))||void 0;xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var fe="",ge=Ns();try{fe=mx(ge)}catch{fe=mx(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+H.filename+";base64,"+fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(hn)==="[object Window]"){var Se="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Se=H.pdfObjectUrl,Ge="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Se+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",Ot=hn.open();return Ot!==null&&Ot.document.write(tt),Ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(hn)==="[object Window]"){var qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',rn=hn.open();if(rn!==null){rn.document.write(qt);var mn=this;rn.document.documentElement.querySelector("#pdfViewer").onload=function(){rn.document.title=H.filename,rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mn.output("bloburl"))}}return rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(hn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Ar=hn.open();if(Ar!==null&&(Ar.document.write(In),Ar.document.title=H.filename),Ar||typeof safari>"u")return Ar;break;case"datauri":case"dataurl":return hn.document.location.href=this.output("datauristring",H);default:return null}},Mt.foo=function(){try{return Mt.apply(this,arguments)}catch(fe){var S=fe.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var H="Error in function "+S.split(`
`)[0].split("<")[0]+": "+fe.message;if(!hn.console)throw new Error(H);hn.console.error(H,fe),hn.alert&&alert(H)}},Mt.foo.bar=Mt,Mt.foo),Xr=function(S){return Array.isArray(wn)===!0&&wn.indexOf(S)>-1};switch(s){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=Xr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Nt=s}var Ur=null;q(),le();var Rr=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[S].objId,pageNumber:S,pageContext:gt[S]}},So=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in gt)if(gt[H].objId===S)break;return Rr(H)},zl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:gt[$].objId,pageNumber:$,pageContext:gt[$]}};b.addPage=function(){return Kn.apply(this,arguments),this},b.setPage=function(){return Nr.apply(this,arguments),at.call(this,Ve[$]),this},b.insertPage=function(S){return this.addPage(),this.movePage($,S),this},b.movePage=function(S,H){var fe,ge;if(S>H){fe=Ve[S],ge=gt[S];for(var Se=S;Se>H;Se--)Ve[Se]=Ve[Se-1],gt[Se]=gt[Se-1];Ve[H]=fe,gt[H]=ge,this.setPage(H)}else if(S<H){fe=Ve[S],ge=gt[S];for(var Ge=S;Ge<H;Ge++)Ve[Ge]=Ve[Ge+1],gt[Ge]=gt[Ge+1];Ve[H]=fe,gt[H]=ge,this.setPage(H)}return this},b.deletePage=function(){return Gn.apply(this,arguments),this},b.__private__.text=b.text=function(S,H,fe,ge,Se){var Ge,tt,Ot,qt,rn,mn,In,Ar,Hr,lr=(ge=ge||{}).scope||this;if(typeof S=="number"&&typeof H=="number"&&(typeof fe=="string"||Array.isArray(fe))){var is=fe;fe=H,H=S,S=is}if(arguments[3]instanceof it==0?(Ot=arguments[4],qt=arguments[5],ar(In=arguments[3])==="object"&&In!==null||(typeof Ot=="string"&&(qt=Ot,Ot=null),typeof In=="string"&&(qt=In,In=null),typeof In=="number"&&(Ot=In,In=null),ge={flags:In,angle:Ot,align:qt})):(F("The transform parameter of text() with a Matrix value"),Hr=Se),isNaN(H)||isNaN(fe)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return lr;var Zr,Cs="",qa=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:Ra,Ji=lr.internal.scaleFactor;function Ua($n){return $n=$n.split("	").join(Array(ge.TabLen||9).join(" ")),Wn($n,In)}function Hc($n){for(var Vn,cr=$n.concat(),Gr=[],Aa=cr.length;Aa--;)typeof(Vn=cr.shift())=="string"?Gr.push(Vn):Array.isArray($n)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?Gr.push(Vn[0]):Gr.push([Vn[0],Vn[1],Vn[2]]);return Gr}function Wl($n,Vn){var cr;if(typeof $n=="string")cr=Vn($n)[0];else if(Array.isArray($n)){for(var Gr,Aa,ra=$n.concat(),cl=[],$c=ra.length;$c--;)typeof(Gr=ra.shift())=="string"?cl.push(Vn(Gr)[0]):Array.isArray(Gr)&&typeof Gr[0]=="string"&&(Aa=Vn(Gr[0],Gr[1],Gr[2]),cl.push([Aa[0],Aa[1],Aa[2]]));cr=cl}return cr}var va=!1,ea=!0;if(typeof S=="string")va=!0;else if(Array.isArray(S)){var ol=S.concat();tt=[];for(var Ha,ms=ol.length;ms--;)(typeof(Ha=ol.shift())!="string"||Array.isArray(Ha)&&typeof Ha[0]!="string")&&(ea=!1);va=ea}if(va===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Ao=De/lr.internal.scaleFactor,Co=Ao*(qa-1);switch(ge.baseline){case"bottom":fe-=Co;break;case"top":fe+=Ao-Co;break;case"hanging":fe+=Ao-2*Co;break;case"middle":fe+=Ao/2-Co}if((mn=ge.maxWidth||0)>0&&(typeof S=="string"?S=lr.splitTextToSize(S,mn):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function($n,Vn){return $n.concat(lr.splitTextToSize(Vn,mn))},[]))),Ge={text:S,x:H,y:fe,options:ge,mutex:{pdfEscape:Wn,activeFontKey:pt,fonts:He,activeFontSize:De}},zt.publish("preProcessText",Ge),S=Ge.text,Ot=(ge=Ge.options).angle,Hr instanceof it==0&&Ot&&typeof Ot=="number"){Ot*=Math.PI/180,ge.rotationDirection===0&&(Ot=-Ot),V===R&&(Ot=-Ot);var Gl=Math.cos(Ot),ya=Math.sin(Ot);Hr=new it(Gl,ya,-ya,Gl,0,0)}else Ot&&Ot instanceof it&&(Hr=Ot);V!==R||Hr||(Hr=_t),(rn=ge.charSpace||Ci)!==void 0&&(Cs+=L(X(rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ar=ge.horizontalScale)!==void 0&&(Cs+=L(100*Ar)+` Tz
`),ge.lang;var Ys=-1,Wa=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,$l=lr.internal.getCurrentPageInfo().pageContext;switch(Wa){case 0:case!1:case"fill":Ys=0;break;case 1:case!0:case"stroke":Ys=1;break;case 2:case"fillThenStroke":Ys=2;break;case 3:case"invisible":Ys=3;break;case 4:case"fillAndAddForClipping":Ys=4;break;case 5:case"strokeAndAddPathForClipping":Ys=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ys=6;break;case 7:case"addToPathForClipping":Ys=7}var Wc=$l.usedRenderingMode!==void 0?$l.usedRenderingMode:-1;Ys!==-1?Cs+=Ys+` Tr
`:Wc!==-1&&(Cs+=`0 Tr
`),Ys!==-1&&($l.usedRenderingMode=Ys),qt=ge.align||"left";var bi,ta=De*qa,Ga=lr.internal.pageSize.getWidth(),Gc=He[pt];rn=ge.charSpace||Ci,mn=ge.maxWidth||0,In=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var na=[],To=function($n){return lr.getStringUnitWidth($n,{font:Gc,charSpace:rn,fontSize:De,doKerning:!1})*De/Ji};if(Object.prototype.toString.call(S)==="[object Array]"){var ii;tt=Hc(S),qt!=="left"&&(bi=tt.map(To));var Xs,xa=0;if(qt==="right"){H-=bi[0],S=[],ms=tt.length;for(var wa=0;wa<ms;wa++)wa===0?(Xs=mi(H),ii=As(fe)):(Xs=X(xa-bi[wa]),ii=-ta),S.push([tt[wa],Xs,ii]),xa=bi[wa]}else if(qt==="center"){H-=bi[0]/2,S=[],ms=tt.length;for(var $a=0;$a<ms;$a++)$a===0?(Xs=mi(H),ii=As(fe)):(Xs=X((xa-bi[$a])/2),ii=-ta),S.push([tt[$a],Xs,ii]),xa=bi[$a]}else if(qt==="left"){S=[],ms=tt.length;for(var Yl=0;Yl<ms;Yl++)S.push(tt[Yl])}else if(qt==="justify"&&Gc.encoding==="Identity-H"){S=[],ms=tt.length,mn=mn!==0?mn:Ga;for(var Xl=0,Wr=0;Wr<ms;Wr++)if(ii=Wr===0?As(fe):-ta,Xs=Wr===0?mi(H):Xl,Wr<ms-1){var zu=X((mn-bi[Wr])/(tt[Wr].split(" ").length-1)),_a=tt[Wr].split(" ");S.push([_a[0]+" ",Xs,ii]),Xl=0;for(var Sa=1;Sa<_a.length;Sa++){var Ts=(To(_a[Sa-1]+" "+_a[Sa])-To(_a[Sa]))*Ji+zu;Sa==_a.length-1?S.push([_a[Sa],Ts,0]):S.push([_a[Sa]+" ",Ts,0]),Xl-=Ts}}else S.push([tt[Wr],Xs,ii]);S.push(["",Xl,0])}else{if(qt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],ms=tt.length,mn=mn!==0?mn:Ga,Wr=0;Wr<ms;Wr++){ii=Wr===0?As(fe):-ta,Xs=Wr===0?mi(H):0;var Ya=tt[Wr].split(" ").length-1,Zl=Ya>0?(mn-bi[Wr])/Ya:0;Wr<ms-1?na.push(L(X(Zl))):na.push(0),S.push([tt[Wr],Xs,ii])}}}(typeof ge.R2L=="boolean"?ge.R2L:ht)===!0&&(S=Wl(S,function($n,Vn,cr){return[$n.split("").reverse().join(""),Vn,cr]})),Ge={text:S,x:H,y:fe,options:ge,mutex:{pdfEscape:Wn,activeFontKey:pt,fonts:He,activeFontSize:De}},zt.publish("postProcessText",Ge),S=Ge.text,Zr=Ge.mutex.isHex||!1;var Kl=He[pt].encoding;Kl!=="WinAnsiEncoding"&&Kl!=="StandardEncoding"||(S=Wl(S,function($n,Vn,cr){return[Ua($n),Vn,cr]})),tt=Hc(S),S=[];for(var Xa,Za,Na,ll=Array.isArray(tt[0])?1:0,vi="",Ka=function($n,Vn,cr){var Gr="";return cr instanceof it?(cr=typeof ge.angle=="number"?Te(cr,new it(1,0,0,1,$n,Vn)):Te(new it(1,0,0,1,$n,Vn),cr),V===R&&(cr=Te(new it(1,0,0,-1,0,0),cr)),Gr=cr.join(" ")+` Tm
`):Gr=L($n)+" "+L(Vn)+` Td
`,Gr},Vs=0;Vs<tt.length;Vs++){switch(vi="",ll){case 1:Na=(Zr?"<":"(")+tt[Vs][0]+(Zr?">":")"),Xa=parseFloat(tt[Vs][1]),Za=parseFloat(tt[Vs][2]);break;case 0:Na=(Zr?"<":"(")+tt[Vs]+(Zr?">":")"),Xa=mi(H),Za=As(fe)}na!==void 0&&na[Vs]!==void 0&&(vi=na[Vs]+` Tw
`),Vs===0?S.push(vi+Ka(Xa,Za,Hr)+Na):ll===0?S.push(vi+Na):ll===1&&S.push(vi+Ka(Xa,Za,Hr)+Na)}S=ll===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var ki=`BT
/`;return ki+=pt+" "+De+` Tf
`,ki+=L(De*qa)+` TL
`,ki+=ga+`
`,ki+=Cs,ki+=S,G(ki+="ET"),_[pt]=!0,lr};var el=b.__private__.clip=b.clip=function(S){return G(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return el("evenodd")},b.__private__.discardPath=b.discardPath=function(){return G("n"),this};var $s=b.__private__.isValidStyle=function(S){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(H=!0),H};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return $s(S)&&(f=S),this};var Vc=b.__private__.getStyle=b.getStyle=function(S){var H=f;switch(S){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=S}return H},Fc=b.close=function(){return G("h"),this};b.stroke=function(){return G("S"),this},b.fill=function(S){return Ki("f",S),this},b.fillEvenOdd=function(S){return Ki("f*",S),this},b.fillStroke=function(S){return Ki("B",S),this},b.fillStrokeEvenOdd=function(S){return Ki("B*",S),this};var Ki=function(S,H){ar(H)==="object"?Du(H,S):G(S)},tl=function(S){S===null||V===R&&S===void 0||(S=Vc(S),G(S))};function Ou(S,H,fe,ge,Se){var Ge=new Mh(H||this.boundingBox,fe||this.xStep,ge||this.yStep,this.gState,Se||this.matrix);Ge.stream=this.stream;var tt=S+"$$"+this.cloneIndex+++"$$";return St(tt,Ge),Ge}var Du=function(S,H){var fe=ln[S.key],ge=ot[fe];if(ge instanceof fu)G("q"),G(Bc(H)),ge.gState&&b.setGState(ge.gState),G(S.matrix.toString()+" cm"),G("/"+fe+" sh"),G("Q");else if(ge instanceof Mh){var Se=new it(1,0,0,-1,0,za());S.matrix&&(Se=Se.multiply(S.matrix||_t),fe=Ou.call(ge,S.key,S.boundingBox,S.xStep,S.yStep,Se).id),G("q"),G("/Pattern cs"),G("/"+fe+" scn"),ge.gState&&b.setGState(ge.gState),G(H),G("Q")}},Bc=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pc=b.moveTo=function(S,H){return G(L(X(S))+" "+L(P(H))+" m"),this},Ru=b.lineTo=function(S,H){return G(L(X(S))+" "+L(P(H))+" l"),this},si=b.curveTo=function(S,H,fe,ge,Se,Ge){return G([L(X(S)),L(P(H)),L(X(fe)),L(P(ge)),L(X(Se)),L(P(Ge)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,H,fe,ge,Se){if(isNaN(S)||isNaN(H)||isNaN(fe)||isNaN(ge)||!$s(Se))throw new Error("Invalid arguments passed to jsPDF.line");return V===O?this.lines([[fe-S,ge-H]],S,H,[1,1],Se||"S"):this.lines([[fe-S,ge-H]],S,H,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,H,fe,ge,Se,Ge){var tt,Ot,qt,rn,mn,In,Ar,Hr,lr,is,Zr,Cs;if(typeof S=="number"&&(Cs=fe,fe=H,H=S,S=Cs),ge=ge||[1,1],Ge=Ge||!1,isNaN(H)||isNaN(fe)||!Array.isArray(S)||!Array.isArray(ge)||!$s(Se)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pc(H,fe),tt=ge[0],Ot=ge[1],rn=S.length,is=H,Zr=fe,qt=0;qt<rn;qt++)(mn=S[qt]).length===2?(is=mn[0]*tt+is,Zr=mn[1]*Ot+Zr,Ru(is,Zr)):(In=mn[0]*tt+is,Ar=mn[1]*Ot+Zr,Hr=mn[2]*tt+is,lr=mn[3]*Ot+Zr,is=mn[4]*tt+is,Zr=mn[5]*Ot+Zr,si(In,Ar,Hr,lr,is,Zr));return Ge&&Fc(),tl(Se),this},b.path=function(S){for(var H=0;H<S.length;H++){var fe=S[H],ge=fe.c;switch(fe.op){case"m":Pc(ge[0],ge[1]);break;case"l":Ru(ge[0],ge[1]);break;case"c":si.apply(this,ge);break;case"h":Fc()}}return this},b.__private__.rect=b.rect=function(S,H,fe,ge,Se){if(isNaN(S)||isNaN(H)||isNaN(fe)||isNaN(ge)||!$s(Se))throw new Error("Invalid arguments passed to jsPDF.rect");return V===O&&(ge=-ge),G([L(X(S)),L(P(H)),L(X(fe)),L(X(ge)),"re"].join(" ")),tl(Se),this},b.__private__.triangle=b.triangle=function(S,H,fe,ge,Se,Ge,tt){if(isNaN(S)||isNaN(H)||isNaN(fe)||isNaN(ge)||isNaN(Se)||isNaN(Ge)||!$s(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[fe-S,ge-H],[Se-fe,Ge-ge],[S-Se,H-Ge]],S,H,[1,1],tt,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,H,fe,ge,Se,Ge,tt){if(isNaN(S)||isNaN(H)||isNaN(fe)||isNaN(ge)||isNaN(Se)||isNaN(Ge)||!$s(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ot=4/3*(Math.SQRT2-1);return Se=Math.min(Se,.5*fe),Ge=Math.min(Ge,.5*ge),this.lines([[fe-2*Se,0],[Se*Ot,0,Se,Ge-Ge*Ot,Se,Ge],[0,ge-2*Ge],[0,Ge*Ot,-Se*Ot,Ge,-Se,Ge],[2*Se-fe,0],[-Se*Ot,0,-Se,-Ge*Ot,-Se,-Ge],[0,2*Ge-ge],[0,-Ge*Ot,Se*Ot,-Ge,Se,-Ge]],S+Se,H,[1,1],tt,!0),this},b.__private__.ellipse=b.ellipse=function(S,H,fe,ge,Se){if(isNaN(S)||isNaN(H)||isNaN(fe)||isNaN(ge)||!$s(Se))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*fe,tt=4/3*(Math.SQRT2-1)*ge;return Pc(S+fe,H),si(S+fe,H-tt,S+Ge,H-ge,S,H-ge),si(S-Ge,H-ge,S-fe,H-tt,S-fe,H),si(S-fe,H+tt,S-Ge,H+ge,S,H+ge),si(S+Ge,H+ge,S+fe,H+tt,S+fe,H),tl(Se),this},b.__private__.circle=b.circle=function(S,H,fe,ge){if(isNaN(S)||isNaN(H)||isNaN(fe)||!$s(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,H,fe,fe,ge)},b.setFont=function(S,H,fe){return fe&&(H=z(H,fe)),pt=fs(S,H,{disableWarning:!1}),this};var Qi=b.__private__.getFont=b.getFont=function(){return He[fs.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,H,fe={};for(S in ut)if(ut.hasOwnProperty(S))for(H in fe[S]=[],ut[S])ut[S].hasOwnProperty(H)&&fe[S].push(H);return fe},b.addFont=function(S,H,fe,ge,Se){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Se=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(fe=z(fe,ge)),Hn.call(this,S,H,fe,Se=Se||"Identity-H")};var Ra,nl=n.lineWidth||.200025,No=b.__private__.getLineWidth=b.getLineWidth=function(){return nl},Jt=b.__private__.setLineWidth=b.setLineWidth=function(S){return nl=S,G(L(X(S))+" w"),this};b.__private__.setLineDash=$t.API.setLineDash=$t.API.setLineDashPattern=function(S,H){if(S=S||[],H=H||0,isNaN(H)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(fe){return L(X(fe))}).join(" "),H=L(X(H)),G("["+S+"] "+H+" d"),this};var Iu=b.__private__.getLineHeight=b.getLineHeight=function(){return De*Ra};b.__private__.getLineHeight=b.getLineHeight=function(){return De*Ra};var zc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Ra=S),this},Vu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Ra};zc(n.lineHeight);var mi=b.__private__.getHorizontalCoordinate=function(S){return X(S)},As=b.__private__.getVerticalCoordinate=function(S){return V===R?S:gt[$].mediaBox.topRightY-gt[$].mediaBox.bottomLeftY-X(S)},qc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return L(mi(S))},rl=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return L(As(S))},gi=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Sn(gi)},b.__private__.setStrokeColor=b.setDrawColor=function(S,H,fe,ge){return gi=tr({ch1:S,ch2:H,ch3:fe,ch4:ge,pdfColorType:"draw",precision:2}),G(gi),this};var sl=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Sn(sl)},b.__private__.setFillColor=b.setFillColor=function(S,H,fe,ge){return sl=tr({ch1:S,ch2:H,ch3:fe,ch4:ge,pdfColorType:"fill",precision:2}),G(sl),this};var ga=n.textColor||"0 g",Fu=b.__private__.getTextColor=b.getTextColor=function(){return Sn(ga)};b.__private__.setTextColor=b.setTextColor=function(S,H,fe,ge){return ga=tr({ch1:S,ch2:H,ch3:fe,ch4:ge,pdfColorType:"text",precision:3}),this};var Ci=n.charSpace,ql=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ci||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ci=S,this};var Ul=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var H=b.CapJoinStyles[S];if(H===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ul=H,G(H+" J"),this};var ps=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var H=b.CapJoinStyles[S];if(H===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ps=H,G(H+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(L(X(S))+" M"),this},b.GState=Rp,b.setGState=function(S){(S=typeof S=="string"?Et[Bt[S]]:ba(null,S)).equals(pn)||(G("/"+S.id+" gs"),pn=S)};var ba=function(S,H){if(!S||!Bt[S]){var fe=!1;for(var ge in Et)if(Et.hasOwnProperty(ge)&&Et[ge].equals(H)){fe=!0;break}if(fe)H=Et[ge];else{var Se="GS"+(Object.keys(Et).length+1).toString(10);Et[Se]=H,H.id=Se}return S&&(Bt[S]=H.id),zt.publish("addGState",H),H}};b.addGState=function(S,H){return ba(S,H),this},b.saveGraphicsState=function(){return G("q"),vt.push({key:pt,size:De,color:ga}),this},b.restoreGraphicsState=function(){G("Q");var S=vt.pop();return pt=S.key,De=S.size,ga=S.color,pn=null,this},b.setCurrentTransformationMatrix=function(S){return G(S.toString()+" cm"),this},b.comment=function(S){return G("#"+S),this};var Ti=function(S,H){var fe=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return fe},set:function(Ge){isNaN(Ge)||(fe=parseFloat(Ge))}});var ge=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Ge){isNaN(Ge)||(ge=parseFloat(Ge))}});var Se="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Se},set:function(Ge){Se=Ge.toString()}}),this},Ia=function(S,H,fe,ge){Ti.call(this,S,H),this.type="rect";var Se=fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Se},set:function(tt){isNaN(tt)||(Se=parseFloat(tt))}});var Ge=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(tt){isNaN(tt)||(Ge=parseFloat(tt))}}),this},Hl=function(){this.page=Tt,this.currentPage=$,this.pages=Ve.slice(0),this.pagesContext=gt.slice(0),this.x=je,this.y=ft,this.matrix=ct,this.width=Fa($),this.height=Uc($),this.outputDestination=Je,this.id="",this.objectNumber=-1};Hl.prototype.restore=function(){Tt=this.page,$=this.currentPage,gt=this.pagesContext,Ve=this.pages,je=this.x,ft=this.y,ct=this.matrix,al($,this.width),Ba($,this.height),Je=this.outputDestination};var il=function(S,H,fe,ge,Se){Rt.push(new Hl),Tt=$=0,Ve=[],je=S,ft=H,ct=Se,dn([fe,ge])};for(var Va in b.beginFormObject=function(S,H,fe,ge,Se){return il(S,H,fe,ge,Se),this},b.endFormObject=function(S){return(function(H){if(yt[H])Rt.pop().restore();else{var fe=new Hl,ge="Xo"+(Object.keys(Me).length+1).toString(10);fe.id=ge,yt[H]=ge,Me[ge]=fe,zt.publish("addFormObject",fe),Rt.pop().restore()}})(S),this},b.doFormObject=function(S,H){var fe=Me[yt[S]];return G("q"),G(H.toString()+" cm"),G("/"+fe.id+" Do"),G("Q"),this},b.getFormObject=function(S){var H=Me[yt[S]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},b.save=function(S,H){return S=S||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(hu(pi(Ns()),S),typeof hu.unload=="function"&&hn.setTimeout&&setTimeout(hu.unload,911),this):new Promise(function(fe,ge){try{var Se=hu(pi(Ns()),S);typeof hu.unload=="function"&&hn.setTimeout&&setTimeout(hu.unload,911),fe(Se)}catch(Ge){ge(Ge.message)}})},$t.API)$t.API.hasOwnProperty(Va)&&(Va==="events"&&$t.API.events.length?(function(S,H){var fe,ge,Se;for(Se=H.length-1;Se!==-1;Se--)fe=H[Se][0],ge=H[Se][1],S.subscribe.apply(S,[fe].concat(typeof ge=="function"?[ge]:ge))})(zt,$t.API.events):b[Va]=$t.API[Va]);function Fa(S){return gt[S].mediaBox.topRightX-gt[S].mediaBox.bottomLeftX}function al(S,H){gt[S].mediaBox.topRightX=H+gt[S].mediaBox.bottomLeftX}function Uc(S){return gt[S].mediaBox.topRightY-gt[S].mediaBox.bottomLeftY}function Ba(S,H){gt[S].mediaBox.topRightY=H+gt[S].mediaBox.bottomLeftY}var Pa=b.getPageWidth=function(S){return Fa(S=S||$)/Nt},Bu=b.setPageWidth=function(S,H){al(S,H*Nt)},za=b.getPageHeight=function(S){return Uc(S=S||$)/Nt},Pu=b.setPageHeight=function(S,H){Ba(S,H*Nt)};return b.internal={pdfEscape:Wn,getStyle:Vc,getFont:Qi,getFontSize:Ue,getCharSpace:ql,getTextColor:Fu,getLineHeight:Iu,getLineHeightFactor:Vu,getLineWidth:No,write:Ee,getHorizontalCoordinate:mi,getVerticalCoordinate:As,getCoordinateString:qc,getVerticalCoordinateString:rl,collections:{},newObject:Ct,newAdditionalObject:nr,newObjectDeferred:Qt,newObjectDeferredBegin:cn,getFilters:Ln,putStream:gr,events:zt,scaleFactor:Nt,pageSize:{getWidth:function(){return Pa($)},setWidth:function(S){Bu($,S)},getHeight:function(){return za($)},setHeight:function(S){Pu($,S)}},encryptionOptions:p,encryption:Ur,getEncryptor:function(S){return p!==null?Ur.encryptor(S,0):function(H){return H}},output:Zi,getNumberOfPages:ds,get pages(){return Ve},out:G,f2:j,f3:I,getPageInfo:Rr,getPageInfoByObjId:So,getCurrentPageInfo:zl,getPDFVersion:A,Point:Ti,Rectangle:Ia,Matrix:it,hasHotfix:Xr},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Pa($)},set:function(S){Bu($,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return za($)},set:function(S){Pu($,S)},enumerable:!0,configurable:!0}),(function(S){for(var H=0,fe=et.length;H<fe;H++){var ge=Hn.call(this,S[H][0],S[H][1],S[H][2],et[H][3],!0);y===!1&&(_[ge]=!0);var Se=S[H][0].split("-");on({id:ge,fontName:Se[0],fontStyle:Se[1]||""})}zt.publish("addFonts",{fonts:He,dictionary:ut})}).call(b,et),pt="F1",Kn(a,t),zt.publish("initialized"),b}Ah.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Ah.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ah.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ah.prototype.processOwnerPassword=function(n,e){return Vg(Ig(e).substr(0,5),n)},Ah.prototype.encryptor=function(n,e){var t=Ig(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Vg(t,s)}},Rp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ar(n)!==ar(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},$t.API={events:[]},$t.version="3.0.4";var rs=$t.API,K2=1,Lu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_h=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vn=function(n){return n.toFixed(2)},Sc=function(n){return n.toFixed(5)};rs.__acroform__={};var Yi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},yx=function(n){return n*K2},Uo=function(n){var e=new I4,t=Ft.internal.getHeight(n)||0,s=Ft.internal.getWidth(n)||0;return e.BBox=[0,0,Number(vn(s)),Number(vn(t))],e},FL=rs.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},BL=rs.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},PL=rs.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ls=rs.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return PL(n,e-1)},cs=rs.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return FL(n,e-1)},us=rs.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BL(n,e-1)},zL=rs.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],c=n[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=s(o+c)||0,h.upperRight_X=t(a+u)||0,h.upperRight_Y=s(o)||0,[Number(vn(h.lowerLeft_X)),Number(vn(h.lowerLeft_Y)),Number(vn(h.upperRight_X)),Number(vn(h.upperRight_Y))]},qL=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Fg(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+vn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Uo(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Fg=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(j){return j.split(`
`)}):a.map(function(j){return[j]});var o=t,u=Ft.internal.getHeight(n)||0;u=u<0?-u:u;var c=Ft.internal.getWidth(n)||0;c=c<0?-c:c;var h=function(j,I,X){if(j+1<a.length){var P=I+" "+a[j+1][0];return U1(P,n,X).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var f,p,y=U1("3",n,o).height,_=n.multiline?u-o:(u-y)/2,b=_+=2,N=0,A=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+U1(e,n,o=12).width+", FieldWidth:"+c+`
`;break}for(var C="",O=0,R=0;R<a.length;R++)if(a.hasOwnProperty(R)){var V=!1;if(a[R].length!==1&&k!==a[R].length-1){if((y+2)*(O+2)+2>u)continue e;C+=a[R][k],V=!0,A=R,R--}else{C=(C+=a[R][k]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var B=parseInt(R),U=h(B,C,o),z=R>=a.length-1;if(U&&!z){C+=" ",k=0;continue}if(U||z){if(z)A=B;else if(n.multiline&&(y+2)*(O+2)+2>u)continue e}else{if(!n.multiline||(y+2)*(O+2)+2>u)continue e;A=B}}for(var L="",F=N;F<=A;F++){var J=a[F];if(n.multiline){if(F===A){L+=J[k]+" ",k=(k+1)%J.length;continue}if(F===N){L+=J[J.length-1]+" ";continue}}L+=J[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,p=U1(L,n,o).width,n.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;default:f=2}e+=vn(f)+" "+vn(b)+` Td
`,e+="("+Lu(L)+`) Tj
`,e+=-vn(f)+` 0 Td
`,b=-(o+2),p=0,N=V?A:A+1,O++,C=""}break}return s.text=e,s.fontSize=o,s},U1=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},UL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},HL=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},WL=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(wo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(UL)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");K2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new V4,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&HL(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var c=s[u],h=[],f=c.Rect;if(c.Rect&&(c.Rect=zL(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Ft.createDefaultAppearanceStream(c),ar(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=qL(c);h.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var b=c.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var N=b[u];typeof N=="function"&&(N=N.call(a,c)),y+="/"+u+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=b)=="function"&&(N=N.call(a,c)),y+="/"+u+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:c.objId}),a.internal.out("endobj")}o&&(function(A,k){for(var C in A)if(A.hasOwnProperty(C)){var O=C,R=A[C];k.internal.newObjectDeferredBegin(R.objId,!0),ar(R)==="object"&&typeof R.putStream=="function"&&R.putStream(),delete A[O]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},R4=rs.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),ar(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Lu(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},eg=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Lu(s(n))+")"},Wo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wo.prototype.toString=function(){return this.objId+" 0 R"},Wo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Wo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:R4(a,this.objId,this.scope)}):a instanceof Wo?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var I4=function(){Wo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Yi(I4,Wo);var V4=function(){Wo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Lu(t(n))+")"}},set:function(t){n=t}})};Yi(V4,Wo);var wo=function n(){Wo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ls(e,3)},set:function(C){C?this.F=cs(e,3):this.F=us(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(C){s=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(C){s[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(C){s[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(C){s[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(C){s[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Ip)return;o="FieldObject"+n.FieldNum++}var C=function(O){return O};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Lu(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/K2:f},set:function(C){f=C}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(C){p=C}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Ip||this instanceof yu))return eg(y,this.objId,this.scope)},set:function(C){C=C.toString(),y=C}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Ws==0?eg(_,this.objId,this.scope):_},set:function(C){C=C.toString(),_=this instanceof Ws==0?C.substr(0,1)==="("?_h(C.substr(1,C.length-2)):_h(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ws==1?_h(_.substr(1,_.length-1)):_},set:function(C){C=C.toString(),_=this instanceof Ws==1?"/"+C:C}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ws==0?eg(b,this.objId,this.scope):b},set:function(C){C=C.toString(),b=this instanceof Ws==0?C.substr(0,1)==="("?_h(C.substr(1,C.length-2)):_h(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ws==1?_h(b.substr(1,b.length-1)):b},set:function(C){C=C.toString(),b=this instanceof Ws==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(C){C=!!C,A=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(C){N=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,1)},set:function(C){C?this.Ff=cs(this.Ff,1):this.Ff=us(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,2)},set:function(C){C?this.Ff=cs(this.Ff,2):this.Ff=us(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,3)},set:function(C){C?this.Ff=cs(this.Ff,3):this.Ff=us(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');k=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(k){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Yi(wo,Wo);var Fh=function(){wo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return R4(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,c){c||(c=1);for(var h,f=[];h=u.exec(o);)f.push(h[c]);return f})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,18)},set:function(t){t?this.Ff=cs(this.Ff,18):this.Ff=us(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=cs(this.Ff,19):this.Ff=us(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,20)},set:function(t){t?(this.Ff=cs(this.Ff,20),e.sort()):this.Ff=us(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,22)},set:function(t){t?this.Ff=cs(this.Ff,22):this.Ff=us(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,23)},set:function(t){t?this.Ff=cs(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,27)},set:function(t){t?this.Ff=cs(this.Ff,27):this.Ff=us(this.Ff,27)}}),this.hasAppearanceStream=!1};Yi(Fh,wo);var Bh=function(){Fh.call(this),this.fontName="helvetica",this.combo=!1};Yi(Bh,Fh);var Ph=function(){Bh.call(this),this.combo=!0};Yi(Ph,Bh);var J1=function(){Ph.call(this),this.edit=!0};Yi(J1,Ph);var Ws=function(){wo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,15)},set:function(t){t?this.Ff=cs(this.Ff,15):this.Ff=us(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,16)},set:function(t){t?this.Ff=cs(this.Ff,16):this.Ff=us(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,17)},set:function(t){t?this.Ff=cs(this.Ff,17):this.Ff=us(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,26)},set:function(t){t?this.Ff=cs(this.Ff,26):this.Ff=us(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Lu(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){ar(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Yi(Ws,wo);var ep=function(){Ws.call(this),this.pushButton=!0};Yi(ep,Ws);var zh=function(){Ws.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Yi(zh,Ws);var Ip=function(){var n,e;wo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Lu(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){ar(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ft.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yi(Ip,wo),zh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},zh.prototype.createOption=function(n){var e=new Ip;return e.Parent=this,e.optionName=n,this.Kids.push(e),GL.call(this.scope,e),e};var tp=function(){Ws.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ft.CheckBox.createAppearanceStream()};Yi(tp,Ws);var yu=function(){wo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,13)},set:function(e){e?this.Ff=cs(this.Ff,13):this.Ff=us(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,21)},set:function(e){e?this.Ff=cs(this.Ff,21):this.Ff=us(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,23)},set:function(e){e?this.Ff=cs(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,24)},set:function(e){e?this.Ff=cs(this.Ff,24):this.Ff=us(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,25)},set:function(e){e?this.Ff=cs(this.Ff,25):this.Ff=us(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,26)},set:function(e){e?this.Ff=cs(this.Ff,26):this.Ff=us(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yi(yu,wo);var np=function(){yu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,14)},set:function(n){n?this.Ff=cs(this.Ff,14):this.Ff=us(this.Ff,14)}}),this.password=!0};Yi(np,yu);var Ft={CheckBox:{createAppearanceStream:function(){return{N:{On:Ft.CheckBox.YesNormal},D:{On:Ft.CheckBox.YesPushDown,Off:Ft.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Fg(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+vn(Ft.internal.getWidth(n))+" "+vn(Ft.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+vn(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=Ft.internal.getHeight(n),u=Ft.internal.getWidth(n),c=Fg(n,n.caption);return a.push("1 g"),a.push("0 0 "+vn(u)+" "+vn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vn(u-1)+" "+vn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+vn(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vn(Ft.internal.getWidth(n))+" "+vn(Ft.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ft.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ft.RadioButton.Circle.YesNormal,e.D[n]=Ft.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Ft.internal.getWidth(n)<=Ft.internal.getHeight(n)?Ft.internal.getWidth(n)/4:Ft.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Ft.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Sc(Ft.internal.getWidth(n)/2)+" "+Sc(Ft.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Ft.internal.getWidth(n)<=Ft.internal.getHeight(n)?Ft.internal.getWidth(n)/4:Ft.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Ft.internal.Bezier_C).toFixed(5)),u=Number((s*Ft.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Sc(Ft.internal.getWidth(n)/2)+" "+Sc(Ft.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Sc(Ft.internal.getWidth(n)/2)+" "+Sc(Ft.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Ft.internal.getWidth(n)<=Ft.internal.getHeight(n)?Ft.internal.getWidth(n)/4:Ft.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Ft.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Sc(Ft.internal.getWidth(n)/2)+" "+Sc(Ft.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ft.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ft.RadioButton.Cross.YesNormal,e.D[n]=Ft.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Ft.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+vn(Ft.internal.getWidth(n)-2)+" "+vn(Ft.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(vn(s.x1.x)+" "+vn(s.x1.y)+" m"),t.push(vn(s.x2.x)+" "+vn(s.x2.y)+" l"),t.push(vn(s.x4.x)+" "+vn(s.x4.y)+" m"),t.push(vn(s.x3.x)+" "+vn(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=Ft.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+vn(Ft.internal.getWidth(n))+" "+vn(Ft.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+vn(Ft.internal.getWidth(n)-2)+" "+vn(Ft.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(vn(t.x1.x)+" "+vn(t.x1.y)+" m"),s.push(vn(t.x2.x)+" "+vn(t.x2.y)+" l"),s.push(vn(t.x4.x)+" "+vn(t.x4.y)+" m"),s.push(vn(t.x3.x)+" "+vn(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vn(Ft.internal.getWidth(n))+" "+vn(Ft.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ft.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ft.internal.getWidth(n),t=Ft.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},Ft.internal.getWidth=function(n){var e=0;return ar(n)==="object"&&(e=yx(n.Rect[2])),e},Ft.internal.getHeight=function(n){var e=0;return ar(n)==="object"&&(e=yx(n.Rect[3])),e};var GL=rs.addField=function(n){if(WL(this,n),!(n instanceof wo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};rs.AcroFormChoiceField=Fh,rs.AcroFormListBox=Bh,rs.AcroFormComboBox=Ph,rs.AcroFormEditBox=J1,rs.AcroFormButton=Ws,rs.AcroFormPushButton=ep,rs.AcroFormRadioButton=zh,rs.AcroFormCheckBox=tp,rs.AcroFormTextField=yu,rs.AcroFormPasswordField=np,rs.AcroFormAppearance=Ft,rs.AcroForm={ChoiceField:Fh,ListBox:Bh,ComboBox:Ph,EditBox:J1,Button:Ws,PushButton:ep,RadioButton:zh,CheckBox:tp,TextField:yu,PasswordField:np,Appearance:Ft},$t.AcroForm={ChoiceField:Fh,ListBox:Bh,ComboBox:Ph,EditBox:J1,Button:Ws,PushButton:ep,RadioButton:zh,CheckBox:tp,TextField:yu,PasswordField:np,Appearance:Ft};$t.AcroForm;function F4(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(j,I){var X,P,ie,Y,ne,le=t;if((I=I||t)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(U(j))for(ne in s)for(ie=s[ne],X=0;X<ie.length;X+=1){for(Y=!0,P=0;P<ie[X].length;P+=1)if(ie[X][P]!==void 0&&ie[X][P]!==j[P]){Y=!1;break}if(Y===!0){le=ne;break}}else for(ne in s)for(ie=s[ne],X=0;X<ie.length;X+=1){for(Y=!0,P=0;P<ie[X].length;P+=1)if(ie[X][P]!==void 0&&ie[X][P]!==j.charCodeAt(P)){Y=!1;break}if(Y===!0){le=ne;break}}return le===t&&I!==t&&(le=I),le},o=function j(I){for(var X=this.internal.write,P=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:I.width}),Y.push({key:"Height",value:I.height}),I.colorSpace===C.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===C.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var ne="",le=0,pe=I.transparency.length;le<pe;le++)ne+=I.transparency[le]+" "+I.transparency[le]+" ";Y.push({key:"Mask",value:"["+ne+"]"})}I.sMask!==void 0&&Y.push({key:"SMask",value:I.objectId+1+" 0 R"});var we=I.filter!==void 0?["/"+I.filter]:void 0;if(P({data:I.data,additionalKeyValues:Y,alreadyAppliedFilters:we,objectId:I.objectId}),X("endobj"),"sMask"in I&&I.sMask!==void 0){var q,E=(q=I.sMaskBitsPerComponent)!==null&&q!==void 0?q:I.bitsPerComponent,$={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:I.sMask};"filter"in I&&($.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(I.width),$.filter=I.filter),j.call(this,$)}if(I.colorSpace===C.INDEXED){var te=this.internal.newObject();P({data:L(new Uint8Array(I.palette)),objectId:te}),X("endobj")}},u=function(){var j=this.internal.collections[e+"images"];for(var I in j)o.call(this,j[I])},c=function(){var j,I=this.internal.collections[e+"images"],X=this.internal.write;for(var P in I)X("/I"+(j=I[P]).index,j.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var j=this.internal.collections[e+"images"];return h.call(this),j},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(j){return typeof n["process"+j.toUpperCase()]=="function"},_=function(j){return ar(j)==="object"&&j.nodeType===1},b=function(j,I){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var X=""+j.getAttribute("src");if(X.indexOf("data:image/")===0)return Q1(unescape(X).split("base64,").pop());var P=n.loadFile(X,!0);if(P!==void 0)return P}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ie;switch(I){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return Q1(j.toDataURL(ie,1).split("base64,").pop())}},N=function(j){var I=this.internal.collections[e+"images"];if(I){for(var X in I)if(j===I[X].alias)return I[X]}},A=function(j,I,X){return j||I||(j=-96,I=-96),j<0&&(j=-1*X.width*72/j/this.internal.scaleFactor),I<0&&(I=-1*X.height*72/I/this.internal.scaleFactor),j===0&&(j=I*X.width/X.height),I===0&&(I=j*X.height/X.width),[j,I]},k=function(j,I,X,P,ie,Y){var ne=A.call(this,X,P,ie),le=this.internal.getCoordinateString,pe=this.internal.getVerticalCoordinateString,we=f.call(this);if(X=ne[0],P=ne[1],we[ie.index]=ie,Y){Y*=Math.PI/180;var q=Math.cos(Y),E=Math.sin(Y),$=function(ae){return ae.toFixed(4)},te=[$(q),$(E),$(-1*E),$(q),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,le(j),pe(I+P),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([le(X),"0","0",le(P),"0","0","cm"].join(" "))):this.internal.write([le(X),"0","0",le(P),le(j),pe(I+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},C=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=n.__addimage__.sHashCode=function(j){var I,X,P=0;if(typeof j=="string")for(X=j.length,I=0;I<X;I++)P=(P<<5)-P+j.charCodeAt(I),P|=0;else if(U(j))for(X=j.byteLength/2,I=0;I<X;I++)P=(P<<5)-P+j[I],P|=0;return P},V=n.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var I=!0;return j.length===0&&(I=!1),j.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(I=!1),I},B=n.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var I=j.indexOf(",");return I<0?null:j.substring(0,I).trim().endsWith("base64")?j.substring(I+1):null};n.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var U=n.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},z=n.__addimage__.binaryStringToUint8Array=function(j){for(var I=j.length,X=new Uint8Array(I),P=0;P<I;P++)X[P]=j.charCodeAt(P);return X},L=n.__addimage__.arrayBufferToBinaryString=function(j){for(var I="",X=U(j)?j:new Uint8Array(j),P=0;P<X.length;P+=8192)I+=String.fromCharCode.apply(null,X.subarray(P,P+8192));return I};n.addImage=function(){var j,I,X,P,ie,Y,ne,le,pe;if(typeof arguments[1]=="number"?(I=t,X=arguments[1],P=arguments[2],ie=arguments[3],Y=arguments[4],ne=arguments[5],le=arguments[6],pe=arguments[7]):(I=arguments[1],X=arguments[2],P=arguments[3],ie=arguments[4],Y=arguments[5],ne=arguments[6],le=arguments[7],pe=arguments[8]),ar(j=arguments[0])==="object"&&!_(j)&&"imageData"in j){var we=j;j=we.imageData,I=we.format||I||t,X=we.x||X||0,P=we.y||P||0,ie=we.w||we.width||ie,Y=we.h||we.height||Y,ne=we.alias||ne,le=we.compression||le,pe=we.rotation||we.angle||pe}var q=this.internal.getFilters();if(le===void 0&&q.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(X)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var E=F.call(this,j,I,ne,le);return k.call(this,X,P,ie,Y,E,pe),this};var F=function(j,I,X,P){var ie,Y,ne;if(typeof j=="string"&&a(j)===t){j=unescape(j);var le=J(j,!1);(le!==""||(le=n.loadFile(j,!0))!==void 0)&&(j=le)}if(_(j)&&(j=b(j,I)),I=a(j,I),!y(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ne=X)==null||ne.length===0)&&(X=(function(pe){return typeof pe=="string"||U(pe)?R(pe):U(pe.data)?R(pe.data):null})(j)),(ie=N.call(this,X))||(j instanceof Uint8Array||I==="RGBA"||(Y=j,j=z(j)),ie=this["process"+I.toUpperCase()](j,p.call(this),X,(function(pe){return pe&&typeof pe=="string"&&(pe=pe.toUpperCase()),pe in n.image_compression?pe:O.NONE})(P),Y)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},J=n.__addimage__.convertBase64ToBinaryString=function(j,I){I=typeof I!="boolean"||I;var X,P="";if(typeof j=="string"){var ie;X=(ie=B(j))!==null&&ie!==void 0?ie:j;try{P=Q1(X)}catch(Y){if(I)throw V(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return P};n.getImageProperties=function(j){var I,X,P="";if(_(j)&&(j=b(j)),typeof j=="string"&&a(j)===t&&((P=J(j,!1))===""&&(P=n.loadFile(j)||""),j=P),X=a(j),!y(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(j instanceof Uint8Array||(j=z(j)),!(I=this["process"+X.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=X,I}})($t.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};$t.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,y=0;y<f.length&&!p;y++)switch((s=f[y]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<f.length;_++){s=f[_];var b=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(A.objId),O=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+b(C(s.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+b(C(O))+") >>",A.content=o;var R=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+R,s.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(A.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var V=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(N(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var B=this.annotations._nameMap[s.options.name];s.options.pageNumber=B.page,s.options.top=B.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(N(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var U=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+U+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(t),y:f(s),w:h(t+a),h:f(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,c,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(t,c).length;u=Math.ceil(f*p)}else c=h,u=f;return this.text(t,s,a,o),a+=.2*f,o.align==="center"&&(s-=h/2),o.align==="right"&&(s-=h),this.link(s,a-f,c,u,o),h},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})($t.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},c=n.__arabicParser__.isArabicEndLetter=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(A){return u(A)&&a.indexOf(A.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(A){var k=0,C=t,O="",R=0;for(k=0;k<A.length;k+=1)C[A.charCodeAt(k)]!==void 0?(R++,typeof(C=C[A.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(C),C=t,R=0),k===A.length-1&&(C=t,O+=A.charAt(k-(R-1)),k-=R-1,R=0)):(C=t,O+=A.charAt(k-R),k-=R,R=0);return O};n.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&s[A.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(A,k,C){return u(A)?o(A)===!1?-1:!f(A)||!u(k)&&!u(C)||!u(C)&&c(k)||c(A)&&!u(k)||c(A)&&h(k)||c(A)&&c(k)?0:p(A)&&u(k)&&!c(k)&&u(C)&&f(C)?3:c(A)||!u(C)?1:2:-1},b=function(A){var k=0,C=0,O=0,R="",V="",B="",U=(A=A||"").split("\\s+"),z=[];for(k=0;k<U.length;k+=1){for(z.push(""),C=0;C<U[k].length;C+=1)R=U[k][C],V=U[k][C-1],B=U[k][C+1],u(R)?(O=_(R,V,B),z[k]+=O!==-1?String.fromCharCode(e[R.charCodeAt(0)][O]):R):z[k]+=R;z[k]=y(z[k])}return z.join(" ")},N=n.__arabicParser__.processArabic=n.processArabic=function(){var A,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(k)){var O=0;for(C=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?C.push([b(k[O][0]),k[O][1],k[O][2]]):C.push([b(k[O])]);A=C}else A=b(k);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};n.events.push(["preProcessText",N])})($t.API),$t.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})($t.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(A){h=A}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(A){f=A}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(A){p=A}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(A){_=A}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(A){b=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return s.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){s.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),_=f.scaleFactor||this.internal.scaleFactor,b=0,N=0,A=0,k=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var C=f.maxWidth;C>0?typeof h=="string"?h=this.splitTextToSize(h,C):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(R,V){return R.concat(k.splitTextToSize(V,C))},[])):h=Array.isArray(h)?h:[h];for(var O=0;O<h.length;O++)b<(A=this.getStringUnitWidth(h[O],{font:y})*p)&&(b=A);return b!==0&&(N=h.length),{w:b/=_,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,y,_){if(s.call(this),!p)throw new Error("No data for PDF table.");var b,N,A,k,C=[],O=[],R=[],V={},B={},U=[],z=[],L=(_=_||{}).autoSize||!1,F=_.printHeaders!==!1,J=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,j=_.margins||Object.assign({width:this.getPageWidth()},e),I=typeof _.padding=="number"?_.padding:3,X=_.headerBackgroundColor||"#c8c8c8",P=_.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=P,this.setFontSize(J),y==null)O=C=Object.keys(p[0]),R=C.map(function(){return"left"});else if(Array.isArray(y)&&ar(y[0])==="object")for(C=y.map(function(we){return we.name}),O=y.map(function(we){return we.prompt||we.name||""}),R=y.map(function(we){return we.align||"left"}),b=0;b<y.length;b+=1)B[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(O=C=y,R=C.map(function(){return"left"}));if(L||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<C.length;b+=1){for(V[k=C[b]]=p.map(function(we){return we[k]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(O[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=V[k],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)U.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[k]=Math.max.apply(null,U)+I+I,U=[]}if(F){var ie={};for(b=0;b<C.length;b+=1)ie[C[b]]={},ie[C[b]].text=O[b],ie[C[b]].align=R[b];var Y=c.call(this,ie,B);z=C.map(function(we){return new o(h,f,B[we],Y,ie[we].text,void 0,ie[we].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var ne=y.reduce(function(we,q){return we[q.name]=q.align,we},{});for(b=0;b<p.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:p[b]},this);var le=c.call(this,p[b],B);for(A=0;A<C.length;A+=1){var pe=p[b][C[A]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:A,data:pe},this),u.call(this,new o(h,f,B[C[A]],le,pe,b+2,ne[C[A]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var c=function(h,f){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(b){var N=h[b];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+p+p},this).reduce(function(b,N){return Math.max(b,N)},0)};n.setTableHeaderRow=function(h){s.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=h;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,p),this.setTextColor(N)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})($t.API);var B4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},P4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bg=F4(P4),z4=[100,200,300,400,500,600,700,800,900],$L=F4(z4);function tg(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return B4[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Bg[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function xx(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var YL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _x(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Sx(n){return n.trimLeft()}function XL(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function ZL(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var H1,Nx,Ax,Sh,W1,Cx,Tx,kx,ng=["times"];function jx(n,e,t,s,a){var o=4,u=Mx;switch(a){case $t.API.image_compression.FAST:o=1,u=Ex;break;case $t.API.image_compression.MEDIUM:o=6,u=Lx;break;case $t.API.image_compression.SLOW:o=9,u=Ox}n=(function(h,f,p,y){for(var _,b=h.length/f,N=new Uint8Array(h.length+b),A=[KL,Ex,Mx,Lx,Ox],k=0;k<b;k+=1){var C=k*f,O=h.subarray(C,C+f);if(y)N.set(y(O,p,_),C+k);else{for(var R=A.length,V=[],B=0;B<R;B+=1)V[B]=A[B](O,p,_);var U=JL(V.concat());N.set(V[U],C+k)}_=O}return N})(n,e,Math.ceil(t*s/8),u);var c=Lg(n,{level:o});return $t.API.__addimage__.arrayBufferToBinaryString(c)}function KL(n){var e=Array.apply([],n);return e.unshift(0),e}function Ex(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function Mx(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function Lx(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,c=t&&t[o]||0;a[o+1]=n[o]+256-(u+c>>>1)&255}return a}function Ox(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=QL(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function QL(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function JL(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function rg(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return q4(n,a)>>o&u}function Dx(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),c=(1<<s)-1,h=(e&c)<<u;(function(f,p,y){if(p+1<f.byteLength)f.setUint16(p,y,!1);else{var _=y>>8&255;f.setUint8(p,_)}})(n,o,q4(n,o)&~(c<<u)&65535|h)}function q4(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function eO(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var c=null,h=null;o&&(c=e,h=u,e+=3*u);var f=!0,p=[],y=0,_=null,b=0,N=null;for(this.width=t,this.height=s;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,N=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=n[e++];y=n[e++]|n[e++]<<8,_=n[e++],1&A||(_=null),b=A>>2&7,e++;break;case 254:for(;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,O=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,V=n[e++],B=V>>6&1,U=1<<1+(7&V),z=c,L=h,F=!1;V>>7&&(F=!0,z=e,L=U,e+=3*U);var J=e;for(e++;;){var j;if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}p.push({x:k,y:C,width:O,height:R,has_local_palette:F,palette_offset:z,palette_size:L,data_offset:J,data_length:e-J,transparent_index:_,interlaced:!!B,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(I){if(I<0||I>=p.length)throw new Error("Frame index out of range.");return p[I]},this.decodeAndBlitFrameBGRA=function(I,X){var P=this.frameInfo(I),ie=P.width*P.height,Y=new Uint8Array(ie);Rx(n,P.data_offset,Y,ie);var ne=P.palette_offset,le=P.transparent_index;le===null&&(le=256);var pe=P.width,we=t-pe,q=pe,E=4*(P.y*t+P.x),$=4*((P.y+P.height)*t+P.x),te=E,ae=4*we;P.interlaced===!0&&(ae+=4*t*7);for(var re=8,de=0,ce=Y.length;de<ce;++de){var ve=Y[de];if(q===0&&(q=pe,(te+=ae)>=$&&(ae=4*we+4*t*(re-1),te=E+(pe+we)*(re<<1),re>>=1)),ve===le)te+=4;else{var _e=n[ne+3*ve],Ve=n[ne+3*ve+1],Xe=n[ne+3*ve+2];X[te++]=Xe,X[te++]=Ve,X[te++]=_e,X[te++]=255}--q}},this.decodeAndBlitFrameRGBA=function(I,X){var P=this.frameInfo(I),ie=P.width*P.height,Y=new Uint8Array(ie);Rx(n,P.data_offset,Y,ie);var ne=P.palette_offset,le=P.transparent_index;le===null&&(le=256);var pe=P.width,we=t-pe,q=pe,E=4*(P.y*t+P.x),$=4*((P.y+P.height)*t+P.x),te=E,ae=4*we;P.interlaced===!0&&(ae+=4*t*7);for(var re=8,de=0,ce=Y.length;de<ce;++de){var ve=Y[de];if(q===0&&(q=pe,(te+=ae)>=$&&(ae=4*we+4*t*(re-1),te=E+(pe+we)*(re<<1),re>>=1)),ve===le)te+=4;else{var _e=n[ne+3*ve],Ve=n[ne+3*ve+1],Xe=n[ne+3*ve+2];X[te++]=_e,X[te++]=Ve,X[te++]=Xe,X[te++]=255}--q}}}function Rx(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,c=u+1,h=a+1,f=(1<<h)-1,p=0,y=0,_=0,b=n[e++],N=new Int32Array(4096),A=null;;){for(;p<16&&b!==0;)y|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<h)break;var k=y&f;if(y>>=h,p-=h,k!==o){if(k===u)break;for(var C=k<c?k:A,O=0,R=C;R>o;)R=N[R]>>8,++O;var V=R;if(_+O+(C!==k?1:0)>s)return void xr.log("Warning, gif stream longer than expected.");t[_++]=V;var B=_+=O;for(C!==k&&(t[_++]=V),R=C;O--;)R=N[R],t[--B]=255&R,R>>=8;A!==null&&c<4096&&(N[c++]=A<<8|V,c>=f+1&&h<12&&(++h,f=f<<1|1)),A=k}else c=u+1,f=(1<<(h=a+1))-1,A=null}return _!==s&&xr.log("Warning, gif stream shorter than expected."),t}function sg(n){var e,t,s,a,o,u=Math.floor,c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),N=new Array(64),A=[],k=0,C=7,O=new Array(64),R=new Array(64),V=new Array(64),B=new Array(256),U=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(E,$){for(var te=0,ae=0,re=new Array,de=1;de<=16;de++){for(var ce=1;ce<=E[de];ce++)re[$[ae]]=[],re[$[ae]][0]=te,re[$[ae]][1]=de,ae++,te++;te*=2}return re}function ne(E){for(var $=E[0],te=E[1]-1;te>=0;)$&1<<te&&(k|=1<<C),te--,--C<0&&(k==255?(le(255),le(0)):le(k),C=7,k=0)}function le(E){A.push(E)}function pe(E){le(E>>8&255),le(255&E)}function we(E,$,te,ae,re){for(var de,ce=re[0],ve=re[240],_e=(function(De,rt){var Ue,ht,Ae,Ke,bt,mt,st,dt,pt,Nt,je=0;for(pt=0;pt<8;++pt){Ue=De[je],ht=De[je+1],Ae=De[je+2],Ke=De[je+3],bt=De[je+4],mt=De[je+5],st=De[je+6];var ft=Ue+(dt=De[je+7]),ct=Ue-dt,He=ht+st,ut=ht-st,vt=Ae+mt,ot=Ae-mt,ln=Ke+bt,Et=Ke-bt,Bt=ft+ln,pn=ft-ln,Tt=He+vt,gt=He-vt;De[je]=Bt+Tt,De[je+4]=Bt-Tt;var zt=.707106781*(gt+pn);De[je+2]=pn+zt,De[je+6]=pn-zt;var wn=.382683433*((Bt=Et+ot)-(gt=ut+ct)),Me=.5411961*Bt+wn,yt=1.306562965*gt+wn,Rt=.707106781*(Tt=ot+ut),it=ct+Rt,Te=ct-Rt;De[je+5]=Te+Me,De[je+3]=Te-Me,De[je+1]=it+yt,De[je+7]=it-yt,je+=8}for(je=0,pt=0;pt<8;++pt){Ue=De[je],ht=De[je+8],Ae=De[je+16],Ke=De[je+24],bt=De[je+32],mt=De[je+40],st=De[je+48];var _t=Ue+(dt=De[je+56]),St=Ue-dt,Mt=ht+st,Ct=ht-st,Qt=Ae+mt,cn=Ae-mt,nr=Ke+bt,Pn=Ke-bt,yn=_t+nr,Sn=_t-nr,tr=Mt+Qt,Ln=Mt-Qt;De[je]=yn+tr,De[je+32]=yn-tr;var gr=.707106781*(Ln+Sn);De[je+16]=Sn+gr,De[je+48]=Sn-gr;var Le=.382683433*((yn=Pn+cn)-(Ln=Ct+St)),Be=.5411961*yn+Le,nt=1.306562965*Ln+Le,It=.707106781*(tr=cn+Ct),Gt=St+It,Ht=St-It;De[je+40]=Ht+Be,De[je+24]=Ht-Be,De[je+8]=Gt+nt,De[je+56]=Gt-nt,je++}for(pt=0;pt<64;++pt)Nt=De[pt]*rt[pt],b[pt]=Nt>0?Nt+.5|0:Nt-.5|0;return b})(E,$),Ve=0;Ve<64;++Ve)N[z[Ve]]=_e[Ve];var Xe=N[0]-te;te=N[0],Xe==0?ne(ae[0]):(ne(ae[_[de=32767+Xe]]),ne(y[de]));for(var Je=63;Je>0&&N[Je]==0;)Je--;if(Je==0)return ne(ce),te;for(var at,G=1;G<=Je;){for(var Ee=G;N[G]==0&&G<=Je;)++G;var xt=G-Ee;if(xt>=16){at=xt>>4;for(var et=1;et<=at;++et)ne(ve);xt&=15}de=32767+N[G],ne(re[(xt<<4)+_[de]]),ne(y[de]),G++}return Je!=63&&ne(ce),te}function q(E){E=Math.min(Math.max(E,1),100),o!=E&&((function($){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var re=u((te[ae]*$+50)/100);re=Math.min(Math.max(re,1),255),c[z[ae]]=re}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var ve=u((de[ce]*$+50)/100);ve=Math.min(Math.max(ve,1),255),h[z[ce]]=ve}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,Xe=0;Xe<8;Xe++)for(var Je=0;Je<8;Je++)f[Ve]=1/(c[z[Ve]]*_e[Xe]*_e[Je]*8),p[Ve]=1/(h[z[Ve]]*_e[Xe]*_e[Je]*8),Ve++})(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),o=E)}this.encode=function(E,$){$&&q($),A=new Array,k=0,C=7,pe(65496),pe(65504),pe(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),pe(1),pe(1),le(0),le(0),(function(){pe(65499),pe(132),le(0);for(var ht=0;ht<64;ht++)le(c[ht]);le(1);for(var Ae=0;Ae<64;Ae++)le(h[Ae])})(),(function(ht,Ae){pe(65472),pe(17),le(8),pe(Ae),pe(ht),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)})(E.width,E.height),(function(){pe(65476),pe(418),le(0);for(var ht=0;ht<16;ht++)le(L[ht+1]);for(var Ae=0;Ae<=11;Ae++)le(F[Ae]);le(16);for(var Ke=0;Ke<16;Ke++)le(J[Ke+1]);for(var bt=0;bt<=161;bt++)le(j[bt]);le(1);for(var mt=0;mt<16;mt++)le(I[mt+1]);for(var st=0;st<=11;st++)le(X[st]);le(17);for(var dt=0;dt<16;dt++)le(P[dt+1]);for(var pt=0;pt<=161;pt++)le(ie[pt])})(),pe(65498),pe(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var te=0,ae=0,re=0;k=0,C=7,this.encode.displayName="_encode_";for(var de,ce,ve,_e,Ve,Xe,Je,at,G,Ee=E.data,xt=E.width,et=E.height,De=4*xt,rt=0;rt<et;){for(de=0;de<De;){for(Ve=De*rt+de,Je=-1,at=0,G=0;G<64;G++)Xe=Ve+(at=G>>3)*De+(Je=4*(7&G)),rt+at>=et&&(Xe-=De*(rt+1+at-et)),de+Je>=De&&(Xe-=de+Je-De+4),ce=Ee[Xe++],ve=Ee[Xe++],_e=Ee[Xe++],O[G]=(U[ce]+U[ve+256|0]+U[_e+512|0]>>16)-128,R[G]=(U[ce+768|0]+U[ve+1024|0]+U[_e+1280|0]>>16)-128,V[G]=(U[ce+1280|0]+U[ve+1536|0]+U[_e+1792|0]>>16)-128;te=we(O,f,te,e,s),ae=we(R,p,ae,t,a),re=we(V,p,re,t,a),de+=32}rt+=8}if(C>=0){var Ue=[];Ue[1]=C+1,Ue[0]=(1<<C+1)-1,ne(Ue)}return pe(65497),new Uint8Array(A)},n=n||50,(function(){for(var E=String.fromCharCode,$=0;$<256;$++)B[$]=E($)})(),e=Y(L,F),t=Y(I,X),s=Y(J,j),a=Y(P,ie),(function(){for(var E=1,$=2,te=1;te<=15;te++){for(var ae=E;ae<$;ae++)_[32767+ae]=te,y[32767+ae]=[],y[32767+ae][1]=te,y[32767+ae][0]=ae;for(var re=-($-1);re<=-E;re++)_[32767+re]=te,y[32767+re]=[],y[32767+re][1]=te,y[32767+re][0]=$-1+re;E<<=1,$<<=1}})(),(function(){for(var E=0;E<256;E++)U[E]=19595*E,U[E+256|0]=38470*E,U[E+512|0]=7471*E+32768,U[E+768|0]=-11059*E,U[E+1024|0]=-21709*E,U[E+1280|0]=32768*E+8421375,U[E+1536|0]=-27439*E,U[E+1792|0]=-5329*E})(),q(n)}function ao(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ix(n){function e(F){if(!F)throw Error("assert :P")}function t(F,J,j){for(var I=0;4>I;I++)if(F[J+I]!=j.charCodeAt(I))return!0;return!1}function s(F,J,j,I,X){for(var P=0;P<X;P++)F[J+P]=j[I+P]}function a(F,J,j,I){for(var X=0;X<I;X++)F[J+X]=j}function o(F){return new Int32Array(F)}function u(F,J){for(var j=[],I=0;I<F;I++)j.push(new J);return j}function c(F,J){var j=[];return(function I(X,P,ie){for(var Y=ie[P],ne=0;ne<Y&&(X.push(ie.length>P+1?[]:new J),!(ie.length<P+1));ne++)I(X[ne],P+1,ie)})(j,0,F),j}var h=function(){var F=this;function J(g,x){for(var T=1<<x-1>>>0;g&T;)T>>>=1;return T?(g&T-1)+T:g}function j(g,x,T,M,W){e(!(M%T));do g[x+(M-=T)]=W;while(0<M)}function I(g,x,T,M,W){if(e(2328>=W),512>=W)var Z=o(512);else if((Z=o(W))==null)return 0;return(function(Q,se,oe,he,be,Oe){var ue,xe,Ce=se,qe=1<<oe,ke=o(16),ze=o(16);for(e(be!=0),e(he!=null),e(Q!=null),e(0<oe),xe=0;xe<be;++xe){if(15<he[xe])return 0;++ke[he[xe]]}if(ke[0]==be)return 0;for(ze[1]=0,ue=1;15>ue;++ue){if(ke[ue]>1<<ue)return 0;ze[ue+1]=ze[ue]+ke[ue]}for(xe=0;xe<be;++xe)ue=he[xe],0<he[xe]&&(Oe[ze[ue]++]=xe);if(ze[15]==1)return(he=new X).g=0,he.value=Oe[0],j(Q,Ce,1,qe,he),qe;var $e,lt=-1,Qe=qe-1,Vt=0,kt=1,un=1,Lt=1<<oe;for(xe=0,ue=1,be=2;ue<=oe;++ue,be<<=1){if(kt+=un<<=1,0>(un-=ke[ue]))return 0;for(;0<ke[ue];--ke[ue])(he=new X).g=ue,he.value=Oe[xe++],j(Q,Ce+Vt,be,Lt,he),Vt=J(Vt,ue)}for(ue=oe+1,be=2;15>=ue;++ue,be<<=1){if(kt+=un<<=1,0>(un-=ke[ue]))return 0;for(;0<ke[ue];--ke[ue]){if(he=new X,(Vt&Qe)!=lt){for(Ce+=Lt,$e=1<<(lt=ue)-oe;15>lt&&!(0>=($e-=ke[lt]));)++lt,$e<<=1;qe+=Lt=1<<($e=lt-oe),Q[se+(lt=Vt&Qe)].g=$e+oe,Q[se+lt].value=Ce-se-lt}he.g=ue-oe,he.value=Oe[xe++],j(Q,Ce+(Vt>>oe),be,Lt,he),Vt=J(Vt,ue)}}return kt!=2*ze[15]-1?0:qe})(g,x,T,M,W,Z)}function X(){this.value=this.g=0}function P(){this.value=this.g=0}function ie(){this.G=u(5,X),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(To,P)}function Y(g,x,T,M){e(g!=null),e(x!=null),e(2147483648>M),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=x,g.pa=T,g.Jd=x,g.Yc=T+M,g.Zc=4<=M?T+M-4+1:T,ce(g)}function ne(g,x){for(var T=0;0<x--;)T|=_e(g,128)<<x;return T}function le(g,x){var T=ne(g,x);return ve(g)?-T:T}function pe(g,x,T,M){var W,Z=0;for(e(g!=null),e(x!=null),e(4294967288>M),g.Sb=M,g.Ra=0,g.u=0,g.h=0,4<M&&(M=4),W=0;W<M;++W)Z+=x[T+W]<<8*W;g.Ra=Z,g.bb=M,g.oa=x,g.pa=T}function we(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<xa-8>>>0,++g.bb,g.u-=8;ae(g)&&(g.h=1,g.u=0)}function q(g,x){if(e(0<=x),!g.h&&x<=Xs){var T=te(g)&ii[x];return g.u+=x,we(g),T}return g.h=1,g.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(g){return g.Ra>>>(g.u&xa-1)>>>0}function ae(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>xa}function re(g,x){g.u=x,g.h=ae(g)}function de(g){g.u>=wa&&(e(g.u>=wa),we(g))}function ce(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function ve(g){return ne(g,1)}function _e(g,x){var T=g.Ca;0>g.b&&ce(g);var M=g.b,W=T*x>>>8,Z=(g.I>>>M>W)+0;for(Z?(T-=W,g.I-=W+1<<M>>>0):T=W+1,M=T,W=0;256<=M;)W+=8,M>>=8;return M=7^W+$a[M],g.b-=M,g.Ca=(T<<M)-1,Z}function Ve(g,x,T){g[x+0]=T>>24&255,g[x+1]=T>>16&255,g[x+2]=T>>8&255,g[x+3]=255&T}function Xe(g,x){return g[x+0]|g[x+1]<<8}function Je(g,x){return Xe(g,x)|g[x+2]<<16}function at(g,x){return Xe(g,x)|Xe(g,x+2)<<16}function G(g,x){var T=1<<x;return e(g!=null),e(0<x),g.X=o(T),g.X==null?0:(g.Mb=32-x,g.Xa=x,1)}function Ee(g,x){e(g!=null),e(x!=null),e(g.Xa==x.Xa),s(x.X,0,g.X,0,1<<x.Xa)}function xt(){this.X=[],this.Xa=this.Mb=0}function et(g,x,T,M){e(T!=null),e(M!=null);var W=T[0],Z=M[0];return W==0&&(W=(g*Z+x/2)/x),Z==0&&(Z=(x*W+g/2)/g),0>=W||0>=Z?0:(T[0]=W,M[0]=Z,1)}function De(g,x){return g+(1<<x)-1>>>x}function rt(g,x){return((4278255360&g)+(4278255360&x)>>>0&4278255360)+((16711935&g)+(16711935&x)>>>0&16711935)>>>0}function Ue(g,x){F[x]=function(T,M,W,Z,Q,se,oe){var he;for(he=0;he<Q;++he){var be=F[g](se[oe+he-1],W,Z+he);se[oe+he]=rt(T[M+he],be)}}}function ht(){this.ud=this.hd=this.jd=0}function Ae(g,x){return((4278124286&(g^x))>>>1)+(g&x)>>>0}function Ke(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function bt(g,x){return Ke(g+(g-x+.5>>1))}function mt(g,x,T){return Math.abs(x-T)-Math.abs(g-T)}function st(g,x,T,M,W,Z,Q){for(M=Z[Q-1],T=0;T<W;++T)Z[Q+T]=M=rt(g[x+T],M)}function dt(g,x,T,M,W){var Z;for(Z=0;Z<T;++Z){var Q=g[x+Z],se=Q>>8&255,oe=16711935&(oe=(oe=16711935&Q)+((se<<16)+se));M[W+Z]=(4278255360&Q)+oe>>>0}}function pt(g,x){x.jd=255&g,x.hd=g>>8&255,x.ud=g>>16&255}function Nt(g,x,T,M,W,Z){var Q;for(Q=0;Q<M;++Q){var se=x[T+Q],oe=se>>>8,he=se,be=255&(be=(be=se>>>16)+((g.jd<<24>>24)*(oe<<24>>24)>>>5));he=255&(he=(he+=(g.hd<<24>>24)*(oe<<24>>24)>>>5)+((g.ud<<24>>24)*(be<<24>>24)>>>5)),W[Z+Q]=(4278255360&se)+(be<<16)+he}}function je(g,x,T,M,W){F[x]=function(Z,Q,se,oe,he,be,Oe,ue,xe){for(oe=Oe;oe<ue;++oe)for(Oe=0;Oe<xe;++Oe)he[be++]=W(se[M(Z[Q++])])},F[g]=function(Z,Q,se,oe,he,be,Oe){var ue=8>>Z.b,xe=Z.Ea,Ce=Z.K[0],qe=Z.w;if(8>ue)for(Z=(1<<Z.b)-1,qe=(1<<ue)-1;Q<se;++Q){var ke,ze=0;for(ke=0;ke<xe;++ke)ke&Z||(ze=M(oe[he++])),be[Oe++]=W(Ce[ze&qe]),ze>>=ue}else F["VP8LMapColor"+T](oe,he,Ce,qe,be,Oe,Q,se,xe)}}function ft(g,x,T,M,W){for(T=x+T;x<T;){var Z=g[x++];M[W++]=Z>>16&255,M[W++]=Z>>8&255,M[W++]=255&Z}}function ct(g,x,T,M,W){for(T=x+T;x<T;){var Z=g[x++];M[W++]=Z>>16&255,M[W++]=Z>>8&255,M[W++]=255&Z,M[W++]=Z>>24&255}}function He(g,x,T,M,W){for(T=x+T;x<T;){var Z=(Q=g[x++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;M[W++]=Z,M[W++]=Q}}function ut(g,x,T,M,W){for(T=x+T;x<T;){var Z=(Q=g[x++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;M[W++]=Z,M[W++]=Q}}function vt(g,x,T,M,W){for(T=x+T;x<T;){var Z=g[x++];M[W++]=255&Z,M[W++]=Z>>8&255,M[W++]=Z>>16&255}}function ot(g,x,T,M,W,Z){if(Z==0)for(T=x+T;x<T;)Ve(M,((Z=g[x++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),W+=32;else s(M,W,g,x,T)}function ln(g,x){F[x][0]=F[g+"0"],F[x][1]=F[g+"1"],F[x][2]=F[g+"2"],F[x][3]=F[g+"3"],F[x][4]=F[g+"4"],F[x][5]=F[g+"5"],F[x][6]=F[g+"6"],F[x][7]=F[g+"7"],F[x][8]=F[g+"8"],F[x][9]=F[g+"9"],F[x][10]=F[g+"10"],F[x][11]=F[g+"11"],F[x][12]=F[g+"12"],F[x][13]=F[g+"13"],F[x][14]=F[g+"0"],F[x][15]=F[g+"0"]}function Et(g){return g==Jc||g==Gu||g==Jl||g==$u}function Bt(){this.eb=[],this.size=this.A=this.fb=0}function pn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Bt,this.f.kb=new pn,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wn(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Me(g,x){var T=g.T,M=x.ba.f.RGBA,W=M.eb,Z=M.fb+g.ka*M.A,Q=Es[x.ba.S],se=g.y,oe=g.O,he=g.f,be=g.N,Oe=g.ea,ue=g.W,xe=x.cc,Ce=x.dc,qe=x.Mc,ke=x.Nc,ze=g.ka,$e=g.ka+g.T,lt=g.U,Qe=lt+1>>1;for(ze==0?Q(se,oe,null,null,he,be,Oe,ue,he,be,Oe,ue,W,Z,null,null,lt):(Q(x.ec,x.fc,se,oe,xe,Ce,qe,ke,he,be,Oe,ue,W,Z-M.A,W,Z,lt),++T);ze+2<$e;ze+=2)xe=he,Ce=be,qe=Oe,ke=ue,be+=g.Rc,ue+=g.Rc,Z+=2*M.A,Q(se,(oe+=2*g.fa)-g.fa,se,oe,xe,Ce,qe,ke,he,be,Oe,ue,W,Z-M.A,W,Z,lt);return oe+=g.fa,g.j+$e<g.o?(s(x.ec,x.fc,se,oe,lt),s(x.cc,x.dc,he,be,Qe),s(x.Mc,x.Nc,Oe,ue,Qe),T--):1&$e||Q(se,oe,null,null,he,be,Oe,ue,he,be,Oe,ue,W,Z+M.A,null,null,lt),T}function yt(g,x,T){var M=g.F,W=[g.J];if(M!=null){var Z=g.U,Q=x.ba.S,se=Q==Qc||Q==Jl;x=x.ba.f.RGBA;var oe=[0],he=g.ka;oe[0]=g.T,g.Kb&&(he==0?--oe[0]:(--he,W[0]-=g.width),g.j+g.ka+g.T==g.o&&(oe[0]=g.o-g.j-he));var be=x.eb;he=x.fb+he*x.A,g=Yc(M,W[0],g.width,Z,oe,be,he+(se?0:3),x.A),e(T==oe),g&&Et(Q)&&ul(be,he,se,Z,oe,x.A)}return 0}function Rt(g){var x=g.ma,T=x.ba.S,M=11>T,W=T==Bs||T==Ei||T==Qc||T==Ql||T==12||Et(T);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Ga(x.Oa,g,W?11:12))return 0;if(W&&Et(T)&&Hc(),g.da)alert("todo:use_scaling");else{if(M){if(x.Ib=wn,g.Kb){if(T=g.U+1>>1,x.memory=o(g.U+2*T),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+g.U,x.Mc=x.cc,x.Nc=x.dc+T,x.Ib=Me,Hc()}}else alert("todo:EmitYUV");W&&(x.Jb=yt,M&&Ji())}if(M&&!Do){for(g=0;256>g;++g)Ms[g]=89858*(g-128)+nc>>Ii,p0[g]=-22014*(g-128)+nc,qf[g]=-45773*(g-128),Qu[g]=113618*(g-128)+nc>>Ii;for(g=pl;g<Oo;++g)x=76283*(g-16)+nc>>Ii,m0[g-pl]=or(x,255),g0[g-pl]=or(x+8>>4,15);Do=1}return 1}function it(g){var x=g.ma,T=g.U,M=g.T;return e(!(1&g.ka)),0>=T||0>=M?0:(T=x.Ib(g,x),x.Jb!=null&&x.Jb(g,x,T),x.Dc+=T,1)}function Te(g){g.ma.memory=null}function _t(g,x,T,M){return q(g,8)!=47?0:(x[0]=q(g,14)+1,T[0]=q(g,14)+1,M[0]=q(g,1),q(g,3)!=0?0:!g.h)}function St(g,x){if(4>g)return g+1;var T=g-2>>1;return(2+(1&g)<<T)+q(x,T)+1}function Mt(g,x){return 120<x?x-120:1<=(T=((T=Li[x-1])>>4)*g+(8-(15&T)))?T:1;var T}function Ct(g,x,T){var M=te(T),W=g[x+=255&M].g-8;return 0<W&&(re(T,T.u+8),M=te(T),x+=g[x].value,x+=M&(1<<W)-1),re(T,T.u+g[x].g),g[x].value}function Qt(g,x,T){return T.g+=g.g,T.value+=g.value<<x>>>0,e(8>=T.g),g.g}function cn(g,x,T){var M=g.xc;return e((x=M==0?0:g.vc[g.md*(T>>M)+(x>>M)])<g.Wb),g.Ya[x]}function nr(g,x,T,M){var W=g.ab,Z=g.c*x,Q=g.C;x=Q+x;var se=T,oe=M;for(M=g.Ta,T=g.Ua;0<W--;){var he=g.gc[W],be=Q,Oe=x,ue=se,xe=oe,Ce=(oe=M,se=T,he.Ea);switch(e(be<Oe),e(Oe<=he.nc),he.hc){case 2:Wr(ue,xe,(Oe-be)*Ce,oe,se);break;case 0:var qe=be,ke=Oe,ze=oe,$e=se,lt=(Lt=he).Ea;qe==0&&(Yl(ue,xe,null,null,1,ze,$e),st(ue,xe+1,0,0,lt-1,ze,$e+1),xe+=lt,$e+=lt,++qe);for(var Qe=1<<Lt.b,Vt=Qe-1,kt=De(lt,Lt.b),un=Lt.K,Lt=Lt.w+(qe>>Lt.b)*kt;qe<ke;){var Tn=un,vr=Lt,gn=1;for(Xl(ue,xe,ze,$e-lt,1,ze,$e);gn<lt;){var jt=(gn&~Vt)+Qe;jt>lt&&(jt=lt),(0,Ya[Tn[vr++]>>8&15])(ue,xe+ +gn,ze,$e+gn-lt,jt-gn,ze,$e+gn),gn=jt}xe+=lt,$e+=lt,++qe&Vt||(Lt+=kt)}Oe!=he.nc&&s(oe,se-Ce,oe,se+(Oe-be-1)*Ce,Ce);break;case 1:for(Ce=ue,ke=xe,lt=(ue=he.Ea)-($e=ue&~(ze=(xe=1<<he.b)-1)),qe=De(ue,he.b),Qe=he.K,he=he.w+(be>>he.b)*qe;be<Oe;){for(Vt=Qe,kt=he,un=new ht,Lt=ke+$e,Tn=ke+ue;ke<Lt;)pt(Vt[kt++],un),Zl(un,Ce,ke,xe,oe,se),ke+=xe,se+=xe;ke<Tn&&(pt(Vt[kt++],un),Zl(un,Ce,ke,lt,oe,se),ke+=lt,se+=lt),++be&ze||(he+=qe)}break;case 3:if(ue==oe&&xe==se&&0<he.b){for(ke=oe,ue=Ce=se+(Oe-be)*Ce-($e=(Oe-be)*De(he.Ea,he.b)),xe=oe,ze=se,qe=[],$e=(lt=$e)-1;0<=$e;--$e)qe[$e]=xe[ze+$e];for($e=lt-1;0<=$e;--$e)ke[ue+$e]=qe[$e];zu(he,be,Oe,oe,Ce,oe,se)}else zu(he,be,Oe,ue,xe,oe,se)}se=M,oe=T}oe!=T&&s(M,T,se,oe,Z)}function Pn(g,x){var T=g.V,M=g.Ba+g.c*g.C,W=x-g.C;if(e(x<=g.l.o),e(16>=W),0<W){var Z=g.l,Q=g.Ta,se=g.Ua,oe=Z.width;if(nr(g,W,T,M),W=se=[se],e((T=g.C)<(M=x)),e(Z.v<Z.va),M>Z.o&&(M=Z.o),T<Z.j){var he=Z.j-T;T=Z.j,W[0]+=he*oe}if(T>=M?T=0:(W[0]+=4*Z.v,Z.ka=T-Z.j,Z.U=Z.va-Z.v,Z.T=M-T,T=1),T){if(se=se[0],11>(T=g.ca).S){var be=T.f.RGBA,Oe=(M=T.S,W=Z.U,Z=Z.T,he=be.eb,be.A),ue=Z;for(be=be.fb+g.Ma*be.A;0<ue--;){var xe=Q,Ce=se,qe=W,ke=he,ze=be;switch(M){case Hu:Kl(xe,Ce,qe,ke,ze);break;case Bs:Xa(xe,Ce,qe,ke,ze);break;case Jc:Xa(xe,Ce,qe,ke,ze),ul(ke,ze,0,qe,1,0);break;case Wu:ll(xe,Ce,qe,ke,ze);break;case Ei:ot(xe,Ce,qe,ke,ze,1);break;case Gu:ot(xe,Ce,qe,ke,ze,1),ul(ke,ze,0,qe,1,0);break;case Qc:ot(xe,Ce,qe,ke,ze,0);break;case Jl:ot(xe,Ce,qe,ke,ze,0),ul(ke,ze,1,qe,1,0);break;case Ql:Za(xe,Ce,qe,ke,ze);break;case $u:Za(xe,Ce,qe,ke,ze),ji(ke,ze,qe,1,0);break;case ko:Na(xe,Ce,qe,ke,ze);break;default:e(0)}se+=oe,be+=Oe}g.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=T.height)}}g.C=x,e(g.C<=g.i)}function yn(g){var x;if(0<g.ua)return 0;for(x=0;x<g.Wb;++x){var T=g.Ya[x].G,M=g.Ya[x].H;if(0<T[1][M[1]+0].g||0<T[2][M[2]+0].g||0<T[3][M[3]+0].g)return 0}return 1}function Sn(g,x,T,M,W,Z){if(g.Z!=0){var Q=g.qd,se=g.rd;for(e(Ja[g.Z]!=null);x<T;++x)Ja[g.Z](Q,se,M,W,M,W,Z),Q=M,se=W,W+=Z;g.qd=Q,g.rd=se}}function tr(g,x){var T=g.l.ma,M=T.Z==0||T.Z==1?g.l.j:g.C;if(M=g.C<M?M:g.C,e(x<=g.l.o),x>M){var W=g.l.width,Z=T.ca,Q=T.tb+W*M,se=g.V,oe=g.Ba+g.c*M,he=g.gc;e(g.ab==1),e(he[0].hc==3),Sa(he[0],M,x,se,oe,Z,Q),Sn(T,M,x,Z,Q,W)}g.C=g.Ma=x}function Ln(g,x,T,M,W,Z,Q){var se=g.$/M,oe=g.$%M,he=g.m,be=g.s,Oe=T+g.$,ue=Oe;W=T+M*W;var xe=T+M*Z,Ce=280+be.ua,qe=g.Pb?se:16777216,ke=0<be.ua?be.Wa:null,ze=be.wc,$e=Oe<xe?cn(be,oe,se):null;e(g.C<Z),e(xe<=W);var lt=!1;e:for(;;){for(;lt||Oe<xe;){var Qe=0;if(se>=qe){var Vt=Oe-T;e((qe=g).Pb),qe.wd=qe.m,qe.xd=Vt,0<qe.s.ua&&Ee(qe.s.Wa,qe.s.vb),qe=se+jo}if(oe&ze||($e=cn(be,oe,se)),e($e!=null),$e.Qb&&(x[Oe]=$e.qb,lt=!0),!lt)if(de(he),$e.jc){Qe=he,Vt=x;var kt=Oe,un=$e.pd[te(Qe)&To-1];e($e.jc),256>un.g?(re(Qe,Qe.u+un.g),Vt[kt]=un.value,Qe=0):(re(Qe,Qe.u+un.g-256),e(256<=un.value),Qe=un.value),Qe==0&&(lt=!0)}else Qe=Ct($e.G[0],$e.H[0],he);if(he.h)break;if(lt||256>Qe){if(!lt)if($e.nd)x[Oe]=($e.qb|Qe<<8)>>>0;else{if(de(he),lt=Ct($e.G[1],$e.H[1],he),de(he),Vt=Ct($e.G[2],$e.H[2],he),kt=Ct($e.G[3],$e.H[3],he),he.h)break;x[Oe]=(kt<<24|lt<<16|Qe<<8|Vt)>>>0}if(lt=!1,++Oe,++oe>=M&&(oe=0,++se,Q!=null&&se<=Z&&!(se%16)&&Q(g,se),ke!=null))for(;ue<Oe;)Qe=x[ue++],ke.X[(506832829*Qe&4294967295)>>>ke.Mb]=Qe}else if(280>Qe){if(Qe=St(Qe-256,he),Vt=Ct($e.G[4],$e.H[4],he),de(he),Vt=Mt(M,Vt=St(Vt,he)),he.h)break;if(Oe-T<Vt||W-Oe<Qe)break e;for(kt=0;kt<Qe;++kt)x[Oe+kt]=x[Oe+kt-Vt];for(Oe+=Qe,oe+=Qe;oe>=M;)oe-=M,++se,Q!=null&&se<=Z&&!(se%16)&&Q(g,se);if(e(Oe<=W),oe&ze&&($e=cn(be,oe,se)),ke!=null)for(;ue<Oe;)Qe=x[ue++],ke.X[(506832829*Qe&4294967295)>>>ke.Mb]=Qe}else{if(!(Qe<Ce))break e;for(lt=Qe-280,e(ke!=null);ue<Oe;)Qe=x[ue++],ke.X[(506832829*Qe&4294967295)>>>ke.Mb]=Qe;Qe=Oe,e(!(lt>>>(Vt=ke).Xa)),x[Qe]=Vt.X[lt],lt=!0}lt||e(he.h==ae(he))}if(g.Pb&&he.h&&Oe<W)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ee(g.s.vb,g.s.Wa);else{if(he.h)break e;Q?.(g,se>Z?Z:se),g.a=0,g.$=Oe-T}return 1}return g.a=3,0}function gr(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var x=g.Wa;x!=null&&(x.X=null),g.vb=null,e(g!=null)}function Le(){var g=new rn;return g==null?null:(g.a=0,g.xb=dd,ln("Predictor","VP8LPredictors"),ln("Predictor","VP8LPredictors_C"),ln("PredictorAdd","VP8LPredictorsAdd"),ln("PredictorAdd","VP8LPredictorsAdd_C"),Wr=dt,Zl=Nt,Kl=ft,Xa=ct,Za=He,Na=ut,ll=vt,F.VP8LMapColor32b=_a,F.VP8LMapColor8b=Ts,g)}function Be(g,x,T,M,W){var Z=1,Q=[g],se=[x],oe=M.m,he=M.s,be=null,Oe=0;e:for(;;){if(T)for(;Z&&q(oe,1);){var ue=Q,xe=se,Ce=M,qe=1,ke=Ce.m,ze=Ce.gc[Ce.ab],$e=q(ke,2);if(Ce.Oc&1<<$e)Z=0;else{switch(Ce.Oc|=1<<$e,ze.hc=$e,ze.Ea=ue[0],ze.nc=xe[0],ze.K=[null],++Ce.ab,e(4>=Ce.ab),$e){case 0:case 1:ze.b=q(ke,3)+2,qe=Be(De(ze.Ea,ze.b),De(ze.nc,ze.b),0,Ce,ze.K),ze.K=ze.K[0];break;case 3:var lt,Qe=q(ke,8)+1,Vt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(ue[0]=De(ze.Ea,Vt),ze.b=Vt,lt=qe=Be(Qe,1,0,Ce,ze.K)){var kt,un=Qe,Lt=ze,Tn=1<<(8>>Lt.b),vr=o(Tn);if(vr==null)lt=0;else{var gn=Lt.K[0],jt=Lt.w;for(vr[0]=Lt.K[0][0],kt=1;kt<1*un;++kt)vr[kt]=rt(gn[jt+kt],vr[kt-1]);for(;kt<4*Tn;++kt)vr[kt]=0;Lt.K[0]=null,Lt.K[0]=vr,lt=1}}qe=lt;break;case 2:break;default:e(0)}Z=qe}}if(Q=Q[0],se=se[0],Z&&q(oe,1)&&!(Z=1<=(Oe=q(oe,4))&&11>=Oe)){M.a=3;break e}var wt;if(wt=Z)t:{var Cr,en,xn,Qn=M,as=Q,Ls=se,ur=Oe,Kr=T,Ps=Qn.m,Qr=Qn.s,Nn=[null],zn=1,Tr=0,Yn=Oi[ur];n:for(;;){if(Kr&&q(Ps,1)){var os=q(Ps,3)+2,kr=De(as,os),qn=De(Ls,os),Yr=kr*qn;if(!Be(kr,qn,0,Qn,Nn))break n;for(Nn=Nn[0],Qr.xc=os,Cr=0;Cr<Yr;++Cr){var Jn=Nn[Cr]>>8&65535;Nn[Cr]=Jn,Jn>=zn&&(zn=Jn+1)}}if(Ps.h)break n;for(en=0;5>en;++en){var Jr=dl[en];!en&&0<ur&&(Jr+=1<<ur),Tr<Jr&&(Tr=Jr)}var es=u(zn*Yn,X),rr=zn,Fn=u(rr,ie);if(Fn==null)var zs=null;else e(65536>=rr),zs=Fn;var Vr=o(Tr);if(zs==null||Vr==null||es==null){Qn.a=1;break n}var Yt=es;for(Cr=xn=0;Cr<zn;++Cr){var Xt=zs[Cr],Un=Xt.G,ai=Xt.H,Vi=0,Ks=1,ts=0;for(en=0;5>en;++en){Jr=dl[en],Un[en]=Yt,ai[en]=xn,!en&&0<ur&&(Jr+=1<<ur);s:{var Ro,Io=Jr,eh=Qn,hr=Vr,pd=Yt,md=xn,th=0,eo=eh.m,b0=q(eo,1);if(a(hr,0,0,Io),b0){var gd=q(eo,1)+1,bd=q(eo,1),nh=q(eo,bd==0?1:8);hr[nh]=1,gd==2&&(hr[nh=q(eo,8)]=1);var gs=1}else{var Fr=o(19),ru=q(eo,4)+4;if(19<ru){eh.a=3;var Vo=0;break s}for(Ro=0;Ro<ru;++Ro)Fr[eu[Ro]]=q(eo,3);var sc=void 0,ml=void 0,Ta=eh,rh=Fr,ic=Io,sh=hr,ih=0,to=Ta.m,vd=8,yd=u(128,X);r:for(;I(yd,0,7,rh,19);){if(q(to,1)){var Uf=2+2*q(to,3);if((sc=2+q(to,Uf))>ic)break r}else sc=ic;for(ml=0;ml<ic&&sc--;){de(to);var xd=yd[0+(127&te(to))];re(to,to.u+xd.g);var Fo=xd.value;if(16>Fo)sh[ml++]=Fo,Fo!=0&&(vd=Fo);else{var Hf=Fo==16,Wf=Fo-16,Gf=ec[Wf],wd=q(to,Mi[Wf])+Gf;if(ml+wd>ic)break r;for(var $f=Hf?vd:0;0<wd--;)sh[ml++]=$f}}ih=1;break r}ih||(Ta.a=3),gs=ih}(gs=gs&&!eo.h)&&(th=I(pd,md,8,hr,Io)),gs&&th!=0?Vo=th:(eh.a=3,Vo=0)}if(Vo==0)break n;if(Ks&&Yu[en]==1&&(Ks=Yt[xn].g==0),Vi+=Yt[xn].g,xn+=Vo,3>=en){var gl,ah=Vr[0];for(gl=1;gl<Jr;++gl)Vr[gl]>ah&&(ah=Vr[gl]);ts+=ah}}if(Xt.nd=Ks,Xt.Qb=0,Ks&&(Xt.qb=(Un[3][ai[3]+0].value<<24|Un[1][ai[1]+0].value<<16|Un[2][ai[2]+0].value)>>>0,Vi==0&&256>Un[0][ai[0]+0].value&&(Xt.Qb=1,Xt.qb+=Un[0][ai[0]+0].value<<8)),Xt.jc=!Xt.Qb&&6>ts,Xt.jc){var su,ka=Xt;for(su=0;su<To;++su){var no=su,ro=ka.pd[no],oh=ka.G[0][ka.H[0]+no];256<=oh.value?(ro.g=oh.g+256,ro.value=oh.value):(ro.g=0,ro.value=0,no>>=Qt(oh,8,ro),no>>=Qt(ka.G[1][ka.H[1]+no],16,ro),no>>=Qt(ka.G[2][ka.H[2]+no],0,ro),Qt(ka.G[3][ka.H[3]+no],24,ro))}}}Qr.vc=Nn,Qr.Wb=zn,Qr.Ya=zs,Qr.yc=es,wt=1;break t}wt=0}if(!(Z=wt)){M.a=3;break e}if(0<Oe){if(he.ua=1<<Oe,!G(he.Wa,Oe)){M.a=1,Z=0;break e}}else he.ua=0;var lh=M,bl=Q,Yf=se,ac=lh.s,oc=ac.xc;if(lh.c=bl,lh.i=Yf,ac.md=De(bl,oc),ac.wc=oc==0?-1:(1<<oc)-1,T){M.xb=Eo;break e}if((be=o(Q*se))==null){M.a=1,Z=0;break e}Z=(Z=Ln(M,be,0,Q,se,se,null))&&!oe.h;break e}return Z?(W!=null?W[0]=be:(e(be==null),e(T)),M.$=0,T||gr(he)):gr(he),Z}function nt(g,x){var T=g.c*g.i,M=T+x+16*x;return e(g.c<=x),g.V=o(M),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+T+x,1)}function It(g,x){var T=g.C,M=x-T,W=g.V,Z=g.Ba+g.c*T;for(e(x<=g.l.o);0<M;){var Q=16<M?16:M,se=g.l.ma,oe=g.l.width,he=oe*Q,be=se.ca,Oe=se.tb+oe*T,ue=g.Ta,xe=g.Ua;nr(g,Q,W,Z),yi(ue,xe,be,Oe,he),Sn(se,T,T+Q,be,Oe,oe),M-=Q,W+=Q*g.c,T+=Q}e(T==x),g.C=g.Ma=x}function Gt(){this.ub=this.yd=this.td=this.Rb=0}function Ht(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function At(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function an(){this.Yb=(function(){var g=[];return(function x(T,M,W){for(var Z=W[M],Q=0;Q<Z&&(T.push(W.length>M+1?[]:0),!(W.length<M+1));Q++)x(T[Q],M+1,W)})(g,0,[3,11]),g})()}function on(){this.jb=o(3),this.Wc=c([4,8],an),this.Xc=c([4,17],an)}function Hn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Wn(){this.ld=this.La=this.dd=this.tc=0}function dn(){this.Na=this.la=0}function Kn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Nr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Wn),this.Y=0,this.ya=Array(new Gn),this.aa=0,this.l=new ni}function ds(){this.y=o(16),this.f=o(8),this.ea=o(8)}function fs(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new Gt,this.Kc=new Ht,this.ed=new Hn,this.Qa=new At,this.Ic=this.$c=this.Aa=0,this.D=new Nr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,E),this.ia=0,this.pb=u(4,Kn),this.Pa=new on,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ds),this.Hd=0,this.rb=Array(new dn),this.sb=0,this.wa=Array(new Wn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gn),this.L=this.aa=0,this.gd=c([4,2],Wn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function or(g,x){return 0>g?0:g>x?x:g}function ni(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ri(){var g=new fs;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,xi||(xi=pi)),g}function Cn(g,x,T){return g.a==0&&(g.a=x,g.sc=T,g.cb=0),0}function Xi(g,x,T){return 3<=T&&g[x+0]==157&&g[x+1]==1&&g[x+2]==42}function Ns(g,x){if(g==null)return 0;if(g.a=0,g.sc="OK",x==null)return Cn(g,2,"null VP8Io passed to VP8GetHeaders()");var T=x.data,M=x.w,W=x.ha;if(4>W)return Cn(g,7,"Truncated header.");var Z=T[M+0]|T[M+1]<<8|T[M+2]<<16,Q=g.Od;if(Q.Rb=!(1&Z),Q.td=Z>>1&7,Q.yd=Z>>4&1,Q.ub=Z>>5,3<Q.td)return Cn(g,3,"Incorrect keyframe parameters.");if(!Q.yd)return Cn(g,4,"Frame not displayable.");M+=3,W-=3;var se=g.Kc;if(Q.Rb){if(7>W)return Cn(g,7,"cannot parse picture header");if(!Xi(T,M,W))return Cn(g,3,"Bad code word");se.c=16383&(T[M+4]<<8|T[M+3]),se.Td=T[M+4]>>6,se.i=16383&(T[M+6]<<8|T[M+5]),se.Ud=T[M+6]>>6,M+=7,W-=7,g.za=se.c+15>>4,g.Ub=se.i+15>>4,x.width=se.c,x.height=se.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((Z=g.Pa).jb,0,255,Z.jb.length),e((Z=g.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,a(Z.Zb,0,0,Z.Zb.length),a(Z.Lb,0,0,Z.Lb)}if(Q.ub>W)return Cn(g,7,"bad partition length");Y(Z=g.m,T,M,Q.ub),M+=Q.ub,W-=Q.ub,Q.Rb&&(se.Ld=ve(Z),se.Kd=ve(Z)),se=g.Qa;var oe,he=g.Pa;if(e(Z!=null),e(se!=null),se.Cb=ve(Z),se.Cb){if(se.Bb=ve(Z),ve(Z)){for(se.Fb=ve(Z),oe=0;4>oe;++oe)se.Zb[oe]=ve(Z)?le(Z,7):0;for(oe=0;4>oe;++oe)se.Lb[oe]=ve(Z)?le(Z,6):0}if(se.Bb)for(oe=0;3>oe;++oe)he.jb[oe]=ve(Z)?ne(Z,8):255}else se.Bb=0;if(Z.Ka)return Cn(g,3,"cannot parse segment header");if((se=g.ed).zd=ve(Z),se.Tb=ne(Z,6),se.wb=ne(Z,3),se.Pc=ve(Z),se.Pc&&ve(Z)){for(he=0;4>he;++he)ve(Z)&&(se.vd[he]=le(Z,6));for(he=0;4>he;++he)ve(Z)&&(se.od[he]=le(Z,6))}if(g.L=se.Tb==0?0:se.zd?1:2,Z.Ka)return Cn(g,3,"cannot parse filter header");var be=W;if(W=oe=M,M=oe+be,se=be,g.Xb=(1<<ne(g.m,2))-1,be<3*(he=g.Xb))T=7;else{for(oe+=3*he,se-=3*he,be=0;be<he;++be){var Oe=T[W+0]|T[W+1]<<8|T[W+2]<<16;Oe>se&&(Oe=se),Y(g.Jc[+be],T,oe,Oe),oe+=Oe,se-=Oe,W+=3}Y(g.Jc[+he],T,oe,se),T=oe<M?0:5}if(T!=0)return Cn(g,T,"cannot parse partitions");for(T=ne(oe=g.m,7),W=ve(oe)?le(oe,4):0,M=ve(oe)?le(oe,4):0,se=ve(oe)?le(oe,4):0,he=ve(oe)?le(oe,4):0,oe=ve(oe)?le(oe,4):0,be=g.Qa,Oe=0;4>Oe;++Oe){if(be.Cb){var ue=be.Zb[Oe];be.Fb||(ue+=T)}else{if(0<Oe){g.pb[Oe]=g.pb[0];continue}ue=T}var xe=g.pb[Oe];xe.Sc[0]=Di[or(ue+W,127)],xe.Sc[1]=Ri[or(ue+0,127)],xe.Eb[0]=2*Di[or(ue+M,127)],xe.Eb[1]=101581*Ri[or(ue+se,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=Di[or(ue+he,117)],xe.Qc[1]=Ri[or(ue+oe,127)],xe.lc=ue+oe}if(!Q.Rb)return Cn(g,4,"Not a key frame.");for(ve(Z),Q=g.Pa,T=0;4>T;++T){for(W=0;8>W;++W)for(M=0;3>M;++M)for(se=0;11>se;++se)he=_e(Z,br[T][W][M][se])?ne(Z,8):zf[T][W][M][se],Q.Wc[T][W].Yb[M][se]=he;for(W=0;17>W;++W)Q.Xc[T][W]=Q.Wc[T][kn[W]]}return g.kc=ve(Z),g.kc&&(g.Bd=ne(Z,8)),g.cb=1}function pi(g,x,T,M,W,Z,Q){var se=x[W].Yb[T];for(T=0;16>W;++W){if(!_e(g,se[T+0]))return W;for(;!_e(g,se[T+1]);)if(se=x[++W].Yb[0],T=0,W==16)return 16;var oe=x[W+1].Yb;if(_e(g,se[T+2])){var he=g,be=0;if(_e(he,(ue=se)[(Oe=T)+3]))if(_e(he,ue[Oe+6])){for(se=0,Oe=2*(be=_e(he,ue[Oe+8]))+(ue=_e(he,ue[Oe+9+be])),be=0,ue=Pf[Oe];ue[se];++se)be+=be+_e(he,ue[se]);be+=3+(8<<Oe)}else _e(he,ue[Oe+7])?(be=7+2*_e(he,165),be+=_e(he,145)):be=5+_e(he,159);else be=_e(he,ue[Oe+4])?3+_e(he,ue[Oe+5]):2;se=oe[2]}else be=1,se=oe[1];oe=Q+hd[W],0>(he=g).b&&ce(he);var Oe,ue=he.b,xe=(Oe=he.Ca>>1)-(he.I>>ue)>>31;--he.b,he.Ca+=xe,he.Ca|=1,he.I-=(Oe+1&xe)<<ue,Z[oe]=((be^xe)-xe)*M[(0<W)+0]}return 16}function Zi(g){var x=g.rb[g.sb-1];x.la=0,x.Na=0,a(g.zc,0,0,g.zc.length),g.ja=0}function Xr(g,x,T,M,W){W=g[x+T+32*M]+(W>>3),g[x+T+32*M]=-256&W?0>W?0:255:W}function Ur(g,x,T,M,W,Z){Xr(g,x,0,T,M+W),Xr(g,x,1,T,M+Z),Xr(g,x,2,T,M-Z),Xr(g,x,3,T,M-W)}function Rr(g){return(20091*g>>16)+g}function So(g,x,T,M){var W,Z=0,Q=o(16);for(W=0;4>W;++W){var se=g[x+0]+g[x+8],oe=g[x+0]-g[x+8],he=(35468*g[x+4]>>16)-Rr(g[x+12]),be=Rr(g[x+4])+(35468*g[x+12]>>16);Q[Z+0]=se+be,Q[Z+1]=oe+he,Q[Z+2]=oe-he,Q[Z+3]=se-be,Z+=4,x++}for(W=Z=0;4>W;++W)se=(g=Q[Z+0]+4)+Q[Z+8],oe=g-Q[Z+8],he=(35468*Q[Z+4]>>16)-Rr(Q[Z+12]),Xr(T,M,0,0,se+(be=Rr(Q[Z+4])+(35468*Q[Z+12]>>16))),Xr(T,M,1,0,oe+he),Xr(T,M,2,0,oe-he),Xr(T,M,3,0,se-be),Z++,M+=32}function zl(g,x,T,M){var W=g[x+0]+4,Z=35468*g[x+4]>>16,Q=Rr(g[x+4]),se=35468*g[x+1]>>16;Ur(T,M,0,W+Q,g=Rr(g[x+1]),se),Ur(T,M,1,W+Z,g,se),Ur(T,M,2,W-Z,g,se),Ur(T,M,3,W-Q,g,se)}function el(g,x,T,M,W){So(g,x,T,M),W&&So(g,x+16,T,M+4)}function $s(g,x,T,M){Ka(g,x+0,T,M,1),Ka(g,x+32,T,M+128,1)}function Vc(g,x,T,M){var W;for(g=g[x+0]+4,W=0;4>W;++W)for(x=0;4>x;++x)Xr(T,M,x,W,g)}function Fc(g,x,T,M){g[x+0]&&$n(g,x+0,T,M),g[x+16]&&$n(g,x+16,T,M+4),g[x+32]&&$n(g,x+32,T,M+128),g[x+48]&&$n(g,x+48,T,M+128+4)}function Ki(g,x,T,M){var W,Z=o(16);for(W=0;4>W;++W){var Q=g[x+0+W]+g[x+12+W],se=g[x+4+W]+g[x+8+W],oe=g[x+4+W]-g[x+8+W],he=g[x+0+W]-g[x+12+W];Z[0+W]=Q+se,Z[8+W]=Q-se,Z[4+W]=he+oe,Z[12+W]=he-oe}for(W=0;4>W;++W)Q=(g=Z[0+4*W]+3)+Z[3+4*W],se=Z[1+4*W]+Z[2+4*W],oe=Z[1+4*W]-Z[2+4*W],he=g-Z[3+4*W],T[M+0]=Q+se>>3,T[M+16]=he+oe>>3,T[M+32]=Q-se>>3,T[M+48]=he-oe>>3,M+=64}function tl(g,x,T){var M,W=x-32,Z=Fs,Q=255-g[W-1];for(M=0;M<T;++M){var se,oe=Z,he=Q+g[x-1];for(se=0;se<T;++se)g[x+se]=oe[he+g[W+se]];x+=32}}function Ou(g,x){tl(g,x,4)}function Du(g,x){tl(g,x,8)}function Bc(g,x){tl(g,x,16)}function Pc(g,x){var T;for(T=0;16>T;++T)s(g,x+32*T,g,x-32,16)}function Ru(g,x){var T;for(T=16;0<T;--T)a(g,x,g[x-1],16),x+=32}function si(g,x,T){var M;for(M=0;16>M;++M)a(x,T+32*M,g,16)}function Qi(g,x){var T,M=16;for(T=0;16>T;++T)M+=g[x-1+32*T]+g[x+T-32];si(M>>5,g,x)}function Ra(g,x){var T,M=8;for(T=0;16>T;++T)M+=g[x-1+32*T];si(M>>4,g,x)}function nl(g,x){var T,M=8;for(T=0;16>T;++T)M+=g[x+T-32];si(M>>4,g,x)}function No(g,x){si(128,g,x)}function Jt(g,x,T){return g+2*x+T+2>>2}function Iu(g,x){var T,M=x-32;for(M=new Uint8Array([Jt(g[M-1],g[M+0],g[M+1]),Jt(g[M+0],g[M+1],g[M+2]),Jt(g[M+1],g[M+2],g[M+3]),Jt(g[M+2],g[M+3],g[M+4])]),T=0;4>T;++T)s(g,x+32*T,M,0,M.length)}function zc(g,x){var T=g[x-1],M=g[x-1+32],W=g[x-1+64],Z=g[x-1+96];Ve(g,x+0,16843009*Jt(g[x-1-32],T,M)),Ve(g,x+32,16843009*Jt(T,M,W)),Ve(g,x+64,16843009*Jt(M,W,Z)),Ve(g,x+96,16843009*Jt(W,Z,Z))}function Vu(g,x){var T,M=4;for(T=0;4>T;++T)M+=g[x+T-32]+g[x-1+32*T];for(M>>=3,T=0;4>T;++T)a(g,x+32*T,M,4)}function mi(g,x){var T=g[x-1+0],M=g[x-1+32],W=g[x-1+64],Z=g[x-1-32],Q=g[x+0-32],se=g[x+1-32],oe=g[x+2-32],he=g[x+3-32];g[x+0+96]=Jt(M,W,g[x-1+96]),g[x+1+96]=g[x+0+64]=Jt(T,M,W),g[x+2+96]=g[x+1+64]=g[x+0+32]=Jt(Z,T,M),g[x+3+96]=g[x+2+64]=g[x+1+32]=g[x+0+0]=Jt(Q,Z,T),g[x+3+64]=g[x+2+32]=g[x+1+0]=Jt(se,Q,Z),g[x+3+32]=g[x+2+0]=Jt(oe,se,Q),g[x+3+0]=Jt(he,oe,se)}function As(g,x){var T=g[x+1-32],M=g[x+2-32],W=g[x+3-32],Z=g[x+4-32],Q=g[x+5-32],se=g[x+6-32],oe=g[x+7-32];g[x+0+0]=Jt(g[x+0-32],T,M),g[x+1+0]=g[x+0+32]=Jt(T,M,W),g[x+2+0]=g[x+1+32]=g[x+0+64]=Jt(M,W,Z),g[x+3+0]=g[x+2+32]=g[x+1+64]=g[x+0+96]=Jt(W,Z,Q),g[x+3+32]=g[x+2+64]=g[x+1+96]=Jt(Z,Q,se),g[x+3+64]=g[x+2+96]=Jt(Q,se,oe),g[x+3+96]=Jt(se,oe,oe)}function qc(g,x){var T=g[x-1+0],M=g[x-1+32],W=g[x-1+64],Z=g[x-1-32],Q=g[x+0-32],se=g[x+1-32],oe=g[x+2-32],he=g[x+3-32];g[x+0+0]=g[x+1+64]=Z+Q+1>>1,g[x+1+0]=g[x+2+64]=Q+se+1>>1,g[x+2+0]=g[x+3+64]=se+oe+1>>1,g[x+3+0]=oe+he+1>>1,g[x+0+96]=Jt(W,M,T),g[x+0+64]=Jt(M,T,Z),g[x+0+32]=g[x+1+96]=Jt(T,Z,Q),g[x+1+32]=g[x+2+96]=Jt(Z,Q,se),g[x+2+32]=g[x+3+96]=Jt(Q,se,oe),g[x+3+32]=Jt(se,oe,he)}function rl(g,x){var T=g[x+0-32],M=g[x+1-32],W=g[x+2-32],Z=g[x+3-32],Q=g[x+4-32],se=g[x+5-32],oe=g[x+6-32],he=g[x+7-32];g[x+0+0]=T+M+1>>1,g[x+1+0]=g[x+0+64]=M+W+1>>1,g[x+2+0]=g[x+1+64]=W+Z+1>>1,g[x+3+0]=g[x+2+64]=Z+Q+1>>1,g[x+0+32]=Jt(T,M,W),g[x+1+32]=g[x+0+96]=Jt(M,W,Z),g[x+2+32]=g[x+1+96]=Jt(W,Z,Q),g[x+3+32]=g[x+2+96]=Jt(Z,Q,se),g[x+3+64]=Jt(Q,se,oe),g[x+3+96]=Jt(se,oe,he)}function gi(g,x){var T=g[x-1+0],M=g[x-1+32],W=g[x-1+64],Z=g[x-1+96];g[x+0+0]=T+M+1>>1,g[x+2+0]=g[x+0+32]=M+W+1>>1,g[x+2+32]=g[x+0+64]=W+Z+1>>1,g[x+1+0]=Jt(T,M,W),g[x+3+0]=g[x+1+32]=Jt(M,W,Z),g[x+3+32]=g[x+1+64]=Jt(W,Z,Z),g[x+3+64]=g[x+2+64]=g[x+0+96]=g[x+1+96]=g[x+2+96]=g[x+3+96]=Z}function sl(g,x){var T=g[x-1+0],M=g[x-1+32],W=g[x-1+64],Z=g[x-1+96],Q=g[x-1-32],se=g[x+0-32],oe=g[x+1-32],he=g[x+2-32];g[x+0+0]=g[x+2+32]=T+Q+1>>1,g[x+0+32]=g[x+2+64]=M+T+1>>1,g[x+0+64]=g[x+2+96]=W+M+1>>1,g[x+0+96]=Z+W+1>>1,g[x+3+0]=Jt(se,oe,he),g[x+2+0]=Jt(Q,se,oe),g[x+1+0]=g[x+3+32]=Jt(T,Q,se),g[x+1+32]=g[x+3+64]=Jt(M,T,Q),g[x+1+64]=g[x+3+96]=Jt(W,M,T),g[x+1+96]=Jt(Z,W,M)}function ga(g,x){var T;for(T=0;8>T;++T)s(g,x+32*T,g,x-32,8)}function Fu(g,x){var T;for(T=0;8>T;++T)a(g,x,g[x-1],8),x+=32}function Ci(g,x,T){var M;for(M=0;8>M;++M)a(x,T+32*M,g,8)}function ql(g,x){var T,M=8;for(T=0;8>T;++T)M+=g[x+T-32]+g[x-1+32*T];Ci(M>>4,g,x)}function Ul(g,x){var T,M=4;for(T=0;8>T;++T)M+=g[x+T-32];Ci(M>>3,g,x)}function ps(g,x){var T,M=4;for(T=0;8>T;++T)M+=g[x-1+32*T];Ci(M>>3,g,x)}function ba(g,x){Ci(128,g,x)}function Ti(g,x,T){var M=g[x-T],W=g[x+0],Z=3*(W-M)+Qa[1020+g[x-2*T]-g[x+T]],Q=Kc[112+(Z+4>>3)];g[x-T]=Fs[255+M+Kc[112+(Z+3>>3)]],g[x+0]=Fs[255+W-Q]}function Ia(g,x,T,M){var W=g[x+0],Z=g[x+T];return ks[255+g[x-2*T]-g[x-T]]>M||ks[255+Z-W]>M}function Hl(g,x,T,M){return 4*ks[255+g[x-T]-g[x+0]]+ks[255+g[x-2*T]-g[x+T]]<=M}function il(g,x,T,M,W){var Z=g[x-3*T],Q=g[x-2*T],se=g[x-T],oe=g[x+0],he=g[x+T],be=g[x+2*T],Oe=g[x+3*T];return 4*ks[255+se-oe]+ks[255+Q-he]>M?0:ks[255+g[x-4*T]-Z]<=W&&ks[255+Z-Q]<=W&&ks[255+Q-se]<=W&&ks[255+Oe-be]<=W&&ks[255+be-he]<=W&&ks[255+he-oe]<=W}function Va(g,x,T,M){var W=2*M+1;for(M=0;16>M;++M)Hl(g,x+M,T,W)&&Ti(g,x+M,T)}function Fa(g,x,T,M){var W=2*M+1;for(M=0;16>M;++M)Hl(g,x+M*T,1,W)&&Ti(g,x+M*T,1)}function al(g,x,T,M){var W;for(W=3;0<W;--W)Va(g,x+=4*T,T,M)}function Uc(g,x,T,M){var W;for(W=3;0<W;--W)Fa(g,x+=4,T,M)}function Ba(g,x,T,M,W,Z,Q,se){for(Z=2*Z+1;0<W--;){if(il(g,x,T,Z,Q))if(Ia(g,x,T,se))Ti(g,x,T);else{var oe=g,he=x,be=T,Oe=oe[he-2*be],ue=oe[he-be],xe=oe[he+0],Ce=oe[he+be],qe=oe[he+2*be],ke=27*($e=Qa[1020+3*(xe-ue)+Qa[1020+Oe-Ce]])+63>>7,ze=18*$e+63>>7,$e=9*$e+63>>7;oe[he-3*be]=Fs[255+oe[he-3*be]+$e],oe[he-2*be]=Fs[255+Oe+ze],oe[he-be]=Fs[255+ue+ke],oe[he+0]=Fs[255+xe-ke],oe[he+be]=Fs[255+Ce-ze],oe[he+2*be]=Fs[255+qe-$e]}x+=M}}function Pa(g,x,T,M,W,Z,Q,se){for(Z=2*Z+1;0<W--;){if(il(g,x,T,Z,Q))if(Ia(g,x,T,se))Ti(g,x,T);else{var oe=g,he=x,be=T,Oe=oe[he-be],ue=oe[he+0],xe=oe[he+be],Ce=Kc[112+(4+(qe=3*(ue-Oe))>>3)],qe=Kc[112+(qe+3>>3)],ke=Ce+1>>1;oe[he-2*be]=Fs[255+oe[he-2*be]+ke],oe[he-be]=Fs[255+Oe+qe],oe[he+0]=Fs[255+ue-Ce],oe[he+be]=Fs[255+xe-ke]}x+=M}}function Bu(g,x,T,M,W,Z){Ba(g,x,T,1,16,M,W,Z)}function za(g,x,T,M,W,Z){Ba(g,x,1,T,16,M,W,Z)}function Pu(g,x,T,M,W,Z){var Q;for(Q=3;0<Q;--Q)Pa(g,x+=4*T,T,1,16,M,W,Z)}function S(g,x,T,M,W,Z){var Q;for(Q=3;0<Q;--Q)Pa(g,x+=4,1,T,16,M,W,Z)}function H(g,x,T,M,W,Z,Q,se){Ba(g,x,W,1,8,Z,Q,se),Ba(T,M,W,1,8,Z,Q,se)}function fe(g,x,T,M,W,Z,Q,se){Ba(g,x,1,W,8,Z,Q,se),Ba(T,M,1,W,8,Z,Q,se)}function ge(g,x,T,M,W,Z,Q,se){Pa(g,x+4*W,W,1,8,Z,Q,se),Pa(T,M+4*W,W,1,8,Z,Q,se)}function Se(g,x,T,M,W,Z,Q,se){Pa(g,x+4,1,W,8,Z,Q,se),Pa(T,M+4,1,W,8,Z,Q,se)}function Ge(){this.ba=new Tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ot(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qt(){this.ua=0,this.Wa=new xt,this.vb=new xt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new X}function rn(){this.xb=this.a=0,this.l=new ni,this.ca=new Tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qt,this.ab=0,this.gc=u(4,Ot),this.Oc=0}function mn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ni,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function In(g,x,T,M,W,Z,Q){for(g=g==null?0:g[x+0],x=0;x<Q;++x)W[Z+x]=g+T[M+x]&255,g=W[Z+x]}function Ar(g,x,T,M,W,Z,Q){var se;if(g==null)In(null,null,T,M,W,Z,Q);else for(se=0;se<Q;++se)W[Z+se]=g[x+se]+T[M+se]&255}function Hr(g,x,T,M,W,Z,Q){if(g==null)In(null,null,T,M,W,Z,Q);else{var se,oe=g[x+0],he=oe,be=oe;for(se=0;se<Q;++se)he=be+(oe=g[x+se])-he,be=T[M+se]+(-256&he?0>he?0:255:he)&255,he=oe,W[Z+se]=be}}function lr(g,x,T,M){var W=x.width,Z=x.o;if(e(g!=null&&x!=null),0>T||0>=M||T+M>Z)return null;if(!g.Cc){if(g.ga==null){var Q;if(g.ga=new mn,(Q=g.ga==null)||(Q=x.width*x.o,e(g.Gb.length==0),g.Gb=o(Q),g.Uc=0,g.Gb==null?Q=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Q=1),Q=!Q),!Q){Q=g.ga;var se=g.Fa,oe=g.P,he=g.qc,be=g.mb,Oe=g.nb,ue=oe+1,xe=he-1,Ce=Q.l;if(e(se!=null&&be!=null&&x!=null),Ja[0]=null,Ja[1]=In,Ja[2]=Ar,Ja[3]=Hr,Q.ca=be,Q.tb=Oe,Q.c=x.width,Q.i=x.height,e(0<Q.c&&0<Q.i),1>=he)x=0;else if(Q.$a=3&se[oe+0],Q.Z=se[oe+0]>>2&3,Q.Lc=se[oe+0]>>4&3,oe=se[oe+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||oe)x=0;else if(Ce.put=it,Ce.ac=Rt,Ce.bc=Te,Ce.ma=Q,Ce.width=x.width,Ce.height=x.height,Ce.Da=x.Da,Ce.v=x.v,Ce.va=x.va,Ce.j=x.j,Ce.o=x.o,Q.$a)e:{e(Q.$a==1),x=Le();t:for(;;){if(x==null){x=0;break e}if(e(Q!=null),Q.mc=x,x.c=Q.c,x.i=Q.i,x.l=Q.l,x.l.ma=Q,x.l.width=Q.c,x.l.height=Q.i,x.a=0,pe(x.m,se,ue,xe),!Be(Q.c,Q.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&yn(x.s)?(Q.ic=1,se=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(se),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Q.ic=0,x=nt(x,Q.c)),!x))break t;x=1;break e}Q.mc=null,x=0}else x=xe>=Q.c*Q.i;Q=!x}if(Q)return null;g.ga.Lc!=1?g.Ga=0:M=Z-T}e(g.ga!=null),e(T+M<=Z);e:{if(x=(se=g.ga).c,Z=se.l.o,se.$a==0){if(ue=g.rc,xe=g.Vc,Ce=g.Fa,oe=g.P+1+T*x,he=g.mb,be=g.nb+T*x,e(oe<=g.P+g.qc),se.Z!=0)for(e(Ja[se.Z]!=null),Q=0;Q<M;++Q)Ja[se.Z](ue,xe,Ce,oe,he,be,x),ue=he,xe=be,be+=x,oe+=x;else for(Q=0;Q<M;++Q)s(he,be,Ce,oe,x),ue=he,xe=be,be+=x,oe+=x;g.rc=ue,g.Vc=xe}else{if(e(se.mc!=null),x=T+M,e((Q=se.mc)!=null),e(x<=Q.i),Q.C>=x)x=1;else if(se.ic||Ji(),se.ic){se=Q.V,ue=Q.Ba,xe=Q.c;var qe=Q.i,ke=(Ce=1,oe=Q.$/xe,he=Q.$%xe,be=Q.m,Oe=Q.s,Q.$),ze=xe*qe,$e=xe*x,lt=Oe.wc,Qe=ke<$e?cn(Oe,he,oe):null;e(ke<=ze),e(x<=qe),e(yn(Oe));t:for(;;){for(;!be.h&&ke<$e;){if(he&lt||(Qe=cn(Oe,he,oe)),e(Qe!=null),de(be),256>(qe=Ct(Qe.G[0],Qe.H[0],be)))se[ue+ke]=qe,++ke,++he>=xe&&(he=0,++oe<=x&&!(oe%16)&&tr(Q,oe));else{if(!(280>qe)){Ce=0;break t}qe=St(qe-256,be);var Vt,kt=Ct(Qe.G[4],Qe.H[4],be);if(de(be),!(ke>=(kt=Mt(xe,kt=St(kt,be)))&&ze-ke>=qe)){Ce=0;break t}for(Vt=0;Vt<qe;++Vt)se[ue+ke+Vt]=se[ue+ke+Vt-kt];for(ke+=qe,he+=qe;he>=xe;)he-=xe,++oe<=x&&!(oe%16)&&tr(Q,oe);ke<$e&&he&lt&&(Qe=cn(Oe,he,oe))}e(be.h==ae(be))}tr(Q,oe>x?x:oe);break t}!Ce||be.h&&ke<ze?(Ce=0,Q.a=be.h?5:3):Q.$=ke,x=Ce}else x=Ln(Q,Q.V,Q.Ba,Q.c,Q.i,x,It);if(!x){M=0;break e}}T+M>=Z&&(g.Cc=1),M=1}if(!M)return null;if(g.Cc&&((M=g.ga)!=null&&(M.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+T*W}function is(g,x,T,M,W,Z){for(;0<W--;){var Q,se=g,oe=x+(T?1:0),he=g,be=x+(T?0:3);for(Q=0;Q<M;++Q){var Oe=he[be+4*Q];Oe!=255&&(Oe*=32897,se[oe+4*Q+0]=se[oe+4*Q+0]*Oe>>23,se[oe+4*Q+1]=se[oe+4*Q+1]*Oe>>23,se[oe+4*Q+2]=se[oe+4*Q+2]*Oe>>23)}x+=Z}}function Zr(g,x,T,M,W){for(;0<M--;){var Z;for(Z=0;Z<T;++Z){var Q=g[x+2*Z+0],se=15&(he=g[x+2*Z+1]),oe=4369*se,he=(240&he|he>>4)*oe>>16;g[x+2*Z+0]=(240&Q|Q>>4)*oe>>16&240|(15&Q|Q<<4)*oe>>16>>4&15,g[x+2*Z+1]=240&he|se}x+=W}}function Cs(g,x,T,M,W,Z,Q,se){var oe,he,be=255;for(he=0;he<W;++he){for(oe=0;oe<M;++oe){var Oe=g[x+oe];Z[Q+4*oe]=Oe,be&=Oe}x+=T,Q+=se}return be!=255}function qa(g,x,T,M,W){var Z;for(Z=0;Z<W;++Z)T[M+Z]=g[x+Z]>>8}function Ji(){ul=is,ji=Zr,Yc=Cs,yi=qa}function Ua(g,x,T){F[g]=function(M,W,Z,Q,se,oe,he,be,Oe,ue,xe,Ce,qe,ke,ze,$e,lt){var Qe,Vt=lt-1>>1,kt=se[oe+0]|he[be+0]<<16,un=Oe[ue+0]|xe[Ce+0]<<16;e(M!=null);var Lt=3*kt+un+131074>>2;for(x(M[W+0],255&Lt,Lt>>16,qe,ke),Z!=null&&(Lt=3*un+kt+131074>>2,x(Z[Q+0],255&Lt,Lt>>16,ze,$e)),Qe=1;Qe<=Vt;++Qe){var Tn=se[oe+Qe]|he[be+Qe]<<16,vr=Oe[ue+Qe]|xe[Ce+Qe]<<16,gn=kt+Tn+un+vr+524296,jt=gn+2*(Tn+un)>>3;Lt=jt+kt>>1,kt=(gn=gn+2*(kt+vr)>>3)+Tn>>1,x(M[W+2*Qe-1],255&Lt,Lt>>16,qe,ke+(2*Qe-1)*T),x(M[W+2*Qe-0],255&kt,kt>>16,qe,ke+(2*Qe-0)*T),Z!=null&&(Lt=gn+un>>1,kt=jt+vr>>1,x(Z[Q+2*Qe-1],255&Lt,Lt>>16,ze,$e+(2*Qe-1)*T),x(Z[Q+2*Qe+0],255&kt,kt>>16,ze,$e+(2*Qe+0)*T)),kt=Tn,un=vr}1&lt||(Lt=3*kt+un+131074>>2,x(M[W+lt-1],255&Lt,Lt>>16,qe,ke+(lt-1)*T),Z!=null&&(Lt=3*un+kt+131074>>2,x(Z[Q+lt-1],255&Lt,Lt>>16,ze,$e+(lt-1)*T)))}}function Hc(){Es[Hu]=fl,Es[Bs]=tc,Es[Wu]=fd,Es[Ei]=Zu,Es[Qc]=Mo,Es[Ql]=Ca,Es[ko]=Lo,Es[Jc]=tc,Es[Gu]=Zu,Es[Jl]=Mo,Es[$u]=Ca}function Wl(g){return g&-16384?0>g?0:255:g>>Ku}function va(g,x){return Wl((19077*g>>8)+(26149*x>>8)-14234)}function ea(g,x,T){return Wl((19077*g>>8)-(6419*x>>8)-(13320*T>>8)+8708)}function ol(g,x){return Wl((19077*g>>8)+(33050*x>>8)-17685)}function Ha(g,x,T,M,W){M[W+0]=va(g,T),M[W+1]=ea(g,x,T),M[W+2]=ol(g,x)}function ms(g,x,T,M,W){M[W+0]=ol(g,x),M[W+1]=ea(g,x,T),M[W+2]=va(g,T)}function Ao(g,x,T,M,W){var Z=ea(g,x,T);x=Z<<3&224|ol(g,x)>>3,M[W+0]=248&va(g,T)|Z>>5,M[W+1]=x}function Co(g,x,T,M,W){var Z=240&ol(g,x)|15;M[W+0]=240&va(g,T)|ea(g,x,T)>>4,M[W+1]=Z}function Gl(g,x,T,M,W){M[W+0]=255,Ha(g,x,T,M,W+1)}function ya(g,x,T,M,W){ms(g,x,T,M,W),M[W+3]=255}function Ys(g,x,T,M,W){Ha(g,x,T,M,W),M[W+3]=255}function Wa(g,x,T){F[g]=function(M,W,Z,Q,se,oe,he,be,Oe){for(var ue=be+(-2&Oe)*T;be!=ue;)x(M[W+0],Z[Q+0],se[oe+0],he,be),x(M[W+1],Z[Q+0],se[oe+0],he,be+T),W+=2,++Q,++oe,be+=2*T;1&Oe&&x(M[W+0],Z[Q+0],se[oe+0],he,be)}}function $l(g,x,T){return T==0?g==0?x==0?6:5:x==0?4:0:T}function Wc(g,x,T,M,W){switch(g>>>30){case 3:Ka(x,T,M,W,0);break;case 2:Vs(x,T,M,W);break;case 1:$n(x,T,M,W)}}function bi(g,x){var T,M,W=x.M,Z=x.Nb,Q=g.oc,se=g.pc+40,oe=g.oc,he=g.pc+584,be=g.oc,Oe=g.pc+600;for(T=0;16>T;++T)Q[se+32*T-1]=129;for(T=0;8>T;++T)oe[he+32*T-1]=129,be[Oe+32*T-1]=129;for(0<W?Q[se-1-32]=oe[he-1-32]=be[Oe-1-32]=129:(a(Q,se-32-1,127,21),a(oe,he-32-1,127,9),a(be,Oe-32-1,127,9)),M=0;M<g.za;++M){var ue=x.ya[x.aa+M];if(0<M){for(T=-1;16>T;++T)s(Q,se+32*T-4,Q,se+32*T+12,4);for(T=-1;8>T;++T)s(oe,he+32*T-4,oe,he+32*T+4,4),s(be,Oe+32*T-4,be,Oe+32*T+4,4)}var xe=g.Gd,Ce=g.Hd+M,qe=ue.ad,ke=ue.Hc;if(0<W&&(s(Q,se-32,xe[Ce].y,0,16),s(oe,he-32,xe[Ce].f,0,8),s(be,Oe-32,xe[Ce].ea,0,8)),ue.Za){var ze=Q,$e=se-32+16;for(0<W&&(M>=g.za-1?a(ze,$e,xe[Ce].y[15],4):s(ze,$e,xe[Ce+1].y,0,4)),T=0;4>T;T++)ze[$e+128+T]=ze[$e+256+T]=ze[$e+384+T]=ze[$e+0+T];for(T=0;16>T;++T,ke<<=2)ze=Q,$e=se+$r[T],Ir[ue.Ob[T]](ze,$e),Wc(ke,qe,16*+T,ze,$e)}else if(ze=$l(M,W,ue.Ob[0]),Zs[ze](Q,se),ke!=0)for(T=0;16>T;++T,ke<<=2)Wc(ke,qe,16*+T,Q,se+$r[T]);for(T=ue.Gc,ze=$l(M,W,ue.Dd),sa[ze](oe,he),sa[ze](be,Oe),ke=qe,ze=oe,$e=he,255&(ue=0|T)&&(170&ue?ki(ke,256,ze,$e):Vn(ke,256,ze,$e)),ue=be,ke=Oe,255&(T>>=8)&&(170&T?ki(qe,320,ue,ke):Vn(qe,320,ue,ke)),W<g.Ub-1&&(s(xe[Ce].y,0,Q,se+480,16),s(xe[Ce].f,0,oe,he+224,8),s(xe[Ce].ea,0,be,Oe+224,8)),T=8*Z*g.B,xe=g.sa,Ce=g.ta+16*M+16*Z*g.R,qe=g.qa,ue=g.ra+8*M+T,ke=g.Ha,ze=g.Ia+8*M+T,T=0;16>T;++T)s(xe,Ce+T*g.R,Q,se+32*T,16);for(T=0;8>T;++T)s(qe,ue+T*g.B,oe,he+32*T,8),s(ke,ze+T*g.B,be,Oe+32*T,8)}}function ta(g,x,T,M,W,Z,Q,se,oe){var he=[0],be=[0],Oe=0,ue=oe!=null?oe.kd:0,xe=oe??new tt;if(g==null||12>T)return 7;xe.data=g,xe.w=x,xe.ha=T,x=[x],T=[T],xe.gb=[xe.gb];e:{var Ce=x,qe=T,ke=xe.gb;if(e(g!=null),e(qe!=null),e(ke!=null),ke[0]=0,12<=qe[0]&&!t(g,Ce[0],"RIFF")){if(t(g,Ce[0]+8,"WEBP")){ke=3;break e}var ze=at(g,Ce[0]+4);if(12>ze||4294967286<ze){ke=3;break e}if(ue&&ze>qe[0]-8){ke=7;break e}ke[0]=ze,Ce[0]+=12,qe[0]-=12}ke=0}if(ke!=0)return ke;for(ze=0<xe.gb[0],T=T[0];;){e:{var $e=g;qe=x,ke=T;var lt=he,Qe=be,Vt=Ce=[0];if((Lt=Oe=[Oe])[0]=0,8>ke[0])ke=7;else{if(!t($e,qe[0],"VP8X")){if(at($e,qe[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var kt=at($e,qe[0]+8),un=1+Je($e,qe[0]+12);if(2147483648<=un*($e=1+Je($e,qe[0]+15))){ke=3;break e}Vt!=null&&(Vt[0]=kt),lt!=null&&(lt[0]=un),Qe!=null&&(Qe[0]=$e),qe[0]+=18,ke[0]-=18,Lt[0]=1}ke=0}}if(Oe=Oe[0],Ce=Ce[0],ke!=0)return ke;if(qe=!!(2&Ce),!ze&&Oe)return 3;if(Z!=null&&(Z[0]=!!(16&Ce)),Q!=null&&(Q[0]=qe),se!=null&&(se[0]=0),Q=he[0],Ce=be[0],Oe&&qe&&oe==null){ke=0;break}if(4>T){ke=7;break}if(ze&&Oe||!ze&&!Oe&&!t(g,x[0],"ALPH")){T=[T],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{kt=g,ke=x,ze=T;var Lt=xe.gb;lt=xe.na,Qe=xe.P,Vt=xe.Sa,un=22,e(kt!=null),e(ze!=null),$e=ke[0];var Tn=ze[0];for(e(lt!=null),e(Vt!=null),lt[0]=null,Qe[0]=null,Vt[0]=0;;){if(ke[0]=$e,ze[0]=Tn,8>Tn){ke=7;break e}var vr=at(kt,$e+4);if(4294967286<vr){ke=3;break e}var gn=8+vr+1&-2;if(un+=gn,0<Lt&&un>Lt){ke=3;break e}if(!t(kt,$e,"VP8 ")||!t(kt,$e,"VP8L")){ke=0;break e}if(Tn[0]<gn){ke=7;break e}t(kt,$e,"ALPH")||(lt[0]=kt,Qe[0]=$e+8,Vt[0]=vr),$e+=gn,Tn-=gn}}if(T=T[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],ke!=0)break}T=[T],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(Lt=g,ke=x,ze=T,lt=xe.gb[0],Qe=xe.Ja,Vt=xe.xa,kt=ke[0],$e=!t(Lt,kt,"VP8 "),un=!t(Lt,kt,"VP8L"),e(Lt!=null),e(ze!=null),e(Qe!=null),e(Vt!=null),8>ze[0])ke=7;else{if($e||un){if(Lt=at(Lt,kt+4),12<=lt&&Lt>lt-12){ke=3;break e}if(ue&&Lt>ze[0]-8){ke=7;break e}Qe[0]=Lt,ke[0]+=8,ze[0]-=8,Vt[0]=un}else Vt[0]=5<=ze[0]&&Lt[kt+0]==47&&!(Lt[kt+4]>>5),Qe[0]=ze[0];ke=0}if(T=T[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],x=x[0],ke!=0)break;if(4294967286<xe.Ja)return 3;if(se==null||qe||(se[0]=xe.xa?2:1),Q=[Q],Ce=[Ce],xe.xa){if(5>T){ke=7;break}se=Q,ue=Ce,qe=Z,g==null||5>T?g=0:5<=T&&g[x+0]==47&&!(g[x+4]>>5)?(ze=[0],Lt=[0],lt=[0],pe(Qe=new $,g,x,T),_t(Qe,ze,Lt,lt)?(se!=null&&(se[0]=ze[0]),ue!=null&&(ue[0]=Lt[0]),qe!=null&&(qe[0]=lt[0]),g=1):g=0):g=0}else{if(10>T){ke=7;break}se=Ce,g==null||10>T||!Xi(g,x+3,T-3)?g=0:(ue=g[x+0]|g[x+1]<<8|g[x+2]<<16,qe=16383&(g[x+7]<<8|g[x+6]),g=16383&(g[x+9]<<8|g[x+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=xe.Ja||!qe||!g?g=0:(Q&&(Q[0]=qe),se&&(se[0]=g),g=1))}if(!g||(Q=Q[0],Ce=Ce[0],Oe&&(he[0]!=Q||be[0]!=Ce)))return 3;oe!=null&&(oe[0]=xe,oe.offset=x-oe.w,e(4294967286>x-oe.w),e(oe.offset==oe.ha-T));break}return ke==0||ke==7&&Oe&&oe==null?(Z!=null&&(Z[0]|=xe.na!=null&&0<xe.na.length),M!=null&&(M[0]=Q),W!=null&&(W[0]=Ce),0):ke}function Ga(g,x,T){var M=x.width,W=x.height,Z=0,Q=0,se=M,oe=W;if(x.Da=g!=null&&0<g.Da,x.Da&&(se=g.cd,oe=g.bd,Z=g.v,Q=g.j,11>T||(Z&=-2,Q&=-2),0>Z||0>Q||0>=se||0>=oe||Z+se>M||Q+oe>W))return 0;if(x.v=Z,x.j=Q,x.va=Z+se,x.o=Q+oe,x.U=se,x.T=oe,x.da=g!=null&&0<g.da,x.da){if(!et(se,oe,T=[g.ib],Z=[g.hb]))return 0;x.ib=T[0],x.hb=Z[0]}return x.ob=g!=null&&g.ob,x.Kb=g==null||!g.Sd,x.da&&(x.ob=x.ib<3*M/4&&x.hb<3*W/4,x.Kb=0),1}function Gc(g){if(g==null)return 2;if(11>g.S){var x=g.f.RGBA;x.fb+=(g.height-1)*x.A,x.A=-x.A}else x=g.f.kb,g=g.height,x.O+=(g-1)*x.fa,x.fa=-x.fa,x.N+=(g-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(g-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(g-1)*x.lb,x.lb=-x.lb);return 0}function na(g,x,T,M){if(M==null||0>=g||0>=x)return 2;if(T!=null){if(T.Da){var W=T.cd,Z=T.bd,Q=-2&T.v,se=-2&T.j;if(0>Q||0>se||0>=W||0>=Z||Q+W>g||se+Z>x)return 2;g=W,x=Z}if(T.da){if(!et(g,x,W=[T.ib],Z=[T.hb]))return 2;g=W[0],x=Z[0]}}M.width=g,M.height=x;e:{var oe=M.width,he=M.height;if(g=M.S,0>=oe||0>=he||!(g>=Hu&&13>g))g=2;else{if(0>=M.Rd&&M.sd==null){Q=Z=W=x=0;var be=(se=oe*Ju[g])*he;if(11>g||(Z=(he+1)/2*(x=(oe+1)/2),g==12&&(Q=(W=oe)*he)),(he=o(be+2*Z+Q))==null){g=1;break e}M.sd=he,11>g?((oe=M.f.RGBA).eb=he,oe.fb=0,oe.A=se,oe.size=be):((oe=M.f.kb).y=he,oe.O=0,oe.fa=se,oe.Fd=be,oe.f=he,oe.N=0+be,oe.Ab=x,oe.Cd=Z,oe.ea=he,oe.W=0+be+Z,oe.Db=x,oe.Ed=Z,g==12&&(oe.F=he,oe.J=0+be+2*Z),oe.Tc=Q,oe.lb=W)}if(x=1,W=M.S,Z=M.width,Q=M.height,W>=Hu&&13>W)if(11>W)g=M.f.RGBA,x&=(se=Math.abs(g.A))*(Q-1)+Z<=g.size,x&=se>=Z*Ju[W],x&=g.eb!=null;else{g=M.f.kb,se=(Z+1)/2,be=(Q+1)/2,oe=Math.abs(g.fa),he=Math.abs(g.Ab);var Oe=Math.abs(g.Db),ue=Math.abs(g.lb),xe=ue*(Q-1)+Z;x&=oe*(Q-1)+Z<=g.Fd,x&=he*(be-1)+se<=g.Cd,x=(x&=Oe*(be-1)+se<=g.Ed)&oe>=Z&he>=se&Oe>=se,x&=g.y!=null,x&=g.f!=null,x&=g.ea!=null,W==12&&(x&=ue>=Z,x&=xe<=g.Tc,x&=g.F!=null)}else x=0;g=x?0:2}}return g!=0||T!=null&&T.fd&&(g=Gc(M)),g}var To=64,ii=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xs=24,xa=32,wa=8,$a=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(g){return g},F.Predictor2=function(g,x,T){return x[T+0]},F.Predictor3=function(g,x,T){return x[T+1]},F.Predictor4=function(g,x,T){return x[T-1]},F.Predictor5=function(g,x,T){return Ae(Ae(g,x[T+1]),x[T+0])},F.Predictor6=function(g,x,T){return Ae(g,x[T-1])},F.Predictor7=function(g,x,T){return Ae(g,x[T+0])},F.Predictor8=function(g,x,T){return Ae(x[T-1],x[T+0])},F.Predictor9=function(g,x,T){return Ae(x[T+0],x[T+1])},F.Predictor10=function(g,x,T){return Ae(Ae(g,x[T-1]),Ae(x[T+0],x[T+1]))},F.Predictor11=function(g,x,T){var M=x[T+0];return 0>=mt(M>>24&255,g>>24&255,(x=x[T-1])>>24&255)+mt(M>>16&255,g>>16&255,x>>16&255)+mt(M>>8&255,g>>8&255,x>>8&255)+mt(255&M,255&g,255&x)?M:g},F.Predictor12=function(g,x,T){var M=x[T+0];return(Ke((g>>24&255)+(M>>24&255)-((x=x[T-1])>>24&255))<<24|Ke((g>>16&255)+(M>>16&255)-(x>>16&255))<<16|Ke((g>>8&255)+(M>>8&255)-(x>>8&255))<<8|Ke((255&g)+(255&M)-(255&x)))>>>0},F.Predictor13=function(g,x,T){var M=x[T-1];return(bt((g=Ae(g,x[T+0]))>>24&255,M>>24&255)<<24|bt(g>>16&255,M>>16&255)<<16|bt(g>>8&255,M>>8&255)<<8|bt(255&g,255&M))>>>0};var Yl=F.PredictorAdd0;F.PredictorAdd1=st,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var Xl=F.PredictorAdd2;je("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Wr,zu=F.ColorIndexInverseTransform,_a=F.MapARGB,Sa=F.VP8LColorIndexInverseTransformAlpha,Ts=F.MapAlpha,Ya=F.VP8LPredictorsAdd=[];Ya.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var Zl,Kl,Xa,Za,Na,ll,vi,Ka,Vs,ki,$n,Vn,cr,Gr,Aa,ra,cl,$c,ld,Vf,Ff,Bf,cd,ud,ul,ji,Yc,yi,hl=o(511),qu=o(2041),Xc=o(225),Zc=o(767),Uu=0,Qa=qu,Kc=Xc,Fs=Zc,ks=hl,Hu=0,Bs=1,Wu=2,Ei=3,Qc=4,Ql=5,ko=6,Jc=7,Gu=8,Jl=9,$u=10,Mi=[2,3,7],ec=[3,3,11],dl=[280,256,256,256,40],Yu=[0,1,1,1,0],eu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Li=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Oi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jo=8,Di=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ri=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],xi=null,Pf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],zf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],js=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],br=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],kn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zs=[],Ir=[],sa=[],Eo=1,dd=2,Ja=[],Es=[];Ua("UpsampleRgbLinePair",Ha,3),Ua("UpsampleBgrLinePair",ms,3),Ua("UpsampleRgbaLinePair",Ys,4),Ua("UpsampleBgraLinePair",ya,4),Ua("UpsampleArgbLinePair",Gl,4),Ua("UpsampleRgba4444LinePair",Co,2),Ua("UpsampleRgb565LinePair",Ao,2);var fl=F.UpsampleRgbLinePair,fd=F.UpsampleBgrLinePair,tc=F.UpsampleRgbaLinePair,Zu=F.UpsampleBgraLinePair,Mo=F.UpsampleArgbLinePair,Ca=F.UpsampleRgba4444LinePair,Lo=F.UpsampleRgb565LinePair,Ii=16,nc=1<<Ii-1,pl=-227,Oo=482,Ku=6,Do=0,Ms=o(256),Qu=o(256),qf=o(256),p0=o(256),m0=o(Oo-pl),g0=o(Oo-pl);Wa("YuvToRgbRow",Ha,3),Wa("YuvToBgrRow",ms,3),Wa("YuvToRgbaRow",Ys,4),Wa("YuvToBgraRow",ya,4),Wa("YuvToArgbRow",Gl,4),Wa("YuvToRgba4444Row",Co,2),Wa("YuvToRgb565Row",Ao,2);var $r=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rc=[0,2,8],tu=[8,7,6,4,4,2,2,2,1,1,1,1],nu=1;this.WebPDecodeRGBA=function(g,x,T,M,W){var Z=Bs,Q=new Ge,se=new Tt;Q.ba=se,se.S=Z,se.width=[se.width],se.height=[se.height];var oe=se.width,he=se.height,be=new gt;if(be==null||g==null)var Oe=2;else e(be!=null),Oe=ta(g,x,T,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Oe!=0?oe=0:(oe!=null&&(oe[0]=be.width[0]),he!=null&&(he[0]=be.height[0]),oe=1),oe){se.width=se.width[0],se.height=se.height[0],M!=null&&(M[0]=se.width),W!=null&&(W[0]=se.height);e:{if(M=new ni,(W=new tt).data=g,W.w=x,W.ha=T,W.kd=1,x=[0],e(W!=null),((g=ta(W.data,W.w,W.ha,null,null,null,x,null,W))==0||g==7)&&x[0]&&(g=4),(x=g)==0){if(e(Q!=null),M.data=W.data,M.w=W.w+W.offset,M.ha=W.ha-W.offset,M.put=it,M.ac=Rt,M.bc=Te,M.ma=Q,W.xa){if((g=Le())==null){Q=1;break e}if((function(ue,xe){var Ce=[0],qe=[0],ke=[0];t:for(;;){if(ue==null)return 0;if(xe==null)return ue.a=2,0;if(ue.l=xe,ue.a=0,pe(ue.m,xe.data,xe.w,xe.ha),!_t(ue.m,Ce,qe,ke)){ue.a=3;break t}if(ue.xb=dd,xe.width=Ce[0],xe.height=qe[0],!Be(Ce[0],qe[0],1,ue,null))break t;return 1}return e(ue.a!=0),0})(g,M)){if(M=(x=na(M.width,M.height,Q.Oa,Q.ba))==0){t:{M=g;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((T=M.l)!=null),e((W=T.ma)!=null),M.xb!=0){if(M.ca=W.ba,M.tb=W.tb,e(M.ca!=null),!Ga(W.Oa,T,Ei)){M.a=2;break n}if(!nt(M,T.width)||T.da)break n;if((T.da||Et(M.ca.S))&&Ji(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Ji()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!G(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!Ln(M,M.V,M.Ba,M.c,M.i,T.o,Pn))break n;W.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(x=g.a)}else x=g.a}else{if((g=new ri)==null){Q=1;break e}if(g.Fa=W.na,g.P=W.P,g.qc=W.Sa,Ns(g,M)){if((x=na(M.width,M.height,Q.Oa,Q.ba))==0){if(g.Aa=0,T=Q.Oa,e((W=g)!=null),T!=null){if(0<(oe=0>(oe=T.Md)?0:100<oe?255:255*oe/100)){for(he=be=0;4>he;++he)12>(Oe=W.pb[he]).lc&&(Oe.ia=oe*tu[0>Oe.lc?0:Oe.lc]>>3),be|=Oe.ia;be&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=T.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(ue,xe){if(ue==null)return 0;if(xe==null)return Cn(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!Ns(ue,xe))return 0;if(e(ue.cb),xe.ac==null||xe.ac(xe)){xe.ob&&(ue.L=0);var Ce=rc[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=xe.v-Ce>>4,ue.zb=xe.j-Ce>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=xe.o+15+Ce>>4,ue.Hb=xe.va+15+Ce>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var qe=ue.ed;for(Ce=0;4>Ce;++Ce){var ke;if(ue.Qa.Cb){var ze=ue.Qa.Lb[Ce];ue.Qa.Fb||(ze+=qe.Tb)}else ze=qe.Tb;for(ke=0;1>=ke;++ke){var $e=ue.gd[Ce][ke],lt=ze;if(qe.Pc&&(lt+=qe.vd[0],ke&&(lt+=qe.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var Qe=lt;0<qe.wb&&(Qe=4<qe.wb?Qe>>2:Qe>>1)>9-qe.wb&&(Qe=9-qe.wb),1>Qe&&(Qe=1),$e.dd=Qe,$e.tc=2*lt+Qe,$e.ld=40<=lt?2:15<=lt?1:0}else $e.tc=0;$e.La=ke}}}Ce=0}else Cn(ue,6,"Frame setup failed"),Ce=ue.a;if(Ce=Ce==0){if(Ce){ue.$c=0,0<ue.Aa||(ue.Ic=nu);t:{Ce=ue.Ic,qe=4*(Qe=ue.za);var Vt=32*Qe,kt=Qe+1,un=0<ue.L?Qe*(0<ue.Aa?2:1):0,Lt=(ue.Aa==2?2:1)*Qe;if(($e=qe+832+(ke=3*(16*Ce+rc[ue.L])/2*Vt)+(ze=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=$e)Ce=0;else{if($e>ue.Vb){if(ue.Vb=0,ue.Ec=o($e),ue.Fc=0,ue.Ec==null){Ce=Cn(ue,1,"no memory during frame initialization.");break t}ue.Vb=$e}$e=ue.Ec,lt=ue.Fc,ue.Ac=$e,ue.Bc=lt,lt+=qe,ue.Gd=u(Vt,ds),ue.Hd=0,ue.rb=u(kt+1,dn),ue.sb=1,ue.wa=un?u(un,Wn):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=Qe),e(!0),ue.oc=$e,ue.pc=lt,lt+=832,ue.ya=u(Lt,Gn),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=Qe),ue.R=16*Qe,ue.B=8*Qe,Qe=(Vt=rc[ue.L])*ue.R,Vt=Vt/2*ue.B,ue.sa=$e,ue.ta=lt+Qe,ue.qa=ue.sa,ue.ra=ue.ta+16*Ce*ue.R+Vt,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Ce*ue.B+Vt,ue.$c=0,lt+=ke,ue.mb=ze?$e:null,ue.nb=ze?lt:null,e(lt+ze<=ue.Fc+ue.Vb),Zi(ue),a(ue.Ac,ue.Bc,0,qe),Ce=1}}if(Ce){if(xe.ka=0,xe.y=ue.sa,xe.O=ue.ta,xe.f=ue.qa,xe.N=ue.ra,xe.ea=ue.Ha,xe.Vd=ue.Ia,xe.fa=ue.R,xe.Rc=ue.B,xe.F=null,xe.J=0,!Uu){for(Ce=-255;255>=Ce;++Ce)hl[255+Ce]=0>Ce?-Ce:Ce;for(Ce=-1020;1020>=Ce;++Ce)qu[1020+Ce]=-128>Ce?-128:127<Ce?127:Ce;for(Ce=-112;112>=Ce;++Ce)Xc[112+Ce]=-16>Ce?-16:15<Ce?15:Ce;for(Ce=-255;510>=Ce;++Ce)Zc[255+Ce]=0>Ce?0:255<Ce?255:Ce;Uu=1}vi=Ki,Ka=el,ki=$s,$n=Vc,Vn=Fc,Vs=zl,cr=Bu,Gr=za,Aa=H,ra=fe,cl=Pu,$c=S,ld=ge,Vf=Se,Ff=Va,Bf=Fa,cd=al,ud=Uc,Ir[0]=Vu,Ir[1]=Ou,Ir[2]=Iu,Ir[3]=zc,Ir[4]=mi,Ir[5]=qc,Ir[6]=As,Ir[7]=rl,Ir[8]=sl,Ir[9]=gi,Zs[0]=Qi,Zs[1]=Bc,Zs[2]=Pc,Zs[3]=Ru,Zs[4]=Ra,Zs[5]=nl,Zs[6]=No,sa[0]=ql,sa[1]=Du,sa[2]=ga,sa[3]=Fu,sa[4]=ps,sa[5]=Ul,sa[6]=ba,Ce=1}else Ce=0}Ce&&(Ce=(function(Tn,vr){for(Tn.M=0;Tn.M<Tn.Va;++Tn.M){var gn,jt=Tn.Jc[Tn.M&Tn.Xb],wt=Tn.m,Cr=Tn;for(gn=0;gn<Cr.za;++gn){var en=wt,xn=Cr,Qn=xn.Ac,as=xn.Bc+4*gn,Ls=xn.zc,ur=xn.ya[xn.aa+gn];if(xn.Qa.Bb?ur.$b=_e(en,xn.Pa.jb[0])?2+_e(en,xn.Pa.jb[2]):_e(en,xn.Pa.jb[1]):ur.$b=0,xn.kc&&(ur.Ad=_e(en,xn.Bd)),ur.Za=!_e(en,145)+0,ur.Za){var Kr=ur.Ob,Ps=0;for(xn=0;4>xn;++xn){var Qr,Nn=Ls[0+xn];for(Qr=0;4>Qr;++Qr){Nn=js[Qn[as+Qr]][Nn];for(var zn=Xu[_e(en,Nn[0])];0<zn;)zn=Xu[2*zn+_e(en,Nn[zn])];Nn=-zn,Qn[as+Qr]=Nn}s(Kr,Ps,Qn,as,4),Ps+=4,Ls[0+xn]=Nn}}else Nn=_e(en,156)?_e(en,128)?1:3:_e(en,163)?2:0,ur.Ob[0]=Nn,a(Qn,as,Nn,4),a(Ls,0,Nn,4);ur.Dd=_e(en,142)?_e(en,114)?_e(en,183)?1:3:2:0}if(Cr.m.Ka)return Cn(Tn,7,"Premature end-of-partition0 encountered.");for(;Tn.ja<Tn.za;++Tn.ja){if(Cr=jt,en=(wt=Tn).rb[wt.sb-1],Qn=wt.rb[wt.sb+wt.ja],gn=wt.ya[wt.aa+wt.ja],as=wt.kc?gn.Ad:0)en.la=Qn.la=0,gn.Za||(en.Na=Qn.Na=0),gn.Hc=0,gn.Gc=0,gn.ia=0;else{var Tr,Yn;if(en=Qn,Qn=Cr,as=wt.Pa.Xc,Ls=wt.ya[wt.aa+wt.ja],ur=wt.pb[Ls.$b],xn=Ls.ad,Kr=0,Ps=wt.rb[wt.sb-1],Nn=Qr=0,a(xn,Kr,0,384),Ls.Za)var os=0,kr=as[3];else{zn=o(16);var qn=en.Na+Ps.Na;if(qn=xi(Qn,as[1],qn,ur.Eb,0,zn,0),en.Na=Ps.Na=(0<qn)+0,1<qn)vi(zn,0,xn,Kr);else{var Yr=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)xn[Kr+zn]=Yr}os=1,kr=as[0]}var Jn=15&en.la,Jr=15&Ps.la;for(zn=0;4>zn;++zn){var es=1&Jr;for(Yr=Yn=0;4>Yr;++Yr)Jn=Jn>>1|(es=(qn=xi(Qn,kr,qn=es+(1&Jn),ur.Sc,os,xn,Kr))>os)<<7,Yn=Yn<<2|(3<qn?3:1<qn?2:xn[Kr+0]!=0),Kr+=16;Jn>>=4,Jr=Jr>>1|es<<7,Qr=(Qr<<8|Yn)>>>0}for(kr=Jn,os=Jr>>4,Tr=0;4>Tr;Tr+=2){for(Yn=0,Jn=en.la>>4+Tr,Jr=Ps.la>>4+Tr,zn=0;2>zn;++zn){for(es=1&Jr,Yr=0;2>Yr;++Yr)qn=es+(1&Jn),Jn=Jn>>1|(es=0<(qn=xi(Qn,as[2],qn,ur.Qc,0,xn,Kr)))<<3,Yn=Yn<<2|(3<qn?3:1<qn?2:xn[Kr+0]!=0),Kr+=16;Jn>>=2,Jr=Jr>>1|es<<5}Nn|=Yn<<4*Tr,kr|=Jn<<4<<Tr,os|=(240&Jr)<<Tr}en.la=kr,Ps.la=os,Ls.Hc=Qr,Ls.Gc=Nn,Ls.ia=43690&Nn?0:ur.ia,as=!(Qr|Nn)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[gn.$b][gn.Za],wt.wa[wt.Y+wt.ja].La|=!as),Cr.Ka)return Cn(Tn,7,"Premature end-of-file encountered.")}if(Zi(Tn),wt=vr,Cr=1,gn=(jt=Tn).D,en=0<jt.L&&jt.M>=jt.zb&&jt.M<=jt.Va,jt.Aa==0)t:{if(gn.M=jt.M,gn.uc=en,bi(jt,gn),Cr=1,gn=(Yn=jt.D).Nb,en=(Nn=rc[jt.L])*jt.R,Qn=Nn/2*jt.B,zn=16*gn*jt.R,Yr=8*gn*jt.B,as=jt.sa,Ls=jt.ta-en+zn,ur=jt.qa,xn=jt.ra-Qn+Yr,Kr=jt.Ha,Ps=jt.Ia-Qn+Yr,Jr=(Jn=Yn.M)==0,Qr=Jn>=jt.Va-1,jt.Aa==2&&bi(jt,Yn),Yn.uc)for(es=(qn=jt).D.M,e(qn.D.uc),Yn=qn.yb;Yn<qn.Hb;++Yn){os=Yn,kr=es;var rr=(Fn=(ts=qn).D).Nb;Tr=ts.R;var Fn=Fn.wa[Fn.Y+os],zs=ts.sa,Vr=ts.ta+16*rr*Tr+16*os,Yt=Fn.dd,Xt=Fn.tc;if(Xt!=0)if(e(3<=Xt),ts.L==1)0<os&&Bf(zs,Vr,Tr,Xt+4),Fn.La&&ud(zs,Vr,Tr,Xt),0<kr&&Ff(zs,Vr,Tr,Xt+4),Fn.La&&cd(zs,Vr,Tr,Xt);else{var Un=ts.B,ai=ts.qa,Vi=ts.ra+8*rr*Un+8*os,Ks=ts.Ha,ts=ts.Ia+8*rr*Un+8*os;rr=Fn.ld,0<os&&(Gr(zs,Vr,Tr,Xt+4,Yt,rr),ra(ai,Vi,Ks,ts,Un,Xt+4,Yt,rr)),Fn.La&&($c(zs,Vr,Tr,Xt,Yt,rr),Vf(ai,Vi,Ks,ts,Un,Xt,Yt,rr)),0<kr&&(cr(zs,Vr,Tr,Xt+4,Yt,rr),Aa(ai,Vi,Ks,ts,Un,Xt+4,Yt,rr)),Fn.La&&(cl(zs,Vr,Tr,Xt,Yt,rr),ld(ai,Vi,Ks,ts,Un,Xt,Yt,rr))}}if(jt.ia&&alert("todo:DitherRow"),wt.put!=null){if(Yn=16*Jn,Jn=16*(Jn+1),Jr?(wt.y=jt.sa,wt.O=jt.ta+zn,wt.f=jt.qa,wt.N=jt.ra+Yr,wt.ea=jt.Ha,wt.W=jt.Ia+Yr):(Yn-=Nn,wt.y=as,wt.O=Ls,wt.f=ur,wt.N=xn,wt.ea=Kr,wt.W=Ps),Qr||(Jn-=Nn),Jn>wt.o&&(Jn=wt.o),wt.F=null,wt.J=null,jt.Fa!=null&&0<jt.Fa.length&&Yn<Jn&&(wt.J=lr(jt,wt,Yn,Jn-Yn),wt.F=jt.mb,wt.F==null&&wt.F.length==0)){Cr=Cn(jt,3,"Could not decode alpha data.");break t}Yn<wt.j&&(Nn=wt.j-Yn,Yn=wt.j,e(!(1&Nn)),wt.O+=jt.R*Nn,wt.N+=jt.B*(Nn>>1),wt.W+=jt.B*(Nn>>1),wt.F!=null&&(wt.J+=wt.width*Nn)),Yn<Jn&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=Yn-wt.j,wt.U=wt.va-wt.v,wt.T=Jn-Yn,Cr=wt.put(wt))}gn+1!=jt.Ic||Qr||(s(jt.sa,jt.ta-en,as,Ls+16*jt.R,en),s(jt.qa,jt.ra-Qn,ur,xn+8*jt.B,Qn),s(jt.Ha,jt.Ia-Qn,Kr,Ps+8*jt.B,Qn))}if(!Cr)return Cn(Tn,6,"Output aborted.")}return 1})(ue,xe)),xe.bc!=null&&xe.bc(xe),Ce&=1}return Ce?(ue.cb=0,Ce):0})(g,M)||(x=g.a)}}else x=g.a}x==0&&Q.Oa!=null&&Q.Oa.fd&&(x=Gc(Q.ba))}Q=x}Z=Q!=0?null:11>Z?se.f.RGBA.eb:se.f.kb.y}else Z=null;return Z};var Ju=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(F,J){for(var j="",I=0;I<4;I++)j+=String.fromCharCode(F[J++]);return j}function p(F,J){return F[J+0]|F[J+1]<<8}function y(F,J){return(F[J+0]|F[J+1]<<8|F[J+2]<<16)>>>0}function _(F,J){return(F[J+0]|F[J+1]<<8|F[J+2]<<16|F[J+3]<<24)>>>0}new h;var b=[0],N=[0],A=[],k=new h,C=n,O=(function(F,J){var j={},I=0,X=!1,P=0,ie=0;if(j.frames=[],!(function(E,$){for(var te=0;te<4;te++)if(E[$+te]!="RIFF".charCodeAt(te))return!0;return!1})(F,J)){for(_(F,J+=4),J+=8;J<F.length;){var Y=f(F,J),ne=_(F,J+=4);J+=4;var le=ne+(1&ne);switch(Y){case"VP8 ":case"VP8L":j.frames[I]===void 0&&(j.frames[I]={}),(q=j.frames[I]).src_off=X?ie:J-8,q.src_size=P+ne+8,I++,X&&(X=!1,P=0,ie=0);break;case"VP8X":(q=j.header={}).feature_flags=F[J];var pe=J+4;q.canvas_width=1+y(F,pe),pe+=3,q.canvas_height=1+y(F,pe),pe+=3;break;case"ALPH":X=!0,P=le+8,ie=J-8;break;case"ANIM":(q=j.header).bgcolor=_(F,J),pe=J+4,q.loop_count=p(F,pe),pe+=2;break;case"ANMF":var we,q;(q=j.frames[I]={}).offset_x=2*y(F,J),J+=3,q.offset_y=2*y(F,J),J+=3,q.width=1+y(F,J),J+=3,q.height=1+y(F,J),J+=3,q.duration=y(F,J),J+=3,we=F[J++],q.dispose=1&we,q.blend=we>>1&1}Y!="ANMF"&&(J+=le)}return j}})(C,0);O.response=C,O.rgbaoutput=!0,O.dataurl=!1;var R=O.header?O.header:null,V=O.frames?O.frames:null;if(R){R.loop_counter=R.loop_count,b=[R.canvas_height],N=[R.canvas_width];for(var B=0;B<V.length&&V[B].blend!=0;B++);}var U=V[0],z=k.WebPDecodeRGBA(C,U.src_off,U.src_size,N,b);U.rgba=z,U.imgwidth=N[0],U.imgheight=b[0];for(var L=0;L<N[0]*b[0]*4;L++)A[L]=z[L];return this.width=N,this.height=b,this.data=A,this}(function(n){var e,t,s,a,o,u,c,h,f,p=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new h,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new u,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new u,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var y=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=E;Object.defineProperty(this,"pdf",{get:function(){return $}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(G){te=!!G}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(G){ae=!!G}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(G){isNaN(G)||(re=G)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(G){isNaN(G)||(de=G)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(G){var Ee;typeof G=="number"?Ee=[G,G,G,G]:((Ee=new Array(4))[0]=G[0],Ee[1]=G.length>=2?G[1]:Ee[0],Ee[2]=G.length>=3?G[2]:Ee[0],Ee[3]=G.length>=4?G[3]:Ee[1]),f.margin=Ee}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(G){ce=G}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(G){ve=G}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(G){_e=G}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(G){G instanceof p&&(f=G)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(G){f.path=G}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(G){Ve=G}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(G){var Ee;Ee=_(G),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(G){var Ee=_(G);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(G){["butt","round","square"].indexOf(G)!==-1&&(this.ctx.lineCap=G,this.pdf.setLineCap(G))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(G){isNaN(G)||(this.ctx.lineWidth=G,this.pdf.setLineWidth(G))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(G){["bevel","round","miter"].indexOf(G)!==-1&&(this.ctx.lineJoin=G,this.pdf.setLineJoin(G))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(G){isNaN(G)||(this.ctx.miterLimit=G,this.pdf.setMiterLimit(G))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(G){this.ctx.textBaseline=G}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(G){["right","end","center","left","start"].indexOf(G)!==-1&&(this.ctx.textAlign=G)}});var Xe=null,Je=null,at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(G){Xe=null,Je=null,at=G}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(G){var Ee;if(this.ctx.font=G,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(G))!==null){var xt=Ee[1];Ee[2];var et=Ee[3],De=Ee[4];Ee[5];var rt=Ee[6],Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(De)[2];De=Math.floor(Ue==="px"?parseFloat(De)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(De)*this.pdf.getFontSize():parseFloat(De)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(De);var ht=(function(je){var ft,ct,He=[],ut=je.trim();if(ut==="")return ng;if(ut in wx)return[wx[ut]];for(;ut!=="";){switch(ct=null,ft=(ut=Sx(ut)).charAt(0)){case'"':case"'":ct=XL(ut.substring(1),ft);break;default:ct=ZL(ut)}if(ct===null||(He.push(ct[0]),(ut=Sx(ct[1]))!==""&&ut.charAt(0)!==","))return ng;ut=ut.replace(/^,/,"")}return He})(rt);if(this.fontFaces){var Ae=(function(je,ft){var ct=je.getFontList(),He=JSON.stringify(ct);if(Xe===null||Je!==He){var ut=(function(vt){var ot=[];return Object.keys(vt).forEach(function(ln){vt[ln].forEach(function(Et){var Bt=null;switch(Et){case"bold":Bt={family:ln,weight:"bold"};break;case"italic":Bt={family:ln,style:"italic"};break;case"bolditalic":Bt={family:ln,weight:"bold",style:"italic"};break;case"":case"normal":Bt={family:ln}}Bt!==null&&(Bt.ref={name:ln,style:Et},ot.push(Bt))})}),ot})(ct);Xe=(function(vt){for(var ot={},ln=0;ln<vt.length;++ln){var Et=tg(vt[ln]),Bt=Et.family,pn=Et.stretch,Tt=Et.style,gt=Et.weight;ot[Bt]=ot[Bt]||{},ot[Bt][pn]=ot[Bt][pn]||{},ot[Bt][pn][Tt]=ot[Bt][pn][Tt]||{},ot[Bt][pn][Tt][gt]=Et}return ot})(ut.concat(ft)),Je=He}return Xe})(this.pdf,this.fontFaces),Ke=ht.map(function(je){return{family:je,stretch:"normal",weight:et,style:xt}}),bt=(function(je,ft,ct){for(var He=(ct=ct||{}).defaultFontFamily||"times",ut=Object.assign({},YL,ct.genericFontFamilies||{}),vt=null,ot=null,ln=0;ln<ft.length;++ln)if(ut[(vt=tg(ft[ln])).family]&&(vt.family=ut[vt.family]),je.hasOwnProperty(vt.family)){ot=je[vt.family];break}if(!(ot=ot||je[He]))throw new Error("Could not find a font-family for the rule '"+_x(vt)+"' and default family '"+He+"'.");if(ot=(function(Et,Bt){if(Bt[Et])return Bt[Et];var pn=Bg[Et],Tt=pn<=Bg.normal?-1:1,gt=xx(Bt,P4,pn,Tt);if(!gt)throw new Error("Could not find a matching font-stretch value for "+Et);return gt})(vt.stretch,ot),ot=(function(Et,Bt){if(Bt[Et])return Bt[Et];for(var pn=B4[Et],Tt=0;Tt<pn.length;++Tt)if(Bt[pn[Tt]])return Bt[pn[Tt]];throw new Error("Could not find a matching font-style for "+Et)})(vt.style,ot),!(ot=(function(Et,Bt){if(Bt[Et])return Bt[Et];if(Et===400&&Bt[500])return Bt[500];if(Et===500&&Bt[400])return Bt[400];var pn=$L[Et],Tt=xx(Bt,z4,pn,Et<400?-1:1);if(!Tt)throw new Error("Could not find a matching font-weight for value "+Et);return Tt})(vt.weight,ot)))throw new Error("Failed to resolve a font for the rule '"+_x(vt)+"'.");return ot})(Ae,Ke);this.pdf.setFont(bt.ref.name,bt.ref.style)}else{var mt="";(et==="bold"||parseInt(et,10)>=700||xt==="bold")&&(mt="bold"),xt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var st="",dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pt=0;pt<ht.length;pt++){if(this.pdf.internal.getFont(ht[pt],mt,{noFallback:!0,disableWarning:!0})!==void 0){st=ht[pt];break}if(mt==="bolditalic"&&this.pdf.internal.getFont(ht[pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=ht[pt],mt="bold";else if(this.pdf.internal.getFont(ht[pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=ht[pt],mt="normal";break}}if(st===""){for(var Nt=0;Nt<ht.length;Nt++)if(dt[ht[Nt]]){st=dt[ht[Nt]];break}}st=st===""?"Times":st,this.pdf.setFont(st,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(G){this.ctx.globalCompositeOperation=G}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(G){this.ctx.globalAlpha=G}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(G){this.ctx.lineDashOffset=G,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(G){this.ctx.lineDash=G,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(G){this.ctx.ignoreClearRect=!!G}})};y.prototype.setLineDash=function(E){this.lineDash=E},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(E,$){if(isNaN(E)||isNaN($))throw xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new u(E,$));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new u(E,$)},y.prototype.closePath=function(){var E=new u(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&ar(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){E=new u(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(E.x,E.y)},y.prototype.lineTo=function(E,$){if(isNaN(E)||isNaN($))throw xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new u(E,$));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new u(te.x,te.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(E,$,te,ae){if(isNaN(te)||isNaN(ae)||isNaN(E)||isNaN($))throw xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new u(te,ae)),de=this.ctx.transform.applyToPoint(new u(E,$));this.path.push({type:"qct",x1:de.x,y1:de.y,x:re.x,y:re.y}),this.ctx.lastPoint=new u(re.x,re.y)},y.prototype.bezierCurveTo=function(E,$,te,ae,re,de){if(isNaN(re)||isNaN(de)||isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae))throw xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new u(re,de)),ve=this.ctx.transform.applyToPoint(new u(E,$)),_e=this.ctx.transform.applyToPoint(new u(te,ae));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:_e.x,y2:_e.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new u(ce.x,ce.y)},y.prototype.arc=function(E,$,te,ae,re,de){if(isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae)||isNaN(re))throw xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new u(E,$));E=ce.x,$=ce.y;var ve=this.ctx.transform.applyToPoint(new u(0,te)),_e=this.ctx.transform.applyToPoint(new u(0,0));te=Math.sqrt(Math.pow(ve.x-_e.x,2)+Math.pow(ve.y-_e.y,2))}Math.abs(re-ae)>=2*Math.PI&&(ae=0,re=2*Math.PI),this.path.push({type:"arc",x:E,y:$,radius:te,startAngle:ae,endAngle:re,counterclockwise:de})},y.prototype.arcTo=function(E,$,te,ae,re){throw new Error("arcTo not implemented.")},y.prototype.rect=function(E,$,te,ae){if(isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae))throw xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,$),this.lineTo(E+te,$),this.lineTo(E+te,$+ae),this.lineTo(E,$+ae),this.lineTo(E,$),this.lineTo(E+te,$),this.lineTo(E,$)},y.prototype.fillRect=function(E,$,te,ae){if(isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae))throw xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,$,te,ae),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},y.prototype.strokeRect=function(E,$,te,ae){if(isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae))throw xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(E,$,te,ae),this.stroke())},y.prototype.clearRect=function(E,$,te,ae){if(isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae))throw xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,$,te,ae))},y.prototype.save=function(E){E=typeof E!="boolean"||E;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage($),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},y.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage($),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(E){var $,te,ae,re;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))$=0,te=0,ae=0,re=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(de!==null)$=parseInt(de[1]),te=parseInt(de[2]),ae=parseInt(de[3]),re=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)$=parseInt(de[1]),te=parseInt(de[2]),ae=parseInt(de[3]),re=parseFloat(de[4]);else{if(re=1,typeof E=="string"&&E.charAt(0)!=="#"){var ce=new L4(E);E=ce.ok?ce.toHex():"#000000"}E.length===4?($=E.substring(1,2),$+=$,te=E.substring(2,3),te+=te,ae=E.substring(3,4),ae+=ae):($=E.substring(1,3),te=E.substring(3,5),ae=E.substring(5,7)),$=parseInt($,16),te=parseInt(te,16),ae=parseInt(ae,16)}}return{r:$,g:te,b:ae,a:re,style:E}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(E,$,te,ae){if(isNaN($)||isNaN(te)||typeof E!="string")throw xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!b.call(this)){var re=le(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:E,x:$,y:te,scale:de,angle:re,align:this.textAlign,maxWidth:ae})}},y.prototype.strokeText=function(E,$,te,ae){if(isNaN($)||isNaN(te)||typeof E!="string")throw xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ae=isNaN(ae)?void 0:ae;var re=le(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:E,x:$,y:te,scale:de,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:ae})}},y.prototype.measureText=function(E){if(typeof E!="string")throw xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,te=this.pdf.internal.scaleFactor,ae=$.internal.getFontSize(),re=$.getStringUnitWidth(E)*ae/$.internal.scaleFactor;return new function(de){var ce=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this}({width:re*=Math.round(96*te/72*1e4)/1e4})},y.prototype.scale=function(E,$){if(isNaN(E)||isNaN($))throw xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new h(E,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},y.prototype.rotate=function(E){if(isNaN(E))throw xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new h(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply($)},y.prototype.translate=function(E,$){if(isNaN(E)||isNaN($))throw xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new h(1,0,0,1,E,$);this.ctx.transform=this.ctx.transform.multiply(te)},y.prototype.transform=function(E,$,te,ae,re,de){if(isNaN(E)||isNaN($)||isNaN(te)||isNaN(ae)||isNaN(re)||isNaN(de))throw xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new h(E,$,te,ae,re,de);this.ctx.transform=this.ctx.transform.multiply(ce)},y.prototype.setTransform=function(E,$,te,ae,re,de){E=isNaN(E)?1:E,$=isNaN($)?0:$,te=isNaN(te)?0:te,ae=isNaN(ae)?1:ae,re=isNaN(re)?0:re,de=isNaN(de)?0:de,this.ctx.transform=new h(E,$,te,ae,re,de)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(E,$,te,ae,re,de,ce,ve,_e){var Ve=this.pdf.getImageProperties(E),Xe=1,Je=1,at=1,G=1;ae!==void 0&&ve!==void 0&&(at=ve/ae,G=_e/re,Xe=Ve.width/ae*ve/ae,Je=Ve.height/re*_e/re),de===void 0&&(de=$,ce=te,$=0,te=0),ae!==void 0&&ve===void 0&&(ve=ae,_e=re),ae===void 0&&ve===void 0&&(ve=Ve.width,_e=Ve.height);var Ee=this.ctx.transform.decompose(),xt=le(Ee.rotate.shx),et=new h,De=(et=(et=(et=et.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new c(de-$*at,ce-te*G,ae*Xe,re*Je));if(this.autoPaging){for(var rt,Ue=k.call(this,De),ht=[],Ae=0;Ae<Ue.length;Ae+=1)ht.indexOf(Ue[Ae])===-1&&ht.push(Ue[Ae]);R(ht);for(var Ke=ht[0],bt=ht[ht.length-1],mt=Ke;mt<bt+1;mt++){this.pdf.setPage(mt);var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=mt===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=mt===1?0:pt+(mt-2)*Nt;if(this.ctx.clip_path.length!==0){var ft=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(rt,this.posX+this.margin[3],-je+dt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=ft}var ct=JSON.parse(JSON.stringify(De));ct=O([ct],this.posX+this.margin[3],-je+dt+this.ctx.prevPageLastElemOffset)[0];var He=(mt>Ke||mt<bt)&&A.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Nt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,xt),He&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(E,"JPEG",De.x,De.y,De.w,De.h,null,null,xt)};var k=function(E,$,te){var ae=[];$=$||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":ae.push(Math.floor((E.y+re)/te)+1);break;case"arc":ae.push(Math.floor((E.y+re-E.radius)/te)+1),ae.push(Math.floor((E.y+re+E.radius)/te)+1);break;case"qct":var de=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);ae.push(Math.floor((de.y+re)/te)+1),ae.push(Math.floor((de.y+de.h+re)/te)+1);break;case"bct":var ce=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);ae.push(Math.floor((ce.y+re)/te)+1),ae.push(Math.floor((ce.y+ce.h+re)/te)+1);break;case"rect":ae.push(Math.floor((E.y+re)/te)+1),ae.push(Math.floor((E.y+E.h+re)/te)+1)}for(var ve=0;ve<ae.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<ae[ve];)C.call(this);return ae},C=function(){var E=this.fillStyle,$=this.strokeStyle,te=this.font,ae=this.lineCap,re=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=$,this.font=te,this.lineCap=ae,this.lineWidth=re,this.lineJoin=de},O=function(E,$,te){for(var ae=0;ae<E.length;ae++)switch(E[ae].type){case"bct":E[ae].x2+=$,E[ae].y2+=te;case"qct":E[ae].x1+=$,E[ae].y1+=te;default:E[ae].x+=$,E[ae].y+=te}return E},R=function(E){return E.sort(function($,te){return $-te})},V=function(E,$){var te=this.fillStyle,ae=this.strokeStyle,re=this.lineCap,de=this.lineWidth,ce=Math.abs(de*this.ctx.transform.scaleX),ve=this.lineJoin;if(this.autoPaging){for(var _e,Ve,Xe=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),at=[],G=0;G<Je.length;G++)if(Je[G].x!==void 0)for(var Ee=k.call(this,Je[G]),xt=0;xt<Ee.length;xt+=1)at.indexOf(Ee[xt])===-1&&at.push(Ee[xt]);for(var et=0;et<at.length;et++)for(;this.pdf.internal.getNumberOfPages()<at[et];)C.call(this);R(at);for(var De=at[0],rt=at[at.length-1],Ue=De;Ue<rt+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=te,this.strokeStyle=ae,this.lineCap=re,this.lineWidth=ce,this.lineJoin=ve;var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=Ue===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Ue===1?0:Ke+(Ue-2)*bt;if(this.ctx.clip_path.length!==0){var st=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(_e,this.posX+this.margin[3],-mt+Ae+this.ctx.prevPageLastElemOffset),B.call(this,E,!0),this.path=st}if(Ve=JSON.parse(JSON.stringify(Xe)),this.path=O(Ve,this.posX+this.margin[3],-mt+Ae+this.ctx.prevPageLastElemOffset),$===!1||Ue===0){var dt=(Ue>De||Ue<rt)&&A.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,bt,null).clip().discardPath()),B.call(this,E,$),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}this.path=Xe}else this.lineWidth=ce,B.call(this,E,$),this.lineWidth=de},B=function(E,$){if((E!=="stroke"||$||!N.call(this))&&(E==="stroke"||$||!b.call(this))){for(var te,ae,re=[],de=this.path,ce=0;ce<de.length;ce++){var ve=de[ce];switch(ve.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:ve,deltas:[],abs:[]});break;case"lt":var _e=re.length;if(de[ce-1]&&!isNaN(de[ce-1].x)&&(te=[ve.x-de[ce-1].x,ve.y-de[ce-1].y],_e>0)){for(;_e>=0;_e--)if(re[_e-1].close!==!0&&re[_e-1].begin!==!0){re[_e-1].deltas.push(te),re[_e-1].abs.push(ve);break}}break;case"bct":te=[ve.x1-de[ce-1].x,ve.y1-de[ce-1].y,ve.x2-de[ce-1].x,ve.y2-de[ce-1].y,ve.x-de[ce-1].x,ve.y-de[ce-1].y],re[re.length-1].deltas.push(te);break;case"qct":var Ve=de[ce-1].x+2/3*(ve.x1-de[ce-1].x),Xe=de[ce-1].y+2/3*(ve.y1-de[ce-1].y),Je=ve.x+2/3*(ve.x1-ve.x),at=ve.y+2/3*(ve.y1-ve.y),G=ve.x,Ee=ve.y;te=[Ve-de[ce-1].x,Xe-de[ce-1].y,Je-de[ce-1].x,at-de[ce-1].y,G-de[ce-1].x,Ee-de[ce-1].y],re[re.length-1].deltas.push(te);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(ve)}}ae=$?null:E==="stroke"?"stroke":"fill";for(var xt=!1,et=0;et<re.length;et++)if(re[et].arc)for(var De=re[et].abs,rt=0;rt<De.length;rt++){var Ue=De[rt];Ue.type==="arc"?L.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,$,!xt):X.call(this,Ue.x,Ue.y),xt=!0}else if(re[et].close===!0)this.pdf.internal.out("h"),xt=!1;else if(re[et].begin!==!0){var ht=re[et].start.x,Ae=re[et].start.y;P.call(this,re[et].deltas,ht,Ae),xt=!0}ae&&F.call(this,ae),$&&J.call(this)}},U=function(E){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-te;case"top":return E+$-te;case"hanging":return E+$-2*te;case"middle":return E+$/2-te;default:return E}},z=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function($,te){this.colorStops.push([$,te])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(E,$,te,ae,re,de,ce,ve,_e){for(var Ve=Y.call(this,te,ae,re,de),Xe=0;Xe<Ve.length;Xe++){var Je=Ve[Xe];Xe===0&&(_e?j.call(this,Je.x1+E,Je.y1+$):X.call(this,Je.x1+E,Je.y1+$)),ie.call(this,E,$,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}ve?J.call(this):F.call(this,ce)},F=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(E,$){this.pdf.internal.out(t(E)+" "+s($)+" m")},I=function(E){var $;switch(E.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var te,ae,re,de=this.pdf.getTextDimensions(E.text),ce=U.call(this,E.y),ve=z.call(this,ce)-de.h,_e=this.ctx.transform.applyToPoint(new u(E.x,ce));if(this.autoPaging){var Ve=this.ctx.transform.decompose(),Xe=new h;Xe=(Xe=(Xe=Xe.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var Je=this.ctx.transform.applyToRectangle(new c(E.x,ce,de.w,de.h)),at=Xe.applyToRectangle(new c(E.x,ve,de.w,de.h)),G=k.call(this,at),Ee=[],xt=0;xt<G.length;xt+=1)Ee.indexOf(G[xt])===-1&&Ee.push(G[xt]);R(Ee);for(var et=Ee[0],De=Ee[Ee.length-1],rt=et;rt<De+1;rt++){this.pdf.setPage(rt);var Ue=rt===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[2],Ke=Ae-this.margin[0],bt=this.pdf.internal.pageSize.width-this.margin[1],mt=bt-this.margin[3],st=rt===1?0:ht+(rt-2)*Ke;if(this.ctx.clip_path.length!==0){var dt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(te,this.posX+this.margin[3],-1*st+Ue),B.call(this,"fill",!0),this.path=dt}var pt=O([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-st+Ue+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*E.scale),re=this.lineWidth,this.lineWidth=re*E.scale);var Nt=this.autoPaging!=="text";if(Nt||pt.y+pt.h<=Ae){if(Nt||pt.y>=Ue&&pt.x<=bt){var je=Nt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||bt-pt.x)[0],ft=O([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-st+Ue+this.ctx.prevPageLastElemOffset)[0],ct=Nt&&(rt>et||rt<De)&&A.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ke,null).clip().discardPath()),this.pdf.text(je,ft.x,ft.y,{angle:E.angle,align:$,renderingMode:E.renderingMode}),ct&&this.pdf.restoreGraphicsState()}}else pt.y<Ae&&(this.ctx.prevPageLastElemOffset+=Ae-pt.y);E.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=re)}}else E.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*E.scale),re=this.lineWidth,this.lineWidth=re*E.scale),this.pdf.text(E.text,_e.x+this.posX,_e.y+this.posY,{angle:E.angle,align:$,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=re)},X=function(E,$,te,ae){te=te||0,ae=ae||0,this.pdf.internal.out(t(E+te)+" "+s($+ae)+" l")},P=function(E,$,te){return this.pdf.lines(E,$,te,null,null)},ie=function(E,$,te,ae,re,de,ce,ve){this.pdf.internal.out([e(a(te+E)),e(o(ae+$)),e(a(re+E)),e(o(de+$)),e(a(ce+E)),e(o(ve+$)),"c"].join(" "))},Y=function(E,$,te,ae){for(var re=2*Math.PI,de=Math.PI/2;$>te;)$-=re;var ce=Math.abs(te-$);ce<re&&ae&&(ce=re-ce);for(var ve=[],_e=ae?-1:1,Ve=$;ce>1e-5;){var Xe=Ve+_e*Math.min(ce,de);ve.push(ne.call(this,E,Ve,Xe)),ce-=Math.abs(Xe-Ve),Ve=Xe}return ve},ne=function(E,$,te){var ae=(te-$)/2,re=E*Math.cos(ae),de=E*Math.sin(ae),ce=re,ve=-de,_e=ce*ce+ve*ve,Ve=_e+ce*re+ve*de,Xe=4/3*(Math.sqrt(2*_e*Ve)-Ve)/(ce*de-ve*re),Je=ce-Xe*ve,at=ve+Xe*ce,G=Je,Ee=-at,xt=ae+$,et=Math.cos(xt),De=Math.sin(xt);return{x1:E*Math.cos($),y1:E*Math.sin($),x2:Je*et-at*De,y2:Je*De+at*et,x3:G*et-Ee*De,y3:G*De+Ee*et,x4:E*Math.cos(te),y4:E*Math.sin(te)}},le=function(E){return 180*E/Math.PI},pe=function(E,$,te,ae,re,de){var ce=E+.5*(te-E),ve=$+.5*(ae-$),_e=re+.5*(te-re),Ve=de+.5*(ae-de),Xe=Math.min(E,re,ce,_e),Je=Math.max(E,re,ce,_e),at=Math.min($,de,ve,Ve),G=Math.max($,de,ve,Ve);return new c(Xe,at,Je-Xe,G-at)},we=function(E,$,te,ae,re,de,ce,ve){var _e,Ve,Xe,Je,at,G,Ee,xt,et,De,rt,Ue,ht,Ae,Ke=te-E,bt=ae-$,mt=re-te,st=de-ae,dt=ce-re,pt=ve-de;for(Ve=0;Ve<41;Ve++)et=(Ee=(Xe=E+(_e=Ve/40)*Ke)+_e*((at=te+_e*mt)-Xe))+_e*(at+_e*(re+_e*dt-at)-Ee),De=(xt=(Je=$+_e*bt)+_e*((G=ae+_e*st)-Je))+_e*(G+_e*(de+_e*pt-G)-xt),Ve==0?(rt=et,Ue=De,ht=et,Ae=De):(rt=Math.min(rt,et),Ue=Math.min(Ue,De),ht=Math.max(ht,et),Ae=Math.max(Ae,De));return new c(Math.round(rt),Math.round(Ue),Math.round(ht-rt),Math.round(Ae-Ue))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,$,te=(E=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:$}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})($t.API),(function(n){var e=function(u){var c,h,f,p,y,_,b,N,A,k;for(h=[],f=0,p=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;p>f;f+=4)(y=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(_=(y=((y=((y=((y=(y-(k=y%85))/85)-(A=y%85))/85)-(N=y%85))/85)-(b=y%85))/85)%85,h.push(_+33,b+33,N+33,A+33,k+33)):h.push(122);return(function(C,O){for(var R=O;R>0;R--)C.pop()})(h,c.length),String.fromCharCode.apply(String,h)+"~>"},t=function(u){var c,h,f,p,y,_=String,b="length",N=255,A="charCodeAt",k="slice",C="replace";for(u[k](-2),u=u[k](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),f=[],p=0,y=(u+=c="uuuuu"[k](u[b]%5||5))[b];y>p;p+=5)h=52200625*(u[A](p)-33)+614125*(u[A](p+1)-33)+7225*(u[A](p+2)-33)+85*(u[A](p+3)-33)+(u[A](p+4)-33),f.push(N&h>>24,N&h>>16,N&h>>8,N&h);return(function(O,R){for(var V=R;V>0;V--)O.pop()})(f,c[b]),_.fromCharCode.apply(_,f)},s=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var h="",f=0;f<u.length;f+=2)h+=String.fromCharCode("0x"+(u[f]+u[f+1]));return h},o=function(u){for(var c=new Uint8Array(u.length),h=u.length;h--;)c[h]=u.charCodeAt(h);return(c=Lg(c)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(u,c){var h=0,f=u||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=s(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})($t.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(h,f,p){var y=new XMLHttpRequest,_=0,b=function(N){var A=N.length,k=[],C=String.fromCharCode;for(_=0;_<A;_+=1)k.push(C(255&N.charCodeAt(_)));return k.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?p(b(this.responseText)):p(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)})(a,o,u)}catch{}return c})(e,t,s)},n.loadImageFile=n.loadFile})($t.API),(function(n){function e(){return(hn.html2canvas?Promise.resolve(hn.html2canvas):Vh(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(hn.DOMPurify?Promise.resolve(hn.DOMPurify):Vh(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var h=ar(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(c,h){var f=document.createElement(c);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},o=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},u=function c(h){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),f);return(p=p.setProgress(1,c,1,[c])).set(h)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,h){return c.__proto__=h||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,h){return this.then(function(){switch(h=h||(function(f){switch(s(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),h){case"string":return this.then(t).then(function(f){return this.set({src:a("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var N=p[b],A=N.src.find(function(k){return k.format==="truetype"});A&&f.addFont(A.url,N.ref.name,N.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,f.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},u.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(s(c)!=="object")return this;var h=Object.keys(c||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(h)})},u.prototype.get=function(c,h){return this.then(function(){var f=c in u.template.prop?this.prop[c]:this.opt[c];return h?h(f):f})},u.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(c=c||$t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,h,f,p){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,h,f,p){return this.setProgress(c?this.progress.val+c:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},u.prototype.then=function(c,h){var f=this;return this.thenCore(c,h,function(p,y){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return f.updateProgress(null,p),_}).then(p,y).then(function(_){return f.updateProgress(1),_})})},u.prototype.thenCore=function(c,h,f){f=f||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),h&&(h=h.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:u.convert(Object.assign({},p),Promise.prototype),_=f.call(y,c,h);return u.convert(_,p.__proto__)},u.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},u.prototype.thenList=function(c){var h=this;return c.forEach(function(f){h=h.thenCore(f)}),h},u.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return u.convert(h,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,$t.getPageSize=function(c,h,f){if(ar(c)==="object"){var p=c;c=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var y,_=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var N,A=0,k=0;if(b.hasOwnProperty(_))A=b[_][1]/y,k=b[_][0]/y;else try{A=f[1],k=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",k>A&&(N=k,k=A,A=N);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",A>k&&(N=k,k=A,A=N)}return{width:k,height:A,unit:h,k:y,orientation:c}},n.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(tg):null;var f=new u(h);return h.worker?f:f.from(c).doCallback()}})($t.API),$t.API.addJS=function(n){return Ax=n,this.internal.events.subscribe("postPutResources",function(){H1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(H1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Nx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ax+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){H1!==void 0&&Nx!==void 0&&this.internal.out("/Names <</JavaScript "+H1+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=s.exec(u);if(c!=null){var h=c[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(o=0;o<f;o++){var y=t.internal.newObject();p.push(y);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<p.length;o++)t.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var h=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<s.children.length;f++)this.renderItems(s.children[f])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})($t.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,c){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),N=y.length,A={width:0,height:0,numcomponents:1},k=4;k<N;k+=2){if(k+=b,e.indexOf(y.charCodeAt(k+1))!==-1){_=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),A={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:_,numcomponents:y.charCodeAt(k+9)};break}b=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return A})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:f,index:s,alias:a}}return p}})($t.API),$t.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=OL(n,{checkCrc:!0}),u=o.width,c=o.height,h=o.channels,f=o.palette,p=o.depth;a=f&&h===1?(function(L){for(var F=L.width,J=L.height,j=L.data,I=L.palette,X=L.depth,P=!1,ie=[],Y=[],ne=void 0,le=!1,pe=0,we=0;we<I.length;we++){var q=jy(I[we],4),E=q[0],$=q[1],te=q[2],ae=q[3];ie.push(E,$,te),ae!=null&&(ae===0?(pe++,Y.length<1&&Y.push(we)):ae<255&&(le=!0))}if(le||pe>1){P=!0,Y=void 0;var re=F*J;ne=new Uint8Array(re);for(var de=new DataView(j.buffer),ce=0;ce<re;ce++){var ve=rg(de,ce,X),_e=jy(I[ve],4)[3];ne[ce]=_e}}else pe===0&&(Y=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:P?8:void 0,colorBytes:j,alphaBytes:ne,needSMask:P,palette:ie,mask:Y}})(o):h===2||h===4?(function(L){for(var F=L.data,J=L.width,j=L.height,I=L.channels,X=L.depth,P=I===2?"DeviceGray":"DeviceRGB",ie=I-1,Y=J*j,ne=ie,le=Y*ne,pe=1*Y,we=Math.ceil(le*X/8),q=Math.ceil(pe*X/8),E=new Uint8Array(we),$=new Uint8Array(q),te=new DataView(F.buffer),ae=new DataView(E.buffer),re=new DataView($.buffer),de=!1,ce=0;ce<Y;ce++){for(var ve=ce*I,_e=0;_e<ne;_e++)Dx(ae,rg(te,ve+_e,X),ce*ne+_e,X);var Ve=rg(te,ve+ne,X);Ve<(1<<X)-1&&(de=!0),Dx(re,Ve,1*ce,X)}return{colorSpace:P,colorsPerPixel:ie,sMaskBitsPerComponent:de?X:void 0,colorBytes:E,alphaBytes:$,needSMask:de}})(o):(function(L){var F=L.data,J=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:J,colorsPerPixel:J==="DeviceGray"?1:3,colorBytes:F instanceof Uint16Array?(function(j){for(var I=j.length,X=new Uint8Array(2*I),P=new DataView(X.buffer,X.byteOffset,X.byteLength),ie=0;ie<I;ie++)P.setUint16(2*ie,j[ie],!1);return X})(F):F,needSMask:!1}})(o);var y,_,b,N=a,A=N.colorSpace,k=N.colorsPerPixel,C=N.sMaskBitsPerComponent,O=N.colorBytes,R=N.alphaBytes,V=N.needSMask,B=N.palette,U=N.mask,z=null;return s!==$t.API.image_compression.NONE&&typeof Lg=="function"?(z=(function(L){var F;switch(L){case $t.API.image_compression.FAST:F=11;break;case $t.API.image_compression.MEDIUM:F=13;break;case $t.API.image_compression.SLOW:F=14;break;default:F=12}return F})(s),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(z," /Colors ").concat(k," /BitsPerComponent ").concat(p," /Columns ").concat(u),n=jx(O,Math.ceil(u*k*p/8),k,p,s),V&&(b=jx(R,Math.ceil(u*C/8),1,C,s))):(y=void 0,_=void 0,n=O,V&&(b=R)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:y,decodeParameters:_,transparency:U,palette:B,sMask:b,predictor:z,width:u,height:c,bitsPerComponent:p,sMaskBitsPerComponent:C,colorSpace:A}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new eO(e),u=o.width,c=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:u,height:c},p=new sg(100).encode(f,100);return n.processJPEG.call(this,p,t,s,a)},n.processGIF87A=n.processGIF89A})($t.API),ao.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ao.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){xr.log("bit decode error:"+t)}},ao.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var h=this.palette[o>>7-c&1];this.data[u+4*c]=h.blue,this.data[u+4*c+1]=h.green,this.data[u+4*c+2]=h.red,this.data[u+4*c+3]=255}t!==0&&(this.pos+=4-t)}},ao.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,c=o>>4,h=15&o,f=this.palette[c];if(this.data[u]=f.blue,this.data[u+1]=f.green,this.data[u+2]=f.red,this.data[u+3]=255,2*a+1>=this.width)break;f=this.palette[h],this.data[u+4]=f.blue,this.data[u+4+1]=f.green,this.data[u+4+2]=f.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},ao.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ao.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,p=s*this.width*4+4*a;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=u,this.data[p+3]=f}this.pos+=n}},ao.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,h=(u>>5&t)/t*255|0,f=(u>>11)/e*255|0,p=a*this.width*4+4*o;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},ao.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},ao.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}},ao.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new ao(e,!1),u=o.width,c=o.height,h={data:o.getData(),width:u,height:c},f=new sg(100).encode(h,100);return n.processJPEG.call(this,f,t,s,a)}})($t.API),Ix.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Ix(e),u=o.width,c=o.height,h={data:o.getData(),width:u,height:c},f=new sg(100).encode(h,100);return n.processJPEG.call(this,f,t,s,a)}})($t.API),$t.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,h=0,f=0;f<a;f+=4){var p=s[f],y=s[f+1],_=s[f+2],b=s[f+3];o[c++]=p,o[c++]=y,o[c++]=_,u[h++]=b}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},$t.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Sh=$t.API,W1=Sh.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,h=c.fof?c.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,p=f.fof?f.fof:1,y=e.doKerning!==!1,_=0,b=n.length,N=0,A=c[0]||h,k=[];for(t=0;t<b;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(_=y&&ar(f[s])==="object"&&!isNaN(parseInt(f[s][N],10))?f[s][N]/p:0,k.push((c[s]||A)/h+_)),N=s;return k},Cx=Sh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Sh.processArabic&&(n=Sh.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:W1.apply(this,arguments).reduce(function(o,u){return o+u},0)},Tx=function(n,e,t,s){for(var a=[],o=0,u=n.length,c=0;o!==u&&c+e[o]<t;)c+=e[o],o++;a.push(n.slice(0,o));var h=o;for(c=0;o!==u;)c+e[o]>s&&(a.push(n.slice(h,o)),c=0,h=o),c+=e[o],o++;return h!==o&&a.push(n.slice(h,o)),a},kx=function(n,e,t){t||(t={});var s,a,o,u,c,h,f,p=[],y=[p],_=t.textIndent||0,b=0,N=0,A=n.split(" "),k=W1.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?A[0].length+2:t.lineIndent||0){var C=Array(h).join(" "),O=[];A.map(function(V){(V=V.split(/\s*\n/)).length>1?O=O.concat(V.map(function(B,U){return(U&&B.length?`
`:"")+B})):O.push(V[0])}),A=O,h=Cx.apply(this,[C,t])}for(o=0,u=A.length;o<u;o++){var R=0;if(s=A[o],h&&s[0]==`
`&&(s=s.substr(1),R=1),_+b+(N=(a=W1.apply(this,[s,t])).reduce(function(V,B){return V+B},0))>e||R){if(N>e){for(c=Tx.apply(this,[s,a,e-(_+b),e]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);N=a.slice(s.length-(p[0]?p[0].length:0)).reduce(function(V,B){return V+B},0)}else p=[s];y.push(p),_=N+h,b=k}else p.push(s),_+=b+N,b=k}return f=h?function(V,B){return(B?C:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(f)},Sh.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var c,h,f=[];for(c=0,h=s.length;c<h;c++)f=f.concat(kx.apply(this,[s[c],u,o]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},c=n.__fontmetrics__.compress=function(_){var b,N,A,k,C=["{"];for(var O in _){if(b=_[O],isNaN(parseInt(O,10))?N="'"+O+"'":(O=parseInt(O,10),N=(N=u(O).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof b=="number")b<0?(A=u(b).slice(3),k="-"):(A=u(b).slice(2),k=""),A=k+A.slice(0,-1)+a[A.slice(-1)];else{if(ar(b)!=="object")throw new Error("Don't know what to do with value type "+ar(b)+".");A=c(b)}C.push(N+A)}return C.push("}"),C.join("")},h=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,N,A,k,C={},O=1,R=C,V=[],B="",U="",z=_.length-1,L=1;L<z;L+=1)(k=_[L])=="'"?b?(A=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(V.push([R,A]),R={},A=void 0):k=="}"?((N=V.pop())[0][N[1]]=R,A=void 0,R=N[0]):k=="-"?O=-1:A===void 0?s.hasOwnProperty(k)?(B+=s[k],A=parseInt(B,16)*O,O=1,B=""):B+=k:s.hasOwnProperty(k)?(U+=s[k],R[A]=parseInt(U,16)*O,O=1,A=void 0,U=""):U+=k;return C},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var b=_.font,N=y.Unicode[b.postScriptName];N&&(b.metadata.Unicode={},b.metadata.Unicode.widths=N.widths,b.metadata.Unicode.kerning=N.kerning);var A=p.Unicode[b.postScriptName];A&&(b.metadata.Unicode.encoding=A,b.encoding=A.codePages[0])}])})($t.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Q1(c)),u.metadata=n.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})($t),$t.API.addSvgAsImage=function(n,e,t,s,a,o,u,c){if(isNaN(e)||isNaN(t))throw xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(hn.canvg?Promise.resolve(hn.canvg):Vh(()=>import("./index.es-CFgA3VY7.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),e,t,s,a,u,c)})},$t.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},$t.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),h=[],f=0,p=0,y=0;function _(N,A){var k,C=!1;for(k=0;k<N.length;k+=1)N[k]===A&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=c.length;for(y=0;y<b;y+=1)t[c[y]].value=t[c[y]].defaultValue,t[c[y]].explicitSet=!1}if(ar(n)==="object"){for(a in n)if(o=n[a],_(c,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&_(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(f=0;f<o.length;f+=1)if(s=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(p=0;p<o[f].length;p+=1)typeof o[f][p]!="number"&&(s=!1);s===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,A=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?A.push("/"+N+" /"+t[N].value):A.push("/"+N+" "+t[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+u.length+c.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})($t.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var c,h=u.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],y=0,_=o.length;y<_;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},s=function(o){var u,c,h,f,p,y,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,_=(c=Object.keys(o).sort(function(b,N){return b-N})).length;y<_;y++)u=c[y],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(f=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),h.push("<"+u+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,h=u.out,f=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",N=0;N<_.length;N++)b+=String.fromCharCode(_[N]);var A=f();p({data:b,addLength1:!0,objectId:A}),h("endobj");var k=f();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:k}),h("endobj");var C=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Ch(c.fontName)),h("/FontFile2 "+A+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var O=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+Ch(c.fontName)),h("/FontDescriptor "+C+" 0 R"),h("/W "+n.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+k+" 0 R"),h("/BaseFont /"+Ch(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+O+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,h=u.out,f=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var N=f();p({data:_,addLength1:!0,objectId:N}),h("endobj");var A=f();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:A}),h("endobj");var k=f();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+N+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+Ch(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=f();for(var C=0;C<c.metadata.hmtx.widths.length;C++)c.metadata.hmtx.widths[C]=parseInt(c.metadata.hmtx.widths[C]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+Ch(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",h=o.x,f=o.y,p=o.options||{},y=o.mutex||{},_=y.pdfEscape,b=y.activeFontKey,N=y.fonts,A=b,k="",C=0,O="",R=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:c,x:h,y:f,options:p,mutex:y};for(O=c,A=b,Array.isArray(c)&&(O=c[0]),C=0;C<O.length;C+=1)N[A].metadata.hasOwnProperty("cmap")&&(u=N[A].metadata.cmap.unicode.codeMap[O[C].charCodeAt(0)]),u||O[C].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?k+=O[C]:k+="";var V="";return parseInt(A.slice(1))<14||R==="WinAnsiEncoding"?V=_(k,A).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(V=t(k,N[A])),y.isHex=!0,{text:V,x:h,y:f,options:p,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],h={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var f=0;for(f=0;f<u.length;f+=1)Array.isArray(u[f])&&u[f].length===3?c.push([a(Object.assign({},h,{text:u[f][0]})).text,u[f][1],u[f][2]]):c.push(a(Object.assign({},h,{text:u[f]})).text);o.text=c}else o.text=a(Object.assign({},h,{text:u})).text}])})($t),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})($t.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,c,h,f,p,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,R=0;this.__bidiEngine__={};var V=function(j){var I=j.charCodeAt(),X=I>>8,P=A[X];return P!==void 0?y[256*P+(255&I)]:X===252||X===253?"AL":C.test(X)?"L":X===8?"R":"N"},B=function(j){for(var I,X=0;X<j.length;X++){if((I=V(j.charAt(X)))==="L")return!1;if(I==="R")return!0}return!1},U=function(j,I,X,P){var ie,Y,ne,le,pe=I[P];switch(pe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(pe="AN");break;case"AL":O=!0,pe="R";break;case"WS":case"BN":pe="N";break;case"CS":P<1||P+1>=I.length||(ie=X[P-1])!=="EN"&&ie!=="AN"||(Y=I[P+1])!=="EN"&&Y!=="AN"?pe="N":O&&(Y="AN"),pe=Y===ie?Y:"N";break;case"ES":pe=(ie=P>0?X[P-1]:"B")==="EN"&&P+1<I.length&&I[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&X[P-1]==="EN"){pe="EN";break}if(O){pe="N";break}for(ne=P+1,le=I.length;ne<le&&I[ne]==="ET";)ne++;pe=ne<le&&I[ne]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(le=I.length,ne=P+1;ne<le&&I[ne]==="NSM";)ne++;if(ne<le){var we=j[P],q=we>=1425&&we<=2303||we===64286;if(ie=I[ne],q&&(ie==="R"||ie==="AL")){pe="R";break}}}pe=P<1||(ie=I[P-1])==="B"?"N":X[P-1];break;case"B":O=!1,a=!0,pe=R;break;case"S":o=!0,pe="N"}return pe},z=function(j,I,X){var P=j.split("");return X&&L(P,X,{hiLevel:R}),P.reverse(),I&&I.reverse(),P.join("")},L=function(j,I,X){var P,ie,Y,ne,le,pe=-1,we=j.length,q=0,E=[],$=R?b:_,te=[];for(O=!1,a=!1,o=!1,ie=0;ie<we;ie++)te[ie]=V(j[ie]);for(Y=0;Y<we;Y++){if(le=q,E[Y]=U(j,te,E,Y),P=240&(q=$[le][N[E[Y]]]),q&=15,I[Y]=ne=$[q][5],P>0)if(P===16){for(ie=pe;ie<Y;ie++)I[ie]=1;pe=-1}else pe=-1;if($[q][6])pe===-1&&(pe=Y);else if(pe>-1){for(ie=pe;ie<Y;ie++)I[ie]=ne;pe=-1}te[Y]==="B"&&(I[Y]=0),X.hiLevel|=ne}o&&(function(ae,re,de){for(var ce=0;ce<de;ce++)if(ae[ce]==="S"){re[ce]=R;for(var ve=ce-1;ve>=0&&ae[ve]==="WS";ve--)re[ve]=R}})(te,I,we)},F=function(j,I,X,P,ie){if(!(ie.hiLevel<j)){if(j===1&&R===1&&!a)return I.reverse(),void(X&&X.reverse());for(var Y,ne,le,pe,we=I.length,q=0;q<we;){if(P[q]>=j){for(le=q+1;le<we&&P[le]>=j;)le++;for(pe=q,ne=le-1;pe<ne;pe++,ne--)Y=I[pe],I[pe]=I[ne],I[ne]=Y,X&&(Y=X[pe],X[pe]=X[ne],X[ne]=Y);q=le}q++}}},J=function(j,I,X){var P=j.split(""),ie={hiLevel:R};return X||(X=[]),L(P,X,ie),(function(Y,ne,le){if(le.hiLevel!==0&&p)for(var pe,we=0;we<Y.length;we++)ne[we]===1&&(pe=k.indexOf(Y[we]))>=0&&(Y[we]=k[pe+1])})(P,X,ie),F(2,P,I,X,ie),F(1,P,I,X,ie),P.join("")};return this.__bidiEngine__.doBidiReorder=function(j,I,X){if((function(ie,Y){if(Y)for(var ne=0;ne<ie.length;ne++)Y[ne]=ne;c===void 0&&(c=B(ie)),f===void 0&&(f=B(ie))})(j,I),u||!h||f)if(u&&h&&c^f)R=c?1:0,j=z(j,I,X);else if(!u&&h&&f)R=c?1:0,j=J(j,I,X),j=z(j,I);else if(!u||c||h||f){if(u&&!h&&c^f)j=z(j,I),c?(R=0,j=J(j,I,X)):(R=1,j=J(j,I,X),j=z(j,I));else if(u&&c&&!h&&f)R=1,j=J(j,I,X),j=z(j,I);else if(!u&&!h&&c^f){var P=p;c?(R=1,j=J(j,I,X),R=0,p=!1,j=J(j,I,X),p=P):(R=0,j=J(j,I,X),j=z(j,I),R=1,p=!1,j=J(j,I,X),p=P,j=z(j,I))}}else R=0,j=J(j,I,X);else R=c?1:0,j=J(j,I,X);return j},this.__bidiEngine__.setOptions=function(j){j&&(u=j.isInputVisual,h=j.isOutputVisual,c=j.isInputRtl,f=j.isOutputRtl,p=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([t.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([t.doBidiReorder(a[c])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})($t),$t.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Dc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new mO(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new tO(this.contents),this.head=new rO(this),this.name=new lO(this),this.cmap=new U4(this),this.toUnicode={},this.hhea=new sO(this),this.maxp=new cO(this),this.hmtx=new uO(this),this.post=new aO(this),this.os2=new iO(this),this.loca=new pO(this),this.glyf=new hO(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,h,f;for(f=[],u=0,c=(h=this.bbox).length;u<c;u++)e=h[u],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var _o,Dc=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,c,h;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*c+h},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),tO=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,c,h,f,p,y,_,b,N,A;for(A in b=Object.keys(t).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),u=Math.floor(y/h),p=16*b-y,(a=new Dc).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(u),a.writeShort(p),o=16*b,f=a.pos+o,c=null,N=[],t)for(_=t[A],a.writeString(A),a.writeInt(n(_)),a.writeInt(f),a.writeInt(_.length),N=N.concat(_),A==="head"&&(c=f),f+=_.length;f%4;)N.push(0),f++;return a.write(N),s=2981146554-n(a.data),a.pos=c+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=H4.call(t);t.length%4;)t.push(0);for(o=new Dc(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),nO={}.hasOwnProperty,Jo=function(n,e){for(var t in e)nO.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};_o=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var rO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Dc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Vx=(function(){function n(e,t){var s,a,o,u,c,h,f,p,y,_,b,N,A,k,C,O,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,o=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),e.pos+=2,A=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),f=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),p=(function(){var V,B;for(B=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)B.push(e.readUInt16());return B})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var V,B;for(B=[],h=V=0;0<=a?V<a:V>a;h=0<=a?++V:--V)B.push(e.readUInt16());return B})(),h=C=0,R=o.length;C<R;h=++C)for(k=o[h],s=O=N=A[h];N<=k?O<=k:O>=k;s=N<=k?++O:--O)p[h]===0?u=s+f[h]:(u=c[p[h]/2+(s-N)-(_-h)]||0)!==0&&(u+=f[h]),this.codeMap[s]=65535&u}e.pos=y}return n.encode=function(e,t){var s,a,o,u,c,h,f,p,y,_,b,N,A,k,C,O,R,V,B,U,z,L,F,J,j,I,X,P,ie,Y,ne,le,pe,we,q,E,$,te,ae,re,de,ce,ve,_e,Ve,Xe;switch(P=new Dc,u=Object.keys(e).sort(function(Je,at){return Je-at}),t){case"macroman":for(A=0,k=(function(){var Je=[];for(N=0;N<256;++N)Je.push(0);return Je})(),O={0:0},o={},ie=0,pe=u.length;ie<pe;ie++)O[ve=e[a=u[ie]]]==null&&(O[ve]=++A),o[a]={old:e[a],new:O[e[a]]},k[a]=O[e[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(k),{charMap:o,subtable:P.data,maxGlyphID:A+1};case"unicode":for(I=[],y=[],R=0,O={},s={},C=f=null,Y=0,we=u.length;Y<we;Y++)O[B=e[a=u[Y]]]==null&&(O[B]=++R),s[a]={old:B,new:O[B]},c=O[B]-a,C!=null&&c===f||(C&&y.push(C),I.push(a),f=c),C=a;for(C&&y.push(C),y.push(65535),I.push(65535),J=2*(F=I.length),L=2*Math.pow(Math.log(F)/Math.LN2,2),_=Math.log(L/2)/Math.LN2,z=2*F-L,h=[],U=[],b=[],N=ne=0,q=I.length;ne<q;N=++ne){if(j=I[N],p=y[N],j===65535){h.push(0),U.push(0);break}if(j-(X=s[j].new)>=32768)for(h.push(0),U.push(2*(b.length+F-N)),a=le=j;j<=p?le<=p:le>=p;a=j<=p?++le:--le)b.push(s[a].new);else h.push(X-j),U.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*F+2*b.length),P.writeUInt16(0),P.writeUInt16(J),P.writeUInt16(L),P.writeUInt16(_),P.writeUInt16(z),de=0,E=y.length;de<E;de++)a=y[de],P.writeUInt16(a);for(P.writeUInt16(0),ce=0,$=I.length;ce<$;ce++)a=I[ce],P.writeUInt16(a);for(_e=0,te=h.length;_e<te;_e++)c=h[_e],P.writeUInt16(c);for(Ve=0,ae=U.length;Ve<ae;Ve++)V=U[Ve],P.writeUInt16(V);for(Xe=0,re=b.length;Xe<re;Xe++)A=b[Xe],P.writeUInt16(A);return{charMap:s,subtable:P.data,maxGlyphID:R+1}}},n})(),U4=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Vx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Vx.encode(e,t),(a=new Dc).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),sO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),iO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),aO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,c,h;for(h=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)h.push(e.readUInt32());return h}).call(this)}},n})(),oO=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,c,h,f,p,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(h={},o=p=0,y=s.length;p<y;o=++p)a=s[o],e.pos=a.offset,f=e.readString(a.length),u=new oO(f,a),h[_=a.nameID]==null&&(h[_]=[]),h[a.nameID].push(u);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),cO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),uO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,c,h;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=a?f<a:f>a;t=0<=a?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,y,_;for(_=[],f=0,p=(y=this.metrics).length;f<p;f++)o=y[f],_.push(o.advance);return _}).call(this),s=this.widths[this.widths.length-1],h=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)h.push(this.widths.push(s));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),H4=[].slice,hO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,c,h,f,p,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(c=new Dc(t.read(a))).readShort(),f=c.readShort(),y=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[e]=u===-1?new fO(c,f,y,h,p):new dO(c,u,f,y,h,p),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,c,h;for(u=[],o=[],c=0,h=t.length;c<h;c++)a=e[t[c]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),dO=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),fO=(function(){function n(e,t,s,a,o){var u,c;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new Dc(H4.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),pO=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Jo(n,_o),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var c=this.offsets[u],h=this.offsets[u+1]-c;h>0&&(a+=h)}for(var f=new Array(4*s.length),p=0;p<s.length;++p)f[4*p+3]=255&s[p],f[4*p+2]=(65280&s[p])>>8,f[4*p+1]=(16711680&s[p])>>16,f[4*p]=(4278190080&s[p])>>24;return f},n})(),mO=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,c,h;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))s=h[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,c,h,f,p,y,_,b,N,A,k,C;for(a in s=U4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},C=s.charMap)b[(h=C[a]).old]=h.new;for(N in _=s.maxGlyphID,u)N in b||(b[N]=_++);return p=(function(O){var R,V;for(R in V={},O)V[O[R]]=R;return V})(b),y=Object.keys(p).sort(function(O,R){return O-R}),A=(function(){var O,R,V;for(V=[],O=0,R=y.length;O<R;O++)c=y[O],V.push(p[c]);return V})(),o=this.font.glyf.encode(u,A,b),f=this.font.loca.encode(o.offsets,A),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n})();$t.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var c,h,f;for(f=[],c=0,h=t.length;c<h;c++)s=t[c],f.push(e.convert(s));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();var rp={exports:{}},gO=rp.exports,Fx;function bO(){return Fx||(Fx=1,(function(n,e){(function(t,s){s()})(gO,function(){function t(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function s(f,p,y){var _=new XMLHttpRequest;_.open("GET",f),_.responseType="blob",_.onload=function(){h(_.response,p,y)},_.onerror=function(){console.error("could not download file")},_.send()}function a(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof j1=="object"&&j1.global===j1?j1:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(f,p,y){var _=u.URL||u.webkitURL,b=document.createElement("a");p=p||f.name||"download",b.download=p,b.rel="noopener",typeof f=="string"?(b.href=f,b.origin===location.origin?o(b):a(b.href)?s(f,p,y):o(b,b.target="_blank")):(b.href=_.createObjectURL(f),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,y){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,y),p);else if(a(f))s(f,p,y);else{var _=document.createElement("a");_.href=f,_.target="_blank",setTimeout(function(){o(_)})}}:function(f,p,y,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof f=="string")return s(f,p,y);var b=f.type==="application/octet-stream",N=/constructor/i.test(u.HTMLElement)||u.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||b&&N||c)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var R=k.result;R=A?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=R:location=R,_=null},k.readAsDataURL(f)}else{var C=u.URL||u.webkitURL,O=C.createObjectURL(f);_?_.location=O:location.href=O,_=null,setTimeout(function(){C.revokeObjectURL(O)},4e4)}});u.saveAs=h.saveAs=h,n.exports=h})})(rp)),rp.exports}var vO=bO();const Q2="chordWheelSongs",Pg="chordWheelCurrentSongId",sf=()=>{try{const n=localStorage.getItem(Q2);return n?JSON.parse(n).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch(n){return console.error("Error loading saved songs:",n),[]}},Bx=n=>{try{const e=sf(),t=e.findIndex(a=>a.id===n.id),s={...n,updatedAt:new Date().toISOString(),createdAt:n.createdAt instanceof Date?n.createdAt.toISOString():n.createdAt};t>=0?e[t]=s:e.push({...s,createdAt:new Date().toISOString()}),localStorage.setItem(Q2,JSON.stringify(e)),localStorage.setItem(Pg,n.id)}catch(e){console.error("Error saving song:",e)}},yO=n=>{try{const t=sf().filter(s=>s.id!==n);localStorage.setItem(Q2,JSON.stringify(t)),localStorage.getItem(Pg)===n&&localStorage.removeItem(Pg)}catch(e){console.error("Error deleting song:",e)}},xO=({isOpen:n,onClose:e,onConfirm:t,title:s,message:a,confirmLabel:o="Confirm",cancelLabel:u="Cancel",isDestructive:c=!1})=>(K.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),K.useEffect(()=>{const h=f=>{f.key==="Escape"&&n&&e()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n,e]),n?m.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),m.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-sm w-full overflow-hidden flex flex-col scale-100 opacity-100 transition-all",children:[m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s}),m.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),m.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-[#22222e] border-t border-border-subtle",children:[m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:u}),m.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg transition-transform active:scale-95 ${c?"bg-red-500 hover:bg-red-600":"bg-accent-primary hover:bg-accent-secondary"}`,children:o})]})]})]}):null),W4={I:{degree:0,quality:"major"},ii:{degree:1,quality:"minor"},iii:{degree:2,quality:"minor"},IV:{degree:3,quality:"major"},V:{degree:4,quality:"major"},vi:{degree:5,quality:"minor"},"vii":{degree:6,quality:"diminished"},iv:{degree:3,quality:"minor"},"VI":{degree:8,quality:"major"},bVI:{degree:8,quality:"major"},"VII":{degree:10,quality:"major"},bVII:{degree:10,quality:"major"}},wO=[0,2,4,5,7,9,11];function _O(n,e){const t=xu(e),s=lo.indexOf(t);if(s===-1)return e;const a=W4[n];if(!a)return console.warn(`Unknown roman numeral: ${n}`),e;let o;a.degree<7?o=wO[a.degree]:o=a.degree;const u=(s+o)%12;return lo[u]}function zg(n,e){const t=W4[n]||{quality:"major"},s=_O(n,e),a=ca(s,t.quality);return{root:s,quality:t.quality,numeral:n,notes:a,symbol:`${s}${t.quality==="major"?"":t.quality==="minor"?"m":""}`}}function J2(n,e){return n.map(t=>zg(t,e))}let sp=!1,Vp=[];function eb(){sp=!1,Vp.forEach(n=>clearTimeout(n)),Vp=[]}async function G4(n,e,t=120,s=2,a){eb(),sp=!0,_s.state!=="running"&&await Tu(),_s.state==="suspended"&&await _s.resume(),await Pl();const o=J2(n,e),c=60/t*1e3*s,f=`${4/s}n`;return new Promise(p=>{o.forEach((y,_)=>{const b=window.setTimeout(()=>{if(sp&&(a?.(_,y),qr(y.notes,f),_===o.length-1)){const N=window.setTimeout(()=>{sp=!1,p()},c);Vp.push(N)}},_*c);Vp.push(b)})})}const SO=[{id:"pop-anthem",name:"Pop/Rock Anthem",description:"The most popular progression in modern music. Uplifting and anthemic.",numerals:["I","V","vi","IV"],genre:"Pop/Rock",artists:"U2, The Beatles, Blink-182",color:"accent-primary",sectionType:"chorus",sectionName:"Anthem",beatsPerChord:4},{id:"emotional-ballad",name:"Emotional Ballad",description:"Starts on the minor chord for a melancholic, emotional feel.",numerals:["vi","IV","I","V"],genre:"Ballad",artists:"Adele, John Legend",color:"purple-400",sectionType:"verse",sectionName:"Ballad",beatsPerChord:4},{id:"jazz-ii-v-i",name:"Jazz / R&B",description:"The foundation of jazz harmony. Smooth and sophisticated.",numerals:["ii","V","I"],genre:"Jazz/R&B",artists:"Maroon 5, Jazz Standards",color:"blue-400",sectionType:"verse",sectionName:"ii-V-I",beatsPerChord:4,totalBars:4},{id:"50s-progression",name:"50s Doo-Wop",description:"Classic rock and roll. Nostalgic and feel-good.",numerals:["I","vi","IV","V"],genre:"Oldies",artists:"Stand By Me, Earth Angel",color:"yellow-400",sectionType:"verse",sectionName:"Doo-Wop",beatsPerChord:4},{id:"andalusian",name:"Andalusian Cadence",description:"Dramatic descending progression. Spanish/Flamenco influenced.",numerals:["vi","V","IV","III"],genre:"Dramatic",artists:"Hit the Road Jack, Sultans of Swing",color:"red-400",sectionType:"verse",sectionName:"Andal.",beatsPerChord:4},{id:"pachelbel",name:"Pachelbel Canon",description:"The classical progression that influenced centuries of music.",numerals:["I","V","vi","iii","IV","I","IV","V"],genre:"Classical/Pop",artists:"Canon in D, Basket Case",color:"green-400",sectionType:"verse",sectionName:"Canon",beatsPerChord:2}],NO=[{id:"perfect",name:"Perfect Cadence",description:'The "Full Stop". Strongest resolution.',numerals:["V","I"],color:"green-500",emotion:"Conclusive"},{id:"plagal",name:"Plagal Cadence",description:'The "Amen". Softer, church-like resolution.',numerals:["IV","I"],color:"blue-500",emotion:"Peaceful"},{id:"half",name:"Half Cadence",description:'The "Comma". Leaves listeners wanting more.',numerals:["I","V"],color:"yellow-500",emotion:"Suspenseful"},{id:"deceptive",name:"Deceptive Cadence",description:'The "Surprise". Expecting I, getting vi.',numerals:["V","vi"],color:"purple-500",emotion:"Unexpected"}],AO=({preset:n,showAddButton:e=!0,compact:t=!1,onAddToTimeline:s})=>{const{selectedKey:a,currentSong:o,openTimeline:u}=Wt(),c=Wt(O=>O.addCustomSection),[h,f]=K.useState(!1),[p,y]=K.useState(null),[_,b]=K.useState(!1),N=J2(n.numerals,a),A=async()=>{if(h){eb(),f(!1),y(null);return}f(!0),y(0);try{await G4(n.numerals,a,o.tempo,n.beatsPerChord,O=>{y(O)})}finally{f(!1),y(null)}},k=async(O,R)=>{if(h)return;y(R);const V=n.beatsPerChord>=4?"1n":"2n";await qr(O.notes,V),setTimeout(()=>y(null),400)},C=()=>{c&&(c(n.sectionName,n.sectionType,N,{beatsPerChord:n.beatsPerChord,totalBars:n.totalBars}),u(),b(!0),setTimeout(()=>b(!1),1500),s?.())};return m.jsxs("div",{className:`
                p-2.5 rounded bg-bg-tertiary transition-all duration-300 overflow-hidden
                ${t?"text-xs":"text-sm"}
                ${_?"ring-2 ring-green-500 bg-green-500/10":""}
            `,children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("span",{className:"font-bold text-white",children:n.name}),n.artists&&m.jsx("span",{className:"block text-xs text-gray-500 truncate",children:n.artists})]}),e&&m.jsxs("button",{onClick:C,className:`
                            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium shrink-0
                            transition-all duration-200
                            ${_?"bg-green-500 text-white":"bg-bg-elevated hover:bg-accent-primary/20 text-gray-400 hover:text-accent-primary"}
                        `,title:"Add to timeline",children:[m.jsx(Oc,{size:12}),m.jsx("span",{className:"hidden sm:inline",children:_?"Added!":"Add"})]})]}),m.jsxs("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"auto repeat(4, minmax(0, max-content))",justifyContent:"start"},children:[m.jsx("button",{onClick:A,className:`
                        flex items-center justify-center w-7 h-7 rounded-full shrink-0
                        transition-all duration-200
                        ${h?"bg-red-500 hover:bg-red-600 text-white":"bg-accent-primary/20 hover:bg-accent-primary/40 text-accent-primary"}
                    `,title:h?"Stop":"Play progression",children:h?m.jsx(k2,{size:12}):m.jsx(ju,{size:12,className:"ml-0.5"})}),n.numerals.map((O,R)=>{const V=N[R],B=p===R,U=R<4?void 0:R%4+2;return m.jsx("button",{onClick:()=>k(V,R),disabled:h,className:`
                                text-xs px-2 py-1 rounded font-medium
                                transition-all duration-150
                                ${B?`bg-${n.color} text-white scale-110 shadow-lg shadow-${n.color}/30`:`bg-black/40 text-${n.color} hover:bg-black/60 hover:scale-105`}
                                ${h&&!B?"opacity-50":""}
                                disabled:cursor-not-allowed
                            `,style:{...B?{backgroundColor:`var(--color-${n.color})`}:{},...U?{gridColumn:U}:{}},title:`Play ${V.symbol}`,children:O},`${O}-${R}`)})]})]})},CO=({preset:n})=>{const{selectedKey:e,currentSong:t}=Wt(),[s,a]=K.useState(!1),[o,u]=K.useState(null),c=J2(n.numerals,e),h=async()=>{if(s){eb(),a(!1),u(null);return}a(!0),u(0);try{await G4(n.numerals,e,t.tempo,2,y=>{u(y)})}finally{a(!1),u(null)}},f=async(y,_)=>{s||(u(_),await qr(y.notes,"2n"),setTimeout(()=>u(null),400))},p=`text-${n.color.replace("-500","-400")}`;return m.jsxs("div",{className:`
                group p-3 rounded bg-bg-tertiary hover:bg-bg-tertiary/80 
                transition-all duration-200 border-l-2
            `,style:{borderColor:`var(--color-${n.color}, currentColor)`},children:[m.jsxs("div",{className:"flex justify-between items-center mb-1 gap-2",children:[m.jsx("span",{className:"font-bold text-white",children:n.name}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:h,className:`
                            w-6 h-6 rounded-full flex items-center justify-center
                            transition-all duration-200
                            ${s?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white/70 hover:text-white"}
                        `,title:s?"Stop":"Play cadence",children:s?m.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"}):m.jsx(ju,{size:10,className:"ml-0.5"})}),m.jsx("div",{className:"flex gap-0.5",children:n.numerals.map((y,_)=>{const b=c[_],N=o===_;return m.jsxs(An.Fragment,{children:[m.jsx("button",{onClick:()=>f(b,_),disabled:s,className:`
                                            text-xs px-1.5 py-0.5 rounded
                                            transition-all duration-150
                                            ${N?"bg-white text-black scale-110":`bg-black/30 ${p} hover:bg-black/50 hover:scale-105`}
                                        `,style:N?{backgroundColor:`var(--color-${n.color})`,color:"white"}:void 0,title:`Play ${b.symbol}`,children:y}),_<n.numerals.length-1&&m.jsx("span",{className:"text-gray-500 text-xs flex items-center",children:""})]},`${y}-${_}`)})})]})]}),m.jsx("p",{className:"text-gray-400 text-xs",children:n.description})]})},Px=({size:n=32})=>m.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",style:{width:n,height:n},children:[[...Array(12)].map((e,t)=>{const s=t*30,a=(s-15-90)*Math.PI/180,o=(s+15-90)*Math.PI/180,u=18,c=46,h=t<=4||t>=10;let f;h?t===0?f="rgba(234, 179, 8, 0.9)":t===1?f="rgba(163, 190, 60, 0.85)":t===2?f="rgba(132, 204, 22, 0.8)":t===3?f="rgba(74, 222, 128, 0.7)":t===4?f="rgba(45, 212, 191, 0.6)":t===11?f="rgba(251, 146, 60, 0.85)":t===10?f="rgba(168, 162, 158, 0.6)":f="rgba(200, 180, 100, 0.7)":f=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][t%3];const p=50+u*Math.cos(a),y=50+u*Math.sin(a),_=50+c*Math.cos(a),b=50+c*Math.sin(a),N=50+c*Math.cos(o),A=50+c*Math.sin(o),k=50+u*Math.cos(o),C=50+u*Math.sin(o);return m.jsx("path",{d:`M ${p} ${y} L ${_} ${b} A ${c} ${c} 0 0 1 ${N} ${A} L ${k} ${C} A ${u} ${u} 0 0 0 ${p} ${y}`,fill:f,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},t)}),m.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]}),TO=({selectedKey:n})=>{const[e,t]=K.useState(null),s=async u=>{try{await Pl();const c=zg(u,n);t(u),await qr(c.notes,"2n"),setTimeout(()=>t(null),400)}catch(c){console.error("Error playing chord:",c),t(null)}},a=["I","ii","iii","IV","V","vi","vii"],o=["Tonic (Home)","Mediant","Mediant","Subdom. (Away)","Dominant (Tension)","Rel. Minor","Leading Tone"];return m.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:a.map((u,c)=>{const h=e===u,f=["I","IV","V"].includes(u),p=u==="vii",_=zg(u,n).symbol;return m.jsxs("button",{onClick:()=>s(u),className:`rounded p-2 flex flex-col items-center justify-between h-20 cursor-pointer 
                            transition-all duration-150 active:scale-95
                            ${f?"bg-accent-primary/20 border border-accent-primary/30 hover:bg-accent-primary/30":p?"bg-red-500/10 border border-red-500/20 hover:bg-red-500/20":"bg-violet-500/15 border border-violet-500/25 hover:bg-violet-500/25"}
                            ${h?"ring-2 ring-white/50 scale-[1.02]":""}`,children:[m.jsx("span",{className:`font-bold mb-1 transition-colors ${h?"text-accent-primary":"text-white"}`,children:u}),m.jsx("span",{className:`text-[9px] font-medium transition-colors ${h?"text-accent-primary":"text-gray-300"}`,children:_}),m.jsx("span",{className:"text-[10px] text-gray-400 leading-tight",children:o[c]})]},u)})})},zx=({onClose:n})=>{const{selectedKey:e}=Wt();return m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"relative",children:[m.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-accent-primary/20 rounded-full blur-3xl pointer-events-none"}),m.jsx("div",{className:"absolute -bottom-5 -right-5 w-24 h-24 bg-purple-500/15 rounded-full blur-3xl pointer-events-none"}),m.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2 relative",children:[m.jsx(QT,{size:12,className:"fill-accent-primary"}),"Quick Start"]}),m.jsxs("div",{className:"relative bg-gradient-to-b from-bg-elevated/60 to-bg-elevated/40 rounded-xl p-5 border border-white/5 space-y-4",children:[m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:m.jsx(o3,{size:18,className:"text-accent-primary"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",m.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:m.jsx(Yh,{size:18,className:"text-purple-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[m.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate, or ",m.jsx("strong",{className:"text-gray-300",children:"tap the key"})," in the header to change keys. Highlighted chords always sound good together."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:m.jsx(l3,{size:18,className:"text-emerald-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",m.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",m.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:m.jsx(wp,{size:18,className:"text-amber-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",m.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:m.jsx(s0,{size:18,className:"text-sky-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[m.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),m.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"shrink-0 w-14 h-14 relative",children:m.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=18,h=46,f=s<=4||s>=10;let p;f?s===0?p="rgba(234, 179, 8, 0.9)":s===1?p="rgba(163, 190, 60, 0.85)":s===2?p="rgba(132, 204, 22, 0.8)":s===3?p="rgba(74, 222, 128, 0.7)":s===4?p="rgba(45, 212, 191, 0.6)":s===11?p="rgba(251, 146, 60, 0.85)":s===10?p="rgba(168, 162, 158, 0.6)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+h*Math.cos(o),N=50+h*Math.sin(o),A=50+h*Math.cos(u),k=50+h*Math.sin(u),C=50+c*Math.cos(u),O=50+c*Math.sin(u);return m.jsx("path",{d:`M ${y} ${_} L ${b} ${N} A ${h} ${h} 0 0 1 ${A} ${k} L ${C} ${O} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),m.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("strong",{className:"text-xs text-white block mb-1",children:"Understanding the Wheel"}),m.jsxs("div",{className:"text-[11px] text-gray-400 leading-snug space-y-0.5",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-gray-300",children:"Highlighted"})," = in key"]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-gray-300",children:"Inner"})," = Major (I, IV, V)"]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-gray-300",children:"Middle"})," = Minor (ii, iii, vi)"]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-gray-300",children:"Outer"})," = Dim (vii)"]})]})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:m.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[m.jsx(Dh,{size:14,className:"text-accent-primary shrink-0"}),m.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[m.jsx("strong",{className:"text-accent-primary",children:"Tip:"})," Tap the",m.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded-full text-text-muted border border-border-subtle/60",children:m.jsx(Dh,{size:10})}),"button anytime to reopen this guide."]})]})}),m.jsx("div",{className:"p-3 rounded-xl bg-purple-500/5 border border-purple-500/20",children:m.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-400",children:[m.jsx(ny,{size:14,className:"text-purple-400 shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{className:"text-purple-400",children:"Install App:"})," For the best full-screen experience, tap",m.jsx("span",{className:"inline-flex mx-1 items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded text-text-muted border border-border-subtle/60 align-middle",children:m.jsx(ny,{size:10})}),"(iOS) or",m.jsx("span",{className:"inline-flex mx-1 items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded text-text-muted border border-border-subtle/60 align-middle",children:m.jsx(ik,{size:10})}),"(Android) and select ",m.jsx("strong",{className:"text-gray-300",children:'"Add to Home Screen"'}),"."]})]})})]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[m.jsx(mk,{size:12}),"The Language of Music (Roman Numerals)"]}),m.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[m.jsx("p",{className:"text-sm text-gray-300",children:'Musicians use roman numerals to talk about chords regardless of the specific key. This reveals the "DNA" of a song.'}),m.jsx(TO,{selectedKey:e}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-400",children:[m.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[m.jsx("strong",{className:"text-accent-primary block mb-1",children:"Tonic (I, vi, iii)"}),"Stable, home base. Where songs usually start and end."]}),m.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[m.jsx("strong",{className:"text-accent-primary block mb-1",children:"Subdominant (IV, ii)"}),"Movement, drifting away from home. Creates interest."]}),m.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[m.jsx("strong",{className:"text-accent-primary block mb-1",children:"Dominant (V, vii)"}),"Tension, needing resolution. Pulls strongly back to I."]})]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[m.jsx(yk,{size:12}),"Songwriting Toolkit"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[m.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Emotional Cadences (How Phrases End)",m.jsx(vg,{size:12,className:"text-accent-primary/50"}),m.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e]})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:NO.map(t=>m.jsx(CO,{preset:t},t.id))})]}),m.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[m.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Famous Progressions",m.jsx(vg,{size:12,className:"text-accent-primary/50"}),m.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e,"  tap to play  click + to add"]})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:SO.map(t=>m.jsx(AO,{preset:t,onAddToTimeline:n},t.id))})]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[m.jsx(_p,{size:12}),"Adding Spice (Advanced)"]}),m.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-6",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white mb-2 text-sm flex items-center gap-2",children:"1. Modal Interchange (Borrowed Chords)"}),m.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Steal chords from the parallel minor key to add "cinematic" emotion.'}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[m.jsx("strong",{className:"text-white block",children:"Minor IV (iv)"}),m.jsx("span",{className:"text-gray-500",children:'"The Beatles Cadence". Gives a nostalgic, bittersweet ending. (Fm in key of C).'})]}),m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[m.jsx("strong",{className:"text-white block",children:"Flat VI (VI)"}),m.jsx("span",{className:"text-gray-500",children:'Epic, heroic, fantasy feeling. "Lord of the Rings" sound. (Ab in key of C).'})]}),m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[m.jsx("strong",{className:"text-white block",children:"Picardy Third"}),m.jsx("span",{className:"text-gray-500",children:"Ending a sad, minor song on a happy Major I chord. Pure sunshine."})]})]})]}),m.jsx("div",{className:"w-full h-px bg-white/5"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"2. Secondary Dominants"}),m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Make a minor chord Major to create a magnetic pull to another chord."}),m.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"In C Major, play ',m.jsx("strong",{className:"text-white",children:"E Major (III)"}),". It pulls hard to ",m.jsx("strong",{className:"text-white",children:"Am"}),'. (Radiohead - Creep)"']})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"3. Tritone Substitution"}),m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Jazz trick: Replace the V chord with a dominant chord exactly halfway around the circle (a tritone away)."}),m.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"Instead of G7  C, try ',m.jsx("strong",{className:"text-white",children:"Db7  C"}),'. Smooth chromatic slide."']})]})]}),m.jsx("div",{className:"w-full h-px bg-white/5"}),m.jsxs("div",{children:[m.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["4. Secrets of the Pros",m.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold",children:"Expert"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[m.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"A"}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-white text-sm block",children:"Pedal Point"}),m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Keep the bass note the same while changing chords on top. Creates massive tension and "floaty" feelings. (e.g., C/C  F/C  G/C).'})]})]}),m.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[m.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"B"}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-white text-sm block",children:"Line Clich"}),m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'A single note moving down chromatically inside a static chord. think "Stairway to Heaven" or James Bond theme (Am  Am(maj7)  Am7  Am6).'})]})]}),m.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[m.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"C"}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-white text-sm block",children:"Relative Major/Minor Modulation"}),m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching focus between I and vi. Use the exact same notes, but center your melody around Am instead of C to instantly change the mood from happy to sad."})]})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"5. Building Better Chords (Extensions)"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-center",children:[m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[m.jsx("strong",{className:"text-white block",children:"maj7"}),m.jsx("span",{className:"text-gray-500",children:"Dreamy, Jazz, Lo-fi"})]}),m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[m.jsx("strong",{className:"text-white block",children:"dom7"}),m.jsx("span",{className:"text-gray-500",children:"Blues, Funk, Tension"})]}),m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[m.jsx("strong",{className:"text-white block",children:"sus4"}),m.jsx("span",{className:"text-gray-500",children:"Open, airy, delayed"})]}),m.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[m.jsx("strong",{className:"text-white block",children:"add9"}),m.jsx("span",{className:"text-gray-500",children:"Rich, cinematic pop"})]})]})]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[m.jsx(_p,{size:12}),"Scales & Modes"]}),m.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[m.jsx("p",{className:"text-sm text-gray-300",children:m.jsx("strong",{className:"text-white",children:"Same notes, different starting points, totally different vibes."})}),m.jsxs("p",{className:"text-xs text-gray-400",children:['Think of modes as different "camera angles" on the same scale. Start a ',Mn(e)," major scale from different notes, and you unlock seven distinct musical personalities  each with its own emotional flavor."]}),(()=>{const t=ag(e),s=o=>[...t.slice(o),...t.slice(0,o)].map(c=>Mn(c)).join("  "),a=[{name:"Ionian (I)",degree:0,quality:"MAJOR",color:"yellow",desc:"The standard major scale. Bright, happy, resolved.",note:'This is your "home base."'},{name:"Dorian (ii)",degree:1,quality:"minor",color:"violet",desc:"Minor with a raised 6th.",highlight:"Hopeful minor",note:'  less sad, more cool. Think jazz, funk, and "So What".'},{name:"Phrygian (iii)",degree:2,quality:"minor",color:"orange",desc:"Minor with a flat 2nd.",highlight:"Spanish, exotic, intense.",note:" Classic in Flamenco and metal."},{name:"Lydian (IV)",degree:3,quality:"MAJOR",color:"cyan",desc:"Major with a raised 4th.",highlight:"Dreamy, floating, magical.",note:" Film composers love this for wonder and awe."},{name:"Mixolydian (V)",degree:4,quality:"MAJOR",color:"emerald",desc:"Major with a flat 7th.",highlight:"Bluesy, rock 'n roll.",note:" Common over dominant (V) chords."},{name:"Aeolian (vi)",degree:5,quality:"minor",color:"blue",desc:"The natural minor scale.",highlight:"Sad, introspective, melancholic.",note:" The basis of most minor-key music."},{name:"Locrian (vii)",degree:6,quality:"dim",color:"red",dimmed:!0,desc:"Flat 2nd and flat 5th.",highlight:"Dark, unstable, unsettling.",note:" Rarely used  its tonic chord is diminished!"}];return m.jsx("div",{className:"space-y-2",children:a.map(o=>m.jsxs("div",{className:`bg-bg-tertiary p-3 rounded border-l-2 border-${o.color}-500${o.dimmed?"/50":""}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("strong",{className:"text-white text-sm",children:o.name}),m.jsx("span",{className:`text-[10px] text-${o.color}-400 bg-${o.color}-500/10 px-1.5 py-0.5 rounded`,children:o.quality})]}),m.jsxs("p",{className:"text-xs text-gray-400",children:[o.desc,o.highlight&&m.jsxs("span",{className:"text-gray-300",children:[" ",o.highlight]}),o.note&&m.jsx("span",{className:"text-gray-500",children:o.note})]}),m.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5 font-mono tracking-wide",children:s(o.degree)})]},o.name))})})(),m.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20 mt-4",children:m.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-400",children:[m.jsx(Dh,{size:14,className:"text-accent-primary shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{className:"text-accent-primary",children:"Key insight:"})," Every mode shares the same notes as its parent major scale. ",Mn(ag(e)[1])," Dorian uses the same notes as ",Mn(e),' major. The magic is in which note feels like "home."']})]})})]})]})]})},kO=({isOpen:n,onClose:e,isEmbedded:t=!1})=>n?t?m.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col bg-[#1a1a24]",children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-[#22222e] shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-6 h-6",children:m.jsx(Px,{size:24})}),m.jsx("h2",{className:"text-sm font-bold text-white",children:"Guide"})]}),m.jsx("button",{onClick:e,className:"p-1 hover:bg-bg-tertiary rounded transition-colors text-text-muted hover:text-white",children:m.jsx($o,{size:16})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-6 sm:py-6 space-y-8",children:m.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:m.jsx(zx,{onClose:e})})})]}):m.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none",style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[m.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm cursor-pointer pointer-events-auto",onClick:e}),m.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-4xl w-full max-h-full overflow-hidden flex flex-col pointer-events-auto",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-[#22222e]",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8",children:m.jsx(Px,{size:32})}),m.jsx("h2",{className:"text-lg font-bold text-white",children:"Songwriter Wheel Guide"})]}),m.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-tertiary rounded-lg transition-colors text-text-muted hover:text-white",children:m.jsx($o,{size:20})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-8 sm:py-8 space-y-8",children:m.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:m.jsx(zx,{onClose:e})})})]})]}):null,qx="chordwheel_onboarding_seen",jO=({onDismiss:n,onOpenHelp:e})=>{const[t,s]=K.useState(!1),[a,o]=K.useState(!1);K.useEffect(()=>{if(!localStorage.getItem(qx)){const h=setTimeout(()=>s(!0),800);return()=>clearTimeout(h)}},[]);const u=()=>{o(!0),localStorage.setItem(qx,"true"),setTimeout(()=>{s(!1),n?.()},300)};return t?m.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 ${a?"opacity-0":"opacity-100"}`,style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[m.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer",onClick:u}),m.jsxs("div",{className:`relative max-w-md w-full bg-gradient-to-b from-[#1e1e2a] to-[#151520] border border-white/10 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 ${a?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[m.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-accent-primary/30 rounded-full blur-3xl pointer-events-none"}),m.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl pointer-events-none"}),m.jsxs("div",{className:"relative px-6 pt-6 pb-4 flex items-center justify-between border-b border-white/5",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center shadow-lg shadow-accent-primary/25",children:m.jsx(Xk,{size:20,className:"text-white"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-bold text-white",children:"Welcome!"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Quick start guide"})]})]}),m.jsx("button",{onClick:u,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:m.jsx($o,{size:20})})]}),m.jsxs("div",{className:"relative px-6 py-5 space-y-4",children:[m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:m.jsx(o3,{size:18,className:"text-accent-primary"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",m.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:m.jsx(Yh,{size:18,className:"text-purple-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[m.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:m.jsx(l3,{size:18,className:"text-emerald-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",m.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",m.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:m.jsx(wp,{size:18,className:"text-amber-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",m.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 group",children:[m.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:m.jsx(s0,{size:18,className:"text-sky-400"})}),m.jsxs("div",{className:"pt-0.5",children:[m.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),m.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[m.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),m.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[m.jsx(jk,{size:14,className:"text-accent-primary shrink-0",style:{transform:"scaleX(-1)"}}),m.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[m.jsx("strong",{className:"text-gray-300",children:"Tip:"})," Tap the",m.jsx("button",{onClick:()=>{u(),setTimeout(()=>e?.(),350)},className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 hover:bg-bg-tertiary rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/60",title:"Open full guide",children:m.jsx(Dh,{size:12})}),"button anytime for the full guide."]})]}),m.jsx("div",{className:"shrink-0 w-16 h-16 relative",children:m.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((c,h)=>{const f=h*30,p=(f-15-90)*Math.PI/180,y=(f+15-90)*Math.PI/180,_=18,b=46,N=h<=4||h>=10;let A;N?h===0?A="rgba(234, 179, 8, 0.9)":h===1?A="rgba(163, 190, 60, 0.85)":h===2?A="rgba(132, 204, 22, 0.8)":h===3?A="rgba(74, 222, 128, 0.7)":h===4?A="rgba(45, 212, 191, 0.6)":h===11?A="rgba(251, 146, 60, 0.85)":h===10?A="rgba(168, 162, 158, 0.6)":A="rgba(200, 180, 100, 0.7)":A=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][h%3];const k=50+_*Math.cos(p),C=50+_*Math.sin(p),O=50+b*Math.cos(p),R=50+b*Math.sin(p),V=50+b*Math.cos(y),B=50+b*Math.sin(y),U=50+_*Math.cos(y),z=50+_*Math.sin(y);return m.jsx("path",{d:`M ${k} ${C} L ${O} ${R} A ${b} ${b} 0 0 1 ${V} ${B} L ${U} ${z} A ${_} ${_} 0 0 0 ${k} ${C}`,fill:A,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},h)}),m.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})})]})})]}),m.jsx("div",{className:"relative px-6 pb-6",children:m.jsx("button",{onClick:u,className:"w-full py-3 px-4 rounded-xl bg-gradient-to-r from-accent-primary to-purple-600 text-white font-semibold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-accent-primary/25 active:scale-[0.98]",children:"Got it, let's go!"})})]})]}):null},EO=({isOpen:n,onClose:e,title:t,artist:s,tags:a,timeSignature:o,onSave:u})=>{const c=K.useRef(null),h=K.useRef(null),[f,p]=K.useState(t),[y,_]=K.useState(s),[b,N]=K.useState(a),[A,k]=K.useState(o),[C,O]=K.useState("");if(K.useEffect(()=>{n&&(p(t),_(s),N(a),k(o),O(""),setTimeout(()=>{h.current?.focus(),h.current?.select()},100))},[n,t,s,a,o]),K.useEffect(()=>{if(!n)return;const L=F=>{F.key==="Escape"&&e()};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[n,e]),!n)return null;const R=()=>{const L=f.trim()||"Untitled Song";u(L,y.trim(),b,A),e()},V=()=>{const L=C.trim();L&&!b.includes(L)&&(N([...b,L]),O(""))},B=L=>{N(b.filter(F=>F!==L))},U=L=>{L.key==="Enter"&&(L.preventDefault(),V())},z=L=>{L.key==="Enter"&&(L.preventDefault(),R())};return Ho.createPortal(m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),m.jsxs("div",{ref:c,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"340px",width:"90vw"},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),m.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Song Info"})]}),m.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:m.jsx($o,{size:14})})]}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Song Title"}),m.jsx("input",{ref:h,type:"text",value:f,onChange:L=>p(L.target.value),onKeyDown:z,placeholder:"Untitled Song",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"By (Optional)"}),m.jsx("input",{type:"text",value:y,onChange:L=>_(L.target.value),onKeyDown:z,placeholder:"Artist or songwriter name",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Signature"}),m.jsxs("select",{value:`${A[0]}/${A[1]}`,onChange:L=>{const[F,J]=L.target.value.split("/").map(j=>parseInt(j,10));k([F,J])},className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`,children:[m.jsx("option",{value:"4/4",children:"4/4 (Common Time)"}),m.jsx("option",{value:"3/4",children:"3/4 (Waltz)"}),m.jsx("option",{value:"2/4",children:"2/4 (March)"}),m.jsx("option",{value:"5/4",children:"5/4"}),m.jsx("option",{value:"6/8",children:"6/8 (Compound)"}),m.jsx("option",{value:"7/8",children:"7/8"}),m.jsx("option",{value:"12/8",children:"12/8"})]}),m.jsx("p",{className:"text-[10px] text-text-muted",children:"Default for new sections. Sections can override this."})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[m.jsx(Qk,{size:10}),"Tags (Optional)"]}),b.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:b.map(L=>m.jsxs("span",{className:Pt("inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium","bg-accent-primary/15 text-accent-primary border border-accent-primary/30"),children:[L,m.jsx("button",{onClick:()=>B(L),className:"hover:text-red-400 transition-colors",title:`Remove "${L}"`,children:m.jsx($o,{size:12})})]},L))}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"text",value:C,onChange:L=>O(L.target.value),onKeyDown:U,placeholder:"Add a tag...",maxLength:30,className:`flex-1 h-8 bg-bg-tertiary text-text-primary text-xs rounded-lg 
                                           px-3 border border-border-subtle 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`}),m.jsxs("button",{onClick:V,disabled:!C.trim(),className:Pt("h-8 px-3 rounded-lg text-xs font-medium transition-all","flex items-center gap-1",C.trim()?"bg-accent-primary/10 border border-accent-primary/30 text-accent-primary hover:bg-accent-primary/20 active:scale-95":"bg-bg-tertiary border border-border-subtle text-text-muted cursor-not-allowed"),children:[m.jsx(Oc,{size:12}),"Add"]})]}),m.jsx("p",{className:"text-[10px] text-text-muted",children:"Tags help you organize and filter your songs"})]}),m.jsx("button",{onClick:R,className:`w-full py-2.5 rounded-lg
                                   bg-accent-primary text-white font-bold text-sm
                                   hover:bg-accent-primary/90 active:scale-[0.98]
                                   transition-all shadow-lg shadow-accent-primary/25`,children:"Save"})]})]})]}),document.body)},MO=({isOpen:n,onClose:e})=>{const t=K.useRef(null),{selectedKey:s,setKey:a,setSelectedChord:o}=Wt(),u=Xh();if(K.useEffect(()=>{if(!n)return;const f=p=>{p.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n,e]),!n)return null;const c=f=>{a(f);const p=ca(f,"major");o({root:f,quality:"major",numeral:"I",notes:p,symbol:f}),e()},h=f=>{const p=Wx(f);return p.sharps>0?`${p.sharps}`:p.flats>0?`${p.flats}`:""};return Ho.createPortal(m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/50 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),m.jsxs("div",{ref:t,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"360px",width:"90vw"},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),m.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Select Key"})]}),m.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:m.jsx($o,{size:14})})]}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Current Key"}),m.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[m.jsx("span",{className:"text-2xl font-bold",style:{color:u[s]||"#6366f1"},children:Mn(s)}),m.jsx("span",{className:"text-sm text-text-muted",children:h(s)||"No /"})]})]}),m.jsx("div",{className:"grid grid-cols-4 gap-2",children:gu.map(f=>{const p=f===s,y=u[f]||"#6366f1",_=h(f);return m.jsxs("button",{onClick:()=>c(f),className:`
                                        relative flex flex-col items-center justify-center
                                        py-3 px-2 rounded-lg
                                        transition-all duration-150 active:scale-95
                                        ${p?"ring-2 ring-offset-2 ring-offset-bg-elevated shadow-lg":"hover:bg-bg-tertiary"}
                                    `,style:{backgroundColor:p?y:"transparent",borderColor:y,border:`2px solid ${p?y:"rgba(255,255,255,0.1)"}`,"--tw-ring-color":p?y:void 0},children:[m.jsx("span",{className:`text-lg font-bold ${p?"text-black":""}`,style:{color:p?void 0:y},children:Mn(f)}),m.jsx("span",{className:`text-[10px] ${p?"text-black/70":"text-text-muted"}`,children:_||""})]},f)})}),m.jsx("p",{className:"text-[10px] text-text-muted text-center mt-4",children:"Tap a key to change. The wheel will rotate and the I chord will be selected."})]})]})]}),document.body)},LO=({onClose:n})=>{const{customInstruments:e,addCustomInstrument:t,removeCustomInstrument:s}=Wt(),[a,o]=K.useState("list"),[u,c]=K.useState(""),[h,f]=K.useState({}),[p,y]=K.useState(null),[_,b]=K.useState(!1),N=K.useRef(null),A=K.useRef([]),k=["C3","C4","C5"],C=async U=>{try{const z=await navigator.mediaDevices.getUserMedia({audio:!0}),L=new MediaRecorder(z);N.current=L,A.current=[],L.ondataavailable=F=>{A.current.push(F.data)},L.onstop=()=>{const F=new Blob(A.current,{type:"audio/webm"}),J=new FileReader;J.readAsDataURL(F),J.onloadend=()=>{const j=J.result;f(I=>({...I,[U]:j}))},z.getTracks().forEach(j=>j.stop())},L.start(),b(!0),y(U)}catch(z){console.error("Error accessing microphone:",z),alert("Could not access microphone. Please allow permissions.")}},O=()=>{N.current&&_&&(N.current.stop(),b(!1),y(null))},R=(U,z)=>{const L=U.target.files?.[0];if(L){const F=new FileReader;F.onloadend=()=>{f(J=>({...J,[z]:F.result}))},F.readAsDataURL(L)}},V=()=>{if(!u.trim())return;if(Object.keys(h).length===0){alert("Please add at least one sample.");return}const U={id:Ds(),name:u.trim(),samples:h,createdAt:Date.now()};t(U),o("list"),c(""),f({})},B=async U=>{const z=h[U];if(!z)return;await new Audio(z).play()};return a==="create"?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"bg-bg-elevated border border-border-subtle rounded-xl w-full max-w-md shadow-2xl flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-4 border-b border-border-subtle flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Create Instrument"}),m.jsx("button",{onClick:()=>o("list"),className:"text-text-secondary hover:text-text-primary",children:m.jsx($o,{size:20})})]}),m.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Instrument Name"}),m.jsx("input",{type:"text",value:u,onChange:U=>c(U.target.value),className:"w-full bg-bg-tertiary border border-border-subtle rounded px-3 py-2 text-text-primary focus:border-accent-primary focus:outline-none",placeholder:"e.g. My Acoustic Guitar"})]}),m.jsx("div",{className:"bg-accent-primary/10 border border-accent-primary/20 rounded-lg p-3",children:m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx(XT,{size:16,className:"text-accent-primary mt-0.5 shrink-0"}),m.jsxs("p",{className:"text-xs text-text-secondary",children:[m.jsx("strong",{children:"Efficiency Tip:"})," You don't need a sample for every note! Just record ",m.jsx("strong",{children:"C3, C4, and C5"}),". The audio engine will automatically pitch-shift them to fill the keyboard."]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Samples"}),k.map(U=>m.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg border border-border-subtle",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-bg-elevated flex items-center justify-center text-xs font-bold text-text-primary border border-border-subtle",children:U}),h[U]?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"text-xs text-green-500 font-medium flex items-center gap-1",children:[m.jsx(UT,{size:12})," Recorded"]}),m.jsx("button",{onClick:()=>B(U),className:"p-1 text-text-secondary hover:text-text-primary",children:m.jsx(ju,{size:12})})]}):m.jsx("span",{className:"text-xs text-text-muted italic",children:"No sample"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[p===U?m.jsx("button",{onClick:O,className:"p-2 rounded-full bg-red-500/20 text-red-500 animate-pulse hover:bg-red-500/30 transition-colors",children:m.jsx(k2,{size:16,fill:"currentColor"})}):m.jsx("button",{onClick:()=>C(U),disabled:_,className:"p-2 rounded-full hover:bg-bg-elevated text-text-secondary hover:text-accent-primary transition-colors disabled:opacity-50",title:"Record Microphone",children:m.jsx(Ak,{size:16})}),m.jsxs("label",{className:"p-2 rounded-full hover:bg-bg-elevated text-text-secondary hover:text-accent-primary transition-colors cursor-pointer",children:[m.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:z=>R(z,U)}),m.jsx(rj,{size:16})]}),h[U]&&m.jsx("button",{onClick:()=>f(z=>{const L={...z};return delete L[U],L}),className:"p-2 rounded-full hover:bg-bg-elevated text-text-secondary hover:text-red-400 transition-colors",children:m.jsx(hf,{size:16})})]})]},U))]})]}),m.jsxs("div",{className:"p-4 border-t border-border-subtle flex justify-end gap-2",children:[m.jsx("button",{onClick:()=>o("list"),className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Cancel"}),m.jsx("button",{onClick:V,disabled:!u||Object.keys(h).length===0,className:"px-4 py-2 text-sm font-medium bg-accent-primary text-white rounded hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save Instrument"})]})]})}):m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"bg-bg-elevated border border-border-subtle rounded-xl w-full max-w-md shadow-2xl flex flex-col max-h-[80vh]",children:[m.jsxs("div",{className:"p-4 border-b border-border-subtle flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Manage Instruments"}),m.jsx("button",{onClick:n,className:"text-text-secondary hover:text-text-primary",children:m.jsx($o,{size:20})})]}),m.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:e.length===0?m.jsxs("div",{className:"text-center py-8 text-text-muted",children:[m.jsx("p",{className:"mb-4",children:"No custom instruments yet."}),m.jsx("button",{onClick:()=>o("create"),className:"px-4 py-2 text-sm font-medium bg-accent-primary text-white rounded hover:bg-indigo-500 transition-colors",children:"Create Your First Instrument"})]}):m.jsx("div",{className:"space-y-2",children:e.map(U=>m.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg border border-border-subtle group",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-text-primary",children:U.name}),m.jsxs("p",{className:"text-xs text-text-muted",children:[Object.keys(U.samples).length," samples"]})]}),m.jsx("button",{onClick:()=>{confirm(`Delete "${U.name}"?`)&&s(U.id)},className:"p-2 text-text-secondary hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",children:m.jsx(hf,{size:16})})]},U.id))})}),e.length>0&&m.jsx("div",{className:"p-4 border-t border-border-subtle",children:m.jsxs("button",{onClick:()=>o("create"),className:"w-full px-4 py-2 text-sm font-medium bg-bg-tertiary border border-border-subtle text-text-primary rounded hover:bg-bg-elevated transition-colors flex items-center justify-center gap-2",children:[m.jsx("span",{className:"text-xl leading-none",children:"+"})," Add New Instrument"]})})]})})},OO=({mobileTimelineOpen:n,setMobileTimelineOpen:e,chordPanelVisible:t,setChordPanelScrolledToBottom:s})=>{const a=K.useRef(0),[o,u]=K.useState(0),c=K.useRef(!1),h=t,f=!t,p=450,y=V=>{a.current=V.touches[0].clientY,c.current=!0,u(0)},_=V=>{if(!c.current)return;const B=a.current-V.touches[0].clientY;u(B)},b=()=>{if(!c.current)return;c.current=!1;const V=40;h&&o<-V&&(t&&Wt.getState().toggleChordPanel(),n&&e(!1)),f&&o>V&&(n||e(!0),t||Wt.getState().toggleChordPanel()),u(0)},N=()=>{Math.abs(o)<15&&(h?(t&&Wt.getState().toggleChordPanel(),n&&e(!1)):(n||e(!0),t||Wt.getState().toggleChordPanel()))},A=o!==0,k=h&&o<0?Math.min(400,-o*1.5):0,C=f&&o>0?Math.min(p,o*2):0,O=C>0,R=k>0;return m.jsxs("div",{className:"shrink-0 flex flex-col overflow-hidden bg-bg-secondary",style:{maxHeight:R?`calc(65vh - ${k}px)`:"65vh",opacity:R?Math.max(.3,1-k/500):1,transition:A?"none":"all 0.25s ease-out"},children:[m.jsx("div",{className:"flex flex-col items-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing select-none",onTouchStart:y,onTouchMove:_,onTouchEnd:b,onClick:N,children:m.jsx("div",{className:"h-6 w-full flex items-center justify-center",children:m.jsx(i3,{size:16,className:`text-text-muted transition-transform duration-200 ${h?"rotate-180":""}`})})}),m.jsxs("div",{className:"flex-1 overflow-hidden",style:{maxHeight:O?`${C}px`:void 0,transition:A?"none":"max-height 0.25s ease-out"},children:[m.jsx(Ag,{isOpen:n||O,onToggle:()=>e(!n)}),m.jsx("div",{"data-chord-details":!0,className:"shrink-0 bg-bg-secondary overflow-hidden",style:{maxHeight:n||O?"45vh":"55vh"},children:m.jsx(kg,{variant:"drawer",onScrollChange:s,forceVisible:O})})]})]})};function DO(){const{currentSong:n,selectedKey:e,timelineVisible:t,toggleTimeline:s,selectedSectionId:a,selectedSlotId:o,clearSlot:u,clearTimeline:c,setTitle:h,setArtist:f,setTags:p,setSongTimeSignature:y,loadSong:_,newSong:b,instrument:N,volume:A,isMuted:k,undo:C,redo:O,canUndo:R,canRedo:V,chordPanelVisible:B,isPlaying:U,songInfoModalVisible:z,toggleSongInfoModal:L,instrumentManagerModalVisible:F,toggleInstrumentManagerModal:J}=Wt();K.useEffect(()=>{L2(N)},[N]),K.useEffect(()=>{f3(A)},[A]),K.useEffect(()=>{p3(k)},[k]);const[j,I]=K.useState(!1),[X,P]=K.useState(!1),[ie,Y]=K.useState(()=>{if(typeof window>"u")return 1;const Te=window.innerWidth,_t=window.innerHeight;return Te<768||_t<500&&_t<Te?1.25:1}),[ne,le]=K.useState(50),[pe,we]=K.useState({x:0,y:0}),q=K.useRef(null),[E,$]=K.useState(()=>typeof window>"u"?200:Math.max(200,Math.floor(window.innerWidth*.33))),[te,ae]=K.useState(()=>{if(typeof window>"u")return 500;const Te=window.innerWidth,St=window.innerHeight-48-56-152-32,Mt=Te-380-40;return Math.max(300,Math.min(Mt,St))}),[re,de]=K.useState(()=>typeof window<"u"?window.innerWidth<768||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[ce,ve]=K.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1),_e=K.useRef(!1),Ve=K.useRef(!1),[Xe,Je]=K.useState(!1),at=K.useRef(null),[G,Ee]=K.useState(!1),[xt,et]=K.useState(!1),De=K.useRef(null),rt=K.useRef(!1);K.useEffect(()=>{if(!re)return;if(ce&&!rt.current)rt.current=!0,De.current=Wt.getState().chordPanelVisible,Je(!0),Ee(!0),Wt.getState().chordPanelVisible||Wt.getState().toggleChordPanel();else if(!ce&&rt.current){rt.current=!1;const Mt=Wt.getState().chordPanelVisible,Ct=De.current;Ct!==null&&Mt!==Ct&&Wt.getState().toggleChordPanel(),Ee(!1),De.current=null}const Te=()=>{Je(!0)},_t=()=>{at.current&&clearTimeout(at.current),at.current=setTimeout(Te,1e4)},St=Mt=>{const Ct=Mt.target,Qt=Ct.closest("[data-chord-details]"),cn=Ct.closest("[data-playback-controls]"),nr=Ct.closest("[data-mobile-timeline]"),Pn=Ct.closest("header"),yn=Ct.closest("[data-wheel-background]"),Sn=Ct.closest("button"),tr=Ct.tagName==="path"||Ct.tagName==="circle"||Ct.tagName==="text"||Ct.tagName==="polygon"||Ct.tagName==="g"&&Ct.style.cursor==="pointer"||Ct.closest('g[style*="cursor: pointer"]')||Ct.closest('g[class*="cursor-pointer"]'),Ln=!ce&&Wt.getState().chordPanelVisible;yn&&!Qt&&!cn&&!nr&&!Pn&&!Sn&&!tr&&!Ln&&(Je(gr=>!gr),at.current&&clearTimeout(at.current),_t())};return document.addEventListener("touchstart",St),_t(),()=>{document.removeEventListener("touchstart",St),at.current&&clearTimeout(at.current)}},[re,ce]);const[Ue,ht]=K.useState(!1),Ae=K.useRef(null),Ke=K.useCallback(()=>{!re||!ce||(ht(!0),Ae.current&&clearTimeout(Ae.current),Ae.current=setTimeout(()=>{ht(!1)},3e3))},[re,ce]);K.useEffect(()=>()=>{Ae.current&&clearTimeout(Ae.current)},[]),K.useEffect(()=>{if(!re)return;const Te=()=>{Ee(!0)};return window.addEventListener("openMobileTimeline",Te),()=>window.removeEventListener("openMobileTimeline",Te)},[re]),K.useEffect(()=>{if(!re)return;const Te=Wt.getState();G&&!Te.timelineVisible?Wt.setState({timelineVisible:!0}):!G&&Te.timelineVisible&&Wt.setState({timelineVisible:!1})},[re,G]),K.useEffect(()=>{const Te=()=>{const _t=window.innerWidth,St=window.innerHeight,Mt=_t<768||St<500&&St<_t,Ct=St<_t&&St<500;if(de(Mt),ve(Ct),Mt&&Ct){const cn=Math.max(200,Math.floor(_t*.33));$(cn)}if(!Mt){const cn=Wt.getState().timelineVisible?152:24,nr=St-48-56-cn-32,Pn=_t-380-40;ae(Math.max(300,Math.min(Pn,nr)))}const Qt=Wt.getState();Mt&&!Ve.current&&(Qt.timelineVisible&&Qt.toggleTimeline(),Qt.chordPanelVisible&&Qt.toggleChordPanel(),Ve.current=!0),!Mt&&_e.current&&!Qt.chordPanelVisible&&(Qt.toggleChordPanel(),_e.current=!1)};return Te(),window.addEventListener("resize",Te),window.addEventListener("orientationchange",Te),()=>{window.removeEventListener("resize",Te),window.removeEventListener("orientationchange",Te)}},[]),K.useEffect(()=>{if(re)return;const Te=window.innerWidth,_t=window.innerHeight,St=t?152:24,Mt=_t-48-56-St-32,Ct=Te-380-40;ae(Math.max(300,Math.min(Ct,Mt)))},[t,re]);const bt=K.useCallback((Te,_t)=>{Y(Te),le(_t)},[]),mt=K.useCallback(()=>{const Te=Math.min(2.5,ie+.2);Y(Te),le(Te>1.3?38:50)},[ie]),st=K.useCallback(()=>{const Te=Math.max(.2,ie-.2);Y(Te),le(Te>1.3?38:50)},[ie]),dt=K.useCallback(Te=>{we(Te)},[]),pt=K.useMemo(()=>re&&(ce||B)?90:0,[re,ce,B]),Nt=re&&(ce||B);K.useEffect(()=>{if(re)if(Nt)if(q.current||(q.current={zoom:ie,origin:ne,pan:{...pe}}),ce){const Te=window.innerHeight,_t=1.65,St=Math.max(.9,Math.min(1.1,Te/400)),Mt=_t*St;Y(Mt),le(48),we({x:-35,y:0})}else Y(1.42),le(42),we({x:-35,y:-30});else q.current&&(Y(q.current.zoom),le(q.current.origin),we(q.current.pan),q.current=null)},[Nt,ce,re]);const je=()=>{L(!0)},ft=(Te,_t,St,Mt)=>{h(Te),f(_t),p(St),y(Mt)},ct=K.useMemo(()=>{const Te=n.sections.reduce((Qt,cn)=>{const nr=cn.measures.reduce((Pn,yn)=>Pn+yn.beats.reduce((Sn,tr)=>Sn+tr.duration,0),0);return Qt+nr},0),_t=n.tempo/60,St=Te/_t,Mt=Math.floor(St/60),Ct=Math.floor(St%60);return`${Mt}:${Ct.toString().padStart(2,"0")}`},[n.sections,n.tempo]),[He,ut]=K.useState(!1);K.useEffect(()=>{const Te=async()=>{try{j2(),await Tu(),await Pl(),ut(!0)}catch(St){console.error("Audio initialization failed:",St)}},_t=async()=>{He||(await E2(),Te())};return document.addEventListener("touchstart",_t,{once:!0}),document.addEventListener("click",_t,{once:!0}),()=>{document.removeEventListener("touchstart",_t),document.removeEventListener("click",_t)}},[He]),K.useEffect(()=>{const Te=_t=>{if((_t.key==="Delete"||_t.key==="Backspace")&&a&&o){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;_t.preventDefault(),u(a,o)}};return window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)},[a,o,u]),K.useEffect(()=>{const Te=_t=>{const St=_t.target;St?.tagName==="INPUT"||St?.tagName==="TEXTAREA"||St?.isContentEditable||_t.metaKey&&_t.key.toLowerCase()==="z"&&(_t.preventDefault(),_t.shiftKey?V&&O():R&&C())};return window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)},[C,O,R,V]);const[vt,ot]=K.useState(!1),[ln,Et]=K.useState([]),Bt=K.useRef(null);K.useEffect(()=>{Et(sf())},[]),K.useEffect(()=>{const Te=_t=>{Bt.current&&!Bt.current.contains(_t.target)&&ot(!1)};return document.addEventListener("mousedown",Te),()=>document.removeEventListener("mousedown",Te)},[]);const pn=()=>{if(n.title==="Untitled Song"||!n.title.trim()){const Te=prompt("Please name your song:",n.title);if(Te===null)return;const _t=Te.trim()||"Untitled Song";h(_t);const St={...n,title:_t};Bx(St)}else Bx(n);Et(sf()),ot(!1)},Tt=Te=>{_(Te),ot(!1)},[gt,zt]=K.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),wn=()=>{zt({isOpen:!0,title:"New Song",message:"Start a new song? Unsaved changes will be lost.",confirmLabel:"Start New",isDestructive:!0,onConfirm:()=>{b(),ot(!1)}})},Me=(Te,_t,St)=>{St.stopPropagation(),zt({isOpen:!0,title:"Delete Song",message:`Are you sure you want to delete "${_t}"? This cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:()=>{yO(Te),Et(sf())}})},yt=152,Rt=()=>{const Te=new $t,_t=Te.internal.pageSize.getWidth(),St=20,Mt=4,Qt=n.sections.reduce((At,an)=>{const Hn=(an.timeSignature||n.timeSignature)[0];return At+an.measures.length*Hn},0)/n.tempo*60,cn=Math.floor(Qt/60),nr=Math.floor(Qt%60),Pn=`${cn}:${nr.toString().padStart(2,"0")}`,yn=n.sections.reduce((At,an)=>At+an.measures.length,0),Sn=n.sections.length;if(Te.setFontSize(22),Te.setFont("helvetica","bold"),Te.setTextColor(0,0,0),Te.text(n.title,St,18),n.artist&&n.artist.trim()){const At=Te.getTextWidth(n.title);Te.setFontSize(14),Te.setFont("helvetica","italic"),Te.setTextColor(100,100,100),Te.text(`by ${n.artist}`,St+At+6,18),Te.setTextColor(0,0,0)}Te.setDrawColor(0,0,0),Te.setLineWidth(.5),Te.line(St,22,_t-St,22),Te.setFontSize(10),Te.setFont("helvetica","normal");const tr=[`Key: ${Mn(e)}`,`${n.timeSignature[0]}/${n.timeSignature[1]}`,`Tempo: ${n.tempo} BPM`,`Duration: ${Pn}`,`${Sn} sections`,`${yn} bars`];Te.text(tr.join("      "),St,30);let Ln=48;const gr=new Set;if(n.sections.forEach(At=>{const an=At.measures.map(dn=>{const Kn=dn.beats.length;return dn.beats.forEach(Gn=>{if(Gn.chord){const Nr=Gn.chord.root,fs={major:"maj",minor:"m",diminished:"dim",augmented:"aug",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m7b5",sus2:"sus2",sus4:"sus4"}[Gn.chord.quality]||Gn.chord.quality||"maj";gr.add(`${Nr}|${fs}`)}}),Kn===1?dn.beats[0]?.chord?.symbol||"":Kn===2?dn.beats.map(Gn=>Gn.chord?.symbol||"").join(" "):dn.beats.map(Gn=>Gn.chord?.symbol||"").join(" ")}),on=an.length===0?1:Math.ceil(an.length/Mt),Wn=10+(an.length===0?12:on*10)+6;if(Ln>48&&Ln+Wn>280&&(Te.addPage(),Ln=20),Te.setFontSize(14),Te.setFont("helvetica","bold"),Te.setTextColor(0,0,0),Te.text(`[${Ih(At,n.sections)}]`,St,Ln),Ln+=10,Te.setFontSize(14),Te.setFont("helvetica","normal"),an.length===0)Te.text("(No chords)",St,Ln),Ln+=12;else for(let dn=0;dn<an.length;dn+=Mt){const Gn=an.slice(dn,dn+Mt).join("  |  ");Te.text(Gn,St,Ln),Ln+=10}Ln+=6}),gr.size>0){const At=Array.from(gr),an=245,on=5,dn=At.length*(22+on)>an,Kn=dn?18:22,Gn=dn?18:20,Nr=dn?22:25,ds=dn?155:170;let fs=0,or=35;const ni=dn?Math.ceil(At.length/2):At.length;Te.setPage(1),At.forEach((ri,Cn)=>{const[Xi,Ns]=ri.split("|"),pi=J3(Xi,Ns);if(!pi)return;dn&&Cn===ni&&(fs=1,or=35);const Zi=fs*Nr,Xr=`${Xi}${Ns==="maj"?"":Ns}`;Te.setFontSize(dn?6:7),Te.setFont("helvetica","bold"),Te.setTextColor(0,0,0),Te.text(Xr,ds+Zi+Gn/2+2,or,{align:"center"}),it(Te,pi,ds+Zi,or+3,dn),or+=Kn+on})}const Le=(At,an)=>{const Hn={intro:"In",verse:"V","pre-chorus":"PC",chorus:"C",bridge:"Br",interlude:"Int",solo:"So",breakdown:"Bd",tag:"Tg",hook:"Hk",outro:"Out"}[At.type]||At.type.charAt(0).toUpperCase(),Wn=an.filter(dn=>dn.type===At.type);if(Wn.length>1){const dn=Wn.findIndex(Kn=>Kn.id===At.id)+1;return`${Hn}${dn}`}return Hn},Be=At=>{const Wn=_t-St*2,dn=n.sections.reduce((Gn,Nr)=>Gn+Nr.measures.length,0);if(dn===0)return;let Kn=St;At.setDrawColor(0,0,0),At.setLineWidth(.4),n.sections.forEach(Gn=>{const Nr=Gn.measures.length/dn*Wn,ds=Kn+2,fs=Kn+Nr-2;At.line(ds,285,fs,285),At.line(ds,281,ds,289),At.line(fs,281,fs,289);const or=Le(Gn,n.sections);At.setFontSize(7),At.setFont("helvetica","normal"),At.setTextColor(0,0,0),At.text(or,Kn+Nr/2,278,{align:"center"}),Kn+=Nr})},nt=Te.getNumberOfPages();for(let At=1;At<=nt;At++)Te.setPage(At),Be(Te);const It=`${n.title.replace(/\s+/g,"-").toLowerCase()}.pdf`,Gt=Te.output("blob");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const At=URL.createObjectURL(Gt);window.open(At,"_blank"),setTimeout(()=>URL.revokeObjectURL(At),1e4)}else vO.saveAs(Gt,It)},it=(Te,_t,St,Mt,Ct=!1)=>{const{frets:Qt,barres:cn,baseFret:nr}=_t,Pn=Ct?2.5:3,yn=Ct?3:4,Sn=4,tr=6,Ln=Ct?1:1.2,gr=Array.from({length:tr},(Gt,Ht)=>St+Ht*Pn),Le=Array.from({length:Sn+1},(Gt,Ht)=>Mt+Ht*yn),Be=nr===1,nt=Pn*(tr-1),It=yn*Sn;Te.setDrawColor(0,0,0),Be?(Te.setLineWidth(1),Te.line(St,Mt,St+nt,Mt)):(Te.setLineWidth(.3),Te.line(St,Mt,St+nt,Mt),Te.setFontSize(Ct?6:7),Te.setFont("helvetica","bold"),Te.text(nr.toString(),St-3,Mt+yn/2+1)),Te.setLineWidth(.2),Le.slice(1).forEach(Gt=>{Te.line(St,Gt,St+nt,Gt)}),gr.forEach(Gt=>{Te.line(Gt,Mt,Gt,Mt+It)}),cn.forEach(Gt=>{const Ht=Qt.map((Hn,Wn)=>({fret:Hn,idx:Wn})).filter(({fret:Hn})=>Hn===Gt);if(Ht.length<2)return;const At=Math.min(...Ht.map(Hn=>Hn.idx)),an=Math.max(...Ht.map(Hn=>Hn.idx)),on=Mt+(Gt-.5)*yn;Te.setLineWidth(Ln*1.4),Te.line(gr[At],on,gr[an],on),Te.setLineWidth(.2)}),Qt.forEach((Gt,Ht)=>{const At=gr[Ht];if(Gt===-1){Te.setFontSize(Ct?6:7),Te.setFont("helvetica","bold"),Te.text("x",At,Mt-1,{align:"center"});return}if(Gt===0){Te.setLineWidth(.3),Te.circle(At,Mt-1.5,.8,"S");return}if(cn.includes(Gt)){const Hn=Qt.findIndex(Wn=>Wn===Gt);if(Ht!==Hn)return}const on=Mt+(Gt-.5)*yn;Te.setFillColor(0,0,0),Te.circle(At,on,Ln,"F")})};return m.jsxs("div",{className:"h-full w-full flex flex-col bg-bg-secondary text-text-primary overflow-hidden",children:[m.jsxs("header",{className:`${re?"h-14":"h-12"} border-b border-border-subtle grid grid-cols-[1fr_auto_1fr] items-center ${re?"px-4":"px-3"} bg-bg-secondary shrink-0 z-20 transition-all duration-300 ease-out ${re&&!ce&&(Xe||B)||re&&ce&&!Ue?"opacity-0 -translate-y-full pointer-events-none absolute top-0 left-0 right-0":"relative"}`,children:[m.jsx("div",{className:"flex items-center gap-2 shrink-0",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"relative",children:m.jsx(TE,{size:re?32:24})}),m.jsx("span",{className:`font-bold ${re?"text-xs":"text-sm"} tracking-tight hidden sm:block text-text-muted`,children:"Songwriter Wheel"})]})}),m.jsx("div",{className:"flex items-center justify-center overflow-hidden",children:m.jsx("span",{onClick:je,className:`${re?"text-xs":"text-sm"} font-medium text-text-primary cursor-pointer hover:text-accent-primary transition-colors px-2 py-1 rounded text-center truncate max-w-[70vw]`,title:"Click to edit song info",children:n.title})}),m.jsxs("div",{className:`flex items-center ${re?"gap-3":"gap-4"} shrink-0 justify-self-end`,children:[!re&&m.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[m.jsx(ek,{size:11,className:"shrink-0"}),m.jsx("span",{className:"leading-none",children:ct})]}),m.jsxs("button",{onClick:()=>P(!0),className:`flex items-center gap-2 p-[10px] ${re?"text-xs":"text-[10px]"} text-text-muted hover:bg-bg-tertiary rounded-lg transition-colors touch-feedback`,children:[m.jsx("span",{className:"uppercase font-bold",children:"Key"}),m.jsx("span",{className:`font-bold text-accent-primary ${re?"text-base":"text-sm"} min-w-[1.5rem] text-center inline-block`,children:Mn(e)})]}),m.jsxs("div",{className:"relative",ref:Bt,children:[m.jsxs("button",{onClick:()=>ot(!vt),className:`flex items-center gap-1.5 ${re?"text-xs px-2 py-1.5 min-w-[44px]":"text-[11px] px-2 py-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback`,children:[m.jsx(bg,{size:re?16:12}),m.jsx("span",{className:"hidden sm:inline",children:"Save"}),m.jsx(Eh,{size:re?12:10,className:`transition-transform ${vt?"rotate-180":""}`})]}),vt&&m.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-[#1a1a24] border border-border-medium rounded-lg shadow-2xl z-50 overflow-hidden",children:[m.jsxs("div",{className:"p-1.5 border-b border-border-subtle bg-[#22222e]",children:[m.jsxs("button",{onClick:pn,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[m.jsx(bg,{size:14,className:"text-accent-primary"}),"Save Current Song"]}),m.jsxs("button",{onClick:wn,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[m.jsx(ck,{size:14,className:"text-green-400"}),"New Song"]})]}),m.jsx("div",{className:"max-h-48 overflow-y-auto bg-[#1a1a24]",children:ln.length===0?m.jsx("p",{className:"px-3 py-4 text-[10px] text-gray-500 text-center",children:"No saved songs yet"}):m.jsxs("div",{className:"p-1.5",children:[m.jsx("p",{className:"px-2 py-1 text-[9px] text-gray-500 uppercase tracking-wider",children:"Saved Songs"}),ln.map(Te=>m.jsxs("div",{onClick:()=>Tt(Te),className:`flex items-center justify-between px-3 py-2 text-xs rounded cursor-pointer transition-colors ${Te.id===n.id?"bg-accent-primary/20 text-accent-primary":"text-gray-300 hover:bg-[#2a2a3a]"}`,children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx(hk,{size:12,className:"shrink-0"}),m.jsx("span",{className:"truncate",children:Te.title})]}),m.jsx("button",{onClick:_t=>Me(Te.id,Te.title,_t),className:"p-1 hover:bg-red-500/20 rounded text-gray-500 hover:text-red-400 shrink-0",children:m.jsx(hf,{size:10})})]},Te.id))]})})]})]}),m.jsxs("button",{onClick:Rt,className:`flex items-center justify-center ${re?"text-xs px-3 py-1.5 min-w-[44px] min-h-[44px] gap-1":"text-[11px] px-2.5 py-1 gap-1.5"} bg-text-primary text-bg-primary rounded font-medium hover:bg-white transition-colors touch-feedback`,children:[m.jsx(s0,{size:re?16:12}),m.jsx("span",{className:re?"text-[10px] font-bold":"hidden sm:inline",children:"PDF"})]})]})]}),m.jsxs("div",{className:`flex-1 flex ${re?ce?"flex-row":"flex-col":"flex-row"} overflow-hidden min-h-0`,children:[m.jsxs("div",{"data-wheel-background":!0,className:`flex flex-col min-w-0 min-h-0 bg-gradient-to-b from-bg-primary to-bg-secondary/30 ${re&&ce?"shrink-0":"flex-1"} ${re?"overflow-hidden":""} relative`,style:re&&ce?{width:`${E}px`,minWidth:"200px",height:"100%"}:void 0,children:[m.jsxs("div",{className:`flex-1 flex flex-col ${re&&!ce?"justify-center":re&&ce?"justify-center items-center":"justify-center items-center pt-2"} ${re?"overflow-hidden":"overflow-visible"}`,children:[re?null:m.jsxs("div",{className:"flex justify-end gap-2 px-2 shrink-0 w-full",children:[m.jsxs("div",{className:"flex items-center bg-bg-secondary/60 backdrop-blur-sm rounded-full px-0.5 border border-border-subtle/40",children:[m.jsx("button",{onClick:st,disabled:ie<=.2,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom out",children:m.jsx(Tk,{size:8})}),m.jsxs("span",{className:"text-[7px] w-5 text-text-muted text-center font-medium",children:[Math.round(ie*100),"%"]}),m.jsx("button",{onClick:mt,disabled:ie>=2.5,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom in",children:m.jsx(Oc,{size:8})})]}),m.jsx("button",{onClick:()=>I(!0),className:"no-touch-enlarge w-8 h-8 flex items-center justify-center bg-bg-secondary/60 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/40",title:"Songwriter Wheel Guide",children:m.jsx(Dh,{size:16})})]}),m.jsx("div",{className:`flex-1 flex justify-center ${re?"items-center":""} ${re&&ce?"p-1 overflow-hidden":re&&!ce?"px-0 py-0":"p-2 overflow-visible"}`,onClick:Ke,children:m.jsx("div",{className:"relative flex items-center justify-center",style:re&&ce?{width:"calc(100dvh - 60px)",height:"calc(100dvh - 60px)",maxWidth:"100%",maxHeight:"100%",aspectRatio:"1 / 1"}:re&&!ce?{width:Xe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",height:Xe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxWidth:Xe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxHeight:Xe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",aspectRatio:"1 / 1"}:{width:`${te}px`,height:`${te}px`,aspectRatio:"1 / 1"},children:m.jsx(bj,{zoomScale:ie,zoomOriginY:ne,onZoomChange:bt,panOffset:pe,onPanChange:dt,rotationOffset:pt,disableModeToggle:pt!==0})})})]}),re&&m.jsx("button",{onClick:()=>I(!0),onTouchEnd:Te=>{Te.preventDefault(),Te.stopPropagation(),I(!0)},className:`absolute ${ce?"top-2 right-2 w-8 h-8":"top-3 right-3 w-11 h-11"} flex items-center justify-center bg-bg-secondary/90 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors shadow-lg border border-border-subtle z-50`,style:{touchAction:"auto",pointerEvents:"auto"},title:"Songwriter Wheel Guide",children:m.jsx(Dh,{size:ce?14:20})}),re?null:t?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle overflow-hidden flex flex-col",style:{height:yt},children:[m.jsxs("div",{className:"shrink-0 flex items-center justify-between px-2 py-1 border-b border-border-subtle/50 bg-bg-elevated/80",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("button",{onClick:C,disabled:!R,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Z)",children:[m.jsx(Sp,{size:12}),m.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Undo"})]}),m.jsxs("button",{onClick:O,disabled:!V,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Z)",children:[m.jsx(Yh,{size:12}),m.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Redo"})]})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("button",{onClick:()=>{zt({isOpen:!0,title:"Clear Timeline",message:"Are you sure you want to clear all chords from the timeline? This action cannot be undone.",confirmLabel:"Clear",isDestructive:!0,onConfirm:c})},className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-red-400 rounded hover:bg-red-400/10 transition-colors flex items-center gap-0.5",title:"Clear all chords from timeline",children:[m.jsx(hf,{size:8}),m.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Clear"})]}),m.jsxs("button",{onClick:s,className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-text-primary rounded hover:bg-bg-tertiary transition-colors flex items-center gap-0.5",title:"Hide timeline",children:[m.jsx(Eh,{size:8}),m.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Hide"})]})]})]}),m.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:m.jsx(Ag,{isOpen:!0,onToggle:s,hideCloseButton:!0,isCompact:!1,isLandscape:!1})})]})}):m.jsx("div",{className:"h-6 bg-bg-secondary border-t border-border-subtle flex items-center justify-center shrink-0",children:m.jsxs("button",{onClick:s,className:"px-3 h-full flex items-center gap-1 text-[8px] text-text-muted hover:text-text-primary hover:bg-bg-tertiary transition-colors",title:"Show timeline",children:[m.jsx(i3,{size:10}),m.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Timeline"})]})})]}),re&&ce?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:`flex h-full ${G?"flex-1":"justify-end"} shrink-0`,style:{minWidth:G?"100px":"28px",transition:"all 0.25s ease-out"},children:[m.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${G?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{G&&!B&&Wt.getState().toggleChordPanel(),Ee(!G)},children:[m.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),m.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:G?"":"Timeline"})]}),G&&m.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle",children:m.jsx(Ag,{isOpen:!0,onToggle:()=>Ee(!1),hideCloseButton:!0,isCompact:B,isLandscape:!0})})]}),m.jsxs("div",{className:`flex h-full ${B?"flex-1":""} shrink-0`,style:{minWidth:B?"100px":"28px",transition:"all 0.25s ease-out"},children:[B&&m.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle","data-chord-details":!0,children:m.jsx(kg,{variant:G?"landscape-panel":"landscape-expanded"})}),m.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${B?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{B&&!G&&Ee(!0),Wt.getState().toggleChordPanel()},children:[m.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),m.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:B?"":"Details"})]})]})]}):re?null:m.jsx(kg,{variant:"sidebar"})]}),re&&!ce&&m.jsx(OO,{mobileTimelineOpen:G,setMobileTimelineOpen:Ee,chordPanelVisible:B,setChordPanelScrolledToBottom:et}),(U||!(re&&!ce&&(Xe||B&&!xt)))&&m.jsx("div",{className:"shrink-0 z-30 relative bg-bg-elevated transition-all duration-300",children:m.jsx(xE,{})}),m.jsx(xO,{isOpen:gt.isOpen,onClose:()=>zt(Te=>({...Te,isOpen:!1})),onConfirm:gt.onConfirm,title:gt.title,message:gt.message,confirmLabel:gt.confirmLabel,isDestructive:gt.isDestructive}),m.jsx(CE,{onSave:pn,onExport:Rt}),m.jsx(kO,{isOpen:j,onClose:()=>I(!1)}),m.jsx(MO,{isOpen:X,onClose:()=>P(!1)}),m.jsx(EO,{isOpen:z,onClose:()=>L(!1),title:n.title,artist:n.artist||"",tags:n.tags||[],timeSignature:n.timeSignature,onSave:ft}),F&&m.jsx(LO,{onClose:()=>J(!1)}),m.jsx(jO,{onOpenHelp:()=>I(!0)})]})}cS.createRoot(document.getElementById("root")).render(m.jsxs(K.StrictMode,{children:[m.jsx(DO,{}),m.jsx(vS,{})]}));export{ar as _,j1 as c,eS as g};
